{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to MkDocs For full documentation visit mkdocs.org . Commands mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit. Project layout mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Welcome to MkDocs"},{"location":"#welcome-to-mkdocs","text":"For full documentation visit mkdocs.org .","title":"Welcome to MkDocs"},{"location":"#commands","text":"mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit.","title":"Commands"},{"location":"#project-layout","text":"mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Project layout"},{"location":"2.x/","text":"dcat-admin Dcat Admin is a backend builder based on Laravel-admin that allows you to build a beautiful backend with very little code. Dcat Admin is based on Laravel-admin and has been rewritten with a lot of useful features and interfaces to help you build a beautiful and functional backend in a simple and comfortable way Features model-grid support for fast data table construction model-form support for rapid data form building model-tree support for fast tree construction Built-in permission system Nearly 100 built-in page components, including 40+ form element components, and support for extension components Multiple model relationships for Laravel support Multi-database support for mysql , mongodb , pgsql , etc. Support for the introduction of third-party front-end libraries web implementation of database and artisan command-line tools Support for custom charts multiple common web components Support for local and oss file uploads Demo Open demo \uff0cand login with admin/admin . Requirements PHP >= 7.1 Laravel >= 5.5.0 Fileinfo PHP Extension Installation composer require dcat/admin Dependencies dcat-admin is based on the following components or services: Laravel AdminLTE Datetimepicker font-awesome moment Google map Tencent map bootstrap-fileinput jquery-pjax Nestable toastr X-editable bootstrap-number-input fontawesome-iconpicker Thanks Laravel-admin Contact QQ Group: License dcat-admin is licensed under The MIT License (MIT) .","title":"dcat-admin"},{"location":"2.x/#dcat-admin","text":"Dcat Admin is a backend builder based on Laravel-admin that allows you to build a beautiful backend with very little code. Dcat Admin is based on Laravel-admin and has been rewritten with a lot of useful features and interfaces to help you build a beautiful and functional backend in a simple and comfortable way","title":"dcat-admin"},{"location":"2.x/#features","text":"model-grid support for fast data table construction model-form support for rapid data form building model-tree support for fast tree construction Built-in permission system Nearly 100 built-in page components, including 40+ form element components, and support for extension components Multiple model relationships for Laravel support Multi-database support for mysql , mongodb , pgsql , etc. Support for the introduction of third-party front-end libraries web implementation of database and artisan command-line tools Support for custom charts multiple common web components Support for local and oss file uploads","title":"Features"},{"location":"2.x/#demo","text":"Open demo \uff0cand login with admin/admin .","title":"Demo"},{"location":"2.x/#requirements","text":"PHP >= 7.1 Laravel >= 5.5.0 Fileinfo PHP Extension","title":"Requirements"},{"location":"2.x/#installation","text":"composer require dcat/admin","title":"Installation"},{"location":"2.x/#dependencies","text":"dcat-admin is based on the following components or services: Laravel AdminLTE Datetimepicker font-awesome moment Google map Tencent map bootstrap-fileinput jquery-pjax Nestable toastr X-editable bootstrap-number-input fontawesome-iconpicker","title":"Dependencies"},{"location":"2.x/#thanks","text":"Laravel-admin","title":"Thanks"},{"location":"2.x/#contact","text":"QQ Group:","title":"Contact"},{"location":"2.x/#license","text":"dcat-admin is licensed under The MIT License (MIT) .","title":"License"},{"location":"2.x/1-x-upgrade/","text":"v1.x\u7248\u672c\u5347\u7ea7\u6307\u5357 \u524d\u8a00 \u672c\u7ae0\u8282\u5185\u5bb9\u53ea\u5305\u542b 1.x \u7248\u672c\u4e2d API \u6539\u52a8\u7684\u90e8\u5206\uff0c\u4e0d\u5305\u542b\u65b0\u589e\u7279\u6027\u6216\u5bf9\u7528\u6237\u4f7f\u7528\u65e0\u5f71\u54cd\u7684\u6539\u52a8\u8bf4\u660e\uff0c 2.0 \u7684\u5177\u4f53\u7248\u672c\u53d8\u5316\u8bf4\u660e\u8bf7\u53c2\u8003 2.0\u6709\u54ea\u4e9b\u53d8\u5316\uff1f \u9884\u8ba1\u5347\u7ea7\u65f6\u95f4\uff1a60 \u5206\u949f 1.\u521b\u5efa\u65b0\u5206\u652f\uff0c\u5907\u4efd\u914d\u7f6e\u6587\u4ef6 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5206\u652f\uff0c\u7136\u540e\u5907\u4efd\u914d\u7f6e\u6587\u4ef6 config/admin.php \u547d\u540d\u4e3a config/admin.bak.php \uff0c\u65b9\u4fbf\u540e\u7eed\u5bf9\u6bd4\u914d\u7f6e\u53d8\u52a8\u3002 2.\u66f4\u65b0composer\u4f9d\u8d56 \u5148\u5378\u8f7d 1.x \u7248\u672c composer remove dcat/laravel-admin \u518d\u5b89\u88c5 composer require dcat/laravel-admin:\"2.*\" \u5b89\u88c5\u6210\u529f\u540e \u5220\u9664 public/vendors \u76ee\u5f55 \u91cd\u65b0\u53d1\u5e03\u8d44\u6e90 php artisan admin:publish --force \u6839\u636e\u4e0a\u9762\u5907\u4efd\u540e\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u628a\u4fee\u6539\u8fc7\u7684\u53c2\u6570\u5199\u5230\u65b0\u7684\u914d\u7f6e\u6587\u4ef6 config/admin.php \u4e2d\uff0c\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f 1.x \u7684\u9ed8\u8ba4\u4e3b\u9898\u8272\u662f indigo \uff08\u5df2\u88ab\u5e9f\u5f03\uff09\uff0c\u5728\u65b0\u7248\u672c\u4e2d\u5df2\u7ecf\u66ff\u6362\u6210 default \u4e86 \u8c03\u6574\u8bed\u8a00\u5305\uff0c\u65b0\u7248\u672c\u4e2d\u8bed\u8a00\u5305\u76ee\u5f55\u7531 zh-CN \u53d8\u6210\u4e86 zh_CN \uff0c\u9700\u8981\u628a\u81ea\u5b9a\u4e49\u7684\u7ffb\u8bd1\u6587\u4ef6\u79fb\u52a8\u5230\u65b0\u76ee\u5f55\uff0c\u5e76\u4e14 \u83dc\u5355\u6807\u9898 \u7684\u7ffb\u8bd1\u4e5f\u72ec\u7acb\u51fa\u6765\u5230 menus.php \u4e2d\u4e86 \u8fd0\u884c\u6570\u636e\u5e93\u8fc1\u79fb\u547d\u4ee4\u547d\u4ee4 php artisan migrate \uff0c\u65b0\u7248\u672c\u4e2d\u65b0\u589e\u4e86\u4e24\u4e2a\u8868 admin_settings \u4ee5\u53ca admin_extensions 3.\u5168\u5c40\u66f4\u6539\u547d\u540d\u7a7a\u95f4 \u5168\u5c40\u641c\u7d22\u547d\u540d\u7a7a\u95f4 Dcat\\Admin\\Controllers \u5e76\u66ff\u6362\u4e3a Dcat\\Admin\\Http\\Controllers \u5168\u5c40\u641c\u7d22\u547d\u540d\u7a7a\u95f4 Dcat\\Admin\\Auth \u5e76\u66ff\u6362\u4e3a Dcat\\Admin\\Http\\Auth 4.\u8868\u683c\u90e8\u5206\u53d8\u52a8 1.\u5b57\u6bb5\u9690\u85cf\u529f\u80fd\u8c03\u6574\uff0c\u65e7\u7248\u672c responsive \u65b9\u6cd5\u5df2\u5e9f\u5f03\uff0c\u5728\u65b0\u7248\u672c\u4e2d\u5f00\u542f\u5b57\u6bb5\u9690\u85cf\u529f\u80fd\u65b9\u6cd5\u5982\u4e0b // \u5f00\u542f\u5b57\u6bb5\u9009\u62e9\u5668\u529f\u80fd $grid->showColumnSelector(); // \u8bbe\u7f6e\u9ed8\u8ba4\u9690\u85cf\u5b57\u6bb5 $grid->hideColumns(['field1', ...]); 2.\u8868\u683c collection \u3001 fetching \u7b49\u65b9\u6cd5\u5df2\u88ab\u79fb\u9664\uff0c\u5728\u65b0\u7248\u672c\u4e2d\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u4e8b\u4ef6\u4ee3\u66ff use Dcat\\Admin\\Grid; use Illuminate\\Support\\Collection; // \u4f7f\u7528 Grid\\Events\\Fetched \u4e8b\u4ef6\u4ee3\u66ff collection $grid->listen(Grid\\Events\\Fetched::class, function ($grid, Collection $rows) { $rows->transform(function ($row) { // \u66f4\u6539\u884c\u6570\u636e $row['name'] = $row['first_name'].' '.$row['last_name']; return $row; }); }); // \u4f7f\u7528 Grid\\Events\\Fetching \u4e8b\u4ef6\u4ee3\u66ff fetching $grid->listen(Grid\\Events\\Fetching::class, function ($grid) { }); 3.\u8868\u683c\u884c\u76f8\u5173\u95ed\u5305\u4e2d\u5141\u8bb8\u4f7f\u7528\u6a21\u578b $grid->column('avatar')->display(function ({ // \u53ef\u76f4\u63a5\u8bbf\u95ee\u6a21\u578b\u76f8\u5173\u65b9\u6cd5 return $this->getAvatar(); }); 4.\u8bbe\u7f6e\u8def\u7531\u524d\u7f00\u65b9\u6cd5\u7531 resource \u8c03\u6574\u4e3a setResource $grid->setResource('auth/users'); 5.\u6811\u5f62\u8868\u683c tree \u65b9\u6cd5\u5373\u5c06\u88ab\u5e9f\u5f03\uff0c\u5c06\u4f1a\u79fb\u52a8\u5230\u6269\u5c55\u4e2d\u5fc3 5.\u8868\u5355\u90e8\u5206\u53d8\u52a8 1.\u8c03\u6574\u8868\u5355\u5904\u7406\u54cd\u5e94\u65b9\u6cd5\uff0c\u65e7\u7248\u672c\u4e2d\u7684 success \u3001 error \u3001 redirect \u4ee5\u53ca location \u65b9\u6cd5\u5df2\u88ab\u79fb\u9664\uff0c \u5728 2.0 \u4e2d\u6211\u4eec\u8ba9\u8868\u5355\u7684\u54cd\u5e94\u65b9\u6cd5\u548c action \u7684\u54cd\u5e94\u65b9\u6cd5\u7edf\u4e00\u4e86\u8d77\u6765\uff0c\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003\u6587\u6863 \u52a8\u4f5c\u548c\u8868\u5355\u54cd\u5e94 \uff0c\u793a\u4f8b $form->saving(function (Form $form) { return $form ->response() ->success('\u4fdd\u5b58\u6210\u529f') ->script('console.log(\"\u6267\u884cJS\u4ee3\u7801\")') ->redirect('auth/users'); }); \u5982\u679c\u662f\u5728 \u5de5\u5177\u8868\u5355 \u4e2d\uff0c\u7528\u6cd5\u5982\u4e0b public function handle(array $input) { ... return $this ->response() ->alert() ->success('\u6210\u529f') ->detail('\u8be6\u7ec6\u5185\u5bb9'); } 2.\u8c03\u6574\u8868\u5355 block \u5e03\u5c40\u529f\u80fd\uff0c\u5e76\u5e9f\u5f03 setDefaultBlockWidth \u65b9\u6cd5\uff0c\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003\u6587\u6863 \u8868\u5355block\u5e03\u5c40 \uff0c\u793a\u4f8b $form->block(8, function (Form\\BlockForm $form) { $form->title('\u57fa\u672c\u8bbe\u7f6e'); $form->showFooter(); $form->width(9, 2); $form->column(6, function (Form\\BlockForm $form) { $form->display('id'); $form->text('name'); $form->email('email'); $form->image('avatar'); $form->password('password'); }); $form->column(6, function (Form\\BlockForm $form) { $form->text('username'); $form->email('mobile'); $form->textarea('description'); }); }); $form->block(4, function (Form\\BlockForm $form) { $form->title('\u5206\u57572'); $form->text('nickname'); $form->number('age'); $form->radio('status')->options(['1' => '\u9ed8\u8ba4', 2 => '\u51bb\u7ed3'])->default(1); $form->next(function (Form\\BlockForm $form) { $form->title('\u5206\u57573'); $form->date('birthday'); $form->date('created_at'); }); }); 3.\u5e9f\u5f03\u8868\u5355\u76f4\u63a5\u63d0\u4ea4\uff0c\u53ea\u4fdd\u7559 ajax \u63d0\u4ea4\u7684\u65b9\u5f0f\uff0c\u5e76\u91cd\u547d\u540d disableAjaxSubmit \u65b9\u6cd5\u4e3a ajax $form->ajax(false); 4.\u5e9f\u5f03\u5206\u6b65\u8868\u5355\uff0c\u65b0\u7248\u672c\u8bf7\u4f7f\u7528 \u5206\u6b65\u8868\u5355\u6269\u5c55 \u4ee3\u66ff 6. map \u4ee5\u53ca listbox \u3001 slider \u4e5f\u5373\u5c06\u5e9f\u5f03\uff0c\u5e76\u79fb\u52a8\u6269\u5c55\u4e2d\u5fc3 7.\u8868\u5355\u5b57\u6bb5\u6269\u5c55\u529f\u80fd\u53d8\u52a8\uff0c\u5177\u4f53\u8bf7\u53c2\u8003\u6587\u6863 \u8868\u5355\u5b57\u6bb5\u6269\u5c55 \u7ae0\u8282 6.\u6570\u636e\u4ed3\u5e93\u90e8\u5206\u53d8\u52a8 1.\u6570\u636e\u4ed3\u5e93\u7684\u63a5\u53e3\u547d\u540d\u505a\u4e86\u7b80\u5316\u5904\u7406\uff0c\u65b0\u7684 interface \u5982\u4e0b interface Repository { /** * \u83b7\u53d6\u4e3b\u952e\u540d\u79f0. * * @return string */ public function getKeyName(); /** * \u83b7\u53d6\u521b\u5efa\u65f6\u95f4\u5b57\u6bb5. * * @return string */ public function getCreatedAtColumn(); /** * \u83b7\u53d6\u66f4\u65b0\u65f6\u95f4\u5b57\u6bb5. * * @return string */ public function getUpdatedAtColumn(); /** * \u662f\u5426\u4f7f\u7528\u8f6f\u5220\u9664. * * @return bool */ public function isSoftDeletes(); /** * \u83b7\u53d6Grid\u8868\u683c\u6570\u636e. * * @param Grid\\Model $model * * @return \\Illuminate\\Contracts\\Pagination\\LengthAwarePaginator|Collection|array */ public function get(Grid\\Model $model); /** * \u83b7\u53d6\u7f16\u8f91\u9875\u9762\u6570\u636e. * * @param Form $form * * @return array|\\Illuminate\\Contracts\\Support\\Arrayable */ public function edit(Form $form); /** * \u83b7\u53d6\u8be6\u60c5\u9875\u9762\u6570\u636e. * * @param Show $show * * @return array|\\Illuminate\\Contracts\\Support\\Arrayable */ public function detail(Show $show); /** * \u65b0\u589e\u8bb0\u5f55. * * @param Form $form * * @return mixed */ public function store(Form $form); /** * \u67e5\u8be2\u66f4\u65b0\u524d\u7684\u884c\u6570\u636e. * * @param Form $form * * @return array|\\Illuminate\\Contracts\\Support\\Arrayable */ public function updating(Form $form); /** * \u66f4\u65b0\u6570\u636e. * * @param Form $form * * @return bool */ public function update(Form $form); /** * \u5220\u9664\u6570\u636e. * * @param Form $form * @param array $deletingData * * @return mixed */ public function delete(Form $form, array $deletingData); /** * \u67e5\u8be2\u5220\u9664\u524d\u7684\u884c\u6570\u636e. * * @param Form $form * * @return array|\\Illuminate\\Contracts\\Support\\Arrayable */ public function deleting(Form $form); } 2. EloquentRepository::eloquent() \u91cd\u547d\u540d\u4e3a EloquentRepository::model() 7.Section\u53d8\u52a8 \u5728\u65b0\u7248\u672c\u4e2d AdminSection \u5df2\u88ab\u79fb\u9664\uff0c\u8bf7\u4f7f\u7528 Dcat\\Admin\\Admin::SECTION \u5e38\u91cf\u4ee3\u66ff use Dcat\\Admin\\Admin; admin_inject_default_section(Admin::SECTION['HEAD'], function () { return ...; }); 8.\u6269\u5c55 \u6269\u5c55\u76f8\u5173\u53d8\u52a8\u8bf7\u53c2\u8003\u6587\u6863 \u6269\u5c55 9.\u767b\u5f55\u903b\u8f91 1.\u767b\u5f55\u6a21\u677f\uff0c\u5982\u679c\u4f60\u5728\u65e7\u9879\u76ee\u4e2d\u81ea\u5b9a\u4e49\u8fc7\u767b\u5f55\u6a21\u677f\uff0c\u5219\u9700\u8981\u8c03\u6574\u767b\u5f55\u6a21\u677f\u4e2d\u7684 JS \u4ee3\u7801 Dcat.ready(function () { // ajax\u8868\u5355\u63d0\u4ea4 $('#login-form').form({ validate: true, }); }); 2.\u767b\u5f55\u903b\u8f91\uff0c\u5982\u679c\u91cd\u5199\u8fc7\u767b\u5f55\u903b\u8f91\uff0c\u5219\u6700\u540e\u767b\u5f55\u6210\u529f\u7684\u54cd\u5e94\u65b9\u6cd5\u9700\u8981\u4f7f\u7528 sendLoginResponse 10.\u5176\u4ed6\u53d8\u52a8 1.\u8d44\u6e90\u6ce8\u518c use Dcat\\Admin\\Admin; // \u6ce8\u518c\u8d44\u6e90\u8def\u5f84\u522b\u540d Admin::asset()->alias('test', 'assets/test'); Admin::asset()->alias('\u540d\u79f0', [ 'js' => [ // @test \u4f1a\u5224\u5b9a\u4e3a\u522b\u540d '@test/test.js', ], 'css' => [ '@test/test.css', ], ]); // \u52a0\u8f7d\u8d44\u6e90 Admin::asset()->require('@\u540d\u79f0'); // \u4ec5\u52a0\u8f7d js Admin::js('@\u540d\u79f0'); // \u4ec5\u52a0\u8f7d css Admin::css('@\u540d\u79f0');","title":"v1.x\u7248\u672c\u5347\u7ea7\u6307\u5357"},{"location":"2.x/1-x-upgrade/#v1x","text":"","title":"v1.x\u7248\u672c\u5347\u7ea7\u6307\u5357"},{"location":"2.x/1-x-upgrade/#_1","text":"\u672c\u7ae0\u8282\u5185\u5bb9\u53ea\u5305\u542b 1.x \u7248\u672c\u4e2d API \u6539\u52a8\u7684\u90e8\u5206\uff0c\u4e0d\u5305\u542b\u65b0\u589e\u7279\u6027\u6216\u5bf9\u7528\u6237\u4f7f\u7528\u65e0\u5f71\u54cd\u7684\u6539\u52a8\u8bf4\u660e\uff0c 2.0 \u7684\u5177\u4f53\u7248\u672c\u53d8\u5316\u8bf4\u660e\u8bf7\u53c2\u8003 2.0\u6709\u54ea\u4e9b\u53d8\u5316\uff1f \u9884\u8ba1\u5347\u7ea7\u65f6\u95f4\uff1a60 \u5206\u949f","title":"\u524d\u8a00"},{"location":"2.x/1-x-upgrade/#1","text":"\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5206\u652f\uff0c\u7136\u540e\u5907\u4efd\u914d\u7f6e\u6587\u4ef6 config/admin.php \u547d\u540d\u4e3a config/admin.bak.php \uff0c\u65b9\u4fbf\u540e\u7eed\u5bf9\u6bd4\u914d\u7f6e\u53d8\u52a8\u3002","title":"1.\u521b\u5efa\u65b0\u5206\u652f\uff0c\u5907\u4efd\u914d\u7f6e\u6587\u4ef6"},{"location":"2.x/1-x-upgrade/#2composer","text":"\u5148\u5378\u8f7d 1.x \u7248\u672c composer remove dcat/laravel-admin \u518d\u5b89\u88c5 composer require dcat/laravel-admin:\"2.*\" \u5b89\u88c5\u6210\u529f\u540e \u5220\u9664 public/vendors \u76ee\u5f55 \u91cd\u65b0\u53d1\u5e03\u8d44\u6e90 php artisan admin:publish --force \u6839\u636e\u4e0a\u9762\u5907\u4efd\u540e\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u628a\u4fee\u6539\u8fc7\u7684\u53c2\u6570\u5199\u5230\u65b0\u7684\u914d\u7f6e\u6587\u4ef6 config/admin.php \u4e2d\uff0c\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f 1.x \u7684\u9ed8\u8ba4\u4e3b\u9898\u8272\u662f indigo \uff08\u5df2\u88ab\u5e9f\u5f03\uff09\uff0c\u5728\u65b0\u7248\u672c\u4e2d\u5df2\u7ecf\u66ff\u6362\u6210 default \u4e86 \u8c03\u6574\u8bed\u8a00\u5305\uff0c\u65b0\u7248\u672c\u4e2d\u8bed\u8a00\u5305\u76ee\u5f55\u7531 zh-CN \u53d8\u6210\u4e86 zh_CN \uff0c\u9700\u8981\u628a\u81ea\u5b9a\u4e49\u7684\u7ffb\u8bd1\u6587\u4ef6\u79fb\u52a8\u5230\u65b0\u76ee\u5f55\uff0c\u5e76\u4e14 \u83dc\u5355\u6807\u9898 \u7684\u7ffb\u8bd1\u4e5f\u72ec\u7acb\u51fa\u6765\u5230 menus.php \u4e2d\u4e86 \u8fd0\u884c\u6570\u636e\u5e93\u8fc1\u79fb\u547d\u4ee4\u547d\u4ee4 php artisan migrate \uff0c\u65b0\u7248\u672c\u4e2d\u65b0\u589e\u4e86\u4e24\u4e2a\u8868 admin_settings \u4ee5\u53ca admin_extensions","title":"2.\u66f4\u65b0composer\u4f9d\u8d56"},{"location":"2.x/1-x-upgrade/#3","text":"\u5168\u5c40\u641c\u7d22\u547d\u540d\u7a7a\u95f4 Dcat\\Admin\\Controllers \u5e76\u66ff\u6362\u4e3a Dcat\\Admin\\Http\\Controllers \u5168\u5c40\u641c\u7d22\u547d\u540d\u7a7a\u95f4 Dcat\\Admin\\Auth \u5e76\u66ff\u6362\u4e3a Dcat\\Admin\\Http\\Auth","title":"3.\u5168\u5c40\u66f4\u6539\u547d\u540d\u7a7a\u95f4"},{"location":"2.x/1-x-upgrade/#4","text":"1.\u5b57\u6bb5\u9690\u85cf\u529f\u80fd\u8c03\u6574\uff0c\u65e7\u7248\u672c responsive \u65b9\u6cd5\u5df2\u5e9f\u5f03\uff0c\u5728\u65b0\u7248\u672c\u4e2d\u5f00\u542f\u5b57\u6bb5\u9690\u85cf\u529f\u80fd\u65b9\u6cd5\u5982\u4e0b // \u5f00\u542f\u5b57\u6bb5\u9009\u62e9\u5668\u529f\u80fd $grid->showColumnSelector(); // \u8bbe\u7f6e\u9ed8\u8ba4\u9690\u85cf\u5b57\u6bb5 $grid->hideColumns(['field1', ...]); 2.\u8868\u683c collection \u3001 fetching \u7b49\u65b9\u6cd5\u5df2\u88ab\u79fb\u9664\uff0c\u5728\u65b0\u7248\u672c\u4e2d\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u4e8b\u4ef6\u4ee3\u66ff use Dcat\\Admin\\Grid; use Illuminate\\Support\\Collection; // \u4f7f\u7528 Grid\\Events\\Fetched \u4e8b\u4ef6\u4ee3\u66ff collection $grid->listen(Grid\\Events\\Fetched::class, function ($grid, Collection $rows) { $rows->transform(function ($row) { // \u66f4\u6539\u884c\u6570\u636e $row['name'] = $row['first_name'].' '.$row['last_name']; return $row; }); }); // \u4f7f\u7528 Grid\\Events\\Fetching \u4e8b\u4ef6\u4ee3\u66ff fetching $grid->listen(Grid\\Events\\Fetching::class, function ($grid) { }); 3.\u8868\u683c\u884c\u76f8\u5173\u95ed\u5305\u4e2d\u5141\u8bb8\u4f7f\u7528\u6a21\u578b $grid->column('avatar')->display(function ({ // \u53ef\u76f4\u63a5\u8bbf\u95ee\u6a21\u578b\u76f8\u5173\u65b9\u6cd5 return $this->getAvatar(); }); 4.\u8bbe\u7f6e\u8def\u7531\u524d\u7f00\u65b9\u6cd5\u7531 resource \u8c03\u6574\u4e3a setResource $grid->setResource('auth/users'); 5.\u6811\u5f62\u8868\u683c tree \u65b9\u6cd5\u5373\u5c06\u88ab\u5e9f\u5f03\uff0c\u5c06\u4f1a\u79fb\u52a8\u5230\u6269\u5c55\u4e2d\u5fc3","title":"4.\u8868\u683c\u90e8\u5206\u53d8\u52a8"},{"location":"2.x/1-x-upgrade/#5","text":"1.\u8c03\u6574\u8868\u5355\u5904\u7406\u54cd\u5e94\u65b9\u6cd5\uff0c\u65e7\u7248\u672c\u4e2d\u7684 success \u3001 error \u3001 redirect \u4ee5\u53ca location \u65b9\u6cd5\u5df2\u88ab\u79fb\u9664\uff0c \u5728 2.0 \u4e2d\u6211\u4eec\u8ba9\u8868\u5355\u7684\u54cd\u5e94\u65b9\u6cd5\u548c action \u7684\u54cd\u5e94\u65b9\u6cd5\u7edf\u4e00\u4e86\u8d77\u6765\uff0c\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003\u6587\u6863 \u52a8\u4f5c\u548c\u8868\u5355\u54cd\u5e94 \uff0c\u793a\u4f8b $form->saving(function (Form $form) { return $form ->response() ->success('\u4fdd\u5b58\u6210\u529f') ->script('console.log(\"\u6267\u884cJS\u4ee3\u7801\")') ->redirect('auth/users'); }); \u5982\u679c\u662f\u5728 \u5de5\u5177\u8868\u5355 \u4e2d\uff0c\u7528\u6cd5\u5982\u4e0b public function handle(array $input) { ... return $this ->response() ->alert() ->success('\u6210\u529f') ->detail('\u8be6\u7ec6\u5185\u5bb9'); } 2.\u8c03\u6574\u8868\u5355 block \u5e03\u5c40\u529f\u80fd\uff0c\u5e76\u5e9f\u5f03 setDefaultBlockWidth \u65b9\u6cd5\uff0c\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003\u6587\u6863 \u8868\u5355block\u5e03\u5c40 \uff0c\u793a\u4f8b $form->block(8, function (Form\\BlockForm $form) { $form->title('\u57fa\u672c\u8bbe\u7f6e'); $form->showFooter(); $form->width(9, 2); $form->column(6, function (Form\\BlockForm $form) { $form->display('id'); $form->text('name'); $form->email('email'); $form->image('avatar'); $form->password('password'); }); $form->column(6, function (Form\\BlockForm $form) { $form->text('username'); $form->email('mobile'); $form->textarea('description'); }); }); $form->block(4, function (Form\\BlockForm $form) { $form->title('\u5206\u57572'); $form->text('nickname'); $form->number('age'); $form->radio('status')->options(['1' => '\u9ed8\u8ba4', 2 => '\u51bb\u7ed3'])->default(1); $form->next(function (Form\\BlockForm $form) { $form->title('\u5206\u57573'); $form->date('birthday'); $form->date('created_at'); }); }); 3.\u5e9f\u5f03\u8868\u5355\u76f4\u63a5\u63d0\u4ea4\uff0c\u53ea\u4fdd\u7559 ajax \u63d0\u4ea4\u7684\u65b9\u5f0f\uff0c\u5e76\u91cd\u547d\u540d disableAjaxSubmit \u65b9\u6cd5\u4e3a ajax $form->ajax(false); 4.\u5e9f\u5f03\u5206\u6b65\u8868\u5355\uff0c\u65b0\u7248\u672c\u8bf7\u4f7f\u7528 \u5206\u6b65\u8868\u5355\u6269\u5c55 \u4ee3\u66ff 6. map \u4ee5\u53ca listbox \u3001 slider \u4e5f\u5373\u5c06\u5e9f\u5f03\uff0c\u5e76\u79fb\u52a8\u6269\u5c55\u4e2d\u5fc3 7.\u8868\u5355\u5b57\u6bb5\u6269\u5c55\u529f\u80fd\u53d8\u52a8\uff0c\u5177\u4f53\u8bf7\u53c2\u8003\u6587\u6863 \u8868\u5355\u5b57\u6bb5\u6269\u5c55 \u7ae0\u8282","title":"5.\u8868\u5355\u90e8\u5206\u53d8\u52a8"},{"location":"2.x/1-x-upgrade/#6","text":"1.\u6570\u636e\u4ed3\u5e93\u7684\u63a5\u53e3\u547d\u540d\u505a\u4e86\u7b80\u5316\u5904\u7406\uff0c\u65b0\u7684 interface \u5982\u4e0b interface Repository { /** * \u83b7\u53d6\u4e3b\u952e\u540d\u79f0. * * @return string */ public function getKeyName(); /** * \u83b7\u53d6\u521b\u5efa\u65f6\u95f4\u5b57\u6bb5. * * @return string */ public function getCreatedAtColumn(); /** * \u83b7\u53d6\u66f4\u65b0\u65f6\u95f4\u5b57\u6bb5. * * @return string */ public function getUpdatedAtColumn(); /** * \u662f\u5426\u4f7f\u7528\u8f6f\u5220\u9664. * * @return bool */ public function isSoftDeletes(); /** * \u83b7\u53d6Grid\u8868\u683c\u6570\u636e. * * @param Grid\\Model $model * * @return \\Illuminate\\Contracts\\Pagination\\LengthAwarePaginator|Collection|array */ public function get(Grid\\Model $model); /** * \u83b7\u53d6\u7f16\u8f91\u9875\u9762\u6570\u636e. * * @param Form $form * * @return array|\\Illuminate\\Contracts\\Support\\Arrayable */ public function edit(Form $form); /** * \u83b7\u53d6\u8be6\u60c5\u9875\u9762\u6570\u636e. * * @param Show $show * * @return array|\\Illuminate\\Contracts\\Support\\Arrayable */ public function detail(Show $show); /** * \u65b0\u589e\u8bb0\u5f55. * * @param Form $form * * @return mixed */ public function store(Form $form); /** * \u67e5\u8be2\u66f4\u65b0\u524d\u7684\u884c\u6570\u636e. * * @param Form $form * * @return array|\\Illuminate\\Contracts\\Support\\Arrayable */ public function updating(Form $form); /** * \u66f4\u65b0\u6570\u636e. * * @param Form $form * * @return bool */ public function update(Form $form); /** * \u5220\u9664\u6570\u636e. * * @param Form $form * @param array $deletingData * * @return mixed */ public function delete(Form $form, array $deletingData); /** * \u67e5\u8be2\u5220\u9664\u524d\u7684\u884c\u6570\u636e. * * @param Form $form * * @return array|\\Illuminate\\Contracts\\Support\\Arrayable */ public function deleting(Form $form); } 2. EloquentRepository::eloquent() \u91cd\u547d\u540d\u4e3a EloquentRepository::model()","title":"6.\u6570\u636e\u4ed3\u5e93\u90e8\u5206\u53d8\u52a8"},{"location":"2.x/1-x-upgrade/#7section","text":"\u5728\u65b0\u7248\u672c\u4e2d AdminSection \u5df2\u88ab\u79fb\u9664\uff0c\u8bf7\u4f7f\u7528 Dcat\\Admin\\Admin::SECTION \u5e38\u91cf\u4ee3\u66ff use Dcat\\Admin\\Admin; admin_inject_default_section(Admin::SECTION['HEAD'], function () { return ...; });","title":"7.Section\u53d8\u52a8"},{"location":"2.x/1-x-upgrade/#8","text":"\u6269\u5c55\u76f8\u5173\u53d8\u52a8\u8bf7\u53c2\u8003\u6587\u6863 \u6269\u5c55","title":"8.\u6269\u5c55"},{"location":"2.x/1-x-upgrade/#9","text":"1.\u767b\u5f55\u6a21\u677f\uff0c\u5982\u679c\u4f60\u5728\u65e7\u9879\u76ee\u4e2d\u81ea\u5b9a\u4e49\u8fc7\u767b\u5f55\u6a21\u677f\uff0c\u5219\u9700\u8981\u8c03\u6574\u767b\u5f55\u6a21\u677f\u4e2d\u7684 JS \u4ee3\u7801 Dcat.ready(function () { // ajax\u8868\u5355\u63d0\u4ea4 $('#login-form').form({ validate: true, }); }); 2.\u767b\u5f55\u903b\u8f91\uff0c\u5982\u679c\u91cd\u5199\u8fc7\u767b\u5f55\u903b\u8f91\uff0c\u5219\u6700\u540e\u767b\u5f55\u6210\u529f\u7684\u54cd\u5e94\u65b9\u6cd5\u9700\u8981\u4f7f\u7528 sendLoginResponse","title":"9.\u767b\u5f55\u903b\u8f91"},{"location":"2.x/1-x-upgrade/#10","text":"1.\u8d44\u6e90\u6ce8\u518c use Dcat\\Admin\\Admin; // \u6ce8\u518c\u8d44\u6e90\u8def\u5f84\u522b\u540d Admin::asset()->alias('test', 'assets/test'); Admin::asset()->alias('\u540d\u79f0', [ 'js' => [ // @test \u4f1a\u5224\u5b9a\u4e3a\u522b\u540d '@test/test.js', ], 'css' => [ '@test/test.css', ], ]); // \u52a0\u8f7d\u8d44\u6e90 Admin::asset()->require('@\u540d\u79f0'); // \u4ec5\u52a0\u8f7d js Admin::js('@\u540d\u79f0'); // \u4ec5\u52a0\u8f7d css Admin::css('@\u540d\u79f0');","title":"10.\u5176\u4ed6\u53d8\u52a8"},{"location":"2.x/LICENSE/","text":"The MIT License (MIT) Copyright (c) 2015 Jiang Qinghua Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","title":"LICENSE"},{"location":"2.x/action-form/","text":"\u6570\u636e\u8868\u5355\u52a8\u4f5c \u8fd0\u884c\u547d\u4ee4 php artisan admin:action \u7136\u540e\u8f93\u5165 4 Which type of action would you like to make?: [0] default [1] grid-batch [2] grid-row [3] grid-tool [4] form-tool [5] show-tool [6] tree-tool > 4 # \u8f93\u5165 4 \u63a5\u7740\u8f93\u5165 Action \u7c7b\u540d\u79f0\uff0c\u8fd9\u91cc\u9700\u8981\u8f93\u5165 \u5927\u9a7c\u5cf0 \u98ce\u683c\u7684\u82f1\u6587\u5b57\u6bcd Please enter a name of action class: > Copy \u7c7b\u540d\u8f93\u5165\u5b8c\u6210\u4e4b\u540e\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u4fe1\u606f\u8ba9\u5f00\u53d1\u8005\u8f93\u5165\u7c7b\u7684\u547d\u540d\u7a7a\u95f4\uff0c\u9ed8\u8ba4\u7684\u547d\u540d\u7a7a\u95f4\u662f App\\Admin\\Actions\\Form \uff0c\u8fd9\u91cc\u4f7f\u7528\u9ed8\u8ba4\u7684\u5c31\u884c Please enter the namespace of action class [App\\Admin\\Actions\\Form]: > \u6700\u540e\u751f\u6210\u6587\u4ef6\u5982\u4e0b <?php namespace App\\Admin\\Actions\\Form; use Dcat\\Admin\\Actions\\Response; use Dcat\\Admin\\Form\\AbstractTool; use Dcat\\Admin\\Traits\\HasPermissions; use Illuminate\\Contracts\\Auth\\Authenticatable; use Illuminate\\Database\\Eloquent\\Model; use Illuminate\\Http\\Request; class Copy extends AbstractTool { /** * \u6309\u94ae\u6807\u9898 * * @return string */ protected $title = 'Title'; /** * \u5904\u7406\u8bf7\u6c42\uff0c\u5982\u679c\u4e0d\u9700\u8981\u63a5\u53e3\u5904\u7406\uff0c\u8bf7\u76f4\u63a5\u5220\u9664\u8fd9\u4e2a\u65b9\u6cd5 * * @param Request $request * * @return Response */ public function handle(Request $request) { // \u83b7\u53d6\u4e3b\u952e $key = $this->getKey(); return $this->response() ->success('Processed successfully.') ->redirect('/'); } /** * \u5982\u679c\u53ea\u662fa\u6807\u7b7e\u8df3\u8f6c\uff0c\u5219\u5728\u8fd9\u91cc\u8fd4\u56de\u8df3\u8f6c\u94fe\u63a5\u5373\u53ef * * @return string|void */ protected function href() { // \u83b7\u53d6\u4e3b\u952e $key = $this->getKey(); // \u83b7\u53d6\u5f53\u524d\u9875\u5176\u4ed6\u5b57\u6bb5 $username = $this->parent->model()->username; // return admin_url('auth/users'); } // \u5982\u679c\u4f60\u60f3\u81ea\u5b9a\u4e49\u52a8\u4f5c\u6309\u94ae\u7684HTML\uff0c\u53ef\u4ee5\u91cd\u5199\u6b64\u65b9\u6cd5 public function html() { return parent::html(); } /** * \u786e\u8ba4\u5f39\u7a97\u4fe1\u606f\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @return string|array|void */ public function confirm() { // return ['Confirm?', 'contents']; } /** * \u6743\u9650\u5224\u65ad\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @param Model|Authenticatable|HasPermissions|null $user * * @return bool */ protected function authorize($user): bool { return true; } /** * \u8fd4\u56de\u8bf7\u6c42\u63a5\u53e3\u7684\u53c2\u6570\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @return array */ protected function parameters() { return []; } } \u4f7f\u7528 $form->tools(function (Form\\Tools $tools) { $tools->append(new Copy()); });","title":"\u6570\u636e\u8868\u5355\u52a8\u4f5c"},{"location":"2.x/action-form/#_1","text":"\u8fd0\u884c\u547d\u4ee4 php artisan admin:action \u7136\u540e\u8f93\u5165 4 Which type of action would you like to make?: [0] default [1] grid-batch [2] grid-row [3] grid-tool [4] form-tool [5] show-tool [6] tree-tool > 4 # \u8f93\u5165 4 \u63a5\u7740\u8f93\u5165 Action \u7c7b\u540d\u79f0\uff0c\u8fd9\u91cc\u9700\u8981\u8f93\u5165 \u5927\u9a7c\u5cf0 \u98ce\u683c\u7684\u82f1\u6587\u5b57\u6bcd Please enter a name of action class: > Copy \u7c7b\u540d\u8f93\u5165\u5b8c\u6210\u4e4b\u540e\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u4fe1\u606f\u8ba9\u5f00\u53d1\u8005\u8f93\u5165\u7c7b\u7684\u547d\u540d\u7a7a\u95f4\uff0c\u9ed8\u8ba4\u7684\u547d\u540d\u7a7a\u95f4\u662f App\\Admin\\Actions\\Form \uff0c\u8fd9\u91cc\u4f7f\u7528\u9ed8\u8ba4\u7684\u5c31\u884c Please enter the namespace of action class [App\\Admin\\Actions\\Form]: > \u6700\u540e\u751f\u6210\u6587\u4ef6\u5982\u4e0b <?php namespace App\\Admin\\Actions\\Form; use Dcat\\Admin\\Actions\\Response; use Dcat\\Admin\\Form\\AbstractTool; use Dcat\\Admin\\Traits\\HasPermissions; use Illuminate\\Contracts\\Auth\\Authenticatable; use Illuminate\\Database\\Eloquent\\Model; use Illuminate\\Http\\Request; class Copy extends AbstractTool { /** * \u6309\u94ae\u6807\u9898 * * @return string */ protected $title = 'Title'; /** * \u5904\u7406\u8bf7\u6c42\uff0c\u5982\u679c\u4e0d\u9700\u8981\u63a5\u53e3\u5904\u7406\uff0c\u8bf7\u76f4\u63a5\u5220\u9664\u8fd9\u4e2a\u65b9\u6cd5 * * @param Request $request * * @return Response */ public function handle(Request $request) { // \u83b7\u53d6\u4e3b\u952e $key = $this->getKey(); return $this->response() ->success('Processed successfully.') ->redirect('/'); } /** * \u5982\u679c\u53ea\u662fa\u6807\u7b7e\u8df3\u8f6c\uff0c\u5219\u5728\u8fd9\u91cc\u8fd4\u56de\u8df3\u8f6c\u94fe\u63a5\u5373\u53ef * * @return string|void */ protected function href() { // \u83b7\u53d6\u4e3b\u952e $key = $this->getKey(); // \u83b7\u53d6\u5f53\u524d\u9875\u5176\u4ed6\u5b57\u6bb5 $username = $this->parent->model()->username; // return admin_url('auth/users'); } // \u5982\u679c\u4f60\u60f3\u81ea\u5b9a\u4e49\u52a8\u4f5c\u6309\u94ae\u7684HTML\uff0c\u53ef\u4ee5\u91cd\u5199\u6b64\u65b9\u6cd5 public function html() { return parent::html(); } /** * \u786e\u8ba4\u5f39\u7a97\u4fe1\u606f\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @return string|array|void */ public function confirm() { // return ['Confirm?', 'contents']; } /** * \u6743\u9650\u5224\u65ad\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @param Model|Authenticatable|HasPermissions|null $user * * @return bool */ protected function authorize($user): bool { return true; } /** * \u8fd4\u56de\u8bf7\u6c42\u63a5\u53e3\u7684\u53c2\u6570\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @return array */ protected function parameters() { return []; } } \u4f7f\u7528 $form->tools(function (Form\\Tools $tools) { $tools->append(new Copy()); });","title":"\u6570\u636e\u8868\u5355\u52a8\u4f5c"},{"location":"2.x/action-grid/","text":"\u6570\u636e\u8868\u683c\u52a8\u4f5c \u8868\u683c\u52a8\u4f5c\u57fa\u7c7b (GridAction) \u6240\u6709\u6570\u636e\u8868\u683c\u76f8\u5173\u7684\u52a8\u4f5c\u7c7b\uff0c\u5305\u62ec \u5de5\u5177\u680f\u6309\u94ae ( AbstractTool )\u3001 \u884c\u64cd\u4f5c ( RowAction )\u3001 \u6279\u91cf\u64cd\u4f5c ( BatchAction ) \u7b49\u7b49\u64cd\u4f5c\u6309\u94ae\u7684\u57fa\u7c7b\u90fd\u7ee7\u627f\u81ea Dcat\\Admin\\Grid\\GridAction \u7c7b\uff0c\u800c GridAction \u5219\u7ee7\u627f\u81ea \u52a8\u4f5c\u7c7b\u57fa\u7c7b ( Action )\u3002 \u4e0b\u9762\u5c06\u4ecb\u7ecd GridAction \u7c7b\u4e2d\u589e\u52a0\u7684\u65b9\u6cd5\u6216\u5c5e\u6027 \u8868\u683c\u5b9e\u4f8b (parent) \u901a\u8fc7 parent \u5c5e\u6027\u53ef\u4ee5\u83b7\u53d6\u5230\u8868\u683c\u5b9e\u4f8b ( Dcat\\Admin\\Grid )\u3002 \u4e0b\u9762\u7b80\u5355\u7684\u6f14\u793a\u4e0b\u7528\u6cd5\uff0c\u8fd9\u6bb5\u4ee3\u7801\u6ca1\u6709\u4efb\u4f55\u5b9e\u9645\u610f\u4e49 use Dcat\\Admin\\Grid\\GridAction class MyAction extend GridAction { public function html() { $gridName = $this->parent->getName(); return ...; } ... } \u8868\u683c\u9875\u9762\u5730\u5740 (resource) \u901a\u8fc7 resource \u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u5230\u8868\u683c\u9875\u9762\u7684\u5730\u5740\u3002 \u4e0b\u9762\u7b80\u5355\u7684\u6f14\u793a\u4e0b\u7528\u6cd5\uff0c\u8fd9\u6bb5\u4ee3\u7801\u6ca1\u6709\u4efb\u4f55\u5b9e\u9645\u610f\u4e49 use Dcat\\Admin\\Grid\\GridAction class MyAction extend GridAction { public function html() { // \u5047\u5982\u4f60\u7684\u5217\u8868\u9875\u8def\u5f84\u4e3a /admin/users\uff0c\u5219\u8fd9\u91cc\u7684\u503c\u4e3a http://\u57df\u540d/admin/users $path = $this->resource(); return ...; } ... } \u5de5\u5177\u680f\u64cd\u4f5c\u6309\u94ae\u57fa\u7c7b (AbstractTool) \u8868\u683c\u5de5\u5177\u680f\u6309\u94ae\u57fa\u7c7b( Dcat\\Admin\\Grid\\Tools\\AbstractTool )\u7ee7\u627f\u81ea GridAction \u7c7b\u3002 \u4e0b\u9762\u5c06\u4ecb\u7ecd AbstractTool \u7c7b\u4e2d\u589e\u52a0\u7684\u65b9\u6cd5\u6216\u5c5e\u6027 \u6309\u94ae\u6837\u5f0f (style) \u901a\u8fc7 style \u5c5e\u6027\u53ef\u4ee5\u8bbe\u7f6e\u5de5\u5177\u680f\u6309\u94ae\u7684\u7c7b( class )\uff0c\u9ed8\u8ba4\u503c\u4e3a btn btn-white waves-effect \u3002 \u4e0b\u9762\u7b80\u5355\u7684\u6f14\u793a\u4e0b\u7528\u6cd5 use Dcat\\Admin\\Grid\\AbstractTool class MyTool extend AbstractTool { protected $style = 'btn btn-outline-primary waves-effect'; ... } \u6279\u91cf\u64cd\u4f5c\u57fa\u7c7b (BatchAction) \u8868\u683c\u5de5\u5177\u680f\u6309\u94ae\u57fa\u7c7b( Dcat\\Admin\\Grid\\Tools\\BatchAction )\u7ee7\u627f\u81ea GridAction \u7c7b\u3002 \u4e0b\u9762\u5c06\u4ecb\u7ecd BatchAction \u7c7b\u4e2d\u589e\u52a0\u7684\u65b9\u6cd5\u6216\u5c5e\u6027 \u83b7\u53d6\u9009\u4e2d\u884c\u7684\u4e3b\u952e\u6570\u7ec4 (getSelectedKeysScript) \u901a\u8fc7 getSelectedKeysScript \u65b9\u6cd5\u53ef\u4ee5\u751f\u6210\u83b7\u53d6\u9009\u4e2d\u7684\u884c\u7684\u4e3b\u952e\u6570\u7ec4\u7684 JS \u4ee3\u7801\u3002 \u4e0b\u9762\u7b80\u5355\u7684\u6f14\u793a\u4e0b\u7528\u6cd5 use Dcat\\Admin\\Grid\\BatchAction class MyBatchAction extend BatchAction { /** * {@inheritdoc} */ public function actionScript() { $warning = __('No data selected!'); return <<<JS var key = {$this->getSelectedKeysScript()} if (key.length === 0) { Dcat.warning('{$warning}'); return ; } Object.assign(data, {_key:key}); JS; } ... } \u884c\u64cd\u4f5c\u57fa\u7c7b (RowAction) \u8868\u683c\u5de5\u5177\u680f\u6309\u94ae\u57fa\u7c7b( Dcat\\Admin\\Grid\\Tools\\RowAction )\u7ee7\u627f\u81ea GridAction \u7c7b\u3002 \u4e0b\u9762\u5c06\u4ecb\u7ecd RowAction \u7c7b\u4e2d\u589e\u52a0\u7684\u65b9\u6cd5\u6216\u5c5e\u6027 \u884c\u6570\u636e (row) \u901a\u8fc7 row \u5c5e\u6027\u53ef\u4ee5\u83b7\u53d6\u5230\u5f53\u524d\u884c\u6570\u636e\u5185\u5bb9\u3002 \u4e0b\u9762\u7b80\u5355\u7684\u6f14\u793a\u4e0b\u7528\u6cd5\uff0c\u8fd9\u6bb5\u4ee3\u7801\u6ca1\u6709\u4efb\u4f55\u5b9e\u9645\u610f\u4e49 use Dcat\\Admin\\Grid\\RowAction class MyRowAction extend RowAction { public function html() { // \u83b7\u53d6\u5f53\u524d\u884c\u7684\u5b57\u6bb5\u503c $username = $this->row->username; // \u8f6c\u5316\u4e3a\u6570\u7ec4 $rowArray = $this->row->toArray(); return ...; } ... } \u4e3b\u952e\u503c (getKey) \u901a\u8fc7 getKey \u5c5e\u6027\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u5230\u5f53\u524d\u884c\u6570\u636e\u7684\u4e3b\u952e\u503c( ID )\u3002 \u4e0b\u9762\u7b80\u5355\u7684\u6f14\u793a\u4e0b\u7528\u6cd5\uff0c\u8fd9\u6bb5\u4ee3\u7801\u6ca1\u6709\u4efb\u4f55\u5b9e\u9645\u610f\u4e49 use Dcat\\Admin\\Grid\\RowAction class MyRowAction extend RowAction { public function html() { $id = $this->getKey(); return ...; } ... }","title":"\u6570\u636e\u8868\u683c\u52a8\u4f5c"},{"location":"2.x/action-grid/#_1","text":"","title":"\u6570\u636e\u8868\u683c\u52a8\u4f5c"},{"location":"2.x/action-grid/#gridaction","text":"\u6240\u6709\u6570\u636e\u8868\u683c\u76f8\u5173\u7684\u52a8\u4f5c\u7c7b\uff0c\u5305\u62ec \u5de5\u5177\u680f\u6309\u94ae ( AbstractTool )\u3001 \u884c\u64cd\u4f5c ( RowAction )\u3001 \u6279\u91cf\u64cd\u4f5c ( BatchAction ) \u7b49\u7b49\u64cd\u4f5c\u6309\u94ae\u7684\u57fa\u7c7b\u90fd\u7ee7\u627f\u81ea Dcat\\Admin\\Grid\\GridAction \u7c7b\uff0c\u800c GridAction \u5219\u7ee7\u627f\u81ea \u52a8\u4f5c\u7c7b\u57fa\u7c7b ( Action )\u3002 \u4e0b\u9762\u5c06\u4ecb\u7ecd GridAction \u7c7b\u4e2d\u589e\u52a0\u7684\u65b9\u6cd5\u6216\u5c5e\u6027","title":"\u8868\u683c\u52a8\u4f5c\u57fa\u7c7b (GridAction)"},{"location":"2.x/action-grid/#parent","text":"\u901a\u8fc7 parent \u5c5e\u6027\u53ef\u4ee5\u83b7\u53d6\u5230\u8868\u683c\u5b9e\u4f8b ( Dcat\\Admin\\Grid )\u3002 \u4e0b\u9762\u7b80\u5355\u7684\u6f14\u793a\u4e0b\u7528\u6cd5\uff0c\u8fd9\u6bb5\u4ee3\u7801\u6ca1\u6709\u4efb\u4f55\u5b9e\u9645\u610f\u4e49 use Dcat\\Admin\\Grid\\GridAction class MyAction extend GridAction { public function html() { $gridName = $this->parent->getName(); return ...; } ... }","title":"\u8868\u683c\u5b9e\u4f8b (parent)"},{"location":"2.x/action-grid/#resource","text":"\u901a\u8fc7 resource \u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u5230\u8868\u683c\u9875\u9762\u7684\u5730\u5740\u3002 \u4e0b\u9762\u7b80\u5355\u7684\u6f14\u793a\u4e0b\u7528\u6cd5\uff0c\u8fd9\u6bb5\u4ee3\u7801\u6ca1\u6709\u4efb\u4f55\u5b9e\u9645\u610f\u4e49 use Dcat\\Admin\\Grid\\GridAction class MyAction extend GridAction { public function html() { // \u5047\u5982\u4f60\u7684\u5217\u8868\u9875\u8def\u5f84\u4e3a /admin/users\uff0c\u5219\u8fd9\u91cc\u7684\u503c\u4e3a http://\u57df\u540d/admin/users $path = $this->resource(); return ...; } ... }","title":"\u8868\u683c\u9875\u9762\u5730\u5740 (resource)"},{"location":"2.x/action-grid/#abstracttool","text":"\u8868\u683c\u5de5\u5177\u680f\u6309\u94ae\u57fa\u7c7b( Dcat\\Admin\\Grid\\Tools\\AbstractTool )\u7ee7\u627f\u81ea GridAction \u7c7b\u3002 \u4e0b\u9762\u5c06\u4ecb\u7ecd AbstractTool \u7c7b\u4e2d\u589e\u52a0\u7684\u65b9\u6cd5\u6216\u5c5e\u6027","title":"\u5de5\u5177\u680f\u64cd\u4f5c\u6309\u94ae\u57fa\u7c7b (AbstractTool)"},{"location":"2.x/action-grid/#style","text":"\u901a\u8fc7 style \u5c5e\u6027\u53ef\u4ee5\u8bbe\u7f6e\u5de5\u5177\u680f\u6309\u94ae\u7684\u7c7b( class )\uff0c\u9ed8\u8ba4\u503c\u4e3a btn btn-white waves-effect \u3002 \u4e0b\u9762\u7b80\u5355\u7684\u6f14\u793a\u4e0b\u7528\u6cd5 use Dcat\\Admin\\Grid\\AbstractTool class MyTool extend AbstractTool { protected $style = 'btn btn-outline-primary waves-effect'; ... }","title":"\u6309\u94ae\u6837\u5f0f (style)"},{"location":"2.x/action-grid/#batchaction","text":"\u8868\u683c\u5de5\u5177\u680f\u6309\u94ae\u57fa\u7c7b( Dcat\\Admin\\Grid\\Tools\\BatchAction )\u7ee7\u627f\u81ea GridAction \u7c7b\u3002 \u4e0b\u9762\u5c06\u4ecb\u7ecd BatchAction \u7c7b\u4e2d\u589e\u52a0\u7684\u65b9\u6cd5\u6216\u5c5e\u6027","title":"\u6279\u91cf\u64cd\u4f5c\u57fa\u7c7b (BatchAction)"},{"location":"2.x/action-grid/#getselectedkeysscript","text":"\u901a\u8fc7 getSelectedKeysScript \u65b9\u6cd5\u53ef\u4ee5\u751f\u6210\u83b7\u53d6\u9009\u4e2d\u7684\u884c\u7684\u4e3b\u952e\u6570\u7ec4\u7684 JS \u4ee3\u7801\u3002 \u4e0b\u9762\u7b80\u5355\u7684\u6f14\u793a\u4e0b\u7528\u6cd5 use Dcat\\Admin\\Grid\\BatchAction class MyBatchAction extend BatchAction { /** * {@inheritdoc} */ public function actionScript() { $warning = __('No data selected!'); return <<<JS var key = {$this->getSelectedKeysScript()} if (key.length === 0) { Dcat.warning('{$warning}'); return ; } Object.assign(data, {_key:key}); JS; } ... }","title":"\u83b7\u53d6\u9009\u4e2d\u884c\u7684\u4e3b\u952e\u6570\u7ec4 (getSelectedKeysScript)"},{"location":"2.x/action-grid/#rowaction","text":"\u8868\u683c\u5de5\u5177\u680f\u6309\u94ae\u57fa\u7c7b( Dcat\\Admin\\Grid\\Tools\\RowAction )\u7ee7\u627f\u81ea GridAction \u7c7b\u3002 \u4e0b\u9762\u5c06\u4ecb\u7ecd RowAction \u7c7b\u4e2d\u589e\u52a0\u7684\u65b9\u6cd5\u6216\u5c5e\u6027","title":"\u884c\u64cd\u4f5c\u57fa\u7c7b (RowAction)"},{"location":"2.x/action-grid/#row","text":"\u901a\u8fc7 row \u5c5e\u6027\u53ef\u4ee5\u83b7\u53d6\u5230\u5f53\u524d\u884c\u6570\u636e\u5185\u5bb9\u3002 \u4e0b\u9762\u7b80\u5355\u7684\u6f14\u793a\u4e0b\u7528\u6cd5\uff0c\u8fd9\u6bb5\u4ee3\u7801\u6ca1\u6709\u4efb\u4f55\u5b9e\u9645\u610f\u4e49 use Dcat\\Admin\\Grid\\RowAction class MyRowAction extend RowAction { public function html() { // \u83b7\u53d6\u5f53\u524d\u884c\u7684\u5b57\u6bb5\u503c $username = $this->row->username; // \u8f6c\u5316\u4e3a\u6570\u7ec4 $rowArray = $this->row->toArray(); return ...; } ... }","title":"\u884c\u6570\u636e (row)"},{"location":"2.x/action-grid/#getkey","text":"\u901a\u8fc7 getKey \u5c5e\u6027\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u5230\u5f53\u524d\u884c\u6570\u636e\u7684\u4e3b\u952e\u503c( ID )\u3002 \u4e0b\u9762\u7b80\u5355\u7684\u6f14\u793a\u4e0b\u7528\u6cd5\uff0c\u8fd9\u6bb5\u4ee3\u7801\u6ca1\u6709\u4efb\u4f55\u5b9e\u9645\u610f\u4e49 use Dcat\\Admin\\Grid\\RowAction class MyRowAction extend RowAction { public function html() { $id = $this->getKey(); return ...; } ... }","title":"\u4e3b\u952e\u503c (getKey)"},{"location":"2.x/action-show/","text":"\u6570\u636e\u8be6\u60c5\u52a8\u4f5c \u8fd0\u884c\u547d\u4ee4 php artisan admin:action \u7136\u540e\u8f93\u5165 5 Which type of action would you like to make?: [0] default [1] grid-batch [2] grid-row [3] grid-tool [4] form-tool [5] show-tool [6] tree-tool > 5 # \u8f93\u5165 5 \u63a5\u7740\u8f93\u5165 Action \u7c7b\u540d\u79f0\uff0c\u8fd9\u91cc\u9700\u8981\u8f93\u5165 \u5927\u9a7c\u5cf0 \u98ce\u683c\u7684\u82f1\u6587\u5b57\u6bcd Please enter a name of action class: > Copy \u7c7b\u540d\u8f93\u5165\u5b8c\u6210\u4e4b\u540e\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u4fe1\u606f\u8ba9\u5f00\u53d1\u8005\u8f93\u5165\u7c7b\u7684\u547d\u540d\u7a7a\u95f4\uff0c\u9ed8\u8ba4\u7684\u547d\u540d\u7a7a\u95f4\u662f App\\Admin\\Actions\\Show \uff0c\u8fd9\u91cc\u4f7f\u7528\u9ed8\u8ba4\u7684\u5c31\u884c Please enter the namespace of action class [App\\Admin\\Actions\\Show]: > \u6700\u540e\u751f\u6210\u6587\u4ef6\u5982\u4e0b <?php namespace App\\Admin\\Actions\\Show; use Dcat\\Admin\\Actions\\Response; use Dcat\\Admin\\Show\\AbstractTool; use Dcat\\Admin\\Traits\\HasPermissions; use Illuminate\\Contracts\\Auth\\Authenticatable; use Illuminate\\Database\\Eloquent\\Model; use Illuminate\\Http\\Request; class Copy extends AbstractTool { /** * \u6309\u94ae\u6807\u9898 * * @return string */ protected $title = 'Title'; /** * \u5904\u7406\u8bf7\u6c42\uff0c\u5982\u679c\u4e0d\u9700\u8981\u63a5\u53e3\u5904\u7406\uff0c\u8bf7\u76f4\u63a5\u5220\u9664\u8fd9\u4e2a\u65b9\u6cd5 * * @param Request $request * * @return Response */ public function handle(Request $request) { // \u83b7\u53d6\u4e3b\u952e $key = $this->getKey(); return $this->response() ->success('Processed successfully.') ->redirect('/'); } /** * \u5982\u679c\u53ea\u662fa\u6807\u7b7e\u8df3\u8f6c\uff0c\u5219\u5728\u8fd9\u91cc\u8fd4\u56de\u8df3\u8f6c\u94fe\u63a5\u5373\u53ef * * @return string|void */ protected function href() { // \u83b7\u53d6\u4e3b\u952e $key = $this->getKey(); // \u83b7\u53d6\u5f53\u524d\u9875\u5176\u4ed6\u5b57\u6bb5 $username = $this->parent->model()->username; // return admin_url('auth/users'); } // \u5982\u679c\u4f60\u60f3\u81ea\u5b9a\u4e49\u52a8\u4f5c\u6309\u94ae\u7684HTML\uff0c\u53ef\u4ee5\u91cd\u5199\u6b64\u65b9\u6cd5 public function html() { return parent::html(); } /** * \u786e\u8ba4\u5f39\u7a97\u4fe1\u606f\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @return string|array|void */ public function confirm() { // return ['Confirm?', 'contents']; } /** * \u6743\u9650\u5224\u65ad\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @param Model|Authenticatable|HasPermissions|null $user * * @return bool */ protected function authorize($user): bool { return true; } /** * \u8fd4\u56de\u8bf7\u6c42\u63a5\u53e3\u7684\u53c2\u6570\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @return array */ protected function parameters() { return []; } } \u4f7f\u7528 $show->tools(function (Show\\Tools $tools) { $tools->append(new Copy()); });","title":"\u6570\u636e\u8be6\u60c5\u52a8\u4f5c"},{"location":"2.x/action-show/#_1","text":"\u8fd0\u884c\u547d\u4ee4 php artisan admin:action \u7136\u540e\u8f93\u5165 5 Which type of action would you like to make?: [0] default [1] grid-batch [2] grid-row [3] grid-tool [4] form-tool [5] show-tool [6] tree-tool > 5 # \u8f93\u5165 5 \u63a5\u7740\u8f93\u5165 Action \u7c7b\u540d\u79f0\uff0c\u8fd9\u91cc\u9700\u8981\u8f93\u5165 \u5927\u9a7c\u5cf0 \u98ce\u683c\u7684\u82f1\u6587\u5b57\u6bcd Please enter a name of action class: > Copy \u7c7b\u540d\u8f93\u5165\u5b8c\u6210\u4e4b\u540e\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u4fe1\u606f\u8ba9\u5f00\u53d1\u8005\u8f93\u5165\u7c7b\u7684\u547d\u540d\u7a7a\u95f4\uff0c\u9ed8\u8ba4\u7684\u547d\u540d\u7a7a\u95f4\u662f App\\Admin\\Actions\\Show \uff0c\u8fd9\u91cc\u4f7f\u7528\u9ed8\u8ba4\u7684\u5c31\u884c Please enter the namespace of action class [App\\Admin\\Actions\\Show]: > \u6700\u540e\u751f\u6210\u6587\u4ef6\u5982\u4e0b <?php namespace App\\Admin\\Actions\\Show; use Dcat\\Admin\\Actions\\Response; use Dcat\\Admin\\Show\\AbstractTool; use Dcat\\Admin\\Traits\\HasPermissions; use Illuminate\\Contracts\\Auth\\Authenticatable; use Illuminate\\Database\\Eloquent\\Model; use Illuminate\\Http\\Request; class Copy extends AbstractTool { /** * \u6309\u94ae\u6807\u9898 * * @return string */ protected $title = 'Title'; /** * \u5904\u7406\u8bf7\u6c42\uff0c\u5982\u679c\u4e0d\u9700\u8981\u63a5\u53e3\u5904\u7406\uff0c\u8bf7\u76f4\u63a5\u5220\u9664\u8fd9\u4e2a\u65b9\u6cd5 * * @param Request $request * * @return Response */ public function handle(Request $request) { // \u83b7\u53d6\u4e3b\u952e $key = $this->getKey(); return $this->response() ->success('Processed successfully.') ->redirect('/'); } /** * \u5982\u679c\u53ea\u662fa\u6807\u7b7e\u8df3\u8f6c\uff0c\u5219\u5728\u8fd9\u91cc\u8fd4\u56de\u8df3\u8f6c\u94fe\u63a5\u5373\u53ef * * @return string|void */ protected function href() { // \u83b7\u53d6\u4e3b\u952e $key = $this->getKey(); // \u83b7\u53d6\u5f53\u524d\u9875\u5176\u4ed6\u5b57\u6bb5 $username = $this->parent->model()->username; // return admin_url('auth/users'); } // \u5982\u679c\u4f60\u60f3\u81ea\u5b9a\u4e49\u52a8\u4f5c\u6309\u94ae\u7684HTML\uff0c\u53ef\u4ee5\u91cd\u5199\u6b64\u65b9\u6cd5 public function html() { return parent::html(); } /** * \u786e\u8ba4\u5f39\u7a97\u4fe1\u606f\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @return string|array|void */ public function confirm() { // return ['Confirm?', 'contents']; } /** * \u6743\u9650\u5224\u65ad\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @param Model|Authenticatable|HasPermissions|null $user * * @return bool */ protected function authorize($user): bool { return true; } /** * \u8fd4\u56de\u8bf7\u6c42\u63a5\u53e3\u7684\u53c2\u6570\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @return array */ protected function parameters() { return []; } } \u4f7f\u7528 $show->tools(function (Show\\Tools $tools) { $tools->append(new Copy()); });","title":"\u6570\u636e\u8be6\u60c5\u52a8\u4f5c"},{"location":"2.x/action-tree/","text":"\u6a21\u578b\u6811\u52a8\u4f5c \u5de5\u5177\u680f \u8fd0\u884c\u547d\u4ee4 php artisan admin:action \u7136\u540e\u8f93\u5165 7 Which type of action would you like to make?: [0] default [1] grid-batch [2] grid-row [3] grid-tool [4] form-tool [5] show-tool [6] tree-row [7] tree-tool > 7 # \u8f93\u5165 7 \u63a5\u7740\u8f93\u5165 Action \u7c7b\u540d\u79f0\uff0c\u8fd9\u91cc\u9700\u8981\u8f93\u5165 \u5927\u9a7c\u5cf0 \u98ce\u683c\u7684\u82f1\u6587\u5b57\u6bcd Please enter a name of action class: > Copy \u7c7b\u540d\u8f93\u5165\u5b8c\u6210\u4e4b\u540e\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u4fe1\u606f\u8ba9\u5f00\u53d1\u8005\u8f93\u5165\u7c7b\u7684\u547d\u540d\u7a7a\u95f4\uff0c\u9ed8\u8ba4\u7684\u547d\u540d\u7a7a\u95f4\u662f App\\Admin\\Actions\\Tree \uff0c\u8fd9\u91cc\u4f7f\u7528\u9ed8\u8ba4\u7684\u5c31\u884c Please enter the namespace of action class [App\\Admin\\Actions\\Tree]: > \u6700\u540e\u751f\u6210\u6587\u4ef6\u5982\u4e0b <?php namespace App\\Admin\\Actions\\Tree; use Dcat\\Admin\\Actions\\Response; use Dcat\\Admin\\Tree\\AbstractTool; use Dcat\\Admin\\Traits\\HasPermissions; use Illuminate\\Contracts\\Auth\\Authenticatable; use Illuminate\\Database\\Eloquent\\Model; use Illuminate\\Http\\Request; class Copy extends AbstractTool { /** * \u6309\u94ae\u6807\u9898 * * @return string */ protected $title = 'Title'; /** * \u5904\u7406\u8bf7\u6c42\uff0c\u5982\u679c\u4e0d\u9700\u8981\u63a5\u53e3\u5904\u7406\uff0c\u8bf7\u76f4\u63a5\u5220\u9664\u8fd9\u4e2a\u65b9\u6cd5 * * @param Request $request * * @return Response */ public function handle(Request $request) { return $this->response() ->success('Processed successfully.') ->redirect('/'); } /** * \u5982\u679c\u53ea\u662fa\u6807\u7b7e\u8df3\u8f6c\uff0c\u5219\u5728\u8fd9\u91cc\u8fd4\u56de\u8df3\u8f6c\u94fe\u63a5\u5373\u53ef * * @return string|void */ protected function href() { // return admin_url('auth/users'); } // \u5982\u679c\u4f60\u60f3\u81ea\u5b9a\u4e49\u52a8\u4f5c\u6309\u94ae\u7684HTML\uff0c\u53ef\u4ee5\u91cd\u5199\u6b64\u65b9\u6cd5 public function html() { return parent::html(); } /** * \u786e\u8ba4\u5f39\u7a97\u4fe1\u606f\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @return string|array|void */ public function confirm() { // return ['Confirm?', 'contents']; } /** * \u6743\u9650\u5224\u65ad\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @param Model|Authenticatable|HasPermissions|null $user * * @return bool */ protected function authorize($user): bool { return true; } /** * \u8fd4\u56de\u8bf7\u6c42\u63a5\u53e3\u7684\u53c2\u6570\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @return array */ protected function parameters() { return []; } } \u4f7f\u7528 $tree->tools(function (Tree\\Tools $tools) { $tools->add(new Copy()); }); \u884c\u64cd\u4f5c \u8fd0\u884c\u547d\u4ee4 php artisan admin:action \u7136\u540e\u8f93\u5165 6 Which type of action would you like to make?: [0] default [1] grid-batch [2] grid-row [3] grid-tool [4] form-tool [5] show-tool [6] tree-row [7] tree-tool > 6 # \u8f93\u5165 6 \u63a5\u7740\u8f93\u5165 Action \u7c7b\u540d\u79f0\uff0c\u8fd9\u91cc\u9700\u8981\u8f93\u5165 \u5927\u9a7c\u5cf0 \u98ce\u683c\u7684\u82f1\u6587\u5b57\u6bcd Please enter a name of action class: > Copy \u7c7b\u540d\u8f93\u5165\u5b8c\u6210\u4e4b\u540e\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u4fe1\u606f\u8ba9\u5f00\u53d1\u8005\u8f93\u5165\u7c7b\u7684\u547d\u540d\u7a7a\u95f4\uff0c\u9ed8\u8ba4\u7684\u547d\u540d\u7a7a\u95f4\u662f App\\Admin\\Actions\\Tree \uff0c\u8fd9\u91cc\u4f7f\u7528\u9ed8\u8ba4\u7684\u5c31\u884c Please enter the namespace of action class [App\\Admin\\Actions\\Tree]: > \u6700\u540e\u751f\u6210\u6587\u4ef6\u5982\u4e0b <?php namespace App\\Admin\\Actions\\Tree; use Dcat\\Admin\\Tree\\RowAction; use Dcat\\Admin\\Actions\\Response; use Dcat\\Admin\\Traits\\HasPermissions; use Illuminate\\Contracts\\Auth\\Authenticatable; use Illuminate\\Database\\Eloquent\\Model; use Illuminate\\Http\\Request; class Copy extends RowAction { /** * @return string */ protected $title = 'Title'; /** * \u5904\u7406\u8bf7\u6c42\uff0c\u5982\u679c\u4e0d\u9700\u8981\u63a5\u53e3\u5904\u7406\uff0c\u8bf7\u76f4\u63a5\u5220\u9664\u8fd9\u4e2a\u65b9\u6cd5 * * @param Request $request * * @return Response */ public function handle(Request $request) { // \u83b7\u53d6\u4e3b\u952e $key = $this->getKey(); return $this->response() ->success('Processed successfully.') ->redirect('/'); } /** * \u8fd4\u56de\u8df3\u8f6c\u5730\u5740\uff0c\u5982\u679c\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664 * * @return string|void */ protected function href() { // return admin_url('auth/users/'.$this->getKey()); } /** * \u786e\u8ba4\u5f39\u7a97\u4fe1\u606f\uff0c\u5982\u679c\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664 * * @return string|array|void */ public function confirm() { // return ['Confirm?', 'contents']; } /** * \u6743\u9650\u5224\u65ad\uff0c\u5982\u679c\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664 * * @param Model|Authenticatable|HasPermissions|null $user * * @return bool */ protected function authorize($user): bool { return true; } } \u4f7f\u7528 $tree->actions(new Copy());","title":"\u6a21\u578b\u6811\u52a8\u4f5c"},{"location":"2.x/action-tree/#_1","text":"","title":"\u6a21\u578b\u6811\u52a8\u4f5c"},{"location":"2.x/action-tree/#_2","text":"\u8fd0\u884c\u547d\u4ee4 php artisan admin:action \u7136\u540e\u8f93\u5165 7 Which type of action would you like to make?: [0] default [1] grid-batch [2] grid-row [3] grid-tool [4] form-tool [5] show-tool [6] tree-row [7] tree-tool > 7 # \u8f93\u5165 7 \u63a5\u7740\u8f93\u5165 Action \u7c7b\u540d\u79f0\uff0c\u8fd9\u91cc\u9700\u8981\u8f93\u5165 \u5927\u9a7c\u5cf0 \u98ce\u683c\u7684\u82f1\u6587\u5b57\u6bcd Please enter a name of action class: > Copy \u7c7b\u540d\u8f93\u5165\u5b8c\u6210\u4e4b\u540e\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u4fe1\u606f\u8ba9\u5f00\u53d1\u8005\u8f93\u5165\u7c7b\u7684\u547d\u540d\u7a7a\u95f4\uff0c\u9ed8\u8ba4\u7684\u547d\u540d\u7a7a\u95f4\u662f App\\Admin\\Actions\\Tree \uff0c\u8fd9\u91cc\u4f7f\u7528\u9ed8\u8ba4\u7684\u5c31\u884c Please enter the namespace of action class [App\\Admin\\Actions\\Tree]: > \u6700\u540e\u751f\u6210\u6587\u4ef6\u5982\u4e0b <?php namespace App\\Admin\\Actions\\Tree; use Dcat\\Admin\\Actions\\Response; use Dcat\\Admin\\Tree\\AbstractTool; use Dcat\\Admin\\Traits\\HasPermissions; use Illuminate\\Contracts\\Auth\\Authenticatable; use Illuminate\\Database\\Eloquent\\Model; use Illuminate\\Http\\Request; class Copy extends AbstractTool { /** * \u6309\u94ae\u6807\u9898 * * @return string */ protected $title = 'Title'; /** * \u5904\u7406\u8bf7\u6c42\uff0c\u5982\u679c\u4e0d\u9700\u8981\u63a5\u53e3\u5904\u7406\uff0c\u8bf7\u76f4\u63a5\u5220\u9664\u8fd9\u4e2a\u65b9\u6cd5 * * @param Request $request * * @return Response */ public function handle(Request $request) { return $this->response() ->success('Processed successfully.') ->redirect('/'); } /** * \u5982\u679c\u53ea\u662fa\u6807\u7b7e\u8df3\u8f6c\uff0c\u5219\u5728\u8fd9\u91cc\u8fd4\u56de\u8df3\u8f6c\u94fe\u63a5\u5373\u53ef * * @return string|void */ protected function href() { // return admin_url('auth/users'); } // \u5982\u679c\u4f60\u60f3\u81ea\u5b9a\u4e49\u52a8\u4f5c\u6309\u94ae\u7684HTML\uff0c\u53ef\u4ee5\u91cd\u5199\u6b64\u65b9\u6cd5 public function html() { return parent::html(); } /** * \u786e\u8ba4\u5f39\u7a97\u4fe1\u606f\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @return string|array|void */ public function confirm() { // return ['Confirm?', 'contents']; } /** * \u6743\u9650\u5224\u65ad\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @param Model|Authenticatable|HasPermissions|null $user * * @return bool */ protected function authorize($user): bool { return true; } /** * \u8fd4\u56de\u8bf7\u6c42\u63a5\u53e3\u7684\u53c2\u6570\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @return array */ protected function parameters() { return []; } } \u4f7f\u7528 $tree->tools(function (Tree\\Tools $tools) { $tools->add(new Copy()); });","title":"\u5de5\u5177\u680f"},{"location":"2.x/action-tree/#_3","text":"\u8fd0\u884c\u547d\u4ee4 php artisan admin:action \u7136\u540e\u8f93\u5165 6 Which type of action would you like to make?: [0] default [1] grid-batch [2] grid-row [3] grid-tool [4] form-tool [5] show-tool [6] tree-row [7] tree-tool > 6 # \u8f93\u5165 6 \u63a5\u7740\u8f93\u5165 Action \u7c7b\u540d\u79f0\uff0c\u8fd9\u91cc\u9700\u8981\u8f93\u5165 \u5927\u9a7c\u5cf0 \u98ce\u683c\u7684\u82f1\u6587\u5b57\u6bcd Please enter a name of action class: > Copy \u7c7b\u540d\u8f93\u5165\u5b8c\u6210\u4e4b\u540e\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u4fe1\u606f\u8ba9\u5f00\u53d1\u8005\u8f93\u5165\u7c7b\u7684\u547d\u540d\u7a7a\u95f4\uff0c\u9ed8\u8ba4\u7684\u547d\u540d\u7a7a\u95f4\u662f App\\Admin\\Actions\\Tree \uff0c\u8fd9\u91cc\u4f7f\u7528\u9ed8\u8ba4\u7684\u5c31\u884c Please enter the namespace of action class [App\\Admin\\Actions\\Tree]: > \u6700\u540e\u751f\u6210\u6587\u4ef6\u5982\u4e0b <?php namespace App\\Admin\\Actions\\Tree; use Dcat\\Admin\\Tree\\RowAction; use Dcat\\Admin\\Actions\\Response; use Dcat\\Admin\\Traits\\HasPermissions; use Illuminate\\Contracts\\Auth\\Authenticatable; use Illuminate\\Database\\Eloquent\\Model; use Illuminate\\Http\\Request; class Copy extends RowAction { /** * @return string */ protected $title = 'Title'; /** * \u5904\u7406\u8bf7\u6c42\uff0c\u5982\u679c\u4e0d\u9700\u8981\u63a5\u53e3\u5904\u7406\uff0c\u8bf7\u76f4\u63a5\u5220\u9664\u8fd9\u4e2a\u65b9\u6cd5 * * @param Request $request * * @return Response */ public function handle(Request $request) { // \u83b7\u53d6\u4e3b\u952e $key = $this->getKey(); return $this->response() ->success('Processed successfully.') ->redirect('/'); } /** * \u8fd4\u56de\u8df3\u8f6c\u5730\u5740\uff0c\u5982\u679c\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664 * * @return string|void */ protected function href() { // return admin_url('auth/users/'.$this->getKey()); } /** * \u786e\u8ba4\u5f39\u7a97\u4fe1\u606f\uff0c\u5982\u679c\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664 * * @return string|array|void */ public function confirm() { // return ['Confirm?', 'contents']; } /** * \u6743\u9650\u5224\u65ad\uff0c\u5982\u679c\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664 * * @param Model|Authenticatable|HasPermissions|null $user * * @return bool */ protected function authorize($user): bool { return true; } } \u4f7f\u7528 $tree->actions(new Copy());","title":"\u884c\u64cd\u4f5c"},{"location":"2.x/action/","text":"\u52a8\u4f5c\u57fa\u672c\u4f7f\u7528 \u5f00\u53d1\u8005\u901a\u8fc7 Action \u52a8\u4f5c\u7c7b\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u7684\u5f00\u53d1\u51fa\u4e00\u4e2a\u542b\u6709\u7279\u5b9a\u529f\u80fd\u7684\u64cd\u4f5c\uff0c\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u7684\u8ba9\u7528\u6237\u4e0e\u670d\u52a1\u5668\u4ea7\u751f\u4ea4\u4e92\u3002 \u4f8b\u5982\uff0c\u9875\u9762\u4e0a\u9700\u8981\u4e00\u4e2a\u6309\u94ae\uff0c\u7528\u6237\u70b9\u51fb\u4e4b\u540e\u53ef\u4ee5\u5411\u670d\u52a1\u5668\u53d1\u8d77\u8bf7\u6c42\uff0c\u901a\u8fc7\u5f39\u7a97\u5c55\u793a\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u4fe1\u606f\uff0c\u90a3\u4e48\u8fd9\u4e2a\u529f\u80fd\u6309\u94ae\u5c31\u53ef\u4ee5\u7528 Action \u6765\u5f00\u53d1\u3002 \u793a\u4f8b \u4e0b\u9762\u6211\u4eec\u5c31\u5f00\u59cb\u5f00\u53d1\u4e00\u4e2a\u7528\u4e8e\u67e5\u770b\u767b\u5f55\u7528\u6237\u4fe1\u606f\u7684\u6309\u94ae\uff1a \u4f7f\u7528\u547d\u4ee4\u521b\u5efaAction\u7c7b \u9996\u5148\u9700\u8981\u5148\u521b\u5efa Action \u7c7b\uff0c\u8fd0\u884c\u547d\u4ee4 php artisan admin:action \u8fd0\u884c\u6210\u529f\u4e4b\u540e\u4f1a\u770b\u5230\u547d\u4ee4\u7a97\u53e3\u51fa\u73b0\u5982\u4e0b\u4fe1\u606f\uff0c\u8ba9\u5f00\u53d1\u8005\u9009\u62e9\u4e00\u4e2a Action \u7c7b\u7684\u7c7b\u578b\uff0c\u8fd9\u91cc\u6211\u4eec\u8f93\u5165 0 \u5c31\u884c {tip} default \u7c7b\u578b\u7684\u52a8\u4f5c\u7c7b\uff0c\u53ef\u4ee5\u7528\u5728\u9875\u9762\u7684\u4efb\u610f\u4f4d\u7f6e\u3002 Which type of action would you like to make?: [0] default [1] grid-batch [2] grid-row [3] grid-tool [4] form-tool [5] show-tool [6] tree-tool > 0 # \u8f93\u5165 0 \u63a5\u7740\u8f93\u5165 Action \u7c7b\u540d\u79f0\uff0c\u8fd9\u91cc\u9700\u8981\u8f93\u5165 \u5927\u9a7c\u5cf0 \u98ce\u683c\u7684\u82f1\u6587\u5b57\u6bcd Please enter a name of action class: > ShowCurrentAdminUser \u7c7b\u540d\u8f93\u5165\u5b8c\u6210\u4e4b\u540e\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u4fe1\u606f\u8ba9\u5f00\u53d1\u8005\u8f93\u5165\u7c7b\u7684\u547d\u540d\u7a7a\u95f4\uff0c\u9ed8\u8ba4\u7684\u547d\u540d\u7a7a\u95f4\u662f App\\Admin\\Actions \uff0c\u8fd9\u91cc\u6211\u4eec\u76f4\u63a5\u6309\u56de\u8f66\u8df3\u8fc7\u5c31\u884c\u4e86 Please enter the namespace of action class [App\\Admin\\Actions]: > \u8fd9\u6837\u4e00\u4e2a Action \u7c7b\u5c31\u521b\u5efa\u5b8c\u6210\u4e86\uff0c\u521a\u521a\u521b\u5efa\u7684\u7c7b\u8def\u5f84\u662f app/Admin/Actions/ShowCurrentAdminUser.php \u4f7f\u7528 \u4fee\u6539 Action \u7c7b\u5982\u4e0b {tip} \u5982\u679c\u4f60\u7684\u52a8\u4f5c\u7c7b\u4e2d\u9700\u8981\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u4f20\u9012\u53c2\u6570\uff0c\u5219\u4e00\u5b9a\u8981\u7ed9\u6784\u9020\u65b9\u6cd5\u7684\u6240\u6709\u53c2\u6570\u90fd\u8bbe\u7f6e\u4e00\u4e2a\u9ed8\u8ba4\u503c\uff01 <?php namespace App\\Admin\\Actions; use Dcat\\Admin\\Admin; use Dcat\\Admin\\Widgets\\Table; use Dcat\\Admin\\Actions\\Action; use Dcat\\Admin\\Actions\\Response; use Dcat\\Admin\\Traits\\HasPermissions; use Illuminate\\Contracts\\Auth\\Authenticatable; use Illuminate\\Database\\Eloquent\\Model; use Illuminate\\Http\\Request; class ShowCurrentAdminUser extends Action { /** * \u6309\u94ae\u6807\u9898 * * @var string */ protected $title = '\u4e2a\u4eba\u4fe1\u606f'; /** * @var string */ protected $modalId = 'show-current-user'; /** * \u5904\u7406\u5f53\u524d\u52a8\u4f5c\u7684\u8bf7\u6c42\u63a5\u53e3\uff0c\u5982\u679c\u4e0d\u9700\u8981\u8bf7\u76f4\u63a5\u5220\u9664 * * @param Request $request * * @return Response */ public function handle(Request $request) { // \u83b7\u53d6\u5f53\u524d\u767b\u5f55\u7528\u6237\u6a21\u578b $user = Admin::user(); // \u8fd9\u91cc\u6211\u4eec\u7528\u8868\u683c\u5c55\u793a\u6a21\u578b\u6570\u636e $table = Table::make($user->toArray()); return $this->response() ->success('\u67e5\u8be2\u6210\u529f') ->html($table); } /** * \u5904\u7406\u54cd\u5e94\u7684HTML\u5b57\u7b26\u4e32\uff0c\u9644\u52a0\u5230\u5f39\u7a97\u8282\u70b9\u4e2d * * @return string */ protected function handleHtmlResponse() { return <<<'JS' function (target, html, data) { var $modal = $(target.data('target')); $modal.find('.modal-body').html(html) $modal.modal('show') } JS; } /** * \u8bbe\u7f6eHTML\u6807\u7b7e\u7684\u5c5e\u6027 * * @return void */ protected function setupHtmlAttributes() { // \u6dfb\u52a0class $this->addHtmlClass('btn btn-primary'); // \u4fdd\u5b58\u5f39\u7a97\u7684ID $this->setHtmlAttribute('data-target', '#'.$this->modalId); parent::setupHtmlAttributes(); } /** * \u8bbe\u7f6e\u6309\u94ae\u7684HTML\uff0c\u8fd9\u91cc\u6211\u4eec\u9700\u8981\u9644\u52a0\u4e0a\u5f39\u7a97\u7684HTML * * @return string|void */ public function html() { // \u6309\u94ae\u7684html $html = parent::html(); return <<<HTML {$html} <div class=\"modal fade\" id=\"{$this->modalId}\" tabindex=\"-1\" role=\"dialog\"> <div class=\"modal-dialog modal-lg\" role=\"document\"> <div class=\"modal-content\"> <div class=\"modal-header\"> <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button> <h4 class=\"modal-title\">{$this->title()}</h4> </div> <div class=\"modal-body\"></div> </div> </div> </div> HTML; } /** * \u786e\u8ba4\u5f39\u7a97\u4fe1\u606f\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @return string|void */ public function confirm() { // return ['Confirm?', 'contents']; } /** * \u52a8\u4f5c\u6743\u9650\u5224\u65ad\uff0c\u8fd4\u56defalse\u5219\u8868\u793a\u65e0\u6743\u9650\uff0c\u5982\u679c\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @param Model|Authenticatable|HasPermissions|null $user * * @return bool */ protected function authorize($user): bool { return true; } /** * \u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u52a8\u4f5c\u53d1\u8d77\u8bf7\u6c42\u65f6\u9700\u8981\u9644\u5e26\u7684\u53c2\u6570\uff0c\u5982\u679c\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @return array */ protected function parameters() { return []; } } \u4fee\u6539\u5b8c\u4e4b\u540e\u5c31\u53ef\u4ee5\u5f00\u59cb\u4f7f\u7528\u4e86 <?php use App\\Admin\\Actions\\ShowCurrentAdminUser; class IndexController { public function index(Content $content) { return $content->body(ShowCurrentAdminUser::make()); } } \u6548\u679c\u5982\u4e0b \u5c5e\u6027 Dcat\\Admin\\Actions\\Action \u7c7b\u53ef\u7528\u5c5e\u6027\u8bf4\u660e \u5c5e\u6027\u540d \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 title string \u6807\u9898 selectorPrefix public string .admin-action- \u76ee\u6807\u5143\u7d20\u7684 Css \u9009\u62e9\u5668 method string POST \u4e0e\u670d\u52a1\u5668\u4ea4\u4e92\u7684\u8bf7\u6c42\u65b9\u6cd5 event string click \u76ee\u6807\u5143\u7d20\u7ed1\u5b9a\u7684\u4e8b\u4ef6\uff0c\u9ed8\u8ba4\u4e3a\u70b9\u51fb\u4e8b\u4ef6 disabled bool false \u662f\u5426\u6e32\u67d3\u52a8\u4f5c\u5143\u7d20\uff0c\u8bbe\u7f6e true \u5219\u4e0d\u6e32\u67d3 usingHandler bool true \u5f53\u6b64\u5c5e\u6027\u8bbe\u7f6e\u4e3a false \uff0c\u5219\u65e0\u8bba Action \u4e2d\u662f\u5426\u5305\u542b handle \u65b9\u6cd5\u90fd\u4e0d\u4f1a\u5411\u670d\u52a1\u5668\u53d1\u8d77\u8bf7\u6c42 \u65b9\u6cd5 Dcat\\Admin\\Actions\\Action \u7c7b\u65b9\u6cd5\u8bf4\u660e \u521b\u5efa\u5b9e\u4f8b (make) \u6b64\u65b9\u6cd5\u662f\u4e00\u4e2a\u9759\u6001\u65b9\u6cd5\uff0c\u7528\u4e8e\u5b9e\u4f8b\u5316\u52a8\u4f5c\u7c7b $action = MyAction::make($param1, $param2...); \u5904\u7406\u8bf7\u6c42 (handle) \u5f53 Action \u7c7b\u4e2d\u5305\u542b\u6b64\u65b9\u6cd5\u4e4b\u65f6\uff0c\u76ee\u6807\u5143\u7d20\u4f1a\u88ab\u7ed1\u5b9a\u901a\u8fc7 event \u5c5e\u6027\u8bbe\u7f6e\u7684\u4e8b\u4ef6\uff08\u9ed8\u8ba4\u4e3a click \uff09\u3002\u5982\u679c\u4e8b\u4ef6\u88ab\u89e6\u53d1\uff0c\u5219\u4f1a\u5411\u670d\u52a1\u5668\u53d1\u8d77\u8bf7\u6c42\uff0c\u800c handle \u65b9\u6cd5\u5219\u53ef\u4ee5\u5904\u7406\u5e76\u54cd\u5e94\u6b64\u8bf7\u6c42\u3002 {tip} \u5982\u679c\u6ca1\u6709\u6b64\u65b9\u6cd5\uff0c\u5219\u76ee\u6807\u5143\u7d20\u4e0d\u4f1a\u88ab\u7ed1\u5b9a\u4e8b\u4ef6\u3002 \u54cd\u5e94 (response) \u53c2\u8003 \u52a8\u4f5c\u4ee5\u53ca\u8868\u5355\u54cd\u5e94 \u7ae0\u8282 \u8bbe\u7f6e\u8bf7\u6c42\u6570\u636e (parameters) \u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u52a8\u4f5c\u53d1\u8d77\u8bf7\u6c42\u65f6\u9700\u8981\u9644\u5e26\u7684\u53c2\u6570 <?php use Dcat\\Admin\\Actions\\Action; use Illuminate\\Http\\Request; class MyAction extends Action { public function handle(Request $request) { // \u63a5\u6536\u53c2\u6570 $key1 = $request->get('key1'); $key2 = $request->get('key2'); return $this->response()->success('\u6210\u529f\uff01'); } public function parameters() { return [ 'key1' => 'value1', 'key2' => 'value2', ]; } } \u786e\u8ba4\u5f39\u7a97 (confirm) \u8bbe\u7f6e\u786e\u8ba4\u4fe1\u606f\uff0c\u6b64\u65b9\u6cd5\u8981\u6c42\u8fd4\u56de\u4e00\u4e2a string \u7c7b\u578b\u53c2\u6570\u3002 \u5f53\u6b64\u65b9\u6cd5\u8fd4\u56de\u503c\u4e0d\u4e3a\u7a7a\u65f6\u4f1a\u52a0\u5165\u786e\u8ba4\u7a97\u529f\u80fd\uff0c\u5f53\u4e8b\u4ef6\u88ab\u89e6\u53d1\u65f6\u81ea\u52a8\u5f39\u51fa\u786e\u8ba4\u6846\uff0c\u70b9\u51fb\u786e\u8ba4\u540e\u624d\u4f1a\u8fdb\u884c\u4e0b\u4e00\u6b65\u64cd\u4f5c\u3002 public function confirm() { return '\u4f60\u786e\u5b9a\u8981\u5220\u9664\u6b64\u884c\u5185\u5bb9\u5417\uff1f'; } \u663e\u793a\u5f39\u7a97\u6807\u9898\u548c\u5185\u5bb9 public function confirm() { return ['\u4f60\u786e\u5b9a\u8981\u5220\u9664\u6b64\u884c\u5185\u5bb9\u5417\uff1f', '\u5f39\u7a97\u5185\u5bb9']; } \u53d1\u8d77\u8bf7\u6c42\u4e4b\u524d\u6267\u884c\u7684JS\u4ee3\u7801 (actionScript) \u8bbe\u7f6e\u52a8\u4f5c\u6267\u884c\u7684\u524d\u7f6e js \u4ee3\u7801\uff0c\u5f53\u6309\u94ae\u7ed1\u5b9a\u7684\u4e8b\u4ef6\u88ab\u89e6\u53d1\u540e\uff0c\u53d1\u8d77\u8bf7\u6c42\u4e4b\u524d\u4f1a\u6267\u884c\u901a\u8fc7\u6b64\u65b9\u6cd5\u8bbe\u7f6e\u7684 js \u4ee3\u7801\uff0c\u6b64\u65b9\u6cd5\u8981\u6c42\u8fd4\u56de\u4e00\u4e2a js \u7684\u533f\u540d\u51fd\u6570\u3002 js \u533f\u540d\u51fd\u6570\u63a5\u6536\u4ee5\u4e0b\u4e09\u4e2a\u53c2\u6570\uff1a data object \u9700\u8981\u4f20\u9012\u7ed9\u63a5\u53e3\u7684\u6570\u636e\u5bf9\u8c61 target object \u52a8\u4f5c\u6309\u94ae\u7684 jQuery \u5bf9\u8c61 action object \u52a8\u4f5c\u7684\u7ba1\u7406\u5bf9\u8c61 protected function actionScript() { return <<<JS function (data, target, action) { console.log('\u53d1\u8d77\u8bf7\u6c42\u4e4b\u524d', data, target, action); // return false; \u5728\u8fd9\u91ccreturn false\u53ef\u4ee5\u7ec8\u6b62\u6267\u884c\u540e\u9762\u7684\u64cd\u4f5c // \u66f4\u6539\u4f20\u9012\u5230\u63a5\u53e3\u7684\u4e3b\u952e\u503c action.options.key = 123; } JS } \u5904\u7406\u670d\u52a1\u5668\u54cd\u5e94\u7684HTML\u4ee3\u7801 (handleHtmlResponse) \u5904\u7406\u670d\u52a1\u5668\u54cd\u5e94\u7684 HTML \u4ee3\u7801\uff0c\u6b64\u65b9\u6cd5\u8981\u6c42\u8fd4\u56de\u4e00\u4e2a js \u533f\u540d\u51fd\u6570\u3002 protected function handleHtmlResponse() { return <<<'JS' function (target, html, data) { // target \u53c2\u6570\u662f\u52a8\u4f5c\u6309\u94ae\u7684JQ\u5bf9\u8c61 // html \u53c2\u6570\u662f\u63a5\u53e3\u8fd4\u56deHTML\u5b57\u7b26\u4e32 // data \u53c2\u6570\u662f\u63a5\u53e3\u8fd4\u56de\u7684\u5b8c\u6574\u6570\u636e\u7684json\u5bf9\u8c61 target.html(html); } JS; } \u6743\u9650 (authorize) \u6b64\u65b9\u6cd5\u7528\u4e8e\u5224\u65ad\u767b\u5f55\u7528\u6237\u7684\u64cd\u4f5c\u6743\u9650\uff0c\u9ed8\u8ba4\u8fd4\u56de true protected function authorize($user): bool { return $user->can('do-action'); } \u65e0\u6743\u9650\u54cd\u5e94 (failedAuthorization) \u6b64\u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u9274\u6743\u5931\u8d25\u7684\u54cd\u5e94\u5185\u5bb9\uff0c\u5982\u679c\u9700\u8981\u5219\u53ef\u8986\u5199\u6b64\u65b9\u6cd5 public function failedAuthorization() { return $this->response()->error(__('admin.deny')); } \u9690\u85cf\u6216\u663e\u793a (disable) \u8bbe\u7f6e\u663e\u793a\u6216\u9690\u85cf\u6b64\u52a8\u4f5c // \u9690\u85cf MyAction::make()->disable(); // \u663e\u793a MyAction::make()->disable(false); \u5224\u65ad\u662f\u5426\u663e\u793a (allowed) \u5224\u65ad\u52a8\u4f5c\u662f\u5426\u5141\u8bb8\u663e\u793a if (MyAction::make()->allowed()) { ... } \u8bbe\u7f6e\u4e3b\u952e (setKey) \u8bbe\u7f6e\u6570\u636e\u4e3b\u952e $id = ...; MyAction::make()->setKey($id); \u83b7\u53d6\u4e3b\u952e\u503c (getKey) \u83b7\u53d6\u6570\u636e\u4e3b\u952e\uff0c\u6b64\u65b9\u6cd5\u5728 handle \u65b9\u6cd5\u5185\u4e5f\u540c\u6837\u53ef\u7528 <?php use Dcat\\Admin\\Actions\\Action; use Illuminate\\Http\\Request; class MyAction extends Action { public function handle(Request $request) { $id = $this->getKey(); ... return $this->response()->success('\u6210\u529f\uff01'); } public function title() { return \"\u6807\u9898 {$this->key()}\"; } } \u83b7\u53d6\u76ee\u6807\u5143\u7d20\u6837\u5f0f (getElementClass) \u83b7\u53d6\u52a8\u4f5c\u76ee\u6807\u5143\u7d20\uff08\u6309\u94ae\uff09\u7684 class $class = MyAction::make()->getElementClass(); \u83b7\u53d6\u76ee\u6807\u5143\u7d20\u7684Css\u9009\u62e9\u5668 (selector) \u83b7\u53d6\u52a8\u4f5c\u76ee\u6807\u5143\u7d20\uff08\u6309\u94ae\uff09\u7684CSS\u9009\u62e9\u5668 $selector = MyAction::make()->selector(); Admin::script( <<<JS $('$selector').click(...); JS ); \u8ffd\u52a0\u6837\u5f0f (addHtmlClass) \u8ffd\u52a0\u83b7\u53d6\u52a8\u4f5c\u76ee\u6807\u5143\u7d20\uff08\u6309\u94ae\uff09\u7684 class MyAction::make()->addHtmlClass('btn btn-primary'); MyAction::make()->addHtmlClass(['btn', 'btn-primary']); \u8bbe\u7f6e\u76ee\u6807\u5143\u7d20\u7684HTML (html) \u6b64\u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u52a8\u4f5c\u76ee\u6807\u5143\u7d20\u7684 HTML \u4ee3\u7801\uff0c\u5982\u6709\u9700\u8981\u53ef\u4ee5\u8986\u5199 protected function html() { return <<<HTML <a {$this->formatHtmlAttributes()}>{$this->title()}</a> HTML; } \u6dfb\u52a0JS\u4ee3\u7801 (script) \u6b64\u65b9\u6cd5\u7528\u4e8e\u5728 render \u65b9\u6cd5\u6267\u884c\u5b8c\u6bd5\u4e4b\u524d\u6dfb\u52a0 JS \u4ee3\u7801 protected function script() { return <<<JS console.log('...') JS; } \u8bbe\u7f6e\u76ee\u6807\u5143\u7d20\u7684HTML\u5c5e\u6027 (setHtmlAttribute) \u8bbe\u7f6e\u76ee\u6807\u5143\u7d20\u7684 HTML \u6807\u7b7e\u5c5e\u6027 MyAction::make()->setHtmlAttribute('name', $value); // \u6279\u91cf\u8bbe\u7f6e MyAction::make()->setHtmlAttribute(['name' => $value]);","title":"\u52a8\u4f5c\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/action/#_1","text":"\u5f00\u53d1\u8005\u901a\u8fc7 Action \u52a8\u4f5c\u7c7b\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u7684\u5f00\u53d1\u51fa\u4e00\u4e2a\u542b\u6709\u7279\u5b9a\u529f\u80fd\u7684\u64cd\u4f5c\uff0c\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u7684\u8ba9\u7528\u6237\u4e0e\u670d\u52a1\u5668\u4ea7\u751f\u4ea4\u4e92\u3002 \u4f8b\u5982\uff0c\u9875\u9762\u4e0a\u9700\u8981\u4e00\u4e2a\u6309\u94ae\uff0c\u7528\u6237\u70b9\u51fb\u4e4b\u540e\u53ef\u4ee5\u5411\u670d\u52a1\u5668\u53d1\u8d77\u8bf7\u6c42\uff0c\u901a\u8fc7\u5f39\u7a97\u5c55\u793a\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u4fe1\u606f\uff0c\u90a3\u4e48\u8fd9\u4e2a\u529f\u80fd\u6309\u94ae\u5c31\u53ef\u4ee5\u7528 Action \u6765\u5f00\u53d1\u3002","title":"\u52a8\u4f5c\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/action/#_2","text":"\u4e0b\u9762\u6211\u4eec\u5c31\u5f00\u59cb\u5f00\u53d1\u4e00\u4e2a\u7528\u4e8e\u67e5\u770b\u767b\u5f55\u7528\u6237\u4fe1\u606f\u7684\u6309\u94ae\uff1a","title":"\u793a\u4f8b"},{"location":"2.x/action/#action","text":"\u9996\u5148\u9700\u8981\u5148\u521b\u5efa Action \u7c7b\uff0c\u8fd0\u884c\u547d\u4ee4 php artisan admin:action \u8fd0\u884c\u6210\u529f\u4e4b\u540e\u4f1a\u770b\u5230\u547d\u4ee4\u7a97\u53e3\u51fa\u73b0\u5982\u4e0b\u4fe1\u606f\uff0c\u8ba9\u5f00\u53d1\u8005\u9009\u62e9\u4e00\u4e2a Action \u7c7b\u7684\u7c7b\u578b\uff0c\u8fd9\u91cc\u6211\u4eec\u8f93\u5165 0 \u5c31\u884c {tip} default \u7c7b\u578b\u7684\u52a8\u4f5c\u7c7b\uff0c\u53ef\u4ee5\u7528\u5728\u9875\u9762\u7684\u4efb\u610f\u4f4d\u7f6e\u3002 Which type of action would you like to make?: [0] default [1] grid-batch [2] grid-row [3] grid-tool [4] form-tool [5] show-tool [6] tree-tool > 0 # \u8f93\u5165 0 \u63a5\u7740\u8f93\u5165 Action \u7c7b\u540d\u79f0\uff0c\u8fd9\u91cc\u9700\u8981\u8f93\u5165 \u5927\u9a7c\u5cf0 \u98ce\u683c\u7684\u82f1\u6587\u5b57\u6bcd Please enter a name of action class: > ShowCurrentAdminUser \u7c7b\u540d\u8f93\u5165\u5b8c\u6210\u4e4b\u540e\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u4fe1\u606f\u8ba9\u5f00\u53d1\u8005\u8f93\u5165\u7c7b\u7684\u547d\u540d\u7a7a\u95f4\uff0c\u9ed8\u8ba4\u7684\u547d\u540d\u7a7a\u95f4\u662f App\\Admin\\Actions \uff0c\u8fd9\u91cc\u6211\u4eec\u76f4\u63a5\u6309\u56de\u8f66\u8df3\u8fc7\u5c31\u884c\u4e86 Please enter the namespace of action class [App\\Admin\\Actions]: > \u8fd9\u6837\u4e00\u4e2a Action \u7c7b\u5c31\u521b\u5efa\u5b8c\u6210\u4e86\uff0c\u521a\u521a\u521b\u5efa\u7684\u7c7b\u8def\u5f84\u662f app/Admin/Actions/ShowCurrentAdminUser.php","title":"\u4f7f\u7528\u547d\u4ee4\u521b\u5efaAction\u7c7b"},{"location":"2.x/action/#_3","text":"\u4fee\u6539 Action \u7c7b\u5982\u4e0b {tip} \u5982\u679c\u4f60\u7684\u52a8\u4f5c\u7c7b\u4e2d\u9700\u8981\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u4f20\u9012\u53c2\u6570\uff0c\u5219\u4e00\u5b9a\u8981\u7ed9\u6784\u9020\u65b9\u6cd5\u7684\u6240\u6709\u53c2\u6570\u90fd\u8bbe\u7f6e\u4e00\u4e2a\u9ed8\u8ba4\u503c\uff01 <?php namespace App\\Admin\\Actions; use Dcat\\Admin\\Admin; use Dcat\\Admin\\Widgets\\Table; use Dcat\\Admin\\Actions\\Action; use Dcat\\Admin\\Actions\\Response; use Dcat\\Admin\\Traits\\HasPermissions; use Illuminate\\Contracts\\Auth\\Authenticatable; use Illuminate\\Database\\Eloquent\\Model; use Illuminate\\Http\\Request; class ShowCurrentAdminUser extends Action { /** * \u6309\u94ae\u6807\u9898 * * @var string */ protected $title = '\u4e2a\u4eba\u4fe1\u606f'; /** * @var string */ protected $modalId = 'show-current-user'; /** * \u5904\u7406\u5f53\u524d\u52a8\u4f5c\u7684\u8bf7\u6c42\u63a5\u53e3\uff0c\u5982\u679c\u4e0d\u9700\u8981\u8bf7\u76f4\u63a5\u5220\u9664 * * @param Request $request * * @return Response */ public function handle(Request $request) { // \u83b7\u53d6\u5f53\u524d\u767b\u5f55\u7528\u6237\u6a21\u578b $user = Admin::user(); // \u8fd9\u91cc\u6211\u4eec\u7528\u8868\u683c\u5c55\u793a\u6a21\u578b\u6570\u636e $table = Table::make($user->toArray()); return $this->response() ->success('\u67e5\u8be2\u6210\u529f') ->html($table); } /** * \u5904\u7406\u54cd\u5e94\u7684HTML\u5b57\u7b26\u4e32\uff0c\u9644\u52a0\u5230\u5f39\u7a97\u8282\u70b9\u4e2d * * @return string */ protected function handleHtmlResponse() { return <<<'JS' function (target, html, data) { var $modal = $(target.data('target')); $modal.find('.modal-body').html(html) $modal.modal('show') } JS; } /** * \u8bbe\u7f6eHTML\u6807\u7b7e\u7684\u5c5e\u6027 * * @return void */ protected function setupHtmlAttributes() { // \u6dfb\u52a0class $this->addHtmlClass('btn btn-primary'); // \u4fdd\u5b58\u5f39\u7a97\u7684ID $this->setHtmlAttribute('data-target', '#'.$this->modalId); parent::setupHtmlAttributes(); } /** * \u8bbe\u7f6e\u6309\u94ae\u7684HTML\uff0c\u8fd9\u91cc\u6211\u4eec\u9700\u8981\u9644\u52a0\u4e0a\u5f39\u7a97\u7684HTML * * @return string|void */ public function html() { // \u6309\u94ae\u7684html $html = parent::html(); return <<<HTML {$html} <div class=\"modal fade\" id=\"{$this->modalId}\" tabindex=\"-1\" role=\"dialog\"> <div class=\"modal-dialog modal-lg\" role=\"document\"> <div class=\"modal-content\"> <div class=\"modal-header\"> <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button> <h4 class=\"modal-title\">{$this->title()}</h4> </div> <div class=\"modal-body\"></div> </div> </div> </div> HTML; } /** * \u786e\u8ba4\u5f39\u7a97\u4fe1\u606f\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @return string|void */ public function confirm() { // return ['Confirm?', 'contents']; } /** * \u52a8\u4f5c\u6743\u9650\u5224\u65ad\uff0c\u8fd4\u56defalse\u5219\u8868\u793a\u65e0\u6743\u9650\uff0c\u5982\u679c\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @param Model|Authenticatable|HasPermissions|null $user * * @return bool */ protected function authorize($user): bool { return true; } /** * \u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u52a8\u4f5c\u53d1\u8d77\u8bf7\u6c42\u65f6\u9700\u8981\u9644\u5e26\u7684\u53c2\u6570\uff0c\u5982\u679c\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @return array */ protected function parameters() { return []; } } \u4fee\u6539\u5b8c\u4e4b\u540e\u5c31\u53ef\u4ee5\u5f00\u59cb\u4f7f\u7528\u4e86 <?php use App\\Admin\\Actions\\ShowCurrentAdminUser; class IndexController { public function index(Content $content) { return $content->body(ShowCurrentAdminUser::make()); } } \u6548\u679c\u5982\u4e0b","title":"\u4f7f\u7528"},{"location":"2.x/action/#_4","text":"Dcat\\Admin\\Actions\\Action \u7c7b\u53ef\u7528\u5c5e\u6027\u8bf4\u660e \u5c5e\u6027\u540d \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 title string \u6807\u9898 selectorPrefix public string .admin-action- \u76ee\u6807\u5143\u7d20\u7684 Css \u9009\u62e9\u5668 method string POST \u4e0e\u670d\u52a1\u5668\u4ea4\u4e92\u7684\u8bf7\u6c42\u65b9\u6cd5 event string click \u76ee\u6807\u5143\u7d20\u7ed1\u5b9a\u7684\u4e8b\u4ef6\uff0c\u9ed8\u8ba4\u4e3a\u70b9\u51fb\u4e8b\u4ef6 disabled bool false \u662f\u5426\u6e32\u67d3\u52a8\u4f5c\u5143\u7d20\uff0c\u8bbe\u7f6e true \u5219\u4e0d\u6e32\u67d3 usingHandler bool true \u5f53\u6b64\u5c5e\u6027\u8bbe\u7f6e\u4e3a false \uff0c\u5219\u65e0\u8bba Action \u4e2d\u662f\u5426\u5305\u542b handle \u65b9\u6cd5\u90fd\u4e0d\u4f1a\u5411\u670d\u52a1\u5668\u53d1\u8d77\u8bf7\u6c42","title":"\u5c5e\u6027"},{"location":"2.x/action/#_5","text":"Dcat\\Admin\\Actions\\Action \u7c7b\u65b9\u6cd5\u8bf4\u660e","title":"\u65b9\u6cd5"},{"location":"2.x/action/#make","text":"\u6b64\u65b9\u6cd5\u662f\u4e00\u4e2a\u9759\u6001\u65b9\u6cd5\uff0c\u7528\u4e8e\u5b9e\u4f8b\u5316\u52a8\u4f5c\u7c7b $action = MyAction::make($param1, $param2...);","title":"\u521b\u5efa\u5b9e\u4f8b (make)"},{"location":"2.x/action/#handle","text":"\u5f53 Action \u7c7b\u4e2d\u5305\u542b\u6b64\u65b9\u6cd5\u4e4b\u65f6\uff0c\u76ee\u6807\u5143\u7d20\u4f1a\u88ab\u7ed1\u5b9a\u901a\u8fc7 event \u5c5e\u6027\u8bbe\u7f6e\u7684\u4e8b\u4ef6\uff08\u9ed8\u8ba4\u4e3a click \uff09\u3002\u5982\u679c\u4e8b\u4ef6\u88ab\u89e6\u53d1\uff0c\u5219\u4f1a\u5411\u670d\u52a1\u5668\u53d1\u8d77\u8bf7\u6c42\uff0c\u800c handle \u65b9\u6cd5\u5219\u53ef\u4ee5\u5904\u7406\u5e76\u54cd\u5e94\u6b64\u8bf7\u6c42\u3002 {tip} \u5982\u679c\u6ca1\u6709\u6b64\u65b9\u6cd5\uff0c\u5219\u76ee\u6807\u5143\u7d20\u4e0d\u4f1a\u88ab\u7ed1\u5b9a\u4e8b\u4ef6\u3002","title":"\u5904\u7406\u8bf7\u6c42 (handle)"},{"location":"2.x/action/#response","text":"\u53c2\u8003 \u52a8\u4f5c\u4ee5\u53ca\u8868\u5355\u54cd\u5e94 \u7ae0\u8282","title":"\u54cd\u5e94 (response)"},{"location":"2.x/action/#parameters","text":"\u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u52a8\u4f5c\u53d1\u8d77\u8bf7\u6c42\u65f6\u9700\u8981\u9644\u5e26\u7684\u53c2\u6570 <?php use Dcat\\Admin\\Actions\\Action; use Illuminate\\Http\\Request; class MyAction extends Action { public function handle(Request $request) { // \u63a5\u6536\u53c2\u6570 $key1 = $request->get('key1'); $key2 = $request->get('key2'); return $this->response()->success('\u6210\u529f\uff01'); } public function parameters() { return [ 'key1' => 'value1', 'key2' => 'value2', ]; } }","title":"\u8bbe\u7f6e\u8bf7\u6c42\u6570\u636e (parameters)"},{"location":"2.x/action/#confirm","text":"\u8bbe\u7f6e\u786e\u8ba4\u4fe1\u606f\uff0c\u6b64\u65b9\u6cd5\u8981\u6c42\u8fd4\u56de\u4e00\u4e2a string \u7c7b\u578b\u53c2\u6570\u3002 \u5f53\u6b64\u65b9\u6cd5\u8fd4\u56de\u503c\u4e0d\u4e3a\u7a7a\u65f6\u4f1a\u52a0\u5165\u786e\u8ba4\u7a97\u529f\u80fd\uff0c\u5f53\u4e8b\u4ef6\u88ab\u89e6\u53d1\u65f6\u81ea\u52a8\u5f39\u51fa\u786e\u8ba4\u6846\uff0c\u70b9\u51fb\u786e\u8ba4\u540e\u624d\u4f1a\u8fdb\u884c\u4e0b\u4e00\u6b65\u64cd\u4f5c\u3002 public function confirm() { return '\u4f60\u786e\u5b9a\u8981\u5220\u9664\u6b64\u884c\u5185\u5bb9\u5417\uff1f'; } \u663e\u793a\u5f39\u7a97\u6807\u9898\u548c\u5185\u5bb9 public function confirm() { return ['\u4f60\u786e\u5b9a\u8981\u5220\u9664\u6b64\u884c\u5185\u5bb9\u5417\uff1f', '\u5f39\u7a97\u5185\u5bb9']; }","title":"\u786e\u8ba4\u5f39\u7a97 (confirm)"},{"location":"2.x/action/#js-actionscript","text":"\u8bbe\u7f6e\u52a8\u4f5c\u6267\u884c\u7684\u524d\u7f6e js \u4ee3\u7801\uff0c\u5f53\u6309\u94ae\u7ed1\u5b9a\u7684\u4e8b\u4ef6\u88ab\u89e6\u53d1\u540e\uff0c\u53d1\u8d77\u8bf7\u6c42\u4e4b\u524d\u4f1a\u6267\u884c\u901a\u8fc7\u6b64\u65b9\u6cd5\u8bbe\u7f6e\u7684 js \u4ee3\u7801\uff0c\u6b64\u65b9\u6cd5\u8981\u6c42\u8fd4\u56de\u4e00\u4e2a js \u7684\u533f\u540d\u51fd\u6570\u3002 js \u533f\u540d\u51fd\u6570\u63a5\u6536\u4ee5\u4e0b\u4e09\u4e2a\u53c2\u6570\uff1a data object \u9700\u8981\u4f20\u9012\u7ed9\u63a5\u53e3\u7684\u6570\u636e\u5bf9\u8c61 target object \u52a8\u4f5c\u6309\u94ae\u7684 jQuery \u5bf9\u8c61 action object \u52a8\u4f5c\u7684\u7ba1\u7406\u5bf9\u8c61 protected function actionScript() { return <<<JS function (data, target, action) { console.log('\u53d1\u8d77\u8bf7\u6c42\u4e4b\u524d', data, target, action); // return false; \u5728\u8fd9\u91ccreturn false\u53ef\u4ee5\u7ec8\u6b62\u6267\u884c\u540e\u9762\u7684\u64cd\u4f5c // \u66f4\u6539\u4f20\u9012\u5230\u63a5\u53e3\u7684\u4e3b\u952e\u503c action.options.key = 123; } JS }","title":"\u53d1\u8d77\u8bf7\u6c42\u4e4b\u524d\u6267\u884c\u7684JS\u4ee3\u7801 (actionScript)"},{"location":"2.x/action/#html-handlehtmlresponse","text":"\u5904\u7406\u670d\u52a1\u5668\u54cd\u5e94\u7684 HTML \u4ee3\u7801\uff0c\u6b64\u65b9\u6cd5\u8981\u6c42\u8fd4\u56de\u4e00\u4e2a js \u533f\u540d\u51fd\u6570\u3002 protected function handleHtmlResponse() { return <<<'JS' function (target, html, data) { // target \u53c2\u6570\u662f\u52a8\u4f5c\u6309\u94ae\u7684JQ\u5bf9\u8c61 // html \u53c2\u6570\u662f\u63a5\u53e3\u8fd4\u56deHTML\u5b57\u7b26\u4e32 // data \u53c2\u6570\u662f\u63a5\u53e3\u8fd4\u56de\u7684\u5b8c\u6574\u6570\u636e\u7684json\u5bf9\u8c61 target.html(html); } JS; }","title":"\u5904\u7406\u670d\u52a1\u5668\u54cd\u5e94\u7684HTML\u4ee3\u7801 (handleHtmlResponse)"},{"location":"2.x/action/#authorize","text":"\u6b64\u65b9\u6cd5\u7528\u4e8e\u5224\u65ad\u767b\u5f55\u7528\u6237\u7684\u64cd\u4f5c\u6743\u9650\uff0c\u9ed8\u8ba4\u8fd4\u56de true protected function authorize($user): bool { return $user->can('do-action'); }","title":"\u6743\u9650 (authorize)"},{"location":"2.x/action/#failedauthorization","text":"\u6b64\u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u9274\u6743\u5931\u8d25\u7684\u54cd\u5e94\u5185\u5bb9\uff0c\u5982\u679c\u9700\u8981\u5219\u53ef\u8986\u5199\u6b64\u65b9\u6cd5 public function failedAuthorization() { return $this->response()->error(__('admin.deny')); }","title":"\u65e0\u6743\u9650\u54cd\u5e94 (failedAuthorization)"},{"location":"2.x/action/#disable","text":"\u8bbe\u7f6e\u663e\u793a\u6216\u9690\u85cf\u6b64\u52a8\u4f5c // \u9690\u85cf MyAction::make()->disable(); // \u663e\u793a MyAction::make()->disable(false);","title":"\u9690\u85cf\u6216\u663e\u793a (disable)"},{"location":"2.x/action/#allowed","text":"\u5224\u65ad\u52a8\u4f5c\u662f\u5426\u5141\u8bb8\u663e\u793a if (MyAction::make()->allowed()) { ... }","title":"\u5224\u65ad\u662f\u5426\u663e\u793a (allowed)"},{"location":"2.x/action/#setkey","text":"\u8bbe\u7f6e\u6570\u636e\u4e3b\u952e $id = ...; MyAction::make()->setKey($id);","title":"\u8bbe\u7f6e\u4e3b\u952e (setKey)"},{"location":"2.x/action/#getkey","text":"\u83b7\u53d6\u6570\u636e\u4e3b\u952e\uff0c\u6b64\u65b9\u6cd5\u5728 handle \u65b9\u6cd5\u5185\u4e5f\u540c\u6837\u53ef\u7528 <?php use Dcat\\Admin\\Actions\\Action; use Illuminate\\Http\\Request; class MyAction extends Action { public function handle(Request $request) { $id = $this->getKey(); ... return $this->response()->success('\u6210\u529f\uff01'); } public function title() { return \"\u6807\u9898 {$this->key()}\"; } }","title":"\u83b7\u53d6\u4e3b\u952e\u503c (getKey)"},{"location":"2.x/action/#getelementclass","text":"\u83b7\u53d6\u52a8\u4f5c\u76ee\u6807\u5143\u7d20\uff08\u6309\u94ae\uff09\u7684 class $class = MyAction::make()->getElementClass();","title":"\u83b7\u53d6\u76ee\u6807\u5143\u7d20\u6837\u5f0f (getElementClass)"},{"location":"2.x/action/#css-selector","text":"\u83b7\u53d6\u52a8\u4f5c\u76ee\u6807\u5143\u7d20\uff08\u6309\u94ae\uff09\u7684CSS\u9009\u62e9\u5668 $selector = MyAction::make()->selector(); Admin::script( <<<JS $('$selector').click(...); JS );","title":"\u83b7\u53d6\u76ee\u6807\u5143\u7d20\u7684Css\u9009\u62e9\u5668 (selector)"},{"location":"2.x/action/#addhtmlclass","text":"\u8ffd\u52a0\u83b7\u53d6\u52a8\u4f5c\u76ee\u6807\u5143\u7d20\uff08\u6309\u94ae\uff09\u7684 class MyAction::make()->addHtmlClass('btn btn-primary'); MyAction::make()->addHtmlClass(['btn', 'btn-primary']);","title":"\u8ffd\u52a0\u6837\u5f0f (addHtmlClass)"},{"location":"2.x/action/#html-html","text":"\u6b64\u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u52a8\u4f5c\u76ee\u6807\u5143\u7d20\u7684 HTML \u4ee3\u7801\uff0c\u5982\u6709\u9700\u8981\u53ef\u4ee5\u8986\u5199 protected function html() { return <<<HTML <a {$this->formatHtmlAttributes()}>{$this->title()}</a> HTML; }","title":"\u8bbe\u7f6e\u76ee\u6807\u5143\u7d20\u7684HTML (html)"},{"location":"2.x/action/#js-script","text":"\u6b64\u65b9\u6cd5\u7528\u4e8e\u5728 render \u65b9\u6cd5\u6267\u884c\u5b8c\u6bd5\u4e4b\u524d\u6dfb\u52a0 JS \u4ee3\u7801 protected function script() { return <<<JS console.log('...') JS; }","title":"\u6dfb\u52a0JS\u4ee3\u7801 (script)"},{"location":"2.x/action/#html-sethtmlattribute","text":"\u8bbe\u7f6e\u76ee\u6807\u5143\u7d20\u7684 HTML \u6807\u7b7e\u5c5e\u6027 MyAction::make()->setHtmlAttribute('name', $value); // \u6279\u91cf\u8bbe\u7f6e MyAction::make()->setHtmlAttribute(['name' => $value]);","title":"\u8bbe\u7f6e\u76ee\u6807\u5143\u7d20\u7684HTML\u5c5e\u6027 (setHtmlAttribute)"},{"location":"2.x/assets/","text":"\u9759\u6001\u8d44\u6e90\u52a0\u8f7d Dcat Admin \u652f\u6301\u4e86 js \u811a\u672c\u6309\u9700\u52a0\u8f7d\u7684\u529f\u80fd\uff0c\u5f00\u53d1\u8005\u53ea\u9700\u5728\u63a7\u5236\u5668\u4e2d\u6216\u5176\u4ed6\u4efb\u610f\u4f4d\u7f6e\uff08\u5305\u62ec view \uff09\u4e2d\u5f15\u5165\u9700\u8981\u7528\u5230\u7684 js \u7ec4\u4ef6\u5373\u53ef\uff0c\u800c\u65e0\u9700\u5728\u9879\u76ee\u521d\u59cb\u5316\u65f6\u5f15\u5165\u6240\u6709\u7684 js \u7ec4\u4ef6\u3002 \u66f4\u6539\u9759\u6001\u8d44\u6e90\u57df\u540d \u6253\u5f00\u914d\u7f6e\u6587\u4ef6 config/admin.php \uff0c\u627e\u5230 assets_server \u53c2\u6570\u8fdb\u884c\u66f4\u6539\u5373\u53ef\uff1b\u4e5f\u53ef\u4ee5\u5728 .env \u4e2d\u52a0\u4e0a ADMIN_ASSETS_SERVER=http://xxx.com \u6ce8\u518c\u8def\u5f84\u522b\u540d \u6253\u5f00 app/Admin/bootstrap.php \uff0c\u7136\u540e\u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801 Admin::asset()->alias('@my-name1', 'assets/admin1'); Admin::asset()->alias('@my-name2', 'assets/admin2'); // \u4e5f\u53ef\u4ee5\u6279\u91cf\u6ce8\u518c Admin::asset()->alias([ '@my-name1' => 'assets/admin1', '@my-name2' => 'assets/admin2', ]); \u4f7f\u7528\u522b\u540d Admin::js('@my-name1/index.js'); Admin::css('@my-name1/index.css'); \u6ce8\u518c\u7ec4\u4ef6 \u5f53\u67d0\u4e2a\u7ec4\u4ef6\u7684 js \u548c css \u6587\u4ef6\u6bd4\u8f83\u591a\u7684\u8bdd\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u4e9b\u9759\u6001\u8d44\u6e90\u6587\u4ef6\u7edf\u4e00\u6ce8\u518c\u6210\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u8fd9\u6837\u4f7f\u7528\u7684\u65f6\u5019\u4f1a\u66f4\u65b9\u4fbf\u3002\u6253\u5f00 app/Admin/bootstrap.php \uff0c\u7136\u540e\u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801 Admin::asset()->alias('@editor-md', [ 'js' => [ // \u652f\u6301\u4f7f\u7528\u8def\u5f84\u522b\u540d '@admin/dcat/plugins/editor-md/lib/raphael.min.js', '@admin/dcat/plugins/editor-md/lib/marked.min.js', '@admin/dcat/plugins/editor-md/lib/prettify.min.js', '@admin/dcat/plugins/editor-md/lib/jquery.flowchart.min.js', '@admin/dcat/plugins/editor-md/editormd.min.js', ], 'css' => [ '@admin/dcat/plugins/editor-md/css/editormd.preview.min.css', '@admin/dcat/extra/markdown.css', ], ]); \u4f7f\u7528 Admin::requireAssets(['@editor-md']); \u5982\u679c\u4f60\u53ea\u9700\u8981\u52a0\u8f7d\u8fd9\u4e2a\u7ec4\u4ef6\u7684 js \u6216 css \uff0c\u5e76\u4e0d\u60f3\u52a0\u8f7d\u6240\u6709\u6587\u4ef6\uff0c\u90a3\u4e48\u53ef\u4ee5\u7528\u4ee5\u4e0b\u65b9\u6cd5 // \u53ea\u52a0\u8f7djs\u6587\u4ef6 Admin::js('@editor-md'); // \u53ea\u52a0\u8f7dcss\u6587\u4ef6 Admin::css('@editor-md'); \u4f7f\u7528\u52a8\u6001\u53c2\u6570 use Dcat\\Admin\\Admin; // \u6ce8\u518c\u524d\u7aef\u7ec4\u4ef6\u522b\u540d // {lang} \u4e3a\u52a8\u6001\u53c2\u6570 Admin::asset()->alias('@test', [ 'js' => ['/vendor/test/js/{lang}.min.js'], ]); // {lang} \u4f1a\u88ab\u66ff\u6362\u4e3a zh_CN Admin::requireAssets('@test', ['lang' => 'zh_CN']); // \u4e5f\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528 Admin::requireAssets('@test?lang=zh_CN'); \u52a0\u8f7djs\u811a\u672c Admin::js \u65b9\u6cd5\u53ef\u4ee5\u5f15\u5165 js \u811a\u672c\uff0c\u4f7f\u7528\u5982\u4e0b\uff1a class UserController extend Controller { public function index() { Admin::js('/assets/js/index.js'); Admin::js([ '/assets/js/index2.js' ]); } } \u52a0\u8f7dcss\u811a\u672c Admin::css \u65b9\u6cd5\u53ef\u4ee5\u5f15\u5165 css \u811a\u672c\uff0c\u4f7f\u7528\u5982\u4e0b\uff1a class UserController extend Controller { public function index() { Admin::css('/assets/css/index.css'); Admin::css([ '/assets/css/index2.css' ]); } } \u52a8\u6001\u6dfb\u52a0js\u4ee3\u7801 Admin::script \u65b9\u6cd5\u53ef\u4ee5\u52a8\u6001\u6dfb\u52a0 js \u4ee3\u7801\uff0c\u4f7f\u7528\u5982\u4e0b\uff1a public function index() { Admin::script( <<<JS console.log('Hello world!'); JS ); } \u52a8\u6001\u6dfb\u52a0css\u4ee3\u7801 Admin::style \u65b9\u6cd5\u53ef\u4ee5\u52a8\u6001\u6dfb\u52a0 css \u4ee3\u7801\uff0c\u4f7f\u7528\u5982\u4e0b\uff1a public function index() { Admin::style( <<<CSS body { color: #333; } CSS ); } \u5728\u6a21\u677f\u4e2d\u5f15\u5165\u9759\u6001\u8d44\u6e90 \u5728\u6a21\u677f\u4e2d\u624b\u52a8\u5f15\u5165\u9759\u6001\u8d44\u6e90\u9700\u8981\u4f7f\u7528 admin_asset \u51fd\u6570\uff1a // \u5f15\u5165css <link rel=\"stylesheet\" href=\"{{ admin_asset(\"vendor/dcat-admin/dcat-admin/main.min.css\") }}\"> // \u5f15\u5165js <script src=\"{{ admin_asset('vendor/dcat-admin/dcat-admin/main.min.js')}}\"></script> \u5728\u6a21\u677f\u4e2d\u6dfb\u52a0js\u4ee3\u7801 \u8981\u5728\u6a21\u677f\u4e2d\u6dfb\u52a0\u7684 js \u4ee3\u7801\u9700\u8981\u653e\u5728 Dcat.ready \u65b9\u6cd5\u5185\u6267\u884c\uff0c\u8fd9\u6837\u624d\u80fd\u4fdd\u8bc1\u4f60\u7684 js \u4ee3\u7801\u5728\u6240\u6709 js \u811a\u672c\u52a0\u8f7d\u5b8c\u6210\u4e4b\u540e\u6267\u884c\u3002 <script> Dcat.ready(function () { console.log('\u6240\u6709js\u90fd\u52a0\u8f7d\u5b8c\u6210\u4e86'); }); </script>","title":"\u9759\u6001\u8d44\u6e90\u52a0\u8f7d"},{"location":"2.x/assets/#_1","text":"Dcat Admin \u652f\u6301\u4e86 js \u811a\u672c\u6309\u9700\u52a0\u8f7d\u7684\u529f\u80fd\uff0c\u5f00\u53d1\u8005\u53ea\u9700\u5728\u63a7\u5236\u5668\u4e2d\u6216\u5176\u4ed6\u4efb\u610f\u4f4d\u7f6e\uff08\u5305\u62ec view \uff09\u4e2d\u5f15\u5165\u9700\u8981\u7528\u5230\u7684 js \u7ec4\u4ef6\u5373\u53ef\uff0c\u800c\u65e0\u9700\u5728\u9879\u76ee\u521d\u59cb\u5316\u65f6\u5f15\u5165\u6240\u6709\u7684 js \u7ec4\u4ef6\u3002","title":"\u9759\u6001\u8d44\u6e90\u52a0\u8f7d"},{"location":"2.x/assets/#_2","text":"\u6253\u5f00\u914d\u7f6e\u6587\u4ef6 config/admin.php \uff0c\u627e\u5230 assets_server \u53c2\u6570\u8fdb\u884c\u66f4\u6539\u5373\u53ef\uff1b\u4e5f\u53ef\u4ee5\u5728 .env \u4e2d\u52a0\u4e0a ADMIN_ASSETS_SERVER=http://xxx.com","title":"\u66f4\u6539\u9759\u6001\u8d44\u6e90\u57df\u540d"},{"location":"2.x/assets/#_3","text":"\u6253\u5f00 app/Admin/bootstrap.php \uff0c\u7136\u540e\u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801 Admin::asset()->alias('@my-name1', 'assets/admin1'); Admin::asset()->alias('@my-name2', 'assets/admin2'); // \u4e5f\u53ef\u4ee5\u6279\u91cf\u6ce8\u518c Admin::asset()->alias([ '@my-name1' => 'assets/admin1', '@my-name2' => 'assets/admin2', ]); \u4f7f\u7528\u522b\u540d Admin::js('@my-name1/index.js'); Admin::css('@my-name1/index.css');","title":"\u6ce8\u518c\u8def\u5f84\u522b\u540d"},{"location":"2.x/assets/#_4","text":"\u5f53\u67d0\u4e2a\u7ec4\u4ef6\u7684 js \u548c css \u6587\u4ef6\u6bd4\u8f83\u591a\u7684\u8bdd\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u4e9b\u9759\u6001\u8d44\u6e90\u6587\u4ef6\u7edf\u4e00\u6ce8\u518c\u6210\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u8fd9\u6837\u4f7f\u7528\u7684\u65f6\u5019\u4f1a\u66f4\u65b9\u4fbf\u3002\u6253\u5f00 app/Admin/bootstrap.php \uff0c\u7136\u540e\u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801 Admin::asset()->alias('@editor-md', [ 'js' => [ // \u652f\u6301\u4f7f\u7528\u8def\u5f84\u522b\u540d '@admin/dcat/plugins/editor-md/lib/raphael.min.js', '@admin/dcat/plugins/editor-md/lib/marked.min.js', '@admin/dcat/plugins/editor-md/lib/prettify.min.js', '@admin/dcat/plugins/editor-md/lib/jquery.flowchart.min.js', '@admin/dcat/plugins/editor-md/editormd.min.js', ], 'css' => [ '@admin/dcat/plugins/editor-md/css/editormd.preview.min.css', '@admin/dcat/extra/markdown.css', ], ]); \u4f7f\u7528 Admin::requireAssets(['@editor-md']); \u5982\u679c\u4f60\u53ea\u9700\u8981\u52a0\u8f7d\u8fd9\u4e2a\u7ec4\u4ef6\u7684 js \u6216 css \uff0c\u5e76\u4e0d\u60f3\u52a0\u8f7d\u6240\u6709\u6587\u4ef6\uff0c\u90a3\u4e48\u53ef\u4ee5\u7528\u4ee5\u4e0b\u65b9\u6cd5 // \u53ea\u52a0\u8f7djs\u6587\u4ef6 Admin::js('@editor-md'); // \u53ea\u52a0\u8f7dcss\u6587\u4ef6 Admin::css('@editor-md'); \u4f7f\u7528\u52a8\u6001\u53c2\u6570 use Dcat\\Admin\\Admin; // \u6ce8\u518c\u524d\u7aef\u7ec4\u4ef6\u522b\u540d // {lang} \u4e3a\u52a8\u6001\u53c2\u6570 Admin::asset()->alias('@test', [ 'js' => ['/vendor/test/js/{lang}.min.js'], ]); // {lang} \u4f1a\u88ab\u66ff\u6362\u4e3a zh_CN Admin::requireAssets('@test', ['lang' => 'zh_CN']); // \u4e5f\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528 Admin::requireAssets('@test?lang=zh_CN');","title":"\u6ce8\u518c\u7ec4\u4ef6"},{"location":"2.x/assets/#js","text":"Admin::js \u65b9\u6cd5\u53ef\u4ee5\u5f15\u5165 js \u811a\u672c\uff0c\u4f7f\u7528\u5982\u4e0b\uff1a class UserController extend Controller { public function index() { Admin::js('/assets/js/index.js'); Admin::js([ '/assets/js/index2.js' ]); } }","title":"\u52a0\u8f7djs\u811a\u672c"},{"location":"2.x/assets/#css","text":"Admin::css \u65b9\u6cd5\u53ef\u4ee5\u5f15\u5165 css \u811a\u672c\uff0c\u4f7f\u7528\u5982\u4e0b\uff1a class UserController extend Controller { public function index() { Admin::css('/assets/css/index.css'); Admin::css([ '/assets/css/index2.css' ]); } }","title":"\u52a0\u8f7dcss\u811a\u672c"},{"location":"2.x/assets/#js_1","text":"Admin::script \u65b9\u6cd5\u53ef\u4ee5\u52a8\u6001\u6dfb\u52a0 js \u4ee3\u7801\uff0c\u4f7f\u7528\u5982\u4e0b\uff1a public function index() { Admin::script( <<<JS console.log('Hello world!'); JS ); }","title":"\u52a8\u6001\u6dfb\u52a0js\u4ee3\u7801"},{"location":"2.x/assets/#css_1","text":"Admin::style \u65b9\u6cd5\u53ef\u4ee5\u52a8\u6001\u6dfb\u52a0 css \u4ee3\u7801\uff0c\u4f7f\u7528\u5982\u4e0b\uff1a public function index() { Admin::style( <<<CSS body { color: #333; } CSS ); }","title":"\u52a8\u6001\u6dfb\u52a0css\u4ee3\u7801"},{"location":"2.x/assets/#_5","text":"\u5728\u6a21\u677f\u4e2d\u624b\u52a8\u5f15\u5165\u9759\u6001\u8d44\u6e90\u9700\u8981\u4f7f\u7528 admin_asset \u51fd\u6570\uff1a // \u5f15\u5165css <link rel=\"stylesheet\" href=\"{{ admin_asset(\"vendor/dcat-admin/dcat-admin/main.min.css\") }}\"> // \u5f15\u5165js <script src=\"{{ admin_asset('vendor/dcat-admin/dcat-admin/main.min.js')}}\"></script>","title":"\u5728\u6a21\u677f\u4e2d\u5f15\u5165\u9759\u6001\u8d44\u6e90"},{"location":"2.x/assets/#js_2","text":"\u8981\u5728\u6a21\u677f\u4e2d\u6dfb\u52a0\u7684 js \u4ee3\u7801\u9700\u8981\u653e\u5728 Dcat.ready \u65b9\u6cd5\u5185\u6267\u884c\uff0c\u8fd9\u6837\u624d\u80fd\u4fdd\u8bc1\u4f60\u7684 js \u4ee3\u7801\u5728\u6240\u6709 js \u811a\u672c\u52a0\u8f7d\u5b8c\u6210\u4e4b\u540e\u6267\u884c\u3002 <script> Dcat.ready(function () { console.log('\u6240\u6709js\u90fd\u52a0\u8f7d\u5b8c\u6210\u4e86'); }); </script>","title":"\u5728\u6a21\u677f\u4e2d\u6dfb\u52a0js\u4ee3\u7801"},{"location":"2.x/beta-change-log/","text":"BETA\u7248\u672c\u66f4\u65b0\u65e5\u5fd7 v2.2.2-beta \u53d1\u5e03\u65f6\u95f4 2022/6/27 \u5347\u7ea7\u7248\u672c \u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u6700\u540e\u6e05\u9664 \u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.2.2-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php BUG \u4fee\u590d \u4fee\u590d Grid \u8868\u683c\u5f53\u5b57\u6bb5\u503c\u4e3a 0 \u65f6\u65e0\u6cd5\u663e\u793a\u95ee\u9898 v2.2.1-beta \u53d1\u5e03\u65f6\u95f4 2022/6/26 \u5347\u7ea7\u7248\u672c \u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u6700\u540e\u6e05\u9664 \u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.2.1-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php \u65b0\u589e\u529f\u80fd 1. \u65e5\u591c\u6a21\u5f0f\u5207\u6362\u652f\u6301\u591a\u5f00\u573a\u666f ( #1672 by @ReedSun ) 2. \u8868\u5355\u589e\u52a0 override \u65b9\u6cd5\u5b9e\u73b0\u6587\u4ef6\u8986\u76d6 ( #1706 by @laradocs ) $form->file('file')->override(); $form->image('img')->override(); 3. \u652f\u6301\u5d4c\u5957\u8d44\u6e90\u578b\u63a7\u5236\u5668 ( #1725 by @lddtime ) 4. \u652f\u6301\u5728array/hasMany\u8868\u5355\u4e2d\u4f7f\u7528when\u63a7\u5236\u8868\u5355\u663e\u793a\u529f\u80fd ( #1776 by @rainhon ) $form->array($column, function ($form) { $form->radio('radio') ->when([1, 4], function (Form $form) { $form->text('text1'); $form->text('text2'); $form->text('text3'); }) ->when(2, function (Form $form) { $form->editor('editor'); }) ->when(3, function (Form $form) { $form->image('image'); }) ->options([...]) ->default(1); }); 5. \u9875\u9762\u7ec4\u4ef6 tab \u5237\u65b0\u540e\u53ef\u9009\u4e2d\u5bf9\u5e94\u9009\u9879 ( #1689 by @iljalukin ) use Dcat\\Admin\\Widgets\\Tab; $tab = new Tab(); $tab->add('tab1', ..., 'id1'); $tab->add('tab2', ..., 'id2'); 6. \u9875\u9762\u7ec4\u4ef6 table \u6ca1\u6709\u6570\u636e\u65f6\u663e\u793a No data. ( #1678 by @shacky ) BUG \u4fee\u590d \u4fee\u590d laravel9 \u4e2d\u4ee3\u7801\u751f\u6210\u5668\u62a5\u9519\u95ee\u9898 \u4fee\u590d Laravel9 \u53d1\u5e03\u8bed\u8a00\u6587\u4ef6\u8def\u5f84\u9519\u8bef ( #1688 by @laradocs ) \u4fee\u590d tab \u9009\u9879\u5361\u91cd\u590d\u52a0\u8f7d\u540e\u4e0d\u9009\u4e2d\u9519\u8bef ( #1689 by @iljalukin ) \u4fee\u590d\u4ee3\u7801\u751f\u6210\u5668\u63d0\u4ea4\u5931\u8d25\u4fdd\u5b58\u72b6\u6001 ( #1690 @by laradocs ) \u4fee\u590d HasMany \u8868\u5355\u4e2d\u4f7f\u7528 map \u5b57\u6bb5\u9519\u8bef\u95ee\u9898 ( #1701 by @mojiajuzi ) \u4fee\u590d\u4ee3\u7801\u751f\u6210\u5668\u751f\u6210 Laravel9 \u8bed\u8a00\u6587\u4ef6\u8def\u5f84\u9519\u8bef ( #1711 by @laradocs ) \u4fee\u590d\u4e0a\u4f20\u6587\u4ef6 options \u88ab\u8986\u76d6\u9519\u8bef ( #1747 by @laradocs ) \u4fee\u590d Grid \u4e2d editable \u65b9\u6cd5\u89e6\u53d1 xss \u9519\u8bef ( #1755 by @laradocs ) \u4fee\u590d Form \u4e2d number \u8c03\u7528 disable \u65b9\u6cd5\u5bf9\u81ea\u589e\u51cf\u6309\u94ae\u5931\u6548 ( #1771 @by @laradocs ) \u4fee\u590d Form \u4e2d\u4f7f\u7528 layout \u5e03\u5c40\u540e HasMany \u5b57\u6bb5\u5220\u9664\u5b50\u5b57\u6bb5\u540e\u9a8c\u8bc1\u89c4\u5219\u4f9d\u7136\u751f\u6548\u95ee\u9898( #1781 @by laradocs ) \u4fee\u590d PHP8.1 \u4e2d\u89e6\u53d1 ltrim \u548c htmlentities \u65b9\u6cd5\u5f02\u5e38 ( #1783 by @laradocs ) \u4fee\u590d Grid \u4f7f\u7528 $grid->column('xxx.xxx') \u65e0\u6cd5\u5bfc\u51fa\u5173\u8054\u6a21\u578b\u5b57\u6bb5\u503c\u95ee\u9898 ( #1740 by @xyzzxy123 ) \u4fee\u590d\u9879\u76ee\u8def\u5f84\u4e2d\u542b\u6709 Admin \u9020\u6210\u4ee3\u7801\u751f\u6210\u5668\u65e0\u6cd5\u6b63\u5e38\u89e3\u6790\u547d\u540d\u7a7a\u95f4\u7684\u95ee\u9898 ( #1778 by @GMD170629 ) \u4fee\u590d embeds \u5b57\u6bb5\u65e0\u6cd5\u4e0a\u4f20\u6587\u4ef6\u95ee\u9898 ( #1770 by @pianzhou2021 ) v2.2.0-beta \u53d1\u5e03\u65f6\u95f4 2022/2/20 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u6700\u540e\u6e05\u9664 \u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.2.0-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php \u65b0\u589e\u529f\u80fd 1.\u589e\u52a0\u5bf9Laravel9.x\u7248\u672c\u7684\u652f\u6301 2.\u652f\u6301\u5728 hasMany \u4ee5\u53ca array \u8868\u5355\u4e2d\u4f7f\u7528 table \u8868\u5355 \u7528\u6cd5\u5982\u4e0b $form->array($field, function ($form) { $form->table('table_json', function ($form) { $form->text('title'); ... }); }); 3.\u6570\u636e\u8868\u683c\u8fc7\u6ee4\u5668\u589e\u52a0findInSet\u65b9\u6cd5 #1639 @guanguans sql: ... WHERE FIND_IN_SET(\"$input\", $column) \uff0c\u793a\u4f8b $grid->filter(function ($filter) { $filter->findInSet($field); }); 4.\u8c03\u6574\u4ee3\u7801\u751f\u6210\u5668\u9009\u62e9\u9ed8\u8ba4\u76ee\u5f55\u903b\u8f91 #1627 @Edwin \u65b0\u7248\u672c\u5c06\u4f1a\u6839\u636e\u914d\u7f6e\u53c2\u6570 admin.directory \u8bbe\u7f6e\u7684\u76ee\u5f55\u4f5c\u4e3a\u9ed8\u8ba4\u76ee\u5f55\uff0c\u9ed8\u8ba4\u4e3a Admin \u3002 BUG\u4fee\u590d \u4fee\u590d table \u8868\u5355\u4e0d\u652f\u6301 help \u65b9\u6cd5\u95ee\u9898 #1616 @jcbt \u4fee\u590d\u542f\u7528\u591a\u5e94\u7528\u540e\u6ce8\u518c\u6269\u5c55\u8def\u7531\u4f1a\u5bfc\u81f4\u9ed8\u8ba4\u5e94\u7528\u9996\u9875\u65e0\u6cd5\u8bbf\u95ee\u95ee\u9898 \u4fee\u590d\u65e0\u6cd5\u9690\u85cf\u5f39\u7a97\u8868\u5355\u91cd\u7f6e\u6309\u94ae\u95ee\u9898 #1631 @Sparkinzy \u4fee\u590d autocomplete \u5f53\u5b57\u6bb5\u503c\u4e3a\u6570\u5b57\u65f6js\u7ec4\u4ef6\u62a5\u9519\u95ee\u9898 #1661 @Sparkinzy \u4fee\u590d\u8bbe\u7f6e\u8def\u7531\u524d\u7f00\u4e3a\"/\"\u65f6\u6743\u9650\u7ba1\u7406\u8868\u5355\u65e0\u6cd5\u8bfb\u53d6\u8def\u7531\u4fe1\u606f\u95ee\u9898 v2.1.7-beta \u53d1\u5e03\u65f6\u95f4 2021/12/25 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u6700\u540e\u6e05\u9664 \u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.1.7-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php \u65b0\u589e\u529f\u80fd 1.\u589e\u52a0 admin_redirect \u51fd\u6570 \u8df3\u8f6c\u5230\u6307\u5b9a url \uff0c\u6b64\u51fd\u6570\u53ef\u7528\u4e8e\u4ee3\u66ff redirect \u51fd\u6570\uff0c\u652f\u6301 pjax \u4ee5\u53ca ajax \u8bf7\u6c42 // \u4e0d\u9700\u8981\u6dfb\u52a0admin\u524d\u7f00 return admin_redirect('auth/users'); // \u5982\u679c\u60f3\u8981\u8df3\u8f6c\u5230\u975eadmin\u524d\u7f00\u7684\u94fe\u63a5\uff0c\u9700\u8981\u4f20\u9012\u5b8c\u6574url\u94fe\u63a5 return admin_redirect(url('users')); BUG\u4fee\u590d \u4fee\u590d\u4f7f\u7528\u6587\u4ef6(file)\u4e0a\u4f20\u8868\u5355\u5220\u9664\u6587\u4ef6\u65f6\u4f1a\u62a5 destroyThumbnail \u95ee\u9898 \u4fee\u590d\u5f53 hasMany / array / table \u8868\u5355\u5b57\u6bb5\u540d\u4e0e\u5b50\u8868\u5355\u5b57\u6bb5\u540d\u4e00\u6837\u65f6\u65e0\u6cd5\u5220\u9664\u884c\u6570\u636e\u95ee\u9898 v2.1.6-beta \u53d1\u5e03\u65f6\u95f4 2021/12/12 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u6700\u540e\u6e05\u9664 \u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.1.6-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php \u65b0\u589e\u529f\u80fd 1.\u589e\u52a0 Form::autocomplete() \u8868\u5355 #1514 @Edwin \u6b64\u8868\u5355\u53ef\u4ee5\u5728\u586b\u5199\u8868\u5355\u65f6\u8fdb\u884c\u5bf9\u8868\u5355\u503c\u8fdb\u884c\u641c\u7d22\uff0c\u5e76\u628a\u7ed3\u679c\u5c55\u793a\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\uff0c\u7528\u6cd5\u5982\u4e0b $form->autocomplete($column[, $label])->options(['foo', 'bar', ...]); \u6548\u679c\u5982\u4e0b \u4e5f\u53ef\u4ee5\u4ece\u8fdc\u7a0bAPI\u4e2d\u83b7\u53d6\u6570\u636e // ajax \u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a ajax url, \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a valueField\uff08\u53ef\u9009\uff09, \u7b2c\u4e09\u4e2a\u53c2\u6570\u4e3a groupField\uff08\u53ef\u9009\uff09 $form->autocomplete($column[, $label])->ajax('/countries', 'name', 'region'); \u8fdc\u7a0bAPI \u670d\u52a1\u7aef\u7684\u8bf7\u6c42\u53c2\u6570\u4e3aquery\uff0c\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a class CountryController extends AdminController { public function search() { $countries = Country::when(request('query'), function ($query, $value) { $query->where('name', 'like', \"%{$value}%\"); })->get(); return Admin::json($countries->toArray()); } } \u66f4\u591a\u7528\u6cd5\u53c2\u8003\u6587\u6863 \u6570\u636e\u8868\u5355 - \u5b57\u6bb5\u4f7f\u7528 - autocomplete 2.\u56fe\u7247/\u6587\u4ef6\u4e0a\u4f20\u652f\u6301 arttribute \u65b9\u6cd5 #1510 @iwzh \u901a\u8fc7 attribute \u65b9\u6cd5\u53ef\u4ee5\u7ed9\u6587\u4ef6\u4e0a\u4f20\u7684\u9690\u85cf\u57df\u8868\u5355\u8bbe\u7f6e\u5c5e\u6027\uff0c\u7528\u6cd5\u5982\u4e0b $form->file($column)->attribute(['foo' => 'bar', ...]); 3.\u6570\u636e\u8868\u683c\u589e\u52a0 between \u8868\u5934\u8fc7\u6ee4\u5668 #1510 @iwzh \u7528\u6cd5\u5982\u4e0b $grid->column('created_at')->filter( Grid\\Column\\Filter\\Between::make()->datetime() ); 4.\u6a21\u578b\u6811\u589e\u52a0 depthColumn \u7528\u4e8e\u4fdd\u5b58\u5f53\u524d\u5c42\u7ea7 #1549 @weiwait \u7528\u6cd5\u5982\u4e0b class Category extends Model { use ModelTree; // \u5b9a\u4e49depthColumn\u5c5e\u6027\u540e\uff0c\u5c06\u4f1a\u5728\u6570\u636e\u8868\u4fdd\u5b58\u5f53\u524d\u884c\u7684\u5c42\u7ea7 protected $depthColumn = 'depth'; } 5.\u8868\u5355 Row \u5e03\u5c40\u53ef\u72ec\u7acb\u8bbe\u7f6e\u5bbd\u5ea6 #1530 @iwzh \u7528\u6cd5\u5982\u4e0b $form->row(function ($row) { // \u7ed9\u6240\u6709\u5b57\u6bb5\u8bbe\u7f6e\u9ed8\u8ba4\u5bbd\u5ea6 $row->defaultWidth(3); // \u6bcf\u4e2a\u5b57\u6bb5\u72ec\u7acb\u8bbe\u7f6e\u5bbd\u5ea6 $row->width(4)->text(...); }); \u529f\u80fd\u6539\u8fdb 1.\u8c03\u6574\u6570\u636e\u8868\u683c\u5bfc\u51fa\u6570\u636e\u65f6rows\u65b9\u6cd5\u56de\u8c03\u51fd\u6570\u63a5\u53d7\u7684\u53c2\u6570\u7c7b\u578b\u4e3aCollection #1584 @jourdon \u7528\u6cd5\u5982\u4e0b use Illuminate\\Support\\Collection; $grid->export()->rows(function (Collection $rows) { foreach ($rows as $index => &$row) { // $row \u7684\u683c\u5f0f\u4e3a\u6a21\u578b dd($row); } return $rows; }); BUG\u4fee\u590d \u4fee\u590d\u4f7f\u7528OSS\u4e0a\u4f20\u56fe\u7247\u7f29\u7565\u56fe\u62a5\u9519\u95ee\u9898 #1499 @jorry2008 \u4fee\u590d\u6570\u636e\u8868\u683c\u7b5b\u9009\u9ed8\u8ba4\u9879\u4e0d\u80fd\u8bbe\u7f6e\u4e3a 0 \u95ee\u9898 #1506 @liushoukun \u4fee\u590d\u4e00\u5bf9\u4e00\u5173\u8054\u5173\u7cfb\u8868\u5355\u9a8c\u8bc1\u89c4\u5219\u5f02\u5e38\u95ee\u9898 #1516 \u4fee\u590d\u8868\u5355\u6587\u4ef6\u4e0a\u4f20\u65f6\uff0c\u82e5\u5df2\u6dfb\u52a0\u8fc7\u6587\u4ef6\u5219\u65e0\u6cd5\u7ee7\u7eed\u62d6\u62fd\u4e0a\u4f20\u95ee\u9898 #1541 @hmilyfyj \u4fee\u590d\u5206\u9875\u5668\u5728 LazyRenderable \u4e0b\u5207\u6362\u65f6\u5bfc\u81f4\u6837\u5f0f\u4e22\u5931\u7684\u95ee\u9898 #1539 @jyiL \u4fee\u590d\u6570\u636e\u8868\u683c\u4f7f\u7528MongoDB\u65f6\u5206\u9875 perPage \u6570\u636e\u7c7b\u578b\u9519\u8bef\u95ee\u9898 #1555 @SmallRuralDog \u4fee\u590d\u9875\u9762\u4f7f\u7528 pjax \u6e32\u67d3\u540e pjax \u65e0\u6cd5\u518d\u6b21\u521d\u59cb\u5316 a \u6807\u7b7e\u95ee\u9898 #1576 @xyzzxy123 \u4fee\u590d\u6570\u636e\u8868\u683c Column::switch() \u65b9\u6cd5 refresh \u53c2\u6570\u65e0\u6548\u95ee\u9898 #1595 @wxfjamdc \u4fee\u590d\u591a\u56fe\u7247\u4e0a\u4f20\u4e0a\u4f20\u591a\u4e2a\u56fe\u7247\u4f1a\u5bfc\u81f4\u65e7\u56fe\u7247\u7f29\u7565\u56fe\u88ab\u5220\u9664\u95ee\u9898 #1556 v2.1.5-beta \u53d1\u5e03\u65f6\u95f4 2021/9/16 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u6700\u540e\u6e05\u9664 \u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.1.4-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php BUG\u4fee\u590d \u4fee\u590d\u7ba1\u7406\u5458\u5217\u8868\u70b9\u51fb\u67e5\u770b\u6743\u9650\u5f39\u7a97\u5c55\u793a\u4e3a\u7a7a\u95ee\u9898 \u4fee\u590d\u6570\u636e\u8868\u683c\u5173\u8054\u5173\u7cfb\u8868\u5b57\u6bb5 \u975eequal \u67e5\u8be2\u5747\u4e0d\u751f\u6548\u95ee\u9898 \u4fee\u590d\u6570\u636e\u8868\u683c column \u4f7f\u7528 if \u65b9\u6cd5\u540e\u65e0\u6cd5\u5728 displayer \u4e2d\u53d6\u5f97\u539f\u59cb\u5b57\u6bb5\u503c\u95ee\u9898 v2.1.3-beta \u53d1\u5e03\u65f6\u95f4 2021/9/14 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u6700\u540e\u6e05\u9664 \u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.1.3-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php \u529f\u80fd\u6539\u8fdb 1.\u91cd\u6784\u6570\u636e\u8868\u683c\u884c\u5185\u7f16\u8f91\u529f\u80fd \u5f53\u524d\u7248\u672c\u91cd\u6784\u4e86 editable \u3001 checkbox \u548c radio \u7b49\u4e09\u79cd\u884c\u5185\u7f16\u8f91\u8868\u5355\u7684 UI \u6837\u5f0f\uff0c\u6539\u4e3a\u5728\u5f39\u7a97\u4e2d\u5c55\u793a\u8868\u5355\u3002\u5e76\u4e14\u589e\u52a0\u4e86\u65b0\u7684\u884c\u5185\u7f16\u8f91\u8868\u5355 textarea \uff0c\u6548\u679c\u5982\u4e0b\uff1a 2.\u914d\u7f6e\u6587\u4ef6\u589e\u52a0 favicon \u53c2\u6570 \u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\u53ef\u4ee5\u5728 config/admin.php \u4e2d\u914d\u7f6e favicon \u94fe\u63a5\uff0c\u53c2\u6570\u540d\u4e3a favicon 3.\u6570\u636e\u8868\u5355\u63d0\u4ea4\u65f6\u652f\u6301\u5c55\u793a\u88ab\u629b\u51fa\u5f02\u5e38\u7684 message \u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\uff0c\u5047\u5982\u63d0\u4ea4\u8868\u5355\u65f6\u629b\u51fa\u5f02\u5e38\u5982\u4e0b $form->submitted(function ($form) { throw new \\Exception('\u7981\u6b62\u8bbf\u95ee'); }); \u90a3\u4e48\u5c06\u53ef\u4ee5\u5728\u9875\u9762\u4e2d\u770b\u5230\u5982\u4e0b\u63d0\u793a 5.\u4f18\u5316 array \u3001 table \u8868\u5355\u5728\u5de5\u5177\u8868\u5355\u4e2d\u7684\u4f7f\u7528 \u5728\u65e7\u7248\u672c Widgtet/Form \u4e2d\u5982\u679c\u4f7f\u7528\u4e86 array \u3001 table \u8868\u5355\uff0c\u5e76\u4e14\u5728 array \u3001 table \u8868\u5355\u4e2d\u4f7f\u7528\u4e86\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u65f6\uff0c\u9700\u8981\u81ea\u5b9a\u4e49\u6587\u4ef6\u4e0a\u4f20\u5730\u5740\u624d\u80fd\u6b63\u5e38\u4e0a\u4f20\uff0c\u6240\u4ee5\u6b64\u6b21\u7248\u672c\u5bf9\u8fd9\u4e2a\u529f\u80fd\u505a\u4e86\u4f18\u5316\uff0c\u66f4\u65b0\u7248\u672c\u4e4b\u540e\u5c06\u4e0d\u9700\u8981\u518d\u81ea\u5b9a\u4e49\u4e0a\u4f20\u5730\u5740 $this->array('...', function ($form) { // \u65e0\u9700\u81ea\u5b9a\u4e49\u4e0a\u4f20\u5730\u5740 $form->image('img'); }); 4.\u589e\u52a0\u6570\u636e\u8868\u5355 html \u5bf9 addElementClass \u65b9\u6cd5\u7684\u652f\u6301 \u5728\u65e7\u7248\u672c\u4e2d\uff0c addElementClass \u8bbe\u7f6e\u7684 class \u65e0\u6cd5\u5bf9 html \u65b9\u6cd5\u751f\u6548\uff0c\u6240\u4ee5\u65b0\u7248\u4e2d\u5bf9\u6b64\u505a\u4e86\u6539\u8fdb $form->html(...)->addElementClass(['class1', ...]); 5.\u6570\u636e\u8868\u5355\u56fe\u7247\u4e0a\u4f20\u8868\u5355\u8bbf\u95ee\u7f29\u7565\u56fe\u65f6\u4e0d\u68c0\u67e5\u56fe\u7247\u662f\u5426\u5b58\u5728 @zhaiyuxin103 BUG\u4fee\u590d \u4fee\u590d\u6570\u636e\u8868\u5355\u4f7f\u7528\u95ed\u5305\u9a8c\u8bc1\u89c4\u5219\u65f6\u65e0\u6cd5\u6b63\u786e\u5408\u5e76\u95ee\u9898 #1429 @Edwin \u4fee\u590d\u6587\u4ef6\u4e0a\u4f20\u542f\u7528 sequenceName \u65b9\u6cd5\u540e\u751f\u6210\u7684\u6587\u4ef6\u540d\u5e26\u6709\u91cd\u590d\u540e\u7f00\u95ee\u9898 \u4fee\u590d\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u4e0a\u4f20\u4e00\u5bf9\u4e00\u5b57\u6bb5\u8bbe\u7f6e required \u9a8c\u8bc1\u89c4\u5219\u540e\u65e0\u6cd5\u4e0a\u4f20\u6587\u4ef6\u95ee\u9898 \u4fee\u590d\u67d0\u4e9b\u64cd\u4f5c\u4e0b\u51fa\u73b0\u7a7a\u767d\u7b5b\u9009\u8fb9\u680f\u7684\u95ee\u9898 #1445 @Abbotton \u4fee\u590d selectTable \u3001 multipleSelectTable \u7b49\u5b57\u6bb5\u7684 model \u65b9\u6cd5\u6307\u5b9a\u7b2c\u4e8c\u4e2a\u53c2\u6570\u65e0\u6548\u95ee\u9898 #1460 @hhniao \u4fee\u590d\u65e0\u6cd5\u7ffb\u8bd1\u56fe\u7247\u4e0a\u4f20\u8868\u5355 dimensions \u9a8c\u8bc1\u5931\u8d25\u63d0\u793a\u6587\u6848\u95ee\u9898 \u4fee\u590d\u5f53\u5728 array \u3001 table \u4ee5\u53ca hasMany \u8868\u5355\u4e2d\u4f7f\u7528\u56fe\u7247\u4e0a\u4f20\u8868\u5355\uff0c\u5e76\u4e14\u8bbe\u7f6e dimensions \u9a8c\u8bc1\u89c4\u5219\u540e\u65e0\u6cd5\u63d0\u4ea4\u95ee\u9898 \u4fee\u590d\u591a\u56fe\u4e0a\u4f20\u53ea\u80fd\u9884\u89c8\u7b2c\u4e00\u4e2a\u56fe\u7247\u95ee\u9898 \u4fee\u590d\u8868\u5355\u52a8\u6001\u5c55\u793a\u5982\u679c\u5b57\u6bb5\u503c\u5e26\u5c0f\u6570\u70b9\u65f6\u4e0d\u751f\u6548\u95ee\u9898 v2.1.2-beta \u53d1\u5e03\u65f6\u95f4 2021/7/12 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.1.2-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php \u529f\u80fd\u6539\u8fdb 1.\u589e\u52a0 Grid\\Model::apply() \u65b9\u6cd5 \u6b64\u65b9\u6cd5\u53ef\u4ee5\u5e94\u7528\u6570\u636e\u8868\u683c\u7684\u5feb\u6377\u641c\u7d22\u548c\u7b5b\u9009\u8fc7\u6ee4\u7684\u67e5\u8be2\u6761\u4ef6\uff0c\u7528\u6cd5\u793a\u4f8b\u5982\u4e0b \u5728\u65e7\u7248\u672c\u4e2d\uff0c\u4f7f\u7528\u5feb\u6377\u641c\u7d22\u548c\u7b5b\u9009\u8fc7\u6ee4\u7684\u67e5\u8be2\u6761\u4ef6\u975e\u5e38\u7684\u9ebb\u70e6 $grid->header(function ($collection) use ($grid) { $query = Model::query(); // \u62ff\u5230\u8868\u683c\u7b5b\u9009 where \u6761\u4ef6\u6570\u7ec4\u8fdb\u884c\u904d\u5386 $grid->model()->getQueries()->unique()->each(function ($value) use (&$query) { if (in_array($value['method'], ['paginate', 'get', 'orderBy', 'orderByDesc'], true)) { return; } $query = call_user_func_array([$query, $value['method']], $value['arguments'] ?? []); }); // \u67e5\u51fa\u7edf\u8ba1\u6570\u636e $data = $query->get(); // \u81ea\u5b9a\u4e49\u7ec4\u4ef6 return new Card($data); }); \u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\u53ef\u4ee5\u4f7f\u7528 apply \u65b9\u6cd5\u7b80\u5316\u4e0a\u9762\u7684\u4ee3\u7801 $grid->header(function ($collection) use ($grid) { $query = Model::query(); // \u62ff\u5230\u8868\u683c\u7b5b\u9009 where \u6761\u4ef6\u6570\u7ec4\u8fdb\u884c\u904d\u5386 $grid->model()->apply($query); // \u67e5\u51fa\u7edf\u8ba1\u6570\u636e $data = $query->get(); // \u81ea\u5b9a\u4e49\u7ec4\u4ef6 return new Card($data); }); BUG\u4fee\u590d \u4fee\u590d\u6570\u636e\u8868\u683c\u65e0\u6cd5\u7981\u7528\u6279\u91cf\u5220\u9664\u6309\u94ae\u95ee\u9898 \u4fee\u590d\u9ad8\u5fb7\u5730\u56fe\u8868\u5355\u6709\u5750\u6807\u65f6\u6ca1\u6709\u7f29\u653e\u95ee\u9898 #1377 @gzxy-0102 \u4fee\u590d\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u4e0b\u8f7d\u6309\u94ae\u4e0d\u663e\u793a\u95ee\u9898 #1405 \u4fee\u590d\u6570\u636e\u8868\u683c\u4f7f\u7528\u4e86 simplePaginate \u540e\u6570\u636e\u7b5b\u9009\u53c2\u6570\u4e0d\u751f\u6548\u95ee\u9898 #1405 v2.1.1-beta \u53d1\u5e03\u65f6\u95f4 2021/7/12 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.1.1-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php \u65b0\u589e\u529f\u80fd 1.\u589e\u52a0\u6a21\u578b\u6811expand\u65b9\u6cd5\u63a7\u5236\u662f\u5426\u5c55\u5f00\u6240\u6709\u5b50\u8282\u70b9\u6570\u636e \u9ed8\u8ba4\u5c55\u5f00\u6240\u6709\u5b50\u8282\u70b9\u6570\u636e // \u5c55\u5f00\u5b50\u8282\u70b9\u6570\u636e $tree->expand(); // \u6536\u8d77\u6240\u6709\u5b50\u8282\u70b9\u6570\u636e $tree->expand(false); 2.\u589e\u52a0\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u4e0b\u8f7d\u529f\u80fd $form->file('...')->downloadable(); 3.\u589e\u52a0\u9ad8\u5fb7\u5730\u56fe\u8868\u5355 \u5728\u914d\u7f6e\u6587\u4ef6 config/admin.php \u4e2d\u8bbe\u7f6e #1331 @gaizhixin 'map' => [ 'provider' => 'amap', 'keys' => [ // \u914d\u7f6e\u9ad8\u5fb7\u5730\u56fe\u7684key 'amap' => 'key', ], ], 4.\u65b0\u589eaddElementClass\u65b9\u6cd5\u7528\u4e8e\u7ed9\u8868\u5355\u5b57\u6bb5\u8bbe\u7f6e\u81ea\u5b9a\u4e49class // \u5982\u679c\u4e0d\u5e0c\u671b\u6dfb\u52a0\u524d\u7f00\uff0c\u5219\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8bbe\u7f6e\u4e3afalse $form->text(...)->addElementClass(['class1', 'class2'], false); 5.\u589e\u52a0\u8868\u683c\u6279\u91cf\u64cd\u4f5c\u8bbe\u7f6e\u4e0b\u62c9\u83dc\u5355\u5206\u5272\u7ebf\u529f\u80fd \u652f\u6301\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f // \u65b9\u5f0f1 $grid->batchActions(function ($batch) { $batch->add(...); // \u663e\u793a\u5206\u5272\u7ebf $batch->divider(); ... }); // \u65b9\u5f0f2 use Dcat\\Admin\\Grid\\Tools\\ActionDivider; $grid->batchActions([ new Action1(), ... new ActionDivider(), ... ]); \u529f\u80fd\u6539\u8fdb 1.table\u8868\u5355\u652f\u6301\u81ea\u5b9a\u4e49view $this->table(...)->setView('...'); 2.\u4f18\u5316\u83dc\u5355\u6536\u7f29\u540e\u7684\u64cd\u4f5c\u4f53\u9a8c\u4ee5\u53caUI \u5f53\u83dc\u5355\u6536\u7f29\u540e\uff0c\u5149\u6807\u79fb\u52a8\u4e0a\u53bb\u540e\u81ea\u52a8\u5c55\u5f00\u5982\u679c\u70b9\u51fb\u4e86\u83dc\u5355\uff0c\u8df3\u8f6c\u540e\u4f1a\u81ea\u52a8\u6536\u7f29\u56de\u53bb\uff1b\u5e76\u4e14\u4fee\u590d\u4e86 mini-logo \u663e\u793a\u5f02\u5e38\u7684\u95ee\u9898 3.\u6570\u636e\u8868\u683c\u884c\u64cd\u4f5c\u5217\u5f53\u6ca1\u6709\u4efb\u4f55\u64cd\u4f5c\u6309\u94ae\u65f6\u4e0d\u518d\u663e\u793a\u7a7a\u7684\u4e0b\u62c9\u83dc\u5355 \u6570\u636e\u8868\u683c\u884c\u64cd\u4f5c\u5217\u5f53\u6ca1\u6709\u4efb\u4f55\u64cd\u4f5c\u6309\u94ae\u65f6\u4e0d\u518d\u663e\u793a\u7a7a\u7684\u4e0b\u62c9\u83dc\u5355 #1327 @jiangyuntao 4.\u4f18\u5316\u56fe\u7247\u4e0a\u4f20\u8868\u5355\u56fe\u7247\u7684\u663e\u793a\u6548\u679c #1366 @ShermanTsang BUG\u4fee\u590d \u4fee\u590d\u6811\u5f62\u8868\u683c( tree )\u5c55\u5f00\u5b50\u8282\u70b9\u65f6\u5982\u679c\u65e0\u6570\u636e Grid::__toString() \u4f1a\u62a5\u9519\u95ee\u9898 \u4fee\u590d\u542f\u7528\u6570\u636e\u8868\u683c\u5f02\u6b65\u6e32\u67d3\u529f\u80fd\u540e\u51cf\u5c11\u7b5b\u9009\u6761\u4ef6\u65e0\u6548\u95ee\u9898 \u4fee\u590d\u8868\u683c\u5f02\u6b65\u6e32\u67d3\u7b5b\u9009\u9879\u6570\u91cf\u663e\u793a\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u8bbe\u7f6e\u8868\u5355\u5b57\u6bb5 class \u4f1a\u8986\u76d6\u9ed8\u8ba4 class \u95ee\u9898 \u4fee\u590d\u5173\u95ed debug \u6a21\u5f0f\u540e\u8bbf\u95ee\u65e0\u6743\u9650\u9875\u9762\u4f1a\u663e\u793a\u5f02\u5e38\u62a5\u6587\u95ee\u9898 \u4fee\u590d\u914d\u7f6e\u6587\u4ef6\u81ea\u5b9a\u4e49\u6279\u91cf\u5220\u9664\u6309\u94ae\u540e Grid::disableBatchDelete \u5931\u6548\u95ee\u9898 \u4fee\u590d\u83dc\u5355\u7f29\u8fdb\u540e\u4e09\u7ea7\u83dc\u5355\u65e0\u6cd5\u9690\u85cf\u95ee\u9898 \u4fee\u590d\u5f53\u8bbe\u7f6e\u4e3a\u65e0\u8def\u7531\u524d\u7f00\u65f6\uff0c\u5185\u7f6e\u7684\u6743\u9650\u7cfb\u7edf\u70b9\u51fb \u65b0\u589e\u6743\u9650 \u62a5\u9519\u7684\u95ee\u9898 \u4fee\u590d\u5f53\u7981\u7528\u5185\u7f6e\u6743\u9650\u7cfb\u7edf\u65f6\u6ca1\u6709\u7981\u7528\u6389\u6743\u9650\u4e2d\u95f4\u4ef6\u65e0\u6548\u95ee\u9898 \u4fee\u590d select \u4ee5\u53ca selectTable \u7684 model \u4f20\u9012\u4e86\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u975e id \u65f6\u65e0\u6cd5\u663e\u793a\u7f16\u8f91\u6570\u636e\u7684\u95ee\u9898 \u4fee\u590d\u90e8\u5206\u8868\u5355\u8bbe\u7f6e\u5927\u5c0f\u6837\u5f0f\u672a\u751f\u6548\u7684\u95ee\u9898 #1361 @Abbotton \u4fee\u590d\u8868\u683c\u6392\u5e8f\u529f\u80fd\u65e0\u6cd5\u517c\u5bb9 Grid\\Model::latest \u4ee5\u53ca oldest \u65b9\u6cd5\u95ee\u9898 v2.1.0-beta \u53d1\u5e03\u65f6\u95f4 2021/5/23 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.1.0-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php \u65b0\u589e\u529f\u80fd 1.\u589e\u52a0\u8868\u683c\u5f02\u6b65\u6e32\u67d3\u529f\u80fd \u5f53\u9875\u9762\u7684\u8868\u683c\u5c55\u793a\u7684\u6570\u636e\u7279\u522b\u591a\uff08\u5217\u591a\u884c\u591a\uff09\uff0c\u5e76\u4e14\u52a0\u8f7d\u7684\u7ec4\u4ef6\u4e5f\u8f83\u591a\u65f6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u5361\u987f\u7684\u73b0\u8c61\uff0c\u6b64\u65f6\u53ef\u4ee5\u4f7f\u7528\u8868\u683c\u5f02\u6b65\u6e32\u67d3\u529f\u80fd\uff0c\u53ef\u4ee5\u6709\u6548\u5730\u51cf\u8f7b\u9875\u9762\u5361\u987f\u7684\u60c5\u51b5\uff1a // \u542f\u7528\u8868\u683c\u5f02\u6b65\u6e32\u67d3\u529f\u80fd $grid->async(); \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u9875\u9762\u6ca1\u6709\u51fa\u73b0\u660e\u663e\u7684\u5361\u987f\u73b0\u8c61\uff0c\u5219\u65e0\u9700\u542f\u7528\u6b64\u529f\u80fd\uff0c\u5e76\u4e14\u5982\u679c\u9875\u9762\u4e2d\u5b58\u5728\u591a\u4e2a\u6570\u636e\u8868\u683c\uff0c\u90a3\u4e48\u4e5f\u65e0\u6cd5\u4f7f\u7528\u6b64\u529f\u80fd\uff01\u8be6\u7ec6\u7528\u6cd5\u53c2\u8003 \u6570\u636e\u8868\u683c - \u5f02\u6b65\u6e32\u67d3 \u529f\u80fd\u6539\u8fdb 1.\u652f\u6301 Laravel Octane 1.x \u7248\u672c \u6b64\u6b21\u7248\u672c\u9002\u914d\u4e86 Laravel Octane 1.x \u7248\u672c\u7684\u76f8\u5173\u53d8\u52a8\uff0c\u5177\u4f53\u7528\u6cd5\u53c2\u8003 Laravel Octane \u3002 2.\u8c03\u7528 expand(false) \u53ef\u4ee5\u7981\u6b62\u81ea\u52a8\u5f39\u51fa\u8fc7\u6ee4\u5668\u4fa7\u680f // \u7981\u6b62\u81ea\u52a8\u5f39\u51fa\u8fc7\u6ee4\u5668\u4fa7\u8fb9\u680f $grid->filter(function ($filter) { $filter->expand(false); ... }); 3.\u5347\u7ea7 tinymce \u81f3 v5.8.0 \u7248\u672c @yiming0 4.\u6743\u9650\u4ee5\u53ca\u89d2\u8272\u9875\u9762\u7ed1\u5b9a\u83dc\u5355\u540e\u81ea\u52a8\u6e05\u9664\u83dc\u5355\u7f13\u5b58 BUG\u4fee\u590d \u4fee\u590d withConstraints \u65b9\u6cd5\u5bf9\u8be6\u60c5\u9875 url \u65e0\u6548\u95ee\u9898 #1232 \u4fee\u590d\u591a\u56fe/\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u5220\u9664\u56fe\u7247\u65f6\u8868\u5355\u503c\u4f1a\u8f6c\u5316\u6210\u5173\u8054\u6570\u7ec4\u95ee\u9898 \u4fee\u590d\u767e\u5ea6\u5730\u56fe\u7ec4\u4ef6\u5728\u542f\u7528 https \u540e\u65e0\u6cd5\u4f7f\u7528\u95ee\u9898 #1162 v2.0.24-beta \u53d1\u5e03\u65f6\u95f4 2021/4/30 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.24-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php \u65b0\u589e\u529f\u80fd 1.\u589e\u52a0\u521b\u5efa\u6216\u7f16\u8f91\u89d2\u8272\u4ee5\u53ca\u6743\u9650\u65f6\u53ef\u76f4\u63a5\u7ed1\u5b9a\u83dc\u5355\u529f\u80fd \u5728\u89d2\u8272\u548c\u6743\u9650\u7684\u521b\u5efa\u4ee5\u53ca\u7f16\u8f91\u9875\u9762\u53ef\u4ee5\u76f4\u63a5\u7ed1\u5b9a\u83dc\u5355\uff0c\u6b64\u529f\u80fd\u9ed8\u8ba4\u5f00\u542f\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u53c2\u6570 admin.menu.role_bind_menu \u4ee5\u53ca admin.menu.permission_bind_menu \u8fdb\u884c\u5173\u95ed\uff0c\u6548\u679c\u5982\u4e0b 2.\u65b0\u589e Form\\Tree::treeStatus() \u65b9\u6cd5\uff0c\u5141\u8bb8\u5355\u72ec\u9009\u62e9\u7236\u8282\u70b9 \u7528\u6cd5 $form->tree('xxx') ->treeState(false) # \u5141\u8bb8\u5355\u72ec\u9009\u62e9\u7236\u8282\u70b9 ->setTitleColumn('title') ->nodes(...); \u6548\u679c BUG\u4fee\u590d \u4fee\u590d\u591a\u5e94\u7528\u60c5\u51b5\u4e0b\u65e0\u6cd5\u4f7f\u7528\u57df\u540d\u533a\u5206\u5e94\u7528\u95ee\u9898 \u4fee\u590d Admin::pjax() \u65b9\u6cd5\u672a\u58f0\u660e\u4e3a static \u95ee\u9898 \u4fee\u590d grid filter checkbox \u53ea\u80fd\u9009\u4e2d\u591a\u4e2a\u9009\u9879\u540e\u53ea\u6709\u5355\u4e2a\u9009\u9879\u751f\u6548\u95ee\u9898 @outer199 \u4fee\u590d\u83dc\u5355\u9ed8\u8ba4\u56fe\u6807\u8bbe\u7f6e\u65e0\u6548\u95ee\u9898 \u4fee\u590d php7.4 \u6216\u4ee5\u4e0a\u7248\u672c\u4e2d\u4f7f\u7528 embeds \u8868\u5355\u65f6\u62a5\u9519\u95ee\u9898 #1204 \u4fee\u590d\u5206\u6b65\u8868\u5355\u4e0b\u4f7f\u7528 $form->list(...)->limit(...); \u53c2\u6570\u6821\u9a8c\u4e0d\u901a\u8fc7\u540e\u5237\u65b0\u9875\u9762\u62a5\u9519\u95ee\u9898 #1206 \u4fee\u590d\u7981\u7528 pjax \u540e\u7f16\u8f91\u548c\u521b\u5efa\u5b8c\u6210\u540e\u65e0\u6cd5\u8fdb\u884c\u8df3\u8f6c\u95ee\u9898 #1208 v2.0.23-beta \u53d1\u5e03\u65f6\u95f4 2021/4/18 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.23-beta\" php artisan admin:update \u65b0\u589e\u529f\u80fd 1.\u589e\u52a0\u5bf9 Laravel Octane \u7684\u652f\u6301 Laravel Octane \u662f\u4e00\u4e2a\u57fa\u4e8e Swoole/RoadRunner \u9a71\u52a8\u7684\u53ef\u4ee5\u63d0\u5347 Laravel \u6846\u67b6\u6027\u80fd\u7684\u9879\u76ee\uff0c\u5b89\u88c5\u540e\u53ef\u4ee5\u5927\u5e45\u63d0\u5347 Laravel \u9879\u76ee\u7684\u6027\u80fd\uff0c Dcat Admin \u4e5f\u517c\u5bb9\u4e86 Laravel Octane \u73af\u5883\uff0c\u53ea\u9700\u5728\u914d\u7f6e\u6587\u4ef6 config/octane.php \u4e2d\u52a0\u5165\u5982\u4e0b\u914d\u7f6e\u5373\u53ef\uff1a 'listeners' => [ ..., RequestReceived::class => [ ...Octane::prepareApplicationForNextOperation(), ...Octane::prepareApplicationForNextRequest(), // \u5f00\u542f\u5bf9 Dcat Admin \u7684\u652f\u6301 Dcat\\Admin\\Octane\\Listeners\\FlushAdminState::class, ], ... ], Laravel Octane \u76ee\u524d\u4ecd\u5904\u4e8e beta \u7248\u672c\u9636\u6bb5\uff0c\u5173\u4e8e Laravel Octane \u7684\u5b89\u88c5\u4e0e\u66f4\u591a\u4ecb\u7ecd\u8bf7\u524d\u5f80\u6587\u6863 https://github.com/laravel/octane \u67e5\u770b\u3002 2.\u589e\u52a0\u8868\u683c\u7b80\u5316\u5206\u9875\uff08 simplePaginate \uff09\u529f\u80fd \u542f\u7528 simplePaginate \u529f\u80fd\u540e\u4f1a\u4f7f\u7528 Laravel \u7684 simplePaginate \u529f\u80fd\u8fdb\u884c\u5206\u9875\uff0c\u5f53\u6570\u636e\u91cf\u8f83\u5927\u65f6\u53ef\u4ee5\u5927\u5e45\u63d0\u5347\u9875\u9762\u7684\u54cd\u5e94\u901f\u5ea6\uff0c\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4f7f\u7528\u6b64\u529f\u80fd\u540e\u5c06\u4e0d\u4f1a\u67e5\u8be2\u6570\u636e\u8868\u7684 \u603b\u884c\u6570 \u3002 // \u542f\u7528 $grid->simplePaginate(); // \u7981\u7528 $grid->simplePaginate(false); \u529f\u80fd\u6539\u8fdb 1.\u91cd\u6784\u7ffb\u8bd1\u529f\u80fd \u5728\u8fc7\u53bb\u7248\u672c\u4e2d\uff0c\u5f53\u4f7f\u7528 \u5f02\u6b65\u8868\u5355 \u4ee5\u53ca \u5f02\u6b65\u8868\u683c \u529f\u80fd\u65f6\u65e0\u6cd5\u81ea\u52a8\u5bf9\u5b57\u6bb5\u540d\u79f0\u8fdb\u884c\u7ffb\u8bd1\uff0c\u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\u53ef\u4ee5\u901a\u8fc7 translation \u5c5e\u6027\u6307\u5b9a\u7ffb\u8bd1\u6587\u4ef6\u7684\u8def\u5f84\u8fdb\u884c\u81ea\u52a8\u7ffb\u8bd1\uff0c\u7528\u6cd5\u5982\u4e0b <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Traits\\LazyWidget; use Dcat\\Admin\\Widgets\\Form; use Dcat\\Admin\\Contracts\\LazyRenderable; class MyForm extends Form implements LazyRenderable { use LazyWidget; /** * \u6307\u5b9a\u7ffb\u8bd1\u6587\u4ef6\u540d\u79f0 * * @var string */ protected $translation = 'my-form'; public function form() { $this->text('field1'); $this->text('field2'); ... } ... } \u8bed\u8a00\u5305 resources/lang/{locale}/my-form.php \u5185\u5bb9\u5982\u4e0b <?php return [ 'fields' => [ 'field1' => '\u5b57\u6bb51', 'field2' => '\u5b57\u6bb52', ... ], ]; \u5e76\u4e14\u5728\u63a7\u5236\u5668\u4e2d\u4e5f\u53ef\u4ee5\u6307\u5b9a\u5f53\u524d\u7ffb\u8bd1\u6587\u4ef6\u7684\u8def\u5f84 use Dcat\\Admin\\Http\\Controllers\\AdminController; class UserController extends AdminController { /** * \u6307\u5b9a\u7ffb\u8bd1\u6587\u4ef6\u540d\u79f0 * * @var string */ protected $translation = 'user1'; ... } \u5f53\u7136\u4e5f\u53ef\u4ee5\u901a\u8fc7 Admin::translation() \u65b9\u6cd5\u6307\u5b9a use Dcat\\Admin\\Admin; Admin::translation('user'); 2.\u589e\u52a0\u8868\u683c\u76f8\u5173\u914d\u7f6e\u53c2\u6570 \u589e\u52a0\u6570\u4e2a\u8868\u683c\u76f8\u5173\u7684\u914d\u7f6e\u6587\u4ef6\u53c2\u6570 admin.grid.* : 'grid' => [ // \u8868\u683c\u884c\u64cd\u4f5c\u7c7b 'grid_action_class' => Dcat\\Admin\\Grid\\Displayers\\DropdownActions::class, // \u8868\u683c\u6279\u91cf\u64cd\u4f5c\u7c7b 'batch_action_class' => Dcat\\Admin\\Grid\\Tools\\BatchActions::class, // \u8868\u683c\u5206\u9875\u7c7b 'paginator_class' => Dcat\\Admin\\Grid\\Tools\\Paginator::class, // \u8868\u683c\u884c\u9ed8\u8ba4\u7684\u51e0\u4e2a\u64cd\u4f5c\u7c7b\u914d\u7f6e 'actions' => [ 'view' => Dcat\\Admin\\Grid\\Actions\\Show::class, 'edit' => Dcat\\Admin\\Grid\\Actions\\Edit::class, 'quick_edit' => Dcat\\Admin\\Grid\\Actions\\QuickEdit::class, 'delete' => Dcat\\Admin\\Grid\\Actions\\Delete::class, 'batch_delete' => Dcat\\Admin\\Grid\\Tools\\BatchDelete::class, ], ... ], 3.\u79fb\u9664\u7981\u7528\u8868\u683c\u5206\u9875\u540e\u663e\u793a\u8868\u683c\u9875\u811a\u4fe1\u606f \u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\uff0c\u5982\u679c\u7981\u7528\u4e86\u8868\u683c\u7684\u5206\u9875\u529f\u80fd\uff0c\u5c06\u4e0d\u4f1a\u518d\u663e\u793a\u8868\u683c\u7684\u9875\u811a\u4fe1\u606f\u3002 4.\u4f18\u5316 Filter::panel() \u5e03\u5c40\u95f4\u8ddd 5.\u4f18\u5316\u6587\u4ef6\u53d1\u5e03\u529f\u80fd\uff0c\u53d1\u5e03\u8bed\u8a00\u5305\u6587\u4ef6\u65f6\u5c06\u4e0d\u518d\u8986\u76d6 menu.php \u4ee5\u53ca global.php \u6587\u4ef6 \u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\uff0c\u5f53\u4f7f\u7528 admin:update \u4ee5\u53ca admin:publish --force \u547d\u4ee4\u6587\u4ef6\u65f6\uff0c\u5c06\u4e0d\u518d\u8986\u76d6 menu.php \u4ee5\u53ca global.php \u6587\u4ef6\u3002 6.\u66f4\u65b0 Tinymce \u7248\u672c\u81f3 5.6.2 @wk1025 BUG\u4fee\u590d \u4fee\u590d\u6570\u636e\u8868\u683c\u4e2d\u5b57\u6bb5\u7c7b\u578b\u4e3a Object \u65f6\u62a5\u9519\u95ee\u9898 @xiaohuilam \u4fee\u590d\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\u4ecd\u7136\u63d0\u793a\u4e0a\u4f20\u6210\u529f\u95ee\u9898 \u4fee\u590d\u6743\u9650\u5224\u65ad\u4e2d\u95f4\u4ef6\u5339\u914d\u65f6\u6ca1\u6709\u4f7f\u7528\u4f20\u5165\u7684 $request \u5bf9\u8c61\u95ee\u9898 @asmodai1985 \u4fee\u590d\u8868\u5355 rules \u65b9\u6cd5\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8bbe\u7f6e message \u65e0\u6548\u95ee\u9898 \u4fee\u590d Helper::array() \u4f1a\u628a 0 \u8f6c\u4e3a\u7a7a\u6570\u7ec4\u95ee\u9898 \u4fee\u590d\u884c\u9009\u62e9\u5668\u65e0\u6cd5\u9009\u4e2d\u6811\u5f62\u8868\u683c\u5b50\u7ea7\u884c\u95ee\u9898 \u4fee\u590d KeyValue::setValueLabel() \u65b9\u6cd5\u65e0\u6548\u95ee\u9898 \u4fee\u590d hasmany \u4ee5\u53ca table \u8868\u5355\u5220\u9664\u9009\u9879\u65f6\u4f1a\u91cd\u7f6e\u8868\u5355\u95ee\u9898 \u4fee\u590d\u8868\u683c\u884c\u64cd\u4f5c\u7f16\u8f91\u6309\u94ae\u6587\u672c\u663e\u793a\u9519\u8bef\u95ee\u9898 @GemaDynamic \u4fee\u590d\u6811\u5f62\u8868\u683c\u5b50\u7ea7\u884c\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u8868\u5355\u5f39\u7a97\u95ee\u9898 #813 v2.0.22-beta \u53d1\u5e03\u65f6\u95f4 2021/4/1 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.22-beta\" php artisan admin:update BUG\u4fee\u590d \u4fee\u590d\u90e8\u5206\u529f\u80fd\u7f3a\u5931 CSRF_TOKEN \u62a5\u9519\u95ee\u9898 \u4fee\u590d\u83dc\u5355\u81ea\u52a8\u9002\u5e94\u9ad8\u5ea6\u529f\u80fd\u62a5\u9519\u95ee\u9898 v2.0.21-beta \u53d1\u5e03\u65f6\u95f4 2021/3/30 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.21-beta\" php artisan admin:update \u65b0\u589e\u529f\u80fd 1.\u589e\u52a0\u8868\u683c\u5217\u9009\u62e9\u5668 ColumnSelector \u652f\u6301\u6301\u4e45\u5316\u5b58\u50a8\u529f\u80fd \u5728\u914d\u7f6e\u6587\u4ef6 config/admin.php \u53ef\u4ee5\u914d\u7f6e\u5b58\u50a8\u5217\u9009\u62e9\u5668\u72b6\u6001\u7684\u65b9\u5f0f\uff0c\u652f\u6301\u7684\u5b58\u50a8\u65b9\u5f0f\u5982\u4e0b Dcat\\Admin\\Grid\\ColumnSelector\\SessionStore \u5217\u9009\u62e9\u5668\u72b6\u6001\u6570\u636e\u4fdd\u5b58\u5728 session \u4e2d\uff0c\u4ec5\u5728\u767b\u9646\u72b6\u6001\u4e2d\u6709\u6548 Dcat\\Admin\\Grid\\ColumnSelector\\CacheStore \u5217\u9009\u62e9\u5668\u72b6\u6001\u6570\u636e\u4fdd\u5b58\u5728 Laravel Cache \u7f13\u5b58\u7cfb\u7edf\u4e2d\uff0c\u6700\u957f\u53ef\u4fdd\u5b58 300 \u5929\uff0c\u5e76\u53ef\u4ee5\u901a\u8fc7 admin.grid.column_selector.store_params.driver \u53ef\u4ee5\u914d\u7f6e\u7f13\u5b58\u9a71\u52a8\uff0c\u9ed8\u8ba4\u4e3a file 'grid' => [ ... 'column_selector' => [ 'store' => Dcat\\Admin\\Grid\\ColumnSelector\\SessionStore::class, 'store_params' => [ 'driver' => 'file', ], ], ], 2.\u589e\u52a0\u8868\u683c\u6761\u4ef6\u5224\u65ad( if )\u7684\u7ec8\u7ed3\u65b9\u6cd5( end ) $grid->column('status') ->if(...) // \u6761\u4ef61 ->display(...) ->display(...) ->if(...) // \u6761\u4ef62 ->display(...) ->display(...) ->end() // \u7ec8\u7ed3\u524d\u9762\u7684\u6761\u4ef6\u5224\u65ad ->display(...); // \u6240\u6709\u6761\u4ef6\u90fd\u80fd\u751f\u6548 3.\u589e\u52a0\u8868\u683c\u884c\u9009\u62e9\u5668\u9ed8\u8ba4\u9009\u4e2d( check )\u4ee5\u53ca\u7981\u6b62\u66f4\u6539\u9009\u4e2d\u72b6\u6001( disable )\u529f\u80fd \u901a\u8fc7 check \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u9ed8\u8ba4\u9009\u4e2d\u7684\u884c\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a array \u7c7b\u578b\u6216 \u533f\u540d\u51fd\u6570 \u53c2\u6570 // \u8bbe\u7f6e\u9ed8\u8ba4\u9009\u4e2d\u7b2c 1/3/5 \u884c $grid->rowSelector()->check([0, 2, 4]); // \u4f20\u9012\u95ed\u5305 $grid->rowSelector()->check(function () { // \u8bbe\u7f6e\u9ed8\u8ba4\u9009\u4e2d\u7b2c 1/3/5 \u884c return in_array($this->_index, [0, 2, 4]); }); // \u5728\u95ed\u5305\u4e2d\u4f7f\u7528\u5f53\u524d\u884c\u5176\u4ed6\u5b57\u6bb5 $grid->rowSelector()->check(function () { // \u8bbe\u7f6e\u9ed8\u8ba4\u9009\u4e2d id > 10 \u7684\u884c return $this->id > 10; }); \u901a\u8fc7 disable \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u7981\u6b62\u66f4\u6539\u9009\u4e2d\u72b6\u6001\u7684\u884c\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a array \u7c7b\u578b\u6216 \u533f\u540d\u51fd\u6570 \u53c2\u6570 // \u7981\u6b62\u7b2c 1/3/5 \u884c\u66f4\u6539\u9009\u4e2d\u72b6\u6001 $grid->rowSelector()->disable([0, 2, 4]); // \u4f20\u9012\u95ed\u5305 $grid->rowSelector()->disable(function () { // \u7981\u6b62\u7b2c 1/3/5 \u884c\u66f4\u6539\u9009\u4e2d\u72b6\u6001 return in_array($this->_index, [0, 2, 4]); }); // \u5728\u95ed\u5305\u4e2d\u4f7f\u7528\u5f53\u524d\u884c\u5176\u4ed6\u5b57\u6bb5 $grid->rowSelector()->disable(function () { // \u7981\u6b62 id > 10 \u7684\u884c\u66f4\u6539\u9009\u4e2d\u72b6\u6001 return $this->id > 10; }); // disable \u53ef\u4ee5\u548c check \u65b9\u6cd5\u4e00\u8d77\u4f7f\u7528 $grid->rowSelector()->check([2, 4])->disable([0, 2, 4]); 4.\u589e\u52a0 KeyValue \u8868\u5355\u81ea\u5b9a\u4e49\u6807\u9898\u7ffb\u8bd1\u529f\u80fd $form->keyValue(...)->setKeyLabel('\u952e\u540d')->setValueLabel('\u952e\u503c'); 5.\u589e\u52a0 Grid::scrollbarX \u663e\u793a\u8868\u683c\u6a2a\u5411\u6eda\u52a8\u6761\u65b9\u6cd5 \u663e\u793a\u8868\u683c\u6a2a\u5411\u6eda\u52a8\u6761\uff0c\u9ed8\u8ba4\u4e0d\u663e\u793a // \u542f\u7528 $grid->scrollbarX(); // \u7981\u7528 $grid->scrollbarX(false); 6.\u589e\u52a0 admin:update \u547d\u4ee4 \u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\uff0c\u5347\u7ea7\u540e\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c admin:update \uff0c\u76f8\u5f53\u4e8e\u8fd0\u884c php artisan admin:publish --assets --migrations --lang --force php artisan migrate \u529f\u80fd\u6539\u8fdb 1.\u8868\u5355\u663e\u793a\u7f16\u8f91\u6570\u636e\u65f6\u517c\u5bb9\u9a7c\u5cf0\u98ce\u683c\u7684\u5173\u8054\u5173\u7cfb\u540d\u79f0 \u5728\u65e7\u7248\u672c\u4e2d\uff0c\u5982\u679c\u9700\u8981\u7f16\u8f91\u6a21\u578b\u5173\u8054\u5173\u7cfb\u5b57\u6bb5\uff0c\u4e14\u6a21\u578b\u7684\u5173\u8054\u5173\u7cfb\u540d\u79f0\u4e3a\u9a7c\u5cf0\u98ce\u683c\u65f6\uff0c\u9700\u8981\u628a\u540d\u79f0\u66f4\u6539\u4e3a\u4e0b\u5212\u7ebf\u98ce\u683c\u624d\u80fd\u6b63\u5e38\u663e\u793a\uff0c\u8fd9\u5bf9\u5f00\u53d1\u8005\u975e\u5e38\u4e0d\u53cb\u597d\u3002\u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u9a7c\u5cf0\u98ce\u683c\u7684\u5173\u8054\u5173\u7cfb\u540d\u79f0\uff0c\u4e0d\u9700\u8981\u505a\u4efb\u4f55\u7279\u6b8a\u5904\u7406 return Form::make(User::with(['myProfile']), function (Form $form) { // \u76f4\u63a5\u4f7f\u7528\u9a7c\u5cf0\u98ce\u683c\u547d\u540d\uff0c\u4e0d\u9700\u505a\u5176\u4ed6\u5904\u7406 $form->text('myProfile.full_name'); ... }); 2.\u8c03\u6574\u5de5\u5177\u8868\u5355\u6570\u636e\u8bbe\u7f6e\u903b\u8f91\uff0c\u53ef\u5728 form \u65b9\u6cd5\u4e2d\u83b7\u53d6 default \u65b9\u6cd5\u6570\u636e use Dcat\\Admin\\Widgets\\Form; class Setting extends Form { public function form() { // \u83b7\u53d6 default \u65b9\u6cd5\u8bbe\u7f6e\u7684\u6570\u636e $id = $this->data()->id; $name = $this->data()->name; $this->text('name'); ... } public function default() { return [ 'id' => 1, 'name' => 'abc', ... ]; } } 3. hasMany \u4ee5\u53ca array \u8868\u5355\u652f\u6301\u6574\u4f53\u4f7f\u7528 rules \u9a8c\u8bc1\u89c4\u5219\u6821\u9a8c $form->hasMany(...)->rules('size:2'); 4.\u8c03\u6574 selectTable \u9ed8\u8ba4\u5360\u4f4d\u7b26\u4e3a \u9009\u62e9 ... 5.\u4f18\u5316\u8868\u5355row\u5e03\u5c40\u95f4\u8ddd #1092 BUG \u4fee\u590d ModelTree \u5220\u9664\u8282\u70b9\u65f6\u65e0\u6cd5\u5220\u9664\u95f4\u9694\u4e00\u4e2a\u5c42\u7ea7\u4ee5\u4e0a\u7684\u5b50\u8282\u70b9\u95ee\u9898 \u4fee\u590d\u5bfc\u51fa\u529f\u80fd\u5728\u90e8\u5206\u73af\u5883\u53ef\u80fd\u4f1a\u51fa\u73b0\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u8868\u5355\u8054\u52a8( load )\u52a0\u8f7d\u540e\u521d\u59cb\u503c\u4e22\u5931\u7684\u95ee\u9898 @xqbumu \u4fee\u590d\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\u540e\u663e\u793a\u63d0\u793a\u4fe1\u606f\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u6570\u636e\u8be6\u60c5 Show \u5b9e\u4f8b\u5316\u51fd\u6570\u5982\u679c\u4f20\u9012\u6a21\u578b\uff0c\u4e3b\u952e\u8d4b\u503c\u9519\u8bef\u7684\u95ee\u9898 @jisuye \u4fee\u590d\u8868\u683c setConstraints \u65b9\u6cd5\u5bf9\u5feb\u901f\u7f16\u8f91\u65e0\u6548\u95ee\u9898 #1119 \u4fee\u590d\u5728 iframe \u9875\u9762\u4e2d\u9884\u89c8\u56fe\u7247\u529f\u80fd\u5f02\u5e38\u95ee\u9898 \u4fee\u590d hasMany \u4ee5\u53ca array \u8868\u5355\u4e0b\u5220\u9664\u4f7f\u7528 required \u9a8c\u8bc1\u89c4\u5219\u7684\u5b57\u6bb5\u540e\u5bfc\u81f4\u65e0\u6cd5\u63d0\u4ea4\u8868\u5355\u95ee\u9898 \u4fee\u590d\u8868\u683c dialogTree \u5f53\u9876\u7ea7ID\u4e3a\u5b57\u7b26\u4e32 0 \u65f6\u52a0\u8f7d\u5f02\u5e38\u95ee\u9898 #1122 v2.0.20-beta \u53d1\u5e03\u65f6\u95f4 2021/3/8 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.20-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate \u529f\u80fd\u6539\u8fdb 1. selectTable \u8868\u5355\u8868\u683c\u5237\u65b0\u65f6\u4fdd\u7559\u524d\u9875\u7684\u6570\u636e\u72b6\u6001 selectTable \u8868\u5355\u8868\u683c\u5237\u65b0\u6216\u7ffb\u9875\u540e\u4f1a\u4fdd\u7559\u524d\u9875\u9009\u4e2d\u6216\u53d6\u6d88\u7684\u6570\u636e\u72b6\u6001 2. selectTable \u8868\u5355\u8bbe\u7f6e\u663e\u793a\u5b57\u6bb5\u540d\u79f0\u529f\u80fd\u4f18\u5316 \u5728\u65e7\u7248\u672c\u4e2d\uff0c\u5982\u679c\u60f3\u8981\u8bbe\u7f6e selectTable \u8868\u5355\u9009\u4e2d\u7684\u5b57\u6bb5\u6216\u663e\u793a\u7684\u5b57\u6bb5\uff0c\u9700\u8981\u5728 Renderable \u5bf9\u8c61\u4e2d\u8bbe\u7f6e\uff0c\u975e\u5e38\u7684\u9ebb\u70e6\u548c\u4e0d\u4fbf\uff0c\u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u6cd5\u8bbe\u7f6e\u9009\u4e2d\u7684\u5b57\u6bb5\u6216\u663e\u793a\u7684\u5b57\u6bb5 $form->selectTabole('user_id') ->from(UserTable::make()) ->pluck('full_name', 'id'); // \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u663e\u793a\u7684\u5b57\u6bb5\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u9009\u4e2d\u540e\u5c06\u4fdd\u5b58\u5230\u8868\u5355\u7684\u5b57\u6bb5 // \u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u4e0b\u9762\u7684\u65b9\u6cd5 $form->selectTabole('user_id') ->from(UserTable::make()) ->model(UserModel::class, 'id', 'full_name'); 3. selectTable \u3001 multipleSelectTable \u3001 radio \u3001 checkbox \u8868\u5355\u589e\u52a0 load \u65b9\u6cd5 \u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\uff0c selectTable \u3001 multipleSelectTable \u3001 radio \u3001 checkbox \u4e5f\u53ef\u4ee5\u4f7f\u7528 load \u65b9\u6cd5\u8054\u52a8 select \u548c multipleSelect \u8868\u5355 $form->radio('type')->options([...])->load('category', 'categories/options'); $form->select('categories'); \u63a5\u53e3 categories/options \u8fd4\u56de\u683c\u5f0f\u5982\u4e0b [ { \"id\": 9, \"text\": \"xxx\" }, { \"id\": 21, \"text\": \"xxx\" }, ... ] 4.\u589e\u52a0\u83dc\u5355\u6c34\u5e73\u5e03\u5c40\u81ea\u52a8\u9002\u5e94\u9875\u9762\u4ee5\u53ca\u83dc\u5355\u9ad8\u5ea6\u53d8\u5316\u529f\u80fd \u542f\u7528\u83dc\u5355\u6c34\u5e73\u5e03\u5c40\u529f\u80fd\u540e\uff0c\u5f53\u9875\u9762\u9ad8\u5ea6\u6216\u83dc\u5355\u9ad8\u5ea6\u53d1\u751f\u53d8\u52a8\u65f6\uff0c\u9875\u9762\u4f1a\u81ea\u9002\u5e94\u3001\u81ea\u884c\u8c03\u6574\u5185\u5bb9\u95f4\u8ddd 5.\u589e\u52a0\u8868\u683c Grid::dropColumn() \u65b9\u6cd5\u7528\u4e8e\u5220\u9664\u8bbe\u7f6e\u7684\u5217 $nameColumn = $grid->column('name'); // \u5220\u9664\u540d\u79f0\u4e3a `name` \u7684\u5217 $grid->dropColumn('name'); // \u7b49\u540c\u4e8e $grid->dropColumn($nameColumn); 6.\u589e\u52a0 admin_javascript \u51fd\u6570 \u6b64\u51fd\u6570\u53ef\u7528\u4e8e\u5f80 php \u7684\u914d\u7f6e array \u4e2d\u6dfb\u52a0 JS \u4ee3\u7801\uff0c\u7528\u6cd5\u5982\u4e0b $form->text('number')->inputmask([ 'oncomplete' => admin_javascript('function () { // \u8fd9\u91cc\u662fjs\u4ee3\u7801 alert('inputmask complete'); }'), ]); 6. Form \u8868\u5355\u5e95\u90e8\u53ef\u9ed8\u8ba4\u52fe\u9009 \u67e5\u770b \u3001 \u7ee7\u7eed\u7f16\u8f91 \u3001 \u7ee7\u7eed\u521b\u5efa \u7b49\u9009\u9879\u529f\u80fd \u7528\u6cd5\u5982\u4e0b #1073 $form->footer(function (Footer $footer) { // \u8bbe\u7f6e`\u67e5\u770b`\u9ed8\u8ba4\u9009\u4e2d $footer->defaultViewChecked(); // \u8bbe\u7f6e`\u7ee7\u7eed\u7f16\u8f91`\u9ed8\u8ba4\u9009\u4e2d $footer->defaultEditingChecked(); // \u8bbe\u7f6e`\u7ee7\u7eed\u521b\u5efa`\u9ed8\u8ba4\u9009\u4e2d $footer->defaultCreatingChecked(); }); // \u8bbe\u7f6e`\u67e5\u770b`\u9ed8\u8ba4\u9009\u4e2d $form->defaultViewChecked(); // \u8bbe\u7f6e`\u7ee7\u7eed\u7f16\u8f91`\u9ed8\u8ba4\u9009\u4e2d $form->defaultEditingChecked(); // \u8bbe\u7f6e`\u7ee7\u7eed\u521b\u5efa`\u9ed8\u8ba4\u9009\u4e2d $form->defaultCreatingChecked(); BUG \u4fee\u590d\u8868\u683c\u4f7f\u7528\u5173\u8054\u5173\u7cfb\u5b57\u6bb5\u6392\u5e8f\u65f6\u5fc5\u987b\u5148 with \u95ee\u9898 \u4fee\u590d\u540c\u4e2a\u9875\u9762\u65e0\u6cd5\u540c\u65f6\u6e32\u67d3\u591a\u4e2a\u5f02\u6b65\u7ec4\u4ef6\u95ee\u9898 \u4fee\u590d\u6811\u5f62\u8868\u683c\u4e0b\u5220\u9664\u5b50\u8282\u70b9\u6570\u636e\u540e\u8df3\u8f6c\u5f02\u5e38\u95ee\u9898 #1071 \u4fee\u590d\u8868\u683c\u5bfc\u51fa\u5b57\u6bb5\u4e2d\u5b58\u5728\u7a7a\u6570\u7ec4\u65f6\u5bfc\u51fa\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u8868\u5355\u591a\u56fe\u4e0a\u4f20\u4f7f\u7528 sortable \u529f\u80fd\u8fdb\u884c\u6392\u5e8f\u4f1a\u5bfc\u81f4\u9875\u9762\u7684\u56fe\u7247\u5143\u7d20\u6d88\u5931\u4e0d\u89c1\u95ee\u9898 \u4fee\u590d\u8868\u5355\u5b57\u6bb5 disable \u65b9\u6cd5\u8bbe\u7f6e false \u65e0\u6548\u95ee\u9898 \u4fee\u590d multipleSelect \u8868\u5355\u4f7f\u7528 load \u8054\u52a8\u52a0\u8f7d\u65f6\u65e0\u6cd5\u628a\u6240\u6709\u9009\u4e2d\u9009\u9879\u4f20\u5165\u63a5\u53e3\u95ee\u9898 #1076 \u4fee\u590d\u8868\u683c\u89c4\u683c\u9009\u62e9\u5668\u5b58\u5728\u591a\u4e2a0\u5f00\u5934\u9009\u9879\u65f6\u9009\u4e2d\u529f\u80fd\u5f02\u5e38\u95ee\u9898 v2.0.19-beta \u53d1\u5e03\u65f6\u95f4 2021/2/21 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.19-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate BUG\u4fee\u590d \u4fee\u590d\u975e\u8d85\u7ba1\u89d2\u8272\u4e0b\u8bf7\u6c42 \u5185\u7f6eapi \u65f6\u63d0\u793a \u65e0\u6743\u8bbf\u95ee \u95ee\u9898 \u4fee\u590d\u5728\u5f39\u7a97\u4e2d\u4f7f\u7528\u65f6\u95f4\u8303\u56f4\u8868\u5355\u62a5\u9519\u95ee\u9898 v2.0.18-beta \u53d1\u5e03\u65f6\u95f4 2021/2/20 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.18-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate \u529f\u80fd\u6539\u8fdb 1.\u589e\u52a0\u83dc\u5355\u9876\u90e8\u6a2a\u5411\u5e03\u5c40 (Horizontal) \u8bbe\u7f6e\u914d\u7f6e\u53c2\u6570 admin.layout.horizontal_menu \u7684\u503c\u4e3a true \u5f00\u542f\u6b64\u529f\u80fd\uff0c\u6548\u679c\u5982\u4e0b 2.\u6743\u9650\u4e2d\u95f4\u4ef6\u4ee5\u53ca\u8df3\u8fc7\u767b\u9646\u5224\u65ad\u65f6\u53ef\u4ee5\u586b\u5199\u8def\u7531\u522b\u540d\u5e76\u4e14\u65e0\u9700\u589e\u52a0\u524d\u7f00 \u914d\u7f6e\u6587\u4ef6\u4ee5\u53ca\u6743\u9650\u8bbe\u7f6e\u8def\u7531\u522b\u540d\u65f6\u65e0\u9700\u586b\u5199\u8def\u7531\u524d\u7f00 'permission' => [ ... // \u8df3\u8fc7\u6743\u9650\u5224\u65ad 'except' => [ // \u53ef\u4ee5\u76f4\u63a5\u586b\u5199\u8def\u7531\u522b\u540d\uff0c\u5e76\u4e14\u65e0\u9700\u5199\u8def\u7531\u524d\u7f00 'custom.users', ], ], 3.\u6570\u636e\u8868\u683c\u884c\u6570\u636e\u589e\u52a0 _index \u5b57\u6bb5\u7528\u4e8e\u4fdd\u5b58\u884c\u5e8f\u53f7 \u6570\u636e\u8868\u683c\u884c\u6570\u636e\u589e\u52a0 _index \u5b57\u6bb5\u7528\u4e8e\u4fdd\u5b58\u884c\u5e8f\u53f7\uff0c\u4ece 0 \u5f00\u59cb\uff0c\u7528\u6cd5\u5982\u4e0b // \u5728 display \u56de\u8c03\u4e2d\u4f7f\u7528 $grid->column('\u5e8f\u53f7')->display(function () { return $this->_index + 1; }); // \u5728\u884c\u64cd\u4f5c action \u4e2d\u4f7f\u7528 $grid->actions(function ($actions) { $index = $this->_index; ... }); 4.\u91cd\u547d\u540d markdown \u7ec4\u4ef6\u9759\u6001\u8d44\u6e90\u522b\u540d\uff0c\u907f\u514d\u4e0e\u81ea\u5b9a\u4e49 blade \u6807\u7b7e\u4ea7\u751f\u51b2\u7a81 5.\u589e\u52a0\u914d\u7f6e\u53c2\u6570 admin.menu.default_icon \u7528\u4e8e\u8bbe\u7f6e\u9ed8\u8ba4\u83dc\u5355\u56fe\u6807 admin.menu.default_icon \u7528\u4e8e\u8bbe\u7f6e\u83dc\u5355\u9ed8\u8ba4\u56fe\u6807\uff0c\u9ed8\u8ba4\u503c\u4e3a feather icon-circle 6.\u589e\u52a0\u65b0\u7684\u533a\u5757\u4f4d\u7f6e NAVBAR_BEFORE \u4ee5\u53ca NAVBAR_AFTER use Dcat\\Admin\\Admin; // \u5f80\u9876\u90e8\u5bfc\u822a\u680f\u524d\u8f93\u51fa\u5185\u5bb9 admin_inject_section(Admin::SECTION['NAVBAR_BEFORE'], view('...')); // \u5f80\u9876\u90e8\u5bfc\u822a\u680f\u540e\u8f93\u51fa\u5185\u5bb9 admin_inject_section(Admin::SECTION['NAVBAR_AFTER'], view('...')); 6.\u4f18\u5316\u8868\u683c\u5b57\u6bb5\u9009\u62e9\u5668\u4ee3\u7801 BUG\u4fee\u590d \u4fee\u590d\u6269\u5c55\u7ba1\u7406\u9875\u9762 new \u6807\u7b7e\u663e\u793a\u5f02\u5e38\u95ee\u9898 #1044 \u4fee\u590d\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\u540e\u76f4\u63a5\u5220\u9664\u62a5\u9519\u95ee\u9898 #1058 \u4fee\u590d Form::number \u8868\u5355\u5728\u4f7f\u7528 min \u548c max \u65b9\u6cd5\u540e\u8f93\u5165\u503c\u5f02\u5e38\u95ee\u9898 v2.0.17-beta \u53d1\u5e03\u65f6\u95f4 2021/2/5 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.17-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate \u529f\u80fd\u6539\u8fdb 1.\u4f18\u5316\u8868\u683c\u6392\u5e8f\u529f\u80fd \u652f\u6301 orderBy \u76f4\u63a5\u4f7f\u7528\u5173\u8054\u5173\u7cfb\u8868\u5b57\u6bb5\u8fdb\u884c\u6392\u5e8f\uff0c\u6ce8\u610f\u8fd9\u91cc\u4ec5\u652f\u6301 \u4e00\u5bf9\u4e00 \u4ee5\u53ca \u4e00\u5bf9\u591a \u5173\u8054\u5173\u7cfb $grid->model()->orderBy('profile.age'); 2.\u589e\u52a0\u6a21\u578b\u6811\u4ee5\u53ca\u6811\u5f62\u8868\u683c\u81ea\u5b9a\u4e49 parent_id \u503c\u529f\u80fd \u6a21\u578b\u6811\u4ee5\u53ca\u6811\u5f62\u8868\u683c\u53ef\u4ee5\u5728 model \u4e2d\u81ea\u5b9a\u4e49 parent_id \u503c\uff0c\u9ed8\u8ba4\u503c\u4e3a 0 class Category extends Model { use ModelTree; // \u8bbe\u7f6e\u9ed8\u8ba4 parent_id \u4e3a A protected $defaultParentId = 'A'; } 3.\u6570\u636e\u8be6\u60c5 file \u652f\u6301\u5c55\u793a\u591a\u6587\u4ef6 #985 $show->field('...')->files(); \u6548\u679c 4. Form::input \u652f\u6301\u6570\u7ec4\u6279\u91cf\u8bbe\u7f6e $form->submitted(function ($form) { $form->input(['k1' => 'v1', 'k2' => 'v2' ...]); }); 5.\u6269\u5c55\u7ba1\u7406\u652f\u6301 logo \u4ee5\u53ca \u522b\u540d\u5c55\u793a \u8be6\u7ec6\u7528\u6cd5\u53c2\u8003\u6587\u6863 \u6269\u5c55 6.\u589e\u52a0admin_route\u65b9\u6cd5\u6839\u636e\u522b\u540d\u83b7\u53d6URL app/Admin/routes.php \u8def\u7531\u6ce8\u518c\u5982\u4e0b Route::group([ 'prefix' => config('admin.route.prefix'), 'namespace' => config('admin.route.namespace'), 'middleware' => config('admin.route.middleware'), ], function (Router $router) { // \u8bbe\u7f6e\u522b\u540d $router->resource('users', 'UserController', [ 'names' => ['index' => 'my-users'], ]); }); \u6839\u636e\u522b\u540d\u83b7\u53d6URL // \u83b7\u53d6url $url = admin_route('my-users'); // \u5224\u65ad\u8def\u7531 $isUsers = request()->routeIs(admin_route_name('users')); 8.JsonResponse::location \u5141\u8bb8\u4e0d\u4f20\u53c2 \u5982\u679c\u4e0d\u4f20\u53c2\u4f1a\u5728 1 \u79d2\u4e4b\u540e\u81ea\u52a8\u5237\u65b0\u5f53\u524d\u9875\u9762 return Admin::json()->success('\u64cd\u4f5c\u6210\u529f')->location(); 9.\u9875\u9762\u5e03\u5c40Layout\\Column\u652f\u6301\u7b49\u5bbd\u5e03\u5c40 \u5f53\u5217\u5bbd\u5ea6\u8bbe\u7f6e\u4e3a 0 \u65f6\u4f1a\u4f7f\u7528\u7b49\u5bbd\u5e03\u5c40 #1018 use Dcat\\Admin\\Layout\\Row; use Dcat\\Admin\\Layout\\Content; return Content::make() ->body(function (Row $row) { $row->column(0, view('...')); }); 10.\u9875\u9762\u5e03\u5c40Layout\\Row\u652f\u6301no-gutters\u5c5e\u6027 .row \u4e0a\u5e26\u6709 margin-left: -15px;margin-right: -15px; \u5c5e\u6027\uff0c\u4f60\u53ef\u4ee5\u5728 .row \u4e0a\u4e0a\u5b9a\u4e49 .no-gutters \u5c5e\u6027\uff0c\u4ece\u800c\u6d88\u9664\u8fd9\u4e2a\u5c5e\u6027\uff0c\u4f7f\u9875\u9762\u4e0d\u4f1a\u989d\u5916\u5bbd\u51fa 30px \uff0c\u5373 <div class=\"row no-gutters\"... $content->row(function (Row $row) { // \u542f\u7528 no-gutters $row->noGutters(); $row->column(9, function (Column $column) { $column->row($this->card(['col-md-12', 20], '#4DB6AC')); $column->row(function (Row $row) { // \u542f\u7528 no-gutters $row->noGutters(); $row->column(4, $this->card(['col-md-4', 30], '#80CBC4')); $row->column(4, $this->card(['col-md-4', 30], '#4DB6AC')); $row->column(4, function (Column $column) { $column->row(function (Row $row) { // \u542f\u7528 no-gutters $row->noGutters(); $row->column(6, $this->card(['col-md-6', 30], '#26A69A')); $row->column(6, $this->card(['col-md-6', 30], '#26A69A')); }); }); }); }); }); \u6548\u679c\u5982\u4e0b 11.\u8868\u683c\u5220\u9664\u6570\u636e\u540e\u4fdd\u7559URL\u7684get\u53c2\u6570 \u5728\u4e4b\u524d\u7684\u7248\u672c\u4e2d\uff0c\u5220\u9664\u6570\u636e\u540e\u4f1a\u4e22\u5931 URL \u7684 get \u53c2\u6570\uff0c\u5bfc\u81f4\u8df3\u8f6c\u56de\u8868\u683c\u7b2c\u4e00\u9875\uff0c\u8fd9\u4e2a\u7248\u672c\u5bf9\u8fd9\u4e2a\u529f\u80fd\u8fdb\u884c\u4e86\u4f18\u5316\uff0c\u5220\u9664\u540e\u4f9d\u7136\u4f1a\u4fdd\u7559 URL \u7684 get \u53c2\u6570 #961 12.\u91cd\u6784\u6587\u4ef6\u4e0a\u4f20\u524d\u7aef\u4ee3\u7801 \u6b64\u529f\u80fd\u4e3a\u6280\u672f\u6027\u4f18\u5316\uff0c\u8fd9\u4e2a\u7248\u672c\u5bf9\u6587\u4ef6\u4e0a\u4f20\u524d\u7aef\u4ee3\u7801\u8fdb\u884c\u4e86\u91cd\u6784\u3001\u62c6\u5206\u4ee3\u7801\uff0c\u4f7f\u5176\u66f4\u6613\u9605\u8bfb\u548c\u7ef4\u62a4 BUG\u4fee\u590d \u4fee\u590d MultipleSelect \u8868\u5355\u6837\u5f0f\u5f02\u5e38\u95ee\u9898 #967 \u4fee\u590d\u52a0\u8f7d markdown \u7ec4\u4ef6\u540e\u4f7f\u7528 select2 \u8868\u5355\u5f02\u5e38\u95ee\u9898 #990 \u4fee\u590d\u6587\u4ef6\u4e0a\u4f20\u5728 Linux \u670d\u52a1\u5668\u4e0b\u4fdd\u5b58\u7e41\u4f53\u4e2d\u6587\u6587\u4ef6\u540d\u4e22\u5931\u95ee\u9898 #993 \u4fee\u590d Widgets\\Dropdown::click \u65e0\u6cd5\u663e\u793a\u9ed8\u8ba4\u9009\u9879\u95ee\u9898 \u4fee\u590d form \u8868\u5355\u4e2d\u7684 number \u7ec4\u4ef6\u6587\u672c\u5185\u5bb9\u4e3a\u7a7a\u65f6\u70b9\u51fb\u52a0\u51cf\u6309\u94ae\u51fa\u73b0 NaN \u95ee\u9898 #995 \u4fee\u590d\u56fe\u7247\u9884\u89c8\u5931\u8d25\u63d0\u793a\u65e0\u6cd5\u4f7f\u7528\u7ffb\u8bd1\u6587\u4ef6\u95ee\u9898 \u4fee\u590d\u4e00\u5bf9\u4e00\u5173\u8054\u5173\u7cfb Range \u8868\u5355\u4f7f\u7528\u9a8c\u8bc1\u89c4\u5219\u5224\u65ad\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u591a\u5e94\u7528\u60c5\u51b5\u4e0b\u8def\u7531\u522b\u540d\u51b2\u7a81\u7684\u95ee\u9898 v2.0.16-beta \u53d1\u5e03\u65f6\u95f4 2021/1/11 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.16-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate \u7834\u574f\u6027\u53d8\u52a8 **1.\u8868\u5355\u5b57\u6bb5\u7684 disableHorizontal \u8c03\u6574\u4e3a horizontal ** \u66f4\u6539\u8868\u5355\u5b57\u6bb5\u5e03\u5c40\u65b9\u5f0f\u4e3a horizontal \uff0c\u6b64\u529f\u80fd\u9ed8\u8ba4\u542f\u7528\uff0c\u7528\u6cd5\u5982\u4e0b // \u7981\u7528 horizontal \u5e03\u5c40 $form->text('...')->horizontal(false); \u529f\u80fd\u6539\u8fdb 1.\u589e\u5f3a\u8868\u683c\u5b57\u6bb5\u6392\u5e8f(sortable)\u529f\u80fd \u4f7f\u8868\u683c\u5b57\u6bb5\u652f\u6301\u5173\u8054\u5173\u7cfb\u8868\u5b57\u6bb5\u4ee5\u53ca json \u5b57\u6bb5\u7684\u6392\u5e8f \u6ce8\u610f\uff0c\u5173\u8054\u5173\u7cfb\u4ec5\u652f\u6301 hasOne \u4ee5\u53ca belongsTo \u4e24\u79cd\u7c7b\u578b\u7684\u5b57\u6bb5\u6392\u5e8f\uff0c\u5e76\u4e14\u4e0d\u652f\u6301\u591a\u5c42\u7ea7\u5d4c\u5957\uff01 // \u5173\u8054\u5173\u7cfb\u8868\u5b57\u6bb5\u6392\u5e8f $grid->column('profile.age')->sortable(); // \u6307\u5b9a\u9700\u8981\u6392\u5e8f\u7684\u5b57\u6bb5\u540d\u79f0 $grid->column('my_age')->sortable('profile.age'); // json\u5b57\u6bb5\u6392\u5e8f $grid->column('options.price')->sortable('options->price'); // \u5173\u8054\u5173\u7cfb\u8868\u7684 json \u5b57\u6bb5\u6392\u5e8f $grid->column('profile.options.price')->sortable('profile.options->price'); \u652f\u6301 MySql \u7684 order by cast(`{field}` as {type}) \u7528\u6cd5 $grid->column('profile.age')->sortable(null, 'SIGNED'); $grid->column('profile.options.price')->sortable('profile.options->price', 'SIGNED'); 2.\u589e\u52a0 admin_exist \u51fd\u6570\uff0c\u7528\u4e8e\u4ee3\u66ff exit admin_exist \u7528\u4e8e\u4e2d\u65ad\u7a0b\u5e8f\u6267\u884c\uff0c\u5e76\u54cd\u5e94\u6570\u636e\u5230\u6d4f\u89c8\u5668\u8fdb\u884c\u663e\u793a\uff0c\u7528\u4e8e\u4ee3\u66ff exit \u548c die \uff0c\u4e0b\u9762\u7b80\u5355\u4ecb\u7ecd\u4e0b\u7528\u6cd5 \u7528\u6cd51\uff0c\u8fd4\u56de Content \u5e03\u5c40\u5bf9\u8c61\uff0c\u6b64\u7528\u6cd5\u53ef\u7528\u4e8e\u8fd4\u56de\u9519\u8bef\u4fe1\u606f\u663e\u793a\u5230\u524d\u7aef use Dcat\\Admin\\Widgets\\Alert; use Dcat\\Admin\\Layout\\Content; // \u4e2d\u65ad\u7a0b\u5e8f\uff0c\u5e76\u663e\u793a\u81ea\u5b9a\u4e49\u9875\u9762\u5230\u524d\u7aef admin_exit( Content::make() ->title('\u6807\u9898') ->description('\u63cf\u8ff0') ->body('\u9875\u9762\u5185\u5bb91') ->body(Alert::make('\u670d\u52a1\u5668\u51fa\u9519\u4e86~', 'Error')->danger()) ); \u6548\u679c\u5982\u4e0b \u7528\u6cd52\uff0c\u8fd4\u56de json \u683c\u5f0f\u6570\u636e\uff0c\u6b64\u7528\u6cd5\u7ecf\u5e38\u7528\u4e8e\u8868\u5355\u63d0\u4ea4\u6570\u636e\u7684 api \u8bf7\u6c42\u62e6\u622a\uff0c\u6216 Action \u7684 api \u8bf7\u6c42\u62e6\u622a use Dcat\\Admin\\Admin; admin_exit( Admin::json() ->success('\u6210\u529f\u4e86') ->refresh() ->data([ ... ]) ); // \u5f53\u7136\u4e5f\u53ef\u4ee5\u76f4\u63a5\u54cd\u5e94\u6570\u7ec4 admin_exit([ ... ]); \u7528\u6cd53\uff0c\u76f4\u63a5\u76f8\u5e94 Response \u5bf9\u8c61\u6216\u5b57\u7b26\u4e32 admin_exit('Hello world'); admin_exit(response('Hello world', 500)); 3.\u589e\u52a0 Show\\Field::bool() \u548c Show\\Field::bold() \u65b9\u6cd5 \u5b57\u6bb5\u503c\u4e3a\u771f\u663e\u793a \u2713 , \u5426\u5219\u663e\u793a \u2717 #940 $show->field('...')->bool(); \u5b57\u6bb5\u503c\u52a0\u7c97\u663e\u793a $show->field('...')->bold(); // \u6307\u5b9a\u989c\u8272 $show->field('...')->bold(admin_color()->primary()); 4.\u589e\u52a0 Form\\Footer::view() \u65b9\u6cd5 \u901a\u8fc7 Form\\Footer::view() \u65b9\u6cd5\u53ef\u4ee5\u81ea\u5b9a\u4e49\u6570\u636e\u8868\u5355\u7684\u5e95\u90e8\u89c6\u56fe #957 $form->footer(function ($footer) { $footer->view('...', [...]); }); 5.\u589e\u52a0\u8868\u5355\u9ed8\u8ba4\u663e\u793a\u6307\u5b9a Tab \u529f\u80fd // \u9ed8\u8ba4\u663e\u793a\u6807\u9898\u4e3a \u6807\u98982 \u7684 Tab $form->getTab()->active('\u6807\u98982'); // \u4e5f\u53ef\u4ee5\u6307\u5b9a\u504f\u79fb\u91cf $form->getTab()->activeByIndex(1); $form->tab('\u6807\u98981', function ($form) { ... }); $form->tab('\u6807\u98982', function ($form) { ... }); 6.\u589e\u52a0\u8868\u5355 Form\\Row::horizontal() \u65b9\u6cd5 \u8bbe\u7f6e\u5e03\u5c40\u4e3a horizontal $form->row(function (Form\\Row $form) { $form->horizontal(); ... }); 7.\u8868\u683c Modal \u589e\u52a0\u81ea\u5b9a\u4e49\u56fe\u6807\u529f\u80fd $grid->column('...')->modal(function ($modal) { // \u81ea\u5b9a\u4e49\u56fe\u6807 $modal->icon('feather icon-x'); return ...; }); 8.\u589e\u52a0\u8def\u7531\u57df\u540d\u9650\u5236\u914d\u7f6e \u901a\u8fc7\u914d\u7f6e\u53c2\u6570 admin.route.domain \u53ef\u4ee5\u9650\u5236\u8def\u7531\u7684\u57df\u540d, \u6253\u5f00\u914d\u7f6e\u6587\u4ef6 config/admin.php 'route' => [ 'domain' => env('ADMIN_ROUTE_DOMAIN'), 'prefix' => env('ADMIN_ROUTE_PREFIX', 'admin'), 'namespace' => 'App\\\\Admin\\\\Controllers', 'middleware' => ['web', 'admin'], ], 9.\u589e\u52a0 admin.session \u4e2d\u95f4\u4ef6\u7684\u542f\u7528\u6216\u7981\u7528\u914d\u7f6e \u4ece 2.0 \u7684\u7248\u672c\u4e4b\u540e admin.session \u4e2d\u95f4\u4ef6\u4e0d\u518d\u9ed8\u8ba4\u542f\u7528\uff0c\u5982\u679c\u60a8\u7684\u5e94\u7528\u540c\u65f6\u6709\u524d\u53f0\u548c\u540e\u53f0\uff0c\u5219\u9700\u8981\u5f00\u542f admin.session \u4e2d\u95f4\u4ef6\uff0c\u5426\u5219\u4f1a\u9020\u6210\u524d\u540e\u53f0 session \u51b2\u7a81\u95ee\u9898\u3002 \u628a\u914d\u7f6e\u53c2\u6570 admin.route.enable_session_middleware \u7684\u503c\u8bbe\u7f6e\u4e3a true \u5373\u53ef\u5f00\u542f 'route' => [ 'domain' => env('ADMIN_ROUTE_DOMAIN'), 'prefix' => env('ADMIN_ROUTE_PREFIX', 'admin'), 'namespace' => 'App\\\\Admin\\\\Controllers', 'middleware' => ['web', 'admin'], // \u5f00\u542f admin.session \u4e2d\u95f4\u4ef6 'enable_session_middleware' => true, ], BUG\u4fee\u590d \u4fee\u590d\u6570\u636e\u8868\u683c Grid::header \u4ee5\u53ca Grid::footer \u56de\u8c03\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e2d Model \u88ab\u8f6c\u5316\u4e3a array \u683c\u5f0f\u95ee\u9898 \u4fee\u590d\u5207\u6362\u4e3b\u9898\u65f6\u6587\u4ef6\u4e0a\u4f20\u6309\u94ae\u989c\u8272\u65e0\u6cd5\u8ddf\u7740\u6539\u53d8\u95ee\u9898 #938 \u4fee\u590d Widgets\\Table \u6784\u9020\u65b9\u6cd5\u7b2c\u4e09\u4e2a\u53c2\u6570\u8bbe\u7f6e\u65e0\u6548\u95ee\u9898 \u4fee\u590d app/Admin/bootstrap.php \u4e2d\u4f7f\u7528 config(['admin.layout.color' => '...']) \u8986\u76d6\u4e3b\u9898\u8272\u53ef\u80fd\u65e0\u6548\u95ee\u9898 \u4fee\u590d\u6570\u636e\u8868\u683c\u8fc7\u6ee4\u5668\u91cd\u7f6e\u5173\u8054\u5173\u7cfb\u8868\u5355\u5b57\u6bb5\u65e0\u6548\u95ee\u9898 #949 \u4fee\u590d\u8868\u683c\u8fc7\u6ee4\u5668 group \u529f\u80fd\u663e\u793a\u5f02\u5e38\u95ee\u9898 #929 \u4fee\u590d\u5f53\u9875\u9762\u5b58\u5728\u591a\u4e2a selectTable \u8868\u5355\u65f6\u6240\u6709\u5f39\u7a97\u90fd\u53ea\u663e\u793a\u7b2c\u4e00\u4e2a\u8bbe\u7f6e\u7684 title \u95ee\u9898 #926 v2.0.15-beta \u53d1\u5e03\u65f6\u95f4 2021/1/3 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.15-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate \u529f\u80fd\u6539\u8fdb 1.\u5347\u7ea7select2\u5230v4.1.x-beta\u7248\u672c select \u7ec4\u4ef6\u5347\u7ea7\u81f3 v4.1.x-beta \uff0c\u4f7f tags \u8868\u5355\u4f53\u9a8c\u66f4\u597d\uff0c\u5e76\u652f\u6301\u4e86\u591a\u56fd\u8bed\u8a00\u7ffb\u8bd1\u3002 2.Widgets/Modal\u589e\u52a0\u5f39\u7a97\u5782\u76f4\u5c45\u4e2d\u4ee5\u53ca\u53ef\u6eda\u52a8\u529f\u80fd \u7528\u6cd5\u5982\u4e0b #901 $modal = Modal::make() ->xl() ->centered() // \u8bbe\u7f6e\u5f39\u7a97\u5782\u76f4\u5c45\u4e2d ->scrollable() // \u8bbe\u7f6e\u5f39\u7a97\u5185\u5bb9\u53ef\u6eda\u52a8 ->title(...) ->body(...); 3. Admin::requiredAssets \u652f\u6301\u4f20\u9012\u52a8\u6001\u53c2\u6570 use Dcat\\Admin\\Admin; // \u6ce8\u518c\u524d\u7aef\u7ec4\u4ef6\u522b\u540d // {lang} \u4e3a\u52a8\u6001\u53c2\u6570 Admin::asset()->alias('@test', [ 'js' => ['/vendor/test/js/{lang}.min.js'], ]); // {lang} \u4f1a\u88ab\u66ff\u6362\u4e3a zh_CN Admin::requireAssets('@test', ['lang' => 'zh_CN']); // \u4e5f\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528 Admin::requireAssets('@test?lang=zh_CN'); Bug\u4fee\u590d \u4fee\u590d\u8868\u5355 block \u5e03\u5c40\u65e0\u6cd5\u4fdd\u5b58\u6570\u636e\u95ee\u9898 #883 \u4fee\u590d hasMany \u8868\u5355\u4e0b\u4f7f\u7528 currency \u5931\u6548\u95ee\u9898 #886 \u4fee\u590d\u6570\u636e\u8868\u5355\u4fdd\u5b58\u540e\u81ea\u52a8\u8df3\u8f6c\u5230\u8be6\u60c5\u9875\u95ee\u9898 #893 \u4fee\u590d editor \u8868\u5355\u65e0\u6cd5\u6e05\u7a7a\u6570\u636e\u95ee\u9898 #895 \u4fee\u590d hasMany \u8868\u5355\u4e0b\u4f7f\u7528 tags \u7684 required \u9a8c\u8bc1\u5f02\u5e38\u95ee\u9898 #905 \u4fee\u590d\u591a\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u5220\u9664\u5355\u4e2a\u6587\u4ef6\u65f6\u4f1a\u5bfc\u81f4\u5168\u90e8\u6587\u4ef6\u88ab\u6e05\u7a7a\u95ee\u9898 #914 \u4fee\u590d\u8868\u683c\u5b57\u6bb5\u65e0\u6cd5\u4f7f\u7528\u6a21\u578b\u8bbf\u95ee\u5668\u95ee\u9898 v2.0.13-beta \u53d1\u5e03\u65f6\u95f4 2020/12/23 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.13-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate v2.0.14-beta \u53d1\u5e03\u65f6\u95f4 2020/12/24 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.14-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate \u529f\u80fd\u6539\u8fdb 1.\u4f18\u5316\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\u9519\u8bef\u4fe1\u606f\u63d0\u793a \u5728\u65e7\u7248\u672c\u4e2d\uff0c\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\u7684\u9519\u8bef\u63d0\u793a\u4fe1\u606f\u4e0d\u592a\u660e\u786e\uff0c\u5bfc\u81f4\u96be\u4ee5\u5b9a\u4e49\u9519\u8bef\u539f\u56e0\uff0c\u6240\u4ee5\u5728\u8fd9\u4e2a\u7248\u672c\u4e2d\u5bf9\u9519\u8bef\u63d0\u793a\u8fdb\u884c\u4e86\u4f18\u5316\uff0c\u4e00\u65e6\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\u4f1a\u663e\u793a\u5177\u4f53\u539f\u56e0\u3002 Bug\u4fee\u590d \u4fee\u590d\u8868\u683c\u5b57\u6bb5\u4e0e\u6a21\u578b casts \u5c5e\u6027\u4ea7\u751f\u51b2\u7a81\uff0c\u4ee5\u53ca display \u95ed\u5305\u4e2d\u4f7f\u7528\u5b57\u7b26\u4e32\u62fc\u63a5\u663e\u793a\u5f02\u5e38\u95ee\u9898 #876 \u4fee\u590d\u8868\u5355\u52a8\u6001\u663e\u793a\u529f\u80fd\u65e0\u6cd5\u4f7f\u7528\u95ee\u9898 #879 \u4fee\u590d\u8868\u5355\u4f7f\u7528 Block \u5e03\u5c40\u65f6\u65e0\u6cd5\u663e\u793a\u7f16\u8f91\u6570\u636e\u95ee\u9898 #877 v2.0.13-beta \u53d1\u5e03\u65f6\u95f4 2020/12/23 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.13-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate Bug\u4fee\u590d \u4fee\u590d\u8868\u683c\u5c55\u793a\u5173\u8054\u5173\u7cfb\u5b57\u6bb5\u5f53\u5173\u8054\u6570\u636e\u4e0d\u5b58\u5728\u65f6\u6709\u53ef\u80fd\u62a5\u9519\u95ee\u9898 #867 \u4fee\u590d\u5f53\u8868\u683c\u4f7f\u7528\u6570\u636e\u4ed3\u5e93\u8fd4\u56de\u6570\u7ec4\u6216\u975e\u6a21\u578b collection \u65f6 display \u65b9\u6cd5\u65e0\u6548\u95ee\u9898 #869 v2.0.12-beta \u53d1\u5e03\u65f6\u95f4 2020/12/22 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.12-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate \u7834\u574f\u6027\u53d8\u52a8 1.\u56fe\u7247/\u6587\u4ef6\u4e0a\u4f20\u8868\u5355 removable \u91cd\u547d\u540d\u4e3a removable $form->file('...')->removable(); \u529f\u80fd\u6539\u8fdb 1.\u652f\u6301PHP8.0 2.\u56fe\u7247/\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u652f\u6301\u76d1\u542cWebUploader\u4e8b\u4ef6 \u901a\u8fc7 on \u65b9\u6cd5\u53ef\u4ee5\u76d1\u542c WebUploader\u6587\u4ef6\u4e0a\u4f20\u76f8\u5173\u4e8b\u4ef6 $form->file('...') ->on('startUpload', <<<JS function () { console.log('\u6587\u4ef6\u5f00\u59cb\u4e0a\u4f20...', this); // \u4e0a\u4f20\u6587\u4ef6\u524d\u9644\u52a0\u81ea\u5b9a\u4e49\u53c2\u6570\u5230\u6587\u4ef6\u4e0a\u4f20\u63a5\u53e3 this.uploader.options.formData['custom_field'] = '...'; } JS ) ->on('uploadFinished', <<<JS function () { console.log('\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6bd5'); } JS ); // 3.\u76d1\u542c\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\u6216\u6587\u4ef6\u88ab\u5220\u9664\u65f6\u4ea7\u751f\u7684\u53d8\u52a8 \u901a\u8fc7\u4ee5\u4e0b\u65b9\u6cd5\u53ef\u4ee5\u76d1\u542c\u6587\u4ef6 \u4e0a\u4f20\u6210\u529f \u6216\u6587\u4ef6 \u88ab\u5220\u9664 \u65f6\u4ea7\u751f\u7684\u53d8\u52a8 $file = $form->file('...'); Admin::script( <<<JS $('{$file->getElementClassSelector()} .file-input').on('change', function () { console.log('\u6587\u4ef6\u53d1\u751f\u53d8\u52a8', this.value); }); JS ); 4.\u5141\u8bb8\u5728uploading\u4e8b\u4ef6\u4e2d\u62e6\u622a\u5e76\u54cd\u5e94\u9519\u8bef\u4fe1\u606f \u4ece\u8fd9\u4e2a\u7248\u672c\u5f00\u59cb\u652f\u6301\u5728\u8868\u5355\u7684 uploading \u4e8b\u4ef6\u4e2d\u62e6\u622a\u6587\u4ef6\u4e0a\u4f20\u5e76\u652f\u6301\u54cd\u5e94\u9519\u8bef\u4fe1\u606f\u5230\u524d\u7aef $form->uploading(function (Form $form) { return $form->response()->error('\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01'); }); 5.\u76d1\u542cselectTable\u9009\u4e2d\u503c\u53d8\u52a8 $selectTable = $form->selectTable('...')->from(...); Admin::script( <<<JS $('{$selectTable->getElementClassSelector()} input[type=\"hidden\"]').on('change', function () { console.log('\u9009\u4e2d\u503c\u53d1\u751f\u53d8\u5316', this.value); }); JS ); 6.\u8c03\u6574\u6811\u72b6\u8868\u683c\u65e0\u6570\u636e\u8fd4\u56de\uff0c\u53d6\u6d88\u8fd4\u56de404\u72b6\u6001\u7801 7.\u8c03\u6574\u8868\u683cdisplayer\u7c7b\u7684row\u5c5e\u6027\u503c\u7c7b\u578b\u4e3amodel 8.\u6697\u9ed1\u6a21\u5f0f\u7ec6\u8282\u4f18\u5316 $grid->column(...)->modal(function () { // $this \u6307\u5411 model \u5bf9\u8c61 dd($this); }); $grid->actions(function () { // $this \u6307\u5411 model \u5bf9\u8c61 dd($this); }); 9.\u4f18\u5316\u5361\u7247\u4e2d\u56fe\u8868\u663e\u793a\u6ea2\u51fa\u7684\u95ee\u9898 #822 10.widget\u7ec4\u4ef6\u589e\u52a0when\u65b9\u6cd5 $modal = Dcat\\Admin\\Widgets\\Modal::make() ->when($condition, function ($modal) { // \u5f53 $condition \u7684\u503c\u4e3a \u771f \u65f6\uff0c\u4f1a\u6267\u884c\u95ed\u5305\u91cc\u9762\u7684\u903b\u8f91 $modal->xl(); }) ->body(...) ->render(); Bug\u4fee\u590d \u4fee\u590d Grid\\Filter::group \u65e0\u6cd5\u4fdd\u6301\u9009\u62e9\u72b6\u6001\u95ee\u9898 #739 \u4fee\u590d Form::hasMany \u8868\u5355\u6761\u76ee\u5220\u9664\u540e\u4ecd\u7136\u9a8c\u8bc1 required \u95ee\u9898 #795 \u4fee\u590d \u5730\u56fe \u8868\u5355\u65e0\u6cd5\u4f7f\u7528\u95ee\u9898 \u4fee\u590d\u5f53\u751f\u6210 composer \u7c7b\u6620\u5c04\u6587\u4ef6\u4e14\u7c7b\u6587\u4ef6\u88ab\u5220\u9664\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528 guessClassFileName \u4f1a\u62a5\u9519\u95ee\u9898 \u4fee\u590d\u6570\u636e\u5bfc\u51fa\u4f7f\u7528 Fetched \u4e8b\u4ef6\u62a5\u9519\u95ee\u9898 #815 \u4fee\u590d\u8bbe\u7f6e Grid name \u4e4b\u540e\u65e0\u6cd5\u91cd\u7f6e filter \u95ee\u9898 \u4fee\u590d select2 \u65e0\u6cd5\u81ea\u52a8\u4f7f\u7528\u4e2d\u6587\u8bed\u8a00\u5305\u95ee\u9898 #839 \u4fee\u590d\u8868\u5355\u52fe\u9009 \u7ee7\u7eed\u521b\u5efa \u4ee5\u53ca \u7ee7\u7eed\u7f16\u8f91 \u8df3\u8f6c\u8def\u7531\u9519\u8bef\u95ee\u9898 #814 \u4fee\u590d\u4e00\u5bf9\u4e00\u5173\u8054\u5173\u7cfb range \u8868\u5355\u8bbe\u7f6e rules \u65e0\u6548\u95ee\u9898 \u4fee\u590d\u5f53\u542f\u7528 fixColumns \u65f6\uff0c\u65f6\u95f4\u7b5b\u9009\u4e0b\u62c9\u4f1a\u88ab\u906e\u6321\u95ee\u9898 #833 \u4fee\u590d\u83dc\u5355\u4f7f\u7528 fa \u56fe\u6807\u65e0\u6cd5\u81ea\u52a8\u5bf9\u9f50\u95ee\u9898 #758 \u4fee\u590d\u8868\u5355 row \u5e03\u5c40\u4e0b\u4f7f\u7528 hasMany \u63d0\u4ea4\u62a5\u9519\u95ee\u9898 #801 \u4fee\u590d\u8868\u5355 hasMany \u65e0\u6cd5\u4f7f\u7528 select \u8054\u52a8\u95ee\u9898 #769 v2.0.11-beta \u53d1\u5e03\u65f6\u95f4 2020/12/06 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.11-beta\" php artisan admin:publish --assets --force php artisan admin:publish --migrations --force # \u8868\u7ed3\u6784\u6709\u53d8\u52a8 php artisan migrate Bug\u4fee\u590d \u4fee\u590d\u4f7f\u7528 pjax \u91cd\u590d\u5237\u65b0\u9875\u9762\u53ef\u80fd\u5bfc\u81f4 Dcat.init \u76d1\u542c\u5931\u6548\u95ee\u9898 \u4fee\u590d admin:export-seed --users \u4f1a\u751f\u6210\u591a\u4f59\u4ee3\u7801\u95ee\u9898 \u4fee\u590d\u8868\u5355\u7f16\u8f91\u9875\u9762\u4fdd\u5b58\u540e\u8df3\u8f6c\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u8868\u5355\u9875\u9762\u9009\u62e9\u7ee7\u7eed\u7f16\u8f91\u4f1a\u5bfc\u81f4 hasMany \u91cd\u590d\u6dfb\u52a0\u6570\u636e\u95ee\u9898 \u4fee\u590d select \u8868\u5355\u8054\u52a8\u540e\u539f select2 config \u4e22\u5931\u95ee\u9898 #779 \u4fee\u590d map \u8868\u5355\u52a0\u8f7d\u5f02\u5e38\u95ee\u9898 #764 \u4fee\u590d\u6279\u91cf\u5220\u9664\u529f\u80fd\u5220\u9664\u6570\u636e\u540e\u65e0\u6cd5\u81ea\u52a8\u5237\u65b0\u9875\u9762\u95ee\u9898 \u4fee\u590d hasMany \u8868\u5355\u7f16\u8f91\u9875\u9762\u65e0\u6cd5\u6b63\u5e38\u5c55\u793a row \u4ee5\u53ca column \u5e03\u5c40\u95ee\u9898 \u4fee\u590d Dcat.init \u76d1\u542c\u4f1a\u88ab\u5f02\u6b65\u5f39\u7a97\u89e3\u7ed1\u95ee\u9898 \u4fee\u590d\u8868\u683c\u5de5\u5177\u680f\u4e0b\u62c9\u83dc\u5355\u4f1a\u88ab\u56fa\u5b9a\u5217\u8868\u683c\u906e\u6321\u95ee\u9898 #728 \u4fee\u590d\u7981\u7528 showColumnSelector \u65f6\u4ecd\u7136\u4f1a\u8bfb\u53d6\u7f13\u5b58\u5185\u5bb9\u95ee\u9898 \u529f\u80fd\u6539\u8fdb 1.Form::divider \u589e\u52a0 title \u53c2\u6570 \u589e\u52a0 title \u53c2\u6570\u7528\u4e8e\u5728\u5206\u5272\u7ebf\u4e2d\u95f4\u663e\u793a\u6807\u9898\u529f\u80fd\uff0c\u7528\u6cd5 $form->divider('\u6807\u9898'); 2.Grid::footer\u4ee5\u53caGrid::header\u8c03\u6574\u4e3a\u652f\u6301\u591a\u6b21\u56de\u8c03 $grid->header(...); $grid->header(...); $grid->header(...); 3.\u4f18\u5316\u8868\u683c\u89c4\u683c\u7b5b\u9009\u5668\u4ee5\u53caselect\u8868\u5355\u6837\u5f0f v2.0.10-beta \u53d1\u5e03\u65f6\u95f4 2020/11/29 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.10-beta\" php artisan admin:publish --assets --force php artisan admin:publish --migrations --force # \u8868\u7ed3\u6784\u6709\u53d8\u52a8 php artisan migrate \u529f\u80fd\u6539\u8fdb 1.\u589e\u52a0\u8868\u5355\u53f3\u4e0a\u89d2\u63d0\u793a\u7a97\u5c55\u793a\u5b57\u6bb5\u9a8c\u8bc1\u9519\u8bef\u4fe1\u606f \u6b64\u529f\u80fd\u9ed8\u8ba4\u5f00\u542f\uff0c\u53ef\u4ee5\u901a\u8fc7 validationErrorToastr \u65b9\u6cd5\u7981\u7528 $form->validationErrorToastr(false); 2.\u589e\u52a0 Tree::maxDepth \u65b9\u6cd5\u7528\u4e8e\u9650\u5236\u6a21\u578b\u6811\u6700\u5927\u5c42\u7ea7 $tree->maxDepth(5); 3.\u4f18\u5316\u5bfc\u51fa\u529f\u80fd\uff0c\u652f\u6301\u6807\u9898\u8bbe\u7f6e\u5173\u8054\u5173\u7cfb\u5b57\u6bb5\u4ee5\u53ca\u81ea\u52a8\u8bfb\u53d6grid\u8868\u683c\u5217\u7684\u6807\u9898 \u5728\u5f53\u524d\u7248\u672c\u4e2d\u5bfc\u51fa\u5217\u9ed8\u8ba4\u4e0e column \u5217\u4e00\u81f4\uff0c\u4e0d\u518d\u9700\u8981\u624b\u52a8\u8bbe\u7f6e\u5bfc\u51fa\u7684\u5217\u540d\u79f0\u4ee5\u53ca\u7ffb\u8bd1\uff0c\u5e76\u4e14\u652f\u6301\u5173\u8054\u5173\u7cfb\u5b57\u6bb5 $grid->column('id'); $grid->column('name'); ... // \u9ed8\u8ba4\u4e0e\u4e0a\u9762\u7684\u5217\u76f8\u540c $grid->export(); 4.\u5de5\u5177\u8868\u5355\u589e\u52a0resetButton\u4e0esubmitButton\u65b9\u6cd5 // \u7981\u7528\u91cd\u7f6e\u548c\u63d0\u4ea4\u6309\u94ae $form->resetButton(false); $form->submitButton(false); 5.\u8868\u5355\u5b57\u6bb5\u7684 disable \u4ee5\u53ca readOnly \u65b9\u6cd5\u589e\u52a0\u53c2\u6570\u63a7\u5236\u662f\u5426\u542f\u7528 // \u4f20 false \u5219\u4e0d\u542f\u7528 $form->text(...)->disable(false); 6.\u6587\u4ef6\u4e0a\u4f20\u589e\u52a0 withDeleteData \u5141\u8bb8\u7528\u6237\u8bbe\u7f6e\u8bf7\u6c42\u53c2\u6570\uff0c\u5e76\u5728\u4e0a\u4f20\u63a5\u53e3\u4ee5\u53ca\u5220\u9664\u63a5\u53e3\u4e2d\u589e\u52a0\u4e3b\u952e\u5b57\u6bb5 \u901a\u8fc7 withDeleteData \u65b9\u6cd5\u53ef\u4ee5\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570\u5230\u6587\u4ef6\u5220\u9664\u63a5\u53e3 $form->file(...)->withDeleteData(['key' => 'value]); 7.\u589e\u52a0 embeds \u8868\u5355\u7981\u6b62\u663e\u793a\u6807\u9898\u529f\u80fd` \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f20 false \u5219\u4e0d\u663e\u793a\u6807\u9898 $form->embeds('field', false, function ($form) { ... }); 8.\u91cd\u65b0\u7f16\u5199\u90e8\u5206\u5355\u5143\u6d4b\u8bd5\u7528\u4f8b\uff0c\u4ee5\u652f\u63012.x\u7528\u6cd5 Bug\u4fee\u590d \u4fee\u590d\u7ba1\u7406\u5458\u8be6\u60c5\u9875\u65e0\u6cd5\u9009\u4e2d\u5df2\u6709\u6743\u9650\u95ee\u9898 \u4fee\u590d admin:export-seed \u547d\u4ee4\u5bfc\u51fa seeder \u7c7b\u540d\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u8868\u5355\u5220\u9664\u8df3\u8f6c\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u8868\u5355\u7ee7\u7eed\u7f16\u8f91\u8df3\u8f6c\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u7236\u8868\u4e0e hasMany \u5b58\u5728\u540c\u6837\u5b57\u6bb5\u540d\u79f0\u65f6\u65e0\u6cd5\u4fdd\u5b58\u7236\u8868\u5b57\u6bb5\u95ee\u9898 \u4fee\u590d\u6697\u9ed1\u6a21\u5f0f\u4e0b\u9009\u4e2d\u5b50\u83dc\u5355\u6837\u5f0f\u5f02\u5e38\u95ee\u9898 #712 \u4fee\u590d\u8868\u5355 block \u5e03\u5c40\u4e0b\u8868\u5355\u52a8\u6001\u663e\u793a\u529f\u80fd\u65e0\u6548\u95ee\u9898 #723 \u4f18\u5316 selectOptions \u5c42\u7ea7\u7ed3\u6784\u663e\u793a\uff0c\u89e3\u51b3\u524d\u7f00\u5448\u73b0\u968f\u5c42\u7ea7\u6df1\u5ea6\u6307\u6570\u589e\u52a0\u95ee\u9898 #618 \u4fee\u590d admin_view \u6ca1\u6709\u8fd4\u56de\u6570\u636e\u95ee\u9898 \u4fee\u590d select \u8868\u5355 ajax \u4ee5\u53ca load \u8bbe\u7f6e\u7684\u94fe\u63a5\u4e0d\u80fd\u5e26\u53c2\u6570\u95ee\u9898 #745 \u4fee\u590d\u8868\u683c\u884c\u64cd\u4f5c action \u7684 handle \u65b9\u6cd5\u53ea\u80fd\u83b7\u53d6\u6700\u540e\u4e00\u884c\u6570\u636e\u7684 id \u95ee\u9898 \u4fee\u590d list \u8868\u5355\u7f16\u8f91\u9875\u65e0\u6cd5\u5220\u9664\u5df2\u6709\u6570\u636e\u95ee\u9898 #759 \u4fee\u590d embeds \u8303\u56f4\u8868\u5355 name \u5c5e\u6027\u9519\u8bef\u95ee\u9898 v2.0.9-beta \u53d1\u5e03\u65f6\u95f4 2020/11/18 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.9-beta\" php artisan admin:publish --assets --force php artisan admin:publish --migrations --force # \u8868\u7ed3\u6784\u6709\u53d8\u52a8 php artisan migrate Bug\u4fee\u590d \u4fee\u590d\u8868\u683c filter::select \u8868\u5355\u8fdc\u7a0b\u52a0\u8f7d /load/ajax \u7b49\u529f\u80fd\u5931\u6548\u95ee\u9898 \u4fee\u590d\u524d\u7aef moment-timezone \u7ec4\u4ef6\u8def\u5f84\u52a0\u8f7d\u9519\u8bef\u95ee\u9898 #701 \u4fee\u590d Form::tree \u65e0\u6cd5\u4fdd\u5b58\u6570\u636e\u5bfc\u81f4\u7684\u65e0\u6cd5\u8bbe\u7f6e\u6743\u9650\u95ee\u9898 \u4fee\u590d\u5f53 hasMany \u8868\u5355\u4e0e\u7236\u8868\u6709\u540c\u6837\u5b57\u6bb5\u540d\u79f0\u65f6\u586b\u5145\u503c\u9ed8\u8ba4\u503c\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u8868\u5355 tab \u5e03\u5c40\u5d4c\u5957 row \u5e03\u5c40\u65f6\u65b0\u589e\u9875\u9762\u62a5\u9519\u95ee\u9898 #648 \u4fee\u590d\u5f53\u8868\u5355\u5b58\u5728 range \u7c7b\u578b\u5b57\u6bb5\u65f6\u63d0\u4ea4\u540e\u65e0\u6cd5\u83b7\u53d6 range \u4e0b\u9762\u6240\u6709\u8868\u5355\u503c\u95ee\u9898 \u4fee\u590d Form::select \u4f7f\u7528\u8868\u5355\u8054\u52a8\u529f\u80fd\u65f6select2\u7ec4\u4ef6\u65e0\u6548\u95ee\u9898 v2.0.8-beta \u53d1\u5e03\u65f6\u95f4 2020/11/16 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.8-beta\" php artisan admin:publish --assets --force php artisan admin:publish --migrations --force # \u8868\u7ed3\u6784\u6709\u53d8\u52a8 php artisan migrate \u672c\u6b21\u7248\u672c\u4f5c\u4e3a 2.0.7-beta \u7684\u8865\u5145\u7248\u672c\uff0c\u4e3b\u8981\u4fee\u590d\u4ee5\u4e0b\u51e0\u4e2a\u95ee\u9898 \u4fee\u590d\u7ba1\u7406\u5458\u9875\u9762\u65e0\u6cd5\u67e5\u770b\u6743\u9650\u95ee\u9898 \u4fee\u590d\u8868\u5355block\u5e03\u5c40\u5931\u6548\u95ee\u9898 \u4fee\u590d\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u6e32\u521d\u59cb\u5316\u529f\u80fd\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u90e8\u5206\u8868\u5355\u5b57\u6bb5\u4e0d\u652f\u6301\u5355\u4e2a\u9875\u9762\u540c\u65f6\u6e32\u67d3\u591a\u4e2a\u7684\u95ee\u9898 v2.0.7-beta \u53d1\u5e03\u65f6\u95f4 2020/11/15 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.7-beta\" php artisan admin:publish --assets --force php artisan admin:publish --migrations --force # \u8868\u7ed3\u6784\u6709\u53d8\u52a8 php artisan migrate \u529f\u80fd\u6539\u8fdb 1.\u5f15\u5165 jquery.initialize \u7ec4\u4ef6\uff0c\u7528\u4e8e\u76d1\u542c\u52a8\u6001\u751f\u6210\u7684\u9875\u9762\u5143\u7d20\u5e76\u8bbe\u7f6e\u4e00\u4e2a\u56de\u8c03\uff0c\u4e0b\u9762\u6765\u4e3e\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u6765\u6f14\u793a\u7528\u6cd5\uff1a \u5728\u65e7\u7248\u672c\u4e2d\uff0c\u5047\u5982\u4e00\u4e2a\u5143\u7d20\u662f JS \u52a8\u6001\u751f\u6210\u7684\uff0c\u5982\u679c\u6211\u4eec\u9700\u8981\u5bf9\u8fd9\u4e2a\u5143\u7d20\u7ed1\u5b9a\u4e00\u4e2a\u70b9\u51fb\u4e8b\u4ef6\u7684\u8bdd\uff0c\u90a3\u4e48\u6211\u4eec\u901a\u5e38\u9700\u8981\u8fd9\u4e48\u505a <div class=\"selector\">test</div> <script> Dcat.ready(function () { // \u9700\u8981\u5148 off \u518d on \u5426\u5219\u9875\u9762\u5237\u65b0\u540e\u4f1a\u9020\u6210\u91cd\u590d\u7ed1\u5b9a\u95ee\u9898 $(document).off('click', '.selector').on('click', '.selector', function () { ... }) }); </script> \u4e0a\u9762\u8fd9\u79cd\u505a\u6cd5\u4e00\u6765\u6bd4\u8f83\u9ebb\u70e6\uff0c\u9700\u8981\u5148 off \u518d on \uff1b\u4e8c\u6765\u65e0\u6cd5\u5bf9\u52a8\u6001\u751f\u6210\u7684\u5143\u7d20\u505a\u4e00\u4e9b\u7279\u6b8a\u5904\u7406\uff0c\u4f8b\u5982\u4f60\u60f3\u5728 .selector \u751f\u6210\u540e\u6539\u53d8\u80cc\u666f\u989c\u8272\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u5c31\u6ca1\u529e\u6cd5\u505a\u5230\u3002 \u5728\u8fd9\u4e2a\u7248\u672c\u4e2d\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 Dcat.init \u65b9\u6cd5\u6765\u76d1\u542c\u5143\u7d20\u52a8\u6001\u751f\u6210\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u89e3\u51b3\u4e0a\u9762\u4e24\u4e2a\u95ee\u9898 <div class=\"selector\">test</div> <script> Dcat.ready(function () { // $this \u662f\u5f53\u524d\u5143\u7d20\u7684jquery dom\u5bf9\u8c61 // id \u662f\u5f53\u524d\u5143\u7d20\u7684id\u5c5e\u6027\uff0c\u5982\u679c\u5f53\u524d\u5143\u7d20\u6ca1\u6709id\u5219\u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2a\u968f\u673aid Dcat.init('.selector', function ($this, id) { // \u4fee\u6539\u5143\u7d20\u7684\u80cc\u666f\u8272 $this.css({background: \"#fff\"}); // \u8fd9\u91cc\u4e0d\u9700\u8981 off \u518d\u91cd\u65b0 on\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u533f\u540d\u51fd\u6570\u53ea\u4f1a\u6267\u884c\u4e00\u6b21 $this.on('click', function () { ... }); }); }); </script> \u5f97\u76ca\u4e8e\u8fd9\u4e2a jquery.initialize \u7ec4\u4ef6\u7684\u5f15\u5165\uff0c\u5728\u5f53\u524d\u8fd9\u4e2a\u7248\u672c\u4e2d\u6211\u4eec\u5bf9\u8868\u5355\u7ec4\u4ef6\u7684\u524d\u7aef\u4ee3\u7801\u4e5f\u8fdb\u884c\u4e86\u4f18\u5316\uff0c\u4f7f\u5176\u66f4\u5bb9\u6613\u652f\u6301 HasMany \u8fd9\u79cd\u52a8\u6001\u751f\u6210\u7684\u8868\u5355\u7c7b\u578b\uff0c\u5927\u5927\u964d\u4f4e\u4e86\u4ee3\u7801\u7684\u590d\u6742\u6027\u3002 2.Form::hasMany\u4ee5\u53caForm::array\u8868\u5355\u652f\u6301column\u548crow\u5e03\u5c40 \u5982\u679c\u5b57\u6bb5\u6bd4\u8f83\u591a\uff0c\u53ef\u4ee5\u7528 column \u548c row \u5e03\u5c40\u4ee5\u8282\u7701\u7a7a\u95f4 $form->array('field', function (NestedForm $form) { $form->column(6, function (NestedForm $form) { $form->text('...'); ... }); $form->column(6, function (NestedForm $form) { ... }); }); 3.\u914d\u7f6e\u8fc7admin.auth.except\u53c2\u6570\u7684\u8def\u7531\u4e0d\u9700\u8981\u9a8c\u8bc1\u6743\u9650 #673 4.Form\u3001Grid\u4ee5\u53caShow\u5b57\u6bb5\u7c7b\u589e\u52a0when\u65b9\u6cd5 \u7528\u6cd5\u793a\u4f8b\uff0c\u7c7b\u4f3c Laravel QueryBuilder \u7684 when \u65b9\u6cd5 \u5728\u8868\u683c\u4e2d // \u5f53\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u503c\u4e3a \u771f \u65f6\u624d\u4f1a\u6267\u884c\u95ed\u5305\u7684\u4ee3\u7801 $grid->column('title')->when(true, function (Grid\\Column $column, $value) { $column->label(); }); \u8868\u5355 // \u5f53\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u503c\u4e3a \u771f \u65f6\u624d\u4f1a\u6267\u884c\u95ed\u5305\u7684\u4ee3\u7801 $form->text('email')->when(true, function (Form\\Field\\Text $text, $value) { $text->type('email'); }); 5.\u7ba1\u7406\u5458\u6a21\u578b\u589e\u52a0canSeeMenu\u65b9\u6cd5\u63a7\u5236\u662f\u5426\u53ef\u89c1\u83dc\u5355 <?php namespace App\\Models; use Dcat\\Admin\\Models\\Administrator as Model; class Administrator extends Model { /** * \u63a7\u5236\u83dc\u5355\u662f\u5426\u53ef\u89c1\uff0c\u9ed8\u8ba4\u8fd4\u56detrue * * @param array|\\Illuminate\\Database\\Eloquent\\Model $menu \u83dc\u5355\u8282\u70b9 * @return bool */ public function canSeeMenu($menu) { return true; } } 6.\u589e\u52a0 admin_script\u3001admin_style\u3001admin_js\u3001admin_css\u4ee5\u53caadmin_require_assets\u51fd\u6570 // \u76f8\u5f53\u4e8e Admin::script admin_script('console.log(xxx)'); // \u76f8\u5f53\u4e8e Admin::style admin_style('.my-class {color: red}'); // \u76f8\u5f53\u4e8e Admin::js() admin_js(['@admin/xxx.js']); // \u76f8\u5f53\u4e8e Admin::css() admin_css(['@admin/xxx.css']); // \u76f8\u5f53\u4e8e Admin::requireAssets() admin_require_assets(['@select2']); 7.\u7b80\u5316\u52a8\u4f5c(Action)\u7684 JS \u4ee3\u7801\u903b\u8f91\uff0c\u53bb\u9664\u8bb0\u4f4f selector \u529f\u80fd BUG\u4fee\u590d \u4fee\u590d\u8868\u683c orderable \u529f\u80fd\u5f02\u5e38\u95ee\u9898 #674 \u4fee\u590d JsonResponse methodIf \u7528\u6cd5\u62a5\u9519\u95ee\u9898 \u4fee\u590d\u8868\u683c\u3001\u8868\u5355\u4ee5\u53ca\u6570\u636e\u8be6\u60c5\u6307\u5b9a label #684 \u4fee\u590d\u8868\u683c Grid::rows \u56de\u8c03\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u95ee\u9898 \u4fee\u590dwidget\u6dfb\u52a0 JS \u4ee3\u7801\u5f02\u5e38\u5bfc\u81f4\u90e8\u5206\u7c7b\u578b\u7684\u7edf\u8ba1\u5361\u7247\u5f02\u6b65\u52a0\u8f7d\u529f\u5931\u6548\u95ee\u9898 \u4fee\u590d\u8868\u683c\u884c\u64cd\u4f5c getKey \u65b9\u6cd5\u5f02\u5e38\u95ee\u9898 #691 \u4fee\u590d\u5f53\u9875\u9762\u5b58\u5728\u591a\u4e2a select \u8868\u5355\u65f6\u65e0\u6cd5\u4f7f\u7528\u8054\u52a8\u529f\u80fd\u95ee\u9898 \u4fee\u590d\u8868\u683c\u5220\u9664\u6570\u636e\u540e\u65e0\u6cd5\u81ea\u52a8\u5237\u65b0\u9875\u9762\u95ee\u9898 v2.0.6-beta \u53d1\u5e03\u65f6\u95f4 2020/11/7 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.6-beta\" php artisan admin:publish --assets --force php artisan admin:publish --migrations --force # \u8868\u7ed3\u6784\u6709\u53d8\u52a8 php artisan migrate \u7834\u574f\u6027\u53d8\u52a8 1. Form::tags \u8868\u5355\u9ed8\u8ba4\u4fdd\u5b58\u4e3a array \u7c7b\u578b // \u9700\u8981\u81ea\u5df1\u8f6c\u6362\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u7684\u683c\u5f0f $form->tags('tag')->saveAsJson(); 2.\u9ed8\u8ba4\u7981\u7528 session \u4e2d\u95f4\u4ef6 3. Form\\Tree::disableFilterParents \u91cd\u547d\u540d\u4e3a Form\\Tree::exceptParentNode $form->tree('cate')->exceptParentNode(false); 4.\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u90e8\u5206\u65b9\u6cd5\u540d\u79f0\u8c03\u6574 // \u542f\u7528\u5206\u5757\u4e0a\u4f20\u529f\u80fd disableChunked \u66f4\u6539\u4e3a chunked $form->image('avatar')->chunked(true); // \u542f\u7528\u81ea\u52a8\u4fdd\u5b58\u5b57\u6bb5\u503c\u529f\u80fd disableAutoSave \u66f4\u6539\u4e3a autoSave $form->image('avatar')->autoSave(false); // \u542f\u7528\u5220\u9664\u6587\u4ef6\u529f\u80fd disableRemove \u66f4\u6539\u4e3a removable $form->image('avatar')->removable(false); \u529f\u80fd\u6539\u8fdb 1.\u4ee3\u7801\u751f\u6210\u5668\u589e\u52a0\u5b57\u6bb5\u62d6\u52a8\u6392\u5e8f\u529f\u80fd\uff0c\u6b64\u65b9\u6cd5\u7531\u5c0f\u4f19\u4f34 @codingyu \u8d21\u732e 2.\u83dc\u5355\u8868\u589e\u52a0 show \u548c extension \u5b57\u6bb5\uff0c show \u5b57\u6bb5\u7528\u4e8e\u63a7\u5236\u662f\u5426\u663e\u793a\u83dc\u5355\uff1b extension \u5b57\u6bb5\u7528\u4e8e\u6807\u8bb0\u662f\u5426\u4e3a\u6269\u5c55\u83dc\u5355 3. Form::table \u3001 Form::array \u3001 Form::embeds \u8868\u5355\u652f\u6301\u5173\u8054\u5173\u7cfb\u5b57\u6bb5 $form->table('profile.options', function ($form) { ... }); 4.\u589e\u52a0 Form::checkbox \u4ee5\u53ca Form::radio \u8868\u5355\u9009\u9879\u7ad6\u6392\u663e\u793a\u529f\u80fd $form->checkbox('xxx')->inline(false)->options([...]); 5.\u914d\u7f6e\u6587\u4ef6\u8df3\u8fc7\u767b\u5f55\u4ee5\u53ca\u6743\u9650\u9a8c\u8bc1\u529f\u80fd\u5141\u8bb8\u914d\u7f6e\u8def\u7531\u522b\u540d 'auth' => [ 'except' => [ ... 'user.login', ], ], 6. Form\\Row \u589e\u52a0 getKey \u4ee5\u53ca model \u65b9\u6cd5 7.\u4f18\u5316\u8868\u683c\u8fc7\u6ee4\u5668select\u8868\u5355\u9009\u4e2d\u6548\u679c\uff0c\u9ed8\u8ba4\u4e0d\u9009\u4e2d 8.\u8868\u5355tab\u5e03\u5c40\u4f18\u5316 BUG\u4fee\u590d 1. \u4fee\u590d Form::checkbox \u9009\u4e2d/\u53d6\u6d88\u9009\u4e2d\u5168\u90e8\u9009\u9879\u65f6\u52a8\u6001\u663e\u793a\u8868\u5355\u529f\u80fd\u65e0\u6548\u95ee\u9898 2. \u4fee\u590d\u53f0\u6e7e\u7e41\u4f53\u65e0\u6cd5\u7ffb\u8bd1\u9ed8\u8ba4\u83dc\u5355\u6807\u9898\u95ee\u9898 3. \u4fee\u590d NestedForm \u4e2d\u7684 number \u5b57\u6bb5\u8f93\u5165\u503c\u4e3a 0 \u65f6\u4f1a\u88ab\u8fc7\u6ee4\u95ee\u9898 #634 4. \u4fee\u590d\u6a21\u578b\u6811 RowAction \u5f02\u6b65\u5904\u7406\u63a5\u53e3\u65f6\u83b7\u53d6\u4e3b\u952e\u62a5\u9519\u95ee\u9898 5. \u4fee\u590d\u8868\u683c\u8fc7\u6ee4\u5668\u65e0\u6cd5\u91cd\u7f6e\u5173\u8054\u8868\u5b57\u6bb5\u641c\u7d22\u503c\u95ee\u9898 #650 6. \u4fee\u590d\u8868\u683c\u8fc7\u6ee4\u5668multipleSelect\u8868\u5355\u5f02\u5e38\u95ee\u9898 v2.0.5-beta \u53d1\u5e03\u65f6\u95f4 2020/10/29 BUG\u4fee\u590d 1. \u4fee\u590d\u8868\u683c\u641c\u7d22\u591a\u4e2a\u5173\u8054\u8868\u5b57\u6bb5sql\u9519\u8bef\u95ee\u9898 I232T7 2. \u4fee\u590d Form::datetimeRange \u8868\u5355\u65e0\u6cd5\u9009\u62e9\u65e5\u5fd7\u95ee\u9898 3. \u4fee\u590d\u65e0\u6cd5\u6dfb\u52a0\u591a\u4e2a Form::table \u8868\u5355\u5b57\u6bb5\u95ee\u9898 #627 4. \u4fee\u590d\u8868\u683c\u8fc7\u6ee4\u5668 MultipleSelectTable \u4e2d\u62a5\u9519\u95ee\u9898 5. \u4fee\u590d\u8868\u683c\u89c4\u683c\u7b5b\u9009\u5668\u6837\u5f0f\u5f02\u5e38\u95ee\u9898 v2.0.4-beta \u53d1\u5e03\u65f6\u95f4 2020/10/27 BUG\u4fee\u590d 1. \u4fee\u590d admin_javascript_json \u51fd\u6570\u4f1a\u81ea\u52a8\u7a7a\u6ee4\u6570\u7ec4\u7a7a\u503c\u95ee\u9898 2. \u4fee\u590d\u6570\u636e\u8868\u5355\u4f7f\u7528 tab \u5e03\u5c40\u62a5\u9519\u95ee\u9898 #620 3. \u4fee\u590d\u6269\u5c55\u672c\u5730\u5b89\u88c5\u751f\u6210\u4e34\u65f6\u76ee\u5f55\u6743\u9650\u5f02\u5e38\u95ee\u9898 #625 4. \u4fee\u590d\u8868\u5355\u4f7f\u7528 html \u65b9\u6cd5\u8bbe\u7f6e\u89c6\u56fe\u5b58\u5728 script \u6807\u7b7e\u65f6\u62a5\u9519\u95ee\u9898 #624 5. \u4fee\u590d\u6570\u636e\u8be6\u60c5\u4f7f\u7528\u5173\u8054\u5173\u7cfb\uff08\u4e00\u5bf9\u591a\uff09\u663e\u793a\u62a5\u9519\u95ee\u9898 #623 6. \u4fee\u590d dropdown \u4e0b\u62c9\u83dc\u5355\u8ba1\u7b97\u663e\u793a\u4f4d\u7f6e\u5f02\u5e38\u95ee\u9898 #I22S2N v2.0.3-beta \u53d1\u5e03\u65f6\u95f4 2020/10/27 BUG\u4fee\u590d 1. \u4fee\u590d\u8868\u5355\u884c\u5185\u7f16\u8f91\u663e\u793a\u8fd4\u56de\u4fe1\u606f\u5f02\u5e38\u95ee\u9898 2. \u4fee\u590d admin.auth.remember \u8bbe\u7f6e\u65e0\u6548\u95ee\u9898 #613 3. \u4fee\u590d editor \u8868\u5355\u4e2d\u6587\u7ffb\u8bd1\u5f02\u5e38\u95ee\u9898 #611 4. \u4fee\u590d Filter::scope \u9009\u62e9\u7b5b\u9009\u9879\u4e0d\u4f1a\u8fc7\u6ee4\u5206\u9875\u53c2\u6570\u95ee\u9898 5. \u4fee\u590d\u8868\u5355\u4e8b\u4ef6\u62e6\u622a\u76f8\u5173\u95ee\u9898 6. \u4fee\u590d\u6811\u5f62\u8868\u5355\u4f7f\u7528\u5f02\u5e38\u95ee\u9898 #619 \u529f\u80fd\u6539\u8fdb 1. \u589e\u52a0\u8df3\u8fc7\u6743\u9650\u548c\u767b\u5f55\u9a8c\u8bc1\u7684\u914d\u7f6e\u65b9\u5f0f 2. \u6269\u5c55service provider\u589e\u52a0middleware\u548c\u8def\u7531\u6392\u67e5\u6ce8\u518c\u529f\u80fd 3. \u6279\u91cf\u64cd\u4f5cchange\u4e8b\u4ef6\u76d1\u542c\u4f18\u5316 4. \u589e\u52a0 RowSelector \u5065\u58ee\u6027, \u4ee5\u907f\u514d\u9047\u5230 json \u6570\u7ec4\u7c7b\u578b\u5b57\u6bb5\u65e0\u6cd5\u5904\u7406\u800c\u62a5\u9519 #609 v2.0.2-beta \u53d1\u5e03\u65f6\u95f4 2020/10/21 BUG\u4fee\u590d 1. \u4fee\u590d\u4ee3\u7801\u751f\u6210\u5668\u751f\u6210\u63a7\u5236\u5668\u6587\u4ef6\u547d\u540d\u7a7a\u95f4\u5f02\u5e38\u95ee\u9898 #600 2. \u4fee\u590d\u914d\u7f6e\u6587\u4ef6logo\u8def\u5f84\u9519\u8bef\u95ee\u9898 3. \u4fee\u590d\u8868\u683c\u5173\u8054\u5b57\u6bb5\u641c\u7d22\u65e0\u6548\u95ee\u9898 4. \u4fee\u590d\u6a21\u578b\u6811\u884c\u64cd\u4f5c\u751f\u6210\u9009\u62e9\u5668\u91cd\u590d\u95ee\u9898 5. \u4fee\u590d\u8bbf\u95ee\u65e0\u6743\u9650\u9875\u9762\u62a5\u9519\u95ee\u9898 6. \u4fee\u590d\u8868\u683c\u8fc7\u6ee4\u5668multipleSelect\u65e0\u6cd5\u9009\u4e2d\u5173\u8054\u8868\u5b57\u6bb5\u503c\u95ee\u9898 #603 7. \u4fee\u590d\u8868\u5355tab\u5e03\u5c40\u65e0\u6548\u95ee\u9898 #605 \u529f\u80fd\u6539\u8fdb 1. Auth\\Permission\u79fb\u81f3Http\u76ee\u5f55 2. \u6570\u636e\u8868json\u5b57\u6bb5\u6539\u6210text 3. \u589e\u52a0\u767b\u5f55\u8d26\u53f7\u5bc6\u7801\u9519\u8bef\u7ffb\u8bd1 4. \u589e\u52a0 admin_javascript_json \u51fd\u6570\uff0c\u4f7f\u5927\u90e8\u5206\u7ec4\u4ef6\u914d\u7f6e\u652f\u6301\u4f20\u9012JS\u4ee3\u7801 5. Admin::color \u589e\u52a0\u6697\u9ed1\u6a21\u5f0f\u989c\u8272 v2.0.1-beta \u53d1\u5e03\u65f6\u95f4 2020/10/20 BUG\u4fee\u590d - \u4fee\u590d\u6570\u636e\u8868\u683c\u8fc7\u6ee4\u641c\u7d22BUG #599 - \u4fee\u590d\u4ee3\u7801\u751f\u6210\u5668\u751f\u6210\u63a7\u5236\u5668\u57fa\u7c7b\u547d\u540d\u7a7a\u95f4\u9519\u8bef\u95ee\u9898 #600 \u529f\u80fd\u6539\u8fdb \u4ee3\u7801\u751f\u6210\u5668\u589e\u52a0\u9875\u9762\u6807\u9898\u4ee5\u53ca\u9762\u5305\u5c51\u7ffb\u8bd1\u529f\u80fd \u5f02\u5e38\u5904\u7406\u4f18\u5316 \u589e\u52a0 admin_setting_array \u51fd\u6570","title":"BETA\u7248\u672c\u66f4\u65b0\u65e5\u5fd7"},{"location":"2.x/beta-change-log/#beta","text":"","title":"BETA\u7248\u672c\u66f4\u65b0\u65e5\u5fd7"},{"location":"2.x/beta-change-log/#v222-beta","text":"\u53d1\u5e03\u65f6\u95f4 2022/6/27","title":"v2.2.2-beta"},{"location":"2.x/beta-change-log/#_1","text":"\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u6700\u540e\u6e05\u9664 \u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.2.2-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php","title":"\u5347\u7ea7\u7248\u672c"},{"location":"2.x/beta-change-log/#bug","text":"\u4fee\u590d Grid \u8868\u683c\u5f53\u5b57\u6bb5\u503c\u4e3a 0 \u65f6\u65e0\u6cd5\u663e\u793a\u95ee\u9898","title":"BUG \u4fee\u590d"},{"location":"2.x/beta-change-log/#v221-beta","text":"\u53d1\u5e03\u65f6\u95f4 2022/6/26","title":"v2.2.1-beta"},{"location":"2.x/beta-change-log/#_2","text":"\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u6700\u540e\u6e05\u9664 \u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.2.1-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php","title":"\u5347\u7ea7\u7248\u672c"},{"location":"2.x/beta-change-log/#_3","text":"1. \u65e5\u591c\u6a21\u5f0f\u5207\u6362\u652f\u6301\u591a\u5f00\u573a\u666f ( #1672 by @ReedSun ) 2. \u8868\u5355\u589e\u52a0 override \u65b9\u6cd5\u5b9e\u73b0\u6587\u4ef6\u8986\u76d6 ( #1706 by @laradocs ) $form->file('file')->override(); $form->image('img')->override(); 3. \u652f\u6301\u5d4c\u5957\u8d44\u6e90\u578b\u63a7\u5236\u5668 ( #1725 by @lddtime ) 4. \u652f\u6301\u5728array/hasMany\u8868\u5355\u4e2d\u4f7f\u7528when\u63a7\u5236\u8868\u5355\u663e\u793a\u529f\u80fd ( #1776 by @rainhon ) $form->array($column, function ($form) { $form->radio('radio') ->when([1, 4], function (Form $form) { $form->text('text1'); $form->text('text2'); $form->text('text3'); }) ->when(2, function (Form $form) { $form->editor('editor'); }) ->when(3, function (Form $form) { $form->image('image'); }) ->options([...]) ->default(1); }); 5. \u9875\u9762\u7ec4\u4ef6 tab \u5237\u65b0\u540e\u53ef\u9009\u4e2d\u5bf9\u5e94\u9009\u9879 ( #1689 by @iljalukin ) use Dcat\\Admin\\Widgets\\Tab; $tab = new Tab(); $tab->add('tab1', ..., 'id1'); $tab->add('tab2', ..., 'id2'); 6. \u9875\u9762\u7ec4\u4ef6 table \u6ca1\u6709\u6570\u636e\u65f6\u663e\u793a No data. ( #1678 by @shacky )","title":"\u65b0\u589e\u529f\u80fd"},{"location":"2.x/beta-change-log/#bug_1","text":"\u4fee\u590d laravel9 \u4e2d\u4ee3\u7801\u751f\u6210\u5668\u62a5\u9519\u95ee\u9898 \u4fee\u590d Laravel9 \u53d1\u5e03\u8bed\u8a00\u6587\u4ef6\u8def\u5f84\u9519\u8bef ( #1688 by @laradocs ) \u4fee\u590d tab \u9009\u9879\u5361\u91cd\u590d\u52a0\u8f7d\u540e\u4e0d\u9009\u4e2d\u9519\u8bef ( #1689 by @iljalukin ) \u4fee\u590d\u4ee3\u7801\u751f\u6210\u5668\u63d0\u4ea4\u5931\u8d25\u4fdd\u5b58\u72b6\u6001 ( #1690 @by laradocs ) \u4fee\u590d HasMany \u8868\u5355\u4e2d\u4f7f\u7528 map \u5b57\u6bb5\u9519\u8bef\u95ee\u9898 ( #1701 by @mojiajuzi ) \u4fee\u590d\u4ee3\u7801\u751f\u6210\u5668\u751f\u6210 Laravel9 \u8bed\u8a00\u6587\u4ef6\u8def\u5f84\u9519\u8bef ( #1711 by @laradocs ) \u4fee\u590d\u4e0a\u4f20\u6587\u4ef6 options \u88ab\u8986\u76d6\u9519\u8bef ( #1747 by @laradocs ) \u4fee\u590d Grid \u4e2d editable \u65b9\u6cd5\u89e6\u53d1 xss \u9519\u8bef ( #1755 by @laradocs ) \u4fee\u590d Form \u4e2d number \u8c03\u7528 disable \u65b9\u6cd5\u5bf9\u81ea\u589e\u51cf\u6309\u94ae\u5931\u6548 ( #1771 @by @laradocs ) \u4fee\u590d Form \u4e2d\u4f7f\u7528 layout \u5e03\u5c40\u540e HasMany \u5b57\u6bb5\u5220\u9664\u5b50\u5b57\u6bb5\u540e\u9a8c\u8bc1\u89c4\u5219\u4f9d\u7136\u751f\u6548\u95ee\u9898( #1781 @by laradocs ) \u4fee\u590d PHP8.1 \u4e2d\u89e6\u53d1 ltrim \u548c htmlentities \u65b9\u6cd5\u5f02\u5e38 ( #1783 by @laradocs ) \u4fee\u590d Grid \u4f7f\u7528 $grid->column('xxx.xxx') \u65e0\u6cd5\u5bfc\u51fa\u5173\u8054\u6a21\u578b\u5b57\u6bb5\u503c\u95ee\u9898 ( #1740 by @xyzzxy123 ) \u4fee\u590d\u9879\u76ee\u8def\u5f84\u4e2d\u542b\u6709 Admin \u9020\u6210\u4ee3\u7801\u751f\u6210\u5668\u65e0\u6cd5\u6b63\u5e38\u89e3\u6790\u547d\u540d\u7a7a\u95f4\u7684\u95ee\u9898 ( #1778 by @GMD170629 ) \u4fee\u590d embeds \u5b57\u6bb5\u65e0\u6cd5\u4e0a\u4f20\u6587\u4ef6\u95ee\u9898 ( #1770 by @pianzhou2021 )","title":"BUG \u4fee\u590d"},{"location":"2.x/beta-change-log/#v220-beta","text":"\u53d1\u5e03\u65f6\u95f4 2022/2/20 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u6700\u540e\u6e05\u9664 \u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.2.0-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php","title":"v2.2.0-beta"},{"location":"2.x/beta-change-log/#_4","text":"1.\u589e\u52a0\u5bf9Laravel9.x\u7248\u672c\u7684\u652f\u6301 2.\u652f\u6301\u5728 hasMany \u4ee5\u53ca array \u8868\u5355\u4e2d\u4f7f\u7528 table \u8868\u5355 \u7528\u6cd5\u5982\u4e0b $form->array($field, function ($form) { $form->table('table_json', function ($form) { $form->text('title'); ... }); }); 3.\u6570\u636e\u8868\u683c\u8fc7\u6ee4\u5668\u589e\u52a0findInSet\u65b9\u6cd5 #1639 @guanguans sql: ... WHERE FIND_IN_SET(\"$input\", $column) \uff0c\u793a\u4f8b $grid->filter(function ($filter) { $filter->findInSet($field); }); 4.\u8c03\u6574\u4ee3\u7801\u751f\u6210\u5668\u9009\u62e9\u9ed8\u8ba4\u76ee\u5f55\u903b\u8f91 #1627 @Edwin \u65b0\u7248\u672c\u5c06\u4f1a\u6839\u636e\u914d\u7f6e\u53c2\u6570 admin.directory \u8bbe\u7f6e\u7684\u76ee\u5f55\u4f5c\u4e3a\u9ed8\u8ba4\u76ee\u5f55\uff0c\u9ed8\u8ba4\u4e3a Admin \u3002","title":"\u65b0\u589e\u529f\u80fd"},{"location":"2.x/beta-change-log/#bug_2","text":"\u4fee\u590d table \u8868\u5355\u4e0d\u652f\u6301 help \u65b9\u6cd5\u95ee\u9898 #1616 @jcbt \u4fee\u590d\u542f\u7528\u591a\u5e94\u7528\u540e\u6ce8\u518c\u6269\u5c55\u8def\u7531\u4f1a\u5bfc\u81f4\u9ed8\u8ba4\u5e94\u7528\u9996\u9875\u65e0\u6cd5\u8bbf\u95ee\u95ee\u9898 \u4fee\u590d\u65e0\u6cd5\u9690\u85cf\u5f39\u7a97\u8868\u5355\u91cd\u7f6e\u6309\u94ae\u95ee\u9898 #1631 @Sparkinzy \u4fee\u590d autocomplete \u5f53\u5b57\u6bb5\u503c\u4e3a\u6570\u5b57\u65f6js\u7ec4\u4ef6\u62a5\u9519\u95ee\u9898 #1661 @Sparkinzy \u4fee\u590d\u8bbe\u7f6e\u8def\u7531\u524d\u7f00\u4e3a\"/\"\u65f6\u6743\u9650\u7ba1\u7406\u8868\u5355\u65e0\u6cd5\u8bfb\u53d6\u8def\u7531\u4fe1\u606f\u95ee\u9898","title":"BUG\u4fee\u590d"},{"location":"2.x/beta-change-log/#v217-beta","text":"\u53d1\u5e03\u65f6\u95f4 2021/12/25 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u6700\u540e\u6e05\u9664 \u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.1.7-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php","title":"v2.1.7-beta"},{"location":"2.x/beta-change-log/#_5","text":"1.\u589e\u52a0 admin_redirect \u51fd\u6570 \u8df3\u8f6c\u5230\u6307\u5b9a url \uff0c\u6b64\u51fd\u6570\u53ef\u7528\u4e8e\u4ee3\u66ff redirect \u51fd\u6570\uff0c\u652f\u6301 pjax \u4ee5\u53ca ajax \u8bf7\u6c42 // \u4e0d\u9700\u8981\u6dfb\u52a0admin\u524d\u7f00 return admin_redirect('auth/users'); // \u5982\u679c\u60f3\u8981\u8df3\u8f6c\u5230\u975eadmin\u524d\u7f00\u7684\u94fe\u63a5\uff0c\u9700\u8981\u4f20\u9012\u5b8c\u6574url\u94fe\u63a5 return admin_redirect(url('users'));","title":"\u65b0\u589e\u529f\u80fd"},{"location":"2.x/beta-change-log/#bug_3","text":"\u4fee\u590d\u4f7f\u7528\u6587\u4ef6(file)\u4e0a\u4f20\u8868\u5355\u5220\u9664\u6587\u4ef6\u65f6\u4f1a\u62a5 destroyThumbnail \u95ee\u9898 \u4fee\u590d\u5f53 hasMany / array / table \u8868\u5355\u5b57\u6bb5\u540d\u4e0e\u5b50\u8868\u5355\u5b57\u6bb5\u540d\u4e00\u6837\u65f6\u65e0\u6cd5\u5220\u9664\u884c\u6570\u636e\u95ee\u9898","title":"BUG\u4fee\u590d"},{"location":"2.x/beta-change-log/#v216-beta","text":"\u53d1\u5e03\u65f6\u95f4 2021/12/12 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u6700\u540e\u6e05\u9664 \u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.1.6-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php","title":"v2.1.6-beta"},{"location":"2.x/beta-change-log/#_6","text":"1.\u589e\u52a0 Form::autocomplete() \u8868\u5355 #1514 @Edwin \u6b64\u8868\u5355\u53ef\u4ee5\u5728\u586b\u5199\u8868\u5355\u65f6\u8fdb\u884c\u5bf9\u8868\u5355\u503c\u8fdb\u884c\u641c\u7d22\uff0c\u5e76\u628a\u7ed3\u679c\u5c55\u793a\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\uff0c\u7528\u6cd5\u5982\u4e0b $form->autocomplete($column[, $label])->options(['foo', 'bar', ...]); \u6548\u679c\u5982\u4e0b \u4e5f\u53ef\u4ee5\u4ece\u8fdc\u7a0bAPI\u4e2d\u83b7\u53d6\u6570\u636e // ajax \u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a ajax url, \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a valueField\uff08\u53ef\u9009\uff09, \u7b2c\u4e09\u4e2a\u53c2\u6570\u4e3a groupField\uff08\u53ef\u9009\uff09 $form->autocomplete($column[, $label])->ajax('/countries', 'name', 'region'); \u8fdc\u7a0bAPI \u670d\u52a1\u7aef\u7684\u8bf7\u6c42\u53c2\u6570\u4e3aquery\uff0c\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a class CountryController extends AdminController { public function search() { $countries = Country::when(request('query'), function ($query, $value) { $query->where('name', 'like', \"%{$value}%\"); })->get(); return Admin::json($countries->toArray()); } } \u66f4\u591a\u7528\u6cd5\u53c2\u8003\u6587\u6863 \u6570\u636e\u8868\u5355 - \u5b57\u6bb5\u4f7f\u7528 - autocomplete 2.\u56fe\u7247/\u6587\u4ef6\u4e0a\u4f20\u652f\u6301 arttribute \u65b9\u6cd5 #1510 @iwzh \u901a\u8fc7 attribute \u65b9\u6cd5\u53ef\u4ee5\u7ed9\u6587\u4ef6\u4e0a\u4f20\u7684\u9690\u85cf\u57df\u8868\u5355\u8bbe\u7f6e\u5c5e\u6027\uff0c\u7528\u6cd5\u5982\u4e0b $form->file($column)->attribute(['foo' => 'bar', ...]); 3.\u6570\u636e\u8868\u683c\u589e\u52a0 between \u8868\u5934\u8fc7\u6ee4\u5668 #1510 @iwzh \u7528\u6cd5\u5982\u4e0b $grid->column('created_at')->filter( Grid\\Column\\Filter\\Between::make()->datetime() ); 4.\u6a21\u578b\u6811\u589e\u52a0 depthColumn \u7528\u4e8e\u4fdd\u5b58\u5f53\u524d\u5c42\u7ea7 #1549 @weiwait \u7528\u6cd5\u5982\u4e0b class Category extends Model { use ModelTree; // \u5b9a\u4e49depthColumn\u5c5e\u6027\u540e\uff0c\u5c06\u4f1a\u5728\u6570\u636e\u8868\u4fdd\u5b58\u5f53\u524d\u884c\u7684\u5c42\u7ea7 protected $depthColumn = 'depth'; } 5.\u8868\u5355 Row \u5e03\u5c40\u53ef\u72ec\u7acb\u8bbe\u7f6e\u5bbd\u5ea6 #1530 @iwzh \u7528\u6cd5\u5982\u4e0b $form->row(function ($row) { // \u7ed9\u6240\u6709\u5b57\u6bb5\u8bbe\u7f6e\u9ed8\u8ba4\u5bbd\u5ea6 $row->defaultWidth(3); // \u6bcf\u4e2a\u5b57\u6bb5\u72ec\u7acb\u8bbe\u7f6e\u5bbd\u5ea6 $row->width(4)->text(...); });","title":"\u65b0\u589e\u529f\u80fd"},{"location":"2.x/beta-change-log/#_7","text":"1.\u8c03\u6574\u6570\u636e\u8868\u683c\u5bfc\u51fa\u6570\u636e\u65f6rows\u65b9\u6cd5\u56de\u8c03\u51fd\u6570\u63a5\u53d7\u7684\u53c2\u6570\u7c7b\u578b\u4e3aCollection #1584 @jourdon \u7528\u6cd5\u5982\u4e0b use Illuminate\\Support\\Collection; $grid->export()->rows(function (Collection $rows) { foreach ($rows as $index => &$row) { // $row \u7684\u683c\u5f0f\u4e3a\u6a21\u578b dd($row); } return $rows; });","title":"\u529f\u80fd\u6539\u8fdb"},{"location":"2.x/beta-change-log/#bug_4","text":"\u4fee\u590d\u4f7f\u7528OSS\u4e0a\u4f20\u56fe\u7247\u7f29\u7565\u56fe\u62a5\u9519\u95ee\u9898 #1499 @jorry2008 \u4fee\u590d\u6570\u636e\u8868\u683c\u7b5b\u9009\u9ed8\u8ba4\u9879\u4e0d\u80fd\u8bbe\u7f6e\u4e3a 0 \u95ee\u9898 #1506 @liushoukun \u4fee\u590d\u4e00\u5bf9\u4e00\u5173\u8054\u5173\u7cfb\u8868\u5355\u9a8c\u8bc1\u89c4\u5219\u5f02\u5e38\u95ee\u9898 #1516 \u4fee\u590d\u8868\u5355\u6587\u4ef6\u4e0a\u4f20\u65f6\uff0c\u82e5\u5df2\u6dfb\u52a0\u8fc7\u6587\u4ef6\u5219\u65e0\u6cd5\u7ee7\u7eed\u62d6\u62fd\u4e0a\u4f20\u95ee\u9898 #1541 @hmilyfyj \u4fee\u590d\u5206\u9875\u5668\u5728 LazyRenderable \u4e0b\u5207\u6362\u65f6\u5bfc\u81f4\u6837\u5f0f\u4e22\u5931\u7684\u95ee\u9898 #1539 @jyiL \u4fee\u590d\u6570\u636e\u8868\u683c\u4f7f\u7528MongoDB\u65f6\u5206\u9875 perPage \u6570\u636e\u7c7b\u578b\u9519\u8bef\u95ee\u9898 #1555 @SmallRuralDog \u4fee\u590d\u9875\u9762\u4f7f\u7528 pjax \u6e32\u67d3\u540e pjax \u65e0\u6cd5\u518d\u6b21\u521d\u59cb\u5316 a \u6807\u7b7e\u95ee\u9898 #1576 @xyzzxy123 \u4fee\u590d\u6570\u636e\u8868\u683c Column::switch() \u65b9\u6cd5 refresh \u53c2\u6570\u65e0\u6548\u95ee\u9898 #1595 @wxfjamdc \u4fee\u590d\u591a\u56fe\u7247\u4e0a\u4f20\u4e0a\u4f20\u591a\u4e2a\u56fe\u7247\u4f1a\u5bfc\u81f4\u65e7\u56fe\u7247\u7f29\u7565\u56fe\u88ab\u5220\u9664\u95ee\u9898 #1556","title":"BUG\u4fee\u590d"},{"location":"2.x/beta-change-log/#v215-beta","text":"\u53d1\u5e03\u65f6\u95f4 2021/9/16 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u6700\u540e\u6e05\u9664 \u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.1.4-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php","title":"v2.1.5-beta"},{"location":"2.x/beta-change-log/#bug_5","text":"\u4fee\u590d\u7ba1\u7406\u5458\u5217\u8868\u70b9\u51fb\u67e5\u770b\u6743\u9650\u5f39\u7a97\u5c55\u793a\u4e3a\u7a7a\u95ee\u9898 \u4fee\u590d\u6570\u636e\u8868\u683c\u5173\u8054\u5173\u7cfb\u8868\u5b57\u6bb5 \u975eequal \u67e5\u8be2\u5747\u4e0d\u751f\u6548\u95ee\u9898 \u4fee\u590d\u6570\u636e\u8868\u683c column \u4f7f\u7528 if \u65b9\u6cd5\u540e\u65e0\u6cd5\u5728 displayer \u4e2d\u53d6\u5f97\u539f\u59cb\u5b57\u6bb5\u503c\u95ee\u9898","title":"BUG\u4fee\u590d"},{"location":"2.x/beta-change-log/#v213-beta","text":"\u53d1\u5e03\u65f6\u95f4 2021/9/14 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u6700\u540e\u6e05\u9664 \u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.1.3-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php","title":"v2.1.3-beta"},{"location":"2.x/beta-change-log/#_8","text":"1.\u91cd\u6784\u6570\u636e\u8868\u683c\u884c\u5185\u7f16\u8f91\u529f\u80fd \u5f53\u524d\u7248\u672c\u91cd\u6784\u4e86 editable \u3001 checkbox \u548c radio \u7b49\u4e09\u79cd\u884c\u5185\u7f16\u8f91\u8868\u5355\u7684 UI \u6837\u5f0f\uff0c\u6539\u4e3a\u5728\u5f39\u7a97\u4e2d\u5c55\u793a\u8868\u5355\u3002\u5e76\u4e14\u589e\u52a0\u4e86\u65b0\u7684\u884c\u5185\u7f16\u8f91\u8868\u5355 textarea \uff0c\u6548\u679c\u5982\u4e0b\uff1a 2.\u914d\u7f6e\u6587\u4ef6\u589e\u52a0 favicon \u53c2\u6570 \u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\u53ef\u4ee5\u5728 config/admin.php \u4e2d\u914d\u7f6e favicon \u94fe\u63a5\uff0c\u53c2\u6570\u540d\u4e3a favicon 3.\u6570\u636e\u8868\u5355\u63d0\u4ea4\u65f6\u652f\u6301\u5c55\u793a\u88ab\u629b\u51fa\u5f02\u5e38\u7684 message \u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\uff0c\u5047\u5982\u63d0\u4ea4\u8868\u5355\u65f6\u629b\u51fa\u5f02\u5e38\u5982\u4e0b $form->submitted(function ($form) { throw new \\Exception('\u7981\u6b62\u8bbf\u95ee'); }); \u90a3\u4e48\u5c06\u53ef\u4ee5\u5728\u9875\u9762\u4e2d\u770b\u5230\u5982\u4e0b\u63d0\u793a 5.\u4f18\u5316 array \u3001 table \u8868\u5355\u5728\u5de5\u5177\u8868\u5355\u4e2d\u7684\u4f7f\u7528 \u5728\u65e7\u7248\u672c Widgtet/Form \u4e2d\u5982\u679c\u4f7f\u7528\u4e86 array \u3001 table \u8868\u5355\uff0c\u5e76\u4e14\u5728 array \u3001 table \u8868\u5355\u4e2d\u4f7f\u7528\u4e86\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u65f6\uff0c\u9700\u8981\u81ea\u5b9a\u4e49\u6587\u4ef6\u4e0a\u4f20\u5730\u5740\u624d\u80fd\u6b63\u5e38\u4e0a\u4f20\uff0c\u6240\u4ee5\u6b64\u6b21\u7248\u672c\u5bf9\u8fd9\u4e2a\u529f\u80fd\u505a\u4e86\u4f18\u5316\uff0c\u66f4\u65b0\u7248\u672c\u4e4b\u540e\u5c06\u4e0d\u9700\u8981\u518d\u81ea\u5b9a\u4e49\u4e0a\u4f20\u5730\u5740 $this->array('...', function ($form) { // \u65e0\u9700\u81ea\u5b9a\u4e49\u4e0a\u4f20\u5730\u5740 $form->image('img'); }); 4.\u589e\u52a0\u6570\u636e\u8868\u5355 html \u5bf9 addElementClass \u65b9\u6cd5\u7684\u652f\u6301 \u5728\u65e7\u7248\u672c\u4e2d\uff0c addElementClass \u8bbe\u7f6e\u7684 class \u65e0\u6cd5\u5bf9 html \u65b9\u6cd5\u751f\u6548\uff0c\u6240\u4ee5\u65b0\u7248\u4e2d\u5bf9\u6b64\u505a\u4e86\u6539\u8fdb $form->html(...)->addElementClass(['class1', ...]); 5.\u6570\u636e\u8868\u5355\u56fe\u7247\u4e0a\u4f20\u8868\u5355\u8bbf\u95ee\u7f29\u7565\u56fe\u65f6\u4e0d\u68c0\u67e5\u56fe\u7247\u662f\u5426\u5b58\u5728 @zhaiyuxin103","title":"\u529f\u80fd\u6539\u8fdb"},{"location":"2.x/beta-change-log/#bug_6","text":"\u4fee\u590d\u6570\u636e\u8868\u5355\u4f7f\u7528\u95ed\u5305\u9a8c\u8bc1\u89c4\u5219\u65f6\u65e0\u6cd5\u6b63\u786e\u5408\u5e76\u95ee\u9898 #1429 @Edwin \u4fee\u590d\u6587\u4ef6\u4e0a\u4f20\u542f\u7528 sequenceName \u65b9\u6cd5\u540e\u751f\u6210\u7684\u6587\u4ef6\u540d\u5e26\u6709\u91cd\u590d\u540e\u7f00\u95ee\u9898 \u4fee\u590d\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u4e0a\u4f20\u4e00\u5bf9\u4e00\u5b57\u6bb5\u8bbe\u7f6e required \u9a8c\u8bc1\u89c4\u5219\u540e\u65e0\u6cd5\u4e0a\u4f20\u6587\u4ef6\u95ee\u9898 \u4fee\u590d\u67d0\u4e9b\u64cd\u4f5c\u4e0b\u51fa\u73b0\u7a7a\u767d\u7b5b\u9009\u8fb9\u680f\u7684\u95ee\u9898 #1445 @Abbotton \u4fee\u590d selectTable \u3001 multipleSelectTable \u7b49\u5b57\u6bb5\u7684 model \u65b9\u6cd5\u6307\u5b9a\u7b2c\u4e8c\u4e2a\u53c2\u6570\u65e0\u6548\u95ee\u9898 #1460 @hhniao \u4fee\u590d\u65e0\u6cd5\u7ffb\u8bd1\u56fe\u7247\u4e0a\u4f20\u8868\u5355 dimensions \u9a8c\u8bc1\u5931\u8d25\u63d0\u793a\u6587\u6848\u95ee\u9898 \u4fee\u590d\u5f53\u5728 array \u3001 table \u4ee5\u53ca hasMany \u8868\u5355\u4e2d\u4f7f\u7528\u56fe\u7247\u4e0a\u4f20\u8868\u5355\uff0c\u5e76\u4e14\u8bbe\u7f6e dimensions \u9a8c\u8bc1\u89c4\u5219\u540e\u65e0\u6cd5\u63d0\u4ea4\u95ee\u9898 \u4fee\u590d\u591a\u56fe\u4e0a\u4f20\u53ea\u80fd\u9884\u89c8\u7b2c\u4e00\u4e2a\u56fe\u7247\u95ee\u9898 \u4fee\u590d\u8868\u5355\u52a8\u6001\u5c55\u793a\u5982\u679c\u5b57\u6bb5\u503c\u5e26\u5c0f\u6570\u70b9\u65f6\u4e0d\u751f\u6548\u95ee\u9898","title":"BUG\u4fee\u590d"},{"location":"2.x/beta-change-log/#v212-beta","text":"\u53d1\u5e03\u65f6\u95f4 2021/7/12 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.1.2-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php","title":"v2.1.2-beta"},{"location":"2.x/beta-change-log/#_9","text":"1.\u589e\u52a0 Grid\\Model::apply() \u65b9\u6cd5 \u6b64\u65b9\u6cd5\u53ef\u4ee5\u5e94\u7528\u6570\u636e\u8868\u683c\u7684\u5feb\u6377\u641c\u7d22\u548c\u7b5b\u9009\u8fc7\u6ee4\u7684\u67e5\u8be2\u6761\u4ef6\uff0c\u7528\u6cd5\u793a\u4f8b\u5982\u4e0b \u5728\u65e7\u7248\u672c\u4e2d\uff0c\u4f7f\u7528\u5feb\u6377\u641c\u7d22\u548c\u7b5b\u9009\u8fc7\u6ee4\u7684\u67e5\u8be2\u6761\u4ef6\u975e\u5e38\u7684\u9ebb\u70e6 $grid->header(function ($collection) use ($grid) { $query = Model::query(); // \u62ff\u5230\u8868\u683c\u7b5b\u9009 where \u6761\u4ef6\u6570\u7ec4\u8fdb\u884c\u904d\u5386 $grid->model()->getQueries()->unique()->each(function ($value) use (&$query) { if (in_array($value['method'], ['paginate', 'get', 'orderBy', 'orderByDesc'], true)) { return; } $query = call_user_func_array([$query, $value['method']], $value['arguments'] ?? []); }); // \u67e5\u51fa\u7edf\u8ba1\u6570\u636e $data = $query->get(); // \u81ea\u5b9a\u4e49\u7ec4\u4ef6 return new Card($data); }); \u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\u53ef\u4ee5\u4f7f\u7528 apply \u65b9\u6cd5\u7b80\u5316\u4e0a\u9762\u7684\u4ee3\u7801 $grid->header(function ($collection) use ($grid) { $query = Model::query(); // \u62ff\u5230\u8868\u683c\u7b5b\u9009 where \u6761\u4ef6\u6570\u7ec4\u8fdb\u884c\u904d\u5386 $grid->model()->apply($query); // \u67e5\u51fa\u7edf\u8ba1\u6570\u636e $data = $query->get(); // \u81ea\u5b9a\u4e49\u7ec4\u4ef6 return new Card($data); });","title":"\u529f\u80fd\u6539\u8fdb"},{"location":"2.x/beta-change-log/#bug_7","text":"\u4fee\u590d\u6570\u636e\u8868\u683c\u65e0\u6cd5\u7981\u7528\u6279\u91cf\u5220\u9664\u6309\u94ae\u95ee\u9898 \u4fee\u590d\u9ad8\u5fb7\u5730\u56fe\u8868\u5355\u6709\u5750\u6807\u65f6\u6ca1\u6709\u7f29\u653e\u95ee\u9898 #1377 @gzxy-0102 \u4fee\u590d\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u4e0b\u8f7d\u6309\u94ae\u4e0d\u663e\u793a\u95ee\u9898 #1405 \u4fee\u590d\u6570\u636e\u8868\u683c\u4f7f\u7528\u4e86 simplePaginate \u540e\u6570\u636e\u7b5b\u9009\u53c2\u6570\u4e0d\u751f\u6548\u95ee\u9898 #1405","title":"BUG\u4fee\u590d"},{"location":"2.x/beta-change-log/#v211-beta","text":"\u53d1\u5e03\u65f6\u95f4 2021/7/12 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.1.1-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php","title":"v2.1.1-beta"},{"location":"2.x/beta-change-log/#_10","text":"1.\u589e\u52a0\u6a21\u578b\u6811expand\u65b9\u6cd5\u63a7\u5236\u662f\u5426\u5c55\u5f00\u6240\u6709\u5b50\u8282\u70b9\u6570\u636e \u9ed8\u8ba4\u5c55\u5f00\u6240\u6709\u5b50\u8282\u70b9\u6570\u636e // \u5c55\u5f00\u5b50\u8282\u70b9\u6570\u636e $tree->expand(); // \u6536\u8d77\u6240\u6709\u5b50\u8282\u70b9\u6570\u636e $tree->expand(false); 2.\u589e\u52a0\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u4e0b\u8f7d\u529f\u80fd $form->file('...')->downloadable(); 3.\u589e\u52a0\u9ad8\u5fb7\u5730\u56fe\u8868\u5355 \u5728\u914d\u7f6e\u6587\u4ef6 config/admin.php \u4e2d\u8bbe\u7f6e #1331 @gaizhixin 'map' => [ 'provider' => 'amap', 'keys' => [ // \u914d\u7f6e\u9ad8\u5fb7\u5730\u56fe\u7684key 'amap' => 'key', ], ], 4.\u65b0\u589eaddElementClass\u65b9\u6cd5\u7528\u4e8e\u7ed9\u8868\u5355\u5b57\u6bb5\u8bbe\u7f6e\u81ea\u5b9a\u4e49class // \u5982\u679c\u4e0d\u5e0c\u671b\u6dfb\u52a0\u524d\u7f00\uff0c\u5219\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8bbe\u7f6e\u4e3afalse $form->text(...)->addElementClass(['class1', 'class2'], false); 5.\u589e\u52a0\u8868\u683c\u6279\u91cf\u64cd\u4f5c\u8bbe\u7f6e\u4e0b\u62c9\u83dc\u5355\u5206\u5272\u7ebf\u529f\u80fd \u652f\u6301\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f // \u65b9\u5f0f1 $grid->batchActions(function ($batch) { $batch->add(...); // \u663e\u793a\u5206\u5272\u7ebf $batch->divider(); ... }); // \u65b9\u5f0f2 use Dcat\\Admin\\Grid\\Tools\\ActionDivider; $grid->batchActions([ new Action1(), ... new ActionDivider(), ... ]);","title":"\u65b0\u589e\u529f\u80fd"},{"location":"2.x/beta-change-log/#_11","text":"1.table\u8868\u5355\u652f\u6301\u81ea\u5b9a\u4e49view $this->table(...)->setView('...'); 2.\u4f18\u5316\u83dc\u5355\u6536\u7f29\u540e\u7684\u64cd\u4f5c\u4f53\u9a8c\u4ee5\u53caUI \u5f53\u83dc\u5355\u6536\u7f29\u540e\uff0c\u5149\u6807\u79fb\u52a8\u4e0a\u53bb\u540e\u81ea\u52a8\u5c55\u5f00\u5982\u679c\u70b9\u51fb\u4e86\u83dc\u5355\uff0c\u8df3\u8f6c\u540e\u4f1a\u81ea\u52a8\u6536\u7f29\u56de\u53bb\uff1b\u5e76\u4e14\u4fee\u590d\u4e86 mini-logo \u663e\u793a\u5f02\u5e38\u7684\u95ee\u9898 3.\u6570\u636e\u8868\u683c\u884c\u64cd\u4f5c\u5217\u5f53\u6ca1\u6709\u4efb\u4f55\u64cd\u4f5c\u6309\u94ae\u65f6\u4e0d\u518d\u663e\u793a\u7a7a\u7684\u4e0b\u62c9\u83dc\u5355 \u6570\u636e\u8868\u683c\u884c\u64cd\u4f5c\u5217\u5f53\u6ca1\u6709\u4efb\u4f55\u64cd\u4f5c\u6309\u94ae\u65f6\u4e0d\u518d\u663e\u793a\u7a7a\u7684\u4e0b\u62c9\u83dc\u5355 #1327 @jiangyuntao 4.\u4f18\u5316\u56fe\u7247\u4e0a\u4f20\u8868\u5355\u56fe\u7247\u7684\u663e\u793a\u6548\u679c #1366 @ShermanTsang","title":"\u529f\u80fd\u6539\u8fdb"},{"location":"2.x/beta-change-log/#bug_8","text":"\u4fee\u590d\u6811\u5f62\u8868\u683c( tree )\u5c55\u5f00\u5b50\u8282\u70b9\u65f6\u5982\u679c\u65e0\u6570\u636e Grid::__toString() \u4f1a\u62a5\u9519\u95ee\u9898 \u4fee\u590d\u542f\u7528\u6570\u636e\u8868\u683c\u5f02\u6b65\u6e32\u67d3\u529f\u80fd\u540e\u51cf\u5c11\u7b5b\u9009\u6761\u4ef6\u65e0\u6548\u95ee\u9898 \u4fee\u590d\u8868\u683c\u5f02\u6b65\u6e32\u67d3\u7b5b\u9009\u9879\u6570\u91cf\u663e\u793a\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u8bbe\u7f6e\u8868\u5355\u5b57\u6bb5 class \u4f1a\u8986\u76d6\u9ed8\u8ba4 class \u95ee\u9898 \u4fee\u590d\u5173\u95ed debug \u6a21\u5f0f\u540e\u8bbf\u95ee\u65e0\u6743\u9650\u9875\u9762\u4f1a\u663e\u793a\u5f02\u5e38\u62a5\u6587\u95ee\u9898 \u4fee\u590d\u914d\u7f6e\u6587\u4ef6\u81ea\u5b9a\u4e49\u6279\u91cf\u5220\u9664\u6309\u94ae\u540e Grid::disableBatchDelete \u5931\u6548\u95ee\u9898 \u4fee\u590d\u83dc\u5355\u7f29\u8fdb\u540e\u4e09\u7ea7\u83dc\u5355\u65e0\u6cd5\u9690\u85cf\u95ee\u9898 \u4fee\u590d\u5f53\u8bbe\u7f6e\u4e3a\u65e0\u8def\u7531\u524d\u7f00\u65f6\uff0c\u5185\u7f6e\u7684\u6743\u9650\u7cfb\u7edf\u70b9\u51fb \u65b0\u589e\u6743\u9650 \u62a5\u9519\u7684\u95ee\u9898 \u4fee\u590d\u5f53\u7981\u7528\u5185\u7f6e\u6743\u9650\u7cfb\u7edf\u65f6\u6ca1\u6709\u7981\u7528\u6389\u6743\u9650\u4e2d\u95f4\u4ef6\u65e0\u6548\u95ee\u9898 \u4fee\u590d select \u4ee5\u53ca selectTable \u7684 model \u4f20\u9012\u4e86\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u975e id \u65f6\u65e0\u6cd5\u663e\u793a\u7f16\u8f91\u6570\u636e\u7684\u95ee\u9898 \u4fee\u590d\u90e8\u5206\u8868\u5355\u8bbe\u7f6e\u5927\u5c0f\u6837\u5f0f\u672a\u751f\u6548\u7684\u95ee\u9898 #1361 @Abbotton \u4fee\u590d\u8868\u683c\u6392\u5e8f\u529f\u80fd\u65e0\u6cd5\u517c\u5bb9 Grid\\Model::latest \u4ee5\u53ca oldest \u65b9\u6cd5\u95ee\u9898","title":"BUG\u4fee\u590d"},{"location":"2.x/beta-change-log/#v210-beta","text":"\u53d1\u5e03\u65f6\u95f4 2021/5/23 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.1.0-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php","title":"v2.1.0-beta"},{"location":"2.x/beta-change-log/#_12","text":"1.\u589e\u52a0\u8868\u683c\u5f02\u6b65\u6e32\u67d3\u529f\u80fd \u5f53\u9875\u9762\u7684\u8868\u683c\u5c55\u793a\u7684\u6570\u636e\u7279\u522b\u591a\uff08\u5217\u591a\u884c\u591a\uff09\uff0c\u5e76\u4e14\u52a0\u8f7d\u7684\u7ec4\u4ef6\u4e5f\u8f83\u591a\u65f6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u5361\u987f\u7684\u73b0\u8c61\uff0c\u6b64\u65f6\u53ef\u4ee5\u4f7f\u7528\u8868\u683c\u5f02\u6b65\u6e32\u67d3\u529f\u80fd\uff0c\u53ef\u4ee5\u6709\u6548\u5730\u51cf\u8f7b\u9875\u9762\u5361\u987f\u7684\u60c5\u51b5\uff1a // \u542f\u7528\u8868\u683c\u5f02\u6b65\u6e32\u67d3\u529f\u80fd $grid->async(); \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u9875\u9762\u6ca1\u6709\u51fa\u73b0\u660e\u663e\u7684\u5361\u987f\u73b0\u8c61\uff0c\u5219\u65e0\u9700\u542f\u7528\u6b64\u529f\u80fd\uff0c\u5e76\u4e14\u5982\u679c\u9875\u9762\u4e2d\u5b58\u5728\u591a\u4e2a\u6570\u636e\u8868\u683c\uff0c\u90a3\u4e48\u4e5f\u65e0\u6cd5\u4f7f\u7528\u6b64\u529f\u80fd\uff01\u8be6\u7ec6\u7528\u6cd5\u53c2\u8003 \u6570\u636e\u8868\u683c - \u5f02\u6b65\u6e32\u67d3","title":"\u65b0\u589e\u529f\u80fd"},{"location":"2.x/beta-change-log/#_13","text":"1.\u652f\u6301 Laravel Octane 1.x \u7248\u672c \u6b64\u6b21\u7248\u672c\u9002\u914d\u4e86 Laravel Octane 1.x \u7248\u672c\u7684\u76f8\u5173\u53d8\u52a8\uff0c\u5177\u4f53\u7528\u6cd5\u53c2\u8003 Laravel Octane \u3002 2.\u8c03\u7528 expand(false) \u53ef\u4ee5\u7981\u6b62\u81ea\u52a8\u5f39\u51fa\u8fc7\u6ee4\u5668\u4fa7\u680f // \u7981\u6b62\u81ea\u52a8\u5f39\u51fa\u8fc7\u6ee4\u5668\u4fa7\u8fb9\u680f $grid->filter(function ($filter) { $filter->expand(false); ... }); 3.\u5347\u7ea7 tinymce \u81f3 v5.8.0 \u7248\u672c @yiming0 4.\u6743\u9650\u4ee5\u53ca\u89d2\u8272\u9875\u9762\u7ed1\u5b9a\u83dc\u5355\u540e\u81ea\u52a8\u6e05\u9664\u83dc\u5355\u7f13\u5b58","title":"\u529f\u80fd\u6539\u8fdb"},{"location":"2.x/beta-change-log/#bug_9","text":"\u4fee\u590d withConstraints \u65b9\u6cd5\u5bf9\u8be6\u60c5\u9875 url \u65e0\u6548\u95ee\u9898 #1232 \u4fee\u590d\u591a\u56fe/\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u5220\u9664\u56fe\u7247\u65f6\u8868\u5355\u503c\u4f1a\u8f6c\u5316\u6210\u5173\u8054\u6570\u7ec4\u95ee\u9898 \u4fee\u590d\u767e\u5ea6\u5730\u56fe\u7ec4\u4ef6\u5728\u542f\u7528 https \u540e\u65e0\u6cd5\u4f7f\u7528\u95ee\u9898 #1162","title":"BUG\u4fee\u590d"},{"location":"2.x/beta-change-log/#v2024-beta","text":"\u53d1\u5e03\u65f6\u95f4 2021/4/30 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.24-beta\" php artisan admin:update # \u4e0d\u4f1a\u8986\u76d6\u7ffb\u8bd1\u6587\u4ef6 menu.php \u4ee5\u53ca global.php","title":"v2.0.24-beta"},{"location":"2.x/beta-change-log/#_14","text":"1.\u589e\u52a0\u521b\u5efa\u6216\u7f16\u8f91\u89d2\u8272\u4ee5\u53ca\u6743\u9650\u65f6\u53ef\u76f4\u63a5\u7ed1\u5b9a\u83dc\u5355\u529f\u80fd \u5728\u89d2\u8272\u548c\u6743\u9650\u7684\u521b\u5efa\u4ee5\u53ca\u7f16\u8f91\u9875\u9762\u53ef\u4ee5\u76f4\u63a5\u7ed1\u5b9a\u83dc\u5355\uff0c\u6b64\u529f\u80fd\u9ed8\u8ba4\u5f00\u542f\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u53c2\u6570 admin.menu.role_bind_menu \u4ee5\u53ca admin.menu.permission_bind_menu \u8fdb\u884c\u5173\u95ed\uff0c\u6548\u679c\u5982\u4e0b 2.\u65b0\u589e Form\\Tree::treeStatus() \u65b9\u6cd5\uff0c\u5141\u8bb8\u5355\u72ec\u9009\u62e9\u7236\u8282\u70b9 \u7528\u6cd5 $form->tree('xxx') ->treeState(false) # \u5141\u8bb8\u5355\u72ec\u9009\u62e9\u7236\u8282\u70b9 ->setTitleColumn('title') ->nodes(...); \u6548\u679c","title":"\u65b0\u589e\u529f\u80fd"},{"location":"2.x/beta-change-log/#bug_10","text":"\u4fee\u590d\u591a\u5e94\u7528\u60c5\u51b5\u4e0b\u65e0\u6cd5\u4f7f\u7528\u57df\u540d\u533a\u5206\u5e94\u7528\u95ee\u9898 \u4fee\u590d Admin::pjax() \u65b9\u6cd5\u672a\u58f0\u660e\u4e3a static \u95ee\u9898 \u4fee\u590d grid filter checkbox \u53ea\u80fd\u9009\u4e2d\u591a\u4e2a\u9009\u9879\u540e\u53ea\u6709\u5355\u4e2a\u9009\u9879\u751f\u6548\u95ee\u9898 @outer199 \u4fee\u590d\u83dc\u5355\u9ed8\u8ba4\u56fe\u6807\u8bbe\u7f6e\u65e0\u6548\u95ee\u9898 \u4fee\u590d php7.4 \u6216\u4ee5\u4e0a\u7248\u672c\u4e2d\u4f7f\u7528 embeds \u8868\u5355\u65f6\u62a5\u9519\u95ee\u9898 #1204 \u4fee\u590d\u5206\u6b65\u8868\u5355\u4e0b\u4f7f\u7528 $form->list(...)->limit(...); \u53c2\u6570\u6821\u9a8c\u4e0d\u901a\u8fc7\u540e\u5237\u65b0\u9875\u9762\u62a5\u9519\u95ee\u9898 #1206 \u4fee\u590d\u7981\u7528 pjax \u540e\u7f16\u8f91\u548c\u521b\u5efa\u5b8c\u6210\u540e\u65e0\u6cd5\u8fdb\u884c\u8df3\u8f6c\u95ee\u9898 #1208","title":"BUG\u4fee\u590d"},{"location":"2.x/beta-change-log/#v2023-beta","text":"\u53d1\u5e03\u65f6\u95f4 2021/4/18 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.23-beta\" php artisan admin:update","title":"v2.0.23-beta"},{"location":"2.x/beta-change-log/#_15","text":"1.\u589e\u52a0\u5bf9 Laravel Octane \u7684\u652f\u6301 Laravel Octane \u662f\u4e00\u4e2a\u57fa\u4e8e Swoole/RoadRunner \u9a71\u52a8\u7684\u53ef\u4ee5\u63d0\u5347 Laravel \u6846\u67b6\u6027\u80fd\u7684\u9879\u76ee\uff0c\u5b89\u88c5\u540e\u53ef\u4ee5\u5927\u5e45\u63d0\u5347 Laravel \u9879\u76ee\u7684\u6027\u80fd\uff0c Dcat Admin \u4e5f\u517c\u5bb9\u4e86 Laravel Octane \u73af\u5883\uff0c\u53ea\u9700\u5728\u914d\u7f6e\u6587\u4ef6 config/octane.php \u4e2d\u52a0\u5165\u5982\u4e0b\u914d\u7f6e\u5373\u53ef\uff1a 'listeners' => [ ..., RequestReceived::class => [ ...Octane::prepareApplicationForNextOperation(), ...Octane::prepareApplicationForNextRequest(), // \u5f00\u542f\u5bf9 Dcat Admin \u7684\u652f\u6301 Dcat\\Admin\\Octane\\Listeners\\FlushAdminState::class, ], ... ], Laravel Octane \u76ee\u524d\u4ecd\u5904\u4e8e beta \u7248\u672c\u9636\u6bb5\uff0c\u5173\u4e8e Laravel Octane \u7684\u5b89\u88c5\u4e0e\u66f4\u591a\u4ecb\u7ecd\u8bf7\u524d\u5f80\u6587\u6863 https://github.com/laravel/octane \u67e5\u770b\u3002 2.\u589e\u52a0\u8868\u683c\u7b80\u5316\u5206\u9875\uff08 simplePaginate \uff09\u529f\u80fd \u542f\u7528 simplePaginate \u529f\u80fd\u540e\u4f1a\u4f7f\u7528 Laravel \u7684 simplePaginate \u529f\u80fd\u8fdb\u884c\u5206\u9875\uff0c\u5f53\u6570\u636e\u91cf\u8f83\u5927\u65f6\u53ef\u4ee5\u5927\u5e45\u63d0\u5347\u9875\u9762\u7684\u54cd\u5e94\u901f\u5ea6\uff0c\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4f7f\u7528\u6b64\u529f\u80fd\u540e\u5c06\u4e0d\u4f1a\u67e5\u8be2\u6570\u636e\u8868\u7684 \u603b\u884c\u6570 \u3002 // \u542f\u7528 $grid->simplePaginate(); // \u7981\u7528 $grid->simplePaginate(false);","title":"\u65b0\u589e\u529f\u80fd"},{"location":"2.x/beta-change-log/#_16","text":"1.\u91cd\u6784\u7ffb\u8bd1\u529f\u80fd \u5728\u8fc7\u53bb\u7248\u672c\u4e2d\uff0c\u5f53\u4f7f\u7528 \u5f02\u6b65\u8868\u5355 \u4ee5\u53ca \u5f02\u6b65\u8868\u683c \u529f\u80fd\u65f6\u65e0\u6cd5\u81ea\u52a8\u5bf9\u5b57\u6bb5\u540d\u79f0\u8fdb\u884c\u7ffb\u8bd1\uff0c\u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\u53ef\u4ee5\u901a\u8fc7 translation \u5c5e\u6027\u6307\u5b9a\u7ffb\u8bd1\u6587\u4ef6\u7684\u8def\u5f84\u8fdb\u884c\u81ea\u52a8\u7ffb\u8bd1\uff0c\u7528\u6cd5\u5982\u4e0b <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Traits\\LazyWidget; use Dcat\\Admin\\Widgets\\Form; use Dcat\\Admin\\Contracts\\LazyRenderable; class MyForm extends Form implements LazyRenderable { use LazyWidget; /** * \u6307\u5b9a\u7ffb\u8bd1\u6587\u4ef6\u540d\u79f0 * * @var string */ protected $translation = 'my-form'; public function form() { $this->text('field1'); $this->text('field2'); ... } ... } \u8bed\u8a00\u5305 resources/lang/{locale}/my-form.php \u5185\u5bb9\u5982\u4e0b <?php return [ 'fields' => [ 'field1' => '\u5b57\u6bb51', 'field2' => '\u5b57\u6bb52', ... ], ]; \u5e76\u4e14\u5728\u63a7\u5236\u5668\u4e2d\u4e5f\u53ef\u4ee5\u6307\u5b9a\u5f53\u524d\u7ffb\u8bd1\u6587\u4ef6\u7684\u8def\u5f84 use Dcat\\Admin\\Http\\Controllers\\AdminController; class UserController extends AdminController { /** * \u6307\u5b9a\u7ffb\u8bd1\u6587\u4ef6\u540d\u79f0 * * @var string */ protected $translation = 'user1'; ... } \u5f53\u7136\u4e5f\u53ef\u4ee5\u901a\u8fc7 Admin::translation() \u65b9\u6cd5\u6307\u5b9a use Dcat\\Admin\\Admin; Admin::translation('user'); 2.\u589e\u52a0\u8868\u683c\u76f8\u5173\u914d\u7f6e\u53c2\u6570 \u589e\u52a0\u6570\u4e2a\u8868\u683c\u76f8\u5173\u7684\u914d\u7f6e\u6587\u4ef6\u53c2\u6570 admin.grid.* : 'grid' => [ // \u8868\u683c\u884c\u64cd\u4f5c\u7c7b 'grid_action_class' => Dcat\\Admin\\Grid\\Displayers\\DropdownActions::class, // \u8868\u683c\u6279\u91cf\u64cd\u4f5c\u7c7b 'batch_action_class' => Dcat\\Admin\\Grid\\Tools\\BatchActions::class, // \u8868\u683c\u5206\u9875\u7c7b 'paginator_class' => Dcat\\Admin\\Grid\\Tools\\Paginator::class, // \u8868\u683c\u884c\u9ed8\u8ba4\u7684\u51e0\u4e2a\u64cd\u4f5c\u7c7b\u914d\u7f6e 'actions' => [ 'view' => Dcat\\Admin\\Grid\\Actions\\Show::class, 'edit' => Dcat\\Admin\\Grid\\Actions\\Edit::class, 'quick_edit' => Dcat\\Admin\\Grid\\Actions\\QuickEdit::class, 'delete' => Dcat\\Admin\\Grid\\Actions\\Delete::class, 'batch_delete' => Dcat\\Admin\\Grid\\Tools\\BatchDelete::class, ], ... ], 3.\u79fb\u9664\u7981\u7528\u8868\u683c\u5206\u9875\u540e\u663e\u793a\u8868\u683c\u9875\u811a\u4fe1\u606f \u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\uff0c\u5982\u679c\u7981\u7528\u4e86\u8868\u683c\u7684\u5206\u9875\u529f\u80fd\uff0c\u5c06\u4e0d\u4f1a\u518d\u663e\u793a\u8868\u683c\u7684\u9875\u811a\u4fe1\u606f\u3002 4.\u4f18\u5316 Filter::panel() \u5e03\u5c40\u95f4\u8ddd 5.\u4f18\u5316\u6587\u4ef6\u53d1\u5e03\u529f\u80fd\uff0c\u53d1\u5e03\u8bed\u8a00\u5305\u6587\u4ef6\u65f6\u5c06\u4e0d\u518d\u8986\u76d6 menu.php \u4ee5\u53ca global.php \u6587\u4ef6 \u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\uff0c\u5f53\u4f7f\u7528 admin:update \u4ee5\u53ca admin:publish --force \u547d\u4ee4\u6587\u4ef6\u65f6\uff0c\u5c06\u4e0d\u518d\u8986\u76d6 menu.php \u4ee5\u53ca global.php \u6587\u4ef6\u3002 6.\u66f4\u65b0 Tinymce \u7248\u672c\u81f3 5.6.2 @wk1025","title":"\u529f\u80fd\u6539\u8fdb"},{"location":"2.x/beta-change-log/#bug_11","text":"\u4fee\u590d\u6570\u636e\u8868\u683c\u4e2d\u5b57\u6bb5\u7c7b\u578b\u4e3a Object \u65f6\u62a5\u9519\u95ee\u9898 @xiaohuilam \u4fee\u590d\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\u4ecd\u7136\u63d0\u793a\u4e0a\u4f20\u6210\u529f\u95ee\u9898 \u4fee\u590d\u6743\u9650\u5224\u65ad\u4e2d\u95f4\u4ef6\u5339\u914d\u65f6\u6ca1\u6709\u4f7f\u7528\u4f20\u5165\u7684 $request \u5bf9\u8c61\u95ee\u9898 @asmodai1985 \u4fee\u590d\u8868\u5355 rules \u65b9\u6cd5\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8bbe\u7f6e message \u65e0\u6548\u95ee\u9898 \u4fee\u590d Helper::array() \u4f1a\u628a 0 \u8f6c\u4e3a\u7a7a\u6570\u7ec4\u95ee\u9898 \u4fee\u590d\u884c\u9009\u62e9\u5668\u65e0\u6cd5\u9009\u4e2d\u6811\u5f62\u8868\u683c\u5b50\u7ea7\u884c\u95ee\u9898 \u4fee\u590d KeyValue::setValueLabel() \u65b9\u6cd5\u65e0\u6548\u95ee\u9898 \u4fee\u590d hasmany \u4ee5\u53ca table \u8868\u5355\u5220\u9664\u9009\u9879\u65f6\u4f1a\u91cd\u7f6e\u8868\u5355\u95ee\u9898 \u4fee\u590d\u8868\u683c\u884c\u64cd\u4f5c\u7f16\u8f91\u6309\u94ae\u6587\u672c\u663e\u793a\u9519\u8bef\u95ee\u9898 @GemaDynamic \u4fee\u590d\u6811\u5f62\u8868\u683c\u5b50\u7ea7\u884c\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u8868\u5355\u5f39\u7a97\u95ee\u9898 #813","title":"BUG\u4fee\u590d"},{"location":"2.x/beta-change-log/#v2022-beta","text":"\u53d1\u5e03\u65f6\u95f4 2021/4/1 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.22-beta\" php artisan admin:update","title":"v2.0.22-beta"},{"location":"2.x/beta-change-log/#bug_12","text":"\u4fee\u590d\u90e8\u5206\u529f\u80fd\u7f3a\u5931 CSRF_TOKEN \u62a5\u9519\u95ee\u9898 \u4fee\u590d\u83dc\u5355\u81ea\u52a8\u9002\u5e94\u9ad8\u5ea6\u529f\u80fd\u62a5\u9519\u95ee\u9898","title":"BUG\u4fee\u590d"},{"location":"2.x/beta-change-log/#v2021-beta","text":"\u53d1\u5e03\u65f6\u95f4 2021/3/30 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.21-beta\" php artisan admin:update","title":"v2.0.21-beta"},{"location":"2.x/beta-change-log/#_17","text":"1.\u589e\u52a0\u8868\u683c\u5217\u9009\u62e9\u5668 ColumnSelector \u652f\u6301\u6301\u4e45\u5316\u5b58\u50a8\u529f\u80fd \u5728\u914d\u7f6e\u6587\u4ef6 config/admin.php \u53ef\u4ee5\u914d\u7f6e\u5b58\u50a8\u5217\u9009\u62e9\u5668\u72b6\u6001\u7684\u65b9\u5f0f\uff0c\u652f\u6301\u7684\u5b58\u50a8\u65b9\u5f0f\u5982\u4e0b Dcat\\Admin\\Grid\\ColumnSelector\\SessionStore \u5217\u9009\u62e9\u5668\u72b6\u6001\u6570\u636e\u4fdd\u5b58\u5728 session \u4e2d\uff0c\u4ec5\u5728\u767b\u9646\u72b6\u6001\u4e2d\u6709\u6548 Dcat\\Admin\\Grid\\ColumnSelector\\CacheStore \u5217\u9009\u62e9\u5668\u72b6\u6001\u6570\u636e\u4fdd\u5b58\u5728 Laravel Cache \u7f13\u5b58\u7cfb\u7edf\u4e2d\uff0c\u6700\u957f\u53ef\u4fdd\u5b58 300 \u5929\uff0c\u5e76\u53ef\u4ee5\u901a\u8fc7 admin.grid.column_selector.store_params.driver \u53ef\u4ee5\u914d\u7f6e\u7f13\u5b58\u9a71\u52a8\uff0c\u9ed8\u8ba4\u4e3a file 'grid' => [ ... 'column_selector' => [ 'store' => Dcat\\Admin\\Grid\\ColumnSelector\\SessionStore::class, 'store_params' => [ 'driver' => 'file', ], ], ], 2.\u589e\u52a0\u8868\u683c\u6761\u4ef6\u5224\u65ad( if )\u7684\u7ec8\u7ed3\u65b9\u6cd5( end ) $grid->column('status') ->if(...) // \u6761\u4ef61 ->display(...) ->display(...) ->if(...) // \u6761\u4ef62 ->display(...) ->display(...) ->end() // \u7ec8\u7ed3\u524d\u9762\u7684\u6761\u4ef6\u5224\u65ad ->display(...); // \u6240\u6709\u6761\u4ef6\u90fd\u80fd\u751f\u6548 3.\u589e\u52a0\u8868\u683c\u884c\u9009\u62e9\u5668\u9ed8\u8ba4\u9009\u4e2d( check )\u4ee5\u53ca\u7981\u6b62\u66f4\u6539\u9009\u4e2d\u72b6\u6001( disable )\u529f\u80fd \u901a\u8fc7 check \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u9ed8\u8ba4\u9009\u4e2d\u7684\u884c\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a array \u7c7b\u578b\u6216 \u533f\u540d\u51fd\u6570 \u53c2\u6570 // \u8bbe\u7f6e\u9ed8\u8ba4\u9009\u4e2d\u7b2c 1/3/5 \u884c $grid->rowSelector()->check([0, 2, 4]); // \u4f20\u9012\u95ed\u5305 $grid->rowSelector()->check(function () { // \u8bbe\u7f6e\u9ed8\u8ba4\u9009\u4e2d\u7b2c 1/3/5 \u884c return in_array($this->_index, [0, 2, 4]); }); // \u5728\u95ed\u5305\u4e2d\u4f7f\u7528\u5f53\u524d\u884c\u5176\u4ed6\u5b57\u6bb5 $grid->rowSelector()->check(function () { // \u8bbe\u7f6e\u9ed8\u8ba4\u9009\u4e2d id > 10 \u7684\u884c return $this->id > 10; }); \u901a\u8fc7 disable \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u7981\u6b62\u66f4\u6539\u9009\u4e2d\u72b6\u6001\u7684\u884c\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a array \u7c7b\u578b\u6216 \u533f\u540d\u51fd\u6570 \u53c2\u6570 // \u7981\u6b62\u7b2c 1/3/5 \u884c\u66f4\u6539\u9009\u4e2d\u72b6\u6001 $grid->rowSelector()->disable([0, 2, 4]); // \u4f20\u9012\u95ed\u5305 $grid->rowSelector()->disable(function () { // \u7981\u6b62\u7b2c 1/3/5 \u884c\u66f4\u6539\u9009\u4e2d\u72b6\u6001 return in_array($this->_index, [0, 2, 4]); }); // \u5728\u95ed\u5305\u4e2d\u4f7f\u7528\u5f53\u524d\u884c\u5176\u4ed6\u5b57\u6bb5 $grid->rowSelector()->disable(function () { // \u7981\u6b62 id > 10 \u7684\u884c\u66f4\u6539\u9009\u4e2d\u72b6\u6001 return $this->id > 10; }); // disable \u53ef\u4ee5\u548c check \u65b9\u6cd5\u4e00\u8d77\u4f7f\u7528 $grid->rowSelector()->check([2, 4])->disable([0, 2, 4]); 4.\u589e\u52a0 KeyValue \u8868\u5355\u81ea\u5b9a\u4e49\u6807\u9898\u7ffb\u8bd1\u529f\u80fd $form->keyValue(...)->setKeyLabel('\u952e\u540d')->setValueLabel('\u952e\u503c'); 5.\u589e\u52a0 Grid::scrollbarX \u663e\u793a\u8868\u683c\u6a2a\u5411\u6eda\u52a8\u6761\u65b9\u6cd5 \u663e\u793a\u8868\u683c\u6a2a\u5411\u6eda\u52a8\u6761\uff0c\u9ed8\u8ba4\u4e0d\u663e\u793a // \u542f\u7528 $grid->scrollbarX(); // \u7981\u7528 $grid->scrollbarX(false); 6.\u589e\u52a0 admin:update \u547d\u4ee4 \u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\uff0c\u5347\u7ea7\u540e\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c admin:update \uff0c\u76f8\u5f53\u4e8e\u8fd0\u884c php artisan admin:publish --assets --migrations --lang --force php artisan migrate","title":"\u65b0\u589e\u529f\u80fd"},{"location":"2.x/beta-change-log/#_18","text":"1.\u8868\u5355\u663e\u793a\u7f16\u8f91\u6570\u636e\u65f6\u517c\u5bb9\u9a7c\u5cf0\u98ce\u683c\u7684\u5173\u8054\u5173\u7cfb\u540d\u79f0 \u5728\u65e7\u7248\u672c\u4e2d\uff0c\u5982\u679c\u9700\u8981\u7f16\u8f91\u6a21\u578b\u5173\u8054\u5173\u7cfb\u5b57\u6bb5\uff0c\u4e14\u6a21\u578b\u7684\u5173\u8054\u5173\u7cfb\u540d\u79f0\u4e3a\u9a7c\u5cf0\u98ce\u683c\u65f6\uff0c\u9700\u8981\u628a\u540d\u79f0\u66f4\u6539\u4e3a\u4e0b\u5212\u7ebf\u98ce\u683c\u624d\u80fd\u6b63\u5e38\u663e\u793a\uff0c\u8fd9\u5bf9\u5f00\u53d1\u8005\u975e\u5e38\u4e0d\u53cb\u597d\u3002\u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u9a7c\u5cf0\u98ce\u683c\u7684\u5173\u8054\u5173\u7cfb\u540d\u79f0\uff0c\u4e0d\u9700\u8981\u505a\u4efb\u4f55\u7279\u6b8a\u5904\u7406 return Form::make(User::with(['myProfile']), function (Form $form) { // \u76f4\u63a5\u4f7f\u7528\u9a7c\u5cf0\u98ce\u683c\u547d\u540d\uff0c\u4e0d\u9700\u505a\u5176\u4ed6\u5904\u7406 $form->text('myProfile.full_name'); ... }); 2.\u8c03\u6574\u5de5\u5177\u8868\u5355\u6570\u636e\u8bbe\u7f6e\u903b\u8f91\uff0c\u53ef\u5728 form \u65b9\u6cd5\u4e2d\u83b7\u53d6 default \u65b9\u6cd5\u6570\u636e use Dcat\\Admin\\Widgets\\Form; class Setting extends Form { public function form() { // \u83b7\u53d6 default \u65b9\u6cd5\u8bbe\u7f6e\u7684\u6570\u636e $id = $this->data()->id; $name = $this->data()->name; $this->text('name'); ... } public function default() { return [ 'id' => 1, 'name' => 'abc', ... ]; } } 3. hasMany \u4ee5\u53ca array \u8868\u5355\u652f\u6301\u6574\u4f53\u4f7f\u7528 rules \u9a8c\u8bc1\u89c4\u5219\u6821\u9a8c $form->hasMany(...)->rules('size:2'); 4.\u8c03\u6574 selectTable \u9ed8\u8ba4\u5360\u4f4d\u7b26\u4e3a \u9009\u62e9 ... 5.\u4f18\u5316\u8868\u5355row\u5e03\u5c40\u95f4\u8ddd #1092","title":"\u529f\u80fd\u6539\u8fdb"},{"location":"2.x/beta-change-log/#bug_13","text":"\u4fee\u590d ModelTree \u5220\u9664\u8282\u70b9\u65f6\u65e0\u6cd5\u5220\u9664\u95f4\u9694\u4e00\u4e2a\u5c42\u7ea7\u4ee5\u4e0a\u7684\u5b50\u8282\u70b9\u95ee\u9898 \u4fee\u590d\u5bfc\u51fa\u529f\u80fd\u5728\u90e8\u5206\u73af\u5883\u53ef\u80fd\u4f1a\u51fa\u73b0\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u8868\u5355\u8054\u52a8( load )\u52a0\u8f7d\u540e\u521d\u59cb\u503c\u4e22\u5931\u7684\u95ee\u9898 @xqbumu \u4fee\u590d\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\u540e\u663e\u793a\u63d0\u793a\u4fe1\u606f\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u6570\u636e\u8be6\u60c5 Show \u5b9e\u4f8b\u5316\u51fd\u6570\u5982\u679c\u4f20\u9012\u6a21\u578b\uff0c\u4e3b\u952e\u8d4b\u503c\u9519\u8bef\u7684\u95ee\u9898 @jisuye \u4fee\u590d\u8868\u683c setConstraints \u65b9\u6cd5\u5bf9\u5feb\u901f\u7f16\u8f91\u65e0\u6548\u95ee\u9898 #1119 \u4fee\u590d\u5728 iframe \u9875\u9762\u4e2d\u9884\u89c8\u56fe\u7247\u529f\u80fd\u5f02\u5e38\u95ee\u9898 \u4fee\u590d hasMany \u4ee5\u53ca array \u8868\u5355\u4e0b\u5220\u9664\u4f7f\u7528 required \u9a8c\u8bc1\u89c4\u5219\u7684\u5b57\u6bb5\u540e\u5bfc\u81f4\u65e0\u6cd5\u63d0\u4ea4\u8868\u5355\u95ee\u9898 \u4fee\u590d\u8868\u683c dialogTree \u5f53\u9876\u7ea7ID\u4e3a\u5b57\u7b26\u4e32 0 \u65f6\u52a0\u8f7d\u5f02\u5e38\u95ee\u9898 #1122","title":"BUG"},{"location":"2.x/beta-change-log/#v2020-beta","text":"\u53d1\u5e03\u65f6\u95f4 2021/3/8 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.20-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate","title":"v2.0.20-beta"},{"location":"2.x/beta-change-log/#_19","text":"1. selectTable \u8868\u5355\u8868\u683c\u5237\u65b0\u65f6\u4fdd\u7559\u524d\u9875\u7684\u6570\u636e\u72b6\u6001 selectTable \u8868\u5355\u8868\u683c\u5237\u65b0\u6216\u7ffb\u9875\u540e\u4f1a\u4fdd\u7559\u524d\u9875\u9009\u4e2d\u6216\u53d6\u6d88\u7684\u6570\u636e\u72b6\u6001 2. selectTable \u8868\u5355\u8bbe\u7f6e\u663e\u793a\u5b57\u6bb5\u540d\u79f0\u529f\u80fd\u4f18\u5316 \u5728\u65e7\u7248\u672c\u4e2d\uff0c\u5982\u679c\u60f3\u8981\u8bbe\u7f6e selectTable \u8868\u5355\u9009\u4e2d\u7684\u5b57\u6bb5\u6216\u663e\u793a\u7684\u5b57\u6bb5\uff0c\u9700\u8981\u5728 Renderable \u5bf9\u8c61\u4e2d\u8bbe\u7f6e\uff0c\u975e\u5e38\u7684\u9ebb\u70e6\u548c\u4e0d\u4fbf\uff0c\u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u6cd5\u8bbe\u7f6e\u9009\u4e2d\u7684\u5b57\u6bb5\u6216\u663e\u793a\u7684\u5b57\u6bb5 $form->selectTabole('user_id') ->from(UserTable::make()) ->pluck('full_name', 'id'); // \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u663e\u793a\u7684\u5b57\u6bb5\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u9009\u4e2d\u540e\u5c06\u4fdd\u5b58\u5230\u8868\u5355\u7684\u5b57\u6bb5 // \u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u4e0b\u9762\u7684\u65b9\u6cd5 $form->selectTabole('user_id') ->from(UserTable::make()) ->model(UserModel::class, 'id', 'full_name'); 3. selectTable \u3001 multipleSelectTable \u3001 radio \u3001 checkbox \u8868\u5355\u589e\u52a0 load \u65b9\u6cd5 \u4ece\u5f53\u524d\u7248\u672c\u5f00\u59cb\uff0c selectTable \u3001 multipleSelectTable \u3001 radio \u3001 checkbox \u4e5f\u53ef\u4ee5\u4f7f\u7528 load \u65b9\u6cd5\u8054\u52a8 select \u548c multipleSelect \u8868\u5355 $form->radio('type')->options([...])->load('category', 'categories/options'); $form->select('categories'); \u63a5\u53e3 categories/options \u8fd4\u56de\u683c\u5f0f\u5982\u4e0b [ { \"id\": 9, \"text\": \"xxx\" }, { \"id\": 21, \"text\": \"xxx\" }, ... ] 4.\u589e\u52a0\u83dc\u5355\u6c34\u5e73\u5e03\u5c40\u81ea\u52a8\u9002\u5e94\u9875\u9762\u4ee5\u53ca\u83dc\u5355\u9ad8\u5ea6\u53d8\u5316\u529f\u80fd \u542f\u7528\u83dc\u5355\u6c34\u5e73\u5e03\u5c40\u529f\u80fd\u540e\uff0c\u5f53\u9875\u9762\u9ad8\u5ea6\u6216\u83dc\u5355\u9ad8\u5ea6\u53d1\u751f\u53d8\u52a8\u65f6\uff0c\u9875\u9762\u4f1a\u81ea\u9002\u5e94\u3001\u81ea\u884c\u8c03\u6574\u5185\u5bb9\u95f4\u8ddd 5.\u589e\u52a0\u8868\u683c Grid::dropColumn() \u65b9\u6cd5\u7528\u4e8e\u5220\u9664\u8bbe\u7f6e\u7684\u5217 $nameColumn = $grid->column('name'); // \u5220\u9664\u540d\u79f0\u4e3a `name` \u7684\u5217 $grid->dropColumn('name'); // \u7b49\u540c\u4e8e $grid->dropColumn($nameColumn); 6.\u589e\u52a0 admin_javascript \u51fd\u6570 \u6b64\u51fd\u6570\u53ef\u7528\u4e8e\u5f80 php \u7684\u914d\u7f6e array \u4e2d\u6dfb\u52a0 JS \u4ee3\u7801\uff0c\u7528\u6cd5\u5982\u4e0b $form->text('number')->inputmask([ 'oncomplete' => admin_javascript('function () { // \u8fd9\u91cc\u662fjs\u4ee3\u7801 alert('inputmask complete'); }'), ]); 6. Form \u8868\u5355\u5e95\u90e8\u53ef\u9ed8\u8ba4\u52fe\u9009 \u67e5\u770b \u3001 \u7ee7\u7eed\u7f16\u8f91 \u3001 \u7ee7\u7eed\u521b\u5efa \u7b49\u9009\u9879\u529f\u80fd \u7528\u6cd5\u5982\u4e0b #1073 $form->footer(function (Footer $footer) { // \u8bbe\u7f6e`\u67e5\u770b`\u9ed8\u8ba4\u9009\u4e2d $footer->defaultViewChecked(); // \u8bbe\u7f6e`\u7ee7\u7eed\u7f16\u8f91`\u9ed8\u8ba4\u9009\u4e2d $footer->defaultEditingChecked(); // \u8bbe\u7f6e`\u7ee7\u7eed\u521b\u5efa`\u9ed8\u8ba4\u9009\u4e2d $footer->defaultCreatingChecked(); }); // \u8bbe\u7f6e`\u67e5\u770b`\u9ed8\u8ba4\u9009\u4e2d $form->defaultViewChecked(); // \u8bbe\u7f6e`\u7ee7\u7eed\u7f16\u8f91`\u9ed8\u8ba4\u9009\u4e2d $form->defaultEditingChecked(); // \u8bbe\u7f6e`\u7ee7\u7eed\u521b\u5efa`\u9ed8\u8ba4\u9009\u4e2d $form->defaultCreatingChecked();","title":"\u529f\u80fd\u6539\u8fdb"},{"location":"2.x/beta-change-log/#bug_14","text":"\u4fee\u590d\u8868\u683c\u4f7f\u7528\u5173\u8054\u5173\u7cfb\u5b57\u6bb5\u6392\u5e8f\u65f6\u5fc5\u987b\u5148 with \u95ee\u9898 \u4fee\u590d\u540c\u4e2a\u9875\u9762\u65e0\u6cd5\u540c\u65f6\u6e32\u67d3\u591a\u4e2a\u5f02\u6b65\u7ec4\u4ef6\u95ee\u9898 \u4fee\u590d\u6811\u5f62\u8868\u683c\u4e0b\u5220\u9664\u5b50\u8282\u70b9\u6570\u636e\u540e\u8df3\u8f6c\u5f02\u5e38\u95ee\u9898 #1071 \u4fee\u590d\u8868\u683c\u5bfc\u51fa\u5b57\u6bb5\u4e2d\u5b58\u5728\u7a7a\u6570\u7ec4\u65f6\u5bfc\u51fa\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u8868\u5355\u591a\u56fe\u4e0a\u4f20\u4f7f\u7528 sortable \u529f\u80fd\u8fdb\u884c\u6392\u5e8f\u4f1a\u5bfc\u81f4\u9875\u9762\u7684\u56fe\u7247\u5143\u7d20\u6d88\u5931\u4e0d\u89c1\u95ee\u9898 \u4fee\u590d\u8868\u5355\u5b57\u6bb5 disable \u65b9\u6cd5\u8bbe\u7f6e false \u65e0\u6548\u95ee\u9898 \u4fee\u590d multipleSelect \u8868\u5355\u4f7f\u7528 load \u8054\u52a8\u52a0\u8f7d\u65f6\u65e0\u6cd5\u628a\u6240\u6709\u9009\u4e2d\u9009\u9879\u4f20\u5165\u63a5\u53e3\u95ee\u9898 #1076 \u4fee\u590d\u8868\u683c\u89c4\u683c\u9009\u62e9\u5668\u5b58\u5728\u591a\u4e2a0\u5f00\u5934\u9009\u9879\u65f6\u9009\u4e2d\u529f\u80fd\u5f02\u5e38\u95ee\u9898","title":"BUG"},{"location":"2.x/beta-change-log/#v2019-beta","text":"\u53d1\u5e03\u65f6\u95f4 2021/2/21 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.19-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate","title":"v2.0.19-beta"},{"location":"2.x/beta-change-log/#bug_15","text":"\u4fee\u590d\u975e\u8d85\u7ba1\u89d2\u8272\u4e0b\u8bf7\u6c42 \u5185\u7f6eapi \u65f6\u63d0\u793a \u65e0\u6743\u8bbf\u95ee \u95ee\u9898 \u4fee\u590d\u5728\u5f39\u7a97\u4e2d\u4f7f\u7528\u65f6\u95f4\u8303\u56f4\u8868\u5355\u62a5\u9519\u95ee\u9898","title":"BUG\u4fee\u590d"},{"location":"2.x/beta-change-log/#v2018-beta","text":"\u53d1\u5e03\u65f6\u95f4 2021/2/20 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.18-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate","title":"v2.0.18-beta"},{"location":"2.x/beta-change-log/#_20","text":"1.\u589e\u52a0\u83dc\u5355\u9876\u90e8\u6a2a\u5411\u5e03\u5c40 (Horizontal) \u8bbe\u7f6e\u914d\u7f6e\u53c2\u6570 admin.layout.horizontal_menu \u7684\u503c\u4e3a true \u5f00\u542f\u6b64\u529f\u80fd\uff0c\u6548\u679c\u5982\u4e0b 2.\u6743\u9650\u4e2d\u95f4\u4ef6\u4ee5\u53ca\u8df3\u8fc7\u767b\u9646\u5224\u65ad\u65f6\u53ef\u4ee5\u586b\u5199\u8def\u7531\u522b\u540d\u5e76\u4e14\u65e0\u9700\u589e\u52a0\u524d\u7f00 \u914d\u7f6e\u6587\u4ef6\u4ee5\u53ca\u6743\u9650\u8bbe\u7f6e\u8def\u7531\u522b\u540d\u65f6\u65e0\u9700\u586b\u5199\u8def\u7531\u524d\u7f00 'permission' => [ ... // \u8df3\u8fc7\u6743\u9650\u5224\u65ad 'except' => [ // \u53ef\u4ee5\u76f4\u63a5\u586b\u5199\u8def\u7531\u522b\u540d\uff0c\u5e76\u4e14\u65e0\u9700\u5199\u8def\u7531\u524d\u7f00 'custom.users', ], ], 3.\u6570\u636e\u8868\u683c\u884c\u6570\u636e\u589e\u52a0 _index \u5b57\u6bb5\u7528\u4e8e\u4fdd\u5b58\u884c\u5e8f\u53f7 \u6570\u636e\u8868\u683c\u884c\u6570\u636e\u589e\u52a0 _index \u5b57\u6bb5\u7528\u4e8e\u4fdd\u5b58\u884c\u5e8f\u53f7\uff0c\u4ece 0 \u5f00\u59cb\uff0c\u7528\u6cd5\u5982\u4e0b // \u5728 display \u56de\u8c03\u4e2d\u4f7f\u7528 $grid->column('\u5e8f\u53f7')->display(function () { return $this->_index + 1; }); // \u5728\u884c\u64cd\u4f5c action \u4e2d\u4f7f\u7528 $grid->actions(function ($actions) { $index = $this->_index; ... }); 4.\u91cd\u547d\u540d markdown \u7ec4\u4ef6\u9759\u6001\u8d44\u6e90\u522b\u540d\uff0c\u907f\u514d\u4e0e\u81ea\u5b9a\u4e49 blade \u6807\u7b7e\u4ea7\u751f\u51b2\u7a81 5.\u589e\u52a0\u914d\u7f6e\u53c2\u6570 admin.menu.default_icon \u7528\u4e8e\u8bbe\u7f6e\u9ed8\u8ba4\u83dc\u5355\u56fe\u6807 admin.menu.default_icon \u7528\u4e8e\u8bbe\u7f6e\u83dc\u5355\u9ed8\u8ba4\u56fe\u6807\uff0c\u9ed8\u8ba4\u503c\u4e3a feather icon-circle 6.\u589e\u52a0\u65b0\u7684\u533a\u5757\u4f4d\u7f6e NAVBAR_BEFORE \u4ee5\u53ca NAVBAR_AFTER use Dcat\\Admin\\Admin; // \u5f80\u9876\u90e8\u5bfc\u822a\u680f\u524d\u8f93\u51fa\u5185\u5bb9 admin_inject_section(Admin::SECTION['NAVBAR_BEFORE'], view('...')); // \u5f80\u9876\u90e8\u5bfc\u822a\u680f\u540e\u8f93\u51fa\u5185\u5bb9 admin_inject_section(Admin::SECTION['NAVBAR_AFTER'], view('...')); 6.\u4f18\u5316\u8868\u683c\u5b57\u6bb5\u9009\u62e9\u5668\u4ee3\u7801","title":"\u529f\u80fd\u6539\u8fdb"},{"location":"2.x/beta-change-log/#bug_16","text":"\u4fee\u590d\u6269\u5c55\u7ba1\u7406\u9875\u9762 new \u6807\u7b7e\u663e\u793a\u5f02\u5e38\u95ee\u9898 #1044 \u4fee\u590d\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\u540e\u76f4\u63a5\u5220\u9664\u62a5\u9519\u95ee\u9898 #1058 \u4fee\u590d Form::number \u8868\u5355\u5728\u4f7f\u7528 min \u548c max \u65b9\u6cd5\u540e\u8f93\u5165\u503c\u5f02\u5e38\u95ee\u9898","title":"BUG\u4fee\u590d"},{"location":"2.x/beta-change-log/#v2017-beta","text":"\u53d1\u5e03\u65f6\u95f4 2021/2/5 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5e76\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.17-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate","title":"v2.0.17-beta"},{"location":"2.x/beta-change-log/#_21","text":"1.\u4f18\u5316\u8868\u683c\u6392\u5e8f\u529f\u80fd \u652f\u6301 orderBy \u76f4\u63a5\u4f7f\u7528\u5173\u8054\u5173\u7cfb\u8868\u5b57\u6bb5\u8fdb\u884c\u6392\u5e8f\uff0c\u6ce8\u610f\u8fd9\u91cc\u4ec5\u652f\u6301 \u4e00\u5bf9\u4e00 \u4ee5\u53ca \u4e00\u5bf9\u591a \u5173\u8054\u5173\u7cfb $grid->model()->orderBy('profile.age'); 2.\u589e\u52a0\u6a21\u578b\u6811\u4ee5\u53ca\u6811\u5f62\u8868\u683c\u81ea\u5b9a\u4e49 parent_id \u503c\u529f\u80fd \u6a21\u578b\u6811\u4ee5\u53ca\u6811\u5f62\u8868\u683c\u53ef\u4ee5\u5728 model \u4e2d\u81ea\u5b9a\u4e49 parent_id \u503c\uff0c\u9ed8\u8ba4\u503c\u4e3a 0 class Category extends Model { use ModelTree; // \u8bbe\u7f6e\u9ed8\u8ba4 parent_id \u4e3a A protected $defaultParentId = 'A'; } 3.\u6570\u636e\u8be6\u60c5 file \u652f\u6301\u5c55\u793a\u591a\u6587\u4ef6 #985 $show->field('...')->files(); \u6548\u679c 4. Form::input \u652f\u6301\u6570\u7ec4\u6279\u91cf\u8bbe\u7f6e $form->submitted(function ($form) { $form->input(['k1' => 'v1', 'k2' => 'v2' ...]); }); 5.\u6269\u5c55\u7ba1\u7406\u652f\u6301 logo \u4ee5\u53ca \u522b\u540d\u5c55\u793a \u8be6\u7ec6\u7528\u6cd5\u53c2\u8003\u6587\u6863 \u6269\u5c55 6.\u589e\u52a0admin_route\u65b9\u6cd5\u6839\u636e\u522b\u540d\u83b7\u53d6URL app/Admin/routes.php \u8def\u7531\u6ce8\u518c\u5982\u4e0b Route::group([ 'prefix' => config('admin.route.prefix'), 'namespace' => config('admin.route.namespace'), 'middleware' => config('admin.route.middleware'), ], function (Router $router) { // \u8bbe\u7f6e\u522b\u540d $router->resource('users', 'UserController', [ 'names' => ['index' => 'my-users'], ]); }); \u6839\u636e\u522b\u540d\u83b7\u53d6URL // \u83b7\u53d6url $url = admin_route('my-users'); // \u5224\u65ad\u8def\u7531 $isUsers = request()->routeIs(admin_route_name('users')); 8.JsonResponse::location \u5141\u8bb8\u4e0d\u4f20\u53c2 \u5982\u679c\u4e0d\u4f20\u53c2\u4f1a\u5728 1 \u79d2\u4e4b\u540e\u81ea\u52a8\u5237\u65b0\u5f53\u524d\u9875\u9762 return Admin::json()->success('\u64cd\u4f5c\u6210\u529f')->location(); 9.\u9875\u9762\u5e03\u5c40Layout\\Column\u652f\u6301\u7b49\u5bbd\u5e03\u5c40 \u5f53\u5217\u5bbd\u5ea6\u8bbe\u7f6e\u4e3a 0 \u65f6\u4f1a\u4f7f\u7528\u7b49\u5bbd\u5e03\u5c40 #1018 use Dcat\\Admin\\Layout\\Row; use Dcat\\Admin\\Layout\\Content; return Content::make() ->body(function (Row $row) { $row->column(0, view('...')); }); 10.\u9875\u9762\u5e03\u5c40Layout\\Row\u652f\u6301no-gutters\u5c5e\u6027 .row \u4e0a\u5e26\u6709 margin-left: -15px;margin-right: -15px; \u5c5e\u6027\uff0c\u4f60\u53ef\u4ee5\u5728 .row \u4e0a\u4e0a\u5b9a\u4e49 .no-gutters \u5c5e\u6027\uff0c\u4ece\u800c\u6d88\u9664\u8fd9\u4e2a\u5c5e\u6027\uff0c\u4f7f\u9875\u9762\u4e0d\u4f1a\u989d\u5916\u5bbd\u51fa 30px \uff0c\u5373 <div class=\"row no-gutters\"... $content->row(function (Row $row) { // \u542f\u7528 no-gutters $row->noGutters(); $row->column(9, function (Column $column) { $column->row($this->card(['col-md-12', 20], '#4DB6AC')); $column->row(function (Row $row) { // \u542f\u7528 no-gutters $row->noGutters(); $row->column(4, $this->card(['col-md-4', 30], '#80CBC4')); $row->column(4, $this->card(['col-md-4', 30], '#4DB6AC')); $row->column(4, function (Column $column) { $column->row(function (Row $row) { // \u542f\u7528 no-gutters $row->noGutters(); $row->column(6, $this->card(['col-md-6', 30], '#26A69A')); $row->column(6, $this->card(['col-md-6', 30], '#26A69A')); }); }); }); }); }); \u6548\u679c\u5982\u4e0b 11.\u8868\u683c\u5220\u9664\u6570\u636e\u540e\u4fdd\u7559URL\u7684get\u53c2\u6570 \u5728\u4e4b\u524d\u7684\u7248\u672c\u4e2d\uff0c\u5220\u9664\u6570\u636e\u540e\u4f1a\u4e22\u5931 URL \u7684 get \u53c2\u6570\uff0c\u5bfc\u81f4\u8df3\u8f6c\u56de\u8868\u683c\u7b2c\u4e00\u9875\uff0c\u8fd9\u4e2a\u7248\u672c\u5bf9\u8fd9\u4e2a\u529f\u80fd\u8fdb\u884c\u4e86\u4f18\u5316\uff0c\u5220\u9664\u540e\u4f9d\u7136\u4f1a\u4fdd\u7559 URL \u7684 get \u53c2\u6570 #961 12.\u91cd\u6784\u6587\u4ef6\u4e0a\u4f20\u524d\u7aef\u4ee3\u7801 \u6b64\u529f\u80fd\u4e3a\u6280\u672f\u6027\u4f18\u5316\uff0c\u8fd9\u4e2a\u7248\u672c\u5bf9\u6587\u4ef6\u4e0a\u4f20\u524d\u7aef\u4ee3\u7801\u8fdb\u884c\u4e86\u91cd\u6784\u3001\u62c6\u5206\u4ee3\u7801\uff0c\u4f7f\u5176\u66f4\u6613\u9605\u8bfb\u548c\u7ef4\u62a4","title":"\u529f\u80fd\u6539\u8fdb"},{"location":"2.x/beta-change-log/#bug_17","text":"\u4fee\u590d MultipleSelect \u8868\u5355\u6837\u5f0f\u5f02\u5e38\u95ee\u9898 #967 \u4fee\u590d\u52a0\u8f7d markdown \u7ec4\u4ef6\u540e\u4f7f\u7528 select2 \u8868\u5355\u5f02\u5e38\u95ee\u9898 #990 \u4fee\u590d\u6587\u4ef6\u4e0a\u4f20\u5728 Linux \u670d\u52a1\u5668\u4e0b\u4fdd\u5b58\u7e41\u4f53\u4e2d\u6587\u6587\u4ef6\u540d\u4e22\u5931\u95ee\u9898 #993 \u4fee\u590d Widgets\\Dropdown::click \u65e0\u6cd5\u663e\u793a\u9ed8\u8ba4\u9009\u9879\u95ee\u9898 \u4fee\u590d form \u8868\u5355\u4e2d\u7684 number \u7ec4\u4ef6\u6587\u672c\u5185\u5bb9\u4e3a\u7a7a\u65f6\u70b9\u51fb\u52a0\u51cf\u6309\u94ae\u51fa\u73b0 NaN \u95ee\u9898 #995 \u4fee\u590d\u56fe\u7247\u9884\u89c8\u5931\u8d25\u63d0\u793a\u65e0\u6cd5\u4f7f\u7528\u7ffb\u8bd1\u6587\u4ef6\u95ee\u9898 \u4fee\u590d\u4e00\u5bf9\u4e00\u5173\u8054\u5173\u7cfb Range \u8868\u5355\u4f7f\u7528\u9a8c\u8bc1\u89c4\u5219\u5224\u65ad\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u591a\u5e94\u7528\u60c5\u51b5\u4e0b\u8def\u7531\u522b\u540d\u51b2\u7a81\u7684\u95ee\u9898","title":"BUG\u4fee\u590d"},{"location":"2.x/beta-change-log/#v2016-beta","text":"\u53d1\u5e03\u65f6\u95f4 2021/1/11 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.16-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate","title":"v2.0.16-beta"},{"location":"2.x/beta-change-log/#_22","text":"**1.\u8868\u5355\u5b57\u6bb5\u7684 disableHorizontal \u8c03\u6574\u4e3a horizontal ** \u66f4\u6539\u8868\u5355\u5b57\u6bb5\u5e03\u5c40\u65b9\u5f0f\u4e3a horizontal \uff0c\u6b64\u529f\u80fd\u9ed8\u8ba4\u542f\u7528\uff0c\u7528\u6cd5\u5982\u4e0b // \u7981\u7528 horizontal \u5e03\u5c40 $form->text('...')->horizontal(false);","title":"\u7834\u574f\u6027\u53d8\u52a8"},{"location":"2.x/beta-change-log/#_23","text":"1.\u589e\u5f3a\u8868\u683c\u5b57\u6bb5\u6392\u5e8f(sortable)\u529f\u80fd \u4f7f\u8868\u683c\u5b57\u6bb5\u652f\u6301\u5173\u8054\u5173\u7cfb\u8868\u5b57\u6bb5\u4ee5\u53ca json \u5b57\u6bb5\u7684\u6392\u5e8f \u6ce8\u610f\uff0c\u5173\u8054\u5173\u7cfb\u4ec5\u652f\u6301 hasOne \u4ee5\u53ca belongsTo \u4e24\u79cd\u7c7b\u578b\u7684\u5b57\u6bb5\u6392\u5e8f\uff0c\u5e76\u4e14\u4e0d\u652f\u6301\u591a\u5c42\u7ea7\u5d4c\u5957\uff01 // \u5173\u8054\u5173\u7cfb\u8868\u5b57\u6bb5\u6392\u5e8f $grid->column('profile.age')->sortable(); // \u6307\u5b9a\u9700\u8981\u6392\u5e8f\u7684\u5b57\u6bb5\u540d\u79f0 $grid->column('my_age')->sortable('profile.age'); // json\u5b57\u6bb5\u6392\u5e8f $grid->column('options.price')->sortable('options->price'); // \u5173\u8054\u5173\u7cfb\u8868\u7684 json \u5b57\u6bb5\u6392\u5e8f $grid->column('profile.options.price')->sortable('profile.options->price'); \u652f\u6301 MySql \u7684 order by cast(`{field}` as {type}) \u7528\u6cd5 $grid->column('profile.age')->sortable(null, 'SIGNED'); $grid->column('profile.options.price')->sortable('profile.options->price', 'SIGNED'); 2.\u589e\u52a0 admin_exist \u51fd\u6570\uff0c\u7528\u4e8e\u4ee3\u66ff exit admin_exist \u7528\u4e8e\u4e2d\u65ad\u7a0b\u5e8f\u6267\u884c\uff0c\u5e76\u54cd\u5e94\u6570\u636e\u5230\u6d4f\u89c8\u5668\u8fdb\u884c\u663e\u793a\uff0c\u7528\u4e8e\u4ee3\u66ff exit \u548c die \uff0c\u4e0b\u9762\u7b80\u5355\u4ecb\u7ecd\u4e0b\u7528\u6cd5 \u7528\u6cd51\uff0c\u8fd4\u56de Content \u5e03\u5c40\u5bf9\u8c61\uff0c\u6b64\u7528\u6cd5\u53ef\u7528\u4e8e\u8fd4\u56de\u9519\u8bef\u4fe1\u606f\u663e\u793a\u5230\u524d\u7aef use Dcat\\Admin\\Widgets\\Alert; use Dcat\\Admin\\Layout\\Content; // \u4e2d\u65ad\u7a0b\u5e8f\uff0c\u5e76\u663e\u793a\u81ea\u5b9a\u4e49\u9875\u9762\u5230\u524d\u7aef admin_exit( Content::make() ->title('\u6807\u9898') ->description('\u63cf\u8ff0') ->body('\u9875\u9762\u5185\u5bb91') ->body(Alert::make('\u670d\u52a1\u5668\u51fa\u9519\u4e86~', 'Error')->danger()) ); \u6548\u679c\u5982\u4e0b \u7528\u6cd52\uff0c\u8fd4\u56de json \u683c\u5f0f\u6570\u636e\uff0c\u6b64\u7528\u6cd5\u7ecf\u5e38\u7528\u4e8e\u8868\u5355\u63d0\u4ea4\u6570\u636e\u7684 api \u8bf7\u6c42\u62e6\u622a\uff0c\u6216 Action \u7684 api \u8bf7\u6c42\u62e6\u622a use Dcat\\Admin\\Admin; admin_exit( Admin::json() ->success('\u6210\u529f\u4e86') ->refresh() ->data([ ... ]) ); // \u5f53\u7136\u4e5f\u53ef\u4ee5\u76f4\u63a5\u54cd\u5e94\u6570\u7ec4 admin_exit([ ... ]); \u7528\u6cd53\uff0c\u76f4\u63a5\u76f8\u5e94 Response \u5bf9\u8c61\u6216\u5b57\u7b26\u4e32 admin_exit('Hello world'); admin_exit(response('Hello world', 500)); 3.\u589e\u52a0 Show\\Field::bool() \u548c Show\\Field::bold() \u65b9\u6cd5 \u5b57\u6bb5\u503c\u4e3a\u771f\u663e\u793a \u2713 , \u5426\u5219\u663e\u793a \u2717 #940 $show->field('...')->bool(); \u5b57\u6bb5\u503c\u52a0\u7c97\u663e\u793a $show->field('...')->bold(); // \u6307\u5b9a\u989c\u8272 $show->field('...')->bold(admin_color()->primary()); 4.\u589e\u52a0 Form\\Footer::view() \u65b9\u6cd5 \u901a\u8fc7 Form\\Footer::view() \u65b9\u6cd5\u53ef\u4ee5\u81ea\u5b9a\u4e49\u6570\u636e\u8868\u5355\u7684\u5e95\u90e8\u89c6\u56fe #957 $form->footer(function ($footer) { $footer->view('...', [...]); }); 5.\u589e\u52a0\u8868\u5355\u9ed8\u8ba4\u663e\u793a\u6307\u5b9a Tab \u529f\u80fd // \u9ed8\u8ba4\u663e\u793a\u6807\u9898\u4e3a \u6807\u98982 \u7684 Tab $form->getTab()->active('\u6807\u98982'); // \u4e5f\u53ef\u4ee5\u6307\u5b9a\u504f\u79fb\u91cf $form->getTab()->activeByIndex(1); $form->tab('\u6807\u98981', function ($form) { ... }); $form->tab('\u6807\u98982', function ($form) { ... }); 6.\u589e\u52a0\u8868\u5355 Form\\Row::horizontal() \u65b9\u6cd5 \u8bbe\u7f6e\u5e03\u5c40\u4e3a horizontal $form->row(function (Form\\Row $form) { $form->horizontal(); ... }); 7.\u8868\u683c Modal \u589e\u52a0\u81ea\u5b9a\u4e49\u56fe\u6807\u529f\u80fd $grid->column('...')->modal(function ($modal) { // \u81ea\u5b9a\u4e49\u56fe\u6807 $modal->icon('feather icon-x'); return ...; }); 8.\u589e\u52a0\u8def\u7531\u57df\u540d\u9650\u5236\u914d\u7f6e \u901a\u8fc7\u914d\u7f6e\u53c2\u6570 admin.route.domain \u53ef\u4ee5\u9650\u5236\u8def\u7531\u7684\u57df\u540d, \u6253\u5f00\u914d\u7f6e\u6587\u4ef6 config/admin.php 'route' => [ 'domain' => env('ADMIN_ROUTE_DOMAIN'), 'prefix' => env('ADMIN_ROUTE_PREFIX', 'admin'), 'namespace' => 'App\\\\Admin\\\\Controllers', 'middleware' => ['web', 'admin'], ], 9.\u589e\u52a0 admin.session \u4e2d\u95f4\u4ef6\u7684\u542f\u7528\u6216\u7981\u7528\u914d\u7f6e \u4ece 2.0 \u7684\u7248\u672c\u4e4b\u540e admin.session \u4e2d\u95f4\u4ef6\u4e0d\u518d\u9ed8\u8ba4\u542f\u7528\uff0c\u5982\u679c\u60a8\u7684\u5e94\u7528\u540c\u65f6\u6709\u524d\u53f0\u548c\u540e\u53f0\uff0c\u5219\u9700\u8981\u5f00\u542f admin.session \u4e2d\u95f4\u4ef6\uff0c\u5426\u5219\u4f1a\u9020\u6210\u524d\u540e\u53f0 session \u51b2\u7a81\u95ee\u9898\u3002 \u628a\u914d\u7f6e\u53c2\u6570 admin.route.enable_session_middleware \u7684\u503c\u8bbe\u7f6e\u4e3a true \u5373\u53ef\u5f00\u542f 'route' => [ 'domain' => env('ADMIN_ROUTE_DOMAIN'), 'prefix' => env('ADMIN_ROUTE_PREFIX', 'admin'), 'namespace' => 'App\\\\Admin\\\\Controllers', 'middleware' => ['web', 'admin'], // \u5f00\u542f admin.session \u4e2d\u95f4\u4ef6 'enable_session_middleware' => true, ],","title":"\u529f\u80fd\u6539\u8fdb"},{"location":"2.x/beta-change-log/#bug_18","text":"\u4fee\u590d\u6570\u636e\u8868\u683c Grid::header \u4ee5\u53ca Grid::footer \u56de\u8c03\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e2d Model \u88ab\u8f6c\u5316\u4e3a array \u683c\u5f0f\u95ee\u9898 \u4fee\u590d\u5207\u6362\u4e3b\u9898\u65f6\u6587\u4ef6\u4e0a\u4f20\u6309\u94ae\u989c\u8272\u65e0\u6cd5\u8ddf\u7740\u6539\u53d8\u95ee\u9898 #938 \u4fee\u590d Widgets\\Table \u6784\u9020\u65b9\u6cd5\u7b2c\u4e09\u4e2a\u53c2\u6570\u8bbe\u7f6e\u65e0\u6548\u95ee\u9898 \u4fee\u590d app/Admin/bootstrap.php \u4e2d\u4f7f\u7528 config(['admin.layout.color' => '...']) \u8986\u76d6\u4e3b\u9898\u8272\u53ef\u80fd\u65e0\u6548\u95ee\u9898 \u4fee\u590d\u6570\u636e\u8868\u683c\u8fc7\u6ee4\u5668\u91cd\u7f6e\u5173\u8054\u5173\u7cfb\u8868\u5355\u5b57\u6bb5\u65e0\u6548\u95ee\u9898 #949 \u4fee\u590d\u8868\u683c\u8fc7\u6ee4\u5668 group \u529f\u80fd\u663e\u793a\u5f02\u5e38\u95ee\u9898 #929 \u4fee\u590d\u5f53\u9875\u9762\u5b58\u5728\u591a\u4e2a selectTable \u8868\u5355\u65f6\u6240\u6709\u5f39\u7a97\u90fd\u53ea\u663e\u793a\u7b2c\u4e00\u4e2a\u8bbe\u7f6e\u7684 title \u95ee\u9898 #926","title":"BUG\u4fee\u590d"},{"location":"2.x/beta-change-log/#v2015-beta","text":"\u53d1\u5e03\u65f6\u95f4 2021/1/3 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.15-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate","title":"v2.0.15-beta"},{"location":"2.x/beta-change-log/#_24","text":"1.\u5347\u7ea7select2\u5230v4.1.x-beta\u7248\u672c select \u7ec4\u4ef6\u5347\u7ea7\u81f3 v4.1.x-beta \uff0c\u4f7f tags \u8868\u5355\u4f53\u9a8c\u66f4\u597d\uff0c\u5e76\u652f\u6301\u4e86\u591a\u56fd\u8bed\u8a00\u7ffb\u8bd1\u3002 2.Widgets/Modal\u589e\u52a0\u5f39\u7a97\u5782\u76f4\u5c45\u4e2d\u4ee5\u53ca\u53ef\u6eda\u52a8\u529f\u80fd \u7528\u6cd5\u5982\u4e0b #901 $modal = Modal::make() ->xl() ->centered() // \u8bbe\u7f6e\u5f39\u7a97\u5782\u76f4\u5c45\u4e2d ->scrollable() // \u8bbe\u7f6e\u5f39\u7a97\u5185\u5bb9\u53ef\u6eda\u52a8 ->title(...) ->body(...); 3. Admin::requiredAssets \u652f\u6301\u4f20\u9012\u52a8\u6001\u53c2\u6570 use Dcat\\Admin\\Admin; // \u6ce8\u518c\u524d\u7aef\u7ec4\u4ef6\u522b\u540d // {lang} \u4e3a\u52a8\u6001\u53c2\u6570 Admin::asset()->alias('@test', [ 'js' => ['/vendor/test/js/{lang}.min.js'], ]); // {lang} \u4f1a\u88ab\u66ff\u6362\u4e3a zh_CN Admin::requireAssets('@test', ['lang' => 'zh_CN']); // \u4e5f\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528 Admin::requireAssets('@test?lang=zh_CN');","title":"\u529f\u80fd\u6539\u8fdb"},{"location":"2.x/beta-change-log/#bug_19","text":"\u4fee\u590d\u8868\u5355 block \u5e03\u5c40\u65e0\u6cd5\u4fdd\u5b58\u6570\u636e\u95ee\u9898 #883 \u4fee\u590d hasMany \u8868\u5355\u4e0b\u4f7f\u7528 currency \u5931\u6548\u95ee\u9898 #886 \u4fee\u590d\u6570\u636e\u8868\u5355\u4fdd\u5b58\u540e\u81ea\u52a8\u8df3\u8f6c\u5230\u8be6\u60c5\u9875\u95ee\u9898 #893 \u4fee\u590d editor \u8868\u5355\u65e0\u6cd5\u6e05\u7a7a\u6570\u636e\u95ee\u9898 #895 \u4fee\u590d hasMany \u8868\u5355\u4e0b\u4f7f\u7528 tags \u7684 required \u9a8c\u8bc1\u5f02\u5e38\u95ee\u9898 #905 \u4fee\u590d\u591a\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u5220\u9664\u5355\u4e2a\u6587\u4ef6\u65f6\u4f1a\u5bfc\u81f4\u5168\u90e8\u6587\u4ef6\u88ab\u6e05\u7a7a\u95ee\u9898 #914 \u4fee\u590d\u8868\u683c\u5b57\u6bb5\u65e0\u6cd5\u4f7f\u7528\u6a21\u578b\u8bbf\u95ee\u5668\u95ee\u9898","title":"Bug\u4fee\u590d"},{"location":"2.x/beta-change-log/#v2013-beta","text":"\u53d1\u5e03\u65f6\u95f4 2020/12/23 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.13-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate","title":"v2.0.13-beta"},{"location":"2.x/beta-change-log/#v2014-beta","text":"\u53d1\u5e03\u65f6\u95f4 2020/12/24 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.14-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate","title":"v2.0.14-beta"},{"location":"2.x/beta-change-log/#_25","text":"1.\u4f18\u5316\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\u9519\u8bef\u4fe1\u606f\u63d0\u793a \u5728\u65e7\u7248\u672c\u4e2d\uff0c\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\u7684\u9519\u8bef\u63d0\u793a\u4fe1\u606f\u4e0d\u592a\u660e\u786e\uff0c\u5bfc\u81f4\u96be\u4ee5\u5b9a\u4e49\u9519\u8bef\u539f\u56e0\uff0c\u6240\u4ee5\u5728\u8fd9\u4e2a\u7248\u672c\u4e2d\u5bf9\u9519\u8bef\u63d0\u793a\u8fdb\u884c\u4e86\u4f18\u5316\uff0c\u4e00\u65e6\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\u4f1a\u663e\u793a\u5177\u4f53\u539f\u56e0\u3002","title":"\u529f\u80fd\u6539\u8fdb"},{"location":"2.x/beta-change-log/#bug_20","text":"\u4fee\u590d\u8868\u683c\u5b57\u6bb5\u4e0e\u6a21\u578b casts \u5c5e\u6027\u4ea7\u751f\u51b2\u7a81\uff0c\u4ee5\u53ca display \u95ed\u5305\u4e2d\u4f7f\u7528\u5b57\u7b26\u4e32\u62fc\u63a5\u663e\u793a\u5f02\u5e38\u95ee\u9898 #876 \u4fee\u590d\u8868\u5355\u52a8\u6001\u663e\u793a\u529f\u80fd\u65e0\u6cd5\u4f7f\u7528\u95ee\u9898 #879 \u4fee\u590d\u8868\u5355\u4f7f\u7528 Block \u5e03\u5c40\u65f6\u65e0\u6cd5\u663e\u793a\u7f16\u8f91\u6570\u636e\u95ee\u9898 #877","title":"Bug\u4fee\u590d"},{"location":"2.x/beta-change-log/#v2013-beta_1","text":"\u53d1\u5e03\u65f6\u95f4 2020/12/23 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.13-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate","title":"v2.0.13-beta"},{"location":"2.x/beta-change-log/#bug_21","text":"\u4fee\u590d\u8868\u683c\u5c55\u793a\u5173\u8054\u5173\u7cfb\u5b57\u6bb5\u5f53\u5173\u8054\u6570\u636e\u4e0d\u5b58\u5728\u65f6\u6709\u53ef\u80fd\u62a5\u9519\u95ee\u9898 #867 \u4fee\u590d\u5f53\u8868\u683c\u4f7f\u7528\u6570\u636e\u4ed3\u5e93\u8fd4\u56de\u6570\u7ec4\u6216\u975e\u6a21\u578b collection \u65f6 display \u65b9\u6cd5\u65e0\u6548\u95ee\u9898 #869","title":"Bug\u4fee\u590d"},{"location":"2.x/beta-change-log/#v2012-beta","text":"\u53d1\u5e03\u65f6\u95f4 2020/12/22 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.12-beta\" php artisan admin:publish --assets --migrations --force php artisan migrate","title":"v2.0.12-beta"},{"location":"2.x/beta-change-log/#_26","text":"1.\u56fe\u7247/\u6587\u4ef6\u4e0a\u4f20\u8868\u5355 removable \u91cd\u547d\u540d\u4e3a removable $form->file('...')->removable();","title":"\u7834\u574f\u6027\u53d8\u52a8"},{"location":"2.x/beta-change-log/#_27","text":"1.\u652f\u6301PHP8.0 2.\u56fe\u7247/\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u652f\u6301\u76d1\u542cWebUploader\u4e8b\u4ef6 \u901a\u8fc7 on \u65b9\u6cd5\u53ef\u4ee5\u76d1\u542c WebUploader\u6587\u4ef6\u4e0a\u4f20\u76f8\u5173\u4e8b\u4ef6 $form->file('...') ->on('startUpload', <<<JS function () { console.log('\u6587\u4ef6\u5f00\u59cb\u4e0a\u4f20...', this); // \u4e0a\u4f20\u6587\u4ef6\u524d\u9644\u52a0\u81ea\u5b9a\u4e49\u53c2\u6570\u5230\u6587\u4ef6\u4e0a\u4f20\u63a5\u53e3 this.uploader.options.formData['custom_field'] = '...'; } JS ) ->on('uploadFinished', <<<JS function () { console.log('\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6bd5'); } JS ); // 3.\u76d1\u542c\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\u6216\u6587\u4ef6\u88ab\u5220\u9664\u65f6\u4ea7\u751f\u7684\u53d8\u52a8 \u901a\u8fc7\u4ee5\u4e0b\u65b9\u6cd5\u53ef\u4ee5\u76d1\u542c\u6587\u4ef6 \u4e0a\u4f20\u6210\u529f \u6216\u6587\u4ef6 \u88ab\u5220\u9664 \u65f6\u4ea7\u751f\u7684\u53d8\u52a8 $file = $form->file('...'); Admin::script( <<<JS $('{$file->getElementClassSelector()} .file-input').on('change', function () { console.log('\u6587\u4ef6\u53d1\u751f\u53d8\u52a8', this.value); }); JS ); 4.\u5141\u8bb8\u5728uploading\u4e8b\u4ef6\u4e2d\u62e6\u622a\u5e76\u54cd\u5e94\u9519\u8bef\u4fe1\u606f \u4ece\u8fd9\u4e2a\u7248\u672c\u5f00\u59cb\u652f\u6301\u5728\u8868\u5355\u7684 uploading \u4e8b\u4ef6\u4e2d\u62e6\u622a\u6587\u4ef6\u4e0a\u4f20\u5e76\u652f\u6301\u54cd\u5e94\u9519\u8bef\u4fe1\u606f\u5230\u524d\u7aef $form->uploading(function (Form $form) { return $form->response()->error('\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01'); }); 5.\u76d1\u542cselectTable\u9009\u4e2d\u503c\u53d8\u52a8 $selectTable = $form->selectTable('...')->from(...); Admin::script( <<<JS $('{$selectTable->getElementClassSelector()} input[type=\"hidden\"]').on('change', function () { console.log('\u9009\u4e2d\u503c\u53d1\u751f\u53d8\u5316', this.value); }); JS ); 6.\u8c03\u6574\u6811\u72b6\u8868\u683c\u65e0\u6570\u636e\u8fd4\u56de\uff0c\u53d6\u6d88\u8fd4\u56de404\u72b6\u6001\u7801 7.\u8c03\u6574\u8868\u683cdisplayer\u7c7b\u7684row\u5c5e\u6027\u503c\u7c7b\u578b\u4e3amodel 8.\u6697\u9ed1\u6a21\u5f0f\u7ec6\u8282\u4f18\u5316 $grid->column(...)->modal(function () { // $this \u6307\u5411 model \u5bf9\u8c61 dd($this); }); $grid->actions(function () { // $this \u6307\u5411 model \u5bf9\u8c61 dd($this); }); 9.\u4f18\u5316\u5361\u7247\u4e2d\u56fe\u8868\u663e\u793a\u6ea2\u51fa\u7684\u95ee\u9898 #822 10.widget\u7ec4\u4ef6\u589e\u52a0when\u65b9\u6cd5 $modal = Dcat\\Admin\\Widgets\\Modal::make() ->when($condition, function ($modal) { // \u5f53 $condition \u7684\u503c\u4e3a \u771f \u65f6\uff0c\u4f1a\u6267\u884c\u95ed\u5305\u91cc\u9762\u7684\u903b\u8f91 $modal->xl(); }) ->body(...) ->render();","title":"\u529f\u80fd\u6539\u8fdb"},{"location":"2.x/beta-change-log/#bug_22","text":"\u4fee\u590d Grid\\Filter::group \u65e0\u6cd5\u4fdd\u6301\u9009\u62e9\u72b6\u6001\u95ee\u9898 #739 \u4fee\u590d Form::hasMany \u8868\u5355\u6761\u76ee\u5220\u9664\u540e\u4ecd\u7136\u9a8c\u8bc1 required \u95ee\u9898 #795 \u4fee\u590d \u5730\u56fe \u8868\u5355\u65e0\u6cd5\u4f7f\u7528\u95ee\u9898 \u4fee\u590d\u5f53\u751f\u6210 composer \u7c7b\u6620\u5c04\u6587\u4ef6\u4e14\u7c7b\u6587\u4ef6\u88ab\u5220\u9664\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528 guessClassFileName \u4f1a\u62a5\u9519\u95ee\u9898 \u4fee\u590d\u6570\u636e\u5bfc\u51fa\u4f7f\u7528 Fetched \u4e8b\u4ef6\u62a5\u9519\u95ee\u9898 #815 \u4fee\u590d\u8bbe\u7f6e Grid name \u4e4b\u540e\u65e0\u6cd5\u91cd\u7f6e filter \u95ee\u9898 \u4fee\u590d select2 \u65e0\u6cd5\u81ea\u52a8\u4f7f\u7528\u4e2d\u6587\u8bed\u8a00\u5305\u95ee\u9898 #839 \u4fee\u590d\u8868\u5355\u52fe\u9009 \u7ee7\u7eed\u521b\u5efa \u4ee5\u53ca \u7ee7\u7eed\u7f16\u8f91 \u8df3\u8f6c\u8def\u7531\u9519\u8bef\u95ee\u9898 #814 \u4fee\u590d\u4e00\u5bf9\u4e00\u5173\u8054\u5173\u7cfb range \u8868\u5355\u8bbe\u7f6e rules \u65e0\u6548\u95ee\u9898 \u4fee\u590d\u5f53\u542f\u7528 fixColumns \u65f6\uff0c\u65f6\u95f4\u7b5b\u9009\u4e0b\u62c9\u4f1a\u88ab\u906e\u6321\u95ee\u9898 #833 \u4fee\u590d\u83dc\u5355\u4f7f\u7528 fa \u56fe\u6807\u65e0\u6cd5\u81ea\u52a8\u5bf9\u9f50\u95ee\u9898 #758 \u4fee\u590d\u8868\u5355 row \u5e03\u5c40\u4e0b\u4f7f\u7528 hasMany \u63d0\u4ea4\u62a5\u9519\u95ee\u9898 #801 \u4fee\u590d\u8868\u5355 hasMany \u65e0\u6cd5\u4f7f\u7528 select \u8054\u52a8\u95ee\u9898 #769","title":"Bug\u4fee\u590d"},{"location":"2.x/beta-change-log/#v2011-beta","text":"\u53d1\u5e03\u65f6\u95f4 2020/12/06 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.11-beta\" php artisan admin:publish --assets --force php artisan admin:publish --migrations --force # \u8868\u7ed3\u6784\u6709\u53d8\u52a8 php artisan migrate","title":"v2.0.11-beta"},{"location":"2.x/beta-change-log/#bug_23","text":"\u4fee\u590d\u4f7f\u7528 pjax \u91cd\u590d\u5237\u65b0\u9875\u9762\u53ef\u80fd\u5bfc\u81f4 Dcat.init \u76d1\u542c\u5931\u6548\u95ee\u9898 \u4fee\u590d admin:export-seed --users \u4f1a\u751f\u6210\u591a\u4f59\u4ee3\u7801\u95ee\u9898 \u4fee\u590d\u8868\u5355\u7f16\u8f91\u9875\u9762\u4fdd\u5b58\u540e\u8df3\u8f6c\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u8868\u5355\u9875\u9762\u9009\u62e9\u7ee7\u7eed\u7f16\u8f91\u4f1a\u5bfc\u81f4 hasMany \u91cd\u590d\u6dfb\u52a0\u6570\u636e\u95ee\u9898 \u4fee\u590d select \u8868\u5355\u8054\u52a8\u540e\u539f select2 config \u4e22\u5931\u95ee\u9898 #779 \u4fee\u590d map \u8868\u5355\u52a0\u8f7d\u5f02\u5e38\u95ee\u9898 #764 \u4fee\u590d\u6279\u91cf\u5220\u9664\u529f\u80fd\u5220\u9664\u6570\u636e\u540e\u65e0\u6cd5\u81ea\u52a8\u5237\u65b0\u9875\u9762\u95ee\u9898 \u4fee\u590d hasMany \u8868\u5355\u7f16\u8f91\u9875\u9762\u65e0\u6cd5\u6b63\u5e38\u5c55\u793a row \u4ee5\u53ca column \u5e03\u5c40\u95ee\u9898 \u4fee\u590d Dcat.init \u76d1\u542c\u4f1a\u88ab\u5f02\u6b65\u5f39\u7a97\u89e3\u7ed1\u95ee\u9898 \u4fee\u590d\u8868\u683c\u5de5\u5177\u680f\u4e0b\u62c9\u83dc\u5355\u4f1a\u88ab\u56fa\u5b9a\u5217\u8868\u683c\u906e\u6321\u95ee\u9898 #728 \u4fee\u590d\u7981\u7528 showColumnSelector \u65f6\u4ecd\u7136\u4f1a\u8bfb\u53d6\u7f13\u5b58\u5185\u5bb9\u95ee\u9898","title":"Bug\u4fee\u590d"},{"location":"2.x/beta-change-log/#_28","text":"1.Form::divider \u589e\u52a0 title \u53c2\u6570 \u589e\u52a0 title \u53c2\u6570\u7528\u4e8e\u5728\u5206\u5272\u7ebf\u4e2d\u95f4\u663e\u793a\u6807\u9898\u529f\u80fd\uff0c\u7528\u6cd5 $form->divider('\u6807\u9898'); 2.Grid::footer\u4ee5\u53caGrid::header\u8c03\u6574\u4e3a\u652f\u6301\u591a\u6b21\u56de\u8c03 $grid->header(...); $grid->header(...); $grid->header(...); 3.\u4f18\u5316\u8868\u683c\u89c4\u683c\u7b5b\u9009\u5668\u4ee5\u53caselect\u8868\u5355\u6837\u5f0f","title":"\u529f\u80fd\u6539\u8fdb"},{"location":"2.x/beta-change-log/#v2010-beta","text":"\u53d1\u5e03\u65f6\u95f4 2020/11/29 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.10-beta\" php artisan admin:publish --assets --force php artisan admin:publish --migrations --force # \u8868\u7ed3\u6784\u6709\u53d8\u52a8 php artisan migrate","title":"v2.0.10-beta"},{"location":"2.x/beta-change-log/#_29","text":"1.\u589e\u52a0\u8868\u5355\u53f3\u4e0a\u89d2\u63d0\u793a\u7a97\u5c55\u793a\u5b57\u6bb5\u9a8c\u8bc1\u9519\u8bef\u4fe1\u606f \u6b64\u529f\u80fd\u9ed8\u8ba4\u5f00\u542f\uff0c\u53ef\u4ee5\u901a\u8fc7 validationErrorToastr \u65b9\u6cd5\u7981\u7528 $form->validationErrorToastr(false); 2.\u589e\u52a0 Tree::maxDepth \u65b9\u6cd5\u7528\u4e8e\u9650\u5236\u6a21\u578b\u6811\u6700\u5927\u5c42\u7ea7 $tree->maxDepth(5); 3.\u4f18\u5316\u5bfc\u51fa\u529f\u80fd\uff0c\u652f\u6301\u6807\u9898\u8bbe\u7f6e\u5173\u8054\u5173\u7cfb\u5b57\u6bb5\u4ee5\u53ca\u81ea\u52a8\u8bfb\u53d6grid\u8868\u683c\u5217\u7684\u6807\u9898 \u5728\u5f53\u524d\u7248\u672c\u4e2d\u5bfc\u51fa\u5217\u9ed8\u8ba4\u4e0e column \u5217\u4e00\u81f4\uff0c\u4e0d\u518d\u9700\u8981\u624b\u52a8\u8bbe\u7f6e\u5bfc\u51fa\u7684\u5217\u540d\u79f0\u4ee5\u53ca\u7ffb\u8bd1\uff0c\u5e76\u4e14\u652f\u6301\u5173\u8054\u5173\u7cfb\u5b57\u6bb5 $grid->column('id'); $grid->column('name'); ... // \u9ed8\u8ba4\u4e0e\u4e0a\u9762\u7684\u5217\u76f8\u540c $grid->export(); 4.\u5de5\u5177\u8868\u5355\u589e\u52a0resetButton\u4e0esubmitButton\u65b9\u6cd5 // \u7981\u7528\u91cd\u7f6e\u548c\u63d0\u4ea4\u6309\u94ae $form->resetButton(false); $form->submitButton(false); 5.\u8868\u5355\u5b57\u6bb5\u7684 disable \u4ee5\u53ca readOnly \u65b9\u6cd5\u589e\u52a0\u53c2\u6570\u63a7\u5236\u662f\u5426\u542f\u7528 // \u4f20 false \u5219\u4e0d\u542f\u7528 $form->text(...)->disable(false); 6.\u6587\u4ef6\u4e0a\u4f20\u589e\u52a0 withDeleteData \u5141\u8bb8\u7528\u6237\u8bbe\u7f6e\u8bf7\u6c42\u53c2\u6570\uff0c\u5e76\u5728\u4e0a\u4f20\u63a5\u53e3\u4ee5\u53ca\u5220\u9664\u63a5\u53e3\u4e2d\u589e\u52a0\u4e3b\u952e\u5b57\u6bb5 \u901a\u8fc7 withDeleteData \u65b9\u6cd5\u53ef\u4ee5\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570\u5230\u6587\u4ef6\u5220\u9664\u63a5\u53e3 $form->file(...)->withDeleteData(['key' => 'value]); 7.\u589e\u52a0 embeds \u8868\u5355\u7981\u6b62\u663e\u793a\u6807\u9898\u529f\u80fd` \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f20 false \u5219\u4e0d\u663e\u793a\u6807\u9898 $form->embeds('field', false, function ($form) { ... }); 8.\u91cd\u65b0\u7f16\u5199\u90e8\u5206\u5355\u5143\u6d4b\u8bd5\u7528\u4f8b\uff0c\u4ee5\u652f\u63012.x\u7528\u6cd5","title":"\u529f\u80fd\u6539\u8fdb"},{"location":"2.x/beta-change-log/#bug_24","text":"\u4fee\u590d\u7ba1\u7406\u5458\u8be6\u60c5\u9875\u65e0\u6cd5\u9009\u4e2d\u5df2\u6709\u6743\u9650\u95ee\u9898 \u4fee\u590d admin:export-seed \u547d\u4ee4\u5bfc\u51fa seeder \u7c7b\u540d\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u8868\u5355\u5220\u9664\u8df3\u8f6c\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u8868\u5355\u7ee7\u7eed\u7f16\u8f91\u8df3\u8f6c\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u7236\u8868\u4e0e hasMany \u5b58\u5728\u540c\u6837\u5b57\u6bb5\u540d\u79f0\u65f6\u65e0\u6cd5\u4fdd\u5b58\u7236\u8868\u5b57\u6bb5\u95ee\u9898 \u4fee\u590d\u6697\u9ed1\u6a21\u5f0f\u4e0b\u9009\u4e2d\u5b50\u83dc\u5355\u6837\u5f0f\u5f02\u5e38\u95ee\u9898 #712 \u4fee\u590d\u8868\u5355 block \u5e03\u5c40\u4e0b\u8868\u5355\u52a8\u6001\u663e\u793a\u529f\u80fd\u65e0\u6548\u95ee\u9898 #723 \u4f18\u5316 selectOptions \u5c42\u7ea7\u7ed3\u6784\u663e\u793a\uff0c\u89e3\u51b3\u524d\u7f00\u5448\u73b0\u968f\u5c42\u7ea7\u6df1\u5ea6\u6307\u6570\u589e\u52a0\u95ee\u9898 #618 \u4fee\u590d admin_view \u6ca1\u6709\u8fd4\u56de\u6570\u636e\u95ee\u9898 \u4fee\u590d select \u8868\u5355 ajax \u4ee5\u53ca load \u8bbe\u7f6e\u7684\u94fe\u63a5\u4e0d\u80fd\u5e26\u53c2\u6570\u95ee\u9898 #745 \u4fee\u590d\u8868\u683c\u884c\u64cd\u4f5c action \u7684 handle \u65b9\u6cd5\u53ea\u80fd\u83b7\u53d6\u6700\u540e\u4e00\u884c\u6570\u636e\u7684 id \u95ee\u9898 \u4fee\u590d list \u8868\u5355\u7f16\u8f91\u9875\u65e0\u6cd5\u5220\u9664\u5df2\u6709\u6570\u636e\u95ee\u9898 #759 \u4fee\u590d embeds \u8303\u56f4\u8868\u5355 name \u5c5e\u6027\u9519\u8bef\u95ee\u9898","title":"Bug\u4fee\u590d"},{"location":"2.x/beta-change-log/#v209-beta","text":"\u53d1\u5e03\u65f6\u95f4 2020/11/18 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.9-beta\" php artisan admin:publish --assets --force php artisan admin:publish --migrations --force # \u8868\u7ed3\u6784\u6709\u53d8\u52a8 php artisan migrate Bug\u4fee\u590d \u4fee\u590d\u8868\u683c filter::select \u8868\u5355\u8fdc\u7a0b\u52a0\u8f7d /load/ajax \u7b49\u529f\u80fd\u5931\u6548\u95ee\u9898 \u4fee\u590d\u524d\u7aef moment-timezone \u7ec4\u4ef6\u8def\u5f84\u52a0\u8f7d\u9519\u8bef\u95ee\u9898 #701 \u4fee\u590d Form::tree \u65e0\u6cd5\u4fdd\u5b58\u6570\u636e\u5bfc\u81f4\u7684\u65e0\u6cd5\u8bbe\u7f6e\u6743\u9650\u95ee\u9898 \u4fee\u590d\u5f53 hasMany \u8868\u5355\u4e0e\u7236\u8868\u6709\u540c\u6837\u5b57\u6bb5\u540d\u79f0\u65f6\u586b\u5145\u503c\u9ed8\u8ba4\u503c\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u8868\u5355 tab \u5e03\u5c40\u5d4c\u5957 row \u5e03\u5c40\u65f6\u65b0\u589e\u9875\u9762\u62a5\u9519\u95ee\u9898 #648 \u4fee\u590d\u5f53\u8868\u5355\u5b58\u5728 range \u7c7b\u578b\u5b57\u6bb5\u65f6\u63d0\u4ea4\u540e\u65e0\u6cd5\u83b7\u53d6 range \u4e0b\u9762\u6240\u6709\u8868\u5355\u503c\u95ee\u9898 \u4fee\u590d Form::select \u4f7f\u7528\u8868\u5355\u8054\u52a8\u529f\u80fd\u65f6select2\u7ec4\u4ef6\u65e0\u6548\u95ee\u9898","title":"v2.0.9-beta"},{"location":"2.x/beta-change-log/#v208-beta","text":"\u53d1\u5e03\u65f6\u95f4 2020/11/16 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.8-beta\" php artisan admin:publish --assets --force php artisan admin:publish --migrations --force # \u8868\u7ed3\u6784\u6709\u53d8\u52a8 php artisan migrate \u672c\u6b21\u7248\u672c\u4f5c\u4e3a 2.0.7-beta \u7684\u8865\u5145\u7248\u672c\uff0c\u4e3b\u8981\u4fee\u590d\u4ee5\u4e0b\u51e0\u4e2a\u95ee\u9898 \u4fee\u590d\u7ba1\u7406\u5458\u9875\u9762\u65e0\u6cd5\u67e5\u770b\u6743\u9650\u95ee\u9898 \u4fee\u590d\u8868\u5355block\u5e03\u5c40\u5931\u6548\u95ee\u9898 \u4fee\u590d\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u6e32\u521d\u59cb\u5316\u529f\u80fd\u5f02\u5e38\u95ee\u9898 \u4fee\u590d\u90e8\u5206\u8868\u5355\u5b57\u6bb5\u4e0d\u652f\u6301\u5355\u4e2a\u9875\u9762\u540c\u65f6\u6e32\u67d3\u591a\u4e2a\u7684\u95ee\u9898","title":"v2.0.8-beta"},{"location":"2.x/beta-change-log/#v207-beta","text":"\u53d1\u5e03\u65f6\u95f4 2020/11/15 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.7-beta\" php artisan admin:publish --assets --force php artisan admin:publish --migrations --force # \u8868\u7ed3\u6784\u6709\u53d8\u52a8 php artisan migrate \u529f\u80fd\u6539\u8fdb 1.\u5f15\u5165 jquery.initialize \u7ec4\u4ef6\uff0c\u7528\u4e8e\u76d1\u542c\u52a8\u6001\u751f\u6210\u7684\u9875\u9762\u5143\u7d20\u5e76\u8bbe\u7f6e\u4e00\u4e2a\u56de\u8c03\uff0c\u4e0b\u9762\u6765\u4e3e\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u6765\u6f14\u793a\u7528\u6cd5\uff1a \u5728\u65e7\u7248\u672c\u4e2d\uff0c\u5047\u5982\u4e00\u4e2a\u5143\u7d20\u662f JS \u52a8\u6001\u751f\u6210\u7684\uff0c\u5982\u679c\u6211\u4eec\u9700\u8981\u5bf9\u8fd9\u4e2a\u5143\u7d20\u7ed1\u5b9a\u4e00\u4e2a\u70b9\u51fb\u4e8b\u4ef6\u7684\u8bdd\uff0c\u90a3\u4e48\u6211\u4eec\u901a\u5e38\u9700\u8981\u8fd9\u4e48\u505a <div class=\"selector\">test</div> <script> Dcat.ready(function () { // \u9700\u8981\u5148 off \u518d on \u5426\u5219\u9875\u9762\u5237\u65b0\u540e\u4f1a\u9020\u6210\u91cd\u590d\u7ed1\u5b9a\u95ee\u9898 $(document).off('click', '.selector').on('click', '.selector', function () { ... }) }); </script> \u4e0a\u9762\u8fd9\u79cd\u505a\u6cd5\u4e00\u6765\u6bd4\u8f83\u9ebb\u70e6\uff0c\u9700\u8981\u5148 off \u518d on \uff1b\u4e8c\u6765\u65e0\u6cd5\u5bf9\u52a8\u6001\u751f\u6210\u7684\u5143\u7d20\u505a\u4e00\u4e9b\u7279\u6b8a\u5904\u7406\uff0c\u4f8b\u5982\u4f60\u60f3\u5728 .selector \u751f\u6210\u540e\u6539\u53d8\u80cc\u666f\u989c\u8272\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u5c31\u6ca1\u529e\u6cd5\u505a\u5230\u3002 \u5728\u8fd9\u4e2a\u7248\u672c\u4e2d\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 Dcat.init \u65b9\u6cd5\u6765\u76d1\u542c\u5143\u7d20\u52a8\u6001\u751f\u6210\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u89e3\u51b3\u4e0a\u9762\u4e24\u4e2a\u95ee\u9898 <div class=\"selector\">test</div> <script> Dcat.ready(function () { // $this \u662f\u5f53\u524d\u5143\u7d20\u7684jquery dom\u5bf9\u8c61 // id \u662f\u5f53\u524d\u5143\u7d20\u7684id\u5c5e\u6027\uff0c\u5982\u679c\u5f53\u524d\u5143\u7d20\u6ca1\u6709id\u5219\u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2a\u968f\u673aid Dcat.init('.selector', function ($this, id) { // \u4fee\u6539\u5143\u7d20\u7684\u80cc\u666f\u8272 $this.css({background: \"#fff\"}); // \u8fd9\u91cc\u4e0d\u9700\u8981 off \u518d\u91cd\u65b0 on\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u533f\u540d\u51fd\u6570\u53ea\u4f1a\u6267\u884c\u4e00\u6b21 $this.on('click', function () { ... }); }); }); </script> \u5f97\u76ca\u4e8e\u8fd9\u4e2a jquery.initialize \u7ec4\u4ef6\u7684\u5f15\u5165\uff0c\u5728\u5f53\u524d\u8fd9\u4e2a\u7248\u672c\u4e2d\u6211\u4eec\u5bf9\u8868\u5355\u7ec4\u4ef6\u7684\u524d\u7aef\u4ee3\u7801\u4e5f\u8fdb\u884c\u4e86\u4f18\u5316\uff0c\u4f7f\u5176\u66f4\u5bb9\u6613\u652f\u6301 HasMany \u8fd9\u79cd\u52a8\u6001\u751f\u6210\u7684\u8868\u5355\u7c7b\u578b\uff0c\u5927\u5927\u964d\u4f4e\u4e86\u4ee3\u7801\u7684\u590d\u6742\u6027\u3002 2.Form::hasMany\u4ee5\u53caForm::array\u8868\u5355\u652f\u6301column\u548crow\u5e03\u5c40 \u5982\u679c\u5b57\u6bb5\u6bd4\u8f83\u591a\uff0c\u53ef\u4ee5\u7528 column \u548c row \u5e03\u5c40\u4ee5\u8282\u7701\u7a7a\u95f4 $form->array('field', function (NestedForm $form) { $form->column(6, function (NestedForm $form) { $form->text('...'); ... }); $form->column(6, function (NestedForm $form) { ... }); }); 3.\u914d\u7f6e\u8fc7admin.auth.except\u53c2\u6570\u7684\u8def\u7531\u4e0d\u9700\u8981\u9a8c\u8bc1\u6743\u9650 #673 4.Form\u3001Grid\u4ee5\u53caShow\u5b57\u6bb5\u7c7b\u589e\u52a0when\u65b9\u6cd5 \u7528\u6cd5\u793a\u4f8b\uff0c\u7c7b\u4f3c Laravel QueryBuilder \u7684 when \u65b9\u6cd5 \u5728\u8868\u683c\u4e2d // \u5f53\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u503c\u4e3a \u771f \u65f6\u624d\u4f1a\u6267\u884c\u95ed\u5305\u7684\u4ee3\u7801 $grid->column('title')->when(true, function (Grid\\Column $column, $value) { $column->label(); }); \u8868\u5355 // \u5f53\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u503c\u4e3a \u771f \u65f6\u624d\u4f1a\u6267\u884c\u95ed\u5305\u7684\u4ee3\u7801 $form->text('email')->when(true, function (Form\\Field\\Text $text, $value) { $text->type('email'); }); 5.\u7ba1\u7406\u5458\u6a21\u578b\u589e\u52a0canSeeMenu\u65b9\u6cd5\u63a7\u5236\u662f\u5426\u53ef\u89c1\u83dc\u5355 <?php namespace App\\Models; use Dcat\\Admin\\Models\\Administrator as Model; class Administrator extends Model { /** * \u63a7\u5236\u83dc\u5355\u662f\u5426\u53ef\u89c1\uff0c\u9ed8\u8ba4\u8fd4\u56detrue * * @param array|\\Illuminate\\Database\\Eloquent\\Model $menu \u83dc\u5355\u8282\u70b9 * @return bool */ public function canSeeMenu($menu) { return true; } } 6.\u589e\u52a0 admin_script\u3001admin_style\u3001admin_js\u3001admin_css\u4ee5\u53caadmin_require_assets\u51fd\u6570 // \u76f8\u5f53\u4e8e Admin::script admin_script('console.log(xxx)'); // \u76f8\u5f53\u4e8e Admin::style admin_style('.my-class {color: red}'); // \u76f8\u5f53\u4e8e Admin::js() admin_js(['@admin/xxx.js']); // \u76f8\u5f53\u4e8e Admin::css() admin_css(['@admin/xxx.css']); // \u76f8\u5f53\u4e8e Admin::requireAssets() admin_require_assets(['@select2']); 7.\u7b80\u5316\u52a8\u4f5c(Action)\u7684 JS \u4ee3\u7801\u903b\u8f91\uff0c\u53bb\u9664\u8bb0\u4f4f selector \u529f\u80fd BUG\u4fee\u590d \u4fee\u590d\u8868\u683c orderable \u529f\u80fd\u5f02\u5e38\u95ee\u9898 #674 \u4fee\u590d JsonResponse methodIf \u7528\u6cd5\u62a5\u9519\u95ee\u9898 \u4fee\u590d\u8868\u683c\u3001\u8868\u5355\u4ee5\u53ca\u6570\u636e\u8be6\u60c5\u6307\u5b9a label #684 \u4fee\u590d\u8868\u683c Grid::rows \u56de\u8c03\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u95ee\u9898 \u4fee\u590dwidget\u6dfb\u52a0 JS \u4ee3\u7801\u5f02\u5e38\u5bfc\u81f4\u90e8\u5206\u7c7b\u578b\u7684\u7edf\u8ba1\u5361\u7247\u5f02\u6b65\u52a0\u8f7d\u529f\u5931\u6548\u95ee\u9898 \u4fee\u590d\u8868\u683c\u884c\u64cd\u4f5c getKey \u65b9\u6cd5\u5f02\u5e38\u95ee\u9898 #691 \u4fee\u590d\u5f53\u9875\u9762\u5b58\u5728\u591a\u4e2a select \u8868\u5355\u65f6\u65e0\u6cd5\u4f7f\u7528\u8054\u52a8\u529f\u80fd\u95ee\u9898 \u4fee\u590d\u8868\u683c\u5220\u9664\u6570\u636e\u540e\u65e0\u6cd5\u81ea\u52a8\u5237\u65b0\u9875\u9762\u95ee\u9898","title":"v2.0.7-beta"},{"location":"2.x/beta-change-log/#v206-beta","text":"\u53d1\u5e03\u65f6\u95f4 2020/11/7 \u5347\u7ea7\u65b9\u6cd5\uff0c\u9010\u6b65\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 composer remove dcat/laravel-admin composer require dcat/laravel-admin:\"2.0.6-beta\" php artisan admin:publish --assets --force php artisan admin:publish --migrations --force # \u8868\u7ed3\u6784\u6709\u53d8\u52a8 php artisan migrate \u7834\u574f\u6027\u53d8\u52a8 1. Form::tags \u8868\u5355\u9ed8\u8ba4\u4fdd\u5b58\u4e3a array \u7c7b\u578b // \u9700\u8981\u81ea\u5df1\u8f6c\u6362\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u7684\u683c\u5f0f $form->tags('tag')->saveAsJson(); 2.\u9ed8\u8ba4\u7981\u7528 session \u4e2d\u95f4\u4ef6 3. Form\\Tree::disableFilterParents \u91cd\u547d\u540d\u4e3a Form\\Tree::exceptParentNode $form->tree('cate')->exceptParentNode(false); 4.\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u90e8\u5206\u65b9\u6cd5\u540d\u79f0\u8c03\u6574 // \u542f\u7528\u5206\u5757\u4e0a\u4f20\u529f\u80fd disableChunked \u66f4\u6539\u4e3a chunked $form->image('avatar')->chunked(true); // \u542f\u7528\u81ea\u52a8\u4fdd\u5b58\u5b57\u6bb5\u503c\u529f\u80fd disableAutoSave \u66f4\u6539\u4e3a autoSave $form->image('avatar')->autoSave(false); // \u542f\u7528\u5220\u9664\u6587\u4ef6\u529f\u80fd disableRemove \u66f4\u6539\u4e3a removable $form->image('avatar')->removable(false); \u529f\u80fd\u6539\u8fdb 1.\u4ee3\u7801\u751f\u6210\u5668\u589e\u52a0\u5b57\u6bb5\u62d6\u52a8\u6392\u5e8f\u529f\u80fd\uff0c\u6b64\u65b9\u6cd5\u7531\u5c0f\u4f19\u4f34 @codingyu \u8d21\u732e 2.\u83dc\u5355\u8868\u589e\u52a0 show \u548c extension \u5b57\u6bb5\uff0c show \u5b57\u6bb5\u7528\u4e8e\u63a7\u5236\u662f\u5426\u663e\u793a\u83dc\u5355\uff1b extension \u5b57\u6bb5\u7528\u4e8e\u6807\u8bb0\u662f\u5426\u4e3a\u6269\u5c55\u83dc\u5355 3. Form::table \u3001 Form::array \u3001 Form::embeds \u8868\u5355\u652f\u6301\u5173\u8054\u5173\u7cfb\u5b57\u6bb5 $form->table('profile.options', function ($form) { ... }); 4.\u589e\u52a0 Form::checkbox \u4ee5\u53ca Form::radio \u8868\u5355\u9009\u9879\u7ad6\u6392\u663e\u793a\u529f\u80fd $form->checkbox('xxx')->inline(false)->options([...]); 5.\u914d\u7f6e\u6587\u4ef6\u8df3\u8fc7\u767b\u5f55\u4ee5\u53ca\u6743\u9650\u9a8c\u8bc1\u529f\u80fd\u5141\u8bb8\u914d\u7f6e\u8def\u7531\u522b\u540d 'auth' => [ 'except' => [ ... 'user.login', ], ], 6. Form\\Row \u589e\u52a0 getKey \u4ee5\u53ca model \u65b9\u6cd5 7.\u4f18\u5316\u8868\u683c\u8fc7\u6ee4\u5668select\u8868\u5355\u9009\u4e2d\u6548\u679c\uff0c\u9ed8\u8ba4\u4e0d\u9009\u4e2d 8.\u8868\u5355tab\u5e03\u5c40\u4f18\u5316 BUG\u4fee\u590d 1. \u4fee\u590d Form::checkbox \u9009\u4e2d/\u53d6\u6d88\u9009\u4e2d\u5168\u90e8\u9009\u9879\u65f6\u52a8\u6001\u663e\u793a\u8868\u5355\u529f\u80fd\u65e0\u6548\u95ee\u9898 2. \u4fee\u590d\u53f0\u6e7e\u7e41\u4f53\u65e0\u6cd5\u7ffb\u8bd1\u9ed8\u8ba4\u83dc\u5355\u6807\u9898\u95ee\u9898 3. \u4fee\u590d NestedForm \u4e2d\u7684 number \u5b57\u6bb5\u8f93\u5165\u503c\u4e3a 0 \u65f6\u4f1a\u88ab\u8fc7\u6ee4\u95ee\u9898 #634 4. \u4fee\u590d\u6a21\u578b\u6811 RowAction \u5f02\u6b65\u5904\u7406\u63a5\u53e3\u65f6\u83b7\u53d6\u4e3b\u952e\u62a5\u9519\u95ee\u9898 5. \u4fee\u590d\u8868\u683c\u8fc7\u6ee4\u5668\u65e0\u6cd5\u91cd\u7f6e\u5173\u8054\u8868\u5b57\u6bb5\u641c\u7d22\u503c\u95ee\u9898 #650 6. \u4fee\u590d\u8868\u683c\u8fc7\u6ee4\u5668multipleSelect\u8868\u5355\u5f02\u5e38\u95ee\u9898","title":"v2.0.6-beta"},{"location":"2.x/beta-change-log/#v205-beta","text":"\u53d1\u5e03\u65f6\u95f4 2020/10/29 BUG\u4fee\u590d 1. \u4fee\u590d\u8868\u683c\u641c\u7d22\u591a\u4e2a\u5173\u8054\u8868\u5b57\u6bb5sql\u9519\u8bef\u95ee\u9898 I232T7 2. \u4fee\u590d Form::datetimeRange \u8868\u5355\u65e0\u6cd5\u9009\u62e9\u65e5\u5fd7\u95ee\u9898 3. \u4fee\u590d\u65e0\u6cd5\u6dfb\u52a0\u591a\u4e2a Form::table \u8868\u5355\u5b57\u6bb5\u95ee\u9898 #627 4. \u4fee\u590d\u8868\u683c\u8fc7\u6ee4\u5668 MultipleSelectTable \u4e2d\u62a5\u9519\u95ee\u9898 5. \u4fee\u590d\u8868\u683c\u89c4\u683c\u7b5b\u9009\u5668\u6837\u5f0f\u5f02\u5e38\u95ee\u9898","title":"v2.0.5-beta"},{"location":"2.x/beta-change-log/#v204-beta","text":"\u53d1\u5e03\u65f6\u95f4 2020/10/27 BUG\u4fee\u590d 1. \u4fee\u590d admin_javascript_json \u51fd\u6570\u4f1a\u81ea\u52a8\u7a7a\u6ee4\u6570\u7ec4\u7a7a\u503c\u95ee\u9898 2. \u4fee\u590d\u6570\u636e\u8868\u5355\u4f7f\u7528 tab \u5e03\u5c40\u62a5\u9519\u95ee\u9898 #620 3. \u4fee\u590d\u6269\u5c55\u672c\u5730\u5b89\u88c5\u751f\u6210\u4e34\u65f6\u76ee\u5f55\u6743\u9650\u5f02\u5e38\u95ee\u9898 #625 4. \u4fee\u590d\u8868\u5355\u4f7f\u7528 html \u65b9\u6cd5\u8bbe\u7f6e\u89c6\u56fe\u5b58\u5728 script \u6807\u7b7e\u65f6\u62a5\u9519\u95ee\u9898 #624 5. \u4fee\u590d\u6570\u636e\u8be6\u60c5\u4f7f\u7528\u5173\u8054\u5173\u7cfb\uff08\u4e00\u5bf9\u591a\uff09\u663e\u793a\u62a5\u9519\u95ee\u9898 #623 6. \u4fee\u590d dropdown \u4e0b\u62c9\u83dc\u5355\u8ba1\u7b97\u663e\u793a\u4f4d\u7f6e\u5f02\u5e38\u95ee\u9898 #I22S2N","title":"v2.0.4-beta"},{"location":"2.x/beta-change-log/#v203-beta","text":"\u53d1\u5e03\u65f6\u95f4 2020/10/27 BUG\u4fee\u590d 1. \u4fee\u590d\u8868\u5355\u884c\u5185\u7f16\u8f91\u663e\u793a\u8fd4\u56de\u4fe1\u606f\u5f02\u5e38\u95ee\u9898 2. \u4fee\u590d admin.auth.remember \u8bbe\u7f6e\u65e0\u6548\u95ee\u9898 #613 3. \u4fee\u590d editor \u8868\u5355\u4e2d\u6587\u7ffb\u8bd1\u5f02\u5e38\u95ee\u9898 #611 4. \u4fee\u590d Filter::scope \u9009\u62e9\u7b5b\u9009\u9879\u4e0d\u4f1a\u8fc7\u6ee4\u5206\u9875\u53c2\u6570\u95ee\u9898 5. \u4fee\u590d\u8868\u5355\u4e8b\u4ef6\u62e6\u622a\u76f8\u5173\u95ee\u9898 6. \u4fee\u590d\u6811\u5f62\u8868\u5355\u4f7f\u7528\u5f02\u5e38\u95ee\u9898 #619 \u529f\u80fd\u6539\u8fdb 1. \u589e\u52a0\u8df3\u8fc7\u6743\u9650\u548c\u767b\u5f55\u9a8c\u8bc1\u7684\u914d\u7f6e\u65b9\u5f0f 2. \u6269\u5c55service provider\u589e\u52a0middleware\u548c\u8def\u7531\u6392\u67e5\u6ce8\u518c\u529f\u80fd 3. \u6279\u91cf\u64cd\u4f5cchange\u4e8b\u4ef6\u76d1\u542c\u4f18\u5316 4. \u589e\u52a0 RowSelector \u5065\u58ee\u6027, \u4ee5\u907f\u514d\u9047\u5230 json \u6570\u7ec4\u7c7b\u578b\u5b57\u6bb5\u65e0\u6cd5\u5904\u7406\u800c\u62a5\u9519 #609","title":"v2.0.3-beta"},{"location":"2.x/beta-change-log/#v202-beta","text":"\u53d1\u5e03\u65f6\u95f4 2020/10/21 BUG\u4fee\u590d 1. \u4fee\u590d\u4ee3\u7801\u751f\u6210\u5668\u751f\u6210\u63a7\u5236\u5668\u6587\u4ef6\u547d\u540d\u7a7a\u95f4\u5f02\u5e38\u95ee\u9898 #600 2. \u4fee\u590d\u914d\u7f6e\u6587\u4ef6logo\u8def\u5f84\u9519\u8bef\u95ee\u9898 3. \u4fee\u590d\u8868\u683c\u5173\u8054\u5b57\u6bb5\u641c\u7d22\u65e0\u6548\u95ee\u9898 4. \u4fee\u590d\u6a21\u578b\u6811\u884c\u64cd\u4f5c\u751f\u6210\u9009\u62e9\u5668\u91cd\u590d\u95ee\u9898 5. \u4fee\u590d\u8bbf\u95ee\u65e0\u6743\u9650\u9875\u9762\u62a5\u9519\u95ee\u9898 6. \u4fee\u590d\u8868\u683c\u8fc7\u6ee4\u5668multipleSelect\u65e0\u6cd5\u9009\u4e2d\u5173\u8054\u8868\u5b57\u6bb5\u503c\u95ee\u9898 #603 7. \u4fee\u590d\u8868\u5355tab\u5e03\u5c40\u65e0\u6548\u95ee\u9898 #605 \u529f\u80fd\u6539\u8fdb 1. Auth\\Permission\u79fb\u81f3Http\u76ee\u5f55 2. \u6570\u636e\u8868json\u5b57\u6bb5\u6539\u6210text 3. \u589e\u52a0\u767b\u5f55\u8d26\u53f7\u5bc6\u7801\u9519\u8bef\u7ffb\u8bd1 4. \u589e\u52a0 admin_javascript_json \u51fd\u6570\uff0c\u4f7f\u5927\u90e8\u5206\u7ec4\u4ef6\u914d\u7f6e\u652f\u6301\u4f20\u9012JS\u4ee3\u7801 5. Admin::color \u589e\u52a0\u6697\u9ed1\u6a21\u5f0f\u989c\u8272","title":"v2.0.2-beta"},{"location":"2.x/beta-change-log/#v201-beta","text":"\u53d1\u5e03\u65f6\u95f4 2020/10/20 BUG\u4fee\u590d - \u4fee\u590d\u6570\u636e\u8868\u683c\u8fc7\u6ee4\u641c\u7d22BUG #599 - \u4fee\u590d\u4ee3\u7801\u751f\u6210\u5668\u751f\u6210\u63a7\u5236\u5668\u57fa\u7c7b\u547d\u540d\u7a7a\u95f4\u9519\u8bef\u95ee\u9898 #600 \u529f\u80fd\u6539\u8fdb \u4ee3\u7801\u751f\u6210\u5668\u589e\u52a0\u9875\u9762\u6807\u9898\u4ee5\u53ca\u9762\u5305\u5c51\u7ffb\u8bd1\u529f\u80fd \u5f02\u5e38\u5904\u7406\u4f18\u5316 \u589e\u52a0 admin_setting_array \u51fd\u6570","title":"v2.0.1-beta"},{"location":"2.x/change-log/","text":"\u5f53\u524d\u6700\u65b0\u7248\u672c v2.0.0-beta","title":"Change log"},{"location":"2.x/custom-authentication/","text":"\u81ea\u5b9a\u4e49\u767b\u9646 \u91cd\u5199\u767b\u9646\u9875\u9762\u548c\u767b\u9646\u903b\u8f91 \u65b9\u5f0f\u4e00\uff0c\u91cd\u5199\u767b\u9646\u63a7\u5236\u5668\u65b9\u6cd5\uff1a \u9ed8\u8ba4\u7684\u767b\u9646\u63a7\u5236\u5668\u7528\u7684\u662f App\\Admin\\AuthController \u8fd9\u4e2a\u7c7b\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u53c2\u6570 admin.auth.controller \u8fdb\u884c\u4fee\u6539 <?php namespace App\\Admin\\Controllers; use Dcat\\Admin\\Controllers\\AuthController as BaseAuthController; class AuthController extends BaseAuthController { // \u81ea\u5b9a\u4e49\u767b\u9646view\u6a21\u677f protected $view = 'admin.login'; // \u91cd\u5199\u4f60\u7684\u767b\u9646\u9875\u9762\u903b\u8f91 public function getLogin(Content $content) { ... } ... } \u65b9\u5f0f\u4e8c\uff0c\u8986\u5199\u8def\u7531\uff1a \u5728\u8def\u7531\u6587\u4ef6 app/Admin/routes.php \u4e2d\uff0c\u8986\u76d6\u6389\u767b\u9646\u9875\u9762\u548c\u767b\u9646\u903b\u8f91\u7684\u8def\u7531\uff0c\u5373\u53ef\u5b9e\u73b0\u81ea\u5b9a\u4e49\u7684\u529f\u80fd Route::group([ 'prefix' => config('admin.prefix'), 'namespace' => Admin::controllerNamespace(), 'middleware' => ['web', 'admin'], ], function (Router $router) { $router->get('auth/login', 'AuthController@getLogin'); $router->post('auth/login', 'AuthController@postLogin'); }); \u5728\u81ea\u5b9a\u4e49\u7684\u8def\u7531\u5668AuthController\u4e2d\u7684 getLogin \u3001 postLogin \u65b9\u6cd5\u91cc\u5206\u522b\u5b9e\u73b0\u81ea\u5df1\u7684\u767b\u9646\u9875\u9762\u548c\u767b\u9646\u903b\u8f91\u3002 \u91cd\u5199laravel\u8ba4\u8bc1 \u5982\u679c\u4e0d\u4f7f\u7528 Dcat Admin \u5185\u7f6e\u7684\u8ba4\u8bc1\u767b\u9646\u903b\u8f91\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u65b9\u5f0f\u81ea\u5b9a\u4e49\u767b\u9646\u8ba4\u8bc1\u903b\u8f91 \u9996\u5148\u8981\u5148\u5b9a\u4e49\u4e00\u4e2a user provider \uff0c\u7528\u6765\u83b7\u53d6\u7528\u6237\u8eab\u4efd, \u6bd4\u5982 app/Providers/CustomUserProvider.php \uff1a <?php namespace App\\Providers; use Illuminate\\Contracts\\Auth\\Authenticatable; use Illuminate\\Contracts\\Auth\\UserProvider; class CustomUserProvider implements UserProvider { public function retrieveById($identifier) {} public function retrieveByToken($identifier, $token) {} public function updateRememberToken(Authenticatable $user, $token) {} public function retrieveByCredentials(array $credentials) { // \u7528$credentials\u91cc\u9762\u7684\u7528\u6237\u540d\u5bc6\u7801\u53bb\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff0c\u7136\u540e\u8fd4\u56deIlluminate\\Contracts\\Auth\\Authenticatable\u5bf9\u8c61 } public function validateCredentials(Authenticatable $user, array $credentials) { // \u7528$credentials\u91cc\u9762\u7684\u7528\u6237\u540d\u5bc6\u7801\u6821\u9a8c\u7528\u6237\uff0c\u8fd4\u56detrue\u6216false } } \u5728\u65b9\u6cd5 retrieveByCredentials \u548c validateCredentials \u4e2d, \u4f20\u5165\u7684 $credentials \u5c31\u662f\u767b\u9646\u9875\u9762\u63d0\u4ea4\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u6570\u7ec4\uff0c\u7136\u540e\u4f60\u53ef\u4ee5\u4f7f\u7528 $credentials \u53bb\u5b9e\u73b0\u81ea\u5df1\u7684\u767b\u9646\u903b\u8f91 Interface Illuminate\\Contracts\\Auth\\Authenticatable \u7684\u5b9a\u4e49\u5982\u4e0b\uff1a <?php namespace Illuminate\\Contracts\\Auth; interface Authenticatable { public function getAuthIdentifierName(); public function getAuthIdentifier(); public function getAuthPassword(); public function getRememberToken(); public function setRememberToken($value); public function getRememberTokenName(); } \u4e0a\u9762interface\u6bcf\u4e2a\u65b9\u6cd5\u7684\u89e3\u91ca\u53c2\u8003 adding-custom-user-providers \u5b9a\u4e49\u597d\u4e86 User provider \u4e4b\u540e\uff0c\u6253\u5f00 app/Providers/AuthServiceProvider.php \u6ce8\u518c\u5b83\uff1a <?php namespace App\\Providers; use Illuminate\\Support\\Facades\\Auth; use Illuminate\\Foundation\\Support\\Providers\\AuthServiceProvider as ServiceProvider; class AuthServiceProvider extends ServiceProvider { /** * Register any application authentication / authorization services. * * @return void */ public function boot() { $this->registerPolicies(); Auth::provider('custom', function ($app, array $config) { // Return an instance of Illuminate\\Contracts\\Auth\\UserProvider... return new CustomUserProvider(); }); } } \u6700\u540e\u4fee\u6539\u4e00\u4e0b\u914d\u7f6e,\u6253\u5f00 config/admin.php \uff0c\u627e\u5230 auth \u90e8\u5206\u4fee\u6539: 'auth' => [ 'guards' => [ 'admin' => [ 'driver' => 'session', 'provider' => 'admin', ] ], // \u4fee\u6539\u4e0b\u9762 'providers' => [ 'admin' => [ 'driver' => 'custom', ] ], ], \u8fd9\u6837\u5c31\u5b8c\u6210\u4e86\u81ea\u5b9a\u4e49\u767b\u9646\u8ba4\u8bc1\u7684\u903b\u8f91\uff0c\u81ea\u5b9a\u4e49\u767b\u9646\u7b97\u662flaravel\u4e2d\u6bd4\u8f83\u590d\u6742\u7684\u90e8\u5206\uff0c\u9700\u8981\u5f00\u53d1\u8005\u6709\u8010\u5fc3\u7684\u4e00\u6b65\u6b65\u8c03\u8bd5\u5b8c\u6210\u3002","title":"\u81ea\u5b9a\u4e49\u767b\u9646"},{"location":"2.x/custom-authentication/#_1","text":"","title":"\u81ea\u5b9a\u4e49\u767b\u9646"},{"location":"2.x/custom-authentication/#_2","text":"\u65b9\u5f0f\u4e00\uff0c\u91cd\u5199\u767b\u9646\u63a7\u5236\u5668\u65b9\u6cd5\uff1a \u9ed8\u8ba4\u7684\u767b\u9646\u63a7\u5236\u5668\u7528\u7684\u662f App\\Admin\\AuthController \u8fd9\u4e2a\u7c7b\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u53c2\u6570 admin.auth.controller \u8fdb\u884c\u4fee\u6539 <?php namespace App\\Admin\\Controllers; use Dcat\\Admin\\Controllers\\AuthController as BaseAuthController; class AuthController extends BaseAuthController { // \u81ea\u5b9a\u4e49\u767b\u9646view\u6a21\u677f protected $view = 'admin.login'; // \u91cd\u5199\u4f60\u7684\u767b\u9646\u9875\u9762\u903b\u8f91 public function getLogin(Content $content) { ... } ... } \u65b9\u5f0f\u4e8c\uff0c\u8986\u5199\u8def\u7531\uff1a \u5728\u8def\u7531\u6587\u4ef6 app/Admin/routes.php \u4e2d\uff0c\u8986\u76d6\u6389\u767b\u9646\u9875\u9762\u548c\u767b\u9646\u903b\u8f91\u7684\u8def\u7531\uff0c\u5373\u53ef\u5b9e\u73b0\u81ea\u5b9a\u4e49\u7684\u529f\u80fd Route::group([ 'prefix' => config('admin.prefix'), 'namespace' => Admin::controllerNamespace(), 'middleware' => ['web', 'admin'], ], function (Router $router) { $router->get('auth/login', 'AuthController@getLogin'); $router->post('auth/login', 'AuthController@postLogin'); }); \u5728\u81ea\u5b9a\u4e49\u7684\u8def\u7531\u5668AuthController\u4e2d\u7684 getLogin \u3001 postLogin \u65b9\u6cd5\u91cc\u5206\u522b\u5b9e\u73b0\u81ea\u5df1\u7684\u767b\u9646\u9875\u9762\u548c\u767b\u9646\u903b\u8f91\u3002","title":"\u91cd\u5199\u767b\u9646\u9875\u9762\u548c\u767b\u9646\u903b\u8f91"},{"location":"2.x/custom-authentication/#laravel","text":"\u5982\u679c\u4e0d\u4f7f\u7528 Dcat Admin \u5185\u7f6e\u7684\u8ba4\u8bc1\u767b\u9646\u903b\u8f91\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u65b9\u5f0f\u81ea\u5b9a\u4e49\u767b\u9646\u8ba4\u8bc1\u903b\u8f91 \u9996\u5148\u8981\u5148\u5b9a\u4e49\u4e00\u4e2a user provider \uff0c\u7528\u6765\u83b7\u53d6\u7528\u6237\u8eab\u4efd, \u6bd4\u5982 app/Providers/CustomUserProvider.php \uff1a <?php namespace App\\Providers; use Illuminate\\Contracts\\Auth\\Authenticatable; use Illuminate\\Contracts\\Auth\\UserProvider; class CustomUserProvider implements UserProvider { public function retrieveById($identifier) {} public function retrieveByToken($identifier, $token) {} public function updateRememberToken(Authenticatable $user, $token) {} public function retrieveByCredentials(array $credentials) { // \u7528$credentials\u91cc\u9762\u7684\u7528\u6237\u540d\u5bc6\u7801\u53bb\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff0c\u7136\u540e\u8fd4\u56deIlluminate\\Contracts\\Auth\\Authenticatable\u5bf9\u8c61 } public function validateCredentials(Authenticatable $user, array $credentials) { // \u7528$credentials\u91cc\u9762\u7684\u7528\u6237\u540d\u5bc6\u7801\u6821\u9a8c\u7528\u6237\uff0c\u8fd4\u56detrue\u6216false } } \u5728\u65b9\u6cd5 retrieveByCredentials \u548c validateCredentials \u4e2d, \u4f20\u5165\u7684 $credentials \u5c31\u662f\u767b\u9646\u9875\u9762\u63d0\u4ea4\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u6570\u7ec4\uff0c\u7136\u540e\u4f60\u53ef\u4ee5\u4f7f\u7528 $credentials \u53bb\u5b9e\u73b0\u81ea\u5df1\u7684\u767b\u9646\u903b\u8f91 Interface Illuminate\\Contracts\\Auth\\Authenticatable \u7684\u5b9a\u4e49\u5982\u4e0b\uff1a <?php namespace Illuminate\\Contracts\\Auth; interface Authenticatable { public function getAuthIdentifierName(); public function getAuthIdentifier(); public function getAuthPassword(); public function getRememberToken(); public function setRememberToken($value); public function getRememberTokenName(); } \u4e0a\u9762interface\u6bcf\u4e2a\u65b9\u6cd5\u7684\u89e3\u91ca\u53c2\u8003 adding-custom-user-providers \u5b9a\u4e49\u597d\u4e86 User provider \u4e4b\u540e\uff0c\u6253\u5f00 app/Providers/AuthServiceProvider.php \u6ce8\u518c\u5b83\uff1a <?php namespace App\\Providers; use Illuminate\\Support\\Facades\\Auth; use Illuminate\\Foundation\\Support\\Providers\\AuthServiceProvider as ServiceProvider; class AuthServiceProvider extends ServiceProvider { /** * Register any application authentication / authorization services. * * @return void */ public function boot() { $this->registerPolicies(); Auth::provider('custom', function ($app, array $config) { // Return an instance of Illuminate\\Contracts\\Auth\\UserProvider... return new CustomUserProvider(); }); } } \u6700\u540e\u4fee\u6539\u4e00\u4e0b\u914d\u7f6e,\u6253\u5f00 config/admin.php \uff0c\u627e\u5230 auth \u90e8\u5206\u4fee\u6539: 'auth' => [ 'guards' => [ 'admin' => [ 'driver' => 'session', 'provider' => 'admin', ] ], // \u4fee\u6539\u4e0b\u9762 'providers' => [ 'admin' => [ 'driver' => 'custom', ] ], ], \u8fd9\u6837\u5c31\u5b8c\u6210\u4e86\u81ea\u5b9a\u4e49\u767b\u9646\u8ba4\u8bc1\u7684\u903b\u8f91\uff0c\u81ea\u5b9a\u4e49\u767b\u9646\u7b97\u662flaravel\u4e2d\u6bd4\u8f83\u590d\u6742\u7684\u90e8\u5206\uff0c\u9700\u8981\u5f00\u53d1\u8005\u6709\u8010\u5fc3\u7684\u4e00\u6b65\u6b65\u8c03\u8bd5\u5b8c\u6210\u3002","title":"\u91cd\u5199laravel\u8ba4\u8bc1"},{"location":"2.x/custom-chart/","text":"\u81ea\u5b9a\u4e49\u56fe\u8868 dcat-admin 1.5 \u5df2\u7ecf\u79fb\u9664\u4e86\u6240\u6709\u7684\u56fe\u8868\u7ec4\u4ef6\uff0c\u5982\u679c\u8981\u5728\u9875\u9762\u4e2d\u52a0\u5165\u56fe\u8868\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u6d41\u7a0b \u7528 chartjs \u4e3e\u4f8b\uff0c\u9996\u5148\u8981\u4e0b\u8f7d chartjs \uff0c\u653e\u5230public\u76ee\u5f55\u4e0b\u9762\uff0c\u6bd4\u5982\u653e\u5728 public/vendor/chartjs \u76ee\u5f55 \u7136\u540e\u5728 app/Admin/bootstrap.php \u5f15\u5165\u7ec4\u4ef6\uff1a use Dcat\\Admin\\Facades\\Admin; Admin::js('/vendor/chartjs/dist/Chart.min.js'); \u65b0\u5efa\u89c6\u56fe\u6587\u4ef6 resources/views/admin/charts/bar.blade.php <canvas id=\"myChart\" width=\"400\" height=\"400\"></canvas> <script> $(function () { var ctx = document.getElementById(\"myChart\").getContext('2d'); var myChart = new Chart(ctx, { type: 'bar', data: { labels: [\"Red\", \"Blue\", \"Yellow\", \"Green\", \"Purple\", \"Orange\"], datasets: [{ label: '# of Votes', data: [12, 19, 3, 5, 2, 3], backgroundColor: [ 'rgba(255, 99, 132, 0.2)', 'rgba(54, 162, 235, 0.2)', 'rgba(255, 206, 86, 0.2)', 'rgba(75, 192, 192, 0.2)', 'rgba(153, 102, 255, 0.2)', 'rgba(255, 159, 64, 0.2)' ], borderColor: [ 'rgba(255,99,132,1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)', 'rgba(75, 192, 192, 1)', 'rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)' ], borderWidth: 1 }] }, options: { scales: { yAxes: [{ ticks: { beginAtZero:true } }] } } }); }); </script> \u7136\u540e\u5c31\u53ef\u4ee5\u5728\u9875\u9762\u7684\u4efb\u4f55\u5730\u65b9\u5f15\u5165\u8fd9\u4e2a\u56fe\u8868\u89c6\u56fe\u4e86\uff1a public function index() { return Admin::content(function (Content $content) { $content->header('chart'); $content->description('.....'); $content->body(view('admin.charts.bar')); }); } \u6309\u7167\u4e0a\u9762\u7684\u65b9\u5f0f\u53ef\u4ee5\u5f15\u5165\u4efb\u610f\u56fe\u8868\u5e93\uff0c\u591a\u56fe\u8868\u9875\u9762\u7684\u5e03\u5c40\uff0c\u53c2\u8003 \u89c6\u56fe\u5e03\u5c40","title":"\u81ea\u5b9a\u4e49\u56fe\u8868"},{"location":"2.x/custom-chart/#_1","text":"dcat-admin 1.5 \u5df2\u7ecf\u79fb\u9664\u4e86\u6240\u6709\u7684\u56fe\u8868\u7ec4\u4ef6\uff0c\u5982\u679c\u8981\u5728\u9875\u9762\u4e2d\u52a0\u5165\u56fe\u8868\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u6d41\u7a0b \u7528 chartjs \u4e3e\u4f8b\uff0c\u9996\u5148\u8981\u4e0b\u8f7d chartjs \uff0c\u653e\u5230public\u76ee\u5f55\u4e0b\u9762\uff0c\u6bd4\u5982\u653e\u5728 public/vendor/chartjs \u76ee\u5f55 \u7136\u540e\u5728 app/Admin/bootstrap.php \u5f15\u5165\u7ec4\u4ef6\uff1a use Dcat\\Admin\\Facades\\Admin; Admin::js('/vendor/chartjs/dist/Chart.min.js'); \u65b0\u5efa\u89c6\u56fe\u6587\u4ef6 resources/views/admin/charts/bar.blade.php <canvas id=\"myChart\" width=\"400\" height=\"400\"></canvas> <script> $(function () { var ctx = document.getElementById(\"myChart\").getContext('2d'); var myChart = new Chart(ctx, { type: 'bar', data: { labels: [\"Red\", \"Blue\", \"Yellow\", \"Green\", \"Purple\", \"Orange\"], datasets: [{ label: '# of Votes', data: [12, 19, 3, 5, 2, 3], backgroundColor: [ 'rgba(255, 99, 132, 0.2)', 'rgba(54, 162, 235, 0.2)', 'rgba(255, 206, 86, 0.2)', 'rgba(75, 192, 192, 0.2)', 'rgba(153, 102, 255, 0.2)', 'rgba(255, 159, 64, 0.2)' ], borderColor: [ 'rgba(255,99,132,1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)', 'rgba(75, 192, 192, 1)', 'rgba(153, 102, 255, 1)', 'rgba(255, 159, 64, 1)' ], borderWidth: 1 }] }, options: { scales: { yAxes: [{ ticks: { beginAtZero:true } }] } } }); }); </script> \u7136\u540e\u5c31\u53ef\u4ee5\u5728\u9875\u9762\u7684\u4efb\u4f55\u5730\u65b9\u5f15\u5165\u8fd9\u4e2a\u56fe\u8868\u89c6\u56fe\u4e86\uff1a public function index() { return Admin::content(function (Content $content) { $content->header('chart'); $content->description('.....'); $content->body(view('admin.charts.bar')); }); } \u6309\u7167\u4e0a\u9762\u7684\u65b9\u5f0f\u53ef\u4ee5\u5f15\u5165\u4efb\u610f\u56fe\u8868\u5e93\uff0c\u591a\u56fe\u8868\u9875\u9762\u7684\u5e03\u5c40\uff0c\u53c2\u8003 \u89c6\u56fe\u5e03\u5c40","title":"\u81ea\u5b9a\u4e49\u56fe\u8868"},{"location":"2.x/custom-navbar/","text":"\u81ea\u5b9a\u4e49\u5934\u90e8\u5bfc\u822a\u6761 \u5982\u679c\u8981\u5728\u9876\u90e8\u5bfc\u822a\u6761\u4e0a\u6dfb\u52a0html\u5143\u7d20, \u6253\u5f00 app/Admin/bootstrap.php \uff1a use Dcat\\Admin\\Layout\\Navbar; use Dcat\\Admin\\Admin; Admin::navbar(function (Navbar $navbar) { $navbar->left('html...'); $navbar->right('html...'); }); left \u548c right \u65b9\u6cd5\u5206\u522b\u7528\u6765\u5728\u5934\u90e8\u7684\u5de6\u53f3\u4e24\u8fb9\u6dfb\u52a0\u5185\u5bb9\uff0c\u65b9\u6cd5\u53c2\u6570\u53ef\u4ee5\u662f\u4efb\u4f55\u53ef\u4ee5\u6e32\u67d3\u7684\u5bf9\u8c61(\u5b9e\u73b0\u4e86 Htmlable \u3001 Renderable \u63a5\u53e3\u6216\u8005\u5305\u542b __toString() \u65b9\u6cd5\u7684\u5bf9\u8c61)\u6216\u5b57\u7b26\u4e32 \u6dfb\u52a0\u4e0b\u62c9\u9762\u677f \u5728\u6a21\u677f\u6587\u4ef6\u4e2d\u52a0\u4e0a <ul class=\"nav navbar-nav\"> <li class=\"dropdown dropdown-notification nav-item\"> <a class=\"nav-link nav-link-label\" href=\"#\" data-toggle=\"dropdown\" aria-expanded=\"true\"><i class=\"ficon feather icon-bell\"></i><span class=\"badge badge-pill badge-primary badge-up\">5</span></a> <ul class=\"dropdown-menu dropdown-menu-media dropdown-menu-right \"> <li class=\"dropdown-menu-header\"> <div class=\"dropdown-header m-0 p-2\"> <h3 class=\"white\">5 New</h3><span class=\"grey darken-2\">App Notifications</span> </div> </li> <li class=\"scrollable-container media-list ps ps--active-y\"> <a class=\"d-flex justify-content-between\" href=\"javascript:void(0)\"> <div class=\"media d-flex align-items-start\"> <div class=\"media-left\"><i class=\"feather icon-plus-square font-medium-5 primary\"></i></div> <div class=\"media-body\"> <h6 class=\"primary media-heading\">You have new order!</h6><small class=\"notification-text\"> Are your going to meet me tonight?</small> </div><small> <time class=\"media-meta\" datetime=\"2015-06-11T18:29:20+08:00\">9 hours ago</time></small> </div> </a><a class=\"d-flex justify-content-between\" href=\"javascript:void(0)\"> <div class=\"media d-flex align-items-start\"> <div class=\"media-left\"><i class=\"feather icon-download-cloud font-medium-5 success\"></i></div> <div class=\"media-body\"> <h6 class=\"success media-heading red darken-1\">99% Server load</h6> <small class=\"notification-text\">You got new order of goods.</small> </div><small> <time class=\"media-meta\" datetime=\"2015-06-11T18:29:20+08:00\">5 hour ago</time></small> </div> </a><a class=\"d-flex justify-content-between\" href=\"javascript:void(0)\"> <div class=\"media d-flex align-items-start\"> <div class=\"media-left\"><i class=\"feather icon-alert-triangle font-medium-5 danger\"></i></div> <div class=\"media-body\"> <h6 class=\"danger media-heading yellow darken-3\">Warning notifixation </h6><small class=\"notification-text\">Server have 99% CPU usage.</small> </div><small> <time class=\"media-meta\" datetime=\"2015-06-11T18:29:20+08:00\">Today</time></small> </div> </a> <div class=\"ps__rail-x\" style=\"left: 0px; bottom: 0px;\"><div class=\"ps__thumb-x\" tabindex=\"0\" style=\"left: 0px; width: 0px;\"></div></div><div class=\"ps__rail-y\" style=\"top: 0px; right: 0px; height: 254px;\"><div class=\"ps__thumb-y\" tabindex=\"0\" style=\"top: 0px; height: 184px;\"></div></div></li> <li class=\"dropdown-menu-footer\"><a class=\"dropdown-item p-1 text-center\" href=\"javascript:void(0)\">Read all notifications</a></li> </ul> </li> </ul> \u4f7f\u7528 $navbar->right(view('...')); \u6dfb\u52a0\u4e0b\u62c9\u83dc\u5355 <ul class=\"nav navbar-nav\"> <li class=\"dropdown dropdown-language nav-item\"> <a class=\"dropdown-toggle nav-link\" href=\"#\" id=\"dropdown-flag\" data-toggle=\"dropdown\"> <i class=\"flag-icon flag-icon-us\"></i> <span class=\"selected-language\">English</span> </a> <ul class=\"dropdown-menu\" aria-labelledby=\"dropdown-flag\"> <li class=\"dropdown-item\" href=\"#\" data-language=\"en\"> <a><i class=\"flag-icon flag-icon-us\"></i> English</a> </li> <li class=\"dropdown-item\" href=\"#\" data-language=\"fr\"> <a><i class=\"flag-icon flag-icon-fr\"></i> French</a> </li> <li class=\"dropdown-item\" href=\"#\" data-language=\"de\"> <a><i class=\"flag-icon flag-icon-de\"></i> German</a> </li> </ul> </li> </ul> \u4f7f\u7528 $navbar->right(view('...')); \u66f4\u591a\u7684\u7ec4\u4ef6\u53ef\u4ee5\u53c2\u8003 AdminLTE3 \u3002 \u4fee\u6539\u9ed8\u8ba4\u7528\u6237\u9762\u677f \u6253\u5f00 app/Admin/bootstrap.php \uff0c\u5199\u5165 admin_inject_section(Admin::SECTION['NAVBAR_USER_PANEL'], function () { return view('admin.partials.navbar-user-panel', ['user' => Admin::user()]); }); navbar-user-panel.blade.php \u89c6\u56fe\u5185\u5bb9 @if($user) <li class=\"dropdown dropdown-user nav-item\"> <a class=\"dropdown-toggle nav-link dropdown-user-link\" href=\"#\" data-toggle=\"dropdown\"> <div class=\"user-nav d-sm-flex d-none\"> <span class=\"user-name text-bold-600\">{{ $user->name }}</span> <span class=\"user-status\"><i class=\"fa fa-circle text-success\"></i> {{ trans('admin.online') }}</span> </div> <span> <img class=\"round\" src=\"{{ $user->getAvatar() }}\" alt=\"avatar\" height=\"40\" width=\"40\" /> </span> </a> <div class=\"dropdown-menu dropdown-menu-right\"> <a href=\"{{ admin_url('auth/setting') }}\" class=\"dropdown-item\"> <i class=\"feather icon-user\"></i> {{ trans('admin.setting') }} </a> <div class=\"dropdown-divider\"></div> <a class=\"dropdown-item\" href=\"{{ admin_url('auth/logout') }}\"> <i class=\"feather icon-power\"></i> {{ trans('admin.logout') }} </a> </div> </li> @endif","title":"\u81ea\u5b9a\u4e49\u5934\u90e8\u5bfc\u822a\u6761"},{"location":"2.x/custom-navbar/#_1","text":"\u5982\u679c\u8981\u5728\u9876\u90e8\u5bfc\u822a\u6761\u4e0a\u6dfb\u52a0html\u5143\u7d20, \u6253\u5f00 app/Admin/bootstrap.php \uff1a use Dcat\\Admin\\Layout\\Navbar; use Dcat\\Admin\\Admin; Admin::navbar(function (Navbar $navbar) { $navbar->left('html...'); $navbar->right('html...'); }); left \u548c right \u65b9\u6cd5\u5206\u522b\u7528\u6765\u5728\u5934\u90e8\u7684\u5de6\u53f3\u4e24\u8fb9\u6dfb\u52a0\u5185\u5bb9\uff0c\u65b9\u6cd5\u53c2\u6570\u53ef\u4ee5\u662f\u4efb\u4f55\u53ef\u4ee5\u6e32\u67d3\u7684\u5bf9\u8c61(\u5b9e\u73b0\u4e86 Htmlable \u3001 Renderable \u63a5\u53e3\u6216\u8005\u5305\u542b __toString() \u65b9\u6cd5\u7684\u5bf9\u8c61)\u6216\u5b57\u7b26\u4e32","title":"\u81ea\u5b9a\u4e49\u5934\u90e8\u5bfc\u822a\u6761"},{"location":"2.x/custom-navbar/#_2","text":"\u5728\u6a21\u677f\u6587\u4ef6\u4e2d\u52a0\u4e0a <ul class=\"nav navbar-nav\"> <li class=\"dropdown dropdown-notification nav-item\"> <a class=\"nav-link nav-link-label\" href=\"#\" data-toggle=\"dropdown\" aria-expanded=\"true\"><i class=\"ficon feather icon-bell\"></i><span class=\"badge badge-pill badge-primary badge-up\">5</span></a> <ul class=\"dropdown-menu dropdown-menu-media dropdown-menu-right \"> <li class=\"dropdown-menu-header\"> <div class=\"dropdown-header m-0 p-2\"> <h3 class=\"white\">5 New</h3><span class=\"grey darken-2\">App Notifications</span> </div> </li> <li class=\"scrollable-container media-list ps ps--active-y\"> <a class=\"d-flex justify-content-between\" href=\"javascript:void(0)\"> <div class=\"media d-flex align-items-start\"> <div class=\"media-left\"><i class=\"feather icon-plus-square font-medium-5 primary\"></i></div> <div class=\"media-body\"> <h6 class=\"primary media-heading\">You have new order!</h6><small class=\"notification-text\"> Are your going to meet me tonight?</small> </div><small> <time class=\"media-meta\" datetime=\"2015-06-11T18:29:20+08:00\">9 hours ago</time></small> </div> </a><a class=\"d-flex justify-content-between\" href=\"javascript:void(0)\"> <div class=\"media d-flex align-items-start\"> <div class=\"media-left\"><i class=\"feather icon-download-cloud font-medium-5 success\"></i></div> <div class=\"media-body\"> <h6 class=\"success media-heading red darken-1\">99% Server load</h6> <small class=\"notification-text\">You got new order of goods.</small> </div><small> <time class=\"media-meta\" datetime=\"2015-06-11T18:29:20+08:00\">5 hour ago</time></small> </div> </a><a class=\"d-flex justify-content-between\" href=\"javascript:void(0)\"> <div class=\"media d-flex align-items-start\"> <div class=\"media-left\"><i class=\"feather icon-alert-triangle font-medium-5 danger\"></i></div> <div class=\"media-body\"> <h6 class=\"danger media-heading yellow darken-3\">Warning notifixation </h6><small class=\"notification-text\">Server have 99% CPU usage.</small> </div><small> <time class=\"media-meta\" datetime=\"2015-06-11T18:29:20+08:00\">Today</time></small> </div> </a> <div class=\"ps__rail-x\" style=\"left: 0px; bottom: 0px;\"><div class=\"ps__thumb-x\" tabindex=\"0\" style=\"left: 0px; width: 0px;\"></div></div><div class=\"ps__rail-y\" style=\"top: 0px; right: 0px; height: 254px;\"><div class=\"ps__thumb-y\" tabindex=\"0\" style=\"top: 0px; height: 184px;\"></div></div></li> <li class=\"dropdown-menu-footer\"><a class=\"dropdown-item p-1 text-center\" href=\"javascript:void(0)\">Read all notifications</a></li> </ul> </li> </ul> \u4f7f\u7528 $navbar->right(view('...'));","title":"\u6dfb\u52a0\u4e0b\u62c9\u9762\u677f"},{"location":"2.x/custom-navbar/#_3","text":"<ul class=\"nav navbar-nav\"> <li class=\"dropdown dropdown-language nav-item\"> <a class=\"dropdown-toggle nav-link\" href=\"#\" id=\"dropdown-flag\" data-toggle=\"dropdown\"> <i class=\"flag-icon flag-icon-us\"></i> <span class=\"selected-language\">English</span> </a> <ul class=\"dropdown-menu\" aria-labelledby=\"dropdown-flag\"> <li class=\"dropdown-item\" href=\"#\" data-language=\"en\"> <a><i class=\"flag-icon flag-icon-us\"></i> English</a> </li> <li class=\"dropdown-item\" href=\"#\" data-language=\"fr\"> <a><i class=\"flag-icon flag-icon-fr\"></i> French</a> </li> <li class=\"dropdown-item\" href=\"#\" data-language=\"de\"> <a><i class=\"flag-icon flag-icon-de\"></i> German</a> </li> </ul> </li> </ul> \u4f7f\u7528 $navbar->right(view('...')); \u66f4\u591a\u7684\u7ec4\u4ef6\u53ef\u4ee5\u53c2\u8003 AdminLTE3 \u3002","title":"\u6dfb\u52a0\u4e0b\u62c9\u83dc\u5355"},{"location":"2.x/custom-navbar/#_4","text":"\u6253\u5f00 app/Admin/bootstrap.php \uff0c\u5199\u5165 admin_inject_section(Admin::SECTION['NAVBAR_USER_PANEL'], function () { return view('admin.partials.navbar-user-panel', ['user' => Admin::user()]); }); navbar-user-panel.blade.php \u89c6\u56fe\u5185\u5bb9 @if($user) <li class=\"dropdown dropdown-user nav-item\"> <a class=\"dropdown-toggle nav-link dropdown-user-link\" href=\"#\" data-toggle=\"dropdown\"> <div class=\"user-nav d-sm-flex d-none\"> <span class=\"user-name text-bold-600\">{{ $user->name }}</span> <span class=\"user-status\"><i class=\"fa fa-circle text-success\"></i> {{ trans('admin.online') }}</span> </div> <span> <img class=\"round\" src=\"{{ $user->getAvatar() }}\" alt=\"avatar\" height=\"40\" width=\"40\" /> </span> </a> <div class=\"dropdown-menu dropdown-menu-right\"> <a href=\"{{ admin_url('auth/setting') }}\" class=\"dropdown-item\"> <i class=\"feather icon-user\"></i> {{ trans('admin.setting') }} </a> <div class=\"dropdown-divider\"></div> <a class=\"dropdown-item\" href=\"{{ admin_url('auth/logout') }}\"> <i class=\"feather icon-power\"></i> {{ trans('admin.logout') }} </a> </div> </li> @endif","title":"\u4fee\u6539\u9ed8\u8ba4\u7528\u6237\u9762\u677f"},{"location":"2.x/custom-page/","text":"\u89c6\u56fe\u4e0e\u81ea\u5b9a\u4e49\u9875\u9762 \u89c6\u56fe \u5728 Dcat Admin \u4e2d\u6211\u4eec\u53ef\u4ee5\u7528 admin_view \u51fd\u6570\u6e32\u67d3\u89c6\u56fe\uff0c\u8fd9\u4e2a\u529f\u80fd\u501f\u9274\u4e86 vue \u7684\u8bbe\u8ba1\u601d\u60f3\uff0c\u53ef\u4ee5\u628a HTML \u3001 CSS \u548c JS \u4ee3\u7801\u5199\u5728\u540c\u4e00\u4e2a\u6a21\u677f\u6587\u4ef6\u4e2d\uff0c\u8ba9\u4ee3\u7801\u5206\u5c42\u66f4\u6e05\u6670\u66f4\u7b80\u6d01\u6613\u8bfb\uff0c\u5982 <div class=\"my-class\">...</div> <style> .my-class { color: blue; } </style> <script require=\"@test1,@test2\" init=\".my-class\"> $this.css({background: 'red'}) </script> \u5728 php \u4e2d\u6e32\u67d3\u8fd9\u4e2a\u89c6\u56fe public function index(Content $content) { return $content->body(admin_view('...')); } \u793a\u4f8b\u89e3\u6790 \u4e0a\u9762\u793a\u4f8b\u4e2d\u7684\u4ee3\u7801\uff0c\u5176\u5b9e\u76f8\u5f53\u4e8e\u4e0b\u9762\u7684\u4ee3\u7801 <div class=\"my-class\">...</div> public function index(Content $content) { admin_require_assets(['@test1', '@test2']); admin_style('.my-class { color: blue; }'); admin_script( <<<JS Dcat.init('.my-class', function (\\$this, id) { \\$this.css({background: 'red'}) }); JS ); return $content->body(view('...')); } \u5f88\u663e\u7136\uff0c\u4f7f\u7528 admin_view \u6e32\u67d3\u89c6\u56fe\u4f1a\u8ba9\u4f60\u7684\u4ee3\u7801\u66f4\u7b80\u6d01\u6613\u8bfb\uff0c\u5173\u4e8e Dcat.init \u4ee5\u53ca script \u6807\u7b7e\u4e2d\u7684 init \u548c require \u5c5e\u6027\u7684\u7528\u6cd5\uff0c\u8bf7\u53c2\u8003\u6587\u6863 \u9759\u6001\u8d44\u6e90 \u4ee5\u53ca \u52a8\u6001\u76d1\u542c\u5143\u7d20\u751f\u6210 (init) \u7ae0\u8282\u3002 \u81ea\u5b9a\u4e49\u9875\u9762 \u5728 Dcat Admin \u4e2d\u6784\u5efa\u81ea\u5b9a\u4e49\u9875\u9762\u975e\u5e38\u7b80\u5355\uff0c\u53ef\u4ee5\u53c2\u8003\u5982\u4e0b\u4e24\u4e2a\u4f8b\u5b50 \u793a\u4f8b1 {tip} Dcat Admin \u6784\u5efa\u7684\u662f\u4e00\u4e2a\u5355\u9875\u5e94\u7528\uff0c\u52a0\u8f7d\u7684 JS \u811a\u672c\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\uff0c\u6240\u4ee5\u521d\u59cb\u5316\u64cd\u4f5c\u4e0d\u80fd\u76f4\u63a5\u653e\u5728 JS \u811a\u672c\u4e2d\uff0c\u5e94\u8be5\u4f7f\u7528 Admin::script \u65b9\u6cd5\u8f7d\u5165\u3002 <?php namespace App\\Admin\\Pages; use Illuminate\\Contracts\\Support\\Renderable; class MyPage implements Renderable { public function render() { return admin_view('admin.pages.my-page'); } } \u89c6\u56fe admin.pages.my-page \uff0c\u6ce8\u610f\u89c6\u56fe\u4ee3\u7801\u91cc\u9762\u4e0d\u8981\u5305\u542b <body> \u548c <html> \u7b49\u6807\u7b7e <div class=\"my-class\"> <h3>\u81ea\u5b9a\u4e49\u9875\u9762\u6f14\u793a</h3> </div> <!-- \u5f15\u5165\u9875\u9762\u6240\u9700\u7684\u9759\u6001\u8d44\u6e90\uff0c\u8fd9\u91cc\u4f1a\u6309\u9700\u52a0\u8f7d js\u811a\u672c\u4e0d\u80fd\u76f4\u63a5\u5305\u542b\u521d\u59cb\u5316\u64cd\u4f5c\uff0c\u5426\u5219\u9875\u9762\u5237\u65b0\u540e\u65e0\u6548 --> {!! admin_js(['xxx/js/page.min.js']) !!} {!! admin_css(['xxx/js/page.min.css']) !!} <script init=\".my-class\"> // js\u4ee3\u7801\u4e5f\u53ef\u4ee5\u653e\u5728\u6a21\u677f\u91cc\u9762 console.log('\u6240\u6709JS\u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u4e86!!!'); $this.on('click', function () { ... }); </script> \u4f7f\u7528 public function index(Content $content) { return $content->body(new MyPage()); } \u793a\u4f8b2 \u540e\u53f0\u7684\u4eea\u8868\u76d8\u9875\u9762 /admin \uff0c\u4e5f\u53ef\u4ee5\u770b\u505a\u662f\u4e00\u4e2a\u81ea\u5b9a\u4e49\u9875\u9762\uff0c\u4ee3\u7801\u5b9e\u73b0\u5982\u4e0b public function index(Content $content) { return $content ->header('Dashboard') ->description('Description...') ->body(function (Row $row) { $row->column(6, function (Column $column) { $column->row(Dashboard::title()); $column->row(new Examples\\Tickets()); }); $row->column(6, function (Column $column) { $column->row(function (Row $row) { $row->column(6, new Examples\\NewUsers()); $row->column(6, new Examples\\NewDevices()); }); $column->row(new Examples\\Sessions()); $column->row(new Examples\\ProductOrders()); }); }); }","title":"\u89c6\u56fe\u4e0e\u81ea\u5b9a\u4e49\u9875\u9762"},{"location":"2.x/custom-page/#_1","text":"","title":"\u89c6\u56fe\u4e0e\u81ea\u5b9a\u4e49\u9875\u9762"},{"location":"2.x/custom-page/#_2","text":"\u5728 Dcat Admin \u4e2d\u6211\u4eec\u53ef\u4ee5\u7528 admin_view \u51fd\u6570\u6e32\u67d3\u89c6\u56fe\uff0c\u8fd9\u4e2a\u529f\u80fd\u501f\u9274\u4e86 vue \u7684\u8bbe\u8ba1\u601d\u60f3\uff0c\u53ef\u4ee5\u628a HTML \u3001 CSS \u548c JS \u4ee3\u7801\u5199\u5728\u540c\u4e00\u4e2a\u6a21\u677f\u6587\u4ef6\u4e2d\uff0c\u8ba9\u4ee3\u7801\u5206\u5c42\u66f4\u6e05\u6670\u66f4\u7b80\u6d01\u6613\u8bfb\uff0c\u5982 <div class=\"my-class\">...</div> <style> .my-class { color: blue; } </style> <script require=\"@test1,@test2\" init=\".my-class\"> $this.css({background: 'red'}) </script> \u5728 php \u4e2d\u6e32\u67d3\u8fd9\u4e2a\u89c6\u56fe public function index(Content $content) { return $content->body(admin_view('...')); }","title":"\u89c6\u56fe"},{"location":"2.x/custom-page/#_3","text":"\u4e0a\u9762\u793a\u4f8b\u4e2d\u7684\u4ee3\u7801\uff0c\u5176\u5b9e\u76f8\u5f53\u4e8e\u4e0b\u9762\u7684\u4ee3\u7801 <div class=\"my-class\">...</div> public function index(Content $content) { admin_require_assets(['@test1', '@test2']); admin_style('.my-class { color: blue; }'); admin_script( <<<JS Dcat.init('.my-class', function (\\$this, id) { \\$this.css({background: 'red'}) }); JS ); return $content->body(view('...')); } \u5f88\u663e\u7136\uff0c\u4f7f\u7528 admin_view \u6e32\u67d3\u89c6\u56fe\u4f1a\u8ba9\u4f60\u7684\u4ee3\u7801\u66f4\u7b80\u6d01\u6613\u8bfb\uff0c\u5173\u4e8e Dcat.init \u4ee5\u53ca script \u6807\u7b7e\u4e2d\u7684 init \u548c require \u5c5e\u6027\u7684\u7528\u6cd5\uff0c\u8bf7\u53c2\u8003\u6587\u6863 \u9759\u6001\u8d44\u6e90 \u4ee5\u53ca \u52a8\u6001\u76d1\u542c\u5143\u7d20\u751f\u6210 (init) \u7ae0\u8282\u3002","title":"\u793a\u4f8b\u89e3\u6790"},{"location":"2.x/custom-page/#_4","text":"\u5728 Dcat Admin \u4e2d\u6784\u5efa\u81ea\u5b9a\u4e49\u9875\u9762\u975e\u5e38\u7b80\u5355\uff0c\u53ef\u4ee5\u53c2\u8003\u5982\u4e0b\u4e24\u4e2a\u4f8b\u5b50","title":"\u81ea\u5b9a\u4e49\u9875\u9762"},{"location":"2.x/custom-page/#1","text":"{tip} Dcat Admin \u6784\u5efa\u7684\u662f\u4e00\u4e2a\u5355\u9875\u5e94\u7528\uff0c\u52a0\u8f7d\u7684 JS \u811a\u672c\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\uff0c\u6240\u4ee5\u521d\u59cb\u5316\u64cd\u4f5c\u4e0d\u80fd\u76f4\u63a5\u653e\u5728 JS \u811a\u672c\u4e2d\uff0c\u5e94\u8be5\u4f7f\u7528 Admin::script \u65b9\u6cd5\u8f7d\u5165\u3002 <?php namespace App\\Admin\\Pages; use Illuminate\\Contracts\\Support\\Renderable; class MyPage implements Renderable { public function render() { return admin_view('admin.pages.my-page'); } } \u89c6\u56fe admin.pages.my-page \uff0c\u6ce8\u610f\u89c6\u56fe\u4ee3\u7801\u91cc\u9762\u4e0d\u8981\u5305\u542b <body> \u548c <html> \u7b49\u6807\u7b7e <div class=\"my-class\"> <h3>\u81ea\u5b9a\u4e49\u9875\u9762\u6f14\u793a</h3> </div> <!-- \u5f15\u5165\u9875\u9762\u6240\u9700\u7684\u9759\u6001\u8d44\u6e90\uff0c\u8fd9\u91cc\u4f1a\u6309\u9700\u52a0\u8f7d js\u811a\u672c\u4e0d\u80fd\u76f4\u63a5\u5305\u542b\u521d\u59cb\u5316\u64cd\u4f5c\uff0c\u5426\u5219\u9875\u9762\u5237\u65b0\u540e\u65e0\u6548 --> {!! admin_js(['xxx/js/page.min.js']) !!} {!! admin_css(['xxx/js/page.min.css']) !!} <script init=\".my-class\"> // js\u4ee3\u7801\u4e5f\u53ef\u4ee5\u653e\u5728\u6a21\u677f\u91cc\u9762 console.log('\u6240\u6709JS\u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u4e86!!!'); $this.on('click', function () { ... }); </script> \u4f7f\u7528 public function index(Content $content) { return $content->body(new MyPage()); }","title":"\u793a\u4f8b1"},{"location":"2.x/custom-page/#2","text":"\u540e\u53f0\u7684\u4eea\u8868\u76d8\u9875\u9762 /admin \uff0c\u4e5f\u53ef\u4ee5\u770b\u505a\u662f\u4e00\u4e2a\u81ea\u5b9a\u4e49\u9875\u9762\uff0c\u4ee3\u7801\u5b9e\u73b0\u5982\u4e0b public function index(Content $content) { return $content ->header('Dashboard') ->description('Description...') ->body(function (Row $row) { $row->column(6, function (Column $column) { $column->row(Dashboard::title()); $column->row(new Examples\\Tickets()); }); $row->column(6, function (Column $column) { $column->row(function (Row $row) { $row->column(6, new Examples\\NewUsers()); $row->column(6, new Examples\\NewDevices()); }); $column->row(new Examples\\Sessions()); $column->row(new Examples\\ProductOrders()); }); }); }","title":"\u793a\u4f8b2"},{"location":"2.x/documentation/","text":"\u5165\u95e8 \u7b80\u4ecb \u5b89\u88c5 v1.x\u5347\u7ea7\u6307\u5357 \u7248\u672c\u5347\u7ea7 \u5feb\u901f\u5f00\u59cb \u5f00\u53d1\u524d\u5fc5\u8bfb \u9759\u6001\u8d44\u6e90 \u4e3b\u9898\u4e0e\u989c\u8272 \u89c6\u56fe\u4e0e\u81ea\u5b9a\u4e49\u9875\u9762 JS\u7ec4\u4ef6 \u591a\u5e94\u7528 (\u591a\u540e\u53f0) Laravel Octane \u5e38\u89c1\u95ee\u9898 \u6570\u636e\u8868\u683c \u57fa\u672c\u4f7f\u7528 \u5217\u7684\u4f7f\u7528\u548c\u6269\u5c55 \u5217\u7684\u663e\u793a\u548c\u6269\u5c55 \u884c\u7684\u4f7f\u7528\u548c\u6269\u5c55 \u5de5\u5177\u680f \u6811\u72b6\u8868\u683c \u7ec4\u5408\u8868\u5934 \u6570\u636e\u6e90 \u5173\u8054\u5173\u7cfb \u67e5\u8be2\u8fc7\u6ee4 \u5217\u8fc7\u6ee4\u5668 \u5feb\u6377\u641c\u7d22 \u89c4\u683c\u7b5b\u9009\u5668 \u6570\u636e\u5bfc\u51fa \u5feb\u6377\u521b\u5efa \u884c\u5185\u7f16\u8f91 \u4e8b\u4ef6 \u5b57\u6bb5\u7ffb\u8bd1 \u5934\u90e8\u548c\u811a\u90e8 \u8f6f\u5220\u9664 \u5f02\u6b65\u6e32\u67d3 \u6570\u636e\u8868\u5355 \u57fa\u672c\u4f7f\u7528 \u56fe\u7247/\u6587\u4ef6\u4e0a\u4f20 \u5b57\u6bb5\u4f7f\u7528 \u5b57\u6bb5\u6269\u5c55 \u6570\u636e\u6e90 \u8868\u5355\u5f39\u7a97 \u5173\u8054\u5173\u7cfb JSON\u8868\u5355 \u5b57\u6bb5\u52a8\u6001\u663e\u793a \u8868\u5355\u5206\u6b65 \u8868\u5355\u9a8c\u8bc1 \u4e8b\u4ef6 \u8868\u5355\u521d\u59cb\u5316 \u5de5\u5177\u8868\u5355 \u8868\u5355\u5e03\u5c40 \u8868\u5355\u5b57\u6bb5\u7ffb\u8bd1 \u6570\u636e\u8be6\u60c5 \u57fa\u672c\u4f7f\u7528 \u5b57\u6bb5\u663e\u793a \u5173\u8054\u5173\u7cfb \u663e\u793a\u6269\u5c55 \u521d\u59cb\u5316 \u5b57\u6bb5\u7ffb\u8bd1 \u6a21\u578b\u6811 \u6570\u636e\u4ed3\u5e93 \u52a8\u4f5c \u57fa\u672c\u4f7f\u7528 \u6570\u636e\u8868\u683c \u6570\u636e\u8868\u5355 \u6570\u636e\u8be6\u60c5 \u6a21\u578b\u6811 \u591a\u8bed\u8a00 \u6269\u5c55 \u6269\u5c55\u57fa\u672c\u4f7f\u7528 \u5f00\u53d1\u6269\u5c55 \u5f00\u53d1\u4e3b\u9898 \u9875\u9762\u7ec4\u4ef6 \u5f02\u6b65\u52a0\u8f7d \u56fe\u8868 \u6570\u636e\u7edf\u8ba1\u5361\u7247 \u5de5\u5177\u8868\u5355 \u6a21\u6001\u7a97(Modal) \u4e0b\u62c9\u83dc\u5355 \u5355/\u590d\u9009\u6846 \u9009\u9879\u5361 \u544a\u8b66\u6846 \u63d0\u793a\u7a97(tooltip) Markdown \u5361\u7247 \u533a\u5757(section) \u52a8\u4f5c\u4ee5\u53ca\u8868\u5355\u54cd\u5e94 \u6743\u9650\u63a7\u5236 \u83dc\u5355 \u5e2e\u52a9\u51fd\u6570 \u5f00\u53d1\u5de5\u5177 \u81ea\u5b9a\u4e49\u767b\u9646\u8ba4\u8bc1 \u81ea\u5b9a\u4e49\u5934\u90e8\u5bfc\u822a \u66f4\u65b0\u65e5\u5fd7 BETA\u7248\u672c\u66f4\u65b0\u65e5\u5fd7","title":"Documentation"},{"location":"2.x/documentation/#_1","text":"\u7b80\u4ecb \u5b89\u88c5 v1.x\u5347\u7ea7\u6307\u5357 \u7248\u672c\u5347\u7ea7 \u5feb\u901f\u5f00\u59cb \u5f00\u53d1\u524d\u5fc5\u8bfb \u9759\u6001\u8d44\u6e90 \u4e3b\u9898\u4e0e\u989c\u8272 \u89c6\u56fe\u4e0e\u81ea\u5b9a\u4e49\u9875\u9762 JS\u7ec4\u4ef6 \u591a\u5e94\u7528 (\u591a\u540e\u53f0) Laravel Octane \u5e38\u89c1\u95ee\u9898","title":"\u5165\u95e8"},{"location":"2.x/documentation/#_2","text":"\u57fa\u672c\u4f7f\u7528 \u5217\u7684\u4f7f\u7528\u548c\u6269\u5c55 \u5217\u7684\u663e\u793a\u548c\u6269\u5c55 \u884c\u7684\u4f7f\u7528\u548c\u6269\u5c55 \u5de5\u5177\u680f \u6811\u72b6\u8868\u683c \u7ec4\u5408\u8868\u5934 \u6570\u636e\u6e90 \u5173\u8054\u5173\u7cfb \u67e5\u8be2\u8fc7\u6ee4 \u5217\u8fc7\u6ee4\u5668 \u5feb\u6377\u641c\u7d22 \u89c4\u683c\u7b5b\u9009\u5668 \u6570\u636e\u5bfc\u51fa \u5feb\u6377\u521b\u5efa \u884c\u5185\u7f16\u8f91 \u4e8b\u4ef6 \u5b57\u6bb5\u7ffb\u8bd1 \u5934\u90e8\u548c\u811a\u90e8 \u8f6f\u5220\u9664 \u5f02\u6b65\u6e32\u67d3","title":"\u6570\u636e\u8868\u683c"},{"location":"2.x/documentation/#_3","text":"\u57fa\u672c\u4f7f\u7528 \u56fe\u7247/\u6587\u4ef6\u4e0a\u4f20 \u5b57\u6bb5\u4f7f\u7528 \u5b57\u6bb5\u6269\u5c55 \u6570\u636e\u6e90 \u8868\u5355\u5f39\u7a97 \u5173\u8054\u5173\u7cfb JSON\u8868\u5355 \u5b57\u6bb5\u52a8\u6001\u663e\u793a \u8868\u5355\u5206\u6b65 \u8868\u5355\u9a8c\u8bc1 \u4e8b\u4ef6 \u8868\u5355\u521d\u59cb\u5316 \u5de5\u5177\u8868\u5355 \u8868\u5355\u5e03\u5c40 \u8868\u5355\u5b57\u6bb5\u7ffb\u8bd1","title":"\u6570\u636e\u8868\u5355"},{"location":"2.x/documentation/#_4","text":"\u57fa\u672c\u4f7f\u7528 \u5b57\u6bb5\u663e\u793a \u5173\u8054\u5173\u7cfb \u663e\u793a\u6269\u5c55 \u521d\u59cb\u5316 \u5b57\u6bb5\u7ffb\u8bd1","title":"\u6570\u636e\u8be6\u60c5"},{"location":"2.x/documentation/#_5","text":"","title":"\u6a21\u578b\u6811"},{"location":"2.x/documentation/#_6","text":"","title":"\u6570\u636e\u4ed3\u5e93"},{"location":"2.x/documentation/#_7","text":"\u57fa\u672c\u4f7f\u7528 \u6570\u636e\u8868\u683c \u6570\u636e\u8868\u5355 \u6570\u636e\u8be6\u60c5 \u6a21\u578b\u6811","title":"\u52a8\u4f5c"},{"location":"2.x/documentation/#_8","text":"","title":"\u591a\u8bed\u8a00"},{"location":"2.x/documentation/#_9","text":"\u6269\u5c55\u57fa\u672c\u4f7f\u7528 \u5f00\u53d1\u6269\u5c55 \u5f00\u53d1\u4e3b\u9898","title":"\u6269\u5c55"},{"location":"2.x/documentation/#_10","text":"\u5f02\u6b65\u52a0\u8f7d \u56fe\u8868 \u6570\u636e\u7edf\u8ba1\u5361\u7247 \u5de5\u5177\u8868\u5355 \u6a21\u6001\u7a97(Modal) \u4e0b\u62c9\u83dc\u5355 \u5355/\u590d\u9009\u6846 \u9009\u9879\u5361 \u544a\u8b66\u6846 \u63d0\u793a\u7a97(tooltip) Markdown \u5361\u7247","title":"\u9875\u9762\u7ec4\u4ef6"},{"location":"2.x/documentation/#section","text":"","title":"\u533a\u5757(section)"},{"location":"2.x/documentation/#_11","text":"","title":"\u52a8\u4f5c\u4ee5\u53ca\u8868\u5355\u54cd\u5e94"},{"location":"2.x/documentation/#_12","text":"","title":"\u6743\u9650\u63a7\u5236"},{"location":"2.x/documentation/#_13","text":"","title":"\u83dc\u5355"},{"location":"2.x/documentation/#_14","text":"","title":"\u5e2e\u52a9\u51fd\u6570"},{"location":"2.x/documentation/#_15","text":"","title":"\u5f00\u53d1\u5de5\u5177"},{"location":"2.x/documentation/#_16","text":"","title":"\u81ea\u5b9a\u4e49\u767b\u9646\u8ba4\u8bc1"},{"location":"2.x/documentation/#_17","text":"","title":"\u81ea\u5b9a\u4e49\u5934\u90e8\u5bfc\u822a"},{"location":"2.x/documentation/#_18","text":"BETA\u7248\u672c\u66f4\u65b0\u65e5\u5fd7","title":"\u66f4\u65b0\u65e5\u5fd7"},{"location":"2.x/extend/","text":"\u5f00\u53d1\u6269\u5c55 \u65b0\u7248\u672c\u9884\u544a Dcat Admin \u8ba1\u5212\u5728 2.0 \u7248\u672c\u4e0a\u7ebf\u63d2\u4ef6\u5e02\u573a\u529f\u80fd\uff0c\u5c06\u5bf9\u6574\u4e2a\u6269\u5c55\u529f\u80fd\u8fdb\u884c\u91cd\u6784\uff0c\u4ee5\u63d0\u5347\u7528\u6237\u4f53\u9a8c\u3002 \u65b0\u7684\u6269\u5c55\u7cfb\u7edf\u5c06\u53ef\u4ee5\u8ba9\u7528\u6237\u53ea\u9700\u5728\u7ba1\u7406\u9875\u9762\u70b9\u70b9\u9f20\u6807\u5373\u53ef\u5b8c\u6210\u63d2\u4ef6\u7684 \u5b89\u88c5 \u3001 \u66f4\u65b0 \u548c \u5378\u8f7d \u7b49\u64cd\u4f5c\u3002 \u5e76\u4e14\u4f1a\u4e0a\u7ebf\u63d2\u4ef6\u4ed8\u8d39\u529f\u80fd\uff0c\u4ee5\u6fc0\u52b1\u5f00\u53d1\u8005\u5f00\u53d1\u9ad8\u8d28\u91cf\u7684\u63d2\u4ef6\u3002 \u5982\u679c\u6709\u4efb\u4f55\u5efa\u8bae\uff0c\u6b22\u8fce\u63d0 issue \u6216\u8005\u79c1\u4fe1\u6211\uff0c Dcat Admin \u56e2\u961f\u5c06\u4f1a\u81f4\u529b\u4e8e\u6784\u5efa\u4e00\u4e2a\u4e8e\u5f00\u53d1\u8005\u548c\u7528\u6237\u90fd\u6709\u5229\u7684\u751f\u6001\uff0c\u611f\u8c22\u5927\u5bb6\u7684\u652f\u6301\uff01 \u5f00\u59cb Dcat Admin \u652f\u6301\u5b89\u88c5\u6269\u5c55\u5de5\u5177\u6765\u5e2e\u52a9\u4e30\u5bcc\u4f60\u7684\u540e\u53f0\u529f\u80fd\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c Laravel Admin \u539f\u6709\u7684\u6269\u5c55\u65e0\u6cd5\u76f4\u63a5\u5728 Dcat Admin \u4e2d\u4f7f\u7528\uff0c\u4f46\u5927\u90e8\u5206\u6269\u5c55\u53ea\u9700\u8981\u505a\u4e00\u4e9b\u5fae\u5c0f\u7684\u8c03\u6574\u5c31\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528\u4e86\uff0c\u6709\u5174\u8da3\u7684\u540c\u5b66\u53ef\u4ee5\u81ea\u884c\u79fb\u690d\u3002 \u5982\u679c\u5927\u5bb6\u5728\u4f7f\u7528\u7684\u8fc7\u7a0b\u4e2d\u6709\u5728 Dcat Admin \u7684\u57fa\u7840\u4e0a\u6dfb\u52a0\u4e00\u4e9b\u81ea\u5df1\u7684\u529f\u80fd\u6216\u8005\u7ec4\u4ef6\uff0c\u4e0d\u59a8\u505a\u6210\u4e00\u4e2a Dcat Admin \u6269\u5c55\uff0c\u8fd9\u6837\u53ef\u4ee5\u7ed9\u5176\u5b83 Dcat Admin \u4f7f\u7528\u8005\u63d0\u4f9b\u5e2e\u52a9\uff0c\u5e76\u4e14\u5728\u5176\u5b83\u4eba\u7684\u4f7f\u7528\u53cd\u9988\u4e2d\u7684\u63d0\u5347\u6269\u5c55\u7684\u8d28\u91cf\u3002 \u8fd9\u7bc7\u6587\u6863\u5c06\u4f1a\u4ee5\u5f00\u53d1\u4e00\u4e2a \u5e72\u8d27\u96c6\u4e2d\u8425 \u6269\u5c55\u4e3a\u4f8b\uff0c\u4e00\u6b65\u4e00\u6b65\u7684\u5f00\u53d1\u4e00\u4e2a\u6269\u5c55\uff0c\u5e76\u4e14\u53d1\u5e03\u7ed9\u4ed6\u4eba\u4f7f\u7528\uff0c\u6700\u7ec8\u7684\u6548\u679c\u53c2\u8003 Demo \u3002 \u521b\u5efacomposer\u5305 Dcat Admin \u7684\u5305\u5c06\u4f1a\u7528 composer \u5b89\u88c5\uff0c\u6240\u4ee5\u5148\u8981\u521b\u5efa\u4e00\u4e2a composer \u5305\uff0c\u53ef\u4ee5\u7528\u5185\u7f6e\u7684 admin:extend \u547d\u4ee4\u6765\u751f\u6210\u4e00\u4e2a\u6269\u5c55\u7684\u9aa8\u67b6\u3002 \u8fd0\u884c\u547d\u4ee4\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u4f1a\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u76ee\u5f55\u6765\u5b58\u653e\u4f60\u7684\u6269\u5c55\u6587\u4ef6\uff0c\u4f60\u53ef\u4ee5\u5728 config/admin.php \u91cc\u9762\u589e\u52a0\u4e00\u4e2a\u914d\u7f6e 'extension_dir' => admin_path('Extensions') \uff0c\u8fd9\u6837\u6269\u5c55\u6587\u4ef6\u5c06\u4f1a\u5b58\u653e\u5728 app/Admin/Extensions\u76ee\u5f55\u4e0b ,\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u653e\u5728\u4efb\u4f55\u5176\u5b83\u76ee\u5f55\u3002 php artisan admin:extend dcat-admin-extensions/gank --namespace=\"Dcat\\Admin\\Extension\\Gank\" \u5176\u4e2d dcat-admin-extensions/gank \u662f\u5305\u540d\uff0c namespace \u9009\u9879\u662f\u8fd9\u4e2a\u5305\u4f7f\u7528\u7684\u9876\u7ea7\u547d\u540d\u7a7a\u95f4\uff0c\u8fd0\u884c\u8fd9\u4e2a\u547d\u4ee4\u4e4b\u540e, \u5c06\u4f1a\u5728\u5728 config/admin.php \u4e2d\u8bbe\u7f6e\u7684\u6269\u5c55\u76ee\u5f55\u4e2d\u751f\u6210\u76ee\u5f55 dcat-admin-extensions/gank \u548c\u4e0b\u9762\u7684\u6587\u4ef6\u7ed3\u6784\uff1a \u251c\u2500\u2500 LICENSE \u251c\u2500\u2500 README.md \u251c\u2500\u2500 composer.json \u251c\u2500\u2500 bootstrap.php \u251c\u2500\u2500 database \u2502 \u251c\u2500\u2500 migrations \u2502 \u2514\u2500\u2500 seeds \u251c\u2500\u2500 resources \u2502 \u251c\u2500\u2500 assets \u2502 \u2514\u2500\u2500 views \u2502 \u2514\u2500\u2500 index.blade.php \u251c\u2500\u2500 routes \u2502 \u2514\u2500\u2500 web.php \u2514\u2500\u2500 src \u251c\u2500\u2500 Gank.php \u251c\u2500\u2500 GankServiceProvider.php \u2514\u2500\u2500 Http \u2514\u2500\u2500 Controllers \u2514\u2500\u2500 GankController.php bootstrap.php \u7528\u4e8e\u6ce8\u518c\u6269\u5c55\uff0c\u6b64\u6587\u4ef6\u7684\u4ee3\u7801\u4e0d\u9700\u8981\u505a\u4efb\u4f55\u4fee\u6539\uff1b resources \u7528\u6765\u653e\u7f6e\u89c6\u56fe\u6587\u4ef6\u548c\u9759\u6001\u8d44\u6e90\u6587\u4ef6\uff1b src \u4e3b\u8981\u7528\u6765\u653e\u7f6e\u903b\u8f91\u4ee3\u7801\uff1b routes/web.php \u7528\u6765\u5b58\u653e\u8fd9\u4e2a\u6269\u5c55\u7684\u8def\u7531\u8bbe\u7f6e\uff0c database \u7528\u6765\u653e\u7f6e\u6570\u636e\u5e93\u8fc1\u79fb\u6587\u4ef6\u548c\u6570\u636e seeders \u3002 \u529f\u80fd\u5f00\u53d1 \u8fd9\u4e2a\u6269\u5c55\u7684\u529f\u80fd\u4e3b\u8981\u7528\u6765\u5c55\u793a gank.io \u63a5\u53e3\u7684\u5185\u5bb9\uff0c\u96c6\u6210\u8fdb Dcat Admin \u4e2d\uff0c\u5b83\u5c06\u4f1a\u6709\u4e00\u4e2a\u8def\u7531\u548c\u4e00\u4e2a\u63a7\u5236\u5668\uff0c\u6ca1\u6709\u6570\u636e\u5e93\u6587\u4ef6\u3001\u6a21\u677f\u548c\u9759\u6001\u8d44\u6e90\u6587\u4ef6\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u6ca1\u6709\u7528\u5230\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u6e05\u7406\u6389\uff0c\u6e05\u7406\u4e4b\u540e\u7684\u76ee\u5f55\u6587\u4ef6\u4e3a\uff1a \u251c\u2500\u2500 LICENSE \u251c\u2500\u2500 README.md \u251c\u2500\u2500 composer.json \u251c\u2500\u2500 bootstrap.php \u251c\u2500\u2500 routes \u2502 \u2514\u2500\u2500 web.php \u2514\u2500\u2500 src \u251c\u2500\u2500 Gank.php \u251c\u2500\u2500 GankServiceProvider.php \u2514\u2500\u2500 Http \u2514\u2500\u2500 Controllers \u2514\u2500\u2500 GankController.php \u751f\u6210\u5b8c\u6269\u5c55\u6846\u67b6\u4e4b\u540e\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u4e00\u8fb9\u8c03\u8bd5\u4e00\u8fb9\u5f00\u53d1\uff0c\u6240\u4ee5\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u672c\u5730\u5b89\u88c5\uff0c\u5148\u628a\u6269\u5c55\u5b89\u88c5\u8fdb\u7cfb\u7edf\u4e2d\uff0c\u7ee7\u7eed\u5f00\u53d1 \u6dfb\u52a0\u8def\u7531 \u9996\u5148\u6dfb\u52a0\u4e00\u4e2a\u8def\u7531\uff0c\u5728 routes/web.php \u4e2d\u5df2\u7ecf\u81ea\u52a8\u751f\u6210\u597d\u4e86\u4e00\u4e2a\u8def\u7531\u914d\u7f6e <?php use Dcat\\Admin\\Extension\\Gank\\Http\\Controllers; Route::get('gank', Controllers\\GankController::class.'@index'); \u8bbf\u95ee\u8def\u5f84 http://localhost:8000/admin/gank \uff0c\u5c06\u4f1a\u7531 Dcat\\Admin\\Extension\\Gank\\Http\\Controllers\\GankController \u63a7\u5236\u5668\u7684 index \u65b9\u6cd5\u6765\u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\u3002 \u8bbe\u7f6e\u6269\u5c55\u5c5e\u6027 src/Gank.php \u4f5c\u4e3a\u6269\u5c55\u7c7b\uff0c\u7528\u6765\u8bbe\u7f6e\u6269\u5c55\u7684\u5c5e\u6027 <?php namespace Dcat\\Admin\\Extension\\Gank; use Dcat\\Admin\\Extension; class Gank extends Extension { // \u6269\u5c55\u522b\u540d\uff0c\u7528\u4e8e\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f const NAME = 'gank'; // service provider\u7c7b\u540d\uff0c\u8fd9\u4e2a\u7528\u81ea\u52a8\u751f\u6210\u7684\u5c31\u884c\uff0c\u4e0d\u9700\u8981\u6539 public $serviceProvider = GankServiceProvider::class; // \u9759\u6001\u8d44\u6e90\u76ee\u5f55\uff0c\u5982\u679c\u4e0d\u9700\u8981\u9759\u6001\u8d44\u6e90\u53ef\u7528\u5220\u9664\u6389 // public $assets = __DIR__.'/../resources/assets'; // composer\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u7528\u9ed8\u8ba4\u7684\u5373\u53ef public $composerJson = __DIR__.'/../composer.json'; // \u81ea\u5b9a\u4e49\u5c5e\u6027 public static $categoryColorsMap = [ 'App' => 'var(--purple)', '\u524d\u7aef' => 'var(--primary)', '\u62d3\u5c55\u8d44\u6e90' => 'var(--primary-dark)', '\u778e\u63a8\u8350' => 'var(--blue)', '\u798f\u5229' => 'var(--danger)', 'Android' => 'var(--purple-dark)', 'iOS' => 'var(--info)', '\u4f11\u606f\u89c6\u9891' => 'var(--warning)', ]; } \u8fd9\u4e2a\u6587\u4ef6\u7528\u6765\u8bbe\u7f6e\u8fd9\u4e2a\u6269\u5c55\u7684\u4e00\u4e9b\u5c5e\u6027\uff0c $name \u662f\u8fd9\u4e2a\u6269\u5c55\u7684\u522b\u540d\uff0c\u5982\u679c\u8fd9\u4e2a\u6269\u5c55\u6709\u89c6\u56fe\u6587\u4ef6\u9700\u8981\u6e32\u67d3\uff0c\u5219\u5fc5\u987b\u6307\u5b9a\u8fd9\u4e2a\u6269\u5c55\u7684 $views \u5c5e\u6027\uff0c\u540c\u6837\u5982\u679c\u6709\u9759\u6001\u8d44\u6e90\u6587\u4ef6\u9700\u8981\u53d1\u5e03\uff0c\u5219\u5fc5\u987b\u8bbe\u7f6e $assets \u5c5e\u6027\uff0c \u5982\u679c\u9700\u8981\u5728\u5de6\u4fa7\u8fb9\u680f\u589e\u52a0\u4e00\u9879\u83dc\u5355\u6309\u94ae\uff0c\u8bbe\u7f6e $menu \u5c5e\u6027\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u8981\u53bb\u6389\u4e0d\u5fc5\u8981\u7684\u5c5e\u6027\u3002 \u7136\u540e\u6253\u5f00 src/GankServiceProvider.php \uff0c\u8fd9\u4e2a ServiceProvider \u5c06\u4f1a\u5728\u542f\u7528\u6269\u5c55\u7684\u65f6\u5019\u8fd0\u884c\uff08\u4e0d\u9700\u8981\u5f00\u53d1\u8005\u81ea\u5df1\u6dfb\u52a0\uff09\uff0c\u7528\u6765\u5c06\u8fd9\u4e2a\u6269\u5c55\u7684\u4e00\u4e9b\u670d\u52a1\u6ce8\u518c\u8fdb\u7cfb\u7edf\u4e2d\u3002 \u52a0\u8f7d\u89c6\u56fe \u5982\u679c\u8fd9\u4e2a\u6269\u5c55\u9700\u8981\u52a0\u8f7d\u89c6\u56fe\u6587\u4ef6\uff0c\u5728 src/GankServiceProvider.php \u7684 boot \u65b9\u6cd5\u4e2d\u52a0\u5165\u4ee5\u4e0b\u7684\u4ee3\u7801\uff1a $extension = Gank::make(); if ($extension->views) { $this->loadViewsFrom($extension->views, 'gank'); } loadViewsFrom \u65b9\u6cd5\u7684\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u5728\u6269\u5c55\u7c7b src/Gank.php \u4e2d\u8bbe\u7f6e\u7684\u89c6\u56fe\u5c5e\u6027\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u89c6\u56fe\u6587\u4ef6\u76ee\u5f55\u7684\u547d\u540d\u7a7a\u95f4\uff0c\u8bbe\u7f6e\u4e3a gank \u4e4b\u540e\uff0c\u5728\u63a7\u5236\u5668\u4e2d\u7528 view('gank::index') \u6765\u52a0\u8f7d resources/views \u76ee\u5f55\u4e0b\u7684\u89c6\u56fe\u6587\u4ef6\u3002 \u5f15\u5165\u9759\u6001\u8d44\u6e90 \u5982\u679c\u4f60\u7684\u9879\u76ee\u4e2d\u6709\u9759\u6001\u8d44\u6e90\u6587\u4ef6\u9700\u8981\u5f15\u5165\uff0c\u5148\u628a\u6587\u4ef6\u653e\u5728 resources/assets \u76ee\u5f55\u4e2d\uff0c\u6bd4\u5982\u653e\u5165 resources/assets/foo.js \u548c resources/assets/bar.css \u8fd9\u4e24\u4e2a\u6587\u4ef6\u3002 \u63a5\u7740\u5728\u6269\u5c55\u7c7b src/Gank.php \u4e2d\u8bbe\u7f6e $assets \u5c5e\u6027\u5373\u53ef\uff1a public $assets = __DIR__.'/../resources/assets'; \u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c\u6587\u4ef6\u5c06\u4f1a\u590d\u5236\u5230 public/vendor/dcat-admin-extensions/gank \u76ee\u5f55\u4e2d\u3002 \u7136\u540e\u6211\u4eec\u53ef\u4ee5\u5728\u9700\u8981\u4f7f\u7528\u8fd9\u4e9b\u9759\u6001\u8d44\u6e90\u7684\u5730\u65b9\u52a0\u4e0a\u4e0b\u9762\u7684\u4ee3\u7801\u5373\u53ef {tip} \u56e0\u4e3a Dcat Admin \u652f\u6301\u9759\u6001\u8d44\u6e90\u6309\u9700\u52a0\u8f7d\uff0c\u6240\u4ee5\u4e0d\u63a8\u8350\u76f4\u63a5\u5728 ServiceProvider \u6216\u8005\u662f bootstrap.php \u4e2d\u5f15\u5165\u9759\u6001\u8d44\u6e90\uff0c\u8fd9\u6837\u4f1a\u62d6\u6162\u6240\u6709\u9875\u9762\u7684\u52a0\u8f7d\u65f6\u95f4\u3002 use Dcat\\Admin\\Admin; Admin::js('vendor/dcat-admin-extensions/gank/phpinfo/foo.js'); Admin::css('vendor/dcat-admin-extensions/gank/phpinfo/bar.css'); \u8fd9\u6837\u5c31\u5b8c\u6210\u4e86\u9759\u6001\u8d44\u6e90\u7684\u5f15\u5165\uff0c\u5728 gank \u8fd9\u4e2a\u6269\u5c55\u4e2d\uff0c\u7531\u4e8e\u6ca1\u6709\u9759\u6001\u8d44\u6e90\u9700\u8981\u5f15\u5165\uff0c\u6240\u4ee5\u53ef\u4ee5\u5ffd\u7565\u6389\u8fd9\u4e00\u6b65\u3002 \u6dfb\u52a0\u83dc\u5355 \u6dfb\u52a0\u83dc\u5355\u7684\u65b9\u5f0f\u6709\u4e24\u79cd\uff1a - \u5728 src/Gank.php \u8bbe\u7f6e $menu \u5c5e\u6027\uff0c\u8fd9\u79cd\u65b9\u5f0f\u662f\u628a\u83dc\u5355\u5199\u5165\u5230\u83dc\u5355\u8868\u4e2d\uff0c\u7528\u6237\u66f4\u6613\u4e8e\u63a7\u5236 - \u4f7f\u7528 Admin::menu \u63a5\u53e3\u901a\u8fc7\u6570\u7ec4\u7684\u65b9\u5f0f\u6dfb\u52a0\u83dc\u5355\uff0c\u8fd9\u79cd\u65b9\u5f0f\u66f4\u52a0\u65b9\u4fbf\uff0c\u5e76\u4e14\u652f\u6301\u6dfb\u52a0\u591a\u7ea7\u83dc\u5355 \u8fd9\u91cc\u4f7f\u7528\u7684\u662f\u7b2c\u4e8c\u79cd\u65b9\u5f0f\u6dfb\u52a0\u83dc\u5355\uff0c\u5728 src/GankServiceProvider.php \u7684 boot \u65b9\u6cd5\u52a0\u5165\u4e0b\u9762\u7684\u4ee3\u7801\uff1a Admin::menu()->add([ [ 'id' => 1, 'title' => '\u5e72\u8d27\u96c6\u4e2d\u8425', 'icon' => ' fa-newspaper-o', 'uri' => 'gank', 'parent_id' => 0, 'permission_id' => 'gank', // \u7ed1\u5b9a\u6743\u9650 'roles' => [['slug' => 'gank']], // \u7ed1\u5b9a\u89d2\u8272 ], [ 'id' => 2, 'title' => '\u6240\u6709\u5e72\u8d27', 'icon' => 'fa-smile-o', 'uri' => 'gank', 'parent_id' => 1, 'permission_id' => 'gank', // \u7ed1\u5b9a\u6743\u9650 'roles' => [['slug' => 'gank']], // \u7ed1\u5b9a\u89d2\u8272 ], ]); \u6700\u7ec8\u7684 src/GankServiceProvider.php \u4ee3\u7801\u5982\u4e0b\uff1a <?php namespace Dcat\\Admin\\Extension\\Gank; use Dcat\\Admin\\Admin; use Illuminate\\Support\\ServiceProvider; class GankServiceProvider extends ServiceProvider { /** * {@inheritdoc} */ public function boot() { $extension = Gank::make(); if ($extension->views) { $this->loadViewsFrom($extension->views, 'gank'); } if ($extension->lang) { $this->loadTranslationsFrom($extension->lang, 'gank'); } if ($extension->migrations) { $this->loadMigrationsFrom($extension->migrations); } $this->app->booted(function () use ($extension) { $extension->routes(__DIR__.'/../routes/web.php'); }); // \u6dfb\u52a0\u83dc\u5355 $this->registerMenus(); } protected function registerMenus() { Admin::menu()->add([ [ 'id' => 1, 'title' => '\u5e72\u8d27\u96c6\u4e2d\u8425', 'icon' => ' fa-newspaper-o', 'uri' => 'gank', 'parent_id' => 0, 'permission_id' => 'gank', // \u7ed1\u5b9a\u6743\u9650 'roles' => [['slug' => 'gank']], // \u7ed1\u5b9a\u89d2\u8272 ], [ 'id' => 2, 'title' => '\u6240\u6709\u5e72\u8d27', 'icon' => 'fa-smile-o', 'uri' => 'gank', 'parent_id' => 1, 'permission_id' => 'gank', // \u7ed1\u5b9a\u6743\u9650 'roles' => [['slug' => 'gank']], // \u7ed1\u5b9a\u89d2\u8272 ], ]); } } \u6dfb\u52a0\u81ea\u5b9a\u4e49\u5b89\u88c5\u903b\u8f91 \u5982\u679c\u4f60\u60f3\u5728\u5bfc\u5165\u6269\u5c55\u65f6\u6267\u884c\u4e00\u4e9b\u81ea\u5b9a\u4e49\u903b\u8f91\uff0c\u53ef\u4ee5\u5728 src/Gank.php \u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u4ee3\u7801\uff1a \u6ce8\u610f\u8bf7\u4fdd\u8bc1\u91cd\u590d\u6267\u884c\u5bfc\u5165\u547d\u4ee4\u4e0d\u4f1a\u62a5\u9519 ... public function import(Command $command) { parent::import($command); // TODO: Change the autogenerated stub // \u5728\u8fd9\u91cc\u5199\u5165\u4f60\u7684\u5bfc\u5165\u903b\u8f91 $command->info('\u5bfc\u5165\u6210\u529f'); } \u4ee3\u7801\u903b\u8f91\u5f00\u53d1 \u8fd9\u4e2a\u6269\u5c55\u4e3b\u8981\u662f\u8c03\u7528 gank.io \u63d0\u4f9b\u7684\u63a5\u53e3\uff0c\u518d\u628a\u6570\u636e\u5c55\u793a\u51fa\u6765\u3002 \u6211\u4eec\u9700\u8981\u65b0\u589e\u4e00\u4e2a\u6570\u636e\u4ed3\u5e93\u6587\u4ef6\u7528\u4e8e\u83b7\u53d6 gank.io \u7684\u6570\u636e\uff0c\u521b\u5efa\u6587\u4ef6 src/Repositories/Ganks.php \uff1a <?php namespace Dcat\\Admin\\Extension\\Gank\\Repositories; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Repositories\\Repository; use Illuminate\\Pagination\\LengthAwarePaginator; use Illuminate\\Support\\Collection; class Ganks extends Repository { protected $api = 'http://gank.io/api/data/{category}/{limit}/{page}'; protected $searchApi = 'http://gank.io/api/search/query/{key}/category/{category}/count/{limit}/page/{page}'; /** * \u67e5\u8be2\u8868\u683c\u6570\u636e * * @param Grid\\Model $model * @return Collection */ public function get(Grid\\Model $model) { $currentPage = $model->getCurrentPage(); $perPage = $model->getPerPage(); // \u83b7\u53d6\u7b5b\u9009\u53c2\u6570 $category = $model->filter()->input(Grid\\Filter\\Scope::QUERY_NAME, 'all'); $keyword = trim($model->filter()->input('keyword')); $api = $keyword ? $this->searchApi : $this->api; $client = new \\GuzzleHttp\\Client(); $response = $client->get(str_replace( ['{category}', '{limit}', '{page}', '{key}'], [$category, $perPage, $currentPage, $keyword], $api )); $data = collect( json_decode((string)$response->getBody(), true)['results'] ?? [] ); $total = $keyword ? 400 : ($category == 'all' ? 1000 : 500); $paginator = new LengthAwarePaginator( $data, $category == '\u798f\u5229' ? 680 : $total, $perPage, // \u4f20\u5165\u6bcf\u9875\u663e\u793a\u884c\u6570 $currentPage // \u4f20\u5165\u5f53\u524d\u9875\u7801 ); $paginator->setPath(\\url()->current()); return $paginator; } public function getKeyName() { return '_id'; } } \u4fee\u6539\u63a7\u5236\u5668\u4ee3\u7801\u5982\u4e0b\uff1a <?php namespace Dcat\\Admin\\Extension\\Gank\\Http\\Controllers; use Dcat\\Admin\\Extension\\Gank\\Gank; use Dcat\\Admin\\Extension\\Gank\\Repositories\\Ganks; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Layout\\Content; use Dcat\\Admin\\Layout\\Row; use Illuminate\\Routing\\Controller; use Dcat\\Admin\\Widgets\\Navbar; class GankController extends Controller { public function index(Content $content) { $grid = $this->grid(); $grid->disableFilter(); $grid->filter() ->withoutInputBorder() ->expand() ->resetPosition() ->hiddenResetButtonText(); return $content ->header('\u6240\u6709\u5e72\u8d27') ->description('\u6bcf\u65e5\u5206\u4eab\u59b9\u5b50\u56fe \u548c \u6280\u672f\u5e72\u8d27') ->body($grid->filter()) ->body(function (Row $row) { $items = array_keys(Gank::$categoryColorsMap); array_unshift($items, '\u5168\u90e8'); $navbar = Navbar::make('#', array_combine($items, $items)) ->checked(request(Grid\\Filter\\Scope::QUERY_NAME, '\u5168\u90e8')) ->click() ->map(function ($v) { if ($v == '\u5168\u90e8') { $url = '?'; } else { $url = '?'.Grid\\Filter\\Scope::QUERY_NAME.'='.$v; } return \"<a href='$url'>$v</a>\"; }) ->style('max-width:705px'); $row->column(7, $navbar); }) ->body($grid); } protected function grid() { $this->define(); $grid = new Grid(new Ganks); $grid->number(); $grid->desc('\u63cf\u8ff0')->width('300px'); $grid->images('\u56fe\u7247')->image(150); $grid->type('\u7c7b\u522b'); $grid->who('\u4f5c\u8005')->label(); $grid->publishedAt('\u53d1\u5e03\u4e8e'); $grid->disableActions(); $grid->disableBatchDelete(); $grid->disableExport(); $grid->disableCreateButton(); $grid->disableFilterButton(); $grid->disableQuickCreateButton(); $grid->perPages([]); return $grid->filter(function (Grid\\Filter $filter) { $category = $filter->input(Grid\\Filter\\Scope::QUERY_NAME, '\u5168\u90e8'); if ($category != '\u798f\u5229') { $filter->like('keyword', ucfirst($category))->width('300px')->placeholder('\u8bf7\u8f93\u5165'); } }); } protected function define() { Grid\\Column::define('desc', function ($v) { if ($this->type == '\u798f\u5229') { $width = '150'; $height = '200'; return \"<img data-init='preview' src='{$this->url}' style='max-width:{$width}px;max-height:{$height}px;cursor:pointer' class='img img-thumbnail' />\"; } return sprintf('<a href=\"%s\" target=\"_blank\">%s</a>', $this->url, $v); }); Grid\\Column::define('publishedAt', function ($v) { return date('Y-m-d', strtotime($v)); }); Grid\\Column::define('datetime', function ($v) { return date('Y-m-d H:i:s', strtotime($v)); }); Grid\\Column::define('type', function ($v) { $map = Gank::$categoryColorsMap; return \"<span class='label' style='background:{$map[$v]}'>$v</span>\"; }); } } \u8fd9\u6837\u4e00\u4e2a\u5b8c\u6574\u7684\u6269\u5c55\u5c31\u5f00\u53d1\u5b8c\u6210\u4e86\u3002 \u4fee\u6539 composer.json & README.md \u4ee3\u7801\u90e8\u5206\u5b8c\u6210\u4e4b\u540e\uff0c\u9700\u8981\u4fee\u6539 composer.json \u91cc\u9762\u7684\u5185\u5bb9\uff0c\u5c06 description \u3001 keywords \u3001 license \u3001 authors \u7b49\u5185\u5bb9\u66ff\u6362\u4e3a\u4f60\u7684\u4fe1\u606f\uff0c\u7136\u540e\u4e0d\u8981\u5fd8\u8bb0\u5b8c\u5584 README.md \uff0c\u8865\u5145\u4f7f\u7528\u6587\u6863\u7b49\u76f8\u5173\u4fe1\u606f\u3002 \u5b89\u88c5 \u5b8c\u6210\u4e86\u6269\u5c55\u5f00\u53d1\u4e4b\u540e\uff0c\u6839\u636e\u60c5\u51b5\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u7684\u65b9\u5f0f\u5b89\u88c5\u4f60\u7684\u6269\u5c55 \u672c\u5730\u5b89\u88c5 \u5728\u5f00\u53d1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e00\u822c\u9700\u8981\u4e00\u8fb9\u8c03\u8bd5\u4e00\u8fb9\u5f00\u53d1\uff0c\u6240\u4ee5\u5148\u6309\u7167\u4e0b\u9762\u7684\u65b9\u5f0f\u8fdb\u884c\u672c\u5730\u5b89\u88c5 \u6253\u5f00\u4f60\u7684\u9879\u76ee\u4e2d composer.json \u6587\u4ef6\uff0c\u5728\u52a0\u5165\u4e0b\u9762\u7684\u914d\u7f6e \"repositories\": [ { \"type\": \"path\", \"url\": \"app/Admin/Extensions/dcat-admin-extensions/gank\" } ] \u7136\u540e\u8fd0\u884c composer require dcat-admin-extensions/gank @dev \u5b8c\u6210\u5b89\u88c5\uff0c\u5982\u679c\u6709\u9759\u6001\u6587\u4ef6\u9700\u8981\u53d1\u5e03\uff0c\u8fd0\u884c\u4e0b\u9762\u7684\u547d\u4ee4: php artisan vendor:publish --provider=Dcat\\Admin\\Extension\\GankServiceProvider \u8fdc\u7a0b\u5b89\u88c5 \u5982\u679c\u5f00\u53d1\u5b8c\u6210\u4e4b\u540e\uff0c\u5e0c\u671b\u5f00\u6e90\u51fa\u6765\u7ed9\u5927\u5bb6\u4f7f\u7528\uff0c\u6309\u7167\u4e0b\u9762\u7684\u6b65\u9aa4\u8fdb\u884c \u4e0a\u4f20\u5230Github \u5148\u767b\u5f55\u4f60\u7684Github\uff0c\u521b\u5efa\u4e00\u4e2a\u4ed3\u5e93\uff0c\u7136\u540e\u6309\u7167\u9875\u9762\u4e0a\u7684\u63d0\u793a\u628a\u4f60\u7684\u4ee3\u7801push\u4e0a\u53bb git init git remote add origin https://github.com/<your-name>/<your-repository>.git git add . git commit -am \"Initial commit.\" git push origin master \u53d1\u5e03release \u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u65b9\u5f0f\u5728\u672c\u5730\u53d1\u5e03\u7248\u672c git tag 0.0.1 && git push --tags \u4e5f\u53ef\u4ee5\u5728Github\u7684\u4ed3\u5e93\u9875\u9762\u7684Releases\u9875\u9762\u624b\u52a8\u8bbe\u7f6e \u53d1\u5e03\u5230Packagist.org \u63a5\u4e0b\u6765\u5c31\u662f\u53d1\u5e03\u4f60\u7684\u9879\u76ee\u5230 Packagist.org \uff0c\u5982\u679c\u6ca1\u6709\u8d26\u53f7\u7684\u8bdd\uff0c\u5148\u6ce8\u518c\u4e00\u4e2a\uff0c\u7136\u540e\u6253\u5f00\u9876\u90e8\u5bfc\u822a\u7684 Submit , \u586b\u5165\u4ed3\u5e93\u5730\u5740\u63d0\u4ea4 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5f53\u60a8\u63a8\u9001\u65b0\u4ee3\u7801\u65f6\uff0c Packagist.org \u4e0d\u4f1a\u81ea\u52a8\u66f4\u65b0\uff0c\u6240\u4ee5\uff0c\u60a8\u9700\u8981\u521b\u5efa\u4e00\u4e2aGitHub\u670d\u52a1\u94a9\u5b50\uff0c \u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u70b9\u51fb\u9875\u9762\u4e0a\u7684 Update \u6309\u94ae\u624b\u52a8\u66f4\u65b0\u5b83\uff0c\u4f46\u6211\u5efa\u8bae\u81ea\u52a8\u6267\u884c\u8fd9\u4e2a\u8fc7\u7a0b \u63d0\u4ea4\u4e4b\u540e\uff0c\u7531\u4e8e\u5404\u5730\u7684\u955c\u50cf\u540c\u6b65\u65f6\u95f4\u7684\u5ef6\u8fdf\uff0c\u53ef\u80fd\u5728\u7528composer\u5b89\u88c5\u7684\u65f6\u5019\uff0c\u4f1a\u6682\u65f6\u627e\u4e0d\u5230\u4f60\u7684\u9879\u76ee\uff0c\u8fd9\u4e2a\u65f6\u5019\u53ef\u80fd\u9700\u8981\u7b49\u5f85\u540c\u6b65\u5b8c\u6210 \u53d1\u5e03\u5b8c\u6210\u4e4b\u540e\u5c31\u53ef\u4ee5\u901a\u8fc7composer\u5b89\u88c5\u4f60\u7684\u6269\u5c55\u4e86 \u52a0\u5165\u5230https://github.com/dcat-admin-extensions \u5982\u679c\u60f3\u628a\u4f60\u5f00\u53d1\u7684\u6269\u5c55\u52a0\u5165\u5230 dcat-admin-extensions \uff0c\u6b22\u8fce\u7528\u5404\u79cd\u65b9\u5f0f\u8054\u7cfb\u6211\uff0c\u8fd9\u6837\u53ef\u4ee5\u8ba9\u66f4\u591a\u4eba\u770b\u5230\u5e76\u4f7f\u7528\u4f60\u5f00\u53d1\u7684\u5de5\u5177\u3002 \u5bfc\u5165\u548c\u542f\u7528\u6269\u5c55 \u5bfc\u5165\u6269\u5c55 \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5373\u53ef\u4ee5\u5bfc\u5165\u6269\u5c55\uff0c\u5bfc\u5165\u7684\u6587\u4ef6\u4e3b\u8981\u6709\uff1a\u9759\u6001\u8d44\u6e90\u6587\u4ef6\u3001\u83dc\u5355\u3001\u6743\u9650\u7b49\u3002 \u89c6\u56fe\u3001\u6570\u636e\u5e93\u8fc1\u79fb\u6587\u4ef6\u3001\u8bed\u8a00\u5305\u4e00\u822c\u4e0d\u9700\u8981\u5bfc\u5165\u3002\u5982\u679c\u8981\u5bfc\u5165\u5176\u4ed6\u6587\u4ef6\uff0c\u9700\u8981\u6269\u5c55\u5f00\u53d1\u8005\u81ea\u884c\u5b9a\u4e49\u3002 \u53e6\u5916\u6b64\u547d\u4ee4\u5141\u8bb8\u91cd\u590d\u6267\u884c\u3002 php artisan admin:import Dcat\\Admin\\Extension\\Gank\\Gank \u542f\u7528\u6269\u5c55 \u6269\u5c55\u7684\u542f\u7528\u4e0e\u5426\u662f\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u63a7\u5236\u7684\uff0c\u6253\u5f00 /config/admin-extension.php \uff0c\u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801\uff1a return [ 'gank' => [ 'enable' => true, ], ]; \u53ef\u89c6\u5316\u7ba1\u7406\u6269\u5c55 \u8bbf\u95ee http://localhost:8000/admin/helpers/extensions \uff0c\u53ef\u4ee5\u901a\u8fc7\u9875\u9762\u64cd\u4f5c\u542f\u7528\u6216\u5173\u95ed\u6269\u5c55\u3001\u5bfc\u5165\u6269\u5c55\u3002 \u5982\u679c /config/admin-extension.php \u4e0d\u5b58\u5728\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u521b\u5efa \u8fd9\u6837\u5c31\u5b8c\u6210\u4e86\u5b89\u88c5\uff0c\u6253\u5f00 http://localhost/admin/gank \u8bbf\u95ee\u8fd9\u4e2a\u6269\u5c55\u3002","title":"\u5f00\u53d1\u6269\u5c55"},{"location":"2.x/extend/#_1","text":"","title":"\u5f00\u53d1\u6269\u5c55"},{"location":"2.x/extend/#_2","text":"Dcat Admin \u8ba1\u5212\u5728 2.0 \u7248\u672c\u4e0a\u7ebf\u63d2\u4ef6\u5e02\u573a\u529f\u80fd\uff0c\u5c06\u5bf9\u6574\u4e2a\u6269\u5c55\u529f\u80fd\u8fdb\u884c\u91cd\u6784\uff0c\u4ee5\u63d0\u5347\u7528\u6237\u4f53\u9a8c\u3002 \u65b0\u7684\u6269\u5c55\u7cfb\u7edf\u5c06\u53ef\u4ee5\u8ba9\u7528\u6237\u53ea\u9700\u5728\u7ba1\u7406\u9875\u9762\u70b9\u70b9\u9f20\u6807\u5373\u53ef\u5b8c\u6210\u63d2\u4ef6\u7684 \u5b89\u88c5 \u3001 \u66f4\u65b0 \u548c \u5378\u8f7d \u7b49\u64cd\u4f5c\u3002 \u5e76\u4e14\u4f1a\u4e0a\u7ebf\u63d2\u4ef6\u4ed8\u8d39\u529f\u80fd\uff0c\u4ee5\u6fc0\u52b1\u5f00\u53d1\u8005\u5f00\u53d1\u9ad8\u8d28\u91cf\u7684\u63d2\u4ef6\u3002 \u5982\u679c\u6709\u4efb\u4f55\u5efa\u8bae\uff0c\u6b22\u8fce\u63d0 issue \u6216\u8005\u79c1\u4fe1\u6211\uff0c Dcat Admin \u56e2\u961f\u5c06\u4f1a\u81f4\u529b\u4e8e\u6784\u5efa\u4e00\u4e2a\u4e8e\u5f00\u53d1\u8005\u548c\u7528\u6237\u90fd\u6709\u5229\u7684\u751f\u6001\uff0c\u611f\u8c22\u5927\u5bb6\u7684\u652f\u6301\uff01","title":"\u65b0\u7248\u672c\u9884\u544a"},{"location":"2.x/extend/#_3","text":"Dcat Admin \u652f\u6301\u5b89\u88c5\u6269\u5c55\u5de5\u5177\u6765\u5e2e\u52a9\u4e30\u5bcc\u4f60\u7684\u540e\u53f0\u529f\u80fd\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c Laravel Admin \u539f\u6709\u7684\u6269\u5c55\u65e0\u6cd5\u76f4\u63a5\u5728 Dcat Admin \u4e2d\u4f7f\u7528\uff0c\u4f46\u5927\u90e8\u5206\u6269\u5c55\u53ea\u9700\u8981\u505a\u4e00\u4e9b\u5fae\u5c0f\u7684\u8c03\u6574\u5c31\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528\u4e86\uff0c\u6709\u5174\u8da3\u7684\u540c\u5b66\u53ef\u4ee5\u81ea\u884c\u79fb\u690d\u3002 \u5982\u679c\u5927\u5bb6\u5728\u4f7f\u7528\u7684\u8fc7\u7a0b\u4e2d\u6709\u5728 Dcat Admin \u7684\u57fa\u7840\u4e0a\u6dfb\u52a0\u4e00\u4e9b\u81ea\u5df1\u7684\u529f\u80fd\u6216\u8005\u7ec4\u4ef6\uff0c\u4e0d\u59a8\u505a\u6210\u4e00\u4e2a Dcat Admin \u6269\u5c55\uff0c\u8fd9\u6837\u53ef\u4ee5\u7ed9\u5176\u5b83 Dcat Admin \u4f7f\u7528\u8005\u63d0\u4f9b\u5e2e\u52a9\uff0c\u5e76\u4e14\u5728\u5176\u5b83\u4eba\u7684\u4f7f\u7528\u53cd\u9988\u4e2d\u7684\u63d0\u5347\u6269\u5c55\u7684\u8d28\u91cf\u3002 \u8fd9\u7bc7\u6587\u6863\u5c06\u4f1a\u4ee5\u5f00\u53d1\u4e00\u4e2a \u5e72\u8d27\u96c6\u4e2d\u8425 \u6269\u5c55\u4e3a\u4f8b\uff0c\u4e00\u6b65\u4e00\u6b65\u7684\u5f00\u53d1\u4e00\u4e2a\u6269\u5c55\uff0c\u5e76\u4e14\u53d1\u5e03\u7ed9\u4ed6\u4eba\u4f7f\u7528\uff0c\u6700\u7ec8\u7684\u6548\u679c\u53c2\u8003 Demo \u3002","title":"\u5f00\u59cb"},{"location":"2.x/extend/#composer","text":"Dcat Admin \u7684\u5305\u5c06\u4f1a\u7528 composer \u5b89\u88c5\uff0c\u6240\u4ee5\u5148\u8981\u521b\u5efa\u4e00\u4e2a composer \u5305\uff0c\u53ef\u4ee5\u7528\u5185\u7f6e\u7684 admin:extend \u547d\u4ee4\u6765\u751f\u6210\u4e00\u4e2a\u6269\u5c55\u7684\u9aa8\u67b6\u3002 \u8fd0\u884c\u547d\u4ee4\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u4f1a\u63d0\u793a\u8f93\u5165\u4e00\u4e2a\u76ee\u5f55\u6765\u5b58\u653e\u4f60\u7684\u6269\u5c55\u6587\u4ef6\uff0c\u4f60\u53ef\u4ee5\u5728 config/admin.php \u91cc\u9762\u589e\u52a0\u4e00\u4e2a\u914d\u7f6e 'extension_dir' => admin_path('Extensions') \uff0c\u8fd9\u6837\u6269\u5c55\u6587\u4ef6\u5c06\u4f1a\u5b58\u653e\u5728 app/Admin/Extensions\u76ee\u5f55\u4e0b ,\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u653e\u5728\u4efb\u4f55\u5176\u5b83\u76ee\u5f55\u3002 php artisan admin:extend dcat-admin-extensions/gank --namespace=\"Dcat\\Admin\\Extension\\Gank\" \u5176\u4e2d dcat-admin-extensions/gank \u662f\u5305\u540d\uff0c namespace \u9009\u9879\u662f\u8fd9\u4e2a\u5305\u4f7f\u7528\u7684\u9876\u7ea7\u547d\u540d\u7a7a\u95f4\uff0c\u8fd0\u884c\u8fd9\u4e2a\u547d\u4ee4\u4e4b\u540e, \u5c06\u4f1a\u5728\u5728 config/admin.php \u4e2d\u8bbe\u7f6e\u7684\u6269\u5c55\u76ee\u5f55\u4e2d\u751f\u6210\u76ee\u5f55 dcat-admin-extensions/gank \u548c\u4e0b\u9762\u7684\u6587\u4ef6\u7ed3\u6784\uff1a \u251c\u2500\u2500 LICENSE \u251c\u2500\u2500 README.md \u251c\u2500\u2500 composer.json \u251c\u2500\u2500 bootstrap.php \u251c\u2500\u2500 database \u2502 \u251c\u2500\u2500 migrations \u2502 \u2514\u2500\u2500 seeds \u251c\u2500\u2500 resources \u2502 \u251c\u2500\u2500 assets \u2502 \u2514\u2500\u2500 views \u2502 \u2514\u2500\u2500 index.blade.php \u251c\u2500\u2500 routes \u2502 \u2514\u2500\u2500 web.php \u2514\u2500\u2500 src \u251c\u2500\u2500 Gank.php \u251c\u2500\u2500 GankServiceProvider.php \u2514\u2500\u2500 Http \u2514\u2500\u2500 Controllers \u2514\u2500\u2500 GankController.php bootstrap.php \u7528\u4e8e\u6ce8\u518c\u6269\u5c55\uff0c\u6b64\u6587\u4ef6\u7684\u4ee3\u7801\u4e0d\u9700\u8981\u505a\u4efb\u4f55\u4fee\u6539\uff1b resources \u7528\u6765\u653e\u7f6e\u89c6\u56fe\u6587\u4ef6\u548c\u9759\u6001\u8d44\u6e90\u6587\u4ef6\uff1b src \u4e3b\u8981\u7528\u6765\u653e\u7f6e\u903b\u8f91\u4ee3\u7801\uff1b routes/web.php \u7528\u6765\u5b58\u653e\u8fd9\u4e2a\u6269\u5c55\u7684\u8def\u7531\u8bbe\u7f6e\uff0c database \u7528\u6765\u653e\u7f6e\u6570\u636e\u5e93\u8fc1\u79fb\u6587\u4ef6\u548c\u6570\u636e seeders \u3002","title":"\u521b\u5efacomposer\u5305"},{"location":"2.x/extend/#_4","text":"\u8fd9\u4e2a\u6269\u5c55\u7684\u529f\u80fd\u4e3b\u8981\u7528\u6765\u5c55\u793a gank.io \u63a5\u53e3\u7684\u5185\u5bb9\uff0c\u96c6\u6210\u8fdb Dcat Admin \u4e2d\uff0c\u5b83\u5c06\u4f1a\u6709\u4e00\u4e2a\u8def\u7531\u548c\u4e00\u4e2a\u63a7\u5236\u5668\uff0c\u6ca1\u6709\u6570\u636e\u5e93\u6587\u4ef6\u3001\u6a21\u677f\u548c\u9759\u6001\u8d44\u6e90\u6587\u4ef6\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u6ca1\u6709\u7528\u5230\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u6e05\u7406\u6389\uff0c\u6e05\u7406\u4e4b\u540e\u7684\u76ee\u5f55\u6587\u4ef6\u4e3a\uff1a \u251c\u2500\u2500 LICENSE \u251c\u2500\u2500 README.md \u251c\u2500\u2500 composer.json \u251c\u2500\u2500 bootstrap.php \u251c\u2500\u2500 routes \u2502 \u2514\u2500\u2500 web.php \u2514\u2500\u2500 src \u251c\u2500\u2500 Gank.php \u251c\u2500\u2500 GankServiceProvider.php \u2514\u2500\u2500 Http \u2514\u2500\u2500 Controllers \u2514\u2500\u2500 GankController.php \u751f\u6210\u5b8c\u6269\u5c55\u6846\u67b6\u4e4b\u540e\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u4e00\u8fb9\u8c03\u8bd5\u4e00\u8fb9\u5f00\u53d1\uff0c\u6240\u4ee5\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u672c\u5730\u5b89\u88c5\uff0c\u5148\u628a\u6269\u5c55\u5b89\u88c5\u8fdb\u7cfb\u7edf\u4e2d\uff0c\u7ee7\u7eed\u5f00\u53d1","title":"\u529f\u80fd\u5f00\u53d1"},{"location":"2.x/extend/#_5","text":"\u9996\u5148\u6dfb\u52a0\u4e00\u4e2a\u8def\u7531\uff0c\u5728 routes/web.php \u4e2d\u5df2\u7ecf\u81ea\u52a8\u751f\u6210\u597d\u4e86\u4e00\u4e2a\u8def\u7531\u914d\u7f6e <?php use Dcat\\Admin\\Extension\\Gank\\Http\\Controllers; Route::get('gank', Controllers\\GankController::class.'@index'); \u8bbf\u95ee\u8def\u5f84 http://localhost:8000/admin/gank \uff0c\u5c06\u4f1a\u7531 Dcat\\Admin\\Extension\\Gank\\Http\\Controllers\\GankController \u63a7\u5236\u5668\u7684 index \u65b9\u6cd5\u6765\u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\u3002","title":"\u6dfb\u52a0\u8def\u7531"},{"location":"2.x/extend/#_6","text":"src/Gank.php \u4f5c\u4e3a\u6269\u5c55\u7c7b\uff0c\u7528\u6765\u8bbe\u7f6e\u6269\u5c55\u7684\u5c5e\u6027 <?php namespace Dcat\\Admin\\Extension\\Gank; use Dcat\\Admin\\Extension; class Gank extends Extension { // \u6269\u5c55\u522b\u540d\uff0c\u7528\u4e8e\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f const NAME = 'gank'; // service provider\u7c7b\u540d\uff0c\u8fd9\u4e2a\u7528\u81ea\u52a8\u751f\u6210\u7684\u5c31\u884c\uff0c\u4e0d\u9700\u8981\u6539 public $serviceProvider = GankServiceProvider::class; // \u9759\u6001\u8d44\u6e90\u76ee\u5f55\uff0c\u5982\u679c\u4e0d\u9700\u8981\u9759\u6001\u8d44\u6e90\u53ef\u7528\u5220\u9664\u6389 // public $assets = __DIR__.'/../resources/assets'; // composer\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u7528\u9ed8\u8ba4\u7684\u5373\u53ef public $composerJson = __DIR__.'/../composer.json'; // \u81ea\u5b9a\u4e49\u5c5e\u6027 public static $categoryColorsMap = [ 'App' => 'var(--purple)', '\u524d\u7aef' => 'var(--primary)', '\u62d3\u5c55\u8d44\u6e90' => 'var(--primary-dark)', '\u778e\u63a8\u8350' => 'var(--blue)', '\u798f\u5229' => 'var(--danger)', 'Android' => 'var(--purple-dark)', 'iOS' => 'var(--info)', '\u4f11\u606f\u89c6\u9891' => 'var(--warning)', ]; } \u8fd9\u4e2a\u6587\u4ef6\u7528\u6765\u8bbe\u7f6e\u8fd9\u4e2a\u6269\u5c55\u7684\u4e00\u4e9b\u5c5e\u6027\uff0c $name \u662f\u8fd9\u4e2a\u6269\u5c55\u7684\u522b\u540d\uff0c\u5982\u679c\u8fd9\u4e2a\u6269\u5c55\u6709\u89c6\u56fe\u6587\u4ef6\u9700\u8981\u6e32\u67d3\uff0c\u5219\u5fc5\u987b\u6307\u5b9a\u8fd9\u4e2a\u6269\u5c55\u7684 $views \u5c5e\u6027\uff0c\u540c\u6837\u5982\u679c\u6709\u9759\u6001\u8d44\u6e90\u6587\u4ef6\u9700\u8981\u53d1\u5e03\uff0c\u5219\u5fc5\u987b\u8bbe\u7f6e $assets \u5c5e\u6027\uff0c \u5982\u679c\u9700\u8981\u5728\u5de6\u4fa7\u8fb9\u680f\u589e\u52a0\u4e00\u9879\u83dc\u5355\u6309\u94ae\uff0c\u8bbe\u7f6e $menu \u5c5e\u6027\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u8981\u53bb\u6389\u4e0d\u5fc5\u8981\u7684\u5c5e\u6027\u3002 \u7136\u540e\u6253\u5f00 src/GankServiceProvider.php \uff0c\u8fd9\u4e2a ServiceProvider \u5c06\u4f1a\u5728\u542f\u7528\u6269\u5c55\u7684\u65f6\u5019\u8fd0\u884c\uff08\u4e0d\u9700\u8981\u5f00\u53d1\u8005\u81ea\u5df1\u6dfb\u52a0\uff09\uff0c\u7528\u6765\u5c06\u8fd9\u4e2a\u6269\u5c55\u7684\u4e00\u4e9b\u670d\u52a1\u6ce8\u518c\u8fdb\u7cfb\u7edf\u4e2d\u3002","title":"\u8bbe\u7f6e\u6269\u5c55\u5c5e\u6027"},{"location":"2.x/extend/#_7","text":"\u5982\u679c\u8fd9\u4e2a\u6269\u5c55\u9700\u8981\u52a0\u8f7d\u89c6\u56fe\u6587\u4ef6\uff0c\u5728 src/GankServiceProvider.php \u7684 boot \u65b9\u6cd5\u4e2d\u52a0\u5165\u4ee5\u4e0b\u7684\u4ee3\u7801\uff1a $extension = Gank::make(); if ($extension->views) { $this->loadViewsFrom($extension->views, 'gank'); } loadViewsFrom \u65b9\u6cd5\u7684\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u5728\u6269\u5c55\u7c7b src/Gank.php \u4e2d\u8bbe\u7f6e\u7684\u89c6\u56fe\u5c5e\u6027\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u89c6\u56fe\u6587\u4ef6\u76ee\u5f55\u7684\u547d\u540d\u7a7a\u95f4\uff0c\u8bbe\u7f6e\u4e3a gank \u4e4b\u540e\uff0c\u5728\u63a7\u5236\u5668\u4e2d\u7528 view('gank::index') \u6765\u52a0\u8f7d resources/views \u76ee\u5f55\u4e0b\u7684\u89c6\u56fe\u6587\u4ef6\u3002","title":"\u52a0\u8f7d\u89c6\u56fe"},{"location":"2.x/extend/#_8","text":"\u5982\u679c\u4f60\u7684\u9879\u76ee\u4e2d\u6709\u9759\u6001\u8d44\u6e90\u6587\u4ef6\u9700\u8981\u5f15\u5165\uff0c\u5148\u628a\u6587\u4ef6\u653e\u5728 resources/assets \u76ee\u5f55\u4e2d\uff0c\u6bd4\u5982\u653e\u5165 resources/assets/foo.js \u548c resources/assets/bar.css \u8fd9\u4e24\u4e2a\u6587\u4ef6\u3002 \u63a5\u7740\u5728\u6269\u5c55\u7c7b src/Gank.php \u4e2d\u8bbe\u7f6e $assets \u5c5e\u6027\u5373\u53ef\uff1a public $assets = __DIR__.'/../resources/assets'; \u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c\u6587\u4ef6\u5c06\u4f1a\u590d\u5236\u5230 public/vendor/dcat-admin-extensions/gank \u76ee\u5f55\u4e2d\u3002 \u7136\u540e\u6211\u4eec\u53ef\u4ee5\u5728\u9700\u8981\u4f7f\u7528\u8fd9\u4e9b\u9759\u6001\u8d44\u6e90\u7684\u5730\u65b9\u52a0\u4e0a\u4e0b\u9762\u7684\u4ee3\u7801\u5373\u53ef {tip} \u56e0\u4e3a Dcat Admin \u652f\u6301\u9759\u6001\u8d44\u6e90\u6309\u9700\u52a0\u8f7d\uff0c\u6240\u4ee5\u4e0d\u63a8\u8350\u76f4\u63a5\u5728 ServiceProvider \u6216\u8005\u662f bootstrap.php \u4e2d\u5f15\u5165\u9759\u6001\u8d44\u6e90\uff0c\u8fd9\u6837\u4f1a\u62d6\u6162\u6240\u6709\u9875\u9762\u7684\u52a0\u8f7d\u65f6\u95f4\u3002 use Dcat\\Admin\\Admin; Admin::js('vendor/dcat-admin-extensions/gank/phpinfo/foo.js'); Admin::css('vendor/dcat-admin-extensions/gank/phpinfo/bar.css'); \u8fd9\u6837\u5c31\u5b8c\u6210\u4e86\u9759\u6001\u8d44\u6e90\u7684\u5f15\u5165\uff0c\u5728 gank \u8fd9\u4e2a\u6269\u5c55\u4e2d\uff0c\u7531\u4e8e\u6ca1\u6709\u9759\u6001\u8d44\u6e90\u9700\u8981\u5f15\u5165\uff0c\u6240\u4ee5\u53ef\u4ee5\u5ffd\u7565\u6389\u8fd9\u4e00\u6b65\u3002","title":"\u5f15\u5165\u9759\u6001\u8d44\u6e90"},{"location":"2.x/extend/#_9","text":"\u6dfb\u52a0\u83dc\u5355\u7684\u65b9\u5f0f\u6709\u4e24\u79cd\uff1a - \u5728 src/Gank.php \u8bbe\u7f6e $menu \u5c5e\u6027\uff0c\u8fd9\u79cd\u65b9\u5f0f\u662f\u628a\u83dc\u5355\u5199\u5165\u5230\u83dc\u5355\u8868\u4e2d\uff0c\u7528\u6237\u66f4\u6613\u4e8e\u63a7\u5236 - \u4f7f\u7528 Admin::menu \u63a5\u53e3\u901a\u8fc7\u6570\u7ec4\u7684\u65b9\u5f0f\u6dfb\u52a0\u83dc\u5355\uff0c\u8fd9\u79cd\u65b9\u5f0f\u66f4\u52a0\u65b9\u4fbf\uff0c\u5e76\u4e14\u652f\u6301\u6dfb\u52a0\u591a\u7ea7\u83dc\u5355 \u8fd9\u91cc\u4f7f\u7528\u7684\u662f\u7b2c\u4e8c\u79cd\u65b9\u5f0f\u6dfb\u52a0\u83dc\u5355\uff0c\u5728 src/GankServiceProvider.php \u7684 boot \u65b9\u6cd5\u52a0\u5165\u4e0b\u9762\u7684\u4ee3\u7801\uff1a Admin::menu()->add([ [ 'id' => 1, 'title' => '\u5e72\u8d27\u96c6\u4e2d\u8425', 'icon' => ' fa-newspaper-o', 'uri' => 'gank', 'parent_id' => 0, 'permission_id' => 'gank', // \u7ed1\u5b9a\u6743\u9650 'roles' => [['slug' => 'gank']], // \u7ed1\u5b9a\u89d2\u8272 ], [ 'id' => 2, 'title' => '\u6240\u6709\u5e72\u8d27', 'icon' => 'fa-smile-o', 'uri' => 'gank', 'parent_id' => 1, 'permission_id' => 'gank', // \u7ed1\u5b9a\u6743\u9650 'roles' => [['slug' => 'gank']], // \u7ed1\u5b9a\u89d2\u8272 ], ]); \u6700\u7ec8\u7684 src/GankServiceProvider.php \u4ee3\u7801\u5982\u4e0b\uff1a <?php namespace Dcat\\Admin\\Extension\\Gank; use Dcat\\Admin\\Admin; use Illuminate\\Support\\ServiceProvider; class GankServiceProvider extends ServiceProvider { /** * {@inheritdoc} */ public function boot() { $extension = Gank::make(); if ($extension->views) { $this->loadViewsFrom($extension->views, 'gank'); } if ($extension->lang) { $this->loadTranslationsFrom($extension->lang, 'gank'); } if ($extension->migrations) { $this->loadMigrationsFrom($extension->migrations); } $this->app->booted(function () use ($extension) { $extension->routes(__DIR__.'/../routes/web.php'); }); // \u6dfb\u52a0\u83dc\u5355 $this->registerMenus(); } protected function registerMenus() { Admin::menu()->add([ [ 'id' => 1, 'title' => '\u5e72\u8d27\u96c6\u4e2d\u8425', 'icon' => ' fa-newspaper-o', 'uri' => 'gank', 'parent_id' => 0, 'permission_id' => 'gank', // \u7ed1\u5b9a\u6743\u9650 'roles' => [['slug' => 'gank']], // \u7ed1\u5b9a\u89d2\u8272 ], [ 'id' => 2, 'title' => '\u6240\u6709\u5e72\u8d27', 'icon' => 'fa-smile-o', 'uri' => 'gank', 'parent_id' => 1, 'permission_id' => 'gank', // \u7ed1\u5b9a\u6743\u9650 'roles' => [['slug' => 'gank']], // \u7ed1\u5b9a\u89d2\u8272 ], ]); } }","title":"\u6dfb\u52a0\u83dc\u5355"},{"location":"2.x/extend/#_10","text":"\u5982\u679c\u4f60\u60f3\u5728\u5bfc\u5165\u6269\u5c55\u65f6\u6267\u884c\u4e00\u4e9b\u81ea\u5b9a\u4e49\u903b\u8f91\uff0c\u53ef\u4ee5\u5728 src/Gank.php \u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u4ee3\u7801\uff1a \u6ce8\u610f\u8bf7\u4fdd\u8bc1\u91cd\u590d\u6267\u884c\u5bfc\u5165\u547d\u4ee4\u4e0d\u4f1a\u62a5\u9519 ... public function import(Command $command) { parent::import($command); // TODO: Change the autogenerated stub // \u5728\u8fd9\u91cc\u5199\u5165\u4f60\u7684\u5bfc\u5165\u903b\u8f91 $command->info('\u5bfc\u5165\u6210\u529f'); }","title":"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5b89\u88c5\u903b\u8f91"},{"location":"2.x/extend/#_11","text":"\u8fd9\u4e2a\u6269\u5c55\u4e3b\u8981\u662f\u8c03\u7528 gank.io \u63d0\u4f9b\u7684\u63a5\u53e3\uff0c\u518d\u628a\u6570\u636e\u5c55\u793a\u51fa\u6765\u3002 \u6211\u4eec\u9700\u8981\u65b0\u589e\u4e00\u4e2a\u6570\u636e\u4ed3\u5e93\u6587\u4ef6\u7528\u4e8e\u83b7\u53d6 gank.io \u7684\u6570\u636e\uff0c\u521b\u5efa\u6587\u4ef6 src/Repositories/Ganks.php \uff1a <?php namespace Dcat\\Admin\\Extension\\Gank\\Repositories; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Repositories\\Repository; use Illuminate\\Pagination\\LengthAwarePaginator; use Illuminate\\Support\\Collection; class Ganks extends Repository { protected $api = 'http://gank.io/api/data/{category}/{limit}/{page}'; protected $searchApi = 'http://gank.io/api/search/query/{key}/category/{category}/count/{limit}/page/{page}'; /** * \u67e5\u8be2\u8868\u683c\u6570\u636e * * @param Grid\\Model $model * @return Collection */ public function get(Grid\\Model $model) { $currentPage = $model->getCurrentPage(); $perPage = $model->getPerPage(); // \u83b7\u53d6\u7b5b\u9009\u53c2\u6570 $category = $model->filter()->input(Grid\\Filter\\Scope::QUERY_NAME, 'all'); $keyword = trim($model->filter()->input('keyword')); $api = $keyword ? $this->searchApi : $this->api; $client = new \\GuzzleHttp\\Client(); $response = $client->get(str_replace( ['{category}', '{limit}', '{page}', '{key}'], [$category, $perPage, $currentPage, $keyword], $api )); $data = collect( json_decode((string)$response->getBody(), true)['results'] ?? [] ); $total = $keyword ? 400 : ($category == 'all' ? 1000 : 500); $paginator = new LengthAwarePaginator( $data, $category == '\u798f\u5229' ? 680 : $total, $perPage, // \u4f20\u5165\u6bcf\u9875\u663e\u793a\u884c\u6570 $currentPage // \u4f20\u5165\u5f53\u524d\u9875\u7801 ); $paginator->setPath(\\url()->current()); return $paginator; } public function getKeyName() { return '_id'; } } \u4fee\u6539\u63a7\u5236\u5668\u4ee3\u7801\u5982\u4e0b\uff1a <?php namespace Dcat\\Admin\\Extension\\Gank\\Http\\Controllers; use Dcat\\Admin\\Extension\\Gank\\Gank; use Dcat\\Admin\\Extension\\Gank\\Repositories\\Ganks; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Layout\\Content; use Dcat\\Admin\\Layout\\Row; use Illuminate\\Routing\\Controller; use Dcat\\Admin\\Widgets\\Navbar; class GankController extends Controller { public function index(Content $content) { $grid = $this->grid(); $grid->disableFilter(); $grid->filter() ->withoutInputBorder() ->expand() ->resetPosition() ->hiddenResetButtonText(); return $content ->header('\u6240\u6709\u5e72\u8d27') ->description('\u6bcf\u65e5\u5206\u4eab\u59b9\u5b50\u56fe \u548c \u6280\u672f\u5e72\u8d27') ->body($grid->filter()) ->body(function (Row $row) { $items = array_keys(Gank::$categoryColorsMap); array_unshift($items, '\u5168\u90e8'); $navbar = Navbar::make('#', array_combine($items, $items)) ->checked(request(Grid\\Filter\\Scope::QUERY_NAME, '\u5168\u90e8')) ->click() ->map(function ($v) { if ($v == '\u5168\u90e8') { $url = '?'; } else { $url = '?'.Grid\\Filter\\Scope::QUERY_NAME.'='.$v; } return \"<a href='$url'>$v</a>\"; }) ->style('max-width:705px'); $row->column(7, $navbar); }) ->body($grid); } protected function grid() { $this->define(); $grid = new Grid(new Ganks); $grid->number(); $grid->desc('\u63cf\u8ff0')->width('300px'); $grid->images('\u56fe\u7247')->image(150); $grid->type('\u7c7b\u522b'); $grid->who('\u4f5c\u8005')->label(); $grid->publishedAt('\u53d1\u5e03\u4e8e'); $grid->disableActions(); $grid->disableBatchDelete(); $grid->disableExport(); $grid->disableCreateButton(); $grid->disableFilterButton(); $grid->disableQuickCreateButton(); $grid->perPages([]); return $grid->filter(function (Grid\\Filter $filter) { $category = $filter->input(Grid\\Filter\\Scope::QUERY_NAME, '\u5168\u90e8'); if ($category != '\u798f\u5229') { $filter->like('keyword', ucfirst($category))->width('300px')->placeholder('\u8bf7\u8f93\u5165'); } }); } protected function define() { Grid\\Column::define('desc', function ($v) { if ($this->type == '\u798f\u5229') { $width = '150'; $height = '200'; return \"<img data-init='preview' src='{$this->url}' style='max-width:{$width}px;max-height:{$height}px;cursor:pointer' class='img img-thumbnail' />\"; } return sprintf('<a href=\"%s\" target=\"_blank\">%s</a>', $this->url, $v); }); Grid\\Column::define('publishedAt', function ($v) { return date('Y-m-d', strtotime($v)); }); Grid\\Column::define('datetime', function ($v) { return date('Y-m-d H:i:s', strtotime($v)); }); Grid\\Column::define('type', function ($v) { $map = Gank::$categoryColorsMap; return \"<span class='label' style='background:{$map[$v]}'>$v</span>\"; }); } } \u8fd9\u6837\u4e00\u4e2a\u5b8c\u6574\u7684\u6269\u5c55\u5c31\u5f00\u53d1\u5b8c\u6210\u4e86\u3002","title":"\u4ee3\u7801\u903b\u8f91\u5f00\u53d1"},{"location":"2.x/extend/#composerjson-readmemd","text":"\u4ee3\u7801\u90e8\u5206\u5b8c\u6210\u4e4b\u540e\uff0c\u9700\u8981\u4fee\u6539 composer.json \u91cc\u9762\u7684\u5185\u5bb9\uff0c\u5c06 description \u3001 keywords \u3001 license \u3001 authors \u7b49\u5185\u5bb9\u66ff\u6362\u4e3a\u4f60\u7684\u4fe1\u606f\uff0c\u7136\u540e\u4e0d\u8981\u5fd8\u8bb0\u5b8c\u5584 README.md \uff0c\u8865\u5145\u4f7f\u7528\u6587\u6863\u7b49\u76f8\u5173\u4fe1\u606f\u3002","title":"\u4fee\u6539 composer.json &amp; README.md"},{"location":"2.x/extend/#_12","text":"\u5b8c\u6210\u4e86\u6269\u5c55\u5f00\u53d1\u4e4b\u540e\uff0c\u6839\u636e\u60c5\u51b5\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u7684\u65b9\u5f0f\u5b89\u88c5\u4f60\u7684\u6269\u5c55","title":"\u5b89\u88c5"},{"location":"2.x/extend/#_13","text":"\u5728\u5f00\u53d1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e00\u822c\u9700\u8981\u4e00\u8fb9\u8c03\u8bd5\u4e00\u8fb9\u5f00\u53d1\uff0c\u6240\u4ee5\u5148\u6309\u7167\u4e0b\u9762\u7684\u65b9\u5f0f\u8fdb\u884c\u672c\u5730\u5b89\u88c5 \u6253\u5f00\u4f60\u7684\u9879\u76ee\u4e2d composer.json \u6587\u4ef6\uff0c\u5728\u52a0\u5165\u4e0b\u9762\u7684\u914d\u7f6e \"repositories\": [ { \"type\": \"path\", \"url\": \"app/Admin/Extensions/dcat-admin-extensions/gank\" } ] \u7136\u540e\u8fd0\u884c composer require dcat-admin-extensions/gank @dev \u5b8c\u6210\u5b89\u88c5\uff0c\u5982\u679c\u6709\u9759\u6001\u6587\u4ef6\u9700\u8981\u53d1\u5e03\uff0c\u8fd0\u884c\u4e0b\u9762\u7684\u547d\u4ee4: php artisan vendor:publish --provider=Dcat\\Admin\\Extension\\GankServiceProvider","title":"\u672c\u5730\u5b89\u88c5"},{"location":"2.x/extend/#_14","text":"\u5982\u679c\u5f00\u53d1\u5b8c\u6210\u4e4b\u540e\uff0c\u5e0c\u671b\u5f00\u6e90\u51fa\u6765\u7ed9\u5927\u5bb6\u4f7f\u7528\uff0c\u6309\u7167\u4e0b\u9762\u7684\u6b65\u9aa4\u8fdb\u884c","title":"\u8fdc\u7a0b\u5b89\u88c5"},{"location":"2.x/extend/#github","text":"\u5148\u767b\u5f55\u4f60\u7684Github\uff0c\u521b\u5efa\u4e00\u4e2a\u4ed3\u5e93\uff0c\u7136\u540e\u6309\u7167\u9875\u9762\u4e0a\u7684\u63d0\u793a\u628a\u4f60\u7684\u4ee3\u7801push\u4e0a\u53bb git init git remote add origin https://github.com/<your-name>/<your-repository>.git git add . git commit -am \"Initial commit.\" git push origin master","title":"\u4e0a\u4f20\u5230Github"},{"location":"2.x/extend/#release","text":"\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u65b9\u5f0f\u5728\u672c\u5730\u53d1\u5e03\u7248\u672c git tag 0.0.1 && git push --tags \u4e5f\u53ef\u4ee5\u5728Github\u7684\u4ed3\u5e93\u9875\u9762\u7684Releases\u9875\u9762\u624b\u52a8\u8bbe\u7f6e","title":"\u53d1\u5e03release"},{"location":"2.x/extend/#packagistorg","text":"\u63a5\u4e0b\u6765\u5c31\u662f\u53d1\u5e03\u4f60\u7684\u9879\u76ee\u5230 Packagist.org \uff0c\u5982\u679c\u6ca1\u6709\u8d26\u53f7\u7684\u8bdd\uff0c\u5148\u6ce8\u518c\u4e00\u4e2a\uff0c\u7136\u540e\u6253\u5f00\u9876\u90e8\u5bfc\u822a\u7684 Submit , \u586b\u5165\u4ed3\u5e93\u5730\u5740\u63d0\u4ea4 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5f53\u60a8\u63a8\u9001\u65b0\u4ee3\u7801\u65f6\uff0c Packagist.org \u4e0d\u4f1a\u81ea\u52a8\u66f4\u65b0\uff0c\u6240\u4ee5\uff0c\u60a8\u9700\u8981\u521b\u5efa\u4e00\u4e2aGitHub\u670d\u52a1\u94a9\u5b50\uff0c \u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u70b9\u51fb\u9875\u9762\u4e0a\u7684 Update \u6309\u94ae\u624b\u52a8\u66f4\u65b0\u5b83\uff0c\u4f46\u6211\u5efa\u8bae\u81ea\u52a8\u6267\u884c\u8fd9\u4e2a\u8fc7\u7a0b \u63d0\u4ea4\u4e4b\u540e\uff0c\u7531\u4e8e\u5404\u5730\u7684\u955c\u50cf\u540c\u6b65\u65f6\u95f4\u7684\u5ef6\u8fdf\uff0c\u53ef\u80fd\u5728\u7528composer\u5b89\u88c5\u7684\u65f6\u5019\uff0c\u4f1a\u6682\u65f6\u627e\u4e0d\u5230\u4f60\u7684\u9879\u76ee\uff0c\u8fd9\u4e2a\u65f6\u5019\u53ef\u80fd\u9700\u8981\u7b49\u5f85\u540c\u6b65\u5b8c\u6210 \u53d1\u5e03\u5b8c\u6210\u4e4b\u540e\u5c31\u53ef\u4ee5\u901a\u8fc7composer\u5b89\u88c5\u4f60\u7684\u6269\u5c55\u4e86 \u52a0\u5165\u5230https://github.com/dcat-admin-extensions \u5982\u679c\u60f3\u628a\u4f60\u5f00\u53d1\u7684\u6269\u5c55\u52a0\u5165\u5230 dcat-admin-extensions \uff0c\u6b22\u8fce\u7528\u5404\u79cd\u65b9\u5f0f\u8054\u7cfb\u6211\uff0c\u8fd9\u6837\u53ef\u4ee5\u8ba9\u66f4\u591a\u4eba\u770b\u5230\u5e76\u4f7f\u7528\u4f60\u5f00\u53d1\u7684\u5de5\u5177\u3002","title":"\u53d1\u5e03\u5230Packagist.org"},{"location":"2.x/extend/#_15","text":"","title":"\u5bfc\u5165\u548c\u542f\u7528\u6269\u5c55"},{"location":"2.x/extend/#_16","text":"\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u5373\u53ef\u4ee5\u5bfc\u5165\u6269\u5c55\uff0c\u5bfc\u5165\u7684\u6587\u4ef6\u4e3b\u8981\u6709\uff1a\u9759\u6001\u8d44\u6e90\u6587\u4ef6\u3001\u83dc\u5355\u3001\u6743\u9650\u7b49\u3002 \u89c6\u56fe\u3001\u6570\u636e\u5e93\u8fc1\u79fb\u6587\u4ef6\u3001\u8bed\u8a00\u5305\u4e00\u822c\u4e0d\u9700\u8981\u5bfc\u5165\u3002\u5982\u679c\u8981\u5bfc\u5165\u5176\u4ed6\u6587\u4ef6\uff0c\u9700\u8981\u6269\u5c55\u5f00\u53d1\u8005\u81ea\u884c\u5b9a\u4e49\u3002 \u53e6\u5916\u6b64\u547d\u4ee4\u5141\u8bb8\u91cd\u590d\u6267\u884c\u3002 php artisan admin:import Dcat\\Admin\\Extension\\Gank\\Gank","title":"\u5bfc\u5165\u6269\u5c55"},{"location":"2.x/extend/#_17","text":"\u6269\u5c55\u7684\u542f\u7528\u4e0e\u5426\u662f\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u63a7\u5236\u7684\uff0c\u6253\u5f00 /config/admin-extension.php \uff0c\u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801\uff1a return [ 'gank' => [ 'enable' => true, ], ];","title":"\u542f\u7528\u6269\u5c55"},{"location":"2.x/extend/#_18","text":"\u8bbf\u95ee http://localhost:8000/admin/helpers/extensions \uff0c\u53ef\u4ee5\u901a\u8fc7\u9875\u9762\u64cd\u4f5c\u542f\u7528\u6216\u5173\u95ed\u6269\u5c55\u3001\u5bfc\u5165\u6269\u5c55\u3002 \u5982\u679c /config/admin-extension.php \u4e0d\u5b58\u5728\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u521b\u5efa \u8fd9\u6837\u5c31\u5b8c\u6210\u4e86\u5b89\u88c5\uff0c\u6253\u5f00 http://localhost/admin/gank \u8bbf\u95ee\u8fd9\u4e2a\u6269\u5c55\u3002","title":"\u53ef\u89c6\u5316\u7ba1\u7406\u6269\u5c55"},{"location":"2.x/extension-dev/","text":"\u5f00\u53d1\u6269\u5c55 Dcat Admin \u652f\u6301\u5b89\u88c5\u6269\u5c55\u5de5\u5177\u6765\u5e2e\u52a9\u4e30\u5bcc\u4f60\u7684\u540e\u53f0\u529f\u80fd\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c Laravel Admin \u539f\u6709\u7684\u6269\u5c55\u65e0\u6cd5\u76f4\u63a5\u5728 Dcat Admin \u4e2d\u4f7f\u7528\uff0c\u4f46\u5927\u90e8\u5206\u6269\u5c55\u53ea\u9700\u8981\u505a\u4e00\u4e9b\u5fae\u5c0f\u7684\u8c03\u6574\u5c31\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528\u4e86\uff0c\u6709\u5174\u8da3\u7684\u540c\u5b66\u53ef\u4ee5\u81ea\u884c\u79fb\u690d\u3002 \u5982\u679c\u5927\u5bb6\u5728\u4f7f\u7528\u7684\u8fc7\u7a0b\u4e2d\u6709\u5728 Dcat Admin \u7684\u57fa\u7840\u4e0a\u6dfb\u52a0\u4e00\u4e9b\u81ea\u5df1\u7684\u529f\u80fd\u6216\u8005\u7ec4\u4ef6\uff0c\u4e0d\u59a8\u505a\u6210\u4e00\u4e2a Dcat Admin \u6269\u5c55\uff0c\u8fd9\u6837\u53ef\u4ee5\u7ed9\u5176\u5b83 Dcat Admin \u4f7f\u7528\u8005\u63d0\u4f9b\u5e2e\u52a9\uff0c\u5e76\u4e14\u5728\u5176\u5b83\u4eba\u7684\u4f7f\u7528\u53cd\u9988\u4e2d\u7684\u63d0\u5347\u6269\u5c55\u7684\u8d28\u91cf\u3002 \u8fd9\u7bc7\u6587\u6863\u5c06\u4f1a\u4ee5\u5f00\u53d1\u4e00\u4e2a \u64cd\u4f5c\u65e5\u5fd7\u6269\u5c55 \u4e3a\u4f8b\uff0c\u4e00\u6b65\u4e00\u6b65\u7684\u6559\u5927\u5bb6\u5f00\u53d1\u4e00\u4e2a\u6269\u5c55\uff0c\u5e76\u4e14\u53d1\u5e03\u7ed9\u4ed6\u4eba\u4f7f\u7528\uff0c\u6700\u7ec8\u7684\u6548\u679c\u53c2\u8003 \u64cd\u4f5c\u65e5\u5fd7\u6269\u5c55 \u3002 \u5f00\u59cb\u4e4b\u524d \u5728\u5f00\u59cb\u5f00\u53d1\u6269\u5c55\u4e4b\u524d\uff0c\u5982\u679c\u662f linux \u73af\u5883\uff0c\u8bf7\u5148\u624b\u52a8\u5728\u9879\u76ee\u6839\u76ee\u5f55\u521b\u5efa\u4e00\u4e2a dcat-admin-extensions \u76ee\u5f55\uff0c\u5e76\u8bbe\u7f6e\u53ef\u8bfb \u53ef\u5199 \u6743\u9650\uff0c\u6269\u5c55\u6587\u4ef6\u5c06\u4f1a\u88ab\u5b89\u88c5\u5728 dcat-admin-extensions \u76ee\u5f55\uff0c\u8bf7\u4fdd\u8bc1\u62e5\u6709\u4ee5\u4e0b\u51e0\u4e2a\u76ee\u5f55\u7684\u8bfb\u5199\u6743\u9650 \u9879\u76ee\u76ee\u5f55/dcat-admin-extensions \u6269\u5c55\u7684\u5b89\u88c5\u76ee\u5f55\uff0c\u53ef\u4ee5\u6839\u636e\u914d\u7f6e\u53c2\u6570 admin.extensions.dir \u8fdb\u884c\u66f4\u6539 public/vendor \u6269\u5c55\u9759\u6001\u8d44\u6e90\u53d1\u5e03\u76ee\u5f55 resources/lang \u8bed\u8a00\u5305\u76ee\u5f55 1.\u521b\u5efa\u6269\u5c55 Dcat Admin \u7684\u6269\u5c55\u662f\u4e00\u4e2a\u6807\u51c6\u7684 composer \u6269\u5c55\u5305\uff0c\u53ef\u4ee5\u901a\u8fc7 composer \u5b89\u88c5\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7cfb\u7edf\u5185\u90e8\u7684 \u672c\u5730\u5b89\u88c5 \u529f\u80fd\u76f4\u63a5\u5b89\u88c5\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u6216\u754c\u9762\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6269\u5c55\uff0c\u4e0b\u9762\u5206\u522b\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\u547d\u4ee4\u548c\u754c\u9762\u521b\u5efa\u7684\u65b9\u6cd5 1.\u901a\u8fc7\u547d\u4ee4\u521b\u5efa\u6269\u5c55 php artisan admin:ext-make \u6269\u5c55\u5305\u540d --namespace=\u547d\u540d\u7a7a\u95f4 --theme \u547d\u4ee4\u53c2\u6570\u8bf4\u660e name \u6269\u5c55\u5305\u540d\u79f0\uff0c\u6269\u5c55\u7684\u540d\u79f0\u662f\u4e00\u4e2a\u6807\u51c6\u7684 composer \u5305\u540d\uff0c\u8bf7\u7edf\u4e00\u4f7f\u7528 \u5c0f\u5199\u5b57\u6bcd + \u4e2d\u5212\u7ebf(-) \u7684\u98ce\u683c\u547d\u540d\uff0c\u6807\u51c6\u7684\u683c\u5f0f\u5982 dcat-admin/operation-log \uff0c\u524d\u9762\u4e00\u90e8\u5206\u53ef\u4ee5\u662f\u4e2a\u4eba\u540d\u79f0\uff0c\u540e\u9762\u4e00\u90e8\u5206\u53ef\u4ee5\u662f\u5bf9\u6269\u5c55\u5305\u529f\u80fd\u7684\u6982\u62ec\u8bcd\u8bed --namespace= \u6269\u5c55\u5305\u547d\u540d\u7a7a\u95f4\uff0c\u9ed8\u8ba4\u4f1a\u6839\u636e\u5305\u540d\u81ea\u52a8\u751f\u6210\uff0c\u4f8b\u5982\u4f60\u7684\u5305\u540d\u662f jiangqh/operation-log \uff0c\u90a3\u4e48\u9ed8\u8ba4\u7684\u547d\u540d\u7a7a\u95f4\u662f Jiangqh/OperationLog --theme \u662f\u5426\u4e3a\u4e3b\u9898\u6269\u5c55 \u90a3\u4e48\u5728\u5f53\u524d\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u6211\u4eec\u8fd0\u884c\u4e00\u4e0b\u547d\u4ee4\u751f\u6210\u6269\u5c55\u5305 # `--namespace` php artisan admin:ext-make dcat-admin/operation-log --namespace=\"Dcat\\Admin\\OperationLog\" 2.\u901a\u8fc7\u7ba1\u7406\u9875\u9762\u521b\u5efa\u6269\u5c55 \u6253\u5f00\u6269\u5c55\u7ba1\u7406\u9875\u9762 http://localhost/admin/auth/extensions \uff0c\u7136\u540e\u70b9\u51fb\u8868\u683c\u4e0b\u9762\u7b2c\u4e00\u884c\u7684 \u5feb\u901f\u521b\u5efa \uff0c\u7136\u540e\u8f93\u5165\u6269\u5c55\u5305\u540d\u548c\u547d\u540d\u7a7a\u95f4\u5373\u53ef\uff0c\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\u4e5f\u66f4\u63a8\u8350\u5927\u5bb6\u4f7f\u7528\u754c\u9762\u521b\u5efa\u6269\u5c55\uff0c\u8fd9\u6837\u66f4\u65b9\u4fbf \u6269\u5c55\u521b\u5efa\u5b8c\u6210\u4e4b\u540e\u53ef\u4ee5\u770b\u5230\u6269\u5c55\u6587\u4ef6\u5939\u4e0b\u591a\u4e86\u4e2a dcat-admin/extensions/dcat-admin/operation-log \u76ee\u5f55\uff0c\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b \u251c\u2500\u2500 README.md \u251c\u2500\u2500 composer.json # composer\u914d\u7f6e\u6587\u4ef6 \u251c\u2500\u2500 version.php # \u6269\u5c55\u5305\u7248\u672c\u7ba1\u7406\u6587\u4ef6 \u251c\u2500\u2500 logo.png # logo \u251c\u2500\u2500 updates # \u6269\u5c55\u5305\u6bcf\u4e2a\u7248\u672c\u5bf9\u5e94\u7684\u8868\u8fc1\u79fb\u6587\u4ef6 \u251c\u2500\u2500 resources \u2502 \u251c\u2500\u2500 lang # \u8bed\u8a00\u5305 \u2502 \u251c\u2500\u2500 assets # \u9759\u6001\u8d44\u6e90 \u2502 \u2502 \u251c\u2500\u2500 css \u2502 \u2502 \u2502 \u2514\u2500\u2500 index.css # css\u793a\u4f8b\u6587\u4ef6 \u2502 \u2502 \u2514\u2500\u2500 js \u2502 \u2502 \u2514\u2500\u2500 index.js # js\u793a\u4f8b\u6587\u4ef6 \u2502 \u2514\u2500\u2500 views \u2502 \u2514\u2500\u2500 index.blade.php # \u89c6\u56fe\u793a\u4f8b\u6587\u4ef6 \u2514\u2500\u2500 src \u251c\u2500\u2500 OperationLogServiceProvider.php # \u6269\u5c55\u5305\u670d\u52a1\u63d0\u4f9b\u8005 \u251c\u2500\u2500 Setting.php # \u6269\u5c55\u8bbe\u7f6e\u8868\u5355 \u251c\u2500\u2500 Models # \u6a21\u578b\u76ee\u5f55 \u2514\u2500\u2500 Http \u251c\u2500\u2500 routes.php # \u6269\u5c55\u5305\u8def\u7531\u6587\u4ef6 \u251c\u2500\u2500 Middleware # \u6269\u5c55\u5305\u4e2d\u95f4\u4ef6\u6587\u4ef6\u5939 \u2514\u2500\u2500 Controllers # \u6269\u5c55\u5305\u63a7\u5236\u5668 \u2514\u2500\u2500 OperationLogController.php \u7136\u540e\u4f60\u8fd8\u53ef\u4ee5\u8bbe\u7f6e\u6269\u5c55\u7684 logo \u4ee5\u53ca\u6269\u5c55\u540d\u79f0\uff0c\u8bbe\u7f6e\u4e4b\u540e\u4f1a\u5728\u6269\u5c55\u7ba1\u7406\u9875\u9762\u5c55\u793a\uff0c\u8ba9\u4f60\u7684\u6269\u5c55\u66f4\u5177\u5bb9\u6613\u88ab\u4eba\u8bb0\u4f4f\uff01 \u6269\u5c55logo \u6269\u5c55 logo \u5fc5\u987b\u653e\u5728\u6269\u5c55\u7684\u6839\u76ee\u5f55\uff0c\u5e76\u4e14\u6587\u4ef6\u540d\u5fc5\u987b\u662f logo.png \uff0c\u5c3a\u5bf8\u5efa\u8bae\u662f 100x100 \u3002 \u6269\u5c55\u540d\u79f0 \u6269\u5c55\u540d\u79f0\u9700\u8981\u4fee\u6539 composer.json \u91cc\u9762\u7684 alias \u53c2\u6570\uff0c\u5982\u679c\u4e0d\u8bbe\u7f6e\u5219\u9ed8\u8ba4\u5c55\u793a\u5305\u540d 2.\u542f\u7528\u6269\u5c55 \u6269\u5c55\u521b\u5efa\u6210\u529f\u4e4b\u540e\u5c31\u53ef\u4ee5\u5728\u7ba1\u7406\u9875\u9762 http://localhost/admin/auth/extensions \u770b\u5230\u65b0\u521b\u5efa\u7684\u6269\u5c55\u4e86\uff0c\u6548\u679c\u5982\u4e0b \u7136\u540e\u6211\u4eec\u5206\u522b\u70b9\u51fb\u6269\u5c55\u5bf9\u5e94\u7684 \u66f4\u65b0\u81f31.0.0\u7248\u672c \u4ee5\u53ca \u542f\u7528 \u6309\u94ae\uff0c\u5c31\u53ef\u4ee5\u4f7f\u8fd9\u4e2a\u6269\u5c55\u751f\u6548\u4e86\u3002 \u65b0\u521b\u5efa\u7684\u6269\u5c55\u4f1a\u751f\u6210\u4e00\u4e2a\u9ed8\u8ba4\u7684\u63a7\u5236\u5668\uff0c\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u8bbf\u95ee http://localhost:8000/admin/operation-log \uff0c\u5982\u679c\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee\u5219\u8bf4\u660e\u6269\u5c55\u542f\u7528\u6210\u529f\u3002 3.\u529f\u80fd\u5f00\u53d1 \u8fd9\u4e2a\u6269\u5c55\u7684\u529f\u80fd\u4e3b\u8981\u662f\u7528\u6765\u8bb0\u5f55\u7528\u6237\u7684\u64cd\u4f5c\u8bb0\u5f55\uff0c\u7136\u540e\u63d0\u4f9b\u4e00\u4e2a\u67e5\u770b\u8bb0\u5f55\u7684\u9875\u9762\uff0c\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u628a\u9ed8\u8ba4\u521b\u5efa\u7684\u6269\u5c55\u6587\u4ef6\u4e2d\u7528\u4e0d\u5230\u7684\u7ed9\u6e05\u7406\u6389\uff0c\u6e05\u7406\u540e\u7684\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b \u251c\u2500\u2500 README.md \u251c\u2500\u2500 composer.json # composer\u914d\u7f6e\u6587\u4ef6 \u251c\u2500\u2500 version.php # \u6269\u5c55\u5305\u7248\u672c\u7ba1\u7406\u6587\u4ef6 \u251c\u2500\u2500 logo.png # logo \u251c\u2500\u2500 updates # \u6269\u5c55\u5305\u6bcf\u4e2a\u7248\u672c\u5bf9\u5e94\u7684\u8868\u8fc1\u79fb\u6587\u4ef6 \u251c\u2500\u2500 resources \u2502 \u2514\u2500\u2500 lang # \u8bed\u8a00\u5305 \u2514\u2500\u2500 src \u251c\u2500\u2500 OperationLogServiceProvider.php # \u6269\u5c55\u5305\u670d\u52a1\u63d0\u4f9b\u8005 \u251c\u2500\u2500 Setting.php # \u6269\u5c55\u8bbe\u7f6e\u8868\u5355 \u251c\u2500\u2500 Models # \u6a21\u578b\u76ee\u5f55 \u2514\u2500\u2500 Http \u251c\u2500\u2500 routes.php # \u6269\u5c55\u5305\u8def\u7531\u6587\u4ef6 \u251c\u2500\u2500 Middleware # \u6269\u5c55\u5305\u4e2d\u95f4\u4ef6\u6587\u4ef6\u5939 \u2514\u2500\u2500 Controllers # \u6269\u5c55\u5305\u63a7\u5236\u5668 \u2514\u2500\u2500 OperationLogController.php \u63a5\u4e0b\u6765\u5c31\u6b63\u5f0f\u8fdb\u5165\u529f\u80fd\u5f00\u53d1\u90e8\u5206 \u521b\u5efa\u8fc1\u79fb\u6587\u4ef6 (migration) \u9996\u5148\u6211\u4eec\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u8868\u8fc1\u79fb\u6587\u4ef6\uff0c\u8fd0\u884c\u547d\u4ee4 php artisan make:migration CreateOperationLogTable \uff0c\u7136\u540e\u5199\u5165\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b <?php use Illuminate\\Database\\Migrations\\Migration; use Illuminate\\Database\\Schema\\Blueprint; use Illuminate\\Support\\Facades\\Schema; class CreateOperationLogTable extends Migration { // \u8fd9\u91cc\u53ef\u4ee5\u6307\u5b9a\u4f60\u7684\u6570\u636e\u5e93\u8fde\u63a5 public function getConnection() { return config('database.connection') ?: config('database.default'); } public function up() { if (! Schema::hasTable('admin_operation_log')) { Schema::create('admin_operation_log', function (Blueprint $table) { $table->bigIncrements('id')->unsigned(); $table->bigInteger('user_id'); $table->string('path'); $table->string('method', 10); $table->string('ip'); $table->text('input'); $table->index('user_id'); $table->timestamps(); }); } } public function down() { Schema::dropIfExists('admin_operation_log'); } } \u7136\u540e\u628a\u6587\u4ef6\u79fb\u52a8\u5230 \u6269\u5c55\u76ee\u5f55/updates \u76ee\u5f55\uff0c\u5e76\u91cd\u547d\u540d\u4e3a create_opration_log_table.php \u3002\u6700\u540e\u6211\u4eec\u9700\u8981\u4fee\u6539\u6269\u5c55\u7684\u7248\u672c\u7ba1\u7406\u6587\u4ef6 \u6269\u5c55\u76ee\u5f55/version.php \uff0c\u5199\u5165\u8fc1\u79fb\u6587\u4ef6\u7684\u6587\u4ef6\u540d\uff0c\u6700\u7ec8\u5185\u5bb9\u5982\u4e0b <?php return [ '1.0.0' => [ '\u7248\u672c\u53d8\u5316\u63cf\u8ff01', '\u7248\u672c\u53d8\u5316\u63cf\u8ff02', 'create_opration_log_table.php', // \u8fc1\u79fb\u6587\u4ef6\u540d\u79f0\uff0c\u5b89\u88c5\u6216\u66f4\u65b0\u7248\u672c\u65f6\u4f1a\u81ea\u52a8\u6267\u884c ], ]; \u5173\u4e8e\u6269\u5c55\u7684\u7248\u672c\u7ba1\u7406\u66f4\u8be6\u7ec6\u7684\u4ecb\u7ecd\uff0c\u8bf7\u524d\u5f80 \u6269\u5c55 - \u7248\u672c\u7ba1\u7406 \u7ae0\u8282\u67e5\u770b\u3002 \u6a21\u578b\u3001\u63a7\u5236\u5668\u548c\u8def\u7531 \u521b\u5efa\u6a21\u578b\u6587\u4ef6 \u6269\u5c55\u76ee\u5f55/src/Models/OperationLog \uff0c\u6a21\u578b\u5185\u5bb9\u70b9\u51fb OperationLog.php \u67e5\u770b\uff1b \u7136\u540e\u4fee\u6539\u6211\u4eec\u7684\u63a7\u5236\u5668 \u6269\u5c55\u76ee\u5f55/src/Http/Controllers/OperationLogController.php \uff0c\u63a7\u5236\u5668\u5185\u5bb9\u70b9\u51fb LogController.php \u67e5\u770b\uff1b \u6700\u540e\u9700\u8981\u4fee\u6539\u6211\u4eec\u7684\u8def\u7531\u6587\u4ef6\uff0c\u5c3d\u91cf\u8ba9\u4f60\u7684\u8def\u7531\u4e0d\u4e0e\u5176\u4ed6\u8def\u7531\u4ea7\u751f\u51b2\u7a81 use Dcat\\Admin\\OperationLog\\Http\\Controllers; use Illuminate\\Support\\Facades\\Route; Route::get('auth/operation-logs', Controllers\\OperationLogController::class.'@index')->name('dcat-admin.operation-log.index'); Route::delete('auth/operation-logs/{id}', Controllers\\OperationLogController::class.'@destroy')->name('dcat-admin.operation-log.destroy'); \u8bed\u8a00\u5305 \u5728\u63a7\u5236\u5668\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba9\u4e00\u4e9b\u6587\u672c\u63cf\u8ff0\u652f\u6301\u8bed\u8a00\u5305\u7ffb\u8bd1\u529f\u80fd\uff0c\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u6211\u4eec\u4ee5 en \u4ee5\u53ca zh_CN \u4e24\u79cd\u8bed\u8a00\u4e3a\u4f8b\uff0c\u5728 \u6269\u5c55\u5305/resources/lang \u76ee\u5f55\u4e0b\u5206\u522b\u521b\u5efa en/log.php \u548c zh_CN/log.php \u6587\u4ef6\uff0c\u5e76\u5199\u5165\u4ee5\u4e0b\u5185\u5bb9 // en return [ 'title' => 'Operation Log', 'setting_title' => 'Operation Log', ]; // zh_CN return [ 'title' => '\u64cd\u4f5c\u65e5\u5fd7', 'setting_title' => '\u64cd\u4f5c\u65e5\u5fd7', ]; \u6700\u540e\u5728\u63a7\u5236\u5668\u4e2d\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u6cd5\u8bbf\u95ee\u8bed\u8a00\u5305\u5185\u5bb9\uff0c\u5173\u4e8e\u591a\u8bed\u8a00\u7684\u66f4\u591a\u7528\u6cd5\u53ef\u4ee5\u53c2\u8003laravel\u5b98\u65b9\u6587\u6863 use Dcat\\Admin\\OperationLog\\OperationLogServiceProvider; OperationLogServiceProvider:trans('log.title'); OperationLogServiceProvider:trans('log.setting_title'); \u5b9a\u4e49\u83dc\u5355 \u63a5\u4e0b\u6765\u6211\u4eec\u8fd8\u9700\u8981\u7ed9\u6211\u4eec\u7684\u6269\u5c55\u751f\u6210\u83dc\u5355\uff0c\u6253\u5f00 \u6269\u5c55\u76ee\u5f55/src/OperationLogServiceProvider.php \uff0c\u7136\u540e\u4fee\u6539\u5185\u5bb9\u5982\u4e0b class OperationLogServiceProvider extends ServiceProvider { // \u5b9a\u4e49\u83dc\u5355 protected $menu = [ [ 'title' => 'Operation Log', 'uri' => 'auth/operation-logs', 'icon' => '', // \u56fe\u6807\u53ef\u4ee5\u7559\u7a7a ], ]; public function settingForm() { return new Setting($this); } } \u5982\u679c\u4f60\u60f3\u6ce8\u518c\u5e26\u6709\u5c42\u7ea7\u5173\u7cfb\u7684\u83dc\u5355\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u8fd9\u79cd\u65b9\u5f0f\u6ce8\u518c // \u6ce8\u518c\u83dc\u5355 protected $menu = [ [ 'title' => 'Operation Log', 'uri' => '', 'icon' => 'feather icon-x', ], [ 'parent' => 'Operation Log', // \u6307\u5b9a\u7236\u7ea7\u83dc\u5355 'title' => 'List', 'uri' => 'auth/operation-logs', ], ]; \u6d4b\u8bd5\u6269\u5c55 \u4e0a\u9762\u7684\u6b65\u9aa4\u90fd\u5b8c\u6210\u4e4b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u5f00\u59cb\u6d4b\u8bd5\u4e00\u4e0b\u4e0a\u9762\u7684\u529f\u80fd\uff0c\u9a8c\u8bc1\u4e0b\u662f\u5426\u6709\u9519\u8bef\uff0c\u7136\u540e\u518d\u8fdb\u884c\u540e\u7eed\u7684\u5f00\u53d1\u3002 \u7531\u4e8e\u521a\u5f00\u59cb\u521b\u5efa\u6269\u5c55\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5df2\u7ecf\u5b89\u88c5\u5e76\u542f\u7528\u4e86\u8fd9\u4e2a\u6269\u5c55\uff0c\u6240\u4ee5\u6b64\u5904\u6211\u4eec\u8981\u5148 \u5378\u8f7d \u5f53\u524d\u6269\u5c55\uff0c\u518d\u91cd\u65b0\u66f4\u65b0\u5230 1.0.0 \u7248\u672c\uff0c\u8fd9\u6837\u6570\u636e\u8868\u548c\u83dc\u5355\u624d\u4f1a\u88ab\u521b\u5efa\u3002 {tip} \u5378\u8f7d \u529f\u80fd\u4f1a\u5220\u9664\u6269\u5c55\u7684\u6570\u636e\u6216\u6570\u636e\u8868\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff0c\u4ee5\u514d\u9020\u6210\u6570\u636e\u4e22\u5931\uff01\uff01\uff01 \u6253\u5f00\u6269\u5c55\u7ba1\u7406\u9875\u9762 http://\u57df\u540d/admin/auth/extensions \uff0c\u627e\u5230\u5f53\u524d\u6269\u5c55\uff0c\u9f20\u6807\u79fb\u52a8\u5230\u6269\u5c55\u884c\uff0c\u70b9\u51fb \u5378\u8f7d \u6309\u94ae\u5e76\u786e\u8ba4\uff0c\u7136\u540e\u91cd\u65b0\u70b9\u51fb \u66f4\u65b0\u81f31.0.0\u7248\u672c \u4ee5\u53ca \u542f\u7528 \u6309\u94ae\uff0c \u6700\u540e F5 \u5237\u65b0\u6d4f\u89c8\u5668\u5373\u53ef\u770b\u5230\u65b0\u521b\u5efa\u7684\u83dc\u5355\uff0c\u70b9\u51fb\u83dc\u5355\u53ef\u8bbf\u95ee\u64cd\u4f5c\u65e5\u5fd7\u7ba1\u7406\u9875\u9762 admin/auth/operation-logs \u3002 \u6ce8\u518c\u4e2d\u95f4\u4ef6 \u73b0\u5728\u6211\u4eec\u7684\u6269\u5c55\u8fd8\u9700\u8981\u4e00\u4e2a\u4e2d\u95f4\u4ef6\u6765\u8bb0\u5f55\u7528\u6237\u7684\u64cd\u4f5c\uff0c\u521b\u5efa\u6587\u4ef6 \u6269\u5c55\u76ee\u5f55/src/Http/Middleware/LogOperation.php \uff0c\u6587\u4ef6\u5185\u5bb9\u70b9\u51fb LogOperation.php \u67e5\u770b\u3002 \u7136\u540e\u6211\u4eec\u9700\u8981\u6ce8\u518c\u8fd9\u4e2a\u4e2d\u95f4\u4ef6\uff0c\u8ba9\u8fd9\u4e2a\u4e2d\u95f4\u4ef6\u751f\u6548\uff0c\u6253\u5f00 \u6269\u5c55\u76ee\u5f55/src/OperationLogServiceProvider.php \uff0c\u7136\u540e\u4fee\u6539\u5185\u5bb9\u5982\u4e0b class OperationLogServiceProvider extends ServiceProvider { protected $middleware = [ 'middle' => [ // \u6ce8\u518c\u4e2d\u95f4\u4ef6 LogOperation::class, ], ]; protected $menu = [ [ 'title' => 'Operation Log', 'uri' => 'auth/operation-logs', ], ]; public function settingForm() { return new Setting($this); } } $middleware \u5c5e\u6027\u4e2d\u6ce8\u518c\u7684\u4e2d\u95f4\u4ef6\u6700\u540e\u4f1a\u5408\u5e76\u5230\u914d\u7f6e\u53c2\u6570 admin.route.middleware \u4e2d\uff0c\u4e2d\u95f4\u4ef6\u6ce8\u518c\u652f\u6301\u4ee5\u4e0b\u4e09\u79cd\u7c7b\u578b\u6ce8\u518c before \u4e2d\u95f4\u4ef6\u4f1a\u5728\u6700\u524d\u9762\uff0c\u4e5f\u5c31\u662f\u6700\u5148\u6267\u884c middle \u4e2d\u95f4\u4ef6\u4f1a\u5728 admin.auth \uff08\u767b\u9646\u9274\u6743\u4e2d\uff09\u548c admin.permission \uff08\u6743\u9650\u5224\u65ad\uff09\u4e24\u4e2a\u4e2d\u95f4\u4ef6 \u4e4b\u95f4 \u6267\u884c after \u4e2d\u95f4\u4ef6\u4f1a\u5728\u6700\u540e\u6267\u884c \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u64cd\u4f5c\u65e5\u5fd7\u8bb0\u5f55\u7528\u6237\u64cd\u4f5c\u65f6\u663e\u7136\u9700\u8981\u8bb0\u5f55\u767b\u9646\u7528\u6237\u7684\u4fe1\u606f\uff0c\u6240\u4ee5\u4e2d\u95f4\u4ef6\u5fc5\u987b\u5728 admin.auth \u4e2d\u95f4\u4ef6\u4e4b\u540e\u6267\u884c\uff0c\u8fd9\u6837\u624d\u80fd\u62ff\u5230\u767b\u9646\u7528\u6237\u6570\u636e\uff1b \u5e76\u4e14\u65e0\u6743\u9650\u7684\u64cd\u4f5c\u4e5f\u9700\u8981\u8bb0\u5f55\uff0c\u6240\u4ee5\u5fc5\u987b\u5728 admin.permission \u4e2d\u95f4\u4ef6\u4e4b\u524d\u6267\u884c\uff0c\u6240\u4ee5\u53ea\u6709\u6ce8\u518c\u4e3a middle \u7c7b\u578b\u7684\u4e2d\u95f4\u4ef6\u624d\u80fd\u6ee1\u8db3\u4e0a\u8ff0\u8981\u6c42\uff01 \u6ce8\u518c\u5b8c\u4e2d\u95f4\u4ef6\u4e4b\u540e\uff0c\u6211\u4eec\u968f\u610f\u8bbf\u95ee\u4e00\u4e0b\u7cfb\u7edf\u4e2d\u7684\u5176\u4ed6\u9875\u9762\uff08\u9664\u4e86\u64cd\u4f5c\u65e5\u5fd7\u7ba1\u7406\u9875\u9762\uff09\uff0c\u7136\u540e\u518d\u8bbf\u95ee\u64cd\u4f5c\u65e5\u5fd7\u7ba1\u7406\u9875\u9762\uff0c\u5c31\u53ef\u4ee5\u770b\u5230\u7528\u6237\u7684\u64cd\u4f5c\u65e5\u5fd7\u4e86\uff0c\u5230\u8fd9\u91cc\u63d2\u4ef6\u57fa\u672c\u5f00\u53d1\u5b8c\u6bd5\u3002 \u914d\u7f6e\u53c2\u6570\uff08\u8bbe\u7f6e\uff09 \u5728\u5f53\u524d\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u8ba9\u7528\u6237\u80fd\u914d\u7f6e\u4e00\u4e9b\u81ea\u5b9a\u4e49\u53c2\u6570\uff08\u6bd4\u5982\u914d\u7f6e\u4e0d\u9700\u8981\u8bb0\u5f55\u64cd\u4f5c\u65e5\u5fd7\u7684\u8def\u7531\uff09\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u9700\u8981\u4e00\u4e2a \u914d\u7f6e\u8868\u5355 \u8ba9\u7528\u6237\u80fd\u901a\u8fc7\u9875\u9762\u76f4\u63a5\u914d\u7f6e\u76f8\u5173\u53c2\u6570\uff0c \u6211\u4eec\u9700\u8981\u5728 OperationLogServiceProvider \u7c7b\u91cc\u9762\u7684 settingForm \u8fd4\u56de\u8fd9\u4e2a\u914d\u7f6e\u8868\u5355\u7684\u5bf9\u8c61 class OperationLogServiceProvider extends ServiceProvider { ... // \u8fd4\u56de\u914d\u7f6e\u8868\u5355\u5bf9\u8c61\uff0c\u5982\u679c\u4e0d\u9700\u8981\u4fdd\u5b58\u914d\u7f6e\u53c2\u6570\uff0c\u5219\u8bf7\u5220\u9664\u8fd9\u4e2a\u65b9\u6cd5 public function settingForm() { return new Setting($this); } } \u7136\u540e\u6211\u4eec\u9700\u8981\u4fee\u6539\u914d\u7f6e\u8868\u5355\u7c7b \u6269\u5c55\u76ee\u5f55/src/Setting.php \u5982\u4e0b namespace Dcat\\Admin\\OperationLog; use Dcat\\Admin\\Extend\\Setting as Form; use Dcat\\Admin\\OperationLog\\Models\\OperationLog; use Dcat\\Admin\\Support\\Helper; class Setting extends Form { // \u8fd4\u56de\u8868\u5355\u5f39\u7a97\u6807\u9898 public function title() { return $this->trans('log.title'); } // \u683c\u5f0f\u5316\u5f85\u4fdd\u5b58\u7684\u914d\u7f6e\u53c2\u6570\u503c protected function formatInput(array $input) { // \u8f6c\u5316\u4e3a\u6570\u7ec4\uff0c\u6ce8\u610f\u5982\u679c\u8fd9\u91cc\u4fdd\u5b58\u7684\u65f6\u5019\u662f\u6570\u7ec4\uff0c\u90a3\u4e48\u8bfb\u53d6\u51fa\u6765\u7684\u65f6\u5019\u4e5f\u662f\u6570\u7ec4 $input['except'] = Helper::array($input['except']); $input['allowed_methods'] = Helper::array($input['allowed_methods']); return $input; } public function form() { // \u5b9a\u4e49\u8868\u5355\u5b57\u6bb5 $this->tags('except'); $this->multipleSelect('allowed_methods') ->options(array_combine(OperationLog::$methods, OperationLog::$methods)); $this->tags('secret_fields'); } } \u4ee5\u4e0a\u8bbe\u7f6e\u5b8c\u6210\u4e4b\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u5728\u6269\u5c55\u7ba1\u7406\u9875\u9762\u4fdd\u5b58\u81ea\u5b9a\u4e49\u53c2\u6570\u4e86 \u914d\u7f6e\u53c2\u6570\u8bfb\u53d6\u7528\u6cd5\u5982\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4e2d\u95f4\u4ef6 LogOperation \u4e2d\u4f7f\u7528\u8fd9\u4e9b\u53c2\u6570 use Dcat\\Admin\\OperationLog\\OperationLogServiceProvider; // \u8bfb\u53d6\u914d\u7f6e\u53c2\u6570 $except = OperationLogServiceProvider::setting('except'); $allowedMethods = OperationLogServiceProvider::setting('allowed_methods'); $secretFields = OperationLogServiceProvider::setting('secret_fields'); \u670d\u52a1\u6ce8\u518c\u4e0e\u521d\u59cb\u5316 \u7531\u4e8e\u5f53\u524d\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u6ca1\u6709\u4f7f\u7528\u5230\u670d\u52a1\u6ce8\u518c\u4e0e\u521d\u59cb\u5316\u76f8\u5173\u529f\u80fd\uff0c\u6240\u4ee5\u8fd9\u90e8\u5206\u5185\u5bb9\u5148\u7565\u8fc7\uff0c\u6709\u76f8\u5173\u9700\u8981\u7684\u540c\u5b66\u53ef\u4ee5\u53c2\u8003 \u6269\u5c55 - \u670d\u52a1\u6ce8\u518c\u4e0e\u521d\u59cb\u5316 \u7ae0\u8282\u3002 \u89c6\u56fe (view) \u7531\u4e8e\u5f53\u524d\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u6ca1\u6709\u4f7f\u7528\u5230\u81ea\u5b9a\u4e49\u9759\u6001\u8d44\u6e90\u7684\u529f\u80fd\uff0c\u6240\u4ee5\u8fd9\u90e8\u5206\u5185\u5bb9\u5148\u7565\u8fc7\uff0c\u6709\u76f8\u5173\u9700\u8981\u7684\u540c\u5b66\u53ef\u4ee5\u53c2\u8003 \u6269\u5c55 - \u89c6\u56fe \u7ae0\u8282\u3002 \u9759\u6001\u8d44\u6e90 \u7531\u4e8e\u5f53\u524d\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u6ca1\u6709\u4f7f\u7528\u5230\u81ea\u5b9a\u4e49\u9759\u6001\u8d44\u6e90\u7684\u529f\u80fd\uff0c\u6240\u4ee5\u8fd9\u90e8\u5206\u5185\u5bb9\u5148\u7565\u8fc7\uff0c\u6709\u76f8\u5173\u9700\u8981\u7684\u540c\u5b66\u53ef\u4ee5\u53c2\u8003 \u6269\u5c55 - \u9759\u6001\u8d44\u6e90 \u7ae0\u8282\u3002 \u4fee\u6539 composer.json & README.md \u4ee3\u7801\u90e8\u5206\u5b8c\u6210\u4e4b\u540e\uff0c\u9700\u8981\u4fee\u6539 composer.json \u91cc\u9762\u7684\u5185\u5bb9\uff0c\u5c06 description \u3001 keywords \u3001 license \u3001 authors \u7b49\u5185\u5bb9\u66ff\u6362\u4e3a\u4f60\u7684\u4fe1\u606f\uff0c\u7136\u540e\u4e0d\u8981\u5fd8\u8bb0\u5b8c\u5584 README.md \uff0c\u8865\u5145\u4f7f\u7528\u6587\u6863\u7b49\u76f8\u5173\u4fe1\u606f\u3002 \u53d1\u5e03\u6269\u5c55 \u4e0a\u4f20\u5e94\u7528\u5e02\u573a \u6b63\u5f0f\u7248\u53d1\u5e03\u540e\u4f1a\u4e0a\u7ebf\u5e94\u7528\u5e02\u573a\u529f\u80fd\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u628a\u6269\u5c55\u53d1\u5e03\u5230\u5e94\u7528\u5e02\u573a\uff0c\u7136\u540e\u7528\u6237\u5c31\u53ef\u4ee5\u901a\u8fc7\u9875\u9762\u76f4\u63a5\u5b89\u88c5\u4f7f\u7528\uff0c\u656c\u8bf7\u671f\u5f85... \u4e0a\u4f20\u5230Github \u5148\u767b\u5f55\u4f60\u7684Github\uff0c\u521b\u5efa\u4e00\u4e2a\u4ed3\u5e93\uff0c\u7136\u540e\u6309\u7167\u9875\u9762\u4e0a\u7684\u63d0\u793a\u628a\u4f60\u7684\u4ee3\u7801push\u4e0a\u53bb git init git remote add origin https://github.com/<your-name>/<your-repository>.git git add . git commit -am \"Initial commit.\" git push origin master \u53d1\u5e03\u5230Packagist.org \u63a5\u4e0b\u6765\u5c31\u662f\u53d1\u5e03\u4f60\u7684\u9879\u76ee\u5230 Packagist.org \uff0c\u5982\u679c\u6ca1\u6709\u8d26\u53f7\u7684\u8bdd\uff0c\u5148\u6ce8\u518c\u4e00\u4e2a\uff0c\u7136\u540e\u6253\u5f00\u9876\u90e8\u5bfc\u822a\u7684 Submit , \u586b\u5165\u4ed3\u5e93\u5730\u5740\u63d0\u4ea4 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5f53\u60a8\u63a8\u9001\u65b0\u4ee3\u7801\u65f6\uff0c Packagist.org \u4e0d\u4f1a\u81ea\u52a8\u66f4\u65b0\uff0c\u6240\u4ee5\uff0c\u60a8\u9700\u8981\u521b\u5efa\u4e00\u4e2aGitHub\u670d\u52a1\u94a9\u5b50\uff0c \u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u70b9\u51fb\u9875\u9762\u4e0a\u7684 Update \u6309\u94ae\u624b\u52a8\u66f4\u65b0\u5b83\uff0c\u4f46\u6211\u5efa\u8bae\u81ea\u52a8\u6267\u884c\u8fd9\u4e2a\u8fc7\u7a0b \u63d0\u4ea4\u4e4b\u540e\uff0c\u7531\u4e8e\u5404\u5730\u7684\u955c\u50cf\u540c\u6b65\u65f6\u95f4\u7684\u5ef6\u8fdf\uff0c\u53ef\u80fd\u5728\u7528 composer \u5b89\u88c5\u7684\u65f6\u5019\uff0c\u4f1a\u6682\u65f6\u627e\u4e0d\u5230\u4f60\u7684\u9879\u76ee\uff0c\u8fd9\u4e2a\u65f6\u5019\u53ef\u80fd\u9700\u8981\u7b49\u5f85\u540c\u6b65\u5b8c\u6210 \u53d1\u5e03\u5b8c\u6210\u4e4b\u540e\u5c31\u53ef\u4ee5\u901a\u8fc7 composer \u5b89\u88c5\u4f60\u7684\u6269\u5c55\u4e86","title":"\u5f00\u53d1\u6269\u5c55"},{"location":"2.x/extension-dev/#_1","text":"Dcat Admin \u652f\u6301\u5b89\u88c5\u6269\u5c55\u5de5\u5177\u6765\u5e2e\u52a9\u4e30\u5bcc\u4f60\u7684\u540e\u53f0\u529f\u80fd\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c Laravel Admin \u539f\u6709\u7684\u6269\u5c55\u65e0\u6cd5\u76f4\u63a5\u5728 Dcat Admin \u4e2d\u4f7f\u7528\uff0c\u4f46\u5927\u90e8\u5206\u6269\u5c55\u53ea\u9700\u8981\u505a\u4e00\u4e9b\u5fae\u5c0f\u7684\u8c03\u6574\u5c31\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528\u4e86\uff0c\u6709\u5174\u8da3\u7684\u540c\u5b66\u53ef\u4ee5\u81ea\u884c\u79fb\u690d\u3002 \u5982\u679c\u5927\u5bb6\u5728\u4f7f\u7528\u7684\u8fc7\u7a0b\u4e2d\u6709\u5728 Dcat Admin \u7684\u57fa\u7840\u4e0a\u6dfb\u52a0\u4e00\u4e9b\u81ea\u5df1\u7684\u529f\u80fd\u6216\u8005\u7ec4\u4ef6\uff0c\u4e0d\u59a8\u505a\u6210\u4e00\u4e2a Dcat Admin \u6269\u5c55\uff0c\u8fd9\u6837\u53ef\u4ee5\u7ed9\u5176\u5b83 Dcat Admin \u4f7f\u7528\u8005\u63d0\u4f9b\u5e2e\u52a9\uff0c\u5e76\u4e14\u5728\u5176\u5b83\u4eba\u7684\u4f7f\u7528\u53cd\u9988\u4e2d\u7684\u63d0\u5347\u6269\u5c55\u7684\u8d28\u91cf\u3002 \u8fd9\u7bc7\u6587\u6863\u5c06\u4f1a\u4ee5\u5f00\u53d1\u4e00\u4e2a \u64cd\u4f5c\u65e5\u5fd7\u6269\u5c55 \u4e3a\u4f8b\uff0c\u4e00\u6b65\u4e00\u6b65\u7684\u6559\u5927\u5bb6\u5f00\u53d1\u4e00\u4e2a\u6269\u5c55\uff0c\u5e76\u4e14\u53d1\u5e03\u7ed9\u4ed6\u4eba\u4f7f\u7528\uff0c\u6700\u7ec8\u7684\u6548\u679c\u53c2\u8003 \u64cd\u4f5c\u65e5\u5fd7\u6269\u5c55 \u3002","title":"\u5f00\u53d1\u6269\u5c55"},{"location":"2.x/extension-dev/#_2","text":"\u5728\u5f00\u59cb\u5f00\u53d1\u6269\u5c55\u4e4b\u524d\uff0c\u5982\u679c\u662f linux \u73af\u5883\uff0c\u8bf7\u5148\u624b\u52a8\u5728\u9879\u76ee\u6839\u76ee\u5f55\u521b\u5efa\u4e00\u4e2a dcat-admin-extensions \u76ee\u5f55\uff0c\u5e76\u8bbe\u7f6e\u53ef\u8bfb \u53ef\u5199 \u6743\u9650\uff0c\u6269\u5c55\u6587\u4ef6\u5c06\u4f1a\u88ab\u5b89\u88c5\u5728 dcat-admin-extensions \u76ee\u5f55\uff0c\u8bf7\u4fdd\u8bc1\u62e5\u6709\u4ee5\u4e0b\u51e0\u4e2a\u76ee\u5f55\u7684\u8bfb\u5199\u6743\u9650 \u9879\u76ee\u76ee\u5f55/dcat-admin-extensions \u6269\u5c55\u7684\u5b89\u88c5\u76ee\u5f55\uff0c\u53ef\u4ee5\u6839\u636e\u914d\u7f6e\u53c2\u6570 admin.extensions.dir \u8fdb\u884c\u66f4\u6539 public/vendor \u6269\u5c55\u9759\u6001\u8d44\u6e90\u53d1\u5e03\u76ee\u5f55 resources/lang \u8bed\u8a00\u5305\u76ee\u5f55","title":"\u5f00\u59cb\u4e4b\u524d"},{"location":"2.x/extension-dev/#1","text":"Dcat Admin \u7684\u6269\u5c55\u662f\u4e00\u4e2a\u6807\u51c6\u7684 composer \u6269\u5c55\u5305\uff0c\u53ef\u4ee5\u901a\u8fc7 composer \u5b89\u88c5\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7cfb\u7edf\u5185\u90e8\u7684 \u672c\u5730\u5b89\u88c5 \u529f\u80fd\u76f4\u63a5\u5b89\u88c5\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u6216\u754c\u9762\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6269\u5c55\uff0c\u4e0b\u9762\u5206\u522b\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\u547d\u4ee4\u548c\u754c\u9762\u521b\u5efa\u7684\u65b9\u6cd5 1.\u901a\u8fc7\u547d\u4ee4\u521b\u5efa\u6269\u5c55 php artisan admin:ext-make \u6269\u5c55\u5305\u540d --namespace=\u547d\u540d\u7a7a\u95f4 --theme \u547d\u4ee4\u53c2\u6570\u8bf4\u660e name \u6269\u5c55\u5305\u540d\u79f0\uff0c\u6269\u5c55\u7684\u540d\u79f0\u662f\u4e00\u4e2a\u6807\u51c6\u7684 composer \u5305\u540d\uff0c\u8bf7\u7edf\u4e00\u4f7f\u7528 \u5c0f\u5199\u5b57\u6bcd + \u4e2d\u5212\u7ebf(-) \u7684\u98ce\u683c\u547d\u540d\uff0c\u6807\u51c6\u7684\u683c\u5f0f\u5982 dcat-admin/operation-log \uff0c\u524d\u9762\u4e00\u90e8\u5206\u53ef\u4ee5\u662f\u4e2a\u4eba\u540d\u79f0\uff0c\u540e\u9762\u4e00\u90e8\u5206\u53ef\u4ee5\u662f\u5bf9\u6269\u5c55\u5305\u529f\u80fd\u7684\u6982\u62ec\u8bcd\u8bed --namespace= \u6269\u5c55\u5305\u547d\u540d\u7a7a\u95f4\uff0c\u9ed8\u8ba4\u4f1a\u6839\u636e\u5305\u540d\u81ea\u52a8\u751f\u6210\uff0c\u4f8b\u5982\u4f60\u7684\u5305\u540d\u662f jiangqh/operation-log \uff0c\u90a3\u4e48\u9ed8\u8ba4\u7684\u547d\u540d\u7a7a\u95f4\u662f Jiangqh/OperationLog --theme \u662f\u5426\u4e3a\u4e3b\u9898\u6269\u5c55 \u90a3\u4e48\u5728\u5f53\u524d\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u6211\u4eec\u8fd0\u884c\u4e00\u4e0b\u547d\u4ee4\u751f\u6210\u6269\u5c55\u5305 # `--namespace` php artisan admin:ext-make dcat-admin/operation-log --namespace=\"Dcat\\Admin\\OperationLog\" 2.\u901a\u8fc7\u7ba1\u7406\u9875\u9762\u521b\u5efa\u6269\u5c55 \u6253\u5f00\u6269\u5c55\u7ba1\u7406\u9875\u9762 http://localhost/admin/auth/extensions \uff0c\u7136\u540e\u70b9\u51fb\u8868\u683c\u4e0b\u9762\u7b2c\u4e00\u884c\u7684 \u5feb\u901f\u521b\u5efa \uff0c\u7136\u540e\u8f93\u5165\u6269\u5c55\u5305\u540d\u548c\u547d\u540d\u7a7a\u95f4\u5373\u53ef\uff0c\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\u4e5f\u66f4\u63a8\u8350\u5927\u5bb6\u4f7f\u7528\u754c\u9762\u521b\u5efa\u6269\u5c55\uff0c\u8fd9\u6837\u66f4\u65b9\u4fbf \u6269\u5c55\u521b\u5efa\u5b8c\u6210\u4e4b\u540e\u53ef\u4ee5\u770b\u5230\u6269\u5c55\u6587\u4ef6\u5939\u4e0b\u591a\u4e86\u4e2a dcat-admin/extensions/dcat-admin/operation-log \u76ee\u5f55\uff0c\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b \u251c\u2500\u2500 README.md \u251c\u2500\u2500 composer.json # composer\u914d\u7f6e\u6587\u4ef6 \u251c\u2500\u2500 version.php # \u6269\u5c55\u5305\u7248\u672c\u7ba1\u7406\u6587\u4ef6 \u251c\u2500\u2500 logo.png # logo \u251c\u2500\u2500 updates # \u6269\u5c55\u5305\u6bcf\u4e2a\u7248\u672c\u5bf9\u5e94\u7684\u8868\u8fc1\u79fb\u6587\u4ef6 \u251c\u2500\u2500 resources \u2502 \u251c\u2500\u2500 lang # \u8bed\u8a00\u5305 \u2502 \u251c\u2500\u2500 assets # \u9759\u6001\u8d44\u6e90 \u2502 \u2502 \u251c\u2500\u2500 css \u2502 \u2502 \u2502 \u2514\u2500\u2500 index.css # css\u793a\u4f8b\u6587\u4ef6 \u2502 \u2502 \u2514\u2500\u2500 js \u2502 \u2502 \u2514\u2500\u2500 index.js # js\u793a\u4f8b\u6587\u4ef6 \u2502 \u2514\u2500\u2500 views \u2502 \u2514\u2500\u2500 index.blade.php # \u89c6\u56fe\u793a\u4f8b\u6587\u4ef6 \u2514\u2500\u2500 src \u251c\u2500\u2500 OperationLogServiceProvider.php # \u6269\u5c55\u5305\u670d\u52a1\u63d0\u4f9b\u8005 \u251c\u2500\u2500 Setting.php # \u6269\u5c55\u8bbe\u7f6e\u8868\u5355 \u251c\u2500\u2500 Models # \u6a21\u578b\u76ee\u5f55 \u2514\u2500\u2500 Http \u251c\u2500\u2500 routes.php # \u6269\u5c55\u5305\u8def\u7531\u6587\u4ef6 \u251c\u2500\u2500 Middleware # \u6269\u5c55\u5305\u4e2d\u95f4\u4ef6\u6587\u4ef6\u5939 \u2514\u2500\u2500 Controllers # \u6269\u5c55\u5305\u63a7\u5236\u5668 \u2514\u2500\u2500 OperationLogController.php \u7136\u540e\u4f60\u8fd8\u53ef\u4ee5\u8bbe\u7f6e\u6269\u5c55\u7684 logo \u4ee5\u53ca\u6269\u5c55\u540d\u79f0\uff0c\u8bbe\u7f6e\u4e4b\u540e\u4f1a\u5728\u6269\u5c55\u7ba1\u7406\u9875\u9762\u5c55\u793a\uff0c\u8ba9\u4f60\u7684\u6269\u5c55\u66f4\u5177\u5bb9\u6613\u88ab\u4eba\u8bb0\u4f4f\uff01","title":"1.\u521b\u5efa\u6269\u5c55"},{"location":"2.x/extension-dev/#logo","text":"\u6269\u5c55 logo \u5fc5\u987b\u653e\u5728\u6269\u5c55\u7684\u6839\u76ee\u5f55\uff0c\u5e76\u4e14\u6587\u4ef6\u540d\u5fc5\u987b\u662f logo.png \uff0c\u5c3a\u5bf8\u5efa\u8bae\u662f 100x100 \u3002","title":"\u6269\u5c55logo"},{"location":"2.x/extension-dev/#_3","text":"\u6269\u5c55\u540d\u79f0\u9700\u8981\u4fee\u6539 composer.json \u91cc\u9762\u7684 alias \u53c2\u6570\uff0c\u5982\u679c\u4e0d\u8bbe\u7f6e\u5219\u9ed8\u8ba4\u5c55\u793a\u5305\u540d","title":"\u6269\u5c55\u540d\u79f0"},{"location":"2.x/extension-dev/#2","text":"\u6269\u5c55\u521b\u5efa\u6210\u529f\u4e4b\u540e\u5c31\u53ef\u4ee5\u5728\u7ba1\u7406\u9875\u9762 http://localhost/admin/auth/extensions \u770b\u5230\u65b0\u521b\u5efa\u7684\u6269\u5c55\u4e86\uff0c\u6548\u679c\u5982\u4e0b \u7136\u540e\u6211\u4eec\u5206\u522b\u70b9\u51fb\u6269\u5c55\u5bf9\u5e94\u7684 \u66f4\u65b0\u81f31.0.0\u7248\u672c \u4ee5\u53ca \u542f\u7528 \u6309\u94ae\uff0c\u5c31\u53ef\u4ee5\u4f7f\u8fd9\u4e2a\u6269\u5c55\u751f\u6548\u4e86\u3002 \u65b0\u521b\u5efa\u7684\u6269\u5c55\u4f1a\u751f\u6210\u4e00\u4e2a\u9ed8\u8ba4\u7684\u63a7\u5236\u5668\uff0c\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u8bbf\u95ee http://localhost:8000/admin/operation-log \uff0c\u5982\u679c\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee\u5219\u8bf4\u660e\u6269\u5c55\u542f\u7528\u6210\u529f\u3002","title":"2.\u542f\u7528\u6269\u5c55"},{"location":"2.x/extension-dev/#3","text":"\u8fd9\u4e2a\u6269\u5c55\u7684\u529f\u80fd\u4e3b\u8981\u662f\u7528\u6765\u8bb0\u5f55\u7528\u6237\u7684\u64cd\u4f5c\u8bb0\u5f55\uff0c\u7136\u540e\u63d0\u4f9b\u4e00\u4e2a\u67e5\u770b\u8bb0\u5f55\u7684\u9875\u9762\uff0c\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u628a\u9ed8\u8ba4\u521b\u5efa\u7684\u6269\u5c55\u6587\u4ef6\u4e2d\u7528\u4e0d\u5230\u7684\u7ed9\u6e05\u7406\u6389\uff0c\u6e05\u7406\u540e\u7684\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b \u251c\u2500\u2500 README.md \u251c\u2500\u2500 composer.json # composer\u914d\u7f6e\u6587\u4ef6 \u251c\u2500\u2500 version.php # \u6269\u5c55\u5305\u7248\u672c\u7ba1\u7406\u6587\u4ef6 \u251c\u2500\u2500 logo.png # logo \u251c\u2500\u2500 updates # \u6269\u5c55\u5305\u6bcf\u4e2a\u7248\u672c\u5bf9\u5e94\u7684\u8868\u8fc1\u79fb\u6587\u4ef6 \u251c\u2500\u2500 resources \u2502 \u2514\u2500\u2500 lang # \u8bed\u8a00\u5305 \u2514\u2500\u2500 src \u251c\u2500\u2500 OperationLogServiceProvider.php # \u6269\u5c55\u5305\u670d\u52a1\u63d0\u4f9b\u8005 \u251c\u2500\u2500 Setting.php # \u6269\u5c55\u8bbe\u7f6e\u8868\u5355 \u251c\u2500\u2500 Models # \u6a21\u578b\u76ee\u5f55 \u2514\u2500\u2500 Http \u251c\u2500\u2500 routes.php # \u6269\u5c55\u5305\u8def\u7531\u6587\u4ef6 \u251c\u2500\u2500 Middleware # \u6269\u5c55\u5305\u4e2d\u95f4\u4ef6\u6587\u4ef6\u5939 \u2514\u2500\u2500 Controllers # \u6269\u5c55\u5305\u63a7\u5236\u5668 \u2514\u2500\u2500 OperationLogController.php \u63a5\u4e0b\u6765\u5c31\u6b63\u5f0f\u8fdb\u5165\u529f\u80fd\u5f00\u53d1\u90e8\u5206","title":"3.\u529f\u80fd\u5f00\u53d1"},{"location":"2.x/extension-dev/#migration","text":"\u9996\u5148\u6211\u4eec\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u8868\u8fc1\u79fb\u6587\u4ef6\uff0c\u8fd0\u884c\u547d\u4ee4 php artisan make:migration CreateOperationLogTable \uff0c\u7136\u540e\u5199\u5165\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b <?php use Illuminate\\Database\\Migrations\\Migration; use Illuminate\\Database\\Schema\\Blueprint; use Illuminate\\Support\\Facades\\Schema; class CreateOperationLogTable extends Migration { // \u8fd9\u91cc\u53ef\u4ee5\u6307\u5b9a\u4f60\u7684\u6570\u636e\u5e93\u8fde\u63a5 public function getConnection() { return config('database.connection') ?: config('database.default'); } public function up() { if (! Schema::hasTable('admin_operation_log')) { Schema::create('admin_operation_log', function (Blueprint $table) { $table->bigIncrements('id')->unsigned(); $table->bigInteger('user_id'); $table->string('path'); $table->string('method', 10); $table->string('ip'); $table->text('input'); $table->index('user_id'); $table->timestamps(); }); } } public function down() { Schema::dropIfExists('admin_operation_log'); } } \u7136\u540e\u628a\u6587\u4ef6\u79fb\u52a8\u5230 \u6269\u5c55\u76ee\u5f55/updates \u76ee\u5f55\uff0c\u5e76\u91cd\u547d\u540d\u4e3a create_opration_log_table.php \u3002\u6700\u540e\u6211\u4eec\u9700\u8981\u4fee\u6539\u6269\u5c55\u7684\u7248\u672c\u7ba1\u7406\u6587\u4ef6 \u6269\u5c55\u76ee\u5f55/version.php \uff0c\u5199\u5165\u8fc1\u79fb\u6587\u4ef6\u7684\u6587\u4ef6\u540d\uff0c\u6700\u7ec8\u5185\u5bb9\u5982\u4e0b <?php return [ '1.0.0' => [ '\u7248\u672c\u53d8\u5316\u63cf\u8ff01', '\u7248\u672c\u53d8\u5316\u63cf\u8ff02', 'create_opration_log_table.php', // \u8fc1\u79fb\u6587\u4ef6\u540d\u79f0\uff0c\u5b89\u88c5\u6216\u66f4\u65b0\u7248\u672c\u65f6\u4f1a\u81ea\u52a8\u6267\u884c ], ]; \u5173\u4e8e\u6269\u5c55\u7684\u7248\u672c\u7ba1\u7406\u66f4\u8be6\u7ec6\u7684\u4ecb\u7ecd\uff0c\u8bf7\u524d\u5f80 \u6269\u5c55 - \u7248\u672c\u7ba1\u7406 \u7ae0\u8282\u67e5\u770b\u3002","title":"\u521b\u5efa\u8fc1\u79fb\u6587\u4ef6 (migration)"},{"location":"2.x/extension-dev/#_4","text":"\u521b\u5efa\u6a21\u578b\u6587\u4ef6 \u6269\u5c55\u76ee\u5f55/src/Models/OperationLog \uff0c\u6a21\u578b\u5185\u5bb9\u70b9\u51fb OperationLog.php \u67e5\u770b\uff1b \u7136\u540e\u4fee\u6539\u6211\u4eec\u7684\u63a7\u5236\u5668 \u6269\u5c55\u76ee\u5f55/src/Http/Controllers/OperationLogController.php \uff0c\u63a7\u5236\u5668\u5185\u5bb9\u70b9\u51fb LogController.php \u67e5\u770b\uff1b \u6700\u540e\u9700\u8981\u4fee\u6539\u6211\u4eec\u7684\u8def\u7531\u6587\u4ef6\uff0c\u5c3d\u91cf\u8ba9\u4f60\u7684\u8def\u7531\u4e0d\u4e0e\u5176\u4ed6\u8def\u7531\u4ea7\u751f\u51b2\u7a81 use Dcat\\Admin\\OperationLog\\Http\\Controllers; use Illuminate\\Support\\Facades\\Route; Route::get('auth/operation-logs', Controllers\\OperationLogController::class.'@index')->name('dcat-admin.operation-log.index'); Route::delete('auth/operation-logs/{id}', Controllers\\OperationLogController::class.'@destroy')->name('dcat-admin.operation-log.destroy');","title":"\u6a21\u578b\u3001\u63a7\u5236\u5668\u548c\u8def\u7531"},{"location":"2.x/extension-dev/#_5","text":"\u5728\u63a7\u5236\u5668\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba9\u4e00\u4e9b\u6587\u672c\u63cf\u8ff0\u652f\u6301\u8bed\u8a00\u5305\u7ffb\u8bd1\u529f\u80fd\uff0c\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u6211\u4eec\u4ee5 en \u4ee5\u53ca zh_CN \u4e24\u79cd\u8bed\u8a00\u4e3a\u4f8b\uff0c\u5728 \u6269\u5c55\u5305/resources/lang \u76ee\u5f55\u4e0b\u5206\u522b\u521b\u5efa en/log.php \u548c zh_CN/log.php \u6587\u4ef6\uff0c\u5e76\u5199\u5165\u4ee5\u4e0b\u5185\u5bb9 // en return [ 'title' => 'Operation Log', 'setting_title' => 'Operation Log', ]; // zh_CN return [ 'title' => '\u64cd\u4f5c\u65e5\u5fd7', 'setting_title' => '\u64cd\u4f5c\u65e5\u5fd7', ]; \u6700\u540e\u5728\u63a7\u5236\u5668\u4e2d\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u6cd5\u8bbf\u95ee\u8bed\u8a00\u5305\u5185\u5bb9\uff0c\u5173\u4e8e\u591a\u8bed\u8a00\u7684\u66f4\u591a\u7528\u6cd5\u53ef\u4ee5\u53c2\u8003laravel\u5b98\u65b9\u6587\u6863 use Dcat\\Admin\\OperationLog\\OperationLogServiceProvider; OperationLogServiceProvider:trans('log.title'); OperationLogServiceProvider:trans('log.setting_title');","title":"\u8bed\u8a00\u5305"},{"location":"2.x/extension-dev/#_6","text":"\u63a5\u4e0b\u6765\u6211\u4eec\u8fd8\u9700\u8981\u7ed9\u6211\u4eec\u7684\u6269\u5c55\u751f\u6210\u83dc\u5355\uff0c\u6253\u5f00 \u6269\u5c55\u76ee\u5f55/src/OperationLogServiceProvider.php \uff0c\u7136\u540e\u4fee\u6539\u5185\u5bb9\u5982\u4e0b class OperationLogServiceProvider extends ServiceProvider { // \u5b9a\u4e49\u83dc\u5355 protected $menu = [ [ 'title' => 'Operation Log', 'uri' => 'auth/operation-logs', 'icon' => '', // \u56fe\u6807\u53ef\u4ee5\u7559\u7a7a ], ]; public function settingForm() { return new Setting($this); } } \u5982\u679c\u4f60\u60f3\u6ce8\u518c\u5e26\u6709\u5c42\u7ea7\u5173\u7cfb\u7684\u83dc\u5355\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u8fd9\u79cd\u65b9\u5f0f\u6ce8\u518c // \u6ce8\u518c\u83dc\u5355 protected $menu = [ [ 'title' => 'Operation Log', 'uri' => '', 'icon' => 'feather icon-x', ], [ 'parent' => 'Operation Log', // \u6307\u5b9a\u7236\u7ea7\u83dc\u5355 'title' => 'List', 'uri' => 'auth/operation-logs', ], ];","title":"\u5b9a\u4e49\u83dc\u5355"},{"location":"2.x/extension-dev/#_7","text":"\u4e0a\u9762\u7684\u6b65\u9aa4\u90fd\u5b8c\u6210\u4e4b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u5f00\u59cb\u6d4b\u8bd5\u4e00\u4e0b\u4e0a\u9762\u7684\u529f\u80fd\uff0c\u9a8c\u8bc1\u4e0b\u662f\u5426\u6709\u9519\u8bef\uff0c\u7136\u540e\u518d\u8fdb\u884c\u540e\u7eed\u7684\u5f00\u53d1\u3002 \u7531\u4e8e\u521a\u5f00\u59cb\u521b\u5efa\u6269\u5c55\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5df2\u7ecf\u5b89\u88c5\u5e76\u542f\u7528\u4e86\u8fd9\u4e2a\u6269\u5c55\uff0c\u6240\u4ee5\u6b64\u5904\u6211\u4eec\u8981\u5148 \u5378\u8f7d \u5f53\u524d\u6269\u5c55\uff0c\u518d\u91cd\u65b0\u66f4\u65b0\u5230 1.0.0 \u7248\u672c\uff0c\u8fd9\u6837\u6570\u636e\u8868\u548c\u83dc\u5355\u624d\u4f1a\u88ab\u521b\u5efa\u3002 {tip} \u5378\u8f7d \u529f\u80fd\u4f1a\u5220\u9664\u6269\u5c55\u7684\u6570\u636e\u6216\u6570\u636e\u8868\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff0c\u4ee5\u514d\u9020\u6210\u6570\u636e\u4e22\u5931\uff01\uff01\uff01 \u6253\u5f00\u6269\u5c55\u7ba1\u7406\u9875\u9762 http://\u57df\u540d/admin/auth/extensions \uff0c\u627e\u5230\u5f53\u524d\u6269\u5c55\uff0c\u9f20\u6807\u79fb\u52a8\u5230\u6269\u5c55\u884c\uff0c\u70b9\u51fb \u5378\u8f7d \u6309\u94ae\u5e76\u786e\u8ba4\uff0c\u7136\u540e\u91cd\u65b0\u70b9\u51fb \u66f4\u65b0\u81f31.0.0\u7248\u672c \u4ee5\u53ca \u542f\u7528 \u6309\u94ae\uff0c \u6700\u540e F5 \u5237\u65b0\u6d4f\u89c8\u5668\u5373\u53ef\u770b\u5230\u65b0\u521b\u5efa\u7684\u83dc\u5355\uff0c\u70b9\u51fb\u83dc\u5355\u53ef\u8bbf\u95ee\u64cd\u4f5c\u65e5\u5fd7\u7ba1\u7406\u9875\u9762 admin/auth/operation-logs \u3002","title":"\u6d4b\u8bd5\u6269\u5c55"},{"location":"2.x/extension-dev/#_8","text":"\u73b0\u5728\u6211\u4eec\u7684\u6269\u5c55\u8fd8\u9700\u8981\u4e00\u4e2a\u4e2d\u95f4\u4ef6\u6765\u8bb0\u5f55\u7528\u6237\u7684\u64cd\u4f5c\uff0c\u521b\u5efa\u6587\u4ef6 \u6269\u5c55\u76ee\u5f55/src/Http/Middleware/LogOperation.php \uff0c\u6587\u4ef6\u5185\u5bb9\u70b9\u51fb LogOperation.php \u67e5\u770b\u3002 \u7136\u540e\u6211\u4eec\u9700\u8981\u6ce8\u518c\u8fd9\u4e2a\u4e2d\u95f4\u4ef6\uff0c\u8ba9\u8fd9\u4e2a\u4e2d\u95f4\u4ef6\u751f\u6548\uff0c\u6253\u5f00 \u6269\u5c55\u76ee\u5f55/src/OperationLogServiceProvider.php \uff0c\u7136\u540e\u4fee\u6539\u5185\u5bb9\u5982\u4e0b class OperationLogServiceProvider extends ServiceProvider { protected $middleware = [ 'middle' => [ // \u6ce8\u518c\u4e2d\u95f4\u4ef6 LogOperation::class, ], ]; protected $menu = [ [ 'title' => 'Operation Log', 'uri' => 'auth/operation-logs', ], ]; public function settingForm() { return new Setting($this); } } $middleware \u5c5e\u6027\u4e2d\u6ce8\u518c\u7684\u4e2d\u95f4\u4ef6\u6700\u540e\u4f1a\u5408\u5e76\u5230\u914d\u7f6e\u53c2\u6570 admin.route.middleware \u4e2d\uff0c\u4e2d\u95f4\u4ef6\u6ce8\u518c\u652f\u6301\u4ee5\u4e0b\u4e09\u79cd\u7c7b\u578b\u6ce8\u518c before \u4e2d\u95f4\u4ef6\u4f1a\u5728\u6700\u524d\u9762\uff0c\u4e5f\u5c31\u662f\u6700\u5148\u6267\u884c middle \u4e2d\u95f4\u4ef6\u4f1a\u5728 admin.auth \uff08\u767b\u9646\u9274\u6743\u4e2d\uff09\u548c admin.permission \uff08\u6743\u9650\u5224\u65ad\uff09\u4e24\u4e2a\u4e2d\u95f4\u4ef6 \u4e4b\u95f4 \u6267\u884c after \u4e2d\u95f4\u4ef6\u4f1a\u5728\u6700\u540e\u6267\u884c \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u64cd\u4f5c\u65e5\u5fd7\u8bb0\u5f55\u7528\u6237\u64cd\u4f5c\u65f6\u663e\u7136\u9700\u8981\u8bb0\u5f55\u767b\u9646\u7528\u6237\u7684\u4fe1\u606f\uff0c\u6240\u4ee5\u4e2d\u95f4\u4ef6\u5fc5\u987b\u5728 admin.auth \u4e2d\u95f4\u4ef6\u4e4b\u540e\u6267\u884c\uff0c\u8fd9\u6837\u624d\u80fd\u62ff\u5230\u767b\u9646\u7528\u6237\u6570\u636e\uff1b \u5e76\u4e14\u65e0\u6743\u9650\u7684\u64cd\u4f5c\u4e5f\u9700\u8981\u8bb0\u5f55\uff0c\u6240\u4ee5\u5fc5\u987b\u5728 admin.permission \u4e2d\u95f4\u4ef6\u4e4b\u524d\u6267\u884c\uff0c\u6240\u4ee5\u53ea\u6709\u6ce8\u518c\u4e3a middle \u7c7b\u578b\u7684\u4e2d\u95f4\u4ef6\u624d\u80fd\u6ee1\u8db3\u4e0a\u8ff0\u8981\u6c42\uff01 \u6ce8\u518c\u5b8c\u4e2d\u95f4\u4ef6\u4e4b\u540e\uff0c\u6211\u4eec\u968f\u610f\u8bbf\u95ee\u4e00\u4e0b\u7cfb\u7edf\u4e2d\u7684\u5176\u4ed6\u9875\u9762\uff08\u9664\u4e86\u64cd\u4f5c\u65e5\u5fd7\u7ba1\u7406\u9875\u9762\uff09\uff0c\u7136\u540e\u518d\u8bbf\u95ee\u64cd\u4f5c\u65e5\u5fd7\u7ba1\u7406\u9875\u9762\uff0c\u5c31\u53ef\u4ee5\u770b\u5230\u7528\u6237\u7684\u64cd\u4f5c\u65e5\u5fd7\u4e86\uff0c\u5230\u8fd9\u91cc\u63d2\u4ef6\u57fa\u672c\u5f00\u53d1\u5b8c\u6bd5\u3002","title":"\u6ce8\u518c\u4e2d\u95f4\u4ef6"},{"location":"2.x/extension-dev/#_9","text":"\u5728\u5f53\u524d\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u8ba9\u7528\u6237\u80fd\u914d\u7f6e\u4e00\u4e9b\u81ea\u5b9a\u4e49\u53c2\u6570\uff08\u6bd4\u5982\u914d\u7f6e\u4e0d\u9700\u8981\u8bb0\u5f55\u64cd\u4f5c\u65e5\u5fd7\u7684\u8def\u7531\uff09\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u9700\u8981\u4e00\u4e2a \u914d\u7f6e\u8868\u5355 \u8ba9\u7528\u6237\u80fd\u901a\u8fc7\u9875\u9762\u76f4\u63a5\u914d\u7f6e\u76f8\u5173\u53c2\u6570\uff0c \u6211\u4eec\u9700\u8981\u5728 OperationLogServiceProvider \u7c7b\u91cc\u9762\u7684 settingForm \u8fd4\u56de\u8fd9\u4e2a\u914d\u7f6e\u8868\u5355\u7684\u5bf9\u8c61 class OperationLogServiceProvider extends ServiceProvider { ... // \u8fd4\u56de\u914d\u7f6e\u8868\u5355\u5bf9\u8c61\uff0c\u5982\u679c\u4e0d\u9700\u8981\u4fdd\u5b58\u914d\u7f6e\u53c2\u6570\uff0c\u5219\u8bf7\u5220\u9664\u8fd9\u4e2a\u65b9\u6cd5 public function settingForm() { return new Setting($this); } } \u7136\u540e\u6211\u4eec\u9700\u8981\u4fee\u6539\u914d\u7f6e\u8868\u5355\u7c7b \u6269\u5c55\u76ee\u5f55/src/Setting.php \u5982\u4e0b namespace Dcat\\Admin\\OperationLog; use Dcat\\Admin\\Extend\\Setting as Form; use Dcat\\Admin\\OperationLog\\Models\\OperationLog; use Dcat\\Admin\\Support\\Helper; class Setting extends Form { // \u8fd4\u56de\u8868\u5355\u5f39\u7a97\u6807\u9898 public function title() { return $this->trans('log.title'); } // \u683c\u5f0f\u5316\u5f85\u4fdd\u5b58\u7684\u914d\u7f6e\u53c2\u6570\u503c protected function formatInput(array $input) { // \u8f6c\u5316\u4e3a\u6570\u7ec4\uff0c\u6ce8\u610f\u5982\u679c\u8fd9\u91cc\u4fdd\u5b58\u7684\u65f6\u5019\u662f\u6570\u7ec4\uff0c\u90a3\u4e48\u8bfb\u53d6\u51fa\u6765\u7684\u65f6\u5019\u4e5f\u662f\u6570\u7ec4 $input['except'] = Helper::array($input['except']); $input['allowed_methods'] = Helper::array($input['allowed_methods']); return $input; } public function form() { // \u5b9a\u4e49\u8868\u5355\u5b57\u6bb5 $this->tags('except'); $this->multipleSelect('allowed_methods') ->options(array_combine(OperationLog::$methods, OperationLog::$methods)); $this->tags('secret_fields'); } } \u4ee5\u4e0a\u8bbe\u7f6e\u5b8c\u6210\u4e4b\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u5728\u6269\u5c55\u7ba1\u7406\u9875\u9762\u4fdd\u5b58\u81ea\u5b9a\u4e49\u53c2\u6570\u4e86 \u914d\u7f6e\u53c2\u6570\u8bfb\u53d6\u7528\u6cd5\u5982\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4e2d\u95f4\u4ef6 LogOperation \u4e2d\u4f7f\u7528\u8fd9\u4e9b\u53c2\u6570 use Dcat\\Admin\\OperationLog\\OperationLogServiceProvider; // \u8bfb\u53d6\u914d\u7f6e\u53c2\u6570 $except = OperationLogServiceProvider::setting('except'); $allowedMethods = OperationLogServiceProvider::setting('allowed_methods'); $secretFields = OperationLogServiceProvider::setting('secret_fields');","title":"\u914d\u7f6e\u53c2\u6570\uff08\u8bbe\u7f6e\uff09"},{"location":"2.x/extension-dev/#_10","text":"\u7531\u4e8e\u5f53\u524d\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u6ca1\u6709\u4f7f\u7528\u5230\u670d\u52a1\u6ce8\u518c\u4e0e\u521d\u59cb\u5316\u76f8\u5173\u529f\u80fd\uff0c\u6240\u4ee5\u8fd9\u90e8\u5206\u5185\u5bb9\u5148\u7565\u8fc7\uff0c\u6709\u76f8\u5173\u9700\u8981\u7684\u540c\u5b66\u53ef\u4ee5\u53c2\u8003 \u6269\u5c55 - \u670d\u52a1\u6ce8\u518c\u4e0e\u521d\u59cb\u5316 \u7ae0\u8282\u3002","title":"\u670d\u52a1\u6ce8\u518c\u4e0e\u521d\u59cb\u5316"},{"location":"2.x/extension-dev/#view","text":"\u7531\u4e8e\u5f53\u524d\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u6ca1\u6709\u4f7f\u7528\u5230\u81ea\u5b9a\u4e49\u9759\u6001\u8d44\u6e90\u7684\u529f\u80fd\uff0c\u6240\u4ee5\u8fd9\u90e8\u5206\u5185\u5bb9\u5148\u7565\u8fc7\uff0c\u6709\u76f8\u5173\u9700\u8981\u7684\u540c\u5b66\u53ef\u4ee5\u53c2\u8003 \u6269\u5c55 - \u89c6\u56fe \u7ae0\u8282\u3002","title":"\u89c6\u56fe (view)"},{"location":"2.x/extension-dev/#_11","text":"\u7531\u4e8e\u5f53\u524d\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u6ca1\u6709\u4f7f\u7528\u5230\u81ea\u5b9a\u4e49\u9759\u6001\u8d44\u6e90\u7684\u529f\u80fd\uff0c\u6240\u4ee5\u8fd9\u90e8\u5206\u5185\u5bb9\u5148\u7565\u8fc7\uff0c\u6709\u76f8\u5173\u9700\u8981\u7684\u540c\u5b66\u53ef\u4ee5\u53c2\u8003 \u6269\u5c55 - \u9759\u6001\u8d44\u6e90 \u7ae0\u8282\u3002","title":"\u9759\u6001\u8d44\u6e90"},{"location":"2.x/extension-dev/#composerjson-readmemd","text":"\u4ee3\u7801\u90e8\u5206\u5b8c\u6210\u4e4b\u540e\uff0c\u9700\u8981\u4fee\u6539 composer.json \u91cc\u9762\u7684\u5185\u5bb9\uff0c\u5c06 description \u3001 keywords \u3001 license \u3001 authors \u7b49\u5185\u5bb9\u66ff\u6362\u4e3a\u4f60\u7684\u4fe1\u606f\uff0c\u7136\u540e\u4e0d\u8981\u5fd8\u8bb0\u5b8c\u5584 README.md \uff0c\u8865\u5145\u4f7f\u7528\u6587\u6863\u7b49\u76f8\u5173\u4fe1\u606f\u3002","title":"\u4fee\u6539 composer.json &amp; README.md"},{"location":"2.x/extension-dev/#_12","text":"","title":"\u53d1\u5e03\u6269\u5c55"},{"location":"2.x/extension-dev/#_13","text":"\u6b63\u5f0f\u7248\u53d1\u5e03\u540e\u4f1a\u4e0a\u7ebf\u5e94\u7528\u5e02\u573a\u529f\u80fd\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u628a\u6269\u5c55\u53d1\u5e03\u5230\u5e94\u7528\u5e02\u573a\uff0c\u7136\u540e\u7528\u6237\u5c31\u53ef\u4ee5\u901a\u8fc7\u9875\u9762\u76f4\u63a5\u5b89\u88c5\u4f7f\u7528\uff0c\u656c\u8bf7\u671f\u5f85...","title":"\u4e0a\u4f20\u5e94\u7528\u5e02\u573a"},{"location":"2.x/extension-dev/#github","text":"\u5148\u767b\u5f55\u4f60\u7684Github\uff0c\u521b\u5efa\u4e00\u4e2a\u4ed3\u5e93\uff0c\u7136\u540e\u6309\u7167\u9875\u9762\u4e0a\u7684\u63d0\u793a\u628a\u4f60\u7684\u4ee3\u7801push\u4e0a\u53bb git init git remote add origin https://github.com/<your-name>/<your-repository>.git git add . git commit -am \"Initial commit.\" git push origin master","title":"\u4e0a\u4f20\u5230Github"},{"location":"2.x/extension-dev/#packagistorg","text":"\u63a5\u4e0b\u6765\u5c31\u662f\u53d1\u5e03\u4f60\u7684\u9879\u76ee\u5230 Packagist.org \uff0c\u5982\u679c\u6ca1\u6709\u8d26\u53f7\u7684\u8bdd\uff0c\u5148\u6ce8\u518c\u4e00\u4e2a\uff0c\u7136\u540e\u6253\u5f00\u9876\u90e8\u5bfc\u822a\u7684 Submit , \u586b\u5165\u4ed3\u5e93\u5730\u5740\u63d0\u4ea4 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5f53\u60a8\u63a8\u9001\u65b0\u4ee3\u7801\u65f6\uff0c Packagist.org \u4e0d\u4f1a\u81ea\u52a8\u66f4\u65b0\uff0c\u6240\u4ee5\uff0c\u60a8\u9700\u8981\u521b\u5efa\u4e00\u4e2aGitHub\u670d\u52a1\u94a9\u5b50\uff0c \u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u70b9\u51fb\u9875\u9762\u4e0a\u7684 Update \u6309\u94ae\u624b\u52a8\u66f4\u65b0\u5b83\uff0c\u4f46\u6211\u5efa\u8bae\u81ea\u52a8\u6267\u884c\u8fd9\u4e2a\u8fc7\u7a0b \u63d0\u4ea4\u4e4b\u540e\uff0c\u7531\u4e8e\u5404\u5730\u7684\u955c\u50cf\u540c\u6b65\u65f6\u95f4\u7684\u5ef6\u8fdf\uff0c\u53ef\u80fd\u5728\u7528 composer \u5b89\u88c5\u7684\u65f6\u5019\uff0c\u4f1a\u6682\u65f6\u627e\u4e0d\u5230\u4f60\u7684\u9879\u76ee\uff0c\u8fd9\u4e2a\u65f6\u5019\u53ef\u80fd\u9700\u8981\u7b49\u5f85\u540c\u6b65\u5b8c\u6210 \u53d1\u5e03\u5b8c\u6210\u4e4b\u540e\u5c31\u53ef\u4ee5\u901a\u8fc7 composer \u5b89\u88c5\u4f60\u7684\u6269\u5c55\u4e86","title":"\u53d1\u5e03\u5230Packagist.org"},{"location":"2.x/extension-f/","text":"\u6269\u5c55\u57fa\u672c\u4f7f\u7528 \u57fa\u672c\u4f7f\u7528 \u8bbe\u7f6e\u6269\u5c55\u76f8\u5173\u76ee\u5f55\u8bfb\u5199\u6743\u9650 \u5728\u4f7f\u7528\u6269\u5c55\u529f\u80fd\u4e4b\u524d\uff0c\u9700\u8981\u5148\u4fdd\u8bc1\u6240\u5728\u7528\u6237\u62e5\u6709\u6269\u5c55\u76f8\u5173\u76ee\u5f55\u7684\u8bfb\u5199\u6743\u9650\uff0c\u5426\u5219\u53ef\u80fd\u9020\u6210\u6269\u5c55\u5b89\u88c5\u5931\u8d25\uff0c\u8bf7\u4fdd\u8bc1\u62e5\u6709\u4ee5\u4e0b\u51e0\u4e2a\u76ee\u5f55\u7684\u8bfb\u5199\u6743\u9650 \u9879\u76ee\u76ee\u5f55/dcat-admin-extensions \u6269\u5c55\u7684\u5b89\u88c5\u76ee\u5f55\uff0c\u53ef\u4ee5\u6839\u636e\u914d\u7f6e\u53c2\u6570 admin.extensions.dir \u8fdb\u884c\u66f4\u6539 public/vendor \u6269\u5c55\u9759\u6001\u8d44\u6e90\u53d1\u5e03\u76ee\u5f55 resources/lang \u8bed\u8a00\u5305\u76ee\u5f55 \u6269\u5c55\u5b89\u88c5 Dcat Admin \u4e2d\u6269\u5c55\u652f\u6301\u4ee5\u4e0b\u4e09\u79cd\u5b89\u88c5\u65b9\u5f0f\uff0c\u5b89\u88c5\u6210\u529f\u540e\u5747\u80fd\u5728\u6269\u5c55\u7ba1\u7406\u9875\u9762 admin/auth/extensions \u770b\u5230\u76f8\u5173\u6269\u5c55\u4fe1\u606f 1.\u901a\u8fc7\u5e94\u7528\u5e02\u573a\u5b89\u88c5 \u656c\u8bf7\u671f\u5f85... 2.\u672c\u5730\u5b89\u88c5 \u4e0b\u8f7d\u6269\u5c55\u7684 zip \u538b\u7f29\u5305\uff0c\u6ce8\u610f\u5fc5\u987b\u662f zip \u683c\u5f0f\uff0c\u7136\u540e\u6253\u5f00\u6269\u5c55\u7ba1\u7406\u9875\u9762 admin/auth/extensions \uff0c\u7136\u540e\u70b9\u51fb\u8868\u683c\u5de5\u5177\u680f\u7684 \u672c\u5730\u5b89\u88c5 \u6309\u94ae\u4e0a\u4f20\u63d0\u4ea4\u5373\u53ef\u3002 3.composer\u5b89\u88c5 \u6839\u636e\u6269\u5c55\u5f00\u53d1\u8005\u6587\u6863\u63d0\u4f9b\u7684\u8bf4\u660e\uff0c\u76f4\u63a5\u4f7f\u7528composer\u5b89\u88c5\u5373\u53ef composer require {\u6269\u5c55\u540d\u79f0} \u542f\u7528\u6269\u5c55 \u5b89\u88c5\u4e4b\u540e\uff0c\u9700\u8981\u5728\u6269\u5c55\u7ba1\u7406\u9875\u9762\u70b9\u51fb \u66f4\u65b0\u81f3xxx\u7248\u672c \u4ee5\u53ca\u66f4\u65b0 \u542f\u7528 \u6309\u94ae\u4e4b\u540e\u65b9\u53ef\u6b63\u5e38\u4f7f\u7528 \u5f00\u53d1\u6269\u5c55 \u8be6\u7ec6\u7684\u5f00\u53d1\u6559\u7a0b\uff0c\u8bf7\u53c2\u8003\u6587\u6863 \u5f00\u53d1\u6269\u5c55 \u7ae0\u8282\u3002 \u670d\u52a1\u6ce8\u518c\u4e0e\u521d\u59cb\u5316 {tip} \u5982\u679c\u4f60\u5bf9\u670d\u52a1\u63d0\u4f9b\u8005\u7684\u6982\u5ff5\u5e76\u4e0d\u719f\u6089\uff0c\u8bf7\u5148\u524d\u5f80 Laravel\u6587\u6863 - \u670d\u52a1\u63d0\u4f9b\u8005 \u5b66\u4e60\u3002 \u6269\u5c55\u7684 ServiceProvider \u7c7b\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a \u670d\u52a1\u63d0\u4f9b\u8005 \uff0c\u552f\u4e00\u7684\u533a\u522b\u662f\u6269\u5c55\u7684 ServiceProvider \u4e0d\u80fd\u91cd\u5199 boot \u65b9\u6cd5\uff0c\u9700\u8981\u901a\u8fc7 init \u4ee3\u66ff boot \u65b9\u6cd5\u3002 \u7248\u672c\u7ba1\u7406 \u6bcf\u4e2a\u6269\u5c55\u90fd\u6709\u4e00\u4e2a version.php \u6587\u4ef6\uff0c\u901a\u8fc7\u8fd9\u4e2a\u6587\u4ef6\u53ef\u4ee5\u5b9e\u73b0\u7248\u672c\u7ba1\u7406\u529f\u80fd\uff0c\u6bcf\u6b21\u53d1\u5e03\u65b0\u7248\u672c\u6211\u4eec\u53ea\u9700\u8981\u5f80\u8fd9\u4e2a\u6587\u4ef6\u6dfb\u52a0\u65b0\u7684\u7248\u672c\u53f7\u4ee5\u53ca\u76f8\u5173\u63cf\u8ff0\u5373\u53ef <?php return [ // key \u662f\u7248\u672c\u53f7\uff0c\u6ce8\u610f\u8fd9\u91cc\u4e0d\u8981\u5e26 v \u524d\u7f00\uff01 '1.0.0' => [ '\u7248\u672c\u63cf\u8ff0\u4fe1\u606f\uff0c\u53ef\u4ee5\u6709\u591a\u6761', '\u63cf\u8ff02...', 'create_operation_log.php', // \u7248\u672c\u8fc1\u79fb\u6587\u4ef6\uff0c\u53ef\u4ee5\u6709\u591a\u6761 ], '1.0.1' => [ '\u7248\u672c\u63cf\u8ff0\u4fe1\u606f\uff0c\u53ef\u4ee5\u6709\u591a\u6761', 'update_operation_log.php', // \u7248\u672c\u8fc1\u79fb\u6587\u4ef6 ], ... ]; \u5347\u7ea7\u7248\u672c \u5b89\u88c5\u4e86\u65b0\u7684\u7248\u672c\u4ee3\u7801\u4e4b\u540e\uff0c\u53ef\u4ee5\u5728\u6269\u5c55\u7ba1\u7406\u9875\u9762 admin/auth/extensions \u4e2d\u70b9\u51fb\u66f4\u65b0\u6309\u94ae\u8fdb\u884c\u5347\u7ea7\u3002 \u70b9\u51fb\u5347\u7ea7\u540e\u5982\u679c\u6709\u8fc1\u79fb\u6587\u4ef6\u5219\u4f1a\u8fd0\u884c\u8fc1\u79fb\u6587\u4ef6\uff0c\u5982\u679c\u6709\u83dc\u5355\u5219\u4f1a\u91cd\u65b0\u521b\u5efa\u83dc\u5355\uff0c\u5982\u679c\u6709\u9759\u6001\u8d44\u6e90\u5219\u4f1a\u81ea\u52a8\u91cd\u65b0\u53d1\u5e03\u8d44\u6e90\u6587\u4ef6\u3002 \u56de\u6eda\u7248\u672c \u901a\u8fc7\u547d\u4ee4 php artisan admin:ext-rollback {\u6269\u5c55\u540d\u79f0} {\u7248\u672c\u53f7} \u53ef\u4ee5\u56de\u6eda\u5230\u6307\u5b9a\u7248\u672c\uff0c\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u56de\u6eda\u6269\u5c55\u4f1a\u5220\u9664\u6570\u636e\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u4e22\u5931\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff01\uff01\uff01 \u5378\u8f7d \u5982\u679c\u4f60\u7684\u6269\u5c55\u5df2\u5b89\u88c5\uff0c\u901a\u8fc7\u6269\u5c55\u9875\u9762 admin/auth/extensions \u53ef\u4ee5\u6269\u5c55\u8fdb\u884c\u5378\u8f7d\uff0c\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5378\u8f7d\u6269\u5c55\u4f1a\u5220\u9664\u6570\u636e\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u4e22\u5931\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff01\uff01\uff01 \u5982\u679c\u4f60\u60f3\u5b8c\u5168\u79fb\u9664\u6269\u5c55\u7684\u4ee3\u7801\uff0c\u5219\u76f4\u63a5\u5220\u9664 dcat-admin-extensions \u76ee\u5f55\u4e0b\u5bf9\u5e94\u7684\u6269\u5c55\u6587\u4ef6\u5939\u5373\u53ef\u3002 \u89c6\u56fe (view) \u89c6\u56fe\u7684\u9ed8\u8ba4\u76ee\u5f55\u4e3a \u6269\u5c55\u76ee\u5f55/resources/view \u251c\u2500\u2500 resources \u2502 \u251c\u2500\u2500 ... \u2502 \u2514\u2500\u2500 views # \u89c6\u56fe\u76ee\u5f55 \u2502 \u2514\u2500\u2500 index.blade.php # \u89c6\u56fe\u793a\u4f8b\u6587\u4ef6 \u53ea\u8981\u628a\u89c6\u56fe\u6587\u4ef6\u653e\u5728\u4e0a\u8ff0\u76ee\u5f55\uff0c\u7cfb\u7edf\u5c31\u4f1a\u81ea\u52a8\u7ed9\u89c6\u56fe\u76ee\u5f55\u6ce8\u518c\u522b\u540d\uff0c\u522b\u540d\u4e0e\u6269\u5c55\u540d\u79f0\u76f8\u540c\u3002\u5047\u8bbe\u4f60\u7684\u6269\u5c55\u5305\u540d\u79f0\u4e3a dcat-admin/form-step \uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u52a0\u8f7d\u89c6\u56fe return view('dcat-admin.form-step::index'); \u9759\u6001\u8d44\u6e90 \u5047\u8bbe\u4f60\u7684\u6269\u5c55\u5305\u540d\u79f0\u4e3a dcat-admin/form-step \uff0c\u5982\u679c\u4f60\u7684\u6269\u5c55\u4e2d\u5305\u542b\u9759\u6001\u8d44\u6e90\u5982\u4e0b\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u901a\u8fc7 FormStepServiceProvider \u4e0a\u7684 $js \u548c $css \u5c5e\u6027\u4e3a\u4f60\u7684\u9759\u6001\u8d44\u6e90\u6ce8\u518c\u522b\u540d \u2514\u2500\u2500 resources \u2514\u2500\u2500\u2500 assets \u251c\u2500\u2500 css \u2502 \u2514\u2500\u2500 index.css \u2514\u2500\u2500 js \u2514\u2500\u2500 index.js class FormStepServiceProvider extends ServiceProvider { protected $js = [ 'js/index.js', ]; protected $css = [ 'css/index.css', ]; } \u7136\u540e\u5c31\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u6cd5\u52a0\u8f7d\u9759\u6001\u8d44\u6e90 use Dcat\\Admin\\Admin; // \u76f4\u63a5\u7528\u4f60\u7684 \u5305\u540d \u5373\u53ef\u5f15\u5165\u6269\u5c55\u5305\u7684\u9759\u6001\u8d44\u6e90 Admin::requireAssets('@dcat-admin.form-step'); \u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u4e0d\u901a\u8fc7 $js \u548c $css \u5c5e\u6027\u6ce8\u518c\u522b\u540d\uff0c\u90a3\u4e48\u4e5f\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u65b9\u6cd5\u76f4\u63a5\u52a0\u8f7d\u9759\u6001\u8d44\u6e90\uff0c\u6548\u679c\u662f\u4e00\u6837\u7684 // \u4e0a\u9762\u7684\u5199\u6cd5\u76f8\u5f53\u4e8e Admin::js(['@dcat-admin.form-step/js/index.js']); Admin::css(['@dcat-admin.form-step/css/index.css']);","title":"\u6269\u5c55\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/extension-f/#_1","text":"","title":"\u6269\u5c55\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/extension-f/#_2","text":"","title":"\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/extension-f/#_3","text":"\u5728\u4f7f\u7528\u6269\u5c55\u529f\u80fd\u4e4b\u524d\uff0c\u9700\u8981\u5148\u4fdd\u8bc1\u6240\u5728\u7528\u6237\u62e5\u6709\u6269\u5c55\u76f8\u5173\u76ee\u5f55\u7684\u8bfb\u5199\u6743\u9650\uff0c\u5426\u5219\u53ef\u80fd\u9020\u6210\u6269\u5c55\u5b89\u88c5\u5931\u8d25\uff0c\u8bf7\u4fdd\u8bc1\u62e5\u6709\u4ee5\u4e0b\u51e0\u4e2a\u76ee\u5f55\u7684\u8bfb\u5199\u6743\u9650 \u9879\u76ee\u76ee\u5f55/dcat-admin-extensions \u6269\u5c55\u7684\u5b89\u88c5\u76ee\u5f55\uff0c\u53ef\u4ee5\u6839\u636e\u914d\u7f6e\u53c2\u6570 admin.extensions.dir \u8fdb\u884c\u66f4\u6539 public/vendor \u6269\u5c55\u9759\u6001\u8d44\u6e90\u53d1\u5e03\u76ee\u5f55 resources/lang \u8bed\u8a00\u5305\u76ee\u5f55","title":"\u8bbe\u7f6e\u6269\u5c55\u76f8\u5173\u76ee\u5f55\u8bfb\u5199\u6743\u9650"},{"location":"2.x/extension-f/#_4","text":"Dcat Admin \u4e2d\u6269\u5c55\u652f\u6301\u4ee5\u4e0b\u4e09\u79cd\u5b89\u88c5\u65b9\u5f0f\uff0c\u5b89\u88c5\u6210\u529f\u540e\u5747\u80fd\u5728\u6269\u5c55\u7ba1\u7406\u9875\u9762 admin/auth/extensions \u770b\u5230\u76f8\u5173\u6269\u5c55\u4fe1\u606f","title":"\u6269\u5c55\u5b89\u88c5"},{"location":"2.x/extension-f/#1","text":"\u656c\u8bf7\u671f\u5f85...","title":"1.\u901a\u8fc7\u5e94\u7528\u5e02\u573a\u5b89\u88c5"},{"location":"2.x/extension-f/#2","text":"\u4e0b\u8f7d\u6269\u5c55\u7684 zip \u538b\u7f29\u5305\uff0c\u6ce8\u610f\u5fc5\u987b\u662f zip \u683c\u5f0f\uff0c\u7136\u540e\u6253\u5f00\u6269\u5c55\u7ba1\u7406\u9875\u9762 admin/auth/extensions \uff0c\u7136\u540e\u70b9\u51fb\u8868\u683c\u5de5\u5177\u680f\u7684 \u672c\u5730\u5b89\u88c5 \u6309\u94ae\u4e0a\u4f20\u63d0\u4ea4\u5373\u53ef\u3002","title":"2.\u672c\u5730\u5b89\u88c5"},{"location":"2.x/extension-f/#3composer","text":"\u6839\u636e\u6269\u5c55\u5f00\u53d1\u8005\u6587\u6863\u63d0\u4f9b\u7684\u8bf4\u660e\uff0c\u76f4\u63a5\u4f7f\u7528composer\u5b89\u88c5\u5373\u53ef composer require {\u6269\u5c55\u540d\u79f0}","title":"3.composer\u5b89\u88c5"},{"location":"2.x/extension-f/#_5","text":"\u5b89\u88c5\u4e4b\u540e\uff0c\u9700\u8981\u5728\u6269\u5c55\u7ba1\u7406\u9875\u9762\u70b9\u51fb \u66f4\u65b0\u81f3xxx\u7248\u672c \u4ee5\u53ca\u66f4\u65b0 \u542f\u7528 \u6309\u94ae\u4e4b\u540e\u65b9\u53ef\u6b63\u5e38\u4f7f\u7528","title":"\u542f\u7528\u6269\u5c55"},{"location":"2.x/extension-f/#_6","text":"\u8be6\u7ec6\u7684\u5f00\u53d1\u6559\u7a0b\uff0c\u8bf7\u53c2\u8003\u6587\u6863 \u5f00\u53d1\u6269\u5c55 \u7ae0\u8282\u3002","title":"\u5f00\u53d1\u6269\u5c55"},{"location":"2.x/extension-f/#_7","text":"{tip} \u5982\u679c\u4f60\u5bf9\u670d\u52a1\u63d0\u4f9b\u8005\u7684\u6982\u5ff5\u5e76\u4e0d\u719f\u6089\uff0c\u8bf7\u5148\u524d\u5f80 Laravel\u6587\u6863 - \u670d\u52a1\u63d0\u4f9b\u8005 \u5b66\u4e60\u3002 \u6269\u5c55\u7684 ServiceProvider \u7c7b\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a \u670d\u52a1\u63d0\u4f9b\u8005 \uff0c\u552f\u4e00\u7684\u533a\u522b\u662f\u6269\u5c55\u7684 ServiceProvider \u4e0d\u80fd\u91cd\u5199 boot \u65b9\u6cd5\uff0c\u9700\u8981\u901a\u8fc7 init \u4ee3\u66ff boot \u65b9\u6cd5\u3002","title":"\u670d\u52a1\u6ce8\u518c\u4e0e\u521d\u59cb\u5316"},{"location":"2.x/extension-f/#_8","text":"\u6bcf\u4e2a\u6269\u5c55\u90fd\u6709\u4e00\u4e2a version.php \u6587\u4ef6\uff0c\u901a\u8fc7\u8fd9\u4e2a\u6587\u4ef6\u53ef\u4ee5\u5b9e\u73b0\u7248\u672c\u7ba1\u7406\u529f\u80fd\uff0c\u6bcf\u6b21\u53d1\u5e03\u65b0\u7248\u672c\u6211\u4eec\u53ea\u9700\u8981\u5f80\u8fd9\u4e2a\u6587\u4ef6\u6dfb\u52a0\u65b0\u7684\u7248\u672c\u53f7\u4ee5\u53ca\u76f8\u5173\u63cf\u8ff0\u5373\u53ef <?php return [ // key \u662f\u7248\u672c\u53f7\uff0c\u6ce8\u610f\u8fd9\u91cc\u4e0d\u8981\u5e26 v \u524d\u7f00\uff01 '1.0.0' => [ '\u7248\u672c\u63cf\u8ff0\u4fe1\u606f\uff0c\u53ef\u4ee5\u6709\u591a\u6761', '\u63cf\u8ff02...', 'create_operation_log.php', // \u7248\u672c\u8fc1\u79fb\u6587\u4ef6\uff0c\u53ef\u4ee5\u6709\u591a\u6761 ], '1.0.1' => [ '\u7248\u672c\u63cf\u8ff0\u4fe1\u606f\uff0c\u53ef\u4ee5\u6709\u591a\u6761', 'update_operation_log.php', // \u7248\u672c\u8fc1\u79fb\u6587\u4ef6 ], ... ];","title":"\u7248\u672c\u7ba1\u7406"},{"location":"2.x/extension-f/#_9","text":"\u5b89\u88c5\u4e86\u65b0\u7684\u7248\u672c\u4ee3\u7801\u4e4b\u540e\uff0c\u53ef\u4ee5\u5728\u6269\u5c55\u7ba1\u7406\u9875\u9762 admin/auth/extensions \u4e2d\u70b9\u51fb\u66f4\u65b0\u6309\u94ae\u8fdb\u884c\u5347\u7ea7\u3002 \u70b9\u51fb\u5347\u7ea7\u540e\u5982\u679c\u6709\u8fc1\u79fb\u6587\u4ef6\u5219\u4f1a\u8fd0\u884c\u8fc1\u79fb\u6587\u4ef6\uff0c\u5982\u679c\u6709\u83dc\u5355\u5219\u4f1a\u91cd\u65b0\u521b\u5efa\u83dc\u5355\uff0c\u5982\u679c\u6709\u9759\u6001\u8d44\u6e90\u5219\u4f1a\u81ea\u52a8\u91cd\u65b0\u53d1\u5e03\u8d44\u6e90\u6587\u4ef6\u3002","title":"\u5347\u7ea7\u7248\u672c"},{"location":"2.x/extension-f/#_10","text":"\u901a\u8fc7\u547d\u4ee4 php artisan admin:ext-rollback {\u6269\u5c55\u540d\u79f0} {\u7248\u672c\u53f7} \u53ef\u4ee5\u56de\u6eda\u5230\u6307\u5b9a\u7248\u672c\uff0c\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u56de\u6eda\u6269\u5c55\u4f1a\u5220\u9664\u6570\u636e\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u4e22\u5931\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff01\uff01\uff01","title":"\u56de\u6eda\u7248\u672c"},{"location":"2.x/extension-f/#_11","text":"\u5982\u679c\u4f60\u7684\u6269\u5c55\u5df2\u5b89\u88c5\uff0c\u901a\u8fc7\u6269\u5c55\u9875\u9762 admin/auth/extensions \u53ef\u4ee5\u6269\u5c55\u8fdb\u884c\u5378\u8f7d\uff0c\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5378\u8f7d\u6269\u5c55\u4f1a\u5220\u9664\u6570\u636e\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u4e22\u5931\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff01\uff01\uff01 \u5982\u679c\u4f60\u60f3\u5b8c\u5168\u79fb\u9664\u6269\u5c55\u7684\u4ee3\u7801\uff0c\u5219\u76f4\u63a5\u5220\u9664 dcat-admin-extensions \u76ee\u5f55\u4e0b\u5bf9\u5e94\u7684\u6269\u5c55\u6587\u4ef6\u5939\u5373\u53ef\u3002","title":"\u5378\u8f7d"},{"location":"2.x/extension-f/#view","text":"\u89c6\u56fe\u7684\u9ed8\u8ba4\u76ee\u5f55\u4e3a \u6269\u5c55\u76ee\u5f55/resources/view \u251c\u2500\u2500 resources \u2502 \u251c\u2500\u2500 ... \u2502 \u2514\u2500\u2500 views # \u89c6\u56fe\u76ee\u5f55 \u2502 \u2514\u2500\u2500 index.blade.php # \u89c6\u56fe\u793a\u4f8b\u6587\u4ef6 \u53ea\u8981\u628a\u89c6\u56fe\u6587\u4ef6\u653e\u5728\u4e0a\u8ff0\u76ee\u5f55\uff0c\u7cfb\u7edf\u5c31\u4f1a\u81ea\u52a8\u7ed9\u89c6\u56fe\u76ee\u5f55\u6ce8\u518c\u522b\u540d\uff0c\u522b\u540d\u4e0e\u6269\u5c55\u540d\u79f0\u76f8\u540c\u3002\u5047\u8bbe\u4f60\u7684\u6269\u5c55\u5305\u540d\u79f0\u4e3a dcat-admin/form-step \uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u52a0\u8f7d\u89c6\u56fe return view('dcat-admin.form-step::index');","title":"\u89c6\u56fe (view)"},{"location":"2.x/extension-f/#_12","text":"\u5047\u8bbe\u4f60\u7684\u6269\u5c55\u5305\u540d\u79f0\u4e3a dcat-admin/form-step \uff0c\u5982\u679c\u4f60\u7684\u6269\u5c55\u4e2d\u5305\u542b\u9759\u6001\u8d44\u6e90\u5982\u4e0b\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u901a\u8fc7 FormStepServiceProvider \u4e0a\u7684 $js \u548c $css \u5c5e\u6027\u4e3a\u4f60\u7684\u9759\u6001\u8d44\u6e90\u6ce8\u518c\u522b\u540d \u2514\u2500\u2500 resources \u2514\u2500\u2500\u2500 assets \u251c\u2500\u2500 css \u2502 \u2514\u2500\u2500 index.css \u2514\u2500\u2500 js \u2514\u2500\u2500 index.js class FormStepServiceProvider extends ServiceProvider { protected $js = [ 'js/index.js', ]; protected $css = [ 'css/index.css', ]; } \u7136\u540e\u5c31\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u6cd5\u52a0\u8f7d\u9759\u6001\u8d44\u6e90 use Dcat\\Admin\\Admin; // \u76f4\u63a5\u7528\u4f60\u7684 \u5305\u540d \u5373\u53ef\u5f15\u5165\u6269\u5c55\u5305\u7684\u9759\u6001\u8d44\u6e90 Admin::requireAssets('@dcat-admin.form-step'); \u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u4e0d\u901a\u8fc7 $js \u548c $css \u5c5e\u6027\u6ce8\u518c\u522b\u540d\uff0c\u90a3\u4e48\u4e5f\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u65b9\u6cd5\u76f4\u63a5\u52a0\u8f7d\u9759\u6001\u8d44\u6e90\uff0c\u6548\u679c\u662f\u4e00\u6837\u7684 // \u4e0a\u9762\u7684\u5199\u6cd5\u76f8\u5f53\u4e8e Admin::js(['@dcat-admin.form-step/js/index.js']); Admin::css(['@dcat-admin.form-step/css/index.css']);","title":"\u9759\u6001\u8d44\u6e90"},{"location":"2.x/extension-helpers/","text":"\u5f00\u53d1\u5de5\u5177 \u5728\u6700\u65b0\u7684\u7248\u672c\u4e2d\u65b0\u589e\u4e86\u9762\u5411\u5f00\u53d1\u4eba\u5458\u7684\u5e2e\u52a9\u5de5\u5177\uff0c\u80fd\u5728\u5f00\u53d1\u4e2d\u63d0\u4f9b\u5e2e\u52a9\u63d0\u9ad8\u6548\u7387\uff0c\u76ee\u524d\u63d0\u4f9b \u811a\u624b\u67b6 \uff0c \u6570\u636e\u5e93\u547d\u4ee4\u884c \u548c artisan\u547d\u4ee4\u884c \u4e09\u4e2a\u5de5\u5177\uff0c\u5982\u679c\u6709\u66f4\u597d\u7684\u5176\u5b83\u5b9e\u7528\u5de5\u5177\u7684\u60f3\u6cd5\uff0c\u6b22\u8fce\u63d0\u4f9b\u5efa\u8bae\u3002 \u5b89\u88c5\uff1a composer require dcat-admin-ext/helpers php artisan admin:import helpers {tip} \u5de5\u5177\u7684\u90e8\u5206\u529f\u80fd\u4f1a\u5728\u9879\u76ee\u4e2d\u521b\u5efa\u6216\u5220\u9664\u6587\u4ef6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u6587\u4ef6\u6216\u76ee\u5f55\u6743\u9650\u7684\u95ee\u9898\uff0c\u8fd9\u4e2a\u95ee\u9898\u9700\u8981\u81ea\u884c\u89e3\u51b3\u3002 \u53e6\u5916\u90e8\u5206\u6570\u636e\u5e93\u548cartisan\u547d\u4ee4\u65e0\u6cd5\u5728web\u73af\u5883\u4e0b\u4f7f\u7528\u3002 \u811a\u624b\u67b6\u5de5\u5177 \u811a\u624b\u67b6\u5de5\u5177\u80fd\u5e2e\u4f60\u4e00\u952e\u751f\u6210\u63a7\u5236\u5668\u3001\u6a21\u578b\u3001\u8fc1\u79fb\u6587\u4ef6\uff0c\u5e76\u8fd0\u884c\u8fc1\u79fb\u6587\u4ef6\uff0c\u8bbf\u95ee http://localhost/admin/helpers/scaffold \u6253\u5f00\u3002 \u5176\u4e2d\u8bbe\u7f6e\u8fc1\u79fb\u8868\u7ed3\u6784\u7684\u65f6\u5019\uff0c\u4e3b\u952e\u5b57\u6bb5\u662f\u81ea\u52a8\u751f\u6210\u7684\u4e0d\u9700\u8981\u586b\u5199\u3002 \u6570\u636e\u5e93\u547d\u4ee4\u884c \u6570\u636e\u5e93\u547d\u4ee4\u884c\u5de5\u5177\u7684web\u96c6\u6210\uff0c\u76ee\u524d\u652f\u6301 mysql \u3001 mongodb \u548c redis \uff0c\u8bbf\u95ee http://localhost/admin/helpers/terminal/database \u6253\u5f00\u3002 \u5728\u53f3\u4e0a\u89d2\u7684 select \u9009\u62e9\u6846\u5207\u6362\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u7136\u540e\u5728\u5e95\u90e8\u7684\u8f93\u5165\u6846\u8f93\u5165\u5bf9\u5e94\u6570\u636e\u5e93\u7684\u67e5\u8be2\u8bed\u53e5\u7136\u540e\u56de\u8f66\uff0c\u5c31\u80fd\u5f97\u5230\u67e5\u8be2\u7ed3\u679c\uff1a \u5b9e\u7528\u65b9\u5f0f\u548c\u7ec8\u7aef\u4e0a\u64cd\u4f5c\u6570\u636e\u5e93\u662f\u4e00\u81f4\u7684\uff0c\u53ef\u4ee5\u8fd0\u884c\u6240\u9009\u62e9\u6570\u636e\u5e93\u7684\u6240\u652f\u6301\u7684\u67e5\u8be2\u8bed\u53e5\u3002 artisan\u547d\u4ee4\u884c\u5de5\u5177 Laravel \u7684 artisan \u547d\u4ee4\u7684web\u5b9e\u73b0\uff0c\u53ef\u4ee5\u5728\u4e0a\u9762\u8fd0\u884cartisan\u547d\u4ee4\uff0c\u8bbf\u95ee http://localhost/admin/helpers/terminal/artisan \u6253\u5f00\u3002 \u8def\u7531\u5217\u8868 \u8fd9\u4e2a\u5de5\u5177\u80fd\u7528\u7528\u6bd4\u8f83\u76f4\u89c2\u7684\u5c55\u73b0\u51fa\u7cfb\u7edf\u7684\u6240\u6709\u8def\u7531\uff0c\u5305\u62ec\u8def\u7531\u7684uri\u3001\u65b9\u6cd5\u548c\u4e2d\u95f4\u4ef6\u7b49\uff0c\u8fd8\u80fd\u67e5\u8be2\u8def\u7531\u3002\u8bbf\u95ee http://localhost/admin/helpers/routes \u6253\u5f00\u3002","title":"\u5f00\u53d1\u5de5\u5177"},{"location":"2.x/extension-helpers/#_1","text":"\u5728\u6700\u65b0\u7684\u7248\u672c\u4e2d\u65b0\u589e\u4e86\u9762\u5411\u5f00\u53d1\u4eba\u5458\u7684\u5e2e\u52a9\u5de5\u5177\uff0c\u80fd\u5728\u5f00\u53d1\u4e2d\u63d0\u4f9b\u5e2e\u52a9\u63d0\u9ad8\u6548\u7387\uff0c\u76ee\u524d\u63d0\u4f9b \u811a\u624b\u67b6 \uff0c \u6570\u636e\u5e93\u547d\u4ee4\u884c \u548c artisan\u547d\u4ee4\u884c \u4e09\u4e2a\u5de5\u5177\uff0c\u5982\u679c\u6709\u66f4\u597d\u7684\u5176\u5b83\u5b9e\u7528\u5de5\u5177\u7684\u60f3\u6cd5\uff0c\u6b22\u8fce\u63d0\u4f9b\u5efa\u8bae\u3002 \u5b89\u88c5\uff1a composer require dcat-admin-ext/helpers php artisan admin:import helpers {tip} \u5de5\u5177\u7684\u90e8\u5206\u529f\u80fd\u4f1a\u5728\u9879\u76ee\u4e2d\u521b\u5efa\u6216\u5220\u9664\u6587\u4ef6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u6587\u4ef6\u6216\u76ee\u5f55\u6743\u9650\u7684\u95ee\u9898\uff0c\u8fd9\u4e2a\u95ee\u9898\u9700\u8981\u81ea\u884c\u89e3\u51b3\u3002 \u53e6\u5916\u90e8\u5206\u6570\u636e\u5e93\u548cartisan\u547d\u4ee4\u65e0\u6cd5\u5728web\u73af\u5883\u4e0b\u4f7f\u7528\u3002","title":"\u5f00\u53d1\u5de5\u5177"},{"location":"2.x/extension-helpers/#_2","text":"\u811a\u624b\u67b6\u5de5\u5177\u80fd\u5e2e\u4f60\u4e00\u952e\u751f\u6210\u63a7\u5236\u5668\u3001\u6a21\u578b\u3001\u8fc1\u79fb\u6587\u4ef6\uff0c\u5e76\u8fd0\u884c\u8fc1\u79fb\u6587\u4ef6\uff0c\u8bbf\u95ee http://localhost/admin/helpers/scaffold \u6253\u5f00\u3002 \u5176\u4e2d\u8bbe\u7f6e\u8fc1\u79fb\u8868\u7ed3\u6784\u7684\u65f6\u5019\uff0c\u4e3b\u952e\u5b57\u6bb5\u662f\u81ea\u52a8\u751f\u6210\u7684\u4e0d\u9700\u8981\u586b\u5199\u3002","title":"\u811a\u624b\u67b6\u5de5\u5177"},{"location":"2.x/extension-helpers/#_3","text":"\u6570\u636e\u5e93\u547d\u4ee4\u884c\u5de5\u5177\u7684web\u96c6\u6210\uff0c\u76ee\u524d\u652f\u6301 mysql \u3001 mongodb \u548c redis \uff0c\u8bbf\u95ee http://localhost/admin/helpers/terminal/database \u6253\u5f00\u3002 \u5728\u53f3\u4e0a\u89d2\u7684 select \u9009\u62e9\u6846\u5207\u6362\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u7136\u540e\u5728\u5e95\u90e8\u7684\u8f93\u5165\u6846\u8f93\u5165\u5bf9\u5e94\u6570\u636e\u5e93\u7684\u67e5\u8be2\u8bed\u53e5\u7136\u540e\u56de\u8f66\uff0c\u5c31\u80fd\u5f97\u5230\u67e5\u8be2\u7ed3\u679c\uff1a \u5b9e\u7528\u65b9\u5f0f\u548c\u7ec8\u7aef\u4e0a\u64cd\u4f5c\u6570\u636e\u5e93\u662f\u4e00\u81f4\u7684\uff0c\u53ef\u4ee5\u8fd0\u884c\u6240\u9009\u62e9\u6570\u636e\u5e93\u7684\u6240\u652f\u6301\u7684\u67e5\u8be2\u8bed\u53e5\u3002","title":"\u6570\u636e\u5e93\u547d\u4ee4\u884c"},{"location":"2.x/extension-helpers/#artisan","text":"Laravel \u7684 artisan \u547d\u4ee4\u7684web\u5b9e\u73b0\uff0c\u53ef\u4ee5\u5728\u4e0a\u9762\u8fd0\u884cartisan\u547d\u4ee4\uff0c\u8bbf\u95ee http://localhost/admin/helpers/terminal/artisan \u6253\u5f00\u3002","title":"artisan\u547d\u4ee4\u884c\u5de5\u5177"},{"location":"2.x/extension-helpers/#_4","text":"\u8fd9\u4e2a\u5de5\u5177\u80fd\u7528\u7528\u6bd4\u8f83\u76f4\u89c2\u7684\u5c55\u73b0\u51fa\u7cfb\u7edf\u7684\u6240\u6709\u8def\u7531\uff0c\u5305\u62ec\u8def\u7531\u7684uri\u3001\u65b9\u6cd5\u548c\u4e2d\u95f4\u4ef6\u7b49\uff0c\u8fd8\u80fd\u67e5\u8be2\u8def\u7531\u3002\u8bbf\u95ee http://localhost/admin/helpers/routes \u6253\u5f00\u3002","title":"\u8def\u7531\u5217\u8868"},{"location":"2.x/extension-theme/","text":"\u4e3b\u9898\u5f00\u53d1","title":"\u4e3b\u9898\u5f00\u53d1"},{"location":"2.x/extension-theme/#_1","text":"","title":"\u4e3b\u9898\u5f00\u53d1"},{"location":"2.x/extension-upgrade/","text":"\u6269\u5c55\u7248\u672c\u4e0e\u5347\u7ea7","title":"\u6269\u5c55\u7248\u672c\u4e0e\u5347\u7ea7"},{"location":"2.x/extension-upgrade/#_1","text":"","title":"\u6269\u5c55\u7248\u672c\u4e0e\u5347\u7ea7"},{"location":"2.x/extensions/","text":"\u6269\u5c55 \u6269\u5c55 \u63cf\u8ff0 dcat-admin \u7248\u672c dcat-page \u4e00\u4e2a\u7b80\u6d01\u7684\u9759\u6001\u7ad9\u70b9\u6784\u5efa\u5de5\u5177 * ueditor \u767e\u5ea6\u5728\u7ebf\u7f16\u8f91\u5668 * gank \u5e72\u8d27\u96c6\u4e2d\u8425 *","title":"\u6269\u5c55"},{"location":"2.x/extensions/#_1","text":"\u6269\u5c55 \u63cf\u8ff0 dcat-admin \u7248\u672c dcat-page \u4e00\u4e2a\u7b80\u6d01\u7684\u9759\u6001\u7ad9\u70b9\u6784\u5efa\u5de5\u5177 * ueditor \u767e\u5ea6\u5728\u7ebf\u7f16\u8f91\u5668 * gank \u5e72\u8d27\u96c6\u4e2d\u8425 *","title":"\u6269\u5c55"},{"location":"2.x/function/","text":"\u5e2e\u52a9\u51fd\u6570 admin_redirect Since v2.1.7-beta \u8df3\u8f6c\u5230\u6307\u5b9a url \uff0c\u6b64\u51fd\u6570\u53ef\u7528\u4e8e\u4ee3\u66ff redirect \u51fd\u6570\uff0c\u652f\u6301 pjax \u4ee5\u53ca ajax \u8bf7\u6c42 // \u4e0d\u9700\u8981\u6dfb\u52a0admin\u524d\u7f00 return admin_redirect('auth/users'); // \u5982\u679c\u60f3\u8981\u8df3\u8f6c\u5230\u975eadmin\u524d\u7f00\u7684\u94fe\u63a5\uff0c\u9700\u8981\u4f20\u9012\u5b8c\u6574url\u94fe\u63a5 return admin_redirect(url('users')); admin_exist admin_exist \u7528\u4e8e\u4e2d\u65ad\u7a0b\u5e8f\u6267\u884c\uff0c\u5e76\u54cd\u5e94\u6570\u636e\u5230\u6d4f\u89c8\u5668\u8fdb\u884c\u663e\u793a\uff0c\u7528\u4e8e\u4ee3\u66ff exit \u548c die \uff0c\u4e0b\u9762\u7b80\u5355\u4ecb\u7ecd\u4e0b\u7528\u6cd5 \u7528\u6cd51\uff0c\u8fd4\u56de Content \u5e03\u5c40\u5bf9\u8c61\uff0c\u6b64\u7528\u6cd5\u53ef\u7528\u4e8e\u8fd4\u56de\u9519\u8bef\u4fe1\u606f\u663e\u793a\u5230\u524d\u7aef use Dcat\\Admin\\Widgets\\Alert; use Dcat\\Admin\\Layout\\Content; // \u4e2d\u65ad\u7a0b\u5e8f\uff0c\u5e76\u663e\u793a\u81ea\u5b9a\u4e49\u9875\u9762\u5230\u524d\u7aef admin_exit( Content::make() ->title('\u6807\u9898') ->description('\u63cf\u8ff0') ->body('\u9875\u9762\u5185\u5bb91') ->body(Alert::make('\u670d\u52a1\u5668\u51fa\u9519\u4e86~', 'Error')->danger()) ); \u6548\u679c\u5982\u4e0b \u7528\u6cd52\uff0c\u8fd4\u56de json \u683c\u5f0f\u6570\u636e\uff0c\u6b64\u7528\u6cd5\u7ecf\u5e38\u7528\u4e8e\u8868\u5355\u63d0\u4ea4\u6570\u636e\u7684 api \u8bf7\u6c42\u62e6\u622a\uff0c\u6216 Action \u7684 api \u8bf7\u6c42\u62e6\u622a use Dcat\\Admin\\Admin; admin_exit( Admin::json() ->success('\u6210\u529f\u4e86') ->refresh() ->data([ ... ]) ); // \u5f53\u7136\u4e5f\u53ef\u4ee5\u76f4\u63a5\u54cd\u5e94\u6570\u7ec4 admin_exit([ ... ]); \u7528\u6cd53\uff0c\u76f4\u63a5\u76f8\u5e94 Response \u5bf9\u8c61\u6216\u5b57\u7b26\u4e32 admin_exit('Hello world'); admin_exit(response('Hello world', 500)); admin_color \u83b7\u53d6\u5185\u7f6e\u989c\u8272\uff0c\u5173\u4e8e\u4e3b\u9898\u989c\u8272\u66f4\u591a\u7528\u6cd5\u8bf7\u53c2\u8003 \u4e3b\u9898 - \u989c\u8272 \u7ae0\u8282 // \u83b7\u53d6\u4e3b\u9898\u8272\u7684\u4e09\u79cd\u65b9\u5f0f $primary = admin_color('primary'); $primary = admin_color()->get('primary'); $primary = admin_color()->primary(); $color = admin_color(); $color->lighten('primary', 10); admin_js \u53ef\u4ee5\u5728\u4efb\u610f\u4f4d\u7f6e\u5f15\u5165 js \u6587\u4ef6\uff0c\u66f4\u591a\u7528\u6cd5\u53c2\u8003 \u9759\u6001\u8d44\u6e90 \u7ae0\u8282 admin_js(['@admin/xxx.js']); admin_css \u53ef\u4ee5\u5728\u4efb\u610f\u4f4d\u7f6e\u5f15\u5165 css \u6587\u4ef6\uff0c\u66f4\u591a\u7528\u6cd5\u53c2\u8003 \u9759\u6001\u8d44\u6e90 \u7ae0\u8282 admin_css(['@admin/xxx.css']); admin_require_assets \u53ef\u4ee5\u5728\u4efb\u610f\u4f4d\u7f6e\u5f15\u5165\u9759\u6001\u8d44\u6e90\u7ec4\u4ef6\uff0c\u66f4\u591a\u7528\u6cd5\u53c2\u8003 \u9759\u6001\u8d44\u6e90 \u7ae0\u8282 admin_require_assets(['@datime']); admin_path \u83b7\u53d6 Dcat Admin \u5b89\u88c5\u7684\u5e94\u7528\u8def\u5f84\uff0c\u9ed8\u8ba4\u76ee\u5f55\u662f app/Admin \uff1a $bootstrap = admin_path('bootstrap.php'); admin_url \u83b7\u53d6 Dcat Admin \u5e94\u7528\u7684\u8def\u7531\u5b8c\u6574url\uff1a // \u8fd4\u56de\uff1a http://localhost/admin/auth/users $url = admin_url('auth/users'); admin_route \u6839\u636e\u522b\u540d\u83b7\u53d6URL app/Admin/routes.php \u8def\u7531\u6ce8\u518c\u5982\u4e0b Route::group([ 'prefix' => config('admin.route.prefix'), 'namespace' => config('admin.route.namespace'), 'middleware' => config('admin.route.middleware'), ], function (Router $router) { // \u8bbe\u7f6e\u522b\u540d $router->resource('users', 'UserController', [ 'names' => ['index' => 'my-users'], ]); }); \u6839\u636e\u522b\u540d\u83b7\u53d6URL // \u83b7\u53d6url $url = admin_route('my-users'); // \u5224\u65ad\u8def\u7531 $isUsers = request()->routeIs(admin_route_name('users')); admin_base_path \u83b7\u53d6 Dcat Admin \u5e94\u7528\u7684\u8def\u7531\u8def\u5f84\uff1a // \u8fd4\u56de\uff1a /admin/auth/users $path = admin_base_path('auth/users'); admin_toastr \u5728\u9875\u9762\u5237\u65b0\u540e\u5f39\u51fa\u4e00\u4e2a toastr \u63d0\u793a\u7a97\uff0c\u53c2\u6570\uff1a $message \u63d0\u793a\u7a97\u5185\u5bb9 $type \u63d0\u793a\u7a97\u7c7b\u578b\uff0c\u9ed8\u8ba4 success \uff0c\u652f\u6301 success \u3001 info \u3001 warning \u3001 error $options toastr\u914d\u7f6e\u53c2\u6570 admin_alert('\u66f4\u65b0\u6210\u529f', 'success'); admin_success \u5728\u9875\u9762\u5237\u65b0\u540e\u5728\u9875\u9762\u9876\u90e8\u663e\u793a\u4e00\u4e2a\u6210\u529f\u6d88\u606f\uff1a admin_success('\u6807\u9898', '\u6210\u529f\u4e86'); admin_error \u5728\u9875\u9762\u5237\u65b0\u540e\u5728\u9875\u9762\u9876\u90e8\u663e\u793a\u4e00\u4e2a\u9519\u8bef\u6d88\u606f\uff1a admin_error('\u6807\u9898', '\u5931\u8d25\u4e86'); admin_warning \u5728\u9875\u9762\u5237\u65b0\u540e\u5728\u9875\u9762\u9876\u90e8\u663e\u793a\u4e00\u4e2a\u8b66\u544a\u6d88\u606f\uff1a admin_warning('\u6807\u9898', '\u8b66\u544a'); admin_info \u5728\u9875\u9762\u5237\u65b0\u540e\u5728\u9875\u9762\u9876\u90e8\u663e\u793a\u4e00\u4e2a\u63d0\u793a\u6d88\u606f\uff1a admin_info('\u6807\u9898', '\u5185\u5bb9'); admin_asset \u83b7\u53d6\u9759\u6001\u8d44\u6e90\u7684\u5b8c\u6574\u94fe\u63a5\uff1a {tip} \u6b64\u51fd\u6570\u652f\u6301\u522b\u540d. // \u5f15\u5165css <link rel=\"stylesheet\" href=\"{{ admin_asset(\"@admin/dcat-admin/main.min.css\") }}\"> // \u5f15\u5165js <script src=\"{{ admin_asset('@admin/dcat-admin/main.min.js')}}\"></script> admin_trans_field \u7ffb\u8bd1\u5f53\u524d\u63a7\u5236\u5668\u7684\u5b57\u6bb5\uff0c\u63a7\u5236\u5668\u540d\u79f0\u53bb\u9664 Controller \u540e\u7f00\u4e4b\u540e\u518d\u8f6c\u5316\u4e3a\u5c0f\u5199\u4e2d\u5212\u7ebf\u5c31\u662f\u8bed\u8a00\u5305\u7684\u540d\u79f0\uff0c\u5982\uff1a\u63a7\u5236\u5668\u540d\u79f0\u4e3a UserProfileController \uff0c\u5219\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u540d\u79f0\u4e3a user-profile.php \u3002 {tip} \u5982\u679c\u5f53\u524d\u63a7\u5236\u5668\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u4e2d\u4e0d\u5b58\u5728\u8be5\u5b57\u6bb5\u7ffb\u8bd1\uff0c\u5219\u4f1a\u53bb\u516c\u5171\u7ffb\u8bd1\u6587\u4ef6 global.php \u4e2d\u67e5\u627e\u3002 $name = admin_trans_field('name'); $createdAt = admin_trans_field('created_at'); \u8bed\u8a00\u5305\u5185\u5bb9\u5982\u4e0b\uff1a return [ 'fields' => [ 'name' => '\u540d\u79f0', 'created_at' => '\u521b\u5efa\u65f6\u95f4', ], ]; admin_trans_label \u7ffb\u8bd1\u5f53\u524d\u63a7\u5236\u5668\u7684\u81ea\u5b9a\u4e49\u5185\u5bb9\uff0c\u63a7\u5236\u5668\u540d\u79f0\u53bb\u9664 Controller \u540e\u7f00\u4e4b\u540e\u518d\u8f6c\u5316\u4e3a\u5c0f\u5199\u4e2d\u5212\u7ebf\u5c31\u662f\u8bed\u8a00\u5305\u7684\u540d\u79f0\uff0c\u5982\uff1a\u63a7\u5236\u5668\u540d\u79f0\u4e3a UserProfileController \uff0c\u5219\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u540d\u79f0\u4e3a user-profile.php \u3002 {tip} \u5982\u679c\u5f53\u524d\u63a7\u5236\u5668\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u4e2d\u4e0d\u5b58\u5728\u8be5\u5b57\u6bb5\u7ffb\u8bd1\uff0c\u5219\u4f1a\u53bb\u516c\u5171\u7ffb\u8bd1\u6587\u4ef6 global.php \u4e2d\u67e5\u627e\u3002 $user = admin_trans_label('User'); \u8bed\u8a00\u5305\u5185\u5bb9\u5982\u4e0b\uff1a return [ 'labels' => [ 'User' => '\u7ba1\u7406\u5458', ], ]; admin_trans_option \u7ffb\u8bd1\u5f53\u524d\u63a7\u5236\u5668\u7684\u5b57\u6bb5\u9009\u9879\u503c\uff0c\u63a7\u5236\u5668\u540d\u79f0\u53bb\u9664 Controller \u540e\u7f00\u4e4b\u540e\u518d\u8f6c\u5316\u4e3a\u5c0f\u5199\u4e2d\u5212\u7ebf\u5c31\u662f\u8bed\u8a00\u5305\u7684\u540d\u79f0\uff0c\u5982\uff1a\u63a7\u5236\u5668\u540d\u79f0\u4e3a UserProfileController \uff0c\u5219\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u540d\u79f0\u4e3a user-profile.php \u3002 {tip} \u5982\u679c\u5f53\u524d\u63a7\u5236\u5668\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u4e2d\u4e0d\u5b58\u5728\u8be5\u5b57\u6bb5\u7ffb\u8bd1\uff0c\u5219\u4f1a\u53bb\u516c\u5171\u7ffb\u8bd1\u6587\u4ef6 global.php \u4e2d\u67e5\u627e\u3002 $status = admin_trans_option(1, 'status'); \u8bed\u8a00\u5305\u5185\u5bb9\u5982\u4e0b\uff1a return [ 'options' => [ 'status' => [ 1 => '\u542f\u7528', 0 => '\u7981\u7528' ], ], ];","title":"\u5e2e\u52a9\u51fd\u6570"},{"location":"2.x/function/#_1","text":"","title":"\u5e2e\u52a9\u51fd\u6570"},{"location":"2.x/function/#admin_redirect","text":"Since v2.1.7-beta \u8df3\u8f6c\u5230\u6307\u5b9a url \uff0c\u6b64\u51fd\u6570\u53ef\u7528\u4e8e\u4ee3\u66ff redirect \u51fd\u6570\uff0c\u652f\u6301 pjax \u4ee5\u53ca ajax \u8bf7\u6c42 // \u4e0d\u9700\u8981\u6dfb\u52a0admin\u524d\u7f00 return admin_redirect('auth/users'); // \u5982\u679c\u60f3\u8981\u8df3\u8f6c\u5230\u975eadmin\u524d\u7f00\u7684\u94fe\u63a5\uff0c\u9700\u8981\u4f20\u9012\u5b8c\u6574url\u94fe\u63a5 return admin_redirect(url('users'));","title":"admin_redirect"},{"location":"2.x/function/#admin_exist","text":"admin_exist \u7528\u4e8e\u4e2d\u65ad\u7a0b\u5e8f\u6267\u884c\uff0c\u5e76\u54cd\u5e94\u6570\u636e\u5230\u6d4f\u89c8\u5668\u8fdb\u884c\u663e\u793a\uff0c\u7528\u4e8e\u4ee3\u66ff exit \u548c die \uff0c\u4e0b\u9762\u7b80\u5355\u4ecb\u7ecd\u4e0b\u7528\u6cd5 \u7528\u6cd51\uff0c\u8fd4\u56de Content \u5e03\u5c40\u5bf9\u8c61\uff0c\u6b64\u7528\u6cd5\u53ef\u7528\u4e8e\u8fd4\u56de\u9519\u8bef\u4fe1\u606f\u663e\u793a\u5230\u524d\u7aef use Dcat\\Admin\\Widgets\\Alert; use Dcat\\Admin\\Layout\\Content; // \u4e2d\u65ad\u7a0b\u5e8f\uff0c\u5e76\u663e\u793a\u81ea\u5b9a\u4e49\u9875\u9762\u5230\u524d\u7aef admin_exit( Content::make() ->title('\u6807\u9898') ->description('\u63cf\u8ff0') ->body('\u9875\u9762\u5185\u5bb91') ->body(Alert::make('\u670d\u52a1\u5668\u51fa\u9519\u4e86~', 'Error')->danger()) ); \u6548\u679c\u5982\u4e0b \u7528\u6cd52\uff0c\u8fd4\u56de json \u683c\u5f0f\u6570\u636e\uff0c\u6b64\u7528\u6cd5\u7ecf\u5e38\u7528\u4e8e\u8868\u5355\u63d0\u4ea4\u6570\u636e\u7684 api \u8bf7\u6c42\u62e6\u622a\uff0c\u6216 Action \u7684 api \u8bf7\u6c42\u62e6\u622a use Dcat\\Admin\\Admin; admin_exit( Admin::json() ->success('\u6210\u529f\u4e86') ->refresh() ->data([ ... ]) ); // \u5f53\u7136\u4e5f\u53ef\u4ee5\u76f4\u63a5\u54cd\u5e94\u6570\u7ec4 admin_exit([ ... ]); \u7528\u6cd53\uff0c\u76f4\u63a5\u76f8\u5e94 Response \u5bf9\u8c61\u6216\u5b57\u7b26\u4e32 admin_exit('Hello world'); admin_exit(response('Hello world', 500));","title":"admin_exist"},{"location":"2.x/function/#admin_color","text":"\u83b7\u53d6\u5185\u7f6e\u989c\u8272\uff0c\u5173\u4e8e\u4e3b\u9898\u989c\u8272\u66f4\u591a\u7528\u6cd5\u8bf7\u53c2\u8003 \u4e3b\u9898 - \u989c\u8272 \u7ae0\u8282 // \u83b7\u53d6\u4e3b\u9898\u8272\u7684\u4e09\u79cd\u65b9\u5f0f $primary = admin_color('primary'); $primary = admin_color()->get('primary'); $primary = admin_color()->primary(); $color = admin_color(); $color->lighten('primary', 10);","title":"admin_color"},{"location":"2.x/function/#admin_js","text":"\u53ef\u4ee5\u5728\u4efb\u610f\u4f4d\u7f6e\u5f15\u5165 js \u6587\u4ef6\uff0c\u66f4\u591a\u7528\u6cd5\u53c2\u8003 \u9759\u6001\u8d44\u6e90 \u7ae0\u8282 admin_js(['@admin/xxx.js']);","title":"admin_js"},{"location":"2.x/function/#admin_css","text":"\u53ef\u4ee5\u5728\u4efb\u610f\u4f4d\u7f6e\u5f15\u5165 css \u6587\u4ef6\uff0c\u66f4\u591a\u7528\u6cd5\u53c2\u8003 \u9759\u6001\u8d44\u6e90 \u7ae0\u8282 admin_css(['@admin/xxx.css']);","title":"admin_css"},{"location":"2.x/function/#admin_require_assets","text":"\u53ef\u4ee5\u5728\u4efb\u610f\u4f4d\u7f6e\u5f15\u5165\u9759\u6001\u8d44\u6e90\u7ec4\u4ef6\uff0c\u66f4\u591a\u7528\u6cd5\u53c2\u8003 \u9759\u6001\u8d44\u6e90 \u7ae0\u8282 admin_require_assets(['@datime']);","title":"admin_require_assets"},{"location":"2.x/function/#admin_path","text":"\u83b7\u53d6 Dcat Admin \u5b89\u88c5\u7684\u5e94\u7528\u8def\u5f84\uff0c\u9ed8\u8ba4\u76ee\u5f55\u662f app/Admin \uff1a $bootstrap = admin_path('bootstrap.php');","title":"admin_path"},{"location":"2.x/function/#admin_url","text":"\u83b7\u53d6 Dcat Admin \u5e94\u7528\u7684\u8def\u7531\u5b8c\u6574url\uff1a // \u8fd4\u56de\uff1a http://localhost/admin/auth/users $url = admin_url('auth/users');","title":"admin_url"},{"location":"2.x/function/#admin_route","text":"\u6839\u636e\u522b\u540d\u83b7\u53d6URL app/Admin/routes.php \u8def\u7531\u6ce8\u518c\u5982\u4e0b Route::group([ 'prefix' => config('admin.route.prefix'), 'namespace' => config('admin.route.namespace'), 'middleware' => config('admin.route.middleware'), ], function (Router $router) { // \u8bbe\u7f6e\u522b\u540d $router->resource('users', 'UserController', [ 'names' => ['index' => 'my-users'], ]); }); \u6839\u636e\u522b\u540d\u83b7\u53d6URL // \u83b7\u53d6url $url = admin_route('my-users'); // \u5224\u65ad\u8def\u7531 $isUsers = request()->routeIs(admin_route_name('users'));","title":"admin_route"},{"location":"2.x/function/#admin_base_path","text":"\u83b7\u53d6 Dcat Admin \u5e94\u7528\u7684\u8def\u7531\u8def\u5f84\uff1a // \u8fd4\u56de\uff1a /admin/auth/users $path = admin_base_path('auth/users');","title":"admin_base_path"},{"location":"2.x/function/#admin_toastr","text":"\u5728\u9875\u9762\u5237\u65b0\u540e\u5f39\u51fa\u4e00\u4e2a toastr \u63d0\u793a\u7a97\uff0c\u53c2\u6570\uff1a $message \u63d0\u793a\u7a97\u5185\u5bb9 $type \u63d0\u793a\u7a97\u7c7b\u578b\uff0c\u9ed8\u8ba4 success \uff0c\u652f\u6301 success \u3001 info \u3001 warning \u3001 error $options toastr\u914d\u7f6e\u53c2\u6570 admin_alert('\u66f4\u65b0\u6210\u529f', 'success');","title":"admin_toastr"},{"location":"2.x/function/#admin_success","text":"\u5728\u9875\u9762\u5237\u65b0\u540e\u5728\u9875\u9762\u9876\u90e8\u663e\u793a\u4e00\u4e2a\u6210\u529f\u6d88\u606f\uff1a admin_success('\u6807\u9898', '\u6210\u529f\u4e86');","title":"admin_success"},{"location":"2.x/function/#admin_error","text":"\u5728\u9875\u9762\u5237\u65b0\u540e\u5728\u9875\u9762\u9876\u90e8\u663e\u793a\u4e00\u4e2a\u9519\u8bef\u6d88\u606f\uff1a admin_error('\u6807\u9898', '\u5931\u8d25\u4e86');","title":"admin_error"},{"location":"2.x/function/#admin_warning","text":"\u5728\u9875\u9762\u5237\u65b0\u540e\u5728\u9875\u9762\u9876\u90e8\u663e\u793a\u4e00\u4e2a\u8b66\u544a\u6d88\u606f\uff1a admin_warning('\u6807\u9898', '\u8b66\u544a');","title":"admin_warning"},{"location":"2.x/function/#admin_info","text":"\u5728\u9875\u9762\u5237\u65b0\u540e\u5728\u9875\u9762\u9876\u90e8\u663e\u793a\u4e00\u4e2a\u63d0\u793a\u6d88\u606f\uff1a admin_info('\u6807\u9898', '\u5185\u5bb9');","title":"admin_info"},{"location":"2.x/function/#admin_asset","text":"\u83b7\u53d6\u9759\u6001\u8d44\u6e90\u7684\u5b8c\u6574\u94fe\u63a5\uff1a {tip} \u6b64\u51fd\u6570\u652f\u6301\u522b\u540d. // \u5f15\u5165css <link rel=\"stylesheet\" href=\"{{ admin_asset(\"@admin/dcat-admin/main.min.css\") }}\"> // \u5f15\u5165js <script src=\"{{ admin_asset('@admin/dcat-admin/main.min.js')}}\"></script>","title":"admin_asset"},{"location":"2.x/function/#admin_trans_field","text":"\u7ffb\u8bd1\u5f53\u524d\u63a7\u5236\u5668\u7684\u5b57\u6bb5\uff0c\u63a7\u5236\u5668\u540d\u79f0\u53bb\u9664 Controller \u540e\u7f00\u4e4b\u540e\u518d\u8f6c\u5316\u4e3a\u5c0f\u5199\u4e2d\u5212\u7ebf\u5c31\u662f\u8bed\u8a00\u5305\u7684\u540d\u79f0\uff0c\u5982\uff1a\u63a7\u5236\u5668\u540d\u79f0\u4e3a UserProfileController \uff0c\u5219\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u540d\u79f0\u4e3a user-profile.php \u3002 {tip} \u5982\u679c\u5f53\u524d\u63a7\u5236\u5668\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u4e2d\u4e0d\u5b58\u5728\u8be5\u5b57\u6bb5\u7ffb\u8bd1\uff0c\u5219\u4f1a\u53bb\u516c\u5171\u7ffb\u8bd1\u6587\u4ef6 global.php \u4e2d\u67e5\u627e\u3002 $name = admin_trans_field('name'); $createdAt = admin_trans_field('created_at'); \u8bed\u8a00\u5305\u5185\u5bb9\u5982\u4e0b\uff1a return [ 'fields' => [ 'name' => '\u540d\u79f0', 'created_at' => '\u521b\u5efa\u65f6\u95f4', ], ];","title":"admin_trans_field"},{"location":"2.x/function/#admin_trans_label","text":"\u7ffb\u8bd1\u5f53\u524d\u63a7\u5236\u5668\u7684\u81ea\u5b9a\u4e49\u5185\u5bb9\uff0c\u63a7\u5236\u5668\u540d\u79f0\u53bb\u9664 Controller \u540e\u7f00\u4e4b\u540e\u518d\u8f6c\u5316\u4e3a\u5c0f\u5199\u4e2d\u5212\u7ebf\u5c31\u662f\u8bed\u8a00\u5305\u7684\u540d\u79f0\uff0c\u5982\uff1a\u63a7\u5236\u5668\u540d\u79f0\u4e3a UserProfileController \uff0c\u5219\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u540d\u79f0\u4e3a user-profile.php \u3002 {tip} \u5982\u679c\u5f53\u524d\u63a7\u5236\u5668\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u4e2d\u4e0d\u5b58\u5728\u8be5\u5b57\u6bb5\u7ffb\u8bd1\uff0c\u5219\u4f1a\u53bb\u516c\u5171\u7ffb\u8bd1\u6587\u4ef6 global.php \u4e2d\u67e5\u627e\u3002 $user = admin_trans_label('User'); \u8bed\u8a00\u5305\u5185\u5bb9\u5982\u4e0b\uff1a return [ 'labels' => [ 'User' => '\u7ba1\u7406\u5458', ], ];","title":"admin_trans_label"},{"location":"2.x/function/#admin_trans_option","text":"\u7ffb\u8bd1\u5f53\u524d\u63a7\u5236\u5668\u7684\u5b57\u6bb5\u9009\u9879\u503c\uff0c\u63a7\u5236\u5668\u540d\u79f0\u53bb\u9664 Controller \u540e\u7f00\u4e4b\u540e\u518d\u8f6c\u5316\u4e3a\u5c0f\u5199\u4e2d\u5212\u7ebf\u5c31\u662f\u8bed\u8a00\u5305\u7684\u540d\u79f0\uff0c\u5982\uff1a\u63a7\u5236\u5668\u540d\u79f0\u4e3a UserProfileController \uff0c\u5219\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u540d\u79f0\u4e3a user-profile.php \u3002 {tip} \u5982\u679c\u5f53\u524d\u63a7\u5236\u5668\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u4e2d\u4e0d\u5b58\u5728\u8be5\u5b57\u6bb5\u7ffb\u8bd1\uff0c\u5219\u4f1a\u53bb\u516c\u5171\u7ffb\u8bd1\u6587\u4ef6 global.php \u4e2d\u67e5\u627e\u3002 $status = admin_trans_option(1, 'status'); \u8bed\u8a00\u5305\u5185\u5bb9\u5982\u4e0b\uff1a return [ 'options' => [ 'status' => [ 1 => '\u542f\u7528', 0 => '\u7981\u7528' ], ], ];","title":"admin_trans_option"},{"location":"2.x/helpers/","text":"\u5f00\u53d1\u5de5\u5177 Dcat Admin \u63d0\u4f9b\u4e86\u4e00\u4e9b\u5f00\u53d1\u5de5\u5177\u4ee5\u5e2e\u52a9\u5f00\u53d1\u8005\u63d0\u5347\u5f00\u53d1\u6548\u7387\u3002 \u5982\u679c\u9700\u8981\u7981\u7528\u5f00\u53d1\u5de5\u5177\uff0c\u5219\u628a\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 app.debug \u6216 admin.helpers.enable \u7684\u53c2\u6570\u503c\u8bbe\u7f6e\u4e3a false \u5373\u53ef\u3002 \u4ee3\u7801\u751f\u6210\u5668 \u4ee3\u7801\u751f\u6210\u5668\u53ef\u4ee5\u901a\u8fc7\u754c\u9762\u4e00\u952e\u751f\u6210\u589e\u5220\u6539\u67e5\u4ee3\u7801\uff0c\u652f\u6301\u6839\u636e\u5df2\u6709\u6570\u636e\u8868\u751f\u6210\u589e\u5220\u6539\u67e5\u4ee3\u7801\uff0c\u6253\u5f00\u6d4f\u89c8\u5668\u8bbf\u95ee http://localhost:8000/admin/helpers/scaffold \u5373\u53ef\u4f7f\u7528\u3002 {tip} \u5982\u679c\u4f60\u7684\u5f00\u53d1\u73af\u5883\u4e0d\u662f windows \u7cfb\u7edf\uff0c\u8bf7\u7ed9\u6574\u4e2a\u9879\u76ee 777 \u6743\u9650\uff0c\u5426\u5219\u53ef\u80fd\u65e0\u6cd5\u751f\u6210\u6587\u4ef6\u3002 \u6269\u5c55\u5305\u7ba1\u7406 Dcat Admin \u652f\u6301\u53ef\u89c6\u5316\u7ba1\u7406\u6269\u5c55\u5305\uff0c\u53ea\u8981\u901a\u8fc7 composer \u5b89\u88c5\u8fdb\u6765\u7684\u6269\u5c55\u5305\u90fd\u80fd\u5728\u7ba1\u7406\u754c\u9762\u4e2d\u770b\u5230\uff0c\u652f\u6301\u901a\u8fc7\u754c\u9762\u542f\u7528\u548c\u5bfc\u5165\u6269\u5c55\u5305\uff0c\u6253\u5f00\u6d4f\u89c8\u5668\u8bbf\u95ee http://localhost:8000/admin/helpers/extensions \u5373\u53ef\u4f7f\u7528\u3002 IDE\u81ea\u52a8\u8865\u5168 \u901a\u8fc7 php artisan admin:ide-helper \u547d\u4ee4\u53ef\u4ee5\u751f\u6210IDE\u81ea\u52a8\u8865\u5168\u6587\u4ef6\uff0c\u53ef\u4ee5\u751f\u6210 Grid \u3001 Form \u3001 Show \u7b49\u529f\u80fd\u7684IDE\u81ea\u52a8\u8865\u5168\u63d0\u793a\u6587\u4ef6\u3002 \u56fe\u6807 \u8bbf\u95ee http://localhost:8000/admin/helpers/icons \u53ef\u4ee5\u67e5\u770b\u5df2\u652f\u6301\u7684\u56fe\u6807\u5217\u8868\u3002","title":"\u5f00\u53d1\u5de5\u5177"},{"location":"2.x/helpers/#_1","text":"Dcat Admin \u63d0\u4f9b\u4e86\u4e00\u4e9b\u5f00\u53d1\u5de5\u5177\u4ee5\u5e2e\u52a9\u5f00\u53d1\u8005\u63d0\u5347\u5f00\u53d1\u6548\u7387\u3002 \u5982\u679c\u9700\u8981\u7981\u7528\u5f00\u53d1\u5de5\u5177\uff0c\u5219\u628a\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 app.debug \u6216 admin.helpers.enable \u7684\u53c2\u6570\u503c\u8bbe\u7f6e\u4e3a false \u5373\u53ef\u3002","title":"\u5f00\u53d1\u5de5\u5177"},{"location":"2.x/helpers/#_2","text":"\u4ee3\u7801\u751f\u6210\u5668\u53ef\u4ee5\u901a\u8fc7\u754c\u9762\u4e00\u952e\u751f\u6210\u589e\u5220\u6539\u67e5\u4ee3\u7801\uff0c\u652f\u6301\u6839\u636e\u5df2\u6709\u6570\u636e\u8868\u751f\u6210\u589e\u5220\u6539\u67e5\u4ee3\u7801\uff0c\u6253\u5f00\u6d4f\u89c8\u5668\u8bbf\u95ee http://localhost:8000/admin/helpers/scaffold \u5373\u53ef\u4f7f\u7528\u3002 {tip} \u5982\u679c\u4f60\u7684\u5f00\u53d1\u73af\u5883\u4e0d\u662f windows \u7cfb\u7edf\uff0c\u8bf7\u7ed9\u6574\u4e2a\u9879\u76ee 777 \u6743\u9650\uff0c\u5426\u5219\u53ef\u80fd\u65e0\u6cd5\u751f\u6210\u6587\u4ef6\u3002","title":"\u4ee3\u7801\u751f\u6210\u5668"},{"location":"2.x/helpers/#_3","text":"Dcat Admin \u652f\u6301\u53ef\u89c6\u5316\u7ba1\u7406\u6269\u5c55\u5305\uff0c\u53ea\u8981\u901a\u8fc7 composer \u5b89\u88c5\u8fdb\u6765\u7684\u6269\u5c55\u5305\u90fd\u80fd\u5728\u7ba1\u7406\u754c\u9762\u4e2d\u770b\u5230\uff0c\u652f\u6301\u901a\u8fc7\u754c\u9762\u542f\u7528\u548c\u5bfc\u5165\u6269\u5c55\u5305\uff0c\u6253\u5f00\u6d4f\u89c8\u5668\u8bbf\u95ee http://localhost:8000/admin/helpers/extensions \u5373\u53ef\u4f7f\u7528\u3002","title":"\u6269\u5c55\u5305\u7ba1\u7406"},{"location":"2.x/helpers/#ide","text":"\u901a\u8fc7 php artisan admin:ide-helper \u547d\u4ee4\u53ef\u4ee5\u751f\u6210IDE\u81ea\u52a8\u8865\u5168\u6587\u4ef6\uff0c\u53ef\u4ee5\u751f\u6210 Grid \u3001 Form \u3001 Show \u7b49\u529f\u80fd\u7684IDE\u81ea\u52a8\u8865\u5168\u63d0\u793a\u6587\u4ef6\u3002","title":"IDE\u81ea\u52a8\u8865\u5168"},{"location":"2.x/helpers/#_4","text":"\u8bbf\u95ee http://localhost:8000/admin/helpers/icons \u53ef\u4ee5\u67e5\u770b\u5df2\u652f\u6301\u7684\u56fe\u6807\u5217\u8868\u3002","title":"\u56fe\u6807"},{"location":"2.x/installation/","text":"\u5b89\u88c5 \u73af\u5883 PHP >= 7.1 Laravel 5.5.0 ~ 9.* Fileinfo PHP Extension \u5f00\u59cb\u5b89\u88c5 {tip} \u5982\u679c\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u51fa\u73b0 composer \u4e0b\u8f7d\u8fc7\u6162\u6216\u5b89\u88c5\u5931\u8d25\u7684\u60c5\u51b5\uff0c\u8bf7\u8fd0\u884c\u547d\u4ee4 composer config -g repo.packagist composer https://mirrors.aliyun.com/composer/ \u628a composer \u955c\u50cf\u66f4\u6362\u4e3a\u963f\u91cc\u4e91\u955c\u50cf\u3002 \u9996\u5148\u9700\u8981\u5b89\u88c5 laravel \uff0c\u5982\u5df2\u5b89\u88c5\u53ef\u4ee5\u8df3\u8fc7\u6b64\u6b65\u9aa4 composer create-project --prefer-dist laravel/laravel \u9879\u76ee\u540d\u79f0 7.* # \u6216 composer create-project --prefer-dist laravel/laravel \u9879\u76ee\u540d\u79f0 \u5b89\u88c5\u5b8c laravel \u4e4b\u540e\u9700\u8981\u4fee\u6539 .env \u6587\u4ef6\uff0c\u8bbe\u7f6e\u6570\u636e\u5e93\u8fde\u63a5\u8bbe\u7f6e\u6b63\u786e DB_CONNECTION=mysql DB_HOST=127.0.0.1 DB_PORT=3306 DB_DATABASE=dcat-admin DB_USERNAME=root DB_PASSWORD= \u5b89\u88c5 dcat-admin cd {\u9879\u76ee\u540d\u79f0} composer require dcat/laravel-admin:\"2.*\" -vvv \u7136\u540e\u8fd0\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u53d1\u5e03\u8d44\u6e90\uff1a php artisan admin:publish \u5728\u8be5\u547d\u4ee4\u4f1a\u751f\u6210\u914d\u7f6e\u6587\u4ef6 config/admin.php \uff0c\u53ef\u4ee5\u5728\u91cc\u9762\u4fee\u6539\u5b89\u88c5\u7684\u5730\u5740\u3001\u6570\u636e\u5e93\u8fde\u63a5\u3001\u4ee5\u53ca\u8868\u540d\uff0c\u5efa\u8bae\u90fd\u662f\u7528\u9ed8\u8ba4\u914d\u7f6e\u4e0d\u4fee\u6539\u3002 \u7136\u540e\u8fd0\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u5b8c\u6210\u5b89\u88c5\uff1a {tip} \u6267\u884c\u8fd9\u4e00\u6b65\u547d\u4ee4\u53ef\u80fd\u4f1a\u62a5\u4ee5\u4e0b\u9519\u8bef Specified key was too long ... 767 bytes \uff0c\u5982\u679c\u51fa\u73b0\u8fd9\u4e2a\u62a5\u9519\uff0c\u8bf7\u5728 app/Providers/AppServiceProvider.php \u6587\u4ef6\u7684 boot \u65b9\u6cd5\u4e2d\u52a0\u4e0a\u4ee3\u7801 \\Schema::defaultStringLength(191); \uff0c\u7136\u540e\u5220\u9664\u6389\u6570\u636e\u5e93\u4e2d\u7684\u6240\u6709\u6570\u636e\u8868\uff0c\u518d\u91cd\u65b0\u8fd0\u884c\u4e00\u904d php artisan admin:install \u547d\u4ee4\u5373\u53ef\u3002 php artisan admin:install \u4e0a\u8ff0\u6b65\u9aa4\u64cd\u4f5c\u5b8c\u6210\u4e4b\u540e\u5c31\u53ef\u4ee5\u914d\u7f6e web \u670d\u52a1\u4e86\uff0c \u6ce8\u610f\u9700\u8981\u628a web \u76ee\u5f55\u6307\u5411 public \u76ee\u5f55 \uff01\u5982\u679c\u7528\u7684\u662f nginx \uff0c\u8fd8\u9700\u8981\u5728\u914d\u7f6e\u4e2d\u52a0\u4e0a\u4f2a\u9759\u6001\u914d\u7f6e location / { try_files $uri $uri/ /index.php?$query_string; } \u542f\u52a8\u670d\u52a1\u540e\uff0c\u5728\u6d4f\u89c8\u5668\u6253\u5f00 http://localhost/admin \uff0c\u4f7f\u7528\u7528\u6237\u540d admin \u548c\u5bc6\u7801 admin \u767b\u9646\u3002 \u751f\u6210\u7684\u6587\u4ef6 \u5b89\u88c5\u5b8c\u6210\u4e4b\u540e,\u4f1a\u5728\u9879\u76ee\u76ee\u5f55\u4e2d\u751f\u6210\u4ee5\u4e0b\u7684\u6587\u4ef6: \u914d\u7f6e\u6587\u4ef6 \u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c dcat-admin \u6240\u6709\u7684\u914d\u7f6e\u90fd\u5728 config/admin.php \u6587\u4ef6\u4e2d\u3002 \u540e\u53f0\u9879\u76ee\u6587\u4ef6 \u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c\u540e\u53f0\u7684\u5b89\u88c5\u76ee\u5f55\u4e3a app/Admin \uff0c\u4e4b\u540e\u5927\u90e8\u5206\u7684\u540e\u53f0\u5f00\u53d1\u7f16\u7801\u5de5\u4f5c\u90fd\u662f\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u8fdb\u884c\u3002 app/Admin \u251c\u2500\u2500 Controllers \u2502 \u251c\u2500\u2500 AuthController.php \u2502 \u2514\u2500\u2500 HomeController.php \u251c\u2500\u2500 Metrics \u2502 \u2514\u2500\u2500 Examples \u2502 \u251c\u2500\u2500 NewDevices.php \u2502 \u251c\u2500\u2500 NewUsers.php \u2502 \u251c\u2500\u2500 ProductOrders.php \u2502 \u251c\u2500\u2500 Sessions.php \u2502 \u251c\u2500\u2500 Tickets.php \u2502 \u2514\u2500\u2500 TotalUsers.php \u251c\u2500\u2500 bootstrap.php \u2514\u2500\u2500 routes.php app/Admin/routes.php \u6587\u4ef6\u7528\u6765\u914d\u7f6e\u540e\u53f0\u8def\u7531\u3002 app/Admin/bootstrap.php \u662f dcat-admin \u7684\u542f\u52a8\u6587\u4ef6, \u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003\u6587\u4ef6\u91cc\u9762\u7684\u6ce8\u91ca. app/Admin/Controllers \u76ee\u5f55\u7528\u6765\u5b58\u653e\u540e\u53f0\u63a7\u5236\u5668\u6587\u4ef6\uff0c\u8be5\u76ee\u5f55\u4e0b\u7684 HomeController.php \u6587\u4ef6\u662f\u540e\u53f0\u9996\u9875\u7684\u663e\u793a\u63a7\u5236\u5668\uff0c AuthController.php \u4e3a\u540e\u53f0\u7ba1\u7406\u5458\u767b\u5f55\u9274\u6743\u63a7\u5236\u5668\u3002 app/Admin/Metrics/Examples \u91cc\u9762\u5b58\u653e\u7684\u662f \u6570\u636e\u7edf\u8ba1\u5361\u7247(Metric Card) \u7684\u793a\u4f8b\u4ee3\u7801. \u9759\u6001\u6587\u4ef6 \u540e\u53f0\u6240\u9700\u7684\u524d\u7aef\u9759\u6001\u6587\u4ef6\u5728 /public/vendor/dcat-admin \u76ee\u5f55\u4e0b\u3002 \u6570\u636e\u8868\u8fc1\u79fb\u6587\u4ef6 \u5bf9\u5e94\u7684\u6570\u636e\u8868\u8fc1\u79fb\u6587\u4ef6\u5728 /database/migrations \u76ee\u5f55\u4e0b\u3002 \u8bed\u8a00\u5305 \u8bed\u8a00\u5305\u6587\u4ef6\u5728 /resources/lang \u76ee\u5f55\u4e0b\u3002","title":"\u5b89\u88c5"},{"location":"2.x/installation/#_1","text":"","title":"\u5b89\u88c5"},{"location":"2.x/installation/#_2","text":"PHP >= 7.1 Laravel 5.5.0 ~ 9.* Fileinfo PHP Extension","title":"\u73af\u5883"},{"location":"2.x/installation/#_3","text":"{tip} \u5982\u679c\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u51fa\u73b0 composer \u4e0b\u8f7d\u8fc7\u6162\u6216\u5b89\u88c5\u5931\u8d25\u7684\u60c5\u51b5\uff0c\u8bf7\u8fd0\u884c\u547d\u4ee4 composer config -g repo.packagist composer https://mirrors.aliyun.com/composer/ \u628a composer \u955c\u50cf\u66f4\u6362\u4e3a\u963f\u91cc\u4e91\u955c\u50cf\u3002 \u9996\u5148\u9700\u8981\u5b89\u88c5 laravel \uff0c\u5982\u5df2\u5b89\u88c5\u53ef\u4ee5\u8df3\u8fc7\u6b64\u6b65\u9aa4 composer create-project --prefer-dist laravel/laravel \u9879\u76ee\u540d\u79f0 7.* # \u6216 composer create-project --prefer-dist laravel/laravel \u9879\u76ee\u540d\u79f0 \u5b89\u88c5\u5b8c laravel \u4e4b\u540e\u9700\u8981\u4fee\u6539 .env \u6587\u4ef6\uff0c\u8bbe\u7f6e\u6570\u636e\u5e93\u8fde\u63a5\u8bbe\u7f6e\u6b63\u786e DB_CONNECTION=mysql DB_HOST=127.0.0.1 DB_PORT=3306 DB_DATABASE=dcat-admin DB_USERNAME=root DB_PASSWORD= \u5b89\u88c5 dcat-admin cd {\u9879\u76ee\u540d\u79f0} composer require dcat/laravel-admin:\"2.*\" -vvv \u7136\u540e\u8fd0\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u53d1\u5e03\u8d44\u6e90\uff1a php artisan admin:publish \u5728\u8be5\u547d\u4ee4\u4f1a\u751f\u6210\u914d\u7f6e\u6587\u4ef6 config/admin.php \uff0c\u53ef\u4ee5\u5728\u91cc\u9762\u4fee\u6539\u5b89\u88c5\u7684\u5730\u5740\u3001\u6570\u636e\u5e93\u8fde\u63a5\u3001\u4ee5\u53ca\u8868\u540d\uff0c\u5efa\u8bae\u90fd\u662f\u7528\u9ed8\u8ba4\u914d\u7f6e\u4e0d\u4fee\u6539\u3002 \u7136\u540e\u8fd0\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u5b8c\u6210\u5b89\u88c5\uff1a {tip} \u6267\u884c\u8fd9\u4e00\u6b65\u547d\u4ee4\u53ef\u80fd\u4f1a\u62a5\u4ee5\u4e0b\u9519\u8bef Specified key was too long ... 767 bytes \uff0c\u5982\u679c\u51fa\u73b0\u8fd9\u4e2a\u62a5\u9519\uff0c\u8bf7\u5728 app/Providers/AppServiceProvider.php \u6587\u4ef6\u7684 boot \u65b9\u6cd5\u4e2d\u52a0\u4e0a\u4ee3\u7801 \\Schema::defaultStringLength(191); \uff0c\u7136\u540e\u5220\u9664\u6389\u6570\u636e\u5e93\u4e2d\u7684\u6240\u6709\u6570\u636e\u8868\uff0c\u518d\u91cd\u65b0\u8fd0\u884c\u4e00\u904d php artisan admin:install \u547d\u4ee4\u5373\u53ef\u3002 php artisan admin:install \u4e0a\u8ff0\u6b65\u9aa4\u64cd\u4f5c\u5b8c\u6210\u4e4b\u540e\u5c31\u53ef\u4ee5\u914d\u7f6e web \u670d\u52a1\u4e86\uff0c \u6ce8\u610f\u9700\u8981\u628a web \u76ee\u5f55\u6307\u5411 public \u76ee\u5f55 \uff01\u5982\u679c\u7528\u7684\u662f nginx \uff0c\u8fd8\u9700\u8981\u5728\u914d\u7f6e\u4e2d\u52a0\u4e0a\u4f2a\u9759\u6001\u914d\u7f6e location / { try_files $uri $uri/ /index.php?$query_string; } \u542f\u52a8\u670d\u52a1\u540e\uff0c\u5728\u6d4f\u89c8\u5668\u6253\u5f00 http://localhost/admin \uff0c\u4f7f\u7528\u7528\u6237\u540d admin \u548c\u5bc6\u7801 admin \u767b\u9646\u3002","title":"\u5f00\u59cb\u5b89\u88c5"},{"location":"2.x/installation/#_4","text":"\u5b89\u88c5\u5b8c\u6210\u4e4b\u540e,\u4f1a\u5728\u9879\u76ee\u76ee\u5f55\u4e2d\u751f\u6210\u4ee5\u4e0b\u7684\u6587\u4ef6:","title":"\u751f\u6210\u7684\u6587\u4ef6"},{"location":"2.x/installation/#_5","text":"\u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c dcat-admin \u6240\u6709\u7684\u914d\u7f6e\u90fd\u5728 config/admin.php \u6587\u4ef6\u4e2d\u3002","title":"\u914d\u7f6e\u6587\u4ef6"},{"location":"2.x/installation/#_6","text":"\u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c\u540e\u53f0\u7684\u5b89\u88c5\u76ee\u5f55\u4e3a app/Admin \uff0c\u4e4b\u540e\u5927\u90e8\u5206\u7684\u540e\u53f0\u5f00\u53d1\u7f16\u7801\u5de5\u4f5c\u90fd\u662f\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u8fdb\u884c\u3002 app/Admin \u251c\u2500\u2500 Controllers \u2502 \u251c\u2500\u2500 AuthController.php \u2502 \u2514\u2500\u2500 HomeController.php \u251c\u2500\u2500 Metrics \u2502 \u2514\u2500\u2500 Examples \u2502 \u251c\u2500\u2500 NewDevices.php \u2502 \u251c\u2500\u2500 NewUsers.php \u2502 \u251c\u2500\u2500 ProductOrders.php \u2502 \u251c\u2500\u2500 Sessions.php \u2502 \u251c\u2500\u2500 Tickets.php \u2502 \u2514\u2500\u2500 TotalUsers.php \u251c\u2500\u2500 bootstrap.php \u2514\u2500\u2500 routes.php app/Admin/routes.php \u6587\u4ef6\u7528\u6765\u914d\u7f6e\u540e\u53f0\u8def\u7531\u3002 app/Admin/bootstrap.php \u662f dcat-admin \u7684\u542f\u52a8\u6587\u4ef6, \u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003\u6587\u4ef6\u91cc\u9762\u7684\u6ce8\u91ca. app/Admin/Controllers \u76ee\u5f55\u7528\u6765\u5b58\u653e\u540e\u53f0\u63a7\u5236\u5668\u6587\u4ef6\uff0c\u8be5\u76ee\u5f55\u4e0b\u7684 HomeController.php \u6587\u4ef6\u662f\u540e\u53f0\u9996\u9875\u7684\u663e\u793a\u63a7\u5236\u5668\uff0c AuthController.php \u4e3a\u540e\u53f0\u7ba1\u7406\u5458\u767b\u5f55\u9274\u6743\u63a7\u5236\u5668\u3002 app/Admin/Metrics/Examples \u91cc\u9762\u5b58\u653e\u7684\u662f \u6570\u636e\u7edf\u8ba1\u5361\u7247(Metric Card) \u7684\u793a\u4f8b\u4ee3\u7801.","title":"\u540e\u53f0\u9879\u76ee\u6587\u4ef6"},{"location":"2.x/installation/#_7","text":"\u540e\u53f0\u6240\u9700\u7684\u524d\u7aef\u9759\u6001\u6587\u4ef6\u5728 /public/vendor/dcat-admin \u76ee\u5f55\u4e0b\u3002","title":"\u9759\u6001\u6587\u4ef6"},{"location":"2.x/installation/#_8","text":"\u5bf9\u5e94\u7684\u6570\u636e\u8868\u8fc1\u79fb\u6587\u4ef6\u5728 /database/migrations \u76ee\u5f55\u4e0b\u3002","title":"\u6570\u636e\u8868\u8fc1\u79fb\u6587\u4ef6"},{"location":"2.x/installation/#_9","text":"\u8bed\u8a00\u5305\u6587\u4ef6\u5728 /resources/lang \u76ee\u5f55\u4e0b\u3002","title":"\u8bed\u8a00\u5305"},{"location":"2.x/introduction/","text":"Dcat Admin Dcat Admin \u662f\u4e00\u4e2a\u57fa\u4e8e laravel-admin \u4e8c\u6b21\u5f00\u53d1\u800c\u6210\u7684\u540e\u53f0\u7cfb\u7edf\u6784\u5efa\u5de5\u5177\uff0c\u53ea\u9700\u6781\u5c11\u7684\u4ee3\u7801\u5373\u53ef\u5feb\u901f\u6784\u5efa\u51fa\u4e00\u4e2a\u529f\u80fd\u5b8c\u5584\u7684\u9ad8\u989c\u503c\u540e\u53f0\u7cfb\u7edf\u3002\u652f\u6301\u9875\u9762\u4e00\u952e\u751f\u6210CURD\u4ee3\u7801\uff0c\u5185\u7f6e\u4e30\u5bcc\u7684\u540e\u53f0\u5e38\u7528\u7ec4\u4ef6\uff0c\u5f00\u7bb1\u5373\u7528\uff0c\u8ba9\u5f00\u53d1\u8005\u544a\u522b\u5197\u6742\u7684HTML\u4ee3\u7801\uff0c\u5bf9\u540e\u7aef\u5f00\u53d1\u8005\u975e\u5e38\u53cb\u597d\u3002 \u6280\u672f\u6808 Laravel AdminLTE3 Bootstrap4 jQuery3 \u7279\u6027 \u7b80\u6d01\u4f18\u96c5\u3001\u7075\u6d3b\u53ef\u6269\u5c55\u7684API \u7528\u6237\u7ba1\u7406 RBAC\u6743\u9650\u7ba1\u7406\uff0c\u652f\u6301\u65e0\u9650\u7ea7\u6743\u9650\u8282\u70b9 \u83dc\u5355\u7ba1\u7406 \u4f7f\u7528pjax\u6784\u5efa\u65e0\u5237\u65b0\u9875\u9762\uff0c\u652f\u6301 \u6309\u9700\u52a0\u8f7d \u9759\u6001\u8d44\u6e90\uff0c\u53ef\u4ee5\u65e0\u9650\u6269\u5c55\u7ec4\u4ef6\u800c\u4e0d\u5f71\u54cd\u6574\u4f53\u6027\u80fd \u677e\u8026\u5408\u7684\u9875\u9762\u6784\u5efa\u4e0e\u6570\u636e\u64cd\u4f5c\u8bbe\u8ba1\uff0c\u53ef\u8f7b\u677e\u5207\u6362\u6570\u636e\u6e90 \u81ea\u5b9a\u4e49\u9875\u9762 \u81ea\u5b9a\u4e49\u4e3b\u9898\u914d\u8272 \u591a\u4e3b\u9898\u5207\u6362\u529f\u80fd\uff0c\u5185\u7f6e\u591a\u79cd\u4e3b\u9898\u8272 \u53ef\u8f7b\u677e\u6784\u5efa\u65e0\u83dc\u5355\u680f\u7684\u72ec\u7acb\u9875\u9762\uff08\u5982\u53ef\u7528\u4e8e\u6784\u5efa\u5f39\u7a97\u9009\u62e9\u5668\u7b49\u529f\u80fd\uff09 \u63d2\u4ef6\u529f\u80fd \u53ef\u89c6\u5316\u4ee3\u7801\u751f\u6210\u5668\uff0c\u53ef\u6839\u636e\u6570\u636e\u8868\u4e00\u952e\u751f\u6210\u589e\u5220\u6539\u67e5\u9875\u9762 \u6570\u636e\u8868\u683c\u6784\u5efa\u5de5\u5177\uff0c\u5185\u7f6e\u4e30\u5bcc\u7684\u8868\u683c\u5e38\u7528\u529f\u80fd\uff08\u5982\u7ec4\u5408\u8868\u5934\u3001\u6570\u636e\u5bfc\u51fa\u3001\u641c\u7d22\u3001\u5feb\u6377\u521b\u5efa\u3001\u6279\u91cf\u64cd\u4f5c\u7b49\uff09 \u6811\u72b6\u8868\u683c\u529f\u80fd\u6784\u5efa\u5de5\u5177\uff0c\u652f\u6301\u5206\u9875\u548c\u70b9\u51fb\u52a0\u8f7d \u6570\u636e\u8868\u5355\u6784\u5efa\u5de5\u5177\uff0c\u5185\u7f6e\u4e30\u5bcc\u7684\u8868\u5355\u7c7b\u578b\uff0c\u652f\u6301\u8868\u5355\u5f02\u6b65\u63d0\u4ea4 \u5206\u6b65\u8868\u5355\u6784\u5efa\u5de5\u5177 \u5f39\u7a97\u8868\u5355\u6784\u5efa\u5de5\u5177 \u6570\u636e\u8be6\u60c5\u9875\u6784\u5efa\u5de5\u5177 \u65e0\u9650\u5c42\u7ea7\u6811\u72b6\u9875\u9762\u6784\u5efa\u5de5\u5177\uff0c\u652f\u6301\u7528\u62d6\u62fd\u7684\u65b9\u5f0f\u5b9e\u73b0\u6570\u636e\u7684\u5c42\u7ea7\u3001\u6392\u5e8f\u7b49\u64cd\u4f5c \u5185\u7f6e\u4e30\u5bcc\u7684\u5e38\u7528\u9875\u9762\u7ec4\u4ef6\uff08\u5982\u56fe\u8868\u3001\u6570\u636e\u7edf\u8ba1\u5361\u7247\u3001\u4e0b\u62c9\u83dc\u5355\u3001Tab\u5361\u7247\u3001\u63d0\u793a\u5de5\u5177\u7b49\uff09 Section \u529f\u80fd\uff08\u7c7b\u4f3c Wordpress \u7684 Filter \u548c blade \u6a21\u677f\u7684 section \u6807\u7b7e\uff09 \u5f02\u6b65\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\uff0c\u652f\u6301\u5206\u5757\u591a\u7ebf\u7a0b\u4e0a\u4f20 \u591a\u5e94\u7528(\u591a\u540e\u53f0) \u63d2\u4ef6\u5e02\u573a\uff0c\u53ea\u9700\u5728\u7ba1\u7406\u9875\u9762\u8f7b\u8f7b\u70b9\u51fb\u9f20\u6807\u5373\u53ef\u5b8c\u6210\u63d2\u4ef6\u7684\u5b89\u88c5\u3001\u66f4\u65b0\u548c\u5378\u8f7d\u7b49\u64cd\u4f5c( \u6682\u672a\u5b9e\u73b0 ) \u4ea4\u6d41 QQ\u7fa4 704661955 \u6269\u5c55\u5f00\u53d1\u8005QQ\u7fa4 679738409 \u52a0\u5165\u6211\u4eec \u5982\u679c\u60a8\u5bf9\u8fd9\u4e2a\u9879\u76ee\u611f\u5174\u8da3\uff0c\u975e\u5e38\u6b22\u8fce\u52a0\u5165\u9879\u76ee\u5f00\u53d1\u56e2\u961f\uff0c\u53c2\u4e0e\u8fd9\u4e2a\u9879\u76ee\u7684\u529f\u80fd\u7ef4\u62a4\u4e0e\u5f00\u53d1\u3002\u6b22\u8fce\u4efb\u4f55\u5f62\u5f0f\u7684\u8d21\u732e\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u4ee5\u4e0b\uff09\uff1a \u8d21\u732e\u4ee3\u7801 \u5b8c\u5584\u6587\u6863 \u64b0\u5199\u6559\u7a0b \u5b8c\u5584\u6ce8\u91ca ...","title":"Dcat Admin"},{"location":"2.x/introduction/#dcat-admin","text":"Dcat Admin \u662f\u4e00\u4e2a\u57fa\u4e8e laravel-admin \u4e8c\u6b21\u5f00\u53d1\u800c\u6210\u7684\u540e\u53f0\u7cfb\u7edf\u6784\u5efa\u5de5\u5177\uff0c\u53ea\u9700\u6781\u5c11\u7684\u4ee3\u7801\u5373\u53ef\u5feb\u901f\u6784\u5efa\u51fa\u4e00\u4e2a\u529f\u80fd\u5b8c\u5584\u7684\u9ad8\u989c\u503c\u540e\u53f0\u7cfb\u7edf\u3002\u652f\u6301\u9875\u9762\u4e00\u952e\u751f\u6210CURD\u4ee3\u7801\uff0c\u5185\u7f6e\u4e30\u5bcc\u7684\u540e\u53f0\u5e38\u7528\u7ec4\u4ef6\uff0c\u5f00\u7bb1\u5373\u7528\uff0c\u8ba9\u5f00\u53d1\u8005\u544a\u522b\u5197\u6742\u7684HTML\u4ee3\u7801\uff0c\u5bf9\u540e\u7aef\u5f00\u53d1\u8005\u975e\u5e38\u53cb\u597d\u3002","title":"Dcat Admin"},{"location":"2.x/introduction/#_1","text":"Laravel AdminLTE3 Bootstrap4 jQuery3","title":"\u6280\u672f\u6808"},{"location":"2.x/introduction/#_2","text":"\u7b80\u6d01\u4f18\u96c5\u3001\u7075\u6d3b\u53ef\u6269\u5c55\u7684API \u7528\u6237\u7ba1\u7406 RBAC\u6743\u9650\u7ba1\u7406\uff0c\u652f\u6301\u65e0\u9650\u7ea7\u6743\u9650\u8282\u70b9 \u83dc\u5355\u7ba1\u7406 \u4f7f\u7528pjax\u6784\u5efa\u65e0\u5237\u65b0\u9875\u9762\uff0c\u652f\u6301 \u6309\u9700\u52a0\u8f7d \u9759\u6001\u8d44\u6e90\uff0c\u53ef\u4ee5\u65e0\u9650\u6269\u5c55\u7ec4\u4ef6\u800c\u4e0d\u5f71\u54cd\u6574\u4f53\u6027\u80fd \u677e\u8026\u5408\u7684\u9875\u9762\u6784\u5efa\u4e0e\u6570\u636e\u64cd\u4f5c\u8bbe\u8ba1\uff0c\u53ef\u8f7b\u677e\u5207\u6362\u6570\u636e\u6e90 \u81ea\u5b9a\u4e49\u9875\u9762 \u81ea\u5b9a\u4e49\u4e3b\u9898\u914d\u8272 \u591a\u4e3b\u9898\u5207\u6362\u529f\u80fd\uff0c\u5185\u7f6e\u591a\u79cd\u4e3b\u9898\u8272 \u53ef\u8f7b\u677e\u6784\u5efa\u65e0\u83dc\u5355\u680f\u7684\u72ec\u7acb\u9875\u9762\uff08\u5982\u53ef\u7528\u4e8e\u6784\u5efa\u5f39\u7a97\u9009\u62e9\u5668\u7b49\u529f\u80fd\uff09 \u63d2\u4ef6\u529f\u80fd \u53ef\u89c6\u5316\u4ee3\u7801\u751f\u6210\u5668\uff0c\u53ef\u6839\u636e\u6570\u636e\u8868\u4e00\u952e\u751f\u6210\u589e\u5220\u6539\u67e5\u9875\u9762 \u6570\u636e\u8868\u683c\u6784\u5efa\u5de5\u5177\uff0c\u5185\u7f6e\u4e30\u5bcc\u7684\u8868\u683c\u5e38\u7528\u529f\u80fd\uff08\u5982\u7ec4\u5408\u8868\u5934\u3001\u6570\u636e\u5bfc\u51fa\u3001\u641c\u7d22\u3001\u5feb\u6377\u521b\u5efa\u3001\u6279\u91cf\u64cd\u4f5c\u7b49\uff09 \u6811\u72b6\u8868\u683c\u529f\u80fd\u6784\u5efa\u5de5\u5177\uff0c\u652f\u6301\u5206\u9875\u548c\u70b9\u51fb\u52a0\u8f7d \u6570\u636e\u8868\u5355\u6784\u5efa\u5de5\u5177\uff0c\u5185\u7f6e\u4e30\u5bcc\u7684\u8868\u5355\u7c7b\u578b\uff0c\u652f\u6301\u8868\u5355\u5f02\u6b65\u63d0\u4ea4 \u5206\u6b65\u8868\u5355\u6784\u5efa\u5de5\u5177 \u5f39\u7a97\u8868\u5355\u6784\u5efa\u5de5\u5177 \u6570\u636e\u8be6\u60c5\u9875\u6784\u5efa\u5de5\u5177 \u65e0\u9650\u5c42\u7ea7\u6811\u72b6\u9875\u9762\u6784\u5efa\u5de5\u5177\uff0c\u652f\u6301\u7528\u62d6\u62fd\u7684\u65b9\u5f0f\u5b9e\u73b0\u6570\u636e\u7684\u5c42\u7ea7\u3001\u6392\u5e8f\u7b49\u64cd\u4f5c \u5185\u7f6e\u4e30\u5bcc\u7684\u5e38\u7528\u9875\u9762\u7ec4\u4ef6\uff08\u5982\u56fe\u8868\u3001\u6570\u636e\u7edf\u8ba1\u5361\u7247\u3001\u4e0b\u62c9\u83dc\u5355\u3001Tab\u5361\u7247\u3001\u63d0\u793a\u5de5\u5177\u7b49\uff09 Section \u529f\u80fd\uff08\u7c7b\u4f3c Wordpress \u7684 Filter \u548c blade \u6a21\u677f\u7684 section \u6807\u7b7e\uff09 \u5f02\u6b65\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\uff0c\u652f\u6301\u5206\u5757\u591a\u7ebf\u7a0b\u4e0a\u4f20 \u591a\u5e94\u7528(\u591a\u540e\u53f0) \u63d2\u4ef6\u5e02\u573a\uff0c\u53ea\u9700\u5728\u7ba1\u7406\u9875\u9762\u8f7b\u8f7b\u70b9\u51fb\u9f20\u6807\u5373\u53ef\u5b8c\u6210\u63d2\u4ef6\u7684\u5b89\u88c5\u3001\u66f4\u65b0\u548c\u5378\u8f7d\u7b49\u64cd\u4f5c( \u6682\u672a\u5b9e\u73b0 )","title":"\u7279\u6027"},{"location":"2.x/introduction/#_3","text":"QQ\u7fa4 704661955 \u6269\u5c55\u5f00\u53d1\u8005QQ\u7fa4 679738409","title":"\u4ea4\u6d41"},{"location":"2.x/introduction/#_4","text":"\u5982\u679c\u60a8\u5bf9\u8fd9\u4e2a\u9879\u76ee\u611f\u5174\u8da3\uff0c\u975e\u5e38\u6b22\u8fce\u52a0\u5165\u9879\u76ee\u5f00\u53d1\u56e2\u961f\uff0c\u53c2\u4e0e\u8fd9\u4e2a\u9879\u76ee\u7684\u529f\u80fd\u7ef4\u62a4\u4e0e\u5f00\u53d1\u3002\u6b22\u8fce\u4efb\u4f55\u5f62\u5f0f\u7684\u8d21\u732e\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u4ee5\u4e0b\uff09\uff1a \u8d21\u732e\u4ee3\u7801 \u5b8c\u5584\u6587\u6863 \u64b0\u5199\u6559\u7a0b \u5b8c\u5584\u6ce8\u91ca ...","title":"\u52a0\u5165\u6211\u4eec"},{"location":"2.x/js/","text":"JS\u7ec4\u4ef6 Dcat Admin \u5185\u7f6e\u4e86\u4e00\u4e9b\u5e38\u7528\u7684JS\u529f\u80fd\u7ec4\u4ef6\uff0c\u901a\u8fc7\u5168\u5c40\u53d8\u91cf Dcat \u53ef\u4ee5\u8bbf\u95ee\u5230\u8fd9\u4e9b\u529f\u80fd\u65b9\u6cd5\u3002 \u76d1\u542cJS\u811a\u672c\u52a0\u8f7d\u5b8c\u6bd5\u4e8b\u4ef6 (ready) \u901a\u8fc7 Dcat.ready \u65b9\u6cd5\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u5728\u6240\u6709\u7684 JS \u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u6bd5\u540e\u6267\u884c\u3002 {tip} \u53ea\u6709\u5728\u6a21\u677f\u6587\u4ef6\u4e2d\u5199 JS \u4ee3\u7801\u624d\u9700\u8981\u4f7f\u7528 Dcat.ready \uff0c\u5f53\u5728 php \u4ee3\u7801\u4e2d\u4f7f\u7528 Dcat\\Admin\\Admin::script \u65b9\u6cd5\u6dfb\u52a0 JS \u4ee3\u7801\u65f6\u662f\u4e0d\u9700\u8981\u4f7f\u7528 Dcat.ready \u65b9\u6cd5\u7684\u3002\u56e0\u4e3a\u5728\u6784\u5efa\u9875\u9762\u7684\u65f6\u5019\u7cfb\u7edf\u4f1a\u81ea\u52a8\u628a\u4ee3\u7801\u653e\u5728 Dcat.ready \u4e8b\u4ef6\u5185\u6267\u884c\u3002 <div>...</div> <script> Dcat.ready(function () { // \u5199\u4f60\u7684\u903b\u8f91 console.log('\u6240\u6709JS\u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u4e86'); }); </script> \u52a8\u6001\u76d1\u542c\u5143\u7d20\u751f\u6210 (init) \u901a\u8fc7 Dcat.init \u53ef\u4ee5\u76d1\u542c\u52a8\u6001\u751f\u6210\u7684\u9875\u9762\u5143\u7d20\u5e76\u8bbe\u7f6e\u4e00\u4e2a\u56de\u8c03\uff0c\u4e0b\u9762\u6765\u4e3e\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u6765\u6f14\u793a\u7528\u6cd5\uff1a \u5047\u5982\u4e00\u4e2a\u5143\u7d20\u662f JS \u52a8\u6001\u751f\u6210\u7684\uff0c\u5982\u679c\u6211\u4eec\u9700\u8981\u5bf9\u8fd9\u4e2a\u5143\u7d20\u7ed1\u5b9a\u4e00\u4e2a\u70b9\u51fb\u4e8b\u4ef6\u7684\u8bdd\uff0c\u90a3\u4e48\u6211\u4eec\u901a\u5e38\u9700\u8981\u8fd9\u4e48\u505a <div class=\"selector\">test</div> <script> Dcat.ready(function () { // \u9700\u8981\u5148 off \u518d on \u5426\u5219\u9875\u9762\u5237\u65b0\u540e\u4f1a\u9020\u6210\u91cd\u590d\u7ed1\u5b9a\u95ee\u9898 $(document).off('click', '.selector').on('click', '.selector', function () { ... }) }); </script> \u4e0a\u9762\u8fd9\u79cd\u505a\u6cd5\u4e00\u6765\u6bd4\u8f83\u9ebb\u70e6\uff0c\u9700\u8981\u5148 off \u518d on \uff1b\u4e8c\u6765\u65e0\u6cd5\u5bf9\u52a8\u6001\u751f\u6210\u7684\u5143\u7d20\u505a\u4e00\u4e9b\u7279\u6b8a\u5904\u7406\uff0c\u4f8b\u5982\u4f60\u60f3\u5728 .selector \u751f\u6210\u540e\u6539\u53d8\u80cc\u666f\u989c\u8272\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u5c31\u6ca1\u529e\u6cd5\u505a\u5230\u3002 \u5728 Dcat Admin \u4e2d\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 Dcat.init \u65b9\u6cd5\u6765\u76d1\u542c\u5143\u7d20\u52a8\u6001\u751f\u6210\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u89e3\u51b3\u4e0a\u9762\u4e24\u4e2a\u95ee\u9898 <div class=\"selector\">test</div> <script> Dcat.ready(function () { // $this \u662f\u5f53\u524d\u5143\u7d20\u7684jquery dom\u5bf9\u8c61 // id \u662f\u5f53\u524d\u5143\u7d20\u7684id\u5c5e\u6027\uff0c\u5982\u679c\u5f53\u524d\u5143\u7d20\u6ca1\u6709id\u5219\u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2a\u968f\u673aid Dcat.init('.selector', function ($this, id) { // \u4fee\u6539\u5143\u7d20\u7684\u80cc\u666f\u8272 $this.css({background: \"#fff\"}); // \u8fd9\u91cc\u4e0d\u9700\u8981 off \u518d\u91cd\u65b0 on\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u533f\u540d\u51fd\u6570\u53ea\u4f1a\u6267\u884c\u4e00\u6b21 $this.on('click', function () { ... }); }); }); </script> Dcat.init \u63a5\u53d7\u4e24\u4e2a\u53c2\u6570 selector \u9700\u8981\u76d1\u542c\u7684\u5143\u7d20\u7684 css\u9009\u62e9\u5668 callback \u4e8b\u4ef6\u56de\u8c03\uff0c\u5f53\u5143\u7d20\u751f\u6210\u65f6\u89e6\u53d1\uff0c\u4e14\u53ea\u89e6\u53d1\u4e00\u6b21 \u5176\u4e2d callback \u56de\u8c03\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\u5982\u4e0b $this \u662f\u5f53\u524d\u5143\u7d20\u7684jquery dom\u5bf9\u8c61 id \u662f\u5f53\u524d\u5143\u7d20\u7684id\u5c5e\u6027\uff0c\u5982\u679c\u5f53\u524d\u5143\u7d20\u6ca1\u6709id\u5219\u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2a\u968f\u673aid \u624b\u52a8\u89e6\u53d1JS\u811a\u672c\u52a0\u8f7d\u5b8c\u6bd5\u4e8b\u4ef6 \u901a\u8fc7 Dcat.triggerReady \u65b9\u6cd5\u53ef\u4ee5\u624b\u52a8\u89e6\u53d1 JS \u811a\u672c\u52a0\u8f7d\u5b8c\u6bd5\u4e8b\u4ef6\uff0c\u8fd9\u5c31\u610f\u5473\u7740\u4f1a\u81ea\u52a8\u6267\u884c\u5728\u6b64\u4e4b\u524d\u6240\u6709\u901a\u8fc7 Dcat.ready \u65b9\u6cd5\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u3002 {tip} \u8fd9\u4e2a\u529f\u80fd\u666e\u901a\u5f00\u53d1\u5f88\u5c11\u4f1a\u7528\u5230\uff0c\u53ea\u6709\u4e00\u4e9b\u6bd4\u8f83\u6df1\u5ea6\u7684\u7ec4\u4ef6\u5b9a\u5236\u4f1a\u7528\u5230\uff0c\u6bd4\u5982 \u8868\u5355\u5f39\u7a97 \u529f\u80fd\u5c31\u7528\u5230\u4e86\u6b64\u65b9\u6cd5\u3002 Dcat.triggerReady(); Pjax\u5237\u65b0\u9875\u9762 \u901a\u8fc7 Dcat.reload \u65b9\u6cd5\u53ef\u4ee5\u8c03\u7528 Pjax.reload \u65b9\u6cd5\u5b9e\u73b0\u9875\u9762\u5237\u65b0\u548c\u8df3\u8f6c\u529f\u80fd\u3002 \u5237\u65b0\u5f53\u524d\u9875\u9762 Admin::script( <<<JS // 3\u79d2\u540e\u5237\u65b0\u5f53\u524d\u9875\u9762 setTimeout(function () { Dcat.reload(); }, 3000); JS ); \u8df3\u8f6c\u9875\u9762 $url = admin_url('auth/users'); Admin::script( <<<JS // 3\u79d2\u540e\u8df3\u8f6c\u5230 admin/auth/users \u9875\u9762 setTimeout(function () { Dcat.reload('{$url}'); }, 3000); JS ); Toastr\u63d0\u793a\u6846 Dcat Admin \u96c6\u6210\u4e86 Toastr \u63d2\u4ef6\uff0c\u4e0b\u9762\u662f\u4f7f\u7528\u65b9\u6cd5 success Dcat.success('\u66f4\u65b0\u6210\u529f'); // \u4f7f\u7528\u6807\u9898 Dcat.success('\u66f4\u65b0\u6210\u529f', '\u6211\u662f\u6807\u9898'); // \u4f20\u9012\u53c2\u6570 Dcat.success('\u66f4\u65b0\u6210\u529f', null, { timeOut: 5000, // 5\u79d2\u540e\u81ea\u52a8\u6d88\u5931 }); error Dcat.error('\u670d\u52a1\u5668\u51fa\u73b0\u672a\u77e5\u9519\u8bef'); // \u4f7f\u7528\u6807\u9898 Dcat.error('\u670d\u52a1\u5668\u51fa\u73b0\u672a\u77e5\u9519\u8bef', '\u6211\u662f\u6807\u9898'); // \u4f20\u9012\u53c2\u6570 Dcat.error('\u670d\u52a1\u5668\u51fa\u73b0\u672a\u77e5\u9519\u8bef', null, { timeOut: 5000, // 5\u79d2\u540e\u81ea\u52a8\u6d88\u5931 }); warning Dcat.warning('\u8b66\u544a'); // \u4f7f\u7528\u6807\u9898 Dcat.warning('\u8b66\u544a', '\u6211\u662f\u6807\u9898'); // \u4f20\u9012\u53c2\u6570 Dcat.warning('\u8b66\u544a', null, { timeOut: 5000, // 5\u79d2\u540e\u81ea\u52a8\u6d88\u5931 }); info Dcat.info('\u63d0\u793a\u4fe1\u606f'); // \u4f7f\u7528\u6807\u9898 Dcat.info('\u63d0\u793a\u4fe1\u606f', '\u6211\u662f\u6807\u9898'); // \u4f20\u9012\u53c2\u6570 Dcat.info('\u63d0\u793a\u4fe1\u606f', null, { timeOut: 5000, // 5\u79d2\u540e\u81ea\u52a8\u6d88\u5931 }); \u66f4\u591a\u7528\u6cd5\u8bf7\u53c2\u8003 toastr\u5b98\u65b9\u6587\u6863 sweetalert2\u5f39\u7a97 Dcat Admin \u96c6\u6210\u4e86 sweetalert2 \u63d2\u4ef6\uff0c\u4e0b\u9762\u662f\u4f7f\u7528\u65b9\u6cd5 confirm \u901a\u8fc7 Dcat.confirm \u65b9\u6cd5\u53ef\u4ee5\u5f39\u51fa\u786e\u8ba4\u5f39\u7a97\uff0c\u6b64\u65b9\u6cd5\u63a5\u65365\u4e2a\u53c2\u6570 title string \u786e\u8ba4\u4fe1\u606f\u6807\u9898 message string \u786e\u8ba4\u4fe1\u606f\u5185\u5bb9\uff0c\u6b64\u53c2\u6570\u53ef\u4ee5\u4e0d\u4f20 success function \u70b9\u51fb\u786e\u8ba4\u6309\u94ae\u89e6\u53d1\u7684\u56de\u8c03\u51fd\u6570 fail function \u70b9\u51fb\u53d6\u6d88\u6309\u94ae\u89e6\u53d1\u7684\u56de\u8c03\u51fd\u6570\uff0c\u6b64\u53c2\u6570\u53ef\u4ee5\u4e0d\u4f20 options object \u914d\u7f6e\u53c2\u6570\uff0c\u53ef\u53c2\u8003 sweetalert2\u5b98\u65b9\u6587\u6863 Dcat.confirm('\u786e\u8ba4\u8981\u5220\u9664\u8fd9\u884c\u6570\u636e\u5417\uff1f', null, function () { console.log('\u786e\u8ba4\u5220\u9664'); $.post(...); }); success Dcat.swal.success('\u6807\u9898'); Dcat.swal.success('\u6807\u9898', '\u5185\u5bb9'); Dcat.swal.success('\u6807\u9898', '\u5185\u5bb9', { ... }); error Dcat.swal.error('\u6807\u9898'); Dcat.swal.error('\u6807\u9898', '\u5185\u5bb9'); Dcat.swal.error('\u6807\u9898', '\u5185\u5bb9', { ... }); warning Dcat.swal.warning('\u6807\u9898'); Dcat.swal.warning('\u6807\u9898', '\u5185\u5bb9'); Dcat.swal.warning('\u6807\u9898', '\u5185\u5bb9', { ... }); info Dcat.swal.info('\u6807\u9898'); Dcat.swal.info('\u6807\u9898', '\u5185\u5bb9'); Dcat.swal.info('\u6807\u9898', '\u5185\u5bb9', { ... }); \u66f4\u591a\u7528\u6cd5\u8bf7\u53c2\u8003 sweetalert2\u5b98\u65b9\u6587\u6863 layer\u5f39\u51fa\u5c42 Dcat Admin \u96c6\u6210\u4e86 layer\u5f39\u51fa\u5c42 \uff0c\u7528\u6cd5\u8bf7\u53c2\u8003\u5b98\u65b9\u6587\u6863 layer.open({ ... }) Loading\u6548\u679c Dcat Admin \u96c6\u6210\u4e86\u4e09\u79cd\u5e38\u89c1\u7684loading\u6548\u679c\uff0c \u5728\u7ebf\u4f53\u9a8c\u70b9\u6211 \u5168\u5c4f \u901a\u8fc7 Dcat.loading \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e2a\u5360\u6ee1\u5168\u5c4f\u5e55\u7684\u906e\u7f69\u5c42\uff0c\u5e76\u5728\u4e2d\u95f4\u4f4d\u7f6e\u663e\u793a loading \u56fe\u6807\u3002 \u6b64\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a object \u7c7b\u578b\u7684\u53c2\u6570\uff1a \u53c2\u6570 \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 zIndex int 999991014 \u8bbe\u7f6ecss\u7684z-index(\u5c42\u91cd\u53e0\u987a\u5e8f)\u6837\u5f0f width string 58px \u8bbe\u7f6eloading\u56fe\u6807\u5bbd\u5ea6 color string #bacad6 \u8bbe\u7f6eloading\u56fe\u6807\u7684\u989c\u8272 background string transparent \u8bbe\u7f6e\u906e\u7f69\u5c42\u80cc\u666f\u989c\u8272 style string \u8bbe\u7f6eloading\u56fe\u6807\u7684css\u6837\u5f0f // \u5f00\u542floading\u6548\u679c Dcat.loading(); // 3\u79d2\u540e\u81ea\u52a8\u79fb\u9664loading\u6548\u679c setTimeout(function () { Dcat.loading(false); }) \u6548\u679c \u66f4\u6539loading\u56fe\u6807\u7684\u989c\u8272 // \u66f4\u6539\u989c\u8272 Dcat.loading({ color: Dcat.color.primary, }); \u9644\u7740\u4e8e\u6307\u5b9a\u5143\u7d20 \u901a\u8fc7 $.fn.loading \u65b9\u6cd5\u53ef\u4ee5\u628aloading\u6548\u679c\u9644\u7740\u4e8e\u5f53\u524d\u5143\u7d20\uff0c\u6b64\u65b9\u6cd5\u540c\u6837\u63a5\u6536\u4e00\u4e2a object \u7c7b\u578b\u53c2\u6570\uff1a \u53c2\u6570 \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 zIndex int 100 \u8bbe\u7f6ecss\u7684z-index(\u5c42\u91cd\u53e0\u987a\u5e8f)\u6837\u5f0f width string 52px \u8bbe\u7f6eloading\u56fe\u6807\u5bbd\u5ea6 color string #bacad6 \u8bbe\u7f6eloading\u56fe\u6807\u7684\u989c\u8272 background string #fff \u8bbe\u7f6e\u906e\u7f69\u5c42\u80cc\u666f\u989c\u8272 style string \u8bbe\u7f6eloading\u56fe\u6807\u7684css\u6837\u5f0f // \u5f00\u542floading\u6548\u679c $('#card').loading(); // \u5173\u95edloading\u6548\u679c $('#card').loading(false); // \u66f4\u6539loading\u56fe\u6807\u989c\u8272 $('#card').loading({ color: Dcat.color.primary, }); // \u66f4\u6539\u906e\u7f69\u5c42\u989c\u8272 $('#card').loading({ background: '#f3f3f3', }); \u6548\u679c \u6309\u94ae // \u5f00\u542floading\u6548\u679c $('#submit-button').buttonLoading(); // \u5173\u95edloading\u6548\u679c $('#submit-button').buttonLoading(false); \u6548\u679c a\u6807\u7b7e \u70b9\u51fb a \u6807\u7b7e\u540c\u6837\u652f\u6301loading\u6548\u679c // \u5f00\u542floading\u6548\u679c $('a').buttonLoading(); // \u5173\u95edloading\u6548\u679c $('a').buttonLoading(false); \u6548\u679c Ajax\u8868\u5355\u63d0\u4ea4 Dcat Admin \u96c6\u6210\u4e86 jquery-form \u7ec4\u4ef6\u7528\u4e8e\u5b9e\u73b0 ajax \u63d0\u4ea4\u8868\u5355\u529f\u80fd\u3002 \u901a\u8fc7 Dcat.Form \u65b9\u6cd5\u53ef\u4ee5\u5f53\u5373\u53d1\u8d77 ajax \u63d0\u4ea4\u8868\u5355\u8bf7\u6c42\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a object \u7c7b\u578b\u53c2\u6570\uff1a \u53c2\u6570 \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 form string object \u8868\u5355\u7684 jquery \u5bf9\u8c61\u6216\u8005css\u9009\u62e9\u5668 validate bool false \u662f\u5426\u5f00\u542f\u8868\u5355\u9a8c\u8bc1\uff0c\u53ef\u53c2\u8003 \u8868\u5355\u9a8c\u8bc1 errorClass string has-error \u5b57\u6bb5\u9a8c\u8bc1\u51fa\u9519\u65f6\u6dfb\u52a0\u7684\u6837\u5f0f\uff0c\u4e00\u822c\u4f7f\u7528\u9ed8\u8ba4\u503c\u5373\u53ef errorContainerSelector string .with-errors \u8868\u5355\u9519\u8bef\u4fe1\u606f\u5bb9\u5668css\u9009\u62e9\u5668\uff0c\u4e00\u822c\u4f7f\u7528\u9ed8\u8ba4\u503c\u5373\u53ef groupSelector string .form-group,.form-label-group,.form-field \u8868\u5355\u7ec4css\u9009\u62e9\u5668\uff0c\u4e00\u822c\u4f7f\u7528\u9ed8\u8ba4\u503c\u5373\u53ef errorTemplate string \u9519\u8bef\u4fe1\u606f\u6a21\u677f\uff0c\u4f7f\u7528\u9ed8\u8ba4\u503c\u5373\u53ef autoRedirect bool false \u4fdd\u5b58\u6210\u529f\u540e\u81ea\u52a8\u8df3\u8f6c autoRemoveError bool true \u5f53\u8868\u5355\u503c\u53d1\u751f\u53d8\u5316\u65f6\u81ea\u52a8\u79fb\u9664\u8868\u5355\u9519\u8bef\u4fe1\u606f before function \u8868\u5355\u63d0\u4ea4\u4e4b\u524d\u4e8b\u4ef6\uff0c\u8fd4\u56de false \u53ef\u4ee5\u963b\u6b62\u8868\u5355\u7ee7\u7eed\u63d0\u4ea4 after function \u5355\u63d0\u4ea4\u4e4b\u540e\u4e8b\u4ef6(\u4e0d\u8bba\u6210\u529f\u8fd8\u662f\u5931\u8d25\u90fd\u4f1a\u89e6\u53d1)\uff0c\u8fd4\u56de false \u53ef\u4ee5\u4e2d\u6b62\u540e\u7eed\u903b\u8f91 success function \u6210\u529f\u4e8b\u4ef6\uff08\u63a5\u53e3\u8fd4\u56de\u72b6\u6001\u7801\u4e3a 200 \u5219\u5224\u65ad\u4e3a\u6210\u529f\uff09\uff0c\u8fd4\u56de false \u53ef\u4ee5\u4e2d\u6b62\u540e\u7eed\u903b\u8f91 error function \u5931\u8d25\u4e8b\u4ef6\uff08\u63a5\u53e3\u8fd4\u56de\u72b6\u6001\u7801\u975e 200 \u5219\u5224\u65ad\u4e3a\u5931\u8d25\uff09\uff0c\u8fd4\u56de false \u53ef\u4ee5\u4e2d\u6b62\u540e\u7eed\u903b\u8f91 \u57fa\u672c\u7528\u6cd5 <script> Dcat.ready(function () { // ajax\u8868\u5355\u63d0\u4ea4 $('#login-form').form({ validate: true, //\u5f00\u542f\u8868\u5355\u9a8c\u8bc1 before: function (fields, form, opt) { // fields \u4e3a\u8868\u5355\u5185\u5bb9 console.log('\u6240\u6709\u8868\u5355\u5b57\u6bb5\u7684\u503c', fields); if (...) { // \u8fd4\u56de false \u53ef\u4ee5\u963b\u6b62\u8868\u5355\u7ee7\u7eed\u63d0\u4ea4 return false; } }, success: function (response) { // data \u4e3a\u63a5\u53e3\u8fd4\u56de\u6570\u636e if (! response.status) { Dcat.error(response.data.message); return false; } Dcat.success(response.data.message); if (data.redirect) { Dcat.reload(response.data.value) } // \u4e2d\u6b62\u540e\u7eed\u903b\u8f91\uff08\u9ed8\u8ba4\u903b\u8f91\uff09 return false; }, error: function (response) { // \u5f53\u63d0\u4ea4\u8868\u5355\u5931\u8d25\u7684\u65f6\u5019\u4f1a\u6709\u9ed8\u8ba4\u7684\u5904\u7406\u65b9\u6cd5\uff0c\u901a\u5e38\u4f7f\u7528\u9ed8\u8ba4\u7684\u65b9\u5f0f\u5904\u7406\u5373\u53ef var errorData = JSON.parse(response.responseText); if (errorData) { Dcat.error(errorData.message); } else { console.log('\u63d0\u4ea4\u51fa\u9519', response.responseText); } // \u7ec8\u6b62\u540e\u7eed\u903b\u8f91\u6267\u884c return false; }, }); }); </script> \u9ad8\u9636\u7528\u6cd5 \u5982\u679c\u4f60\u60f3\u8981\u5b9e\u73b0\u66f4\u7ec6\u7c92\u5ea6\u7684\u63a7\u5236\uff0c\u53ef\u4ee5\u901a\u8fc7\u7c7b\u4f3c\u4e0b\u9762\u8fd9\u79cd\u65b9\u5f0f\u81ea\u5df1\u7ed1\u5b9a\u63d0\u4ea4\u6309\u94ae\uff0c\u7136\u540e\u63d0\u4ea4\u8868\u5355 var $form = $('#login-form'); // \u7981\u7528\u9ed8\u8ba4\u63d0\u4ea4 $form.on('submit', function () { return false; }); // ajax\u8868\u5355\u63d0\u4ea4 function submit() { Dcat.Form({ form: $form, success: function (response) { if (! response.status) { Dcat.error(response.data.message); return false; } Dcat.success(response.data.message); location.href = response.data.value; return false; }, error: function () { // \u975e200\u72b6\u6001\u7801\u54cd\u5e94\u9519\u8bef } }); } // h5\u8868\u5355\u9a8c\u8bc1 function validateForm() { $form.validator('validate'); // \u5982\u679c\u51fa\u73b0\u9519\u8bef\uff0c\u5219\u8fd4\u56defalse if ($form.find('.has-error').length > 0) { return false; } return true; } // \u7ed1\u5b9a\u767b\u9646\u6309\u94ae\u70b9\u51fb\u4e8b\u4ef6 $form.find('[type=\"submit\"],.submit').click(function (e) { // \u8868\u5355\u9a8c\u8bc1 if (validateForm() === false) { return false; } // \u63d0\u4ea4\u8868\u5355 submit(); return false; }); \u8868\u5355\u9a8c\u8bc1 Dcat Admin \u96c6\u6210\u4e86 bootstrap-validator \u7ec4\u4ef6\u7528\u4e8e\u8868\u5355\u524d\u7aef\u9a8c\u8bc1\u7684\u529f\u80fd\uff0c bootstrap-validator \u662f\u4e00\u6b3e\u652f\u6301H5\u8868\u5355\u9a8c\u8bc1\u7684\u9a8c\u8bc1\u5668\uff0c\u53ea\u9700\u628a\u9a8c\u8bc1\u89c4\u5219\u5199\u5728\u8868\u5355\u5143\u7d20\u7684\u5c5e\u6027\u4e0a\u5373\u53ef\u81ea\u52a8\u5f00\u542f\u9a8c\u8bc1\uff0c\u975e\u5e38\u65b9\u4fbf\u3002 \u6dfb\u52a0\u9a8c\u8bc1\u89c4\u5219 <fieldset class=\"form-label-group form-group position-relative has-icon-left\"> <input minlength=\"5\" <!-- \u52a0\u4e0a\u9a8c\u8bc1\u89c4\u5219 --> maxlength=\"20\" <!-- \u52a0\u4e0a\u9a8c\u8bc1\u89c4\u5219 --> required <!-- \u52a0\u4e0a\u9a8c\u8bc1\u89c4\u5219 --> type=\"password\" class=\"form-control\" name=\"password\" > <div class=\"form-control-position\"> <i class=\"feather icon-lock\"></i> </div> <label for=\"password\">{{ trans('admin.password') }}</label> <!-- \u8fd9\u4e2a\u52a0\u4e86 .with-errors \u6837\u5f0f\u7684 div \u5373\u662f\u8868\u5355\u9519\u8bef\u4fe1\u606f\u663e\u793a\u7684\u4f4d\u7f6e\uff0c\u975e\u5e38\u91cd\u8981 --> <div class=\"help-block with-errors\"></div> </fieldset> \u5f00\u542f\u8868\u5355\u9a8c\u8bc1 $('#xx-form').form({ validate: true }); \u6548\u679c \u6269\u5c55\u9a8c\u8bc1\u89c4\u5219 \u901a\u8fc7 Dcat.validator.extend \u65b9\u6cd5\u53ef\u4ee5\u6269\u5c55\u8868\u5355\u9a8c\u8bc1\u89c4\u5219 Dcat.validator.extend('maxlength', function ($el) { return $el.val().length > $el.attr('data-maxlength'); }); \u4f7f\u7528\u81ea\u5b9a\u4e49\u89c4\u5219\u9a8c\u8bc1\u8868\u5355 <input type=\"input\" class=\"form-control\" name=\"username\" data-maxlength=\"20\" <!-- \u4f7f\u7528\u521a\u521a\u81ea\u5b9a\u4e49\u7684\u9a8c\u8bc1\u89c4\u5219 --> data-maxlength-error=\"\u5df2\u8d85\u51fa\u8f93\u5165\u5b57\u7b26\u957f\u5ea6\u9650\u5236\uff0c\u8bf7\u8f93\u516520\u4e2a\u6216\u4ee5\u4e0b\u7684\u5b57\u7b26\" <!-- \u5b9a\u4e49\u9519\u8bef\u4fe1\u606f --> /> \u5185\u7f6e\u9a8c\u8bc1\u89c4\u5219 \u66f4\u591a\u5185\u7f6e\u9a8c\u8bc1\u89c4\u5219\u8bf7\u53c2\u8003 bootstrap-validator\u5b98\u65b9\u6587\u6863","title":"JS\u7ec4\u4ef6"},{"location":"2.x/js/#js","text":"Dcat Admin \u5185\u7f6e\u4e86\u4e00\u4e9b\u5e38\u7528\u7684JS\u529f\u80fd\u7ec4\u4ef6\uff0c\u901a\u8fc7\u5168\u5c40\u53d8\u91cf Dcat \u53ef\u4ee5\u8bbf\u95ee\u5230\u8fd9\u4e9b\u529f\u80fd\u65b9\u6cd5\u3002","title":"JS\u7ec4\u4ef6"},{"location":"2.x/js/#js-ready","text":"\u901a\u8fc7 Dcat.ready \u65b9\u6cd5\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u5728\u6240\u6709\u7684 JS \u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u6bd5\u540e\u6267\u884c\u3002 {tip} \u53ea\u6709\u5728\u6a21\u677f\u6587\u4ef6\u4e2d\u5199 JS \u4ee3\u7801\u624d\u9700\u8981\u4f7f\u7528 Dcat.ready \uff0c\u5f53\u5728 php \u4ee3\u7801\u4e2d\u4f7f\u7528 Dcat\\Admin\\Admin::script \u65b9\u6cd5\u6dfb\u52a0 JS \u4ee3\u7801\u65f6\u662f\u4e0d\u9700\u8981\u4f7f\u7528 Dcat.ready \u65b9\u6cd5\u7684\u3002\u56e0\u4e3a\u5728\u6784\u5efa\u9875\u9762\u7684\u65f6\u5019\u7cfb\u7edf\u4f1a\u81ea\u52a8\u628a\u4ee3\u7801\u653e\u5728 Dcat.ready \u4e8b\u4ef6\u5185\u6267\u884c\u3002 <div>...</div> <script> Dcat.ready(function () { // \u5199\u4f60\u7684\u903b\u8f91 console.log('\u6240\u6709JS\u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u4e86'); }); </script>","title":"\u76d1\u542cJS\u811a\u672c\u52a0\u8f7d\u5b8c\u6bd5\u4e8b\u4ef6 (ready)"},{"location":"2.x/js/#init","text":"\u901a\u8fc7 Dcat.init \u53ef\u4ee5\u76d1\u542c\u52a8\u6001\u751f\u6210\u7684\u9875\u9762\u5143\u7d20\u5e76\u8bbe\u7f6e\u4e00\u4e2a\u56de\u8c03\uff0c\u4e0b\u9762\u6765\u4e3e\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\u6765\u6f14\u793a\u7528\u6cd5\uff1a \u5047\u5982\u4e00\u4e2a\u5143\u7d20\u662f JS \u52a8\u6001\u751f\u6210\u7684\uff0c\u5982\u679c\u6211\u4eec\u9700\u8981\u5bf9\u8fd9\u4e2a\u5143\u7d20\u7ed1\u5b9a\u4e00\u4e2a\u70b9\u51fb\u4e8b\u4ef6\u7684\u8bdd\uff0c\u90a3\u4e48\u6211\u4eec\u901a\u5e38\u9700\u8981\u8fd9\u4e48\u505a <div class=\"selector\">test</div> <script> Dcat.ready(function () { // \u9700\u8981\u5148 off \u518d on \u5426\u5219\u9875\u9762\u5237\u65b0\u540e\u4f1a\u9020\u6210\u91cd\u590d\u7ed1\u5b9a\u95ee\u9898 $(document).off('click', '.selector').on('click', '.selector', function () { ... }) }); </script> \u4e0a\u9762\u8fd9\u79cd\u505a\u6cd5\u4e00\u6765\u6bd4\u8f83\u9ebb\u70e6\uff0c\u9700\u8981\u5148 off \u518d on \uff1b\u4e8c\u6765\u65e0\u6cd5\u5bf9\u52a8\u6001\u751f\u6210\u7684\u5143\u7d20\u505a\u4e00\u4e9b\u7279\u6b8a\u5904\u7406\uff0c\u4f8b\u5982\u4f60\u60f3\u5728 .selector \u751f\u6210\u540e\u6539\u53d8\u80cc\u666f\u989c\u8272\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u5c31\u6ca1\u529e\u6cd5\u505a\u5230\u3002 \u5728 Dcat Admin \u4e2d\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 Dcat.init \u65b9\u6cd5\u6765\u76d1\u542c\u5143\u7d20\u52a8\u6001\u751f\u6210\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u89e3\u51b3\u4e0a\u9762\u4e24\u4e2a\u95ee\u9898 <div class=\"selector\">test</div> <script> Dcat.ready(function () { // $this \u662f\u5f53\u524d\u5143\u7d20\u7684jquery dom\u5bf9\u8c61 // id \u662f\u5f53\u524d\u5143\u7d20\u7684id\u5c5e\u6027\uff0c\u5982\u679c\u5f53\u524d\u5143\u7d20\u6ca1\u6709id\u5219\u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2a\u968f\u673aid Dcat.init('.selector', function ($this, id) { // \u4fee\u6539\u5143\u7d20\u7684\u80cc\u666f\u8272 $this.css({background: \"#fff\"}); // \u8fd9\u91cc\u4e0d\u9700\u8981 off \u518d\u91cd\u65b0 on\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u533f\u540d\u51fd\u6570\u53ea\u4f1a\u6267\u884c\u4e00\u6b21 $this.on('click', function () { ... }); }); }); </script> Dcat.init \u63a5\u53d7\u4e24\u4e2a\u53c2\u6570 selector \u9700\u8981\u76d1\u542c\u7684\u5143\u7d20\u7684 css\u9009\u62e9\u5668 callback \u4e8b\u4ef6\u56de\u8c03\uff0c\u5f53\u5143\u7d20\u751f\u6210\u65f6\u89e6\u53d1\uff0c\u4e14\u53ea\u89e6\u53d1\u4e00\u6b21 \u5176\u4e2d callback \u56de\u8c03\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\u5982\u4e0b $this \u662f\u5f53\u524d\u5143\u7d20\u7684jquery dom\u5bf9\u8c61 id \u662f\u5f53\u524d\u5143\u7d20\u7684id\u5c5e\u6027\uff0c\u5982\u679c\u5f53\u524d\u5143\u7d20\u6ca1\u6709id\u5219\u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2a\u968f\u673aid","title":"\u52a8\u6001\u76d1\u542c\u5143\u7d20\u751f\u6210 (init)"},{"location":"2.x/js/#js_1","text":"\u901a\u8fc7 Dcat.triggerReady \u65b9\u6cd5\u53ef\u4ee5\u624b\u52a8\u89e6\u53d1 JS \u811a\u672c\u52a0\u8f7d\u5b8c\u6bd5\u4e8b\u4ef6\uff0c\u8fd9\u5c31\u610f\u5473\u7740\u4f1a\u81ea\u52a8\u6267\u884c\u5728\u6b64\u4e4b\u524d\u6240\u6709\u901a\u8fc7 Dcat.ready \u65b9\u6cd5\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u3002 {tip} \u8fd9\u4e2a\u529f\u80fd\u666e\u901a\u5f00\u53d1\u5f88\u5c11\u4f1a\u7528\u5230\uff0c\u53ea\u6709\u4e00\u4e9b\u6bd4\u8f83\u6df1\u5ea6\u7684\u7ec4\u4ef6\u5b9a\u5236\u4f1a\u7528\u5230\uff0c\u6bd4\u5982 \u8868\u5355\u5f39\u7a97 \u529f\u80fd\u5c31\u7528\u5230\u4e86\u6b64\u65b9\u6cd5\u3002 Dcat.triggerReady();","title":"\u624b\u52a8\u89e6\u53d1JS\u811a\u672c\u52a0\u8f7d\u5b8c\u6bd5\u4e8b\u4ef6"},{"location":"2.x/js/#pjax","text":"\u901a\u8fc7 Dcat.reload \u65b9\u6cd5\u53ef\u4ee5\u8c03\u7528 Pjax.reload \u65b9\u6cd5\u5b9e\u73b0\u9875\u9762\u5237\u65b0\u548c\u8df3\u8f6c\u529f\u80fd\u3002 \u5237\u65b0\u5f53\u524d\u9875\u9762 Admin::script( <<<JS // 3\u79d2\u540e\u5237\u65b0\u5f53\u524d\u9875\u9762 setTimeout(function () { Dcat.reload(); }, 3000); JS ); \u8df3\u8f6c\u9875\u9762 $url = admin_url('auth/users'); Admin::script( <<<JS // 3\u79d2\u540e\u8df3\u8f6c\u5230 admin/auth/users \u9875\u9762 setTimeout(function () { Dcat.reload('{$url}'); }, 3000); JS );","title":"Pjax\u5237\u65b0\u9875\u9762"},{"location":"2.x/js/#toastr","text":"Dcat Admin \u96c6\u6210\u4e86 Toastr \u63d2\u4ef6\uff0c\u4e0b\u9762\u662f\u4f7f\u7528\u65b9\u6cd5","title":"Toastr\u63d0\u793a\u6846"},{"location":"2.x/js/#success","text":"Dcat.success('\u66f4\u65b0\u6210\u529f'); // \u4f7f\u7528\u6807\u9898 Dcat.success('\u66f4\u65b0\u6210\u529f', '\u6211\u662f\u6807\u9898'); // \u4f20\u9012\u53c2\u6570 Dcat.success('\u66f4\u65b0\u6210\u529f', null, { timeOut: 5000, // 5\u79d2\u540e\u81ea\u52a8\u6d88\u5931 });","title":"success"},{"location":"2.x/js/#error","text":"Dcat.error('\u670d\u52a1\u5668\u51fa\u73b0\u672a\u77e5\u9519\u8bef'); // \u4f7f\u7528\u6807\u9898 Dcat.error('\u670d\u52a1\u5668\u51fa\u73b0\u672a\u77e5\u9519\u8bef', '\u6211\u662f\u6807\u9898'); // \u4f20\u9012\u53c2\u6570 Dcat.error('\u670d\u52a1\u5668\u51fa\u73b0\u672a\u77e5\u9519\u8bef', null, { timeOut: 5000, // 5\u79d2\u540e\u81ea\u52a8\u6d88\u5931 });","title":"error"},{"location":"2.x/js/#warning","text":"Dcat.warning('\u8b66\u544a'); // \u4f7f\u7528\u6807\u9898 Dcat.warning('\u8b66\u544a', '\u6211\u662f\u6807\u9898'); // \u4f20\u9012\u53c2\u6570 Dcat.warning('\u8b66\u544a', null, { timeOut: 5000, // 5\u79d2\u540e\u81ea\u52a8\u6d88\u5931 });","title":"warning"},{"location":"2.x/js/#info","text":"Dcat.info('\u63d0\u793a\u4fe1\u606f'); // \u4f7f\u7528\u6807\u9898 Dcat.info('\u63d0\u793a\u4fe1\u606f', '\u6211\u662f\u6807\u9898'); // \u4f20\u9012\u53c2\u6570 Dcat.info('\u63d0\u793a\u4fe1\u606f', null, { timeOut: 5000, // 5\u79d2\u540e\u81ea\u52a8\u6d88\u5931 }); \u66f4\u591a\u7528\u6cd5\u8bf7\u53c2\u8003 toastr\u5b98\u65b9\u6587\u6863","title":"info"},{"location":"2.x/js/#sweetalert2","text":"Dcat Admin \u96c6\u6210\u4e86 sweetalert2 \u63d2\u4ef6\uff0c\u4e0b\u9762\u662f\u4f7f\u7528\u65b9\u6cd5","title":"sweetalert2\u5f39\u7a97"},{"location":"2.x/js/#confirm","text":"\u901a\u8fc7 Dcat.confirm \u65b9\u6cd5\u53ef\u4ee5\u5f39\u51fa\u786e\u8ba4\u5f39\u7a97\uff0c\u6b64\u65b9\u6cd5\u63a5\u65365\u4e2a\u53c2\u6570 title string \u786e\u8ba4\u4fe1\u606f\u6807\u9898 message string \u786e\u8ba4\u4fe1\u606f\u5185\u5bb9\uff0c\u6b64\u53c2\u6570\u53ef\u4ee5\u4e0d\u4f20 success function \u70b9\u51fb\u786e\u8ba4\u6309\u94ae\u89e6\u53d1\u7684\u56de\u8c03\u51fd\u6570 fail function \u70b9\u51fb\u53d6\u6d88\u6309\u94ae\u89e6\u53d1\u7684\u56de\u8c03\u51fd\u6570\uff0c\u6b64\u53c2\u6570\u53ef\u4ee5\u4e0d\u4f20 options object \u914d\u7f6e\u53c2\u6570\uff0c\u53ef\u53c2\u8003 sweetalert2\u5b98\u65b9\u6587\u6863 Dcat.confirm('\u786e\u8ba4\u8981\u5220\u9664\u8fd9\u884c\u6570\u636e\u5417\uff1f', null, function () { console.log('\u786e\u8ba4\u5220\u9664'); $.post(...); });","title":"confirm"},{"location":"2.x/js/#success_1","text":"Dcat.swal.success('\u6807\u9898'); Dcat.swal.success('\u6807\u9898', '\u5185\u5bb9'); Dcat.swal.success('\u6807\u9898', '\u5185\u5bb9', { ... });","title":"success"},{"location":"2.x/js/#error_1","text":"Dcat.swal.error('\u6807\u9898'); Dcat.swal.error('\u6807\u9898', '\u5185\u5bb9'); Dcat.swal.error('\u6807\u9898', '\u5185\u5bb9', { ... });","title":"error"},{"location":"2.x/js/#warning_1","text":"Dcat.swal.warning('\u6807\u9898'); Dcat.swal.warning('\u6807\u9898', '\u5185\u5bb9'); Dcat.swal.warning('\u6807\u9898', '\u5185\u5bb9', { ... });","title":"warning"},{"location":"2.x/js/#info_1","text":"Dcat.swal.info('\u6807\u9898'); Dcat.swal.info('\u6807\u9898', '\u5185\u5bb9'); Dcat.swal.info('\u6807\u9898', '\u5185\u5bb9', { ... }); \u66f4\u591a\u7528\u6cd5\u8bf7\u53c2\u8003 sweetalert2\u5b98\u65b9\u6587\u6863","title":"info"},{"location":"2.x/js/#layer","text":"Dcat Admin \u96c6\u6210\u4e86 layer\u5f39\u51fa\u5c42 \uff0c\u7528\u6cd5\u8bf7\u53c2\u8003\u5b98\u65b9\u6587\u6863 layer.open({ ... })","title":"layer\u5f39\u51fa\u5c42"},{"location":"2.x/js/#loading","text":"Dcat Admin \u96c6\u6210\u4e86\u4e09\u79cd\u5e38\u89c1\u7684loading\u6548\u679c\uff0c \u5728\u7ebf\u4f53\u9a8c\u70b9\u6211","title":"Loading\u6548\u679c"},{"location":"2.x/js/#_1","text":"\u901a\u8fc7 Dcat.loading \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e2a\u5360\u6ee1\u5168\u5c4f\u5e55\u7684\u906e\u7f69\u5c42\uff0c\u5e76\u5728\u4e2d\u95f4\u4f4d\u7f6e\u663e\u793a loading \u56fe\u6807\u3002 \u6b64\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a object \u7c7b\u578b\u7684\u53c2\u6570\uff1a \u53c2\u6570 \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 zIndex int 999991014 \u8bbe\u7f6ecss\u7684z-index(\u5c42\u91cd\u53e0\u987a\u5e8f)\u6837\u5f0f width string 58px \u8bbe\u7f6eloading\u56fe\u6807\u5bbd\u5ea6 color string #bacad6 \u8bbe\u7f6eloading\u56fe\u6807\u7684\u989c\u8272 background string transparent \u8bbe\u7f6e\u906e\u7f69\u5c42\u80cc\u666f\u989c\u8272 style string \u8bbe\u7f6eloading\u56fe\u6807\u7684css\u6837\u5f0f // \u5f00\u542floading\u6548\u679c Dcat.loading(); // 3\u79d2\u540e\u81ea\u52a8\u79fb\u9664loading\u6548\u679c setTimeout(function () { Dcat.loading(false); }) \u6548\u679c \u66f4\u6539loading\u56fe\u6807\u7684\u989c\u8272 // \u66f4\u6539\u989c\u8272 Dcat.loading({ color: Dcat.color.primary, });","title":"\u5168\u5c4f"},{"location":"2.x/js/#_2","text":"\u901a\u8fc7 $.fn.loading \u65b9\u6cd5\u53ef\u4ee5\u628aloading\u6548\u679c\u9644\u7740\u4e8e\u5f53\u524d\u5143\u7d20\uff0c\u6b64\u65b9\u6cd5\u540c\u6837\u63a5\u6536\u4e00\u4e2a object \u7c7b\u578b\u53c2\u6570\uff1a \u53c2\u6570 \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 zIndex int 100 \u8bbe\u7f6ecss\u7684z-index(\u5c42\u91cd\u53e0\u987a\u5e8f)\u6837\u5f0f width string 52px \u8bbe\u7f6eloading\u56fe\u6807\u5bbd\u5ea6 color string #bacad6 \u8bbe\u7f6eloading\u56fe\u6807\u7684\u989c\u8272 background string #fff \u8bbe\u7f6e\u906e\u7f69\u5c42\u80cc\u666f\u989c\u8272 style string \u8bbe\u7f6eloading\u56fe\u6807\u7684css\u6837\u5f0f // \u5f00\u542floading\u6548\u679c $('#card').loading(); // \u5173\u95edloading\u6548\u679c $('#card').loading(false); // \u66f4\u6539loading\u56fe\u6807\u989c\u8272 $('#card').loading({ color: Dcat.color.primary, }); // \u66f4\u6539\u906e\u7f69\u5c42\u989c\u8272 $('#card').loading({ background: '#f3f3f3', }); \u6548\u679c","title":"\u9644\u7740\u4e8e\u6307\u5b9a\u5143\u7d20"},{"location":"2.x/js/#_3","text":"// \u5f00\u542floading\u6548\u679c $('#submit-button').buttonLoading(); // \u5173\u95edloading\u6548\u679c $('#submit-button').buttonLoading(false); \u6548\u679c","title":"\u6309\u94ae"},{"location":"2.x/js/#a","text":"\u70b9\u51fb a \u6807\u7b7e\u540c\u6837\u652f\u6301loading\u6548\u679c // \u5f00\u542floading\u6548\u679c $('a').buttonLoading(); // \u5173\u95edloading\u6548\u679c $('a').buttonLoading(false); \u6548\u679c","title":"a\u6807\u7b7e"},{"location":"2.x/js/#ajax","text":"Dcat Admin \u96c6\u6210\u4e86 jquery-form \u7ec4\u4ef6\u7528\u4e8e\u5b9e\u73b0 ajax \u63d0\u4ea4\u8868\u5355\u529f\u80fd\u3002 \u901a\u8fc7 Dcat.Form \u65b9\u6cd5\u53ef\u4ee5\u5f53\u5373\u53d1\u8d77 ajax \u63d0\u4ea4\u8868\u5355\u8bf7\u6c42\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a object \u7c7b\u578b\u53c2\u6570\uff1a \u53c2\u6570 \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 form string object \u8868\u5355\u7684 jquery \u5bf9\u8c61\u6216\u8005css\u9009\u62e9\u5668 validate bool false \u662f\u5426\u5f00\u542f\u8868\u5355\u9a8c\u8bc1\uff0c\u53ef\u53c2\u8003 \u8868\u5355\u9a8c\u8bc1 errorClass string has-error \u5b57\u6bb5\u9a8c\u8bc1\u51fa\u9519\u65f6\u6dfb\u52a0\u7684\u6837\u5f0f\uff0c\u4e00\u822c\u4f7f\u7528\u9ed8\u8ba4\u503c\u5373\u53ef errorContainerSelector string .with-errors \u8868\u5355\u9519\u8bef\u4fe1\u606f\u5bb9\u5668css\u9009\u62e9\u5668\uff0c\u4e00\u822c\u4f7f\u7528\u9ed8\u8ba4\u503c\u5373\u53ef groupSelector string .form-group,.form-label-group,.form-field \u8868\u5355\u7ec4css\u9009\u62e9\u5668\uff0c\u4e00\u822c\u4f7f\u7528\u9ed8\u8ba4\u503c\u5373\u53ef errorTemplate string \u9519\u8bef\u4fe1\u606f\u6a21\u677f\uff0c\u4f7f\u7528\u9ed8\u8ba4\u503c\u5373\u53ef autoRedirect bool false \u4fdd\u5b58\u6210\u529f\u540e\u81ea\u52a8\u8df3\u8f6c autoRemoveError bool true \u5f53\u8868\u5355\u503c\u53d1\u751f\u53d8\u5316\u65f6\u81ea\u52a8\u79fb\u9664\u8868\u5355\u9519\u8bef\u4fe1\u606f before function \u8868\u5355\u63d0\u4ea4\u4e4b\u524d\u4e8b\u4ef6\uff0c\u8fd4\u56de false \u53ef\u4ee5\u963b\u6b62\u8868\u5355\u7ee7\u7eed\u63d0\u4ea4 after function \u5355\u63d0\u4ea4\u4e4b\u540e\u4e8b\u4ef6(\u4e0d\u8bba\u6210\u529f\u8fd8\u662f\u5931\u8d25\u90fd\u4f1a\u89e6\u53d1)\uff0c\u8fd4\u56de false \u53ef\u4ee5\u4e2d\u6b62\u540e\u7eed\u903b\u8f91 success function \u6210\u529f\u4e8b\u4ef6\uff08\u63a5\u53e3\u8fd4\u56de\u72b6\u6001\u7801\u4e3a 200 \u5219\u5224\u65ad\u4e3a\u6210\u529f\uff09\uff0c\u8fd4\u56de false \u53ef\u4ee5\u4e2d\u6b62\u540e\u7eed\u903b\u8f91 error function \u5931\u8d25\u4e8b\u4ef6\uff08\u63a5\u53e3\u8fd4\u56de\u72b6\u6001\u7801\u975e 200 \u5219\u5224\u65ad\u4e3a\u5931\u8d25\uff09\uff0c\u8fd4\u56de false \u53ef\u4ee5\u4e2d\u6b62\u540e\u7eed\u903b\u8f91","title":"Ajax\u8868\u5355\u63d0\u4ea4"},{"location":"2.x/js/#_4","text":"<script> Dcat.ready(function () { // ajax\u8868\u5355\u63d0\u4ea4 $('#login-form').form({ validate: true, //\u5f00\u542f\u8868\u5355\u9a8c\u8bc1 before: function (fields, form, opt) { // fields \u4e3a\u8868\u5355\u5185\u5bb9 console.log('\u6240\u6709\u8868\u5355\u5b57\u6bb5\u7684\u503c', fields); if (...) { // \u8fd4\u56de false \u53ef\u4ee5\u963b\u6b62\u8868\u5355\u7ee7\u7eed\u63d0\u4ea4 return false; } }, success: function (response) { // data \u4e3a\u63a5\u53e3\u8fd4\u56de\u6570\u636e if (! response.status) { Dcat.error(response.data.message); return false; } Dcat.success(response.data.message); if (data.redirect) { Dcat.reload(response.data.value) } // \u4e2d\u6b62\u540e\u7eed\u903b\u8f91\uff08\u9ed8\u8ba4\u903b\u8f91\uff09 return false; }, error: function (response) { // \u5f53\u63d0\u4ea4\u8868\u5355\u5931\u8d25\u7684\u65f6\u5019\u4f1a\u6709\u9ed8\u8ba4\u7684\u5904\u7406\u65b9\u6cd5\uff0c\u901a\u5e38\u4f7f\u7528\u9ed8\u8ba4\u7684\u65b9\u5f0f\u5904\u7406\u5373\u53ef var errorData = JSON.parse(response.responseText); if (errorData) { Dcat.error(errorData.message); } else { console.log('\u63d0\u4ea4\u51fa\u9519', response.responseText); } // \u7ec8\u6b62\u540e\u7eed\u903b\u8f91\u6267\u884c return false; }, }); }); </script>","title":"\u57fa\u672c\u7528\u6cd5"},{"location":"2.x/js/#_5","text":"\u5982\u679c\u4f60\u60f3\u8981\u5b9e\u73b0\u66f4\u7ec6\u7c92\u5ea6\u7684\u63a7\u5236\uff0c\u53ef\u4ee5\u901a\u8fc7\u7c7b\u4f3c\u4e0b\u9762\u8fd9\u79cd\u65b9\u5f0f\u81ea\u5df1\u7ed1\u5b9a\u63d0\u4ea4\u6309\u94ae\uff0c\u7136\u540e\u63d0\u4ea4\u8868\u5355 var $form = $('#login-form'); // \u7981\u7528\u9ed8\u8ba4\u63d0\u4ea4 $form.on('submit', function () { return false; }); // ajax\u8868\u5355\u63d0\u4ea4 function submit() { Dcat.Form({ form: $form, success: function (response) { if (! response.status) { Dcat.error(response.data.message); return false; } Dcat.success(response.data.message); location.href = response.data.value; return false; }, error: function () { // \u975e200\u72b6\u6001\u7801\u54cd\u5e94\u9519\u8bef } }); } // h5\u8868\u5355\u9a8c\u8bc1 function validateForm() { $form.validator('validate'); // \u5982\u679c\u51fa\u73b0\u9519\u8bef\uff0c\u5219\u8fd4\u56defalse if ($form.find('.has-error').length > 0) { return false; } return true; } // \u7ed1\u5b9a\u767b\u9646\u6309\u94ae\u70b9\u51fb\u4e8b\u4ef6 $form.find('[type=\"submit\"],.submit').click(function (e) { // \u8868\u5355\u9a8c\u8bc1 if (validateForm() === false) { return false; } // \u63d0\u4ea4\u8868\u5355 submit(); return false; });","title":"\u9ad8\u9636\u7528\u6cd5"},{"location":"2.x/js/#_6","text":"Dcat Admin \u96c6\u6210\u4e86 bootstrap-validator \u7ec4\u4ef6\u7528\u4e8e\u8868\u5355\u524d\u7aef\u9a8c\u8bc1\u7684\u529f\u80fd\uff0c bootstrap-validator \u662f\u4e00\u6b3e\u652f\u6301H5\u8868\u5355\u9a8c\u8bc1\u7684\u9a8c\u8bc1\u5668\uff0c\u53ea\u9700\u628a\u9a8c\u8bc1\u89c4\u5219\u5199\u5728\u8868\u5355\u5143\u7d20\u7684\u5c5e\u6027\u4e0a\u5373\u53ef\u81ea\u52a8\u5f00\u542f\u9a8c\u8bc1\uff0c\u975e\u5e38\u65b9\u4fbf\u3002","title":"\u8868\u5355\u9a8c\u8bc1"},{"location":"2.x/js/#_7","text":"<fieldset class=\"form-label-group form-group position-relative has-icon-left\"> <input minlength=\"5\" <!-- \u52a0\u4e0a\u9a8c\u8bc1\u89c4\u5219 --> maxlength=\"20\" <!-- \u52a0\u4e0a\u9a8c\u8bc1\u89c4\u5219 --> required <!-- \u52a0\u4e0a\u9a8c\u8bc1\u89c4\u5219 --> type=\"password\" class=\"form-control\" name=\"password\" > <div class=\"form-control-position\"> <i class=\"feather icon-lock\"></i> </div> <label for=\"password\">{{ trans('admin.password') }}</label> <!-- \u8fd9\u4e2a\u52a0\u4e86 .with-errors \u6837\u5f0f\u7684 div \u5373\u662f\u8868\u5355\u9519\u8bef\u4fe1\u606f\u663e\u793a\u7684\u4f4d\u7f6e\uff0c\u975e\u5e38\u91cd\u8981 --> <div class=\"help-block with-errors\"></div> </fieldset>","title":"\u6dfb\u52a0\u9a8c\u8bc1\u89c4\u5219"},{"location":"2.x/js/#_8","text":"$('#xx-form').form({ validate: true }); \u6548\u679c","title":"\u5f00\u542f\u8868\u5355\u9a8c\u8bc1"},{"location":"2.x/js/#_9","text":"\u901a\u8fc7 Dcat.validator.extend \u65b9\u6cd5\u53ef\u4ee5\u6269\u5c55\u8868\u5355\u9a8c\u8bc1\u89c4\u5219 Dcat.validator.extend('maxlength', function ($el) { return $el.val().length > $el.attr('data-maxlength'); }); \u4f7f\u7528\u81ea\u5b9a\u4e49\u89c4\u5219\u9a8c\u8bc1\u8868\u5355 <input type=\"input\" class=\"form-control\" name=\"username\" data-maxlength=\"20\" <!-- \u4f7f\u7528\u521a\u521a\u81ea\u5b9a\u4e49\u7684\u9a8c\u8bc1\u89c4\u5219 --> data-maxlength-error=\"\u5df2\u8d85\u51fa\u8f93\u5165\u5b57\u7b26\u957f\u5ea6\u9650\u5236\uff0c\u8bf7\u8f93\u516520\u4e2a\u6216\u4ee5\u4e0b\u7684\u5b57\u7b26\" <!-- \u5b9a\u4e49\u9519\u8bef\u4fe1\u606f --> />","title":"\u6269\u5c55\u9a8c\u8bc1\u89c4\u5219"},{"location":"2.x/js/#_10","text":"\u66f4\u591a\u5185\u7f6e\u9a8c\u8bc1\u89c4\u5219\u8bf7\u53c2\u8003 bootstrap-validator\u5b98\u65b9\u6587\u6863","title":"\u5185\u7f6e\u9a8c\u8bc1\u89c4\u5219"},{"location":"2.x/laravel-octane/","text":"Laravel Octane Laravel Octane \u662f\u4e00\u4e2a\u57fa\u4e8e Swoole/RoadRunner \u9a71\u52a8\u7684\u53ef\u4ee5\u63d0\u5347 Laravel \u6846\u67b6\u6027\u80fd\u7684\u9879\u76ee\uff0c\u5b89\u88c5\u540e\u53ef\u4ee5\u5927\u5e45\u63d0\u5347 Laravel \u9879\u76ee\u7684\u6027\u80fd\u3002 Dcat Admin \u517c\u5bb9\u4e86 Laravel Octane \u73af\u5883\uff0c\u53ea\u9700\u5728\u914d\u7f6e\u6587\u4ef6 config/octane.php \u4e2d\u52a0\u5165\u5982\u4e0b\u914d\u7f6e\u5373\u53ef\uff1a 'listeners' => [ ..., RequestReceived::class => [ ...Octane::prepareApplicationForNextOperation(), ...Octane::prepareApplicationForNextRequest(), // \u5f00\u542f\u5bf9 Dcat Admin \u7684\u652f\u6301 Dcat\\Admin\\Octane\\Listeners\\FlushAdminState::class, ], ... ], Laravel Octane \u76ee\u524d\u4ecd\u5904\u4e8e beta \u7248\u672c\u9636\u6bb5\uff0c\u5173\u4e8e Laravel Octane \u7684\u5b89\u88c5\u4e0e\u66f4\u591a\u4ecb\u7ecd\u8bf7\u524d\u5f80\u6587\u6863 https://github.com/laravel/octane \u67e5\u770b\u3002","title":"Laravel Octane"},{"location":"2.x/laravel-octane/#laravel-octane","text":"Laravel Octane \u662f\u4e00\u4e2a\u57fa\u4e8e Swoole/RoadRunner \u9a71\u52a8\u7684\u53ef\u4ee5\u63d0\u5347 Laravel \u6846\u67b6\u6027\u80fd\u7684\u9879\u76ee\uff0c\u5b89\u88c5\u540e\u53ef\u4ee5\u5927\u5e45\u63d0\u5347 Laravel \u9879\u76ee\u7684\u6027\u80fd\u3002 Dcat Admin \u517c\u5bb9\u4e86 Laravel Octane \u73af\u5883\uff0c\u53ea\u9700\u5728\u914d\u7f6e\u6587\u4ef6 config/octane.php \u4e2d\u52a0\u5165\u5982\u4e0b\u914d\u7f6e\u5373\u53ef\uff1a 'listeners' => [ ..., RequestReceived::class => [ ...Octane::prepareApplicationForNextOperation(), ...Octane::prepareApplicationForNextRequest(), // \u5f00\u542f\u5bf9 Dcat Admin \u7684\u652f\u6301 Dcat\\Admin\\Octane\\Listeners\\FlushAdminState::class, ], ... ], Laravel Octane \u76ee\u524d\u4ecd\u5904\u4e8e beta \u7248\u672c\u9636\u6bb5\uff0c\u5173\u4e8e Laravel Octane \u7684\u5b89\u88c5\u4e0e\u66f4\u591a\u4ecb\u7ecd\u8bf7\u524d\u5f80\u6587\u6863 https://github.com/laravel/octane \u67e5\u770b\u3002","title":"Laravel Octane"},{"location":"2.x/lazy/","text":"\u5f02\u6b65\u52a0\u8f7d\u57fa\u672c\u4f7f\u7528 {tip} \u5f02\u6b65\u52a0\u8f7d\u529f\u80fd\u652f\u6301 \u9759\u6001\u8d44\u6e90\u6309\u9700\u52a0\u8f7d \u7684\u7279\u6027\uff0c\u76ee\u524d\u5185\u7f6e\u7684 \u6240\u6709\u7ec4\u4ef6 \u90fd\u652f\u6301\u4f7f\u7528\u5f02\u6b65\u6e32\u67d3\u529f\u80fd\uff0c\u5e76\u4e14\u652f\u6301\u5728\u9875\u9762\u7684 \u4efb\u610f\u4f4d\u7f6e \u4e2d\u4f7f\u7528 \u901a\u8fc7\u5f02\u6b65\u52a0\u8f7d\u529f\u80fd\u53ef\u4ee5\u8ba9\u9875\u9762\u4e2d\u7684\u6574\u4f53\u6216\u5c40\u90e8\u7ec4\u4ef6\u4f7f\u7528 ajax \u5f02\u6b65\u6e32\u67d3\uff0c\u4ece\u800c\u63d0\u9ad8\u9875\u9762\u52a0\u8f7d\u6548\u7387\uff08\u4f8b\u5982\u5f39\u7a97\u5f02\u6b65\u52a0\u8f7d\u8868\u5355\uff09\u3002 \u57fa\u672c\u7528\u6cd5 \u4e0b\u9762\u901a\u8fc7\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\u6765\u6f14\u793a\u5f02\u6b65\u52a0\u8f7d\u529f\u80fd\u7684\u7528\u6cd5 \u5148\u5b9a\u4e49\u4e00\u4e2a\u5f02\u6b65\u6e32\u67d3\u7c7b\uff0c\u7ee7\u627f Dcat\\Admin\\Support\\LazyRenderable <?php namespace App\\Admin\\Renderable; use App\\Admin\\Widgets\\Charts\\Bar; use Dcat\\Admin\\Support\\LazyRenderable; class PostChart extends LazyRenderable { public function render() { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u7684\u53c2\u6570 $id = $this->id; // \u67e5\u8be2\u6570\u636e\u903b\u8f91 $data = [...]; // \u8fd9\u91cc\u53ef\u4ee5\u8fd4\u56de\u5185\u7f6e\u7ec4\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u8fd4\u56de\u89c6\u56fe\u6587\u4ef6\u6216HTML\u5b57\u7b26\u4e32 return Bar::make($data); } } \u7136\u540e\u9700\u8981\u628a\u6e32\u67d3\u7c7b\u5b9e\u4f8b\u4f20\u5165 Dcat\\Admin\\Widgets\\Lazy \u5bf9\u8c61\u4e2d\uff0c\u624d\u80fd\u6700\u7ec8\u5b9e\u73b0\u5f02\u6b65\u6e32\u67d3\u7684\u6548\u679c use App\\Admin\\Renderable\\PostChart; use Dcat\\Admin\\Widgets\\Lazy; use Dcat\\Admin\\Layout\\Content; public function index(Content $content) { // \u5b9e\u4f8b\u5316\u5f02\u6b65\u6e32\u67d3\u7c7b\u5e76\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 $chart = PostChart::make(['id' => ...]); return $content->body(Lazy::make($chart)); } \u4e5f\u53ef\u4ee5\u653e\u5728\u5185\u7f6e\u7ec4\u4ef6\u4e2d {tip} \u5982\u679c\u662f Dcat\\Admin\\Widgets\\Card \u3001 Dcat\\Admin\\Widgets\\Box \u3001 Dcat\\Admin\\Widgets\\Modal \u3001 Dcat\\Admin\\Widgets\\Tab \u7b49\u7ec4\u4ef6\uff0c\u5219\u53ef\u4ee5\u7565\u8fc7 Dcat\\Admin\\Widgets\\Lazy \u7ec4\u4ef6\uff0c\u76f4\u63a5\u4f20\u9012\u6e32\u67d3\u7c7b\u5b9e\u4f8b use App\\Admin\\Renderable\\PostChart; use Dcat\\Admin\\Widgets\\Card; use Dcat\\Admin\\Layout\\Content; public function index(Content $content) { $chart = PostChart::make(['id' => ...]); // Card \u7ec4\u4ef6\u652f\u6301\u76f4\u63a5\u4f20\u9012 LazyRenderable \u5b9e\u4f8b\uff0c\u53ef\u4ee5\u7565\u8fc7 Lazy \u5bf9\u8c61 return $content->body(Card::make($chart)); } // \u5982\u679c\u662f Modal\u3001Box \u7b49\u7b49\u90fd\u53ef\u4ee5\u76f4\u63a5\u7565\u8fc7 Lazy use Dcat\\Admin\\Widgets\\Modal; $chart = PostChart::make(['id' => ...]); $modal = Modal::make() ->lg() ->title('\u6807\u9898') ->delay(300) // \u5982\u679c\u662f\u5f02\u6b65\u6e32\u67d3\u56fe\u8868\u5219\u9700\u8981\u8bbe\u7f6e\u4e00\u4e2a\u5ef6\u8fdf\u65f6\u95f4\uff0c\u5426\u5219\u53ef\u80fd\u5bfc\u81f4\u56fe\u8868\u6e32\u67d3\u5f02\u5e38 ->body($chart); \u5f53\u7136\u4e5f\u53ef\u4ee5\u9632\u6b62\u5728\u89c6\u56fe\u6216\u8005\u662f HTML \u4ee3\u7801\u4e2d use App\\Admin\\Renderable\\PostChart; use Dcat\\Admin\\Widgets\\Lazy; use Dcat\\Admin\\Layout\\Content; public function index(Content $content) { $chart = Lazy::make(PostChart::make(['id' => ...])); return $content->body(view('admin.xxx', ['chart' => $chart])); } \u6548\u679c Dcat\\Admin\\Support\\LazyRenderable \u53c2\u6570\u4f20\u9012 (payload) use App\\Admin\\Renderable\\PostChart; PostChart::make(['key1' => '\u503c', ...]); // \u4e5f\u53ef\u4ee5\u901a\u8fc7 payload \u65b9\u6cd5\u4f20\u9012 PostChart::make()->payload(['key1' => '\u503c', ...]); \u83b7\u53d6\u53c2\u6570 class PostChart extends LazyRenderable { protected $title = ['#', '\u6807\u9898', '\u5185\u5bb9']; public function render() { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u7684\u53c2\u6570 $key1 = $this->key1; $key2 = $this->key2; ... } } \u8f7d\u5165JS\u548cCSS \u5f02\u6b65\u52a0\u8f7d\u529f\u80fd\u540c\u6837\u652f\u6301 \u9759\u6001\u8d44\u6e90\u6309\u9700\u52a0\u8f7d \u7684\u7279\u6027\uff0c\u5e76\u4e14\u7528\u6cd5\u4e5f\u5f88\u7b80\u5355 <?php namespace App\\Admin\\Renderable; use Dcat\\Admin\\Support\\LazyRenderable; use Dcat\\Admin\\Admin; class CustomView extends LazyRenderable { // \u8fd9\u91cc\u5199\u5165\u9700\u8981\u52a0\u8f7d\u7684js\u548ccss\u6587\u4ef6\u8def\u5f84 public static $js = [ 'xxx/xxx1.js', 'xxx/xxx2.js', ]; public static $css = [ 'xxx/xxx1.css', 'xxx/xxx2.css', ]; protected function addScript() { Admin::script( <<<JS console.log('JS\u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u4e86~'); JS ); } public function render() { // \u6dfb\u52a0\u4f60\u7684 JS \u4ee3\u7801 $this->addScript(); return view('admin.custom', ['...']); } } \u6a21\u677f\u6587\u4ef6\u4ee3\u7801\u793a\u4f8b\uff0c\u6ce8\u610f\u4e0d\u8981\u5305\u542b body \u548c html \u7b49\u6807\u7b7e <div id=\"custom\" class=\"custom\"><h2>\u5f02\u6b65\u52a0\u8f7d\u529f\u80fd</h2></div> <script> Dcat.ready(function () { // JS \u4ee3\u7801\u4e5f\u53ef\u4ee5\u653e\u5728\u6a21\u677f\u6587\u4ef6\u4e2d console.log('\u6a21\u677f\u6587\u4ef6\u6267\u884cjs~'); }); </script> Dcat\\Admin\\Widgets\\Lazy onLoad \u901a\u8fc7\u6b64\u65b9\u6cd5\u53ef\u4ee5\u76d1\u542c\u5f02\u6b65\u52a0\u8f7d\u5b8c\u6210\u4e8b\u4ef6 use App\\Admin\\Renderable\\PostChart; use Dcat\\Admin\\Widgets\\Lazy; $chart = Lazy::make(PostChart::make())->onLoad( <<<JS console.log('\u7ec4\u4ef6\u6e32\u67d3\u5b8c\u6210'); JS ); load \u6b64\u65b9\u6cd5\u53ef\u4ee5\u63a7\u5236\u662f\u5426\u7acb\u5373\u6e32\u67d3\u5f02\u6b65\u7ec4\u4ef6\uff0c\u9ed8\u8ba4\u503c\u662f true use App\\Admin\\Renderable\\PostChart; use Dcat\\Admin\\Widgets\\Lazy; use Dcat\\Admin\\Admin; $lazy = Lazy::make(PostChart::make())->load(false); Admin::script( <<<JS setTimeout(function () { // 3\u79d2\u540e\u81ea\u52a8\u89e6\u53d1\u5f02\u6b65\u6e32\u67d3\u4e8b\u4ef6 {$lazy->getLoadScript()} }, 3000); JS ); JS\u4e8b\u4ef6 use App\\Admin\\Renderable\\PostChart; use Dcat\\Admin\\Widgets\\Lazy; use Dcat\\Admin\\Admin; $lazy = Lazy::make(PostChart::make()); Admin::script( <<<JS // \u624b\u52a8\u89e6\u53d1\u5f02\u6b65\u6e32\u67d3\u4e8b\u4ef6 $('{$lazy->getElementSelector()}').trigger('lazy:load'); // \u76d1\u542c\u6e32\u67d3\u5b8c\u6210\u4e8b\u4ef6 $('{$lazy->getElementSelector()}').on('lazy:loaded', function () { console.log('\u7ec4\u4ef6\u6e32\u67d3\u5b8c\u6210\u4e86') }); JS ); \u5f02\u6b65\u52a0\u8f7d\u6570\u636e\u8868\u683c \u5982\u679c\u9700\u8981\u5f02\u6b65\u5f02\u6b65\u52a0\u8f7d\u6570\u636e\u8868\u683c\uff0c\u5219\u5b9a\u4e49\u6e32\u67d3\u7c7b\u65f6\u9700\u8981\u7ee7\u627f Dcat\\Admin\\Grid\\LazyRenderable <?php namespace App\\Admin\\Renderable; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Grid\\LazyRenderable; use Dcat\\Admin\\Models\\Administrator; class UserTable extends LazyRenderable { // \u6307\u5b9a\u7ffb\u8bd1\u6587\u4ef6\u540d\u79f0 protected $translation = 'user'; public function grid(): Grid { return Grid::make(new Administrator(), function (Grid $grid) { $grid->column('id'); $grid->column('username'); $grid->column('name'); $grid->column('created_at'); $grid->column('updated_at'); $grid->quickSearch(['id', 'username', 'name']); $grid->paginate(10); $grid->disableActions(); $grid->filter(function (Grid\\Filter $filter) { $filter->like('username')->width(4); $filter->like('name')->width(4); }); }); } } \u4f7f\u7528 use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Widgets\\Modal; use Dcat\\Admin\\Layout\\Content; public function index(Content $content) { $modal = Modal::make() ->lg() ->title('\u5f02\u6b65\u52a0\u8f7d - \u8868\u683c') ->body(UserTable::make()) // Modal \u7ec4\u4ef6\u652f\u6301\u76f4\u63a5\u4f20\u9012 \u6e32\u67d3\u7c7b\u5b9e\u4f8b ->button('\u6253\u5f00\u8868\u683c'); return $content->body($modal); } \u6548\u679c \u540c\u6837\u6e32\u67d3\u7c7b\u7684\u5b9e\u4f8b\u4e5f\u53ef\u4ee5\u9644\u52a0\u5230 Dcat\\Admin\\Widgets\\Card \u3001 Dcat\\Admin\\Widgets\\Box \u3001 Dcat\\Admin\\Widgets\\Tab \u7b49\u7ec4\u4ef6\u4e2d use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Widgets\\Card; $table = UserTable::make(); $card = Card::make('\u6807\u9898', $table)->withHeaderBorder(); \u4ee5\u4e0a\u4ee3\u7801\u6e32\u67d3 UserTable \u5b9e\u4f8b\u65f6\uff0c\u5176\u5b9e\u662f\u5e95\u5c42\u81ea\u52a8\u52a0\u4e0a\u4e86 Dcat\\Admin\\Widgets\\LazyTable \u7c7b\u5b9e\u4f8b\uff0c\u4ee5\u4e0a\u4ee3\u7801\u7b49\u540c\u4e8e use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Widgets\\Card; use Dcat\\Admin\\Widgets\\LazyTable; $table = LazyTable::make(UserTable::make()->simple()); $card = Card::make('\u6807\u9898', $table)->withHeaderBorder(); Dcat\\Admin\\Grid\\LazyRenderable Dcat\\Admin\\Grid\\LazyRenderable \u7528\u4e8e\u5f02\u6b65\u6e32\u67d3\u6570\u636e\u8868\u683c\uff0c\u662f Dcat\\Admin\\Support\\LazyRenderable \u7684\u5b50\u7c7b \u7b80\u5316\u6a21\u5f0f \u6b64\u529f\u80fd\u4f1a\u53bb\u9664\u7b80\u5316\u4e00\u4e9b\u6570\u636e\u8868\u683c\u9ed8\u8ba4\u5f00\u542f\u7684\u529f\u80fd\uff0c\u9ed8\u8ba4\u4e0d\u542f\u7528 use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Widgets\\LazyTable; use Dcat\\Admin\\Layout\\Content; public function index(Content $content) { $table = UserTable::make()->simple(); return $content->body(LazyTable::make($table)); } \u6ce8\u610f\uff0c\u5982\u679c\u628a\u6e32\u67d3\u7c7b\u5b9e\u4f8b\u76f4\u63a5\u6ce8\u5165\u5230 Dcat\\Admin\\Widgets\\Card \u3001 Dcat\\Admin\\Widgets\\Box \u3001 Dcat\\Admin\\Widgets\\Tab \u548c Dcat\\Admin\\Widgets\\Modal \u7b49\u7ec4\u4ef6\u65f6\uff0c\u5219\u4f1a\u81ea\u52a8\u542f\u7528 simple \u6a21\u5f0f use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Widgets\\Card; // \u8fd9\u91cc\u4f1a\u81ea\u52a8\u542f\u7528 simple \u6a21\u5f0f $card = Card::make('\u6807\u9898', UserTable::make())->withHeaderBorder(); \u5982\u679c\u4f60\u4e0d\u5e0c\u671b\u542f\u7528 simple \u6a21\u5f0f\uff0c\u53ef\u4ee5\u4f20\u5165 LazyTable \u5b9e\u4f8b use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Widgets\\Card; use Dcat\\Admin\\Widgets\\LazyTable; $table = LazyTable::make(UserTable::make()); $card = Card::make('\u6807\u9898', $table)->withHeaderBorder(); Dcat\\Admin\\Widgets\\LazyTable onLoad \u901a\u8fc7\u6b64\u65b9\u6cd5\u53ef\u4ee5\u76d1\u542c\u5f02\u6b65\u52a0\u8f7d\u5b8c\u6210\u4e8b\u4ef6 use App\\Admin\\Renderable\\PostChart; use Dcat\\Admin\\Widgets\\Lazy; $chart = Lazy::make(PostChart::make())->onLoad( <<<JS console.log('\u7ec4\u4ef6\u6e32\u67d3\u5b8c\u6210'); JS ); load \u6b64\u65b9\u6cd5\u53ef\u4ee5\u63a7\u5236\u662f\u5426\u7acb\u5373\u6e32\u67d3\u5f02\u6b65\u7ec4\u4ef6\uff0c\u9ed8\u8ba4\u503c\u662f true use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Widgets\\LazyTable; use Dcat\\Admin\\Admin; $lazy = LazyTable::make(UserTable::make())->load(false); Admin::script( <<<JS setTimeout(function () { // 3\u79d2\u540e\u81ea\u52a8\u89e6\u53d1\u5f02\u6b65\u6e32\u67d3\u4e8b\u4ef6 {$lazy->getLoadScript()} }, 3000); JS ); JS\u4e8b\u4ef6 use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Widgets\\LazyTable; use Dcat\\Admin\\Admin; $lazy = LazyTable::make(UserTable::make()); Admin::script( <<<JS // \u624b\u52a8\u89e6\u53d1\u5f02\u6b65\u6e32\u67d3\u4e8b\u4ef6 $('{$lazy->getElementSelector()}').trigger('table:load'); // \u76d1\u542c\u6e32\u67d3\u5b8c\u6210\u4e8b\u4ef6 $('{$lazy->getElementSelector()}').on('table:loaded', function () { console.log('\u7ec4\u4ef6\u6e32\u67d3\u5b8c\u6210\u4e86') }); JS ); \u5f02\u6b65\u52a0\u8f7d\u5de5\u5177\u8868\u5355 \u5b9a\u4e49\u5de5\u5177\u8868\u5355\u7c7b\uff0c\u5b9e\u73b0 Dcat\\Admin\\Contracts\\LazyRenderable \uff0c\u5e76\u8f7d\u5165 Dcat\\Admin\\Traits\\LazyWidget \u8fd9\u4e2a trait <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Contracts\\LazyRenderable; use Dcat\\Admin\\Traits\\LazyWidget; use Dcat\\Admin\\Widgets\\Form; class UserProfile extends Form implements LazyRenderable { use LazyWidget; // \u6307\u5b9a\u7ffb\u8bd1\u6587\u4ef6\u540d\u79f0 protected $translation = 'user-profile'; public function handle(array $input) { return $this->response()->success('\u4fdd\u5b58\u6210\u529f'); } public function form() { $this->text('name', trans('admin.name'))->required()->help('\u7528\u6237\u6635\u79f0'); $this->image('avatar', trans('admin.avatar'))->autoUpload(); $this->password('old_password', trans('admin.old_password')); $this->password('password', trans('admin.password')) ->minLength(5) ->maxLength(20) ->customFormat(function ($v) { if ($v == $this->password) { return; } return $v; }) ->help('\u8bf7\u8f93\u51655-20\u4e2a\u5b57\u7b26'); $this->password('password_confirmation', trans('admin.password_confirmation')) ->same('password') ->help('\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801'); } } \u4f7f\u7528 use App\\Admin\\Forms\\UserProfile; use Dcat\\Admin\\Widgets\\Modal; use Dcat\\Admin\\Layout\\Content; public function index(Content $content) { $modal = Modal::make() ->lg() ->title('\u5f02\u6b65\u52a0\u8f7d - \u8868\u5355') ->body(UserProfile::make()) // Modal \u7ec4\u4ef6\u652f\u6301\u76f4\u63a5\u4f20\u9012\u6e32\u67d3\u7c7b\u5b9e\u4f8b ->button('\u6253\u5f00\u8868\u5355'); return $content->body($modal); } \u6548\u679c \u5f53\u7136\u5f02\u6b65\u8868\u5355\u5b9e\u4f8b\uff0c\u4e5f\u53ef\u4ee5\u5728\u5176\u4ed6\u7ec4\u4ef6\u4e2d\u4f7f\u7528 use App\\Admin\\Forms\\UserProfile; use Dcat\\Admin\\Widgets\\Lazy; use Dcat\\Admin\\Widgets\\Card; $form = UserProfile::make(); // \u76f4\u63a5\u4f20\u9012\u5230 Card \u7ec4\u4ef6\u4e2d $card = Card::make($form); // \u7b49\u540c\u4e8e $card = Card::make(Lazy::make($form)); \u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 \u7ed9\u5f02\u6b65\u8868\u5355\u4f20\u9012\u53c2\u6570\u975e\u5e38\u7b80\u5355\uff0c\u4fee\u6539\u4e0a\u9762\u8868\u5355\u7c7b\u5982\u4e0b <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Contracts\\LazyRenderable; use Dcat\\Admin\\Traits\\LazyWidget; use Dcat\\Admin\\Widgets\\Form; class UserProfile extends Form implements LazyRenderable { use LazyWidget; public function handle(array $input) { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u7684\u53c2\u6570 $key1 = $this->payload['key1'] ?? null; $key2 = $this->payload['key1'] ?? null; return $this->response()->success('\u4fdd\u5b58\u6210\u529f'); } public function form() { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u7684\u53c2\u6570 $key1 = $this->payload['key1'] ?? null; $key2 = $this->payload['key1'] ?? null; $this->text('name', trans('admin.name'))->required()->help('\u7528\u6237\u6635\u79f0'); $this->image('avatar', trans('admin.avatar'))->autoUpload(); $this->password('old_password', trans('admin.old_password')); $this->password('password', trans('admin.password')) ->minLength(5) ->maxLength(20) ->customFormat(function ($v) { if ($v == $this->password) { return; } return $v; }) ->help('\u8bf7\u8f93\u51655-20\u4e2a\u5b57\u7b26'); $this->password('password_confirmation', trans('admin.password_confirmation')) ->same('password') ->help('\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801'); } public function default() { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u7684\u53c2\u6570 $key1 = $this->payload['key1'] ?? null; $key2 = $this->payload['key1'] ?? null; return [ 'name' => '...', ]; } } \u4f20\u9012\u53c2\u6570\u4ee3\u7801\u5982\u4e0b // \u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 $form = UserProfile::make()->payload(['key1' => '...', 'key2' => '...']); $modal = Modal::make() ->lg() ->title('\u5f02\u6b65\u52a0\u8f7d - \u8868\u5355') ->body($form) ->button('\u6253\u5f00\u8868\u5355');","title":"\u5f02\u6b65\u52a0\u8f7d\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/lazy/#_1","text":"{tip} \u5f02\u6b65\u52a0\u8f7d\u529f\u80fd\u652f\u6301 \u9759\u6001\u8d44\u6e90\u6309\u9700\u52a0\u8f7d \u7684\u7279\u6027\uff0c\u76ee\u524d\u5185\u7f6e\u7684 \u6240\u6709\u7ec4\u4ef6 \u90fd\u652f\u6301\u4f7f\u7528\u5f02\u6b65\u6e32\u67d3\u529f\u80fd\uff0c\u5e76\u4e14\u652f\u6301\u5728\u9875\u9762\u7684 \u4efb\u610f\u4f4d\u7f6e \u4e2d\u4f7f\u7528 \u901a\u8fc7\u5f02\u6b65\u52a0\u8f7d\u529f\u80fd\u53ef\u4ee5\u8ba9\u9875\u9762\u4e2d\u7684\u6574\u4f53\u6216\u5c40\u90e8\u7ec4\u4ef6\u4f7f\u7528 ajax \u5f02\u6b65\u6e32\u67d3\uff0c\u4ece\u800c\u63d0\u9ad8\u9875\u9762\u52a0\u8f7d\u6548\u7387\uff08\u4f8b\u5982\u5f39\u7a97\u5f02\u6b65\u52a0\u8f7d\u8868\u5355\uff09\u3002","title":"\u5f02\u6b65\u52a0\u8f7d\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/lazy/#_2","text":"\u4e0b\u9762\u901a\u8fc7\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\u6765\u6f14\u793a\u5f02\u6b65\u52a0\u8f7d\u529f\u80fd\u7684\u7528\u6cd5 \u5148\u5b9a\u4e49\u4e00\u4e2a\u5f02\u6b65\u6e32\u67d3\u7c7b\uff0c\u7ee7\u627f Dcat\\Admin\\Support\\LazyRenderable <?php namespace App\\Admin\\Renderable; use App\\Admin\\Widgets\\Charts\\Bar; use Dcat\\Admin\\Support\\LazyRenderable; class PostChart extends LazyRenderable { public function render() { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u7684\u53c2\u6570 $id = $this->id; // \u67e5\u8be2\u6570\u636e\u903b\u8f91 $data = [...]; // \u8fd9\u91cc\u53ef\u4ee5\u8fd4\u56de\u5185\u7f6e\u7ec4\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u8fd4\u56de\u89c6\u56fe\u6587\u4ef6\u6216HTML\u5b57\u7b26\u4e32 return Bar::make($data); } } \u7136\u540e\u9700\u8981\u628a\u6e32\u67d3\u7c7b\u5b9e\u4f8b\u4f20\u5165 Dcat\\Admin\\Widgets\\Lazy \u5bf9\u8c61\u4e2d\uff0c\u624d\u80fd\u6700\u7ec8\u5b9e\u73b0\u5f02\u6b65\u6e32\u67d3\u7684\u6548\u679c use App\\Admin\\Renderable\\PostChart; use Dcat\\Admin\\Widgets\\Lazy; use Dcat\\Admin\\Layout\\Content; public function index(Content $content) { // \u5b9e\u4f8b\u5316\u5f02\u6b65\u6e32\u67d3\u7c7b\u5e76\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 $chart = PostChart::make(['id' => ...]); return $content->body(Lazy::make($chart)); } \u4e5f\u53ef\u4ee5\u653e\u5728\u5185\u7f6e\u7ec4\u4ef6\u4e2d {tip} \u5982\u679c\u662f Dcat\\Admin\\Widgets\\Card \u3001 Dcat\\Admin\\Widgets\\Box \u3001 Dcat\\Admin\\Widgets\\Modal \u3001 Dcat\\Admin\\Widgets\\Tab \u7b49\u7ec4\u4ef6\uff0c\u5219\u53ef\u4ee5\u7565\u8fc7 Dcat\\Admin\\Widgets\\Lazy \u7ec4\u4ef6\uff0c\u76f4\u63a5\u4f20\u9012\u6e32\u67d3\u7c7b\u5b9e\u4f8b use App\\Admin\\Renderable\\PostChart; use Dcat\\Admin\\Widgets\\Card; use Dcat\\Admin\\Layout\\Content; public function index(Content $content) { $chart = PostChart::make(['id' => ...]); // Card \u7ec4\u4ef6\u652f\u6301\u76f4\u63a5\u4f20\u9012 LazyRenderable \u5b9e\u4f8b\uff0c\u53ef\u4ee5\u7565\u8fc7 Lazy \u5bf9\u8c61 return $content->body(Card::make($chart)); } // \u5982\u679c\u662f Modal\u3001Box \u7b49\u7b49\u90fd\u53ef\u4ee5\u76f4\u63a5\u7565\u8fc7 Lazy use Dcat\\Admin\\Widgets\\Modal; $chart = PostChart::make(['id' => ...]); $modal = Modal::make() ->lg() ->title('\u6807\u9898') ->delay(300) // \u5982\u679c\u662f\u5f02\u6b65\u6e32\u67d3\u56fe\u8868\u5219\u9700\u8981\u8bbe\u7f6e\u4e00\u4e2a\u5ef6\u8fdf\u65f6\u95f4\uff0c\u5426\u5219\u53ef\u80fd\u5bfc\u81f4\u56fe\u8868\u6e32\u67d3\u5f02\u5e38 ->body($chart); \u5f53\u7136\u4e5f\u53ef\u4ee5\u9632\u6b62\u5728\u89c6\u56fe\u6216\u8005\u662f HTML \u4ee3\u7801\u4e2d use App\\Admin\\Renderable\\PostChart; use Dcat\\Admin\\Widgets\\Lazy; use Dcat\\Admin\\Layout\\Content; public function index(Content $content) { $chart = Lazy::make(PostChart::make(['id' => ...])); return $content->body(view('admin.xxx', ['chart' => $chart])); } \u6548\u679c","title":"\u57fa\u672c\u7528\u6cd5"},{"location":"2.x/lazy/#dcatadminsupportlazyrenderable","text":"","title":"Dcat\\Admin\\Support\\LazyRenderable"},{"location":"2.x/lazy/#payload","text":"use App\\Admin\\Renderable\\PostChart; PostChart::make(['key1' => '\u503c', ...]); // \u4e5f\u53ef\u4ee5\u901a\u8fc7 payload \u65b9\u6cd5\u4f20\u9012 PostChart::make()->payload(['key1' => '\u503c', ...]); \u83b7\u53d6\u53c2\u6570 class PostChart extends LazyRenderable { protected $title = ['#', '\u6807\u9898', '\u5185\u5bb9']; public function render() { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u7684\u53c2\u6570 $key1 = $this->key1; $key2 = $this->key2; ... } }","title":"\u53c2\u6570\u4f20\u9012 (payload)"},{"location":"2.x/lazy/#jscss","text":"\u5f02\u6b65\u52a0\u8f7d\u529f\u80fd\u540c\u6837\u652f\u6301 \u9759\u6001\u8d44\u6e90\u6309\u9700\u52a0\u8f7d \u7684\u7279\u6027\uff0c\u5e76\u4e14\u7528\u6cd5\u4e5f\u5f88\u7b80\u5355 <?php namespace App\\Admin\\Renderable; use Dcat\\Admin\\Support\\LazyRenderable; use Dcat\\Admin\\Admin; class CustomView extends LazyRenderable { // \u8fd9\u91cc\u5199\u5165\u9700\u8981\u52a0\u8f7d\u7684js\u548ccss\u6587\u4ef6\u8def\u5f84 public static $js = [ 'xxx/xxx1.js', 'xxx/xxx2.js', ]; public static $css = [ 'xxx/xxx1.css', 'xxx/xxx2.css', ]; protected function addScript() { Admin::script( <<<JS console.log('JS\u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u4e86~'); JS ); } public function render() { // \u6dfb\u52a0\u4f60\u7684 JS \u4ee3\u7801 $this->addScript(); return view('admin.custom', ['...']); } } \u6a21\u677f\u6587\u4ef6\u4ee3\u7801\u793a\u4f8b\uff0c\u6ce8\u610f\u4e0d\u8981\u5305\u542b body \u548c html \u7b49\u6807\u7b7e <div id=\"custom\" class=\"custom\"><h2>\u5f02\u6b65\u52a0\u8f7d\u529f\u80fd</h2></div> <script> Dcat.ready(function () { // JS \u4ee3\u7801\u4e5f\u53ef\u4ee5\u653e\u5728\u6a21\u677f\u6587\u4ef6\u4e2d console.log('\u6a21\u677f\u6587\u4ef6\u6267\u884cjs~'); }); </script>","title":"\u8f7d\u5165JS\u548cCSS"},{"location":"2.x/lazy/#dcatadminwidgetslazy","text":"","title":"Dcat\\Admin\\Widgets\\Lazy"},{"location":"2.x/lazy/#onload","text":"\u901a\u8fc7\u6b64\u65b9\u6cd5\u53ef\u4ee5\u76d1\u542c\u5f02\u6b65\u52a0\u8f7d\u5b8c\u6210\u4e8b\u4ef6 use App\\Admin\\Renderable\\PostChart; use Dcat\\Admin\\Widgets\\Lazy; $chart = Lazy::make(PostChart::make())->onLoad( <<<JS console.log('\u7ec4\u4ef6\u6e32\u67d3\u5b8c\u6210'); JS );","title":"onLoad"},{"location":"2.x/lazy/#load","text":"\u6b64\u65b9\u6cd5\u53ef\u4ee5\u63a7\u5236\u662f\u5426\u7acb\u5373\u6e32\u67d3\u5f02\u6b65\u7ec4\u4ef6\uff0c\u9ed8\u8ba4\u503c\u662f true use App\\Admin\\Renderable\\PostChart; use Dcat\\Admin\\Widgets\\Lazy; use Dcat\\Admin\\Admin; $lazy = Lazy::make(PostChart::make())->load(false); Admin::script( <<<JS setTimeout(function () { // 3\u79d2\u540e\u81ea\u52a8\u89e6\u53d1\u5f02\u6b65\u6e32\u67d3\u4e8b\u4ef6 {$lazy->getLoadScript()} }, 3000); JS );","title":"load"},{"location":"2.x/lazy/#js","text":"use App\\Admin\\Renderable\\PostChart; use Dcat\\Admin\\Widgets\\Lazy; use Dcat\\Admin\\Admin; $lazy = Lazy::make(PostChart::make()); Admin::script( <<<JS // \u624b\u52a8\u89e6\u53d1\u5f02\u6b65\u6e32\u67d3\u4e8b\u4ef6 $('{$lazy->getElementSelector()}').trigger('lazy:load'); // \u76d1\u542c\u6e32\u67d3\u5b8c\u6210\u4e8b\u4ef6 $('{$lazy->getElementSelector()}').on('lazy:loaded', function () { console.log('\u7ec4\u4ef6\u6e32\u67d3\u5b8c\u6210\u4e86') }); JS );","title":"JS\u4e8b\u4ef6"},{"location":"2.x/lazy/#_3","text":"\u5982\u679c\u9700\u8981\u5f02\u6b65\u5f02\u6b65\u52a0\u8f7d\u6570\u636e\u8868\u683c\uff0c\u5219\u5b9a\u4e49\u6e32\u67d3\u7c7b\u65f6\u9700\u8981\u7ee7\u627f Dcat\\Admin\\Grid\\LazyRenderable <?php namespace App\\Admin\\Renderable; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Grid\\LazyRenderable; use Dcat\\Admin\\Models\\Administrator; class UserTable extends LazyRenderable { // \u6307\u5b9a\u7ffb\u8bd1\u6587\u4ef6\u540d\u79f0 protected $translation = 'user'; public function grid(): Grid { return Grid::make(new Administrator(), function (Grid $grid) { $grid->column('id'); $grid->column('username'); $grid->column('name'); $grid->column('created_at'); $grid->column('updated_at'); $grid->quickSearch(['id', 'username', 'name']); $grid->paginate(10); $grid->disableActions(); $grid->filter(function (Grid\\Filter $filter) { $filter->like('username')->width(4); $filter->like('name')->width(4); }); }); } } \u4f7f\u7528 use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Widgets\\Modal; use Dcat\\Admin\\Layout\\Content; public function index(Content $content) { $modal = Modal::make() ->lg() ->title('\u5f02\u6b65\u52a0\u8f7d - \u8868\u683c') ->body(UserTable::make()) // Modal \u7ec4\u4ef6\u652f\u6301\u76f4\u63a5\u4f20\u9012 \u6e32\u67d3\u7c7b\u5b9e\u4f8b ->button('\u6253\u5f00\u8868\u683c'); return $content->body($modal); } \u6548\u679c \u540c\u6837\u6e32\u67d3\u7c7b\u7684\u5b9e\u4f8b\u4e5f\u53ef\u4ee5\u9644\u52a0\u5230 Dcat\\Admin\\Widgets\\Card \u3001 Dcat\\Admin\\Widgets\\Box \u3001 Dcat\\Admin\\Widgets\\Tab \u7b49\u7ec4\u4ef6\u4e2d use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Widgets\\Card; $table = UserTable::make(); $card = Card::make('\u6807\u9898', $table)->withHeaderBorder(); \u4ee5\u4e0a\u4ee3\u7801\u6e32\u67d3 UserTable \u5b9e\u4f8b\u65f6\uff0c\u5176\u5b9e\u662f\u5e95\u5c42\u81ea\u52a8\u52a0\u4e0a\u4e86 Dcat\\Admin\\Widgets\\LazyTable \u7c7b\u5b9e\u4f8b\uff0c\u4ee5\u4e0a\u4ee3\u7801\u7b49\u540c\u4e8e use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Widgets\\Card; use Dcat\\Admin\\Widgets\\LazyTable; $table = LazyTable::make(UserTable::make()->simple()); $card = Card::make('\u6807\u9898', $table)->withHeaderBorder();","title":"\u5f02\u6b65\u52a0\u8f7d\u6570\u636e\u8868\u683c"},{"location":"2.x/lazy/#dcatadmingridlazyrenderable","text":"Dcat\\Admin\\Grid\\LazyRenderable \u7528\u4e8e\u5f02\u6b65\u6e32\u67d3\u6570\u636e\u8868\u683c\uff0c\u662f Dcat\\Admin\\Support\\LazyRenderable \u7684\u5b50\u7c7b","title":"Dcat\\Admin\\Grid\\LazyRenderable"},{"location":"2.x/lazy/#_4","text":"\u6b64\u529f\u80fd\u4f1a\u53bb\u9664\u7b80\u5316\u4e00\u4e9b\u6570\u636e\u8868\u683c\u9ed8\u8ba4\u5f00\u542f\u7684\u529f\u80fd\uff0c\u9ed8\u8ba4\u4e0d\u542f\u7528 use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Widgets\\LazyTable; use Dcat\\Admin\\Layout\\Content; public function index(Content $content) { $table = UserTable::make()->simple(); return $content->body(LazyTable::make($table)); } \u6ce8\u610f\uff0c\u5982\u679c\u628a\u6e32\u67d3\u7c7b\u5b9e\u4f8b\u76f4\u63a5\u6ce8\u5165\u5230 Dcat\\Admin\\Widgets\\Card \u3001 Dcat\\Admin\\Widgets\\Box \u3001 Dcat\\Admin\\Widgets\\Tab \u548c Dcat\\Admin\\Widgets\\Modal \u7b49\u7ec4\u4ef6\u65f6\uff0c\u5219\u4f1a\u81ea\u52a8\u542f\u7528 simple \u6a21\u5f0f use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Widgets\\Card; // \u8fd9\u91cc\u4f1a\u81ea\u52a8\u542f\u7528 simple \u6a21\u5f0f $card = Card::make('\u6807\u9898', UserTable::make())->withHeaderBorder(); \u5982\u679c\u4f60\u4e0d\u5e0c\u671b\u542f\u7528 simple \u6a21\u5f0f\uff0c\u53ef\u4ee5\u4f20\u5165 LazyTable \u5b9e\u4f8b use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Widgets\\Card; use Dcat\\Admin\\Widgets\\LazyTable; $table = LazyTable::make(UserTable::make()); $card = Card::make('\u6807\u9898', $table)->withHeaderBorder();","title":"\u7b80\u5316\u6a21\u5f0f"},{"location":"2.x/lazy/#dcatadminwidgetslazytable","text":"","title":"Dcat\\Admin\\Widgets\\LazyTable"},{"location":"2.x/lazy/#onload_1","text":"\u901a\u8fc7\u6b64\u65b9\u6cd5\u53ef\u4ee5\u76d1\u542c\u5f02\u6b65\u52a0\u8f7d\u5b8c\u6210\u4e8b\u4ef6 use App\\Admin\\Renderable\\PostChart; use Dcat\\Admin\\Widgets\\Lazy; $chart = Lazy::make(PostChart::make())->onLoad( <<<JS console.log('\u7ec4\u4ef6\u6e32\u67d3\u5b8c\u6210'); JS );","title":"onLoad"},{"location":"2.x/lazy/#load_1","text":"\u6b64\u65b9\u6cd5\u53ef\u4ee5\u63a7\u5236\u662f\u5426\u7acb\u5373\u6e32\u67d3\u5f02\u6b65\u7ec4\u4ef6\uff0c\u9ed8\u8ba4\u503c\u662f true use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Widgets\\LazyTable; use Dcat\\Admin\\Admin; $lazy = LazyTable::make(UserTable::make())->load(false); Admin::script( <<<JS setTimeout(function () { // 3\u79d2\u540e\u81ea\u52a8\u89e6\u53d1\u5f02\u6b65\u6e32\u67d3\u4e8b\u4ef6 {$lazy->getLoadScript()} }, 3000); JS );","title":"load"},{"location":"2.x/lazy/#js_1","text":"use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Widgets\\LazyTable; use Dcat\\Admin\\Admin; $lazy = LazyTable::make(UserTable::make()); Admin::script( <<<JS // \u624b\u52a8\u89e6\u53d1\u5f02\u6b65\u6e32\u67d3\u4e8b\u4ef6 $('{$lazy->getElementSelector()}').trigger('table:load'); // \u76d1\u542c\u6e32\u67d3\u5b8c\u6210\u4e8b\u4ef6 $('{$lazy->getElementSelector()}').on('table:loaded', function () { console.log('\u7ec4\u4ef6\u6e32\u67d3\u5b8c\u6210\u4e86') }); JS );","title":"JS\u4e8b\u4ef6"},{"location":"2.x/lazy/#_5","text":"\u5b9a\u4e49\u5de5\u5177\u8868\u5355\u7c7b\uff0c\u5b9e\u73b0 Dcat\\Admin\\Contracts\\LazyRenderable \uff0c\u5e76\u8f7d\u5165 Dcat\\Admin\\Traits\\LazyWidget \u8fd9\u4e2a trait <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Contracts\\LazyRenderable; use Dcat\\Admin\\Traits\\LazyWidget; use Dcat\\Admin\\Widgets\\Form; class UserProfile extends Form implements LazyRenderable { use LazyWidget; // \u6307\u5b9a\u7ffb\u8bd1\u6587\u4ef6\u540d\u79f0 protected $translation = 'user-profile'; public function handle(array $input) { return $this->response()->success('\u4fdd\u5b58\u6210\u529f'); } public function form() { $this->text('name', trans('admin.name'))->required()->help('\u7528\u6237\u6635\u79f0'); $this->image('avatar', trans('admin.avatar'))->autoUpload(); $this->password('old_password', trans('admin.old_password')); $this->password('password', trans('admin.password')) ->minLength(5) ->maxLength(20) ->customFormat(function ($v) { if ($v == $this->password) { return; } return $v; }) ->help('\u8bf7\u8f93\u51655-20\u4e2a\u5b57\u7b26'); $this->password('password_confirmation', trans('admin.password_confirmation')) ->same('password') ->help('\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801'); } } \u4f7f\u7528 use App\\Admin\\Forms\\UserProfile; use Dcat\\Admin\\Widgets\\Modal; use Dcat\\Admin\\Layout\\Content; public function index(Content $content) { $modal = Modal::make() ->lg() ->title('\u5f02\u6b65\u52a0\u8f7d - \u8868\u5355') ->body(UserProfile::make()) // Modal \u7ec4\u4ef6\u652f\u6301\u76f4\u63a5\u4f20\u9012\u6e32\u67d3\u7c7b\u5b9e\u4f8b ->button('\u6253\u5f00\u8868\u5355'); return $content->body($modal); } \u6548\u679c \u5f53\u7136\u5f02\u6b65\u8868\u5355\u5b9e\u4f8b\uff0c\u4e5f\u53ef\u4ee5\u5728\u5176\u4ed6\u7ec4\u4ef6\u4e2d\u4f7f\u7528 use App\\Admin\\Forms\\UserProfile; use Dcat\\Admin\\Widgets\\Lazy; use Dcat\\Admin\\Widgets\\Card; $form = UserProfile::make(); // \u76f4\u63a5\u4f20\u9012\u5230 Card \u7ec4\u4ef6\u4e2d $card = Card::make($form); // \u7b49\u540c\u4e8e $card = Card::make(Lazy::make($form));","title":"\u5f02\u6b65\u52a0\u8f7d\u5de5\u5177\u8868\u5355"},{"location":"2.x/lazy/#_6","text":"\u7ed9\u5f02\u6b65\u8868\u5355\u4f20\u9012\u53c2\u6570\u975e\u5e38\u7b80\u5355\uff0c\u4fee\u6539\u4e0a\u9762\u8868\u5355\u7c7b\u5982\u4e0b <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Contracts\\LazyRenderable; use Dcat\\Admin\\Traits\\LazyWidget; use Dcat\\Admin\\Widgets\\Form; class UserProfile extends Form implements LazyRenderable { use LazyWidget; public function handle(array $input) { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u7684\u53c2\u6570 $key1 = $this->payload['key1'] ?? null; $key2 = $this->payload['key1'] ?? null; return $this->response()->success('\u4fdd\u5b58\u6210\u529f'); } public function form() { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u7684\u53c2\u6570 $key1 = $this->payload['key1'] ?? null; $key2 = $this->payload['key1'] ?? null; $this->text('name', trans('admin.name'))->required()->help('\u7528\u6237\u6635\u79f0'); $this->image('avatar', trans('admin.avatar'))->autoUpload(); $this->password('old_password', trans('admin.old_password')); $this->password('password', trans('admin.password')) ->minLength(5) ->maxLength(20) ->customFormat(function ($v) { if ($v == $this->password) { return; } return $v; }) ->help('\u8bf7\u8f93\u51655-20\u4e2a\u5b57\u7b26'); $this->password('password_confirmation', trans('admin.password_confirmation')) ->same('password') ->help('\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801'); } public function default() { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u7684\u53c2\u6570 $key1 = $this->payload['key1'] ?? null; $key2 = $this->payload['key1'] ?? null; return [ 'name' => '...', ]; } } \u4f20\u9012\u53c2\u6570\u4ee3\u7801\u5982\u4e0b // \u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 $form = UserProfile::make()->payload(['key1' => '...', 'key2' => '...']); $modal = Modal::make() ->lg() ->title('\u5f02\u6b65\u52a0\u8f7d - \u8868\u5355') ->body($form) ->button('\u6253\u5f00\u8868\u5355');","title":"\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570"},{"location":"2.x/menu/","text":"\u83dc\u5355 Dcat Admin \u7684\u83dc\u5355\u662f\u4fdd\u5b58\u5728\u6570\u636e\u8868 admin_menu \u4e0a\u7684\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u540e\u53f0\u83dc\u5355\u7ba1\u7406\u9875\u9762\u5bf9\u83dc\u5355\u8fdb\u884c\u7ba1\u7406\u3002 \u83dc\u5355\u6743\u9650 \u6bcf\u4e2a\u83dc\u5355\u90fd\u53ef\u4ee5\u4e0e\u6743\u9650\u6216\u89d2\u8272\u8fdb\u884c\u7ed1\u5b9a\uff0c\u5982\u679c\u4e0d\u8bbe\u7f6e\u5219\u4e3a\u516c\u5171\u83dc\u5355\uff0c\u6240\u6709\u8d26\u53f7\u90fd\u80fd\u770b\u5230\u3002 \u901a\u8fc7 admin.menu.bind_permission \u914d\u7f6e\u53c2\u6570\u53ef\u4ee5\u8bbe\u7f6e\u662f\u5426\u5141\u8bb8\u7ed1\u5b9a\u6743\u9650\u3002 {tip} \u9ed8\u8ba4\u4e00\u4e2a\u83dc\u5355\u6700\u591a\u80fd\u7ed1\u5b9a\u4e00\u4e2a\u6743\u9650\u548c\u4e00\u4e2a\u89d2\u8272\u3002 \u83dc\u5355\u7ffb\u8bd1 \u5728\u60a8\u7684\u8bed\u8a00\u6587\u4ef6\u7684menu_titles\u7d22\u5f15\u4e2d\u8ffd\u52a0\u83dc\u5355\u6807\u9898\u3002 \u4f8b\u5982\u201c\u5de5\u4f5c\u5355\u4f4d\u201d\u6807\u9898\uff1a \u5728 resources/lang/{\u5f53\u524d\u8bed\u8a00}/admin.php \u4e2d ... 'menu_titles' => [ 'work_units' => 'Unidades de trabajo' ], \u83dc\u5355\u7f13\u5b58 \u901a\u8fc7 admin.menu.cache.enable \u914d\u7f6e\u53c2\u6570\u53ef\u4ee5\u5f00\u542f\u6216\u5173\u95ed\u83dc\u5355\u7f13\u5b58\uff0c\u5efa\u8bae\u5f00\u542f\u3002 \u901a\u8fc7Menu::add\u63a5\u53e3\u52a8\u6001\u6dfb\u52a0\u83dc\u5355 Dcat Admin \u8fd8\u63d0\u4f9b\u4e86\u901a\u8fc7\u6570\u7ec4\u7684\u65b9\u5f0f\u5728\u4ee3\u7801\u4e2d\u5373\u65f6\u6dfb\u52a0\u83dc\u5355\u3002 \u5728 app\\Admin\\bootstrap.php \u4e2d\u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801\uff1a <?php use Dcat\\Admin\\Admin; use Dcat\\Admin\\Layout\\Menu; Admin::menu(function (Menu $menu) { $menu->add([ [ 'id' => '1', // \u6b64id\u53ea\u8981\u4fdd\u8bc1\u5f53\u524d\u7684\u6570\u7ec4\u4e2d\u662f\u552f\u4e00\u7684\u5373\u53ef 'title' => '\u6d4b\u8bd5\u83dc\u5355', 'icon' => 'fa-file-text-o', 'uri' => '', 'parent_id' => 0, 'permission_id' => 'test', // \u4e0e\u6743\u9650\u7ed1\u5b9a 'roles' => 'test-roles', // \u4e0e\u89d2\u8272\u7ed1\u5b9a ], [ 'id' => '2', // \u6b64id\u53ea\u8981\u4fdd\u8bc1\u5f53\u524d\u7684\u6570\u7ec4\u4e2d\u662f\u552f\u4e00\u7684\u5373\u53ef 'title' => '\u6d4b\u8bd5\u83dc\u53552', 'icon' => 'fa-file-text-o', 'uri' => 'test-menu2', 'parent_id' => '1', ], ]); }); \u4e3a\u4f55\u6ca1\u6709\u6743\u9650\u7684\u83dc\u5355\u4e0d\u4f1a\u81ea\u52a8\u9690\u85cf\uff1f \u8fd9\u4e2a\u95ee\u9898\u662f\u56e0\u4e3a\u4f60\u6ca1\u6709\u7ed9\u83dc\u5355\u7ed1\u5b9a\u6743\u9650\u6216\u8005\u89d2\u8272\uff0c\u7ed9\u4f60\u60f3\u8981\u65e0\u6743\u4e0d\u663e\u793a\u7684\u83dc\u5355\u7ed1\u5b9a\u6743\u9650\u6216\u8005\u89d2\u8272\u5373\u53ef\u3002","title":"\u83dc\u5355"},{"location":"2.x/menu/#_1","text":"Dcat Admin \u7684\u83dc\u5355\u662f\u4fdd\u5b58\u5728\u6570\u636e\u8868 admin_menu \u4e0a\u7684\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u540e\u53f0\u83dc\u5355\u7ba1\u7406\u9875\u9762\u5bf9\u83dc\u5355\u8fdb\u884c\u7ba1\u7406\u3002","title":"\u83dc\u5355"},{"location":"2.x/menu/#_2","text":"\u6bcf\u4e2a\u83dc\u5355\u90fd\u53ef\u4ee5\u4e0e\u6743\u9650\u6216\u89d2\u8272\u8fdb\u884c\u7ed1\u5b9a\uff0c\u5982\u679c\u4e0d\u8bbe\u7f6e\u5219\u4e3a\u516c\u5171\u83dc\u5355\uff0c\u6240\u6709\u8d26\u53f7\u90fd\u80fd\u770b\u5230\u3002 \u901a\u8fc7 admin.menu.bind_permission \u914d\u7f6e\u53c2\u6570\u53ef\u4ee5\u8bbe\u7f6e\u662f\u5426\u5141\u8bb8\u7ed1\u5b9a\u6743\u9650\u3002 {tip} \u9ed8\u8ba4\u4e00\u4e2a\u83dc\u5355\u6700\u591a\u80fd\u7ed1\u5b9a\u4e00\u4e2a\u6743\u9650\u548c\u4e00\u4e2a\u89d2\u8272\u3002","title":"\u83dc\u5355\u6743\u9650"},{"location":"2.x/menu/#_3","text":"\u5728\u60a8\u7684\u8bed\u8a00\u6587\u4ef6\u7684menu_titles\u7d22\u5f15\u4e2d\u8ffd\u52a0\u83dc\u5355\u6807\u9898\u3002 \u4f8b\u5982\u201c\u5de5\u4f5c\u5355\u4f4d\u201d\u6807\u9898\uff1a \u5728 resources/lang/{\u5f53\u524d\u8bed\u8a00}/admin.php \u4e2d ... 'menu_titles' => [ 'work_units' => 'Unidades de trabajo' ],","title":"\u83dc\u5355\u7ffb\u8bd1"},{"location":"2.x/menu/#_4","text":"\u901a\u8fc7 admin.menu.cache.enable \u914d\u7f6e\u53c2\u6570\u53ef\u4ee5\u5f00\u542f\u6216\u5173\u95ed\u83dc\u5355\u7f13\u5b58\uff0c\u5efa\u8bae\u5f00\u542f\u3002","title":"\u83dc\u5355\u7f13\u5b58"},{"location":"2.x/menu/#menuadd","text":"Dcat Admin \u8fd8\u63d0\u4f9b\u4e86\u901a\u8fc7\u6570\u7ec4\u7684\u65b9\u5f0f\u5728\u4ee3\u7801\u4e2d\u5373\u65f6\u6dfb\u52a0\u83dc\u5355\u3002 \u5728 app\\Admin\\bootstrap.php \u4e2d\u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801\uff1a <?php use Dcat\\Admin\\Admin; use Dcat\\Admin\\Layout\\Menu; Admin::menu(function (Menu $menu) { $menu->add([ [ 'id' => '1', // \u6b64id\u53ea\u8981\u4fdd\u8bc1\u5f53\u524d\u7684\u6570\u7ec4\u4e2d\u662f\u552f\u4e00\u7684\u5373\u53ef 'title' => '\u6d4b\u8bd5\u83dc\u5355', 'icon' => 'fa-file-text-o', 'uri' => '', 'parent_id' => 0, 'permission_id' => 'test', // \u4e0e\u6743\u9650\u7ed1\u5b9a 'roles' => 'test-roles', // \u4e0e\u89d2\u8272\u7ed1\u5b9a ], [ 'id' => '2', // \u6b64id\u53ea\u8981\u4fdd\u8bc1\u5f53\u524d\u7684\u6570\u7ec4\u4e2d\u662f\u552f\u4e00\u7684\u5373\u53ef 'title' => '\u6d4b\u8bd5\u83dc\u53552', 'icon' => 'fa-file-text-o', 'uri' => 'test-menu2', 'parent_id' => '1', ], ]); });","title":"\u901a\u8fc7Menu::add\u63a5\u53e3\u52a8\u6001\u6dfb\u52a0\u83dc\u5355"},{"location":"2.x/menu/#_5","text":"\u8fd9\u4e2a\u95ee\u9898\u662f\u56e0\u4e3a\u4f60\u6ca1\u6709\u7ed9\u83dc\u5355\u7ed1\u5b9a\u6743\u9650\u6216\u8005\u89d2\u8272\uff0c\u7ed9\u4f60\u60f3\u8981\u65e0\u6743\u4e0d\u663e\u793a\u7684\u83dc\u5355\u7ed1\u5b9a\u6743\u9650\u6216\u8005\u89d2\u8272\u5373\u53ef\u3002","title":"\u4e3a\u4f55\u6ca1\u6709\u6743\u9650\u7684\u83dc\u5355\u4e0d\u4f1a\u81ea\u52a8\u9690\u85cf\uff1f"},{"location":"2.x/model-form-callback/","text":"\u8868\u5355\u56de\u8c03 Form \u76ee\u524d\u63d0\u4f9b\u4e86\u4e0b\u9762\u51e0\u4e2a\u65b9\u6cd5\u6765\u63a5\u6536\u56de\u8c03\u51fd\u6570\uff1a creating \u5728\u65b0\u589e\u9875\u9762\u8c03\u7528\uff08\u975e\u63d0\u4ea4\u64cd\u4f5c\uff09 $form->creating(function (Form $form) { if (...) { // \u9a8c\u8bc1\u903b\u8f91 $form->responseValidationMessages('title', 'title\u683c\u5f0f\u9519\u8bef'); // \u5982\u6709\u591a\u4e2a\u9519\u8bef\u4fe1\u606f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f20\u6570\u7ec4 $form->responseValidationMessages('content', ['content\u683c\u5f0f\u9519\u8bef', 'content\u4e0d\u80fd\u4e3a\u7a7a']); } }); editing \u5728\u7f16\u8f91\u9875\u9762\u8c03\u7528\uff08\u975e\u63d0\u4ea4\u64cd\u4f5c\uff09 $form->editing(function (Form $form) { if (...) { // \u9a8c\u8bc1\u903b\u8f91 $form->responseValidationMessages('title', 'title\u683c\u5f0f\u9519\u8bef'); // \u5982\u6709\u591a\u4e2a\u9519\u8bef\u4fe1\u606f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f20\u6570\u7ec4 $form->responseValidationMessages('content', ['content\u683c\u5f0f\u9519\u8bef', 'content\u4e0d\u80fd\u4e3a\u7a7a']); } }); submitted \u5728\u8868\u5355\u63d0\u4ea4\u524d\u8c03\u7528\uff0c\u5728\u6b64\u4e8b\u4ef6\u4e2d\u53ef\u4ee5\u4fee\u6539\u3001\u5220\u9664\u7528\u6237\u63d0\u4ea4\u7684\u6570\u636e\u6216\u8005\u4e2d\u65ad\u63d0\u4ea4\u64cd\u4f5c $form->submitted(function (Form $form) { // \u83b7\u53d6\u7528\u6237\u63d0\u4ea4\u53c2\u6570 $title = $form->title; // \u4e0a\u9762\u5199\u6cd5\u7b49\u540c\u4e8e $title = $form->input('title'); // \u5220\u9664\u7528\u6237\u63d0\u4ea4\u7684\u6570\u636e $form->deleteInput('title'); // \u4e2d\u65ad\u540e\u7eed\u903b\u8f91 return $form->response()->error('\u670d\u52a1\u5668\u51fa\u9519\u4e86~'); }); saving \u4fdd\u5b58\u524d\u56de\u8c03\uff0c\u5728\u6b64\u4e8b\u4ef6\u4e2d\u53ef\u4ee5\u4fee\u6539\u3001\u5220\u9664\u7528\u6237\u63d0\u4ea4\u7684\u6570\u636e\u6216\u8005\u4e2d\u65ad\u63d0\u4ea4\u64cd\u4f5c $form->saving(function (Form $form) { // \u5224\u65ad\u662f\u5426\u662f\u65b0\u589e\u64cd\u4f5c if ($form->isCreating()) { } // \u5220\u9664\u7528\u6237\u63d0\u4ea4\u7684\u6570\u636e $form->deleteInput('title'); // \u4e2d\u65ad\u540e\u7eed\u903b\u8f91 return $form->response()->error('\u670d\u52a1\u5668\u51fa\u9519\u4e86~'); }); saved \u4fdd\u5b58\u540e\u56de\u8c03\uff0c\u6b64\u4e8b\u4ef6\u65b0\u589e\u548c\u4fee\u6539\u64cd\u4f5c\u5171\u7528\uff0c\u901a\u8fc7\u7b2c\u4e8c\u4e2a\u53c2\u6570 $result \u53ef\u4ee5\u5224\u65ad\u6570\u636e\u662f\u5426\u4fdd\u5b58\u6210\u529f\u3002 {tip} \u65b0\u589e\u9875\u9762\u4e0b\uff0c $result \u7684\u503c\u662f\u65b0\u589e\u8bb0\u5f55\u7684\u81ea\u589eID $form->saved(function (Form $form, $result) { // \u5224\u65ad\u662f\u5426\u662f\u65b0\u589e\u64cd\u4f5c if ($form->isCreating()) { // \u81ea\u589eID $newId = $result; // \u4e5f\u53ef\u4ee5\u8fd9\u6837\u83b7\u53d6\u81ea\u589eID $newId = $form->getKey(); if (! $newId) { return $form->error('\u6570\u636e\u4fdd\u5b58\u5931\u8d25'); } return; } // \u4fee\u6539\u64cd\u4f5c }); {tip} $form->repository()->eloquent() \u70ba\u7576\u524d\u65b0\u589e\u6216\u7de8\u8f2f\u5f8c\u7684eloquent $form->saved(function (Form $form, $result) { // \u5728\u8868\u55ae\u4fdd\u5b58\u5f8c\u7372\u53d6eloquent $form->repository()->eloquent()->update(['data' => 'new']); }); deleting \u5220\u9664\u524d\u56de\u8c03 $form->deleting(function (Form $form) { // \u83b7\u53d6\u5f85\u5220\u9664\u884c\u6570\u636e\uff0c\u8fd9\u91cc\u83b7\u53d6\u7684\u662f\u4e00\u4e2a\u4e8c\u7ef4\u6570\u7ec4 $data = $form->model()->toArray(); }); deleted \u5220\u9664\u540e\u56de\u8c03\uff0c\u901a\u8fc7\u7b2c\u4e8c\u4e2a\u53c2\u6570 $result \u53ef\u4ee5\u5224\u65ad\u6570\u636e\u662f\u5426\u5220\u9664\u6210\u529f\u3002 $form->deleted(function (Form $form, $result) { // \u83b7\u53d6\u5f85\u5220\u9664\u884c\u6570\u636e\uff0c\u8fd9\u91cc\u83b7\u53d6\u7684\u662f\u4e00\u4e2a\u4e8c\u7ef4\u6570\u7ec4 $data = $form->model()->toArray(); // \u901a\u8fc7 $result \u53ef\u4ee5\u5224\u65ad\u6570\u636e\u662f\u5426\u5220\u9664\u6210\u529f if (! $result) { return $form->response()->error('\u6570\u636e\u5220\u9664\u5931\u8d25'); } // \u8fd4\u56de\u5220\u9664\u6210\u529f\u63d0\u9192\uff0c\u6b64\u5904\u8df3\u8f6c\u53c2\u6570\u65e0\u6548 return $form->response()->success('\u5220\u9664\u6210\u529f'); }); uploading \u56fe\u7247\u3001\u6587\u4ef6\u4e0a\u4f20\u4e8b\u4ef6 {tip} \u6587\u4ef6\u4e0a\u4f20\u662f\u4e00\u4e2a\u72ec\u7acb\u7684api\u8bf7\u6c42\uff0c\u8fd9\u4e2a\u4e8b\u4ef6\u5185 redirect \u65b9\u6cd5\u662f\u65e0\u6548\u7684\u3002 use Dcat\\Admin\\Form; use Dcat\\Admin\\Form\\Field; use Dcat\\Admin\\Contracts\\UploadField as UploadFieldInterface; use Symfony\\Component\\HttpFoundation\\File\\UploadedFile; $form->uploading(function (Form $form, UploadFieldInterface $field, UploadedFile $file) { // $file \u5373\u662f\u5f53\u524d\u4e0a\u4f20\u7684\u5b8c\u6574\u6587\u4ef6 /* @var Field $field */ // \u83b7\u53d6\u6587\u4ef6\u4e0a\u4f20\u5b57\u6bb5\u540d\u79f0 $column = $field->column(); }); uploaded \u56fe\u7247\u3001\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6bd5\u4e8b\u4ef6 {tip} \u6587\u4ef6\u4e0a\u4f20\u662f\u4e00\u4e2a\u72ec\u7acb\u7684api\u8bf7\u6c42\uff0c\u8fd9\u4e2a\u4e8b\u4ef6\u5185 redirect \u65b9\u6cd5\u662f\u65e0\u6548\u7684\u3002 use Dcat\\Admin\\Form; use Dcat\\Admin\\Form\\Field; use Dcat\\Admin\\Contracts\\UploadField as UploadFieldInterface; use Symfony\\Component\\HttpFoundation\\File\\UploadedFile; $form->uploaded(function (Form $form, UploadFieldInterface $field, UploadedFile $file, $response) { // $file \u5373\u662f\u5f53\u524d\u4e0a\u4f20\u7684\u5b8c\u6574\u6587\u4ef6 /* @var Field $field */ // \u83b7\u53d6\u6587\u4ef6\u4e0a\u4f20\u5b57\u6bb5\u540d\u79f0 $column = $field->column(); $response = (array) $response->getData(); // \u6587\u4ef6\u4e0a\u4f20\u6210\u529f if ($response['status']) { // \u6587\u4ef6\u8bbf\u95ee\u5730\u5740 $url = $response['url']; } }); \u83b7\u53d6\u6a21\u578b\u4e2d\u7684\u6570\u636e $form->saved(function (Form $form) { $id = $form->getKey(); $username = $form->model()->username; // \u83b7\u53d6\u6700\u7ec8\u4fdd\u5b58\u7684\u6570\u7ec4 $updates = $form->updates(); }); \u4fee\u6539\u6216\u5220\u9664\u7528\u6237\u63d0\u4ea4\u7684\u6570\u636e \u6b64\u529f\u80fd\u5728 saving \u548c submitted \u4e8b\u4ef6\u4e2d\u6709\u6548 $form->select('author_id'); $form->saving(function (Form $form) { // \u4fee\u6539\u7528\u6237\u63d0\u4ea4\u7684\u6570\u636e $form->author_id = 1; // \u5220\u9664\u3001\u5ffd\u7565\u7528\u6237\u63d0\u4ea4\u7684\u6570\u636e $form->deleteInput('author_id'); }); \u4fee\u6539\u6a21\u578b\u4e2d\u7684\u6570\u636e \u4fee\u6539\u6a21\u578b\u4e2d\u7684\u6570\u636e\u9700\u8981\u914d\u5408\u9690\u85cf\u8868\u5355\u4f7f\u7528\u3002\u4e3e\u4f8b\uff1a $form->hidden('author_id'); $form->saving(function (Form $form) { $form->author_id = 1; }); \u8868\u5355\u54cd\u5e94 {tip} \u6b64\u65b9\u6cd5\u5728 creating \u3001 editing \u4e8b\u4ef6\u4e2d\u5747\u4e0d\u53ef\u7528\u3002 \u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003\u6587\u6863 \u52a8\u4f5c\u548c\u8868\u5355\u54cd\u5e94 \u7ae0\u8282\u3002 redirect\uff08\u5c40\u90e8\u5237\u65b0/\u5355\u9875\u5237\u65b0\uff09 // \u8df3\u8f6c\u5e76\u63d0\u793a\u6210\u529f\u4fe1\u606f $form->saved(function (Form $form) { return $form->response()->success('\u4fdd\u5b58\u6210\u529f')->redirect('auth/user'); }); // \u8df3\u8f6c\u5e76\u63d0\u793a\u9519\u8bef\u4fe1\u606f $form->saved(function (Form $form) { return $form->response()->error('\u7cfb\u7edf\u9519\u8bef')->redirect('auth/user'); }); \u4ec5\u8fd4\u56de\u9519\u8bef\u4fe1\u606f\u4f46\u4e0d\u8df3\u8f6c $form->saving(function (Form $form) { return $form->response()->error('\u7cfb\u7edf\u5f02\u5e38'); }); \u4e5f\u53ef\u4ee5\u901a\u8fc7\u629b\u51fa\u5f02\u5e38\u7684\u5f62\u5f0f\u5c55\u793a\u9519\u8bef\u4fe1\u606f $form->submitted(function ($form) { throw new \\Exception('\u7981\u6b62\u8bbf\u95ee'); }); \u8fd4\u56de\u5b57\u6bb5\u9a8c\u8bc1\u51fa\u9519\u4fe1\u606f \u901a\u8fc7 responseValidationMessages \u65b9\u6cd5\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u8fd4\u56de\u5b57\u6bb5\u9a8c\u8bc1\u51fa\u9519\u4fe1\u606f\uff0c\u800c\u4e0d\u9700\u8981\u4f7f\u7528 Laravel validation \u529f\u80fd\u3002 \u666e\u901a\u4f7f\u7528 protected function form() { return Form::make(new Model(), function (Form $form) { if (...) { // \u9a8c\u8bc1\u903b\u8f91 $form->responseValidationMessages('title', 'title\u683c\u5f0f\u9519\u8bef'); // \u5982\u6709\u591a\u4e2a\u9519\u8bef\u4fe1\u606f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f20\u6570\u7ec4 $form->responseValidationMessages('content', ['content\u683c\u5f0f\u9519\u8bef', 'content\u4e0d\u80fd\u4e3a\u7a7a']); } }); } \u5728\u4e8b\u4ef6\u4e2d\u4f7f\u7528 {tip} \u6b64\u65b9\u6cd5\u4ec5\u5728 submitted \u4e8b\u4ef6\u4e2d\u53ef\u7528 $form->submitted(function (Form $form) { // \u63a5\u6536\u8868\u5355\u53c2\u6570 $title = $form->title; if (...) { // \u9a8c\u8bc1\u903b\u8f91 $form->responseValidationMessages('title', 'title\u683c\u5f0f\u9519\u8bef'); // \u5982\u6709\u591a\u4e2a\u9519\u8bef\u4fe1\u606f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f20\u6570\u7ec4 $form->responseValidationMessages('content', ['content\u683c\u5f0f\u9519\u8bef', 'content\u4e0d\u80fd\u4e3a\u7a7a']); } });","title":"\u8868\u5355\u56de\u8c03"},{"location":"2.x/model-form-callback/#_1","text":"Form \u76ee\u524d\u63d0\u4f9b\u4e86\u4e0b\u9762\u51e0\u4e2a\u65b9\u6cd5\u6765\u63a5\u6536\u56de\u8c03\u51fd\u6570\uff1a","title":"\u8868\u5355\u56de\u8c03"},{"location":"2.x/model-form-callback/#creating","text":"\u5728\u65b0\u589e\u9875\u9762\u8c03\u7528\uff08\u975e\u63d0\u4ea4\u64cd\u4f5c\uff09 $form->creating(function (Form $form) { if (...) { // \u9a8c\u8bc1\u903b\u8f91 $form->responseValidationMessages('title', 'title\u683c\u5f0f\u9519\u8bef'); // \u5982\u6709\u591a\u4e2a\u9519\u8bef\u4fe1\u606f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f20\u6570\u7ec4 $form->responseValidationMessages('content', ['content\u683c\u5f0f\u9519\u8bef', 'content\u4e0d\u80fd\u4e3a\u7a7a']); } });","title":"creating"},{"location":"2.x/model-form-callback/#editing","text":"\u5728\u7f16\u8f91\u9875\u9762\u8c03\u7528\uff08\u975e\u63d0\u4ea4\u64cd\u4f5c\uff09 $form->editing(function (Form $form) { if (...) { // \u9a8c\u8bc1\u903b\u8f91 $form->responseValidationMessages('title', 'title\u683c\u5f0f\u9519\u8bef'); // \u5982\u6709\u591a\u4e2a\u9519\u8bef\u4fe1\u606f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f20\u6570\u7ec4 $form->responseValidationMessages('content', ['content\u683c\u5f0f\u9519\u8bef', 'content\u4e0d\u80fd\u4e3a\u7a7a']); } });","title":"editing"},{"location":"2.x/model-form-callback/#submitted","text":"\u5728\u8868\u5355\u63d0\u4ea4\u524d\u8c03\u7528\uff0c\u5728\u6b64\u4e8b\u4ef6\u4e2d\u53ef\u4ee5\u4fee\u6539\u3001\u5220\u9664\u7528\u6237\u63d0\u4ea4\u7684\u6570\u636e\u6216\u8005\u4e2d\u65ad\u63d0\u4ea4\u64cd\u4f5c $form->submitted(function (Form $form) { // \u83b7\u53d6\u7528\u6237\u63d0\u4ea4\u53c2\u6570 $title = $form->title; // \u4e0a\u9762\u5199\u6cd5\u7b49\u540c\u4e8e $title = $form->input('title'); // \u5220\u9664\u7528\u6237\u63d0\u4ea4\u7684\u6570\u636e $form->deleteInput('title'); // \u4e2d\u65ad\u540e\u7eed\u903b\u8f91 return $form->response()->error('\u670d\u52a1\u5668\u51fa\u9519\u4e86~'); });","title":"submitted"},{"location":"2.x/model-form-callback/#saving","text":"\u4fdd\u5b58\u524d\u56de\u8c03\uff0c\u5728\u6b64\u4e8b\u4ef6\u4e2d\u53ef\u4ee5\u4fee\u6539\u3001\u5220\u9664\u7528\u6237\u63d0\u4ea4\u7684\u6570\u636e\u6216\u8005\u4e2d\u65ad\u63d0\u4ea4\u64cd\u4f5c $form->saving(function (Form $form) { // \u5224\u65ad\u662f\u5426\u662f\u65b0\u589e\u64cd\u4f5c if ($form->isCreating()) { } // \u5220\u9664\u7528\u6237\u63d0\u4ea4\u7684\u6570\u636e $form->deleteInput('title'); // \u4e2d\u65ad\u540e\u7eed\u903b\u8f91 return $form->response()->error('\u670d\u52a1\u5668\u51fa\u9519\u4e86~'); });","title":"saving"},{"location":"2.x/model-form-callback/#saved","text":"\u4fdd\u5b58\u540e\u56de\u8c03\uff0c\u6b64\u4e8b\u4ef6\u65b0\u589e\u548c\u4fee\u6539\u64cd\u4f5c\u5171\u7528\uff0c\u901a\u8fc7\u7b2c\u4e8c\u4e2a\u53c2\u6570 $result \u53ef\u4ee5\u5224\u65ad\u6570\u636e\u662f\u5426\u4fdd\u5b58\u6210\u529f\u3002 {tip} \u65b0\u589e\u9875\u9762\u4e0b\uff0c $result \u7684\u503c\u662f\u65b0\u589e\u8bb0\u5f55\u7684\u81ea\u589eID $form->saved(function (Form $form, $result) { // \u5224\u65ad\u662f\u5426\u662f\u65b0\u589e\u64cd\u4f5c if ($form->isCreating()) { // \u81ea\u589eID $newId = $result; // \u4e5f\u53ef\u4ee5\u8fd9\u6837\u83b7\u53d6\u81ea\u589eID $newId = $form->getKey(); if (! $newId) { return $form->error('\u6570\u636e\u4fdd\u5b58\u5931\u8d25'); } return; } // \u4fee\u6539\u64cd\u4f5c }); {tip} $form->repository()->eloquent() \u70ba\u7576\u524d\u65b0\u589e\u6216\u7de8\u8f2f\u5f8c\u7684eloquent $form->saved(function (Form $form, $result) { // \u5728\u8868\u55ae\u4fdd\u5b58\u5f8c\u7372\u53d6eloquent $form->repository()->eloquent()->update(['data' => 'new']); });","title":"saved"},{"location":"2.x/model-form-callback/#deleting","text":"\u5220\u9664\u524d\u56de\u8c03 $form->deleting(function (Form $form) { // \u83b7\u53d6\u5f85\u5220\u9664\u884c\u6570\u636e\uff0c\u8fd9\u91cc\u83b7\u53d6\u7684\u662f\u4e00\u4e2a\u4e8c\u7ef4\u6570\u7ec4 $data = $form->model()->toArray(); });","title":"deleting"},{"location":"2.x/model-form-callback/#deleted","text":"\u5220\u9664\u540e\u56de\u8c03\uff0c\u901a\u8fc7\u7b2c\u4e8c\u4e2a\u53c2\u6570 $result \u53ef\u4ee5\u5224\u65ad\u6570\u636e\u662f\u5426\u5220\u9664\u6210\u529f\u3002 $form->deleted(function (Form $form, $result) { // \u83b7\u53d6\u5f85\u5220\u9664\u884c\u6570\u636e\uff0c\u8fd9\u91cc\u83b7\u53d6\u7684\u662f\u4e00\u4e2a\u4e8c\u7ef4\u6570\u7ec4 $data = $form->model()->toArray(); // \u901a\u8fc7 $result \u53ef\u4ee5\u5224\u65ad\u6570\u636e\u662f\u5426\u5220\u9664\u6210\u529f if (! $result) { return $form->response()->error('\u6570\u636e\u5220\u9664\u5931\u8d25'); } // \u8fd4\u56de\u5220\u9664\u6210\u529f\u63d0\u9192\uff0c\u6b64\u5904\u8df3\u8f6c\u53c2\u6570\u65e0\u6548 return $form->response()->success('\u5220\u9664\u6210\u529f'); });","title":"deleted"},{"location":"2.x/model-form-callback/#uploading","text":"\u56fe\u7247\u3001\u6587\u4ef6\u4e0a\u4f20\u4e8b\u4ef6 {tip} \u6587\u4ef6\u4e0a\u4f20\u662f\u4e00\u4e2a\u72ec\u7acb\u7684api\u8bf7\u6c42\uff0c\u8fd9\u4e2a\u4e8b\u4ef6\u5185 redirect \u65b9\u6cd5\u662f\u65e0\u6548\u7684\u3002 use Dcat\\Admin\\Form; use Dcat\\Admin\\Form\\Field; use Dcat\\Admin\\Contracts\\UploadField as UploadFieldInterface; use Symfony\\Component\\HttpFoundation\\File\\UploadedFile; $form->uploading(function (Form $form, UploadFieldInterface $field, UploadedFile $file) { // $file \u5373\u662f\u5f53\u524d\u4e0a\u4f20\u7684\u5b8c\u6574\u6587\u4ef6 /* @var Field $field */ // \u83b7\u53d6\u6587\u4ef6\u4e0a\u4f20\u5b57\u6bb5\u540d\u79f0 $column = $field->column(); });","title":"uploading"},{"location":"2.x/model-form-callback/#uploaded","text":"\u56fe\u7247\u3001\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6bd5\u4e8b\u4ef6 {tip} \u6587\u4ef6\u4e0a\u4f20\u662f\u4e00\u4e2a\u72ec\u7acb\u7684api\u8bf7\u6c42\uff0c\u8fd9\u4e2a\u4e8b\u4ef6\u5185 redirect \u65b9\u6cd5\u662f\u65e0\u6548\u7684\u3002 use Dcat\\Admin\\Form; use Dcat\\Admin\\Form\\Field; use Dcat\\Admin\\Contracts\\UploadField as UploadFieldInterface; use Symfony\\Component\\HttpFoundation\\File\\UploadedFile; $form->uploaded(function (Form $form, UploadFieldInterface $field, UploadedFile $file, $response) { // $file \u5373\u662f\u5f53\u524d\u4e0a\u4f20\u7684\u5b8c\u6574\u6587\u4ef6 /* @var Field $field */ // \u83b7\u53d6\u6587\u4ef6\u4e0a\u4f20\u5b57\u6bb5\u540d\u79f0 $column = $field->column(); $response = (array) $response->getData(); // \u6587\u4ef6\u4e0a\u4f20\u6210\u529f if ($response['status']) { // \u6587\u4ef6\u8bbf\u95ee\u5730\u5740 $url = $response['url']; } });","title":"uploaded"},{"location":"2.x/model-form-callback/#_2","text":"$form->saved(function (Form $form) { $id = $form->getKey(); $username = $form->model()->username; // \u83b7\u53d6\u6700\u7ec8\u4fdd\u5b58\u7684\u6570\u7ec4 $updates = $form->updates(); });","title":"\u83b7\u53d6\u6a21\u578b\u4e2d\u7684\u6570\u636e"},{"location":"2.x/model-form-callback/#_3","text":"\u6b64\u529f\u80fd\u5728 saving \u548c submitted \u4e8b\u4ef6\u4e2d\u6709\u6548 $form->select('author_id'); $form->saving(function (Form $form) { // \u4fee\u6539\u7528\u6237\u63d0\u4ea4\u7684\u6570\u636e $form->author_id = 1; // \u5220\u9664\u3001\u5ffd\u7565\u7528\u6237\u63d0\u4ea4\u7684\u6570\u636e $form->deleteInput('author_id'); });","title":"\u4fee\u6539\u6216\u5220\u9664\u7528\u6237\u63d0\u4ea4\u7684\u6570\u636e"},{"location":"2.x/model-form-callback/#_4","text":"\u4fee\u6539\u6a21\u578b\u4e2d\u7684\u6570\u636e\u9700\u8981\u914d\u5408\u9690\u85cf\u8868\u5355\u4f7f\u7528\u3002\u4e3e\u4f8b\uff1a $form->hidden('author_id'); $form->saving(function (Form $form) { $form->author_id = 1; });","title":"\u4fee\u6539\u6a21\u578b\u4e2d\u7684\u6570\u636e"},{"location":"2.x/model-form-callback/#_5","text":"{tip} \u6b64\u65b9\u6cd5\u5728 creating \u3001 editing \u4e8b\u4ef6\u4e2d\u5747\u4e0d\u53ef\u7528\u3002 \u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003\u6587\u6863 \u52a8\u4f5c\u548c\u8868\u5355\u54cd\u5e94 \u7ae0\u8282\u3002 redirect\uff08\u5c40\u90e8\u5237\u65b0/\u5355\u9875\u5237\u65b0\uff09 // \u8df3\u8f6c\u5e76\u63d0\u793a\u6210\u529f\u4fe1\u606f $form->saved(function (Form $form) { return $form->response()->success('\u4fdd\u5b58\u6210\u529f')->redirect('auth/user'); }); // \u8df3\u8f6c\u5e76\u63d0\u793a\u9519\u8bef\u4fe1\u606f $form->saved(function (Form $form) { return $form->response()->error('\u7cfb\u7edf\u9519\u8bef')->redirect('auth/user'); }); \u4ec5\u8fd4\u56de\u9519\u8bef\u4fe1\u606f\u4f46\u4e0d\u8df3\u8f6c $form->saving(function (Form $form) { return $form->response()->error('\u7cfb\u7edf\u5f02\u5e38'); }); \u4e5f\u53ef\u4ee5\u901a\u8fc7\u629b\u51fa\u5f02\u5e38\u7684\u5f62\u5f0f\u5c55\u793a\u9519\u8bef\u4fe1\u606f $form->submitted(function ($form) { throw new \\Exception('\u7981\u6b62\u8bbf\u95ee'); });","title":"\u8868\u5355\u54cd\u5e94"},{"location":"2.x/model-form-callback/#_6","text":"\u901a\u8fc7 responseValidationMessages \u65b9\u6cd5\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u8fd4\u56de\u5b57\u6bb5\u9a8c\u8bc1\u51fa\u9519\u4fe1\u606f\uff0c\u800c\u4e0d\u9700\u8981\u4f7f\u7528 Laravel validation \u529f\u80fd\u3002 \u666e\u901a\u4f7f\u7528 protected function form() { return Form::make(new Model(), function (Form $form) { if (...) { // \u9a8c\u8bc1\u903b\u8f91 $form->responseValidationMessages('title', 'title\u683c\u5f0f\u9519\u8bef'); // \u5982\u6709\u591a\u4e2a\u9519\u8bef\u4fe1\u606f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f20\u6570\u7ec4 $form->responseValidationMessages('content', ['content\u683c\u5f0f\u9519\u8bef', 'content\u4e0d\u80fd\u4e3a\u7a7a']); } }); } \u5728\u4e8b\u4ef6\u4e2d\u4f7f\u7528 {tip} \u6b64\u65b9\u6cd5\u4ec5\u5728 submitted \u4e8b\u4ef6\u4e2d\u53ef\u7528 $form->submitted(function (Form $form) { // \u63a5\u6536\u8868\u5355\u53c2\u6570 $title = $form->title; if (...) { // \u9a8c\u8bc1\u903b\u8f91 $form->responseValidationMessages('title', 'title\u683c\u5f0f\u9519\u8bef'); // \u5982\u6709\u591a\u4e2a\u9519\u8bef\u4fe1\u606f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f20\u6570\u7ec4 $form->responseValidationMessages('content', ['content\u683c\u5f0f\u9519\u8bef', 'content\u4e0d\u80fd\u4e3a\u7a7a']); } });","title":"\u8fd4\u56de\u5b57\u6bb5\u9a8c\u8bc1\u51fa\u9519\u4fe1\u606f"},{"location":"2.x/model-form-data/","text":"\u8868\u5355\u6570\u636e\u6e90 \u6a21\u578b\u4e0e\u6570\u636e\u4ed3\u5e93 \u6570\u636e\u4ed3\u5e93( Repository )\u662f\u4e00\u4e2a\u53ef\u4ee5\u63d0\u4f9b\u7279\u5b9a\u63a5\u53e3\u5bf9\u6570\u636e\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u7684\u7c7b\uff0c\u901a\u8fc7\u6570\u636e\u4ed3\u5e93\u7684\u5f15\u5165\uff0c\u53ef\u4ee5\u8ba9\u9875\u9762\u7684\u6784\u5efa\u4e0d\u518d\u5173\u5fc3\u6570\u636e\u8bfb\u5199\u529f\u80fd\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u5f00\u53d1\u8005\u53ea\u9700\u8981\u5b9e\u73b0\u7279\u5b9a\u7684\u64cd\u4f5c\u63a5\u53e3\u5373\u53ef\u8f7b\u677e\u5207\u6362\u6570\u636e\u6e90\u3002\u5173\u4e8e\u6570\u636e\u4ed3\u5e93\u7684\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003\u6587\u6863 \u6570\u636e\u4ed3\u5e93 \u3002 \u6570\u636e\u6765\u81ea\u6a21\u578b {tip} \u5982\u679c\u4f60\u7684\u6570\u636e\u6765\u81ea Model \uff0c\u90a3\u4e48\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 Model \u5b9e\u4f8b\uff0c\u5e95\u5c42\u4f1a\u81ea\u52a8\u628a Model \u8f6c\u5316\u4e3a\u6570\u636e\u4ed3\u5e93\u5b9e\u4f8b\u3002 \u5f53\u6570\u636e\u6e90\u652f\u6301\u6a21\u578b\u65f6\uff0c\u53ea\u9700\u521b\u5efa\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u7684 Repository \u7c7b\u65e2\u53ef\uff1a <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use App\\Models\\Movie as MovieModel; class Movie extends EloquentRepository { // \u8fd9\u91cc\u5b9a\u4e49\u4f60\u7684\u6a21\u578b\u7c7b\u540d protected $eloquentClass = MovieModel::class; // \u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u8868\u5355\u9875\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\"*\" public function getFormColumns() { return [$this->getKeyName(), 'name', 'title', 'created_at']; } } \u4f7f\u7528\uff1a use App\\Admin\\Repositories\\Movie; $form = new Form(new Movie); ... \u6570\u636e\u6765\u81ea\u5916\u90e8API \u4e0b\u9762\u4ee5 \u8c46\u74e3\u7535\u5f71 \u7684API\u4e3a\u4f8b\u5b50\uff0c\u6765\u5c55\u793a Repository \u7684\u8868\u5355\u6570\u636e\u8bfb\u5199\u64cd\u4f5c\u76f8\u5173\u63a5\u53e3\u7684\u7528\u6cd5\uff1a <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\Repository; use Dcat\\Admin\\Form; class ComingSoon extends Repository { protected $api = 'https://api.douban.com/v2/movie/coming_soon'; // \u8fd4\u56de\u4f60\u7684id\u5b57\u6bb5\u540d\u79f0\uff0c\u9ed8\u8ba4\u201cid\u201d protected $keyName = '_id'; // \u67e5\u8be2\u7f16\u8f91\u9875\u6570\u636e // \u8fd9\u4e2a\u65b9\u6cd5\u9700\u8981\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4 public function edit(Form $form) { // \u83b7\u53d6id $id = $form->builder()->getResourceId(); $data = file_get_contents(\"http://api.douban.com/v2/movie/subject/$id\"); return json_decode($data, true); } // \u8fd9\u4e2a\u65b9\u6cd5\u7528\u4e8e\u5728\u4fee\u6539\u6570\u636e\u524d\u67e5\u8be2\u539f\u8bb0\u5f55 // \u5982\u679c\u4f7f\u7528\u4e86\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\uff0c\u5f53\u6587\u4ef6\u53d1\u751f\u53d8\u66f4\u65f6\u4f1a\u6839\u636e\u8fd9\u4e2a\u539f\u59cb\u8bb0\u5f55\u81ea\u52a8\u5220\u9664\u65e7\u6587\u4ef6 // \u5982\u679c\u4e0d\u9700\u8981\u6b64\u6570\u636e\u8fd4\u56de\u7a7a\u6570\u7ec4\u5373\u53ef public function updating(Form $form) { // \u83b7\u53d6id $id = $form->builder()->getResourceId(); return []; } // \u4fee\u6539\u64cd\u4f5c // \u8fd4\u56de\u4e00\u4e2abool\u7c7b\u578b\u7684\u6570\u636e public function update(Form $form) { // \u83b7\u53d6id $id = $form->builder()->getResourceId(); // \u83b7\u53d6\u8981\u4fee\u6539\u7684\u6570\u636e $attributes = $form->updates(); // TODO // \u8fd9\u91cc\u5199\u4f60\u7684\u4fee\u6539\u903b\u8f91 return true; } // \u8fd9\u4e2a\u65b9\u6cd5\u7528\u4e8e\u5728\u4fee\u6539\u6570\u636e\u524d\u67e5\u8be2\u539f\u59cb\u6570\u636e // \u5982\u679c\u4f7f\u7528\u4e86\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\uff0c\u4f1a\u6839\u636e\u8fd9\u4e2a\u6570\u636e\u81ea\u52a8\u5220\u9664\u6587\u4ef6 // \u5982\u679c\u4e0d\u9700\u8981\u6b64\u6570\u636e\u8fd4\u56de\u7a7a\u6570\u7ec4\u5373\u53ef public function deleting(Form $form) { $id = $form->builder()->getResourceId(); $id = explode(',', $id); // $data = file_get_contents(\"http://api.douban.com/v2/movie/subject/$id\"); // // return json_decode($data, true); return []; } // \u5220\u9664\u6570\u636e // $deletingData \u662f\u7531 getDataWhenDeleting \u65b9\u6cd5\u8fd4\u56de\u7684\u6570\u636e public function destroy(Form $form, $deletingData) { // \u6ce8\u610f\u8fd9\u91cc\u7684id\u53ef\u80fd\u662f\u591a\u4e2a $id = $form->builder()->getResourceId(); // \u5f53\u4f7f\u7528\u6279\u91cf\u5220\u9664\u529f\u80fd\u65f6\uff0c\u8fd9\u91cc\u7684id\u662f\u7528\u201c,\u201d\u9694\u5f00\u7684\u5b57\u7b26\u4e32 $id = explode(',', $id); // TODO // var_dump($id, $deletingData); return true; } }","title":"\u8868\u5355\u6570\u636e\u6e90"},{"location":"2.x/model-form-data/#_1","text":"","title":"\u8868\u5355\u6570\u636e\u6e90"},{"location":"2.x/model-form-data/#_2","text":"\u6570\u636e\u4ed3\u5e93( Repository )\u662f\u4e00\u4e2a\u53ef\u4ee5\u63d0\u4f9b\u7279\u5b9a\u63a5\u53e3\u5bf9\u6570\u636e\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u7684\u7c7b\uff0c\u901a\u8fc7\u6570\u636e\u4ed3\u5e93\u7684\u5f15\u5165\uff0c\u53ef\u4ee5\u8ba9\u9875\u9762\u7684\u6784\u5efa\u4e0d\u518d\u5173\u5fc3\u6570\u636e\u8bfb\u5199\u529f\u80fd\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u5f00\u53d1\u8005\u53ea\u9700\u8981\u5b9e\u73b0\u7279\u5b9a\u7684\u64cd\u4f5c\u63a5\u53e3\u5373\u53ef\u8f7b\u677e\u5207\u6362\u6570\u636e\u6e90\u3002\u5173\u4e8e\u6570\u636e\u4ed3\u5e93\u7684\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003\u6587\u6863 \u6570\u636e\u4ed3\u5e93 \u3002","title":"\u6a21\u578b\u4e0e\u6570\u636e\u4ed3\u5e93"},{"location":"2.x/model-form-data/#_3","text":"{tip} \u5982\u679c\u4f60\u7684\u6570\u636e\u6765\u81ea Model \uff0c\u90a3\u4e48\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 Model \u5b9e\u4f8b\uff0c\u5e95\u5c42\u4f1a\u81ea\u52a8\u628a Model \u8f6c\u5316\u4e3a\u6570\u636e\u4ed3\u5e93\u5b9e\u4f8b\u3002 \u5f53\u6570\u636e\u6e90\u652f\u6301\u6a21\u578b\u65f6\uff0c\u53ea\u9700\u521b\u5efa\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u7684 Repository \u7c7b\u65e2\u53ef\uff1a <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use App\\Models\\Movie as MovieModel; class Movie extends EloquentRepository { // \u8fd9\u91cc\u5b9a\u4e49\u4f60\u7684\u6a21\u578b\u7c7b\u540d protected $eloquentClass = MovieModel::class; // \u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u8868\u5355\u9875\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\"*\" public function getFormColumns() { return [$this->getKeyName(), 'name', 'title', 'created_at']; } } \u4f7f\u7528\uff1a use App\\Admin\\Repositories\\Movie; $form = new Form(new Movie); ...","title":"\u6570\u636e\u6765\u81ea\u6a21\u578b"},{"location":"2.x/model-form-data/#api","text":"\u4e0b\u9762\u4ee5 \u8c46\u74e3\u7535\u5f71 \u7684API\u4e3a\u4f8b\u5b50\uff0c\u6765\u5c55\u793a Repository \u7684\u8868\u5355\u6570\u636e\u8bfb\u5199\u64cd\u4f5c\u76f8\u5173\u63a5\u53e3\u7684\u7528\u6cd5\uff1a <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\Repository; use Dcat\\Admin\\Form; class ComingSoon extends Repository { protected $api = 'https://api.douban.com/v2/movie/coming_soon'; // \u8fd4\u56de\u4f60\u7684id\u5b57\u6bb5\u540d\u79f0\uff0c\u9ed8\u8ba4\u201cid\u201d protected $keyName = '_id'; // \u67e5\u8be2\u7f16\u8f91\u9875\u6570\u636e // \u8fd9\u4e2a\u65b9\u6cd5\u9700\u8981\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4 public function edit(Form $form) { // \u83b7\u53d6id $id = $form->builder()->getResourceId(); $data = file_get_contents(\"http://api.douban.com/v2/movie/subject/$id\"); return json_decode($data, true); } // \u8fd9\u4e2a\u65b9\u6cd5\u7528\u4e8e\u5728\u4fee\u6539\u6570\u636e\u524d\u67e5\u8be2\u539f\u8bb0\u5f55 // \u5982\u679c\u4f7f\u7528\u4e86\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\uff0c\u5f53\u6587\u4ef6\u53d1\u751f\u53d8\u66f4\u65f6\u4f1a\u6839\u636e\u8fd9\u4e2a\u539f\u59cb\u8bb0\u5f55\u81ea\u52a8\u5220\u9664\u65e7\u6587\u4ef6 // \u5982\u679c\u4e0d\u9700\u8981\u6b64\u6570\u636e\u8fd4\u56de\u7a7a\u6570\u7ec4\u5373\u53ef public function updating(Form $form) { // \u83b7\u53d6id $id = $form->builder()->getResourceId(); return []; } // \u4fee\u6539\u64cd\u4f5c // \u8fd4\u56de\u4e00\u4e2abool\u7c7b\u578b\u7684\u6570\u636e public function update(Form $form) { // \u83b7\u53d6id $id = $form->builder()->getResourceId(); // \u83b7\u53d6\u8981\u4fee\u6539\u7684\u6570\u636e $attributes = $form->updates(); // TODO // \u8fd9\u91cc\u5199\u4f60\u7684\u4fee\u6539\u903b\u8f91 return true; } // \u8fd9\u4e2a\u65b9\u6cd5\u7528\u4e8e\u5728\u4fee\u6539\u6570\u636e\u524d\u67e5\u8be2\u539f\u59cb\u6570\u636e // \u5982\u679c\u4f7f\u7528\u4e86\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\uff0c\u4f1a\u6839\u636e\u8fd9\u4e2a\u6570\u636e\u81ea\u52a8\u5220\u9664\u6587\u4ef6 // \u5982\u679c\u4e0d\u9700\u8981\u6b64\u6570\u636e\u8fd4\u56de\u7a7a\u6570\u7ec4\u5373\u53ef public function deleting(Form $form) { $id = $form->builder()->getResourceId(); $id = explode(',', $id); // $data = file_get_contents(\"http://api.douban.com/v2/movie/subject/$id\"); // // return json_decode($data, true); return []; } // \u5220\u9664\u6570\u636e // $deletingData \u662f\u7531 getDataWhenDeleting \u65b9\u6cd5\u8fd4\u56de\u7684\u6570\u636e public function destroy(Form $form, $deletingData) { // \u6ce8\u610f\u8fd9\u91cc\u7684id\u53ef\u80fd\u662f\u591a\u4e2a $id = $form->builder()->getResourceId(); // \u5f53\u4f7f\u7528\u6279\u91cf\u5220\u9664\u529f\u80fd\u65f6\uff0c\u8fd9\u91cc\u7684id\u662f\u7528\u201c,\u201d\u9694\u5f00\u7684\u5b57\u7b26\u4e32 $id = explode(',', $id); // TODO // var_dump($id, $deletingData); return true; } }","title":"\u6570\u636e\u6765\u81ea\u5916\u90e8API"},{"location":"2.x/model-form-field-management/","text":"\u8868\u5355\u5b57\u6bb5\u7684\u7ba1\u7406 \u6269\u5c55\u81ea\u5b9a\u4e49\u7ec4\u4ef6 \u5728\u5f00\u59cb\u6269\u5c55\u8868\u5355\u7ec4\u4ef6\u4e4b\u524d\u9700\u8981\u5148\u4e86\u89e3 \u52a8\u6001\u76d1\u542c\u5143\u7d20\u751f\u6210 (init) \u529f\u80fd\uff0c\u8868\u5355\u7ec4\u4ef6\u7684 JS \u4ee3\u7801\u5efa\u8bae\u90fd\u4f7f\u7528 Dcat.init \u65b9\u6cd5\u76d1\u542c\u5e76\u521d\u59cb\u5316\uff0c\u5426\u5219\u53ef\u80fd\u65e0\u6cd5\u517c\u5bb9 Form::hasMany \u4ee5\u53ca Form::array \u7b49\u52a8\u6001\u751f\u6210\u5b57\u6bb5\u7684\u8868\u5355\u7c7b\u578b\u3002 \u96c6\u6210\u5bcc\u6587\u672c\u7f16\u8f91\u5668wangEditor wangEditor \u662f\u4e00\u4e2a\u4f18\u79c0\u7684\u56fd\u4ea7\u7684\u8f7b\u91cf\u7ea7\u5bcc\u6587\u672c\u7f16\u8f91\u5668\uff0c\u5982\u679c dcat-admin \u81ea\u5e26\u7684\u57fa\u4e8e ckeditor \u7684\u7f16\u8f91\u5668\u7ec4\u4ef6\u4f7f\u7528\u4e0a\u6709\u95ee\u9898\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u6b65\u9aa4\u53ef\u4ee5\u96c6\u6210\u5b83\uff0c\u5e76\u8986\u76d6\u6389\u9ed8\u8ba4\u7684 editor \uff1a \u4e3a\u4e86\u65b9\u4fbf\u6f14\u793a\uff0c\u793a\u4f8b\u4e2d\u76f4\u63a5\u4f7f\u7528CDN\u94fe\u63a5\u3002\u5b9e\u9645\u5f00\u53d1\u4e2d\u9700\u8981\u5148\u4e0b\u8f7d\u524d\u7aef\u5e93\u6587\u4ef6 wangEditor \u5230\u670d\u52a1\u5668\uff0c\u89e3\u538b\u5230\u76ee\u5f55 public/vendor/wangEditor-4.7.1 \u3002 \u65b0\u5efa\u7ec4\u4ef6\u7c7b app/Admin/Extensions/Form/WangEditor.php \u3002 <?php namespace App\\Admin\\Extensions\\Form; use Dcat\\Admin\\Form\\Field; class WangEditor extends Field { protected $view = 'admin.wang-editor'; } \u65b0\u5efa\u89c6\u56fe\u6587\u4ef6 resources/views/admin/wang-editor.blade.php \uff1a <div class=\"{{$viewClass['form-group']}}\"> <label class=\"{{$viewClass['label']}} control-label\">{{$label}}</label> <div class=\"{{$viewClass['field']}}\"> @include('admin::form.error') <div {!! $attributes !!} style=\"width: 100%; height: 100%;\"> <p>{!! $value !!}</p> </div> <input type=\"hidden\" name=\"{{$name}}\" value=\"{{ old($column, $value) }}\" /> @include('admin::form.help-block') </div> </div> <!-- script\u6807\u7b7e\u52a0\u4e0a \"init\" \u5c5e\u6027\u540e\u4f1a\u81ea\u52a8\u4f7f\u7528 Dcat.init() \u65b9\u6cd5\u52a8\u6001\u76d1\u542c\u5143\u7d20\u751f\u6210 --> <script require=\"@wang-editor\" init=\"{!! $selector !!}\"> var E = window.wangEditor // id \u53d8\u91cf\u662f Dcat.init() \u81ea\u52a8\u751f\u6210\u7684\uff0c\u662f\u4e00\u4e2a\u552f\u4e00\u7684\u968f\u673a\u5b57\u7b26\u4e32 var editor = new E('#' + id); editor.config.zIndex = 0 editor.config.uploadImgShowBase64 = true editor.config.onchange = function (html) { $this.parents('.form-field').find('input[type=\"hidden\"]').val(html); } editor.create() </script> \u7136\u540e\u6ce8\u518c\u8fdb dcat-admin \uff0c\u5728 app/Admin/bootstrap.php \u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u4ee3\u7801\uff1a <?php use App\\Admin\\Extensions\\Form\\WangEditor; use Dcat\\Admin\\Form; // \u6ce8\u518c\u524d\u7aef\u7ec4\u4ef6\u522b\u540d Admin::asset()->alias('@wang-editor', [ // \u4e3a\u4e86\u65b9\u4fbf\u6f14\u793a\u6548\u679c\uff0c\u8fd9\u91cc\u76f4\u63a5\u52a0\u8f7dCDN\u94fe\u63a5\uff0c\u5b9e\u9645\u5f00\u53d1\u4e2d\u53ef\u4ee5\u4e0b\u8f7d\u5230\u670d\u52a1\u5668\u52a0\u8f7d 'js' => ['https://cdn.jsdelivr.net/npm/wangeditor@4.7.1/dist/wangEditor.min.js'], ]); Form::extend('editor', WangEditor::class); \u8c03\u7528: $form->editor('body'); \u96c6\u6210\u5bcc\u6587\u672c\u7f16\u8f91\u5668ckeditor \u5148\u4e0b\u8f7d ckeditor \u5e76\u89e3\u538b\u5230/public\u76ee\u5f55\uff0c\u6bd4\u5982\u653e\u5728 /public/packages/ \u76ee\u5f55\u4e0b\u3002 \u7136\u540e\u65b0\u5efa\u6269\u5c55\u6587\u4ef6 app/Admin/Extensions/Form/CKEditor.php : <?php namespace App\\Admin\\Extensions\\Form; use Dcat\\Admin\\Form\\Field; class CKEditor extends Field { protected $view = 'admin.ckeditor'; } \u65b0\u5efaview resources/views/admin/ckeditor.blade.php : <div class=\"{{$viewClass['form-group']}}\"> <label class=\"{{$viewClass['label']}} control-label\">{{$label}}</label> <div class=\"{{$viewClass['field']}}\"> @include('admin::form.error') <textarea name=\"{{ $name}}\" placeholder=\"{{ $placeholder }}\" {!! $attributes !!} >{!! $value !!}</textarea> @include('admin::form.help-block') </div> </div> <script require=\"@ckeditor\" init=\"{!! $selector !!}\"> $this.ckeditor(); </script> \u7136\u540e\u5728 app/Admin/bootstrap.php \u4e2d\u5f15\u5165\u6269\u5c55\uff1a use App\\Admin\\Extensions\\Form\\CKEditor; use Dcat\\Admin\\Form; // \u6ce8\u518c\u524d\u7aef\u7ec4\u4ef6\u522b\u540d Admin::asset()->alias('@ckeditor', [ 'js' => [ '/packages/ckeditor/ckeditor.js', '/packages/ckeditor/adapters/jquery.js', ], ]); Form::extend('ckeditor', CKEditor::class); \u7136\u540e\u5c31\u80fd\u5728form\u4e2d\u4f7f\u7528\u4e86: $form->ckeditor('content'); \u96c6\u6210PHP editor \u901a\u8fc7\u4e0b\u9762\u7684\u6b65\u9aa4\u6765\u6269\u5c55\u4e00\u4e2a\u57fa\u4e8e codemirror \u7684PHP\u4ee3\u7801\u7f16\u8f91\u5668\uff0c\u6548\u679c\u53c2\u8003 PHP mode \u3002 \u5148\u5c06 codemirror \u5e93\u4e0b\u8f7d\u5e76\u89e3\u538b\u5230\u524d\u7aef\u8d44\u6e90\u76ee\u5f55\u4e0b\uff0c\u6bd4\u5982\u653e\u5728 public/packages/codemirror-5.20.2 \u76ee\u5f55\u4e0b\u3002 \u65b0\u5efa\u7ec4\u4ef6\u7c7b app/Admin/Extensions/Form/PHPEditor.php : <?php namespace App\\Admin\\Extensions\\Form; use Dcat\\Admin\\Form\\Field; class PHPEditor extends Field { protected $view = 'admin.php-editor'; } {tip} \u7c7b\u4e2d\u7684\u9759\u6001\u8d44\u6e90\u4e5f\u540c\u6837\u53ef\u4ee5\u4ece\u5916\u90e8\u5f15\u5165\uff0c\u53c2\u8003 Editor.php \u521b\u5efa\u89c6\u56fe resources/views/admin/php-editor.blade.php : <div class=\"{{$viewClass['form-group']}}\"> <label class=\"{{$viewClass['label']}} control-label\">{{$label}}</label> <div class=\"{{$viewClass['field']}}\"> @include('admin::form.error') <textarea class=\"{{ $class }}\" {!! $attributes !!} >{!! $value !!}</textarea> <input type=\"hidden\" name=\"{{$name}}\" value=\"{{ old($column, $value) }}\" /> @include('admin::form.help-block') </div> </div> <script require=\"@phpeditor\" init=\"{!! $selector !!}\"> var Editor = CodeMirror.fromTextArea(document.getElementById(id), { lineNumbers: true, mode: \"text/x-php\", extraKeys: { \"Tab\": function(cm){ cm.replaceSelection(\" \" , \"end\"); } } }); Editor.on(\"change\", function (Editor, changes) { let val = Editor.getValue(); //console.log(val); $this.parents('.form-field').find('input[type=\"hidden\"]').val(val); }); </script> \u6700\u540e\u627e\u5230\u6587\u4ef6 app/Admin/bootstrap.php ,\u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u8bf7\u66f4\u65b0 dcat-admin \uff0c\u7136\u540e\u65b0\u5efa\u8be5\u6587\u4ef6,\u6dfb\u52a0\u4e0b\u9762\u4ee3\u7801\uff1a <?php use App\\Admin\\Extensions\\Form\\PHPEditor; use Dcat\\Admin\\Form; Admin::asset()->alias('@phpeditor', [ 'js' => [ '/packages/codemirror-5.20.2/lib/codemirror.js', '/packages/codemirror-5.20.2/addon/edit/matchbrackets.js', '/packages/codemirror-5.20.2/mode/htmlmixed/htmlmixed.js', '/packages/codemirror-5.20.2/mode/xml/xml.js', '/packages/codemirror-5.20.2/mode/javascript/javascript.js', '/packages/codemirror-5.20.2/mode/css/css.js', '/packages/codemirror-5.20.2/mode/clike/clike.js', '/packages/codemirror-5.20.2/mode/php/php.js', ], 'css' => '/packages/codemirror-5.20.2/lib/codemirror.css', ]); Form::extend('php', PHPEditor::class); \u8fd9\u6837\u5c31\u80fd\u5728 model-form \u4e2d\u4f7f\u7528PHP\u7f16\u8f91\u5668\u4e86\uff1a $form->php('code'); \u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u53ef\u4ee5\u6dfb\u52a0\u4efb\u610f\u4f60\u60f3\u8981\u6dfb\u52a0\u7684 form \u7ec4\u4ef6\u3002 \u5e38\u7528\u65b9\u6cd5 \u8868\u5355\u7ec4\u4ef6\u662f Dcat Admin \u4e2d\u6700\u4e3a\u590d\u6742\u7684\u7ec4\u4ef6\uff0c\u4e0b\u9762\u5217\u4e00\u4e9b\u5728\u6269\u5c55\u8868\u5355\u7ec4\u4ef6\u4e2d\u53ef\u80fd\u9700\u8981\u7528\u5230\u7684\u65b9\u6cd5 \u5904\u7406\u7528\u6237\u8f93\u5165\u7684\u8868\u5355\u503c (prepareInputValue) \u901a\u8fc7 prepareInputValue \u65b9\u6cd5\u53ef\u4ee5\u5904\u7406\u7528\u6237\u8f93\u5165\u7684\u8868\u5355\u503c\uff0c\u9ed8\u8ba4\u4e0d\u505a\u4efb\u4f55\u5904\u7406\u3002\u6b64\u65b9\u6cd5\u5728 Form \u8868\u5355\u7684 saving \u4e8b\u4ef6\u89e6\u53d1\u4e4b\u540e\uff0c\u8868\u5355\u5b57\u6bb5\u7684 saving \u65b9\u6cd5\u4e4b\u524d\u6267\u884c {tip} \u8fd9\u4e2a\u529f\u80fd\u7c7b\u4f3c Laravel model \u4e2d\u7684 \u4fee\u6539\u5668 \u3002 class PHPEditor extends Field { ... // \u628a\u7528\u6237\u8f93\u5165\u7684\u8868\u5355\u503c\u8f6c\u5316\u4e3a string \u683c\u5f0f\u4fdd\u5b58\u5230\u6570\u636e\u5e93 protected function prepareInputValue($value) { return (string) $value; } } \u5904\u7406\u5f85\u663e\u793a\u7684\u5b57\u6bb5\u503c (formatFieldData) \u901a\u8fc7 formatFieldData \u65b9\u6cd5\u53ef\u4ee5\u5904\u7406\u5904\u7406\u5f85\u663e\u793a\u7684\u5b57\u6bb5\u503c\u3002\u6b64\u65b9\u6cd5\u5728\u8868\u5355\u5b57\u6bb5\u7684 customFormat \u65b9\u6cd5\u4e4b\u524d\u6267\u884c {tip} \u8fd9\u4e2a\u529f\u80fd\u7c7b\u4f3c Laravel model \u4e2d\u7684 \u8bbf\u95ee\u5668 \u3002 class PHPEditor extends Field { ... // \u628a\u5b57\u6bb5\u503c\u8f6c\u5316\u4e3a\u6570\u7ec4\u683c\u5f0f // $data\u662f\u5f53\u524d\u8868\u5355\u7684\u7f16\u8f91\u6570\u636e\uff0c\u6570\u636e\u683c\u5f0f\u662f array protected function formatFieldData($data) { // \u83b7\u53d6\u5230\u5f53\u524d\u5b57\u6bb5\u503c $value = parent::formatFieldData($data); // \u5904\u7406\u5b57\u6bb5\u503c ... return $value; } } \u83b7\u53d6\u5143\u7d20CSS\u9009\u62e9\u5668 (getElementClassSelector) \u8868\u5355\u7ec4\u4ef6\u7c7b\u5b9e\u4f8b\u5316\u540e\u4f1a\u6839\u636e\u5b57\u6bb5\u540d\u79f0\u751f\u6210\u4e00\u4e2a css class \uff0c\u7136\u540e\u4f20\u9012\u5230\u6a21\u677f\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a class \u83b7\u53d6\u5230\u5f53\u524d\u8868\u5355\u7684\u5143\u7d20\u5bf9\u8c61 \u6a21\u677f <div class=\"{{$viewClass['form-group']}}\"> <div class=\"{{ $viewClass['label'] }} control-label\"> <span>{!! $label !!}</span> </div> <div class=\"{{$viewClass['field']}}\"> @include('admin::form.error') <input type=\"hidden\" name=\"{{$name}}\"/> <select style=\"width: 100%;\" name=\"{{$name}}\" {!! $attributes !!} > <option value=\"\"></option> @foreach($options as $select => $option) <option value=\"{{$select}}\" {{ Dcat\\Admin\\Support\\Helper::equal($select, $value) ?'selected':'' }}>{{$option}}</option> @endforeach </select> @include('admin::form.help-block') </div> </div> <script require=\"...\" init=\"{!! $selector !!}\"> // \u8fd9\u91cc\u7684 $selector \u5373\u662f\u5f53\u524d\u5b57\u6bb5\u7684 css\u9009\u62e9\u5668 $this.select2($configs); </script> JS\u4ee3\u7801 \u4e3a\u4e86\u8ba9\u6269\u5c55\u7684\u8868\u5355\u7ec4\u4ef6\u80fd\u591f\u517c\u5bb9 HasMany \u3001 array \u4ee5\u53ca Table \u8868\u5355\uff0c\u6211\u4eec\u5fc5\u987b\u4f7f\u7528 \u52a8\u6001\u76d1\u542c\u5143\u7d20\u751f\u6210 (init) \u529f\u80fd <div class=\"{{$viewClass['form-group']}}\"> ... </div> <script require=\"...\" init=\"{!! $selector !!}\"> $this.select2($configs); </script>","title":"\u8868\u5355\u5b57\u6bb5\u7684\u7ba1\u7406"},{"location":"2.x/model-form-field-management/#_1","text":"","title":"\u8868\u5355\u5b57\u6bb5\u7684\u7ba1\u7406"},{"location":"2.x/model-form-field-management/#_2","text":"\u5728\u5f00\u59cb\u6269\u5c55\u8868\u5355\u7ec4\u4ef6\u4e4b\u524d\u9700\u8981\u5148\u4e86\u89e3 \u52a8\u6001\u76d1\u542c\u5143\u7d20\u751f\u6210 (init) \u529f\u80fd\uff0c\u8868\u5355\u7ec4\u4ef6\u7684 JS \u4ee3\u7801\u5efa\u8bae\u90fd\u4f7f\u7528 Dcat.init \u65b9\u6cd5\u76d1\u542c\u5e76\u521d\u59cb\u5316\uff0c\u5426\u5219\u53ef\u80fd\u65e0\u6cd5\u517c\u5bb9 Form::hasMany \u4ee5\u53ca Form::array \u7b49\u52a8\u6001\u751f\u6210\u5b57\u6bb5\u7684\u8868\u5355\u7c7b\u578b\u3002","title":"\u6269\u5c55\u81ea\u5b9a\u4e49\u7ec4\u4ef6"},{"location":"2.x/model-form-field-management/#wangeditor","text":"wangEditor \u662f\u4e00\u4e2a\u4f18\u79c0\u7684\u56fd\u4ea7\u7684\u8f7b\u91cf\u7ea7\u5bcc\u6587\u672c\u7f16\u8f91\u5668\uff0c\u5982\u679c dcat-admin \u81ea\u5e26\u7684\u57fa\u4e8e ckeditor \u7684\u7f16\u8f91\u5668\u7ec4\u4ef6\u4f7f\u7528\u4e0a\u6709\u95ee\u9898\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u6b65\u9aa4\u53ef\u4ee5\u96c6\u6210\u5b83\uff0c\u5e76\u8986\u76d6\u6389\u9ed8\u8ba4\u7684 editor \uff1a \u4e3a\u4e86\u65b9\u4fbf\u6f14\u793a\uff0c\u793a\u4f8b\u4e2d\u76f4\u63a5\u4f7f\u7528CDN\u94fe\u63a5\u3002\u5b9e\u9645\u5f00\u53d1\u4e2d\u9700\u8981\u5148\u4e0b\u8f7d\u524d\u7aef\u5e93\u6587\u4ef6 wangEditor \u5230\u670d\u52a1\u5668\uff0c\u89e3\u538b\u5230\u76ee\u5f55 public/vendor/wangEditor-4.7.1 \u3002 \u65b0\u5efa\u7ec4\u4ef6\u7c7b app/Admin/Extensions/Form/WangEditor.php \u3002 <?php namespace App\\Admin\\Extensions\\Form; use Dcat\\Admin\\Form\\Field; class WangEditor extends Field { protected $view = 'admin.wang-editor'; } \u65b0\u5efa\u89c6\u56fe\u6587\u4ef6 resources/views/admin/wang-editor.blade.php \uff1a <div class=\"{{$viewClass['form-group']}}\"> <label class=\"{{$viewClass['label']}} control-label\">{{$label}}</label> <div class=\"{{$viewClass['field']}}\"> @include('admin::form.error') <div {!! $attributes !!} style=\"width: 100%; height: 100%;\"> <p>{!! $value !!}</p> </div> <input type=\"hidden\" name=\"{{$name}}\" value=\"{{ old($column, $value) }}\" /> @include('admin::form.help-block') </div> </div> <!-- script\u6807\u7b7e\u52a0\u4e0a \"init\" \u5c5e\u6027\u540e\u4f1a\u81ea\u52a8\u4f7f\u7528 Dcat.init() \u65b9\u6cd5\u52a8\u6001\u76d1\u542c\u5143\u7d20\u751f\u6210 --> <script require=\"@wang-editor\" init=\"{!! $selector !!}\"> var E = window.wangEditor // id \u53d8\u91cf\u662f Dcat.init() \u81ea\u52a8\u751f\u6210\u7684\uff0c\u662f\u4e00\u4e2a\u552f\u4e00\u7684\u968f\u673a\u5b57\u7b26\u4e32 var editor = new E('#' + id); editor.config.zIndex = 0 editor.config.uploadImgShowBase64 = true editor.config.onchange = function (html) { $this.parents('.form-field').find('input[type=\"hidden\"]').val(html); } editor.create() </script> \u7136\u540e\u6ce8\u518c\u8fdb dcat-admin \uff0c\u5728 app/Admin/bootstrap.php \u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u4ee3\u7801\uff1a <?php use App\\Admin\\Extensions\\Form\\WangEditor; use Dcat\\Admin\\Form; // \u6ce8\u518c\u524d\u7aef\u7ec4\u4ef6\u522b\u540d Admin::asset()->alias('@wang-editor', [ // \u4e3a\u4e86\u65b9\u4fbf\u6f14\u793a\u6548\u679c\uff0c\u8fd9\u91cc\u76f4\u63a5\u52a0\u8f7dCDN\u94fe\u63a5\uff0c\u5b9e\u9645\u5f00\u53d1\u4e2d\u53ef\u4ee5\u4e0b\u8f7d\u5230\u670d\u52a1\u5668\u52a0\u8f7d 'js' => ['https://cdn.jsdelivr.net/npm/wangeditor@4.7.1/dist/wangEditor.min.js'], ]); Form::extend('editor', WangEditor::class); \u8c03\u7528: $form->editor('body');","title":"\u96c6\u6210\u5bcc\u6587\u672c\u7f16\u8f91\u5668wangEditor"},{"location":"2.x/model-form-field-management/#ckeditor","text":"\u5148\u4e0b\u8f7d ckeditor \u5e76\u89e3\u538b\u5230/public\u76ee\u5f55\uff0c\u6bd4\u5982\u653e\u5728 /public/packages/ \u76ee\u5f55\u4e0b\u3002 \u7136\u540e\u65b0\u5efa\u6269\u5c55\u6587\u4ef6 app/Admin/Extensions/Form/CKEditor.php : <?php namespace App\\Admin\\Extensions\\Form; use Dcat\\Admin\\Form\\Field; class CKEditor extends Field { protected $view = 'admin.ckeditor'; } \u65b0\u5efaview resources/views/admin/ckeditor.blade.php : <div class=\"{{$viewClass['form-group']}}\"> <label class=\"{{$viewClass['label']}} control-label\">{{$label}}</label> <div class=\"{{$viewClass['field']}}\"> @include('admin::form.error') <textarea name=\"{{ $name}}\" placeholder=\"{{ $placeholder }}\" {!! $attributes !!} >{!! $value !!}</textarea> @include('admin::form.help-block') </div> </div> <script require=\"@ckeditor\" init=\"{!! $selector !!}\"> $this.ckeditor(); </script> \u7136\u540e\u5728 app/Admin/bootstrap.php \u4e2d\u5f15\u5165\u6269\u5c55\uff1a use App\\Admin\\Extensions\\Form\\CKEditor; use Dcat\\Admin\\Form; // \u6ce8\u518c\u524d\u7aef\u7ec4\u4ef6\u522b\u540d Admin::asset()->alias('@ckeditor', [ 'js' => [ '/packages/ckeditor/ckeditor.js', '/packages/ckeditor/adapters/jquery.js', ], ]); Form::extend('ckeditor', CKEditor::class); \u7136\u540e\u5c31\u80fd\u5728form\u4e2d\u4f7f\u7528\u4e86: $form->ckeditor('content');","title":"\u96c6\u6210\u5bcc\u6587\u672c\u7f16\u8f91\u5668ckeditor"},{"location":"2.x/model-form-field-management/#php-editor","text":"\u901a\u8fc7\u4e0b\u9762\u7684\u6b65\u9aa4\u6765\u6269\u5c55\u4e00\u4e2a\u57fa\u4e8e codemirror \u7684PHP\u4ee3\u7801\u7f16\u8f91\u5668\uff0c\u6548\u679c\u53c2\u8003 PHP mode \u3002 \u5148\u5c06 codemirror \u5e93\u4e0b\u8f7d\u5e76\u89e3\u538b\u5230\u524d\u7aef\u8d44\u6e90\u76ee\u5f55\u4e0b\uff0c\u6bd4\u5982\u653e\u5728 public/packages/codemirror-5.20.2 \u76ee\u5f55\u4e0b\u3002 \u65b0\u5efa\u7ec4\u4ef6\u7c7b app/Admin/Extensions/Form/PHPEditor.php : <?php namespace App\\Admin\\Extensions\\Form; use Dcat\\Admin\\Form\\Field; class PHPEditor extends Field { protected $view = 'admin.php-editor'; } {tip} \u7c7b\u4e2d\u7684\u9759\u6001\u8d44\u6e90\u4e5f\u540c\u6837\u53ef\u4ee5\u4ece\u5916\u90e8\u5f15\u5165\uff0c\u53c2\u8003 Editor.php \u521b\u5efa\u89c6\u56fe resources/views/admin/php-editor.blade.php : <div class=\"{{$viewClass['form-group']}}\"> <label class=\"{{$viewClass['label']}} control-label\">{{$label}}</label> <div class=\"{{$viewClass['field']}}\"> @include('admin::form.error') <textarea class=\"{{ $class }}\" {!! $attributes !!} >{!! $value !!}</textarea> <input type=\"hidden\" name=\"{{$name}}\" value=\"{{ old($column, $value) }}\" /> @include('admin::form.help-block') </div> </div> <script require=\"@phpeditor\" init=\"{!! $selector !!}\"> var Editor = CodeMirror.fromTextArea(document.getElementById(id), { lineNumbers: true, mode: \"text/x-php\", extraKeys: { \"Tab\": function(cm){ cm.replaceSelection(\" \" , \"end\"); } } }); Editor.on(\"change\", function (Editor, changes) { let val = Editor.getValue(); //console.log(val); $this.parents('.form-field').find('input[type=\"hidden\"]').val(val); }); </script> \u6700\u540e\u627e\u5230\u6587\u4ef6 app/Admin/bootstrap.php ,\u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u8bf7\u66f4\u65b0 dcat-admin \uff0c\u7136\u540e\u65b0\u5efa\u8be5\u6587\u4ef6,\u6dfb\u52a0\u4e0b\u9762\u4ee3\u7801\uff1a <?php use App\\Admin\\Extensions\\Form\\PHPEditor; use Dcat\\Admin\\Form; Admin::asset()->alias('@phpeditor', [ 'js' => [ '/packages/codemirror-5.20.2/lib/codemirror.js', '/packages/codemirror-5.20.2/addon/edit/matchbrackets.js', '/packages/codemirror-5.20.2/mode/htmlmixed/htmlmixed.js', '/packages/codemirror-5.20.2/mode/xml/xml.js', '/packages/codemirror-5.20.2/mode/javascript/javascript.js', '/packages/codemirror-5.20.2/mode/css/css.js', '/packages/codemirror-5.20.2/mode/clike/clike.js', '/packages/codemirror-5.20.2/mode/php/php.js', ], 'css' => '/packages/codemirror-5.20.2/lib/codemirror.css', ]); Form::extend('php', PHPEditor::class); \u8fd9\u6837\u5c31\u80fd\u5728 model-form \u4e2d\u4f7f\u7528PHP\u7f16\u8f91\u5668\u4e86\uff1a $form->php('code'); \u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u53ef\u4ee5\u6dfb\u52a0\u4efb\u610f\u4f60\u60f3\u8981\u6dfb\u52a0\u7684 form \u7ec4\u4ef6\u3002","title":"\u96c6\u6210PHP editor"},{"location":"2.x/model-form-field-management/#_3","text":"\u8868\u5355\u7ec4\u4ef6\u662f Dcat Admin \u4e2d\u6700\u4e3a\u590d\u6742\u7684\u7ec4\u4ef6\uff0c\u4e0b\u9762\u5217\u4e00\u4e9b\u5728\u6269\u5c55\u8868\u5355\u7ec4\u4ef6\u4e2d\u53ef\u80fd\u9700\u8981\u7528\u5230\u7684\u65b9\u6cd5","title":"\u5e38\u7528\u65b9\u6cd5"},{"location":"2.x/model-form-field-management/#prepareinputvalue","text":"\u901a\u8fc7 prepareInputValue \u65b9\u6cd5\u53ef\u4ee5\u5904\u7406\u7528\u6237\u8f93\u5165\u7684\u8868\u5355\u503c\uff0c\u9ed8\u8ba4\u4e0d\u505a\u4efb\u4f55\u5904\u7406\u3002\u6b64\u65b9\u6cd5\u5728 Form \u8868\u5355\u7684 saving \u4e8b\u4ef6\u89e6\u53d1\u4e4b\u540e\uff0c\u8868\u5355\u5b57\u6bb5\u7684 saving \u65b9\u6cd5\u4e4b\u524d\u6267\u884c {tip} \u8fd9\u4e2a\u529f\u80fd\u7c7b\u4f3c Laravel model \u4e2d\u7684 \u4fee\u6539\u5668 \u3002 class PHPEditor extends Field { ... // \u628a\u7528\u6237\u8f93\u5165\u7684\u8868\u5355\u503c\u8f6c\u5316\u4e3a string \u683c\u5f0f\u4fdd\u5b58\u5230\u6570\u636e\u5e93 protected function prepareInputValue($value) { return (string) $value; } }","title":"\u5904\u7406\u7528\u6237\u8f93\u5165\u7684\u8868\u5355\u503c (prepareInputValue)"},{"location":"2.x/model-form-field-management/#formatfielddata","text":"\u901a\u8fc7 formatFieldData \u65b9\u6cd5\u53ef\u4ee5\u5904\u7406\u5904\u7406\u5f85\u663e\u793a\u7684\u5b57\u6bb5\u503c\u3002\u6b64\u65b9\u6cd5\u5728\u8868\u5355\u5b57\u6bb5\u7684 customFormat \u65b9\u6cd5\u4e4b\u524d\u6267\u884c {tip} \u8fd9\u4e2a\u529f\u80fd\u7c7b\u4f3c Laravel model \u4e2d\u7684 \u8bbf\u95ee\u5668 \u3002 class PHPEditor extends Field { ... // \u628a\u5b57\u6bb5\u503c\u8f6c\u5316\u4e3a\u6570\u7ec4\u683c\u5f0f // $data\u662f\u5f53\u524d\u8868\u5355\u7684\u7f16\u8f91\u6570\u636e\uff0c\u6570\u636e\u683c\u5f0f\u662f array protected function formatFieldData($data) { // \u83b7\u53d6\u5230\u5f53\u524d\u5b57\u6bb5\u503c $value = parent::formatFieldData($data); // \u5904\u7406\u5b57\u6bb5\u503c ... return $value; } }","title":"\u5904\u7406\u5f85\u663e\u793a\u7684\u5b57\u6bb5\u503c (formatFieldData)"},{"location":"2.x/model-form-field-management/#css-getelementclassselector","text":"\u8868\u5355\u7ec4\u4ef6\u7c7b\u5b9e\u4f8b\u5316\u540e\u4f1a\u6839\u636e\u5b57\u6bb5\u540d\u79f0\u751f\u6210\u4e00\u4e2a css class \uff0c\u7136\u540e\u4f20\u9012\u5230\u6a21\u677f\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a class \u83b7\u53d6\u5230\u5f53\u524d\u8868\u5355\u7684\u5143\u7d20\u5bf9\u8c61 \u6a21\u677f <div class=\"{{$viewClass['form-group']}}\"> <div class=\"{{ $viewClass['label'] }} control-label\"> <span>{!! $label !!}</span> </div> <div class=\"{{$viewClass['field']}}\"> @include('admin::form.error') <input type=\"hidden\" name=\"{{$name}}\"/> <select style=\"width: 100%;\" name=\"{{$name}}\" {!! $attributes !!} > <option value=\"\"></option> @foreach($options as $select => $option) <option value=\"{{$select}}\" {{ Dcat\\Admin\\Support\\Helper::equal($select, $value) ?'selected':'' }}>{{$option}}</option> @endforeach </select> @include('admin::form.help-block') </div> </div> <script require=\"...\" init=\"{!! $selector !!}\"> // \u8fd9\u91cc\u7684 $selector \u5373\u662f\u5f53\u524d\u5b57\u6bb5\u7684 css\u9009\u62e9\u5668 $this.select2($configs); </script>","title":"\u83b7\u53d6\u5143\u7d20CSS\u9009\u62e9\u5668 (getElementClassSelector)"},{"location":"2.x/model-form-field-management/#js","text":"\u4e3a\u4e86\u8ba9\u6269\u5c55\u7684\u8868\u5355\u7ec4\u4ef6\u80fd\u591f\u517c\u5bb9 HasMany \u3001 array \u4ee5\u53ca Table \u8868\u5355\uff0c\u6211\u4eec\u5fc5\u987b\u4f7f\u7528 \u52a8\u6001\u76d1\u542c\u5143\u7d20\u751f\u6210 (init) \u529f\u80fd <div class=\"{{$viewClass['form-group']}}\"> ... </div> <script require=\"...\" init=\"{!! $selector !!}\"> $this.select2($configs); </script>","title":"JS\u4ee3\u7801"},{"location":"2.x/model-form-fields/","text":"\u8868\u5355\u5b57\u6bb5\u7684\u4f7f\u7528 \u5728 model-form \u4e2d\u5185\u7f6e\u4e86\u5927\u91cf\u7684form\u7ec4\u4ef6\u6765\u5e2e\u52a9\u4f60\u5feb\u901f\u7684\u6784\u5efaform\u8868\u5355 \u516c\u5171\u65b9\u6cd5 \u8bbe\u7f6e\u8868\u5355\u503c (value) $form->text('title')->value('text...'); \u8bbe\u7f6e\u9ed8\u8ba4\u503c (default) $form->text('title')->default('text...'); \u6b64\u65b9\u6cd5\u4ec5\u5728 \u65b0\u589e\u9875\u9762 \u6709\u6548\uff0c\u5982\u679c \u7f16\u8f91\u9875\u9762 \u4e5f\u9700\u8981\u8bbe\u7f6e\u9ed8\u8ba4\u503c\uff0c\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u65b9\u6cd5 $form->text('xxx')->default('\u9ed8\u8ba4\u503c', true); \u8bbe\u7f6e\u63d0\u793a\u4fe1\u606f (help) $form->text('title')->help('help...'); \u8bbe\u7f6e\u5c5e\u6027 (attribute) $form->text('title')->attribute(['data-title' => 'title...']); $form->text('title')->attribute('data-title', 'title...'); \u8bbe\u7f6e\u4e3a\u5fc5\u586b (required) $form->text('title')->required(); // \u4e0d\u663e\u793a\"*\"\u53f7 $form->text('title')->required(false); \u8bbe\u7f6e\u4e3a\u4e0d\u53ef\u7f16\u8f91 (disable) $form->text('title')->disable(); \u8bbe\u7f6e\u5360\u4f4d\u7b26 (placeholder) $form->text('title')->placeholder('\u8bf7\u8f93\u5165\u3002\u3002\u3002'); \u8bbe\u7f6e\u5bbd\u5ea6 (width) $form->text('title')->width(8, 2); \u8bbe\u7f6e\u9a8c\u8bc1\u89c4\u5219 (rules) \u5177\u4f53\u4f7f\u7528\u53ef\u53c2\u8003 \u8868\u5355\u9a8c\u8bc1 \u3002 \u4fee\u6539\u5f85\u4fdd\u5b58\u7684\u8868\u5355\u8f93\u5165\u503c (saving) \u901a\u8fc7 saving \u65b9\u6cd5\u53ef\u4ee5\u66f4\u6539\u5f85\u4fdd\u5b58\u6570\u636e\u7684\u683c\u5f0f\u3002 use Dcat\\Admin\\Support\\Helper; $form->multipleFile('files')->saving(function ($paths) { $paths = Helper::array($paths); // \u83b7\u53d6\u6570\u636e\u5e93\u5f53\u524d\u884c\u7684\u5176\u4ed6\u5b57\u6bb5 $username = $this->username; // \u6700\u7ec8\u8f6c\u5316\u4e3ajson\u4fdd\u5b58\u5230\u6570\u636e\u5e93 return json_encode($paths); }); \u4fee\u6539\u8868\u5355\u6570\u636e\u663e\u793a (customFormat) \u901a\u8fc7 customFormat \u65b9\u6cd5\u53ef\u4ee5\u6539\u53d8\u4ece\u5916\u90e8\u6ce8\u5165\u5230\u8868\u5355\u7684\u5b57\u6bb5\u503c\u3002 \u5982\u4e0b\u4f8b\u5b50\u4e2d\uff0c multipleFile \u5b57\u6bb5\u8981\u6c42\u5f85\u6e32\u67d3\u7684\u5b57\u6bb5\u503c\u4e3a\u6570\u7ec4\u683c\u5f0f\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 customFormat \u65b9\u6cd5\u628a\u4ece\u6570\u636e\u5e93\u67e5\u51fa\u7684\u5b57\u6bb5\u503c\u8f6c\u5316\u4e3a array \u683c\u5f0f use Dcat\\Admin\\Support\\Helper; $form->multipleFile('files')->saving(function ($paths) { $paths = Helper::array($paths); return json_encode($paths); })->customFormat(function ($paths) { // \u83b7\u53d6\u6570\u636e\u5e93\u5f53\u524d\u884c\u7684\u5176\u4ed6\u5b57\u6bb5 $username = $this->username; // \u8f6c\u4e3a\u6570\u7ec4 return Helper::array($paths); }); \u5728\u5f39\u7a97\u4e2d\u9690\u85cf \u5982\u679c\u4e0d\u60f3\u5728\u5f39\u7a97\u4e2d\u663e\u793a\u67d0\u4e2a\u5b57\u6bb5\uff0c\u53ef\u4ee5\u4f7f\u7528 Form\\Field::hideInDialog \u65b9\u6cd5 $form->display('id'); $form->text('title'); $form->textarea('contents')->hideInDialog(); \u4fdd\u5b58\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b saveAsString saveAsString \u65b9\u6cd5\u53ef\u4ee5\u628a\u8868\u5355\u503c\u8f6c\u5316\u4e3a string \u7c7b\u578b\u4fdd\u5b58\uff0c\u5f53\u4fdd\u5b58\u7684\u6570\u636e\u5e93\u5b57\u6bb5\u503c\u4e0d\u5141\u8bb8\u4e3a null \u65f6\u975e\u5e38\u6709\u7528\uff1b $form->text('nickname')->saveAsString(); \u4fdd\u5b58\u4e3ajson\u7c7b\u578b saveAsJson saveAsJson \u53ef\u4ee5\u628a\u8868\u5355\u503c\u4fdd\u5b58\u4e3a json \u683c\u5f0f $form->text('nickname')->saveAsJson(); \u6587\u672c (text) $form->text($column, [$label]); // \u6dfb\u52a0\u63d0\u4ea4\u9a8c\u8bc1\u89c4\u5219 $form->text($column, [$label])->rules('required|min:10'); \u9690\u85cf\u5b57\u6bb5 (hidden) \u901a\u8fc7 hidden \u65b9\u6cd5\u53ef\u4ee5\u7ed9\u4f60\u7684\u8868\u5355\u8bbe\u7f6e\u4e00\u4e2a\u9690\u85cf\u5b57\u6bb5\u3002 $form->hidden('author_id')->value(Admin::user()->getKey()); \u901a\u5e38\u53ef\u4ee5\u7ed3\u5408 saving \u4e8b\u4ef6\u4f7f\u7528 $form->hidden('author_id'); $form->saving(function (Form $form) { $form->author_id = Admin::user()->getKey(); }); \u4e0b\u62c9\u9009\u6846\u5355\u9009 (select) $form->select($column[, $label])->options([1 => 'foo', 2 => 'bar', 'val' => 'Option name']); \u6216\u8005\u4eceapi\u4e2d\u83b7\u53d6\u9009\u9879\u5217\u8868\uff1a $form->select($column[, $label])->options('/api/users'); // \u4f7f\u7528ajax\u5e76\u663e\u793a\u6240\u9009\u9879\u76ee $form->select($column[, $label])->options(Model::class)->ajax('/api/users'); // \u6216\u6307\u5b9a\u540d\u79f0\u548cID $form->select($column[, $label])->options(Model::class, 'name', 'id')->ajax('/api/users'); \u5176\u4e2dapi\u63a5\u53e3\u7684\u683c\u5f0f\u5fc5\u987b\u4e3a\u4e0b\u9762\u683c\u5f0f\uff1a [ { \"id\": 9, \"text\": \"xxx\" }, { \"id\": 21, \"text\": \"xxx\" }, ... ] \u5982\u679c\u9009\u9879\u8fc7\u591a\uff0c\u53ef\u901a\u8fc7ajax\u65b9\u5f0f\u52a8\u6001\u5206\u9875\u8f7d\u5165\u9009\u9879\uff1a $form->select('user_id')->options(function ($id) { $user = User::find($id); if ($user) { return [$user->id => $user->name]; } })->ajax('api/users'); \u4f7f\u7528model\u65b9\u6cd5\u5728\u7de8\u8f2f\u6642\u8f09\u5165\u8cc7\u6599\uff1a $form->select('user_id')->model(User::class, 'id', 'name'); \u4e0a\u9762\u7684\u4ee3\u78bc\u8ddf\u4e0b\u9762\u9019\u500b\u662f\u4e00\u6a23\u7684 $form->select('user_id')->options(function ($id) { $user = User::find($id); if ($user) { return [$user->id => $user->name]; } }); API /admin/api/users \u63a5\u53e3\u7684\u4ee3\u7801\uff1a public function users(Request $request) { $q = $request->get('q'); return User::where('name', 'like', \"%$q%\")->paginate(null, ['id', 'name as text']); } \u63a5\u53e3\u8fd4\u56de\u7684\u6570\u636e\u7ed3\u6784\u4e3a { \"total\": 4, \"per_page\": 15, \"current_page\": 1, \"last_page\": 1, \"next_page_url\": null, \"prev_page_url\": null, \"from\": 1, \"to\": 3, \"data\": [ { \"id\": 9, \"text\": \"xxx\" }, { \"id\": 21, \"text\": \"xxx\" }, { \"id\": 42, \"text\": \"xxx\" }, { \"id\": 48, \"text\": \"xxx\" } ] } \u4e0b\u62c9\u9009\u6846\u8054\u52a8 (load) select \u7ec4\u4ef6\u652f\u6301\u7236\u5b50\u5173\u7cfb\u7684\u5355\u5411\u8054\u52a8\uff1a $form->select('province')->options(...)->load('city', '/api/city'); $form->select('city'); \u5176\u4e2d load('city', '/api/city'); \u7684\u610f\u601d\u662f\uff0c\u5728\u5f53\u524dselect\u7684\u9009\u9879\u5207\u6362\u4e4b\u540e\uff0c\u4f1a\u628a\u5f53\u524d\u9009\u9879\u7684\u503c\u901a\u8fc7\u53c2\u6570 q , \u8c03\u7528\u63a5\u53e3 /api/city \uff0c\u5e76\u628aapi\u8fd4\u56de\u7684\u6570\u636e\u586b\u5145\u4e3acity\u9009\u62e9\u6846\u7684\u9009\u9879\uff0c\u5176\u4e2dapi /api/city \u8fd4\u56de\u7684\u6570\u636e\u683c\u5f0f\u5fc5\u987b\u7b26\u5408: [ { \"id\": 9, \"text\": \"xxx\" }, { \"id\": 21, \"text\": \"xxx\" }, ... ] \u63a7\u5236\u5668action\u7684\u4ee3\u7801\u793a\u4f8b\u5982\u4e0b\uff1a public function city(Request $request) { $provinceId = $request->get('q'); return ChinaArea::city()->where('parent_id', $provinceId)->get(['id', DB::raw('name as text')]); } selectTable \u3001 multipleSelectTable \u3001 radio \u3001 checkbox \u4e5f\u53ef\u4ee5\u4f7f\u7528 load \u65b9\u6cd5\u8054\u52a8 select \u548c multipleSelect \u8868\u5355\uff0c\u7528\u6cd5\u548c\u4e0a\u9762\u7684\u793a\u4f8b\u4e00\u81f4\u3002 \u8054\u52a8\u591a\u4e2a\u5b57\u6bb5 (loads) \u4f7f\u7528 loads \u65b9\u6cd5\u53ef\u4ee5\u8054\u52a8\u591a\u4e2a\u5b57\u6bb5\uff0c\u7528\u6cd5\u5982\u4e0b $form->select('status') ->options(...) ->loads(['field1', 'field2'], ['/api/field1', '/api/field2']); $form->select('field1'); $form->select('field2'); api \u8fd4\u56de\u7684\u6570\u636e\u683c\u5f0f\u4e0e load \u65b9\u6cd5\u4e00\u81f4\uff0c selectTable \u3001 multipleSelectTable \u3001 radio \u3001 checkbox \u4e5f\u53ef\u4ee5\u4f7f\u7528 loads \u65b9\u6cd5\u8054\u52a8\u3002 \u4e0b\u62c9\u9009\u6846\u591a\u9009 (multipleSelect) {tip} \u6ce8\u5165\u8fd9\u4e2a\u5b57\u6bb5\u7684\u6570\u636e\uff08\u4ece\u6570\u636e\u5e93\u67e5\u51fa\u6765\u7684\uff09\u53ef\u4ee5\u662f\u4e00\u4e2a\u4ee5 , \u9694\u5f00\u7684\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u662f json \u5b57\u7b26\u4e32\u6216 array \u6570\u7ec4\u3002 $form->multipleSelect($column[, $label]) ->options([1 => 'foo', 2 => 'bar', 'val' => 'Option name']) ->saving(function ($value) { // \u8f6c\u5316\u6210json\u5b57\u7b26\u4e32\u4fdd\u5b58\u5230\u6570\u636e\u5e93 return json_encode($value); }); // \u4f7f\u7528ajax\u5e76\u663e\u793a\u6240\u9009\u9879\u76ee\uff1a $form->multipleSelect($column[, $label])->options(Model::class)->ajax('ajax_url'); // \u6216\u6307\u5b9a\u540d\u79f0\u548cID $form->multipleSelect($column[, $label])->options(Model::class, 'name', 'id')->ajax('ajax_url'); \u591a\u9009\u6846\u53ef\u4ee5\u5904\u7406\u4e24\u79cd\u60c5\u51b5\uff0c\u7b2c\u4e00\u79cd\u662f ManyToMany \u7684\u5173\u7cfb\u3002 class Post extends Models { public function tags() { return $this->belongsToMany(Tag::class); } } return Form::make(Post::with('tags'), function (Form $form) { ... $form->multipleSelect('tags') ->options(Tag::all()->pluck('name', 'id')) ->customFormat(function ($v) { if (! $v) { return []; } // \u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u51fa\u7684\u4e8c\u7ef4\u6570\u7ec4\u4e2d\u8f6c\u5316\u6210ID return array_column($v, 'id'); }); }); \u7b2c\u4e8c\u79cd\u662f\u5c06\u9009\u9879\u6570\u7ec4\u5b58\u50a8\u5230\u5355\u5b57\u6bb5\u4e2d\uff0c\u5982\u679c\u5b57\u6bb5\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u90a3\u5c31\u9700\u8981\u5728\u6a21\u578b\u91cc\u9762\u4e3a\u8be5\u5b57\u6bb5\u5b9a\u4e49 \u8bbf\u95ee\u5668\u548c\u4fee\u6539\u5668 \u6765\u5b58\u50a8\u548c\u8bfb\u53d6\u4e86\u3002 \u5982\u679c\u9009\u9879\u8fc7\u591a\uff0c\u53ef\u901a\u8fc7ajax\u65b9\u5f0f\u52a8\u6001\u5206\u9875\u8f7d\u5165\u9009\u9879\uff1a $form->select('friends')->options(function ($ids) { return User::find($ids)->pluck('name', 'id'); })->ajax('api/users'); API /admin/api/users \u63a5\u53e3\u7684\u4ee3\u7801\uff1a public function users(Request $request) { $q = $request->get('q'); return User::where('name', 'like', \"%$q%\")->paginate(null, ['id', 'name as text']); } \u63a5\u53e3\u8fd4\u56de\u7684\u6570\u636e\u7ed3\u6784\u4e3a { \"total\": 4, \"per_page\": 15, \"current_page\": 1, \"last_page\": 1, \"next_page_url\": null, \"prev_page_url\": null, \"from\": 1, \"to\": 3, \"data\": [ { \"id\": 9, \"text\": \"xxx\" }, { \"id\": 21, \"text\": \"xxx\" }, { \"id\": 42, \"text\": \"xxx\" }, { \"id\": 48, \"text\": \"xxx\" } ] } \u8868\u683c\u9009\u62e9\u5668 (selectTable) use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Models\\Administrator; $form->selectTable($field) ->title('\u5f39\u7a97\u6807\u9898') ->dialogWidth('50%') // \u5f39\u7a97\u5bbd\u5ea6\uff0c\u9ed8\u8ba4 800px ->from(UserTable::make(['id' => $form->getKey()])) // \u8bbe\u7f6e\u6e32\u67d3\u7c7b\u5b9e\u4f8b\uff0c\u5e76\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 ->model(Administrator::class, 'id', 'name'); // \u8bbe\u7f6e\u7f16\u8f91\u6570\u636e\u663e\u793a // \u4e0a\u9762\u7684\u4ee3\u7801\u7b49\u540c\u4e8e $form->selectTable($field) ->from(UserTable::make(['id' => $form->getKey()])) // \u8bbe\u7f6e\u6e32\u67d3\u7c7b\u5b9e\u4f8b\uff0c\u5e76\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 ->options(function ($v) { // \u8bbe\u7f6e\u7f16\u8f91\u6570\u636e\u663e\u793a if (! $v) { return []; } return Administrator::find($v)->pluck('name', 'id'); }); \u5b9a\u4e49\u6e32\u67d3\u7c7b\u5982\u4e0b\uff0c\u9700\u8981\u7ee7\u627f Dcat\\Admin\\Grid\\LazyRenderable {tip} \u8fd9\u91cc\u4f7f\u7528\u4e86\u6570\u636e\u8868\u683c\u5f02\u6b65\u52a0\u8f7d\u529f\u80fd\uff0c\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003 \u5f02\u6b65\u52a0\u8f7d <?php namespace App\\Admin\\Renderable; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Grid\\LazyRenderable; use Dcat\\Admin\\Models\\Administrator; class UserTable extends LazyRenderable { public function grid(): Grid { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u7684\u53c2\u6570 $id = $this->id; return Grid::make(Administrator::where('xxx_id', $id), function (Grid $grid) { $grid->column('id'); $grid->column('username'); $grid->column('name'); $grid->column('created_at'); $grid->column('updated_at'); $grid->quickSearch(['id', 'username', 'name']); $grid->paginate(10); $grid->disableActions(); $grid->filter(function (Grid\\Filter $filter) { $filter->like('username')->width(4); $filter->like('name')->width(4); }); }); } } \u6548\u679c \u8bbe\u7f6e\u9009\u4e2d\u540e\u5c06\u4fdd\u5b58\u5230\u8868\u5355\u7684\u5b57\u6bb5\u548c\u663e\u793a\u7684\u5b57\u6bb5 $form->selectTable($field) ->from(UserTable::make(['id' => $form->getKey()])) ->options(function ($v) { // \u8bbe\u7f6e\u7f16\u8f91\u6570\u636e\u663e\u793a if (! $v) { return []; } return Administrator::find($v)->pluck('name', 'id'); }) ->pluck('name', 'id'); // \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u663e\u793a\u7684\u5b57\u6bb5\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u9009\u4e2d\u540e\u5c06\u4fdd\u5b58\u5230\u8868\u5355\u7684\u5b57\u6bb5 // \u4e0a\u9762\u7684\u4ee3\u7801\u4e5f\u53ef\u4ee5\u7b80\u5316\u4e3a $form->selectTable($field) ->from(UserTable::make(['id' => $form->getKey()])) ->model(Administrator::class, 'id', 'name'); // \u8bbe\u7f6e\u7f16\u8f91\u6570\u636e\u663e\u793a \u591a\u9009 (multipleSelectTable) \u591a\u9009\u7684\u7528\u6cd5\u4e0e\u4e0a\u8ff0 selectTable \u65b9\u6cd5\u4e00\u81f4 $form->multipleSelectTable($field) ->max(10) // \u6700\u591a\u9009\u62e9 10 \u4e2a\u9009\u9879\uff0c\u4e0d\u4f20\u5219\u4e0d\u9650\u5236 ->from(UserTable::make(['id' => $form->getKey()])) // \u8bbe\u7f6e\u6e32\u67d3\u7c7b\u5b9e\u4f8b\uff0c\u5e76\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 ->model(Administrator::class, 'id', 'name') // \u8bbe\u7f6e\u7f16\u8f91\u6570\u636e\u663e\u793a ->saving(function ($v) { // $v \u662f\u8868\u5355\u63d0\u4ea4\u7684\u5b57\u6bb5\u503c\uff0c\u9ed8\u8ba4\u662f\u6570\u7ec4\u7c7b\u578b\uff0c\u8fd9\u91cc\u9700\u8981\u624b\u52a8\u8f6c\u6362\u4e00\u4e0b // \u4fdd\u5b58\u4e3a\u4ee5 \",\" \u9694\u5f00\u7684\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u662f\u591a\u5bf9\u591a\u5173\u8054\u5173\u7cfb\uff0c\u5219\u4e0d\u9700\u8981\u8f6c\u6362\u3002 return implode(',', $v); }); \u591a\u9009\u76d2 (listbox) \u4f7f\u7528\u65b9\u6cd5\u548c multipleSelect \u7c7b\u4f3c\u3002 {tip} \u6ce8\u5165\u8fd9\u4e2a\u5b57\u6bb5\u7684\u6570\u636e\uff08\u4ece\u6570\u636e\u5e93\u67e5\u51fa\u6765\u7684\uff09\u53ef\u4ee5\u662f\u4e00\u4e2a\u4ee5 , \u9694\u5f00\u7684\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u662f json \u5b57\u7b26\u4e32\u6216 array \u6570\u7ec4\u3002 $form->listbox($column[, $label])->options([1 => 'foo', 2 => 'bar', 'val' => 'Option name']); \u957f\u6587\u672c (textarea) $form->textarea($column[, $label])->rows(10); \u5355\u9009 (radio) $form->radio($column[, $label])->options(['m' => 'Female', 'f'=> 'Male'])->default('m'); \u591a\u9009 (checkbox) options() \u65b9\u6cd5\u7528\u6765\u8bbe\u7f6e\u9009\u62e9\u9879: $form->checkbox($column[, $label]) ->options([1 => 'foo', 2 => 'bar', 'val' => 'Option name']) ->saving(function ($value) { // \u8f6c\u5316\u6210json\u5b57\u7b26\u4e32\u4fdd\u5b58\u5230\u6570\u636e\u5e93 return json_encode($value); }); \u542f\u7528\u9009\u4e2d\u5168\u90e8\u529f\u80fd $form->checkbox('column')->canCheckAll(); autocomplete \u6b64\u8868\u5355\u53ef\u4ee5\u5728\u586b\u5199\u8868\u5355\u65f6\u8fdb\u884c\u5bf9\u8868\u5355\u503c\u8fdb\u884c\u641c\u7d22\uff0c\u5e76\u628a\u7ed3\u679c\u5c55\u793a\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\uff0c\u7528\u6cd5\u5982\u4e0b $form->autocomplete($column[, $label])->options(['foo', 'bar', ...]); // \u8bbe\u7f6e\u5206\u7ec4\u540d\u79f0 $form->autocomplete($column[, $label])->groups([ [ 'label' => 'group name', 'options' => ['foo', 'bar', ...], ], ]); \u6548\u679c\u5982\u4e0b \u4ece\u8fdc\u7a0bAPI\u83b7\u53d6\u6570\u636e \u4e5f\u53ef\u4ee5\u4ece\u8fdc\u7a0bAPI\u4e2d\u83b7\u53d6\u6570\u636e // ajax \u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a ajax url, \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a valueField\uff08\u53ef\u9009\uff09, \u7b2c\u4e09\u4e2a\u53c2\u6570\u4e3a groupField\uff08\u53ef\u9009\uff09 $form->autocomplete($column[, $label])->ajax('/countries', 'name', 'region'); \u8fdc\u7a0bAPI \u670d\u52a1\u7aef\u7684\u8bf7\u6c42\u53c2\u6570\u4e3aquery\uff0c\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a class CountryController extends AdminController { public function search() { $countries = Country::when(request('query'), function ($query, $value) { $query->where('name', 'like', \"%{$value}%\"); })->get(); return Admin::json($countries->toArray()); } } \u81ea\u5b9a\u4e49 autocomplete \u7684\u8bbe\u7f6e\uff1a \u8be6\u7ec6\u8bbe\u7f6e\u8bf7\u53c2\u8003\uff1a devbridge/jQuery-Autocomplete $js = <<<JS function (suggestion) { alert('You selected: ' + suggestion.value + ', ' + suggestion.data); } JS; $form->autocomplete($column[, $label])->configs([ 'minChars' => 5, 'noCache' => true, 'onSelect' => JavaScript::make($js), ]); configs \u540c\u6837\u4e5f\u652f\u6301\u95ed\u5305\uff1a $form->autocomplete($column[, $label])->configs(function($model, $value){ return [ .... ]; }); \u8868\u5355\u8054\u52a8 autocomplete \u7684\u8054\u52a8\u903b\u8f91\u548cselect\u7684\u521a\u597d\u76f8\u53cd\u3002 depends \u9700\u8981\u5199\u5728\u53d7\u5f71\u54cd\u7684\u5b57\u6bb5\uff0c\u4e0d\u9650\u4e0a\u7ea7\u5b57\u6bb5\u7c7b\u578b\uff0c\u4e0a\u7ea7\u5b57\u6bb5\u7684\u503c\u5c06\u540c\u65f6\u4e0a\u4f20\u5230API\u3002 $form->select('region')->options([ 'asia', 'Africa', 'America', 'Europe', ]); $form->autocomplete('country')->ajax('/countries', 'name', 'region'); // \u5c06\u4f1a\u53d1\u51fa /states?query={query}&region={region}&country={country} \u7684\u8bf7\u6c42 $form->autocomplete('addr')->ajax('/states', 'name')->depends(['region', 'country']); \u90ae\u7bb1 (email) $form->email($column[, $label]); \u5bc6\u7801 (password) $form->password($column[, $label]); \u94fe\u63a5 (url) $form->url($column[, $label]); IP\u5730\u5740 (ip) $form->ip($column[, $label]); \u624b\u673a (mobile) $form->mobile($column[, $label])->options(['mask' => '999 9999 9999']); \u989c\u8272\u9009\u62e9\u5668 (color) $form->color($column[, $label]); \u65f6\u95f4 (time) $form->time($column[, $label]); // \u8bbe\u7f6e\u65f6\u95f4\u683c\u5f0f\uff0c\u66f4\u591a\u683c\u5f0f\u53c2\u8003http://momentjs.com/docs/#/displaying/format/ $form->time($column[, $label])->format('HH:mm:ss'); \u65e5\u671f (date) $form->date($column[, $label]); // \u8bbe\u7f6e\u65e5\u671f\u683c\u5f0f\uff0c\u66f4\u591a\u683c\u5f0f\u53c2\u8003http://momentjs.com/docs/#/displaying/format/ $form->date($column[, $label])->format('YYYY-MM-DD'); \u65f6\u95f4\u65e5\u671f (datetime) $form->datetime($column[, $label]); // \u8bbe\u7f6e\u65e5\u671f\u683c\u5f0f\uff0c\u66f4\u591a\u683c\u5f0f\u53c2\u8003http://momentjs.com/docs/#/displaying/format/ $form->datetime($column[, $label])->format('YYYY-MM-DD HH:mm:ss'); \u65f6\u95f4\u8303\u56f4 (timeRange) $startTime \u3001 $endTime \u4e3a\u5f00\u59cb\u548c\u7ed3\u675f\u65f6\u95f4\u5b57\u6bb5: $form->timeRange($startTime, $endTime, 'Time Range'); \u65e5\u671f\u8303\u56f4 (dateRange) $startDate \u3001 $endDate \u4e3a\u5f00\u59cb\u548c\u7ed3\u675f\u65e5\u671f\u5b57\u6bb5: $form->dateRange($startDate, $endDate, 'Date Range'); \u65f6\u95f4\u65e5\u671f\u8303\u56f4 (datetimeRange) $startDateTime \u3001 $endDateTime \u4e3a\u5f00\u59cb\u548c\u7ed3\u675f\u65f6\u95f4\u65e5\u671f: $form->datetimeRange($startDateTime, $endDateTime, 'DateTime Range'); \u8303\u56f4 (range) $form->range('start_column', 'end_column', '\u8303\u56f4'); \u6587\u4ef6\u4e0a\u4f20 (file) \u4f7f\u7528\u6587\u4ef6\u4e0a\u4f20\u529f\u80fd\u4e4b\u524d\u9700\u8981\u5148\u5b8c\u6210\u4e0a\u4f20\u914d\u7f6e\u3002\u6587\u4ef6\u4e0a\u4f20\u914d\u7f6e\u4ee5\u53ca\u5185\u7f6e\u65b9\u6cd5\u8bf7\u53c2\u8003: \u56fe\u7247/\u6587\u4ef6\u4e0a\u4f20 . \u6587\u4ef6\u4e0a\u4f20\u76ee\u5f55\u5728\u6587\u4ef6 config/admin.php \u4e2d\u7684 upload.file \u4e2d\u914d\u7f6e\uff0c\u5982\u679c\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u9700\u8981\u521b\u5efa\u8be5\u76ee\u5f55\u5e76\u5f00\u653e\u5199\u6743\u9650\u3002 {tip} \u6587\u4ef6\u6216\u56fe\u7247\u4e0a\u4f20\u8868\u5355\u5b57\u6bb5\u8bf7\u4e0d\u8981\u5728\u6a21\u578b\u4e2d\u8bbe\u7f6e \u8bbf\u95ee\u5668 \u548c \u4fee\u6539\u5668 \u62fc\u63a5\u57df\u540d\uff0c\u5982\u6709\u76f8\u5173\u9700\u6c42\u53ef\u53c2\u8003 \u6587\u4ef6/\u56fe\u7247\u57df\u540d\u62fc\u63a5 \u3002 $form->file($column[, $label]); // \u4fee\u6539\u6587\u4ef6\u4e0a\u4f20\u8def\u5f84\u548c\u6587\u4ef6\u540d $form->file($column[, $label])->move($dir, $name); // \u5e76\u8bbe\u7f6e\u4e0a\u4f20\u6587\u4ef6\u7c7b\u578b $form->file($column[, $label])->rules('mimes:doc,docx,xlsx'); // \u6dfb\u52a0\u6587\u4ef6\u5220\u9664\u6309\u94ae $form->file($column[, $label])->removable(); \u56fe\u7247\u4e0a\u4f20 (image) \u4f7f\u7528\u56fe\u7247\u4e0a\u4f20\u529f\u80fd\u4e4b\u524d\u9700\u8981\u5148\u5b8c\u6210\u4e0a\u4f20\u914d\u7f6e\u3002\u56fe\u7247\u4e0a\u4f20\u914d\u7f6e\u4ee5\u53ca\u5185\u7f6e\u65b9\u6cd5\u8bf7\u53c2\u8003: \u56fe\u7247/\u6587\u4ef6\u4e0a\u4f20 . \u56fe\u7247\u4e0a\u4f20\u76ee\u5f55\u5728\u6587\u4ef6 config/admin.php \u4e2d\u7684 upload.image \u4e2d\u914d\u7f6e\uff0c\u5982\u679c\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u9700\u8981\u521b\u5efa\u8be5\u76ee\u5f55\u5e76\u5f00\u653e\u5199\u6743\u9650\u3002 \u53ef\u4ee5\u4f7f\u7528\u538b\u7f29\u3001\u88c1\u5207\u3001\u6dfb\u52a0\u6c34\u5370\u7b49\u5404\u79cd\u65b9\u6cd5,\u9700\u8981\u5148\u5b89\u88c5 intervention/image \u3002 \u66f4\u591a\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003[ Intervention ]\uff1a {tip} \u6587\u4ef6\u6216\u56fe\u7247\u4e0a\u4f20\u8868\u5355\u5b57\u6bb5\u8bf7\u4e0d\u8981\u5728\u6a21\u578b\u4e2d\u8bbe\u7f6e \u8bbf\u95ee\u5668 \u548c \u4fee\u6539\u5668 \u62fc\u63a5\u57df\u540d\uff0c\u5982\u6709\u76f8\u5173\u9700\u6c42\u53ef\u53c2\u8003 \u6587\u4ef6/\u56fe\u7247\u57df\u540d\u62fc\u63a5 \u3002 $form->image($column[, $label]); // \u4fee\u6539\u56fe\u7247\u4e0a\u4f20\u8def\u5f84\u548c\u6587\u4ef6\u540d $form->image($column[, $label])->move($dir, $name); // \u526a\u88c1\u56fe\u7247 $form->image($column[, $label])->crop(int $width, int $height, [int $x, int $y]); // \u52a0\u6c34\u5370 $form->image($column[, $label])->insert($watermark, 'center'); \u591a\u56fe\u548c\u591a\u6587\u4ef6\u4e0a\u4f20 (multipleImage/multipleFile) \u591a\u56fe\u7247\u4e0a\u4f20\u8868\u5355\u7ee7\u627f\u81ea\u5355\u56fe\u4e0a\u4f20\u8868\u5355\uff0c\u591a\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u7ee7\u627f\u81ea\u5355\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u3002 {tip} \u6ce8\u5165\u8fd9\u4e2a\u5b57\u6bb5\u7684\u6570\u636e\uff08\u4ece\u6570\u636e\u5e93\u67e5\u51fa\u6765\u7684\uff09\u53ef\u4ee5\u662f\u4e00\u4e2a\u4ee5 , \u9694\u5f00\u7684\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u662f json \u5b57\u7b26\u4e32\u6216 array \u6570\u7ec4\u3002 // \u591a\u56fe $form->multipleImage($column[, $label]); // \u9650\u5236\u6700\u5927\u4e0a\u4f20\u6570\u91cf $form->multipleImage($column[, $label])->limit(3); // \u591a\u6587\u4ef6 $form->multipleFile($column[, $label]); // \u9650\u5236\u6700\u5927\u4e0a\u4f20\u6570\u91cf $form->multipleFile($column[, $label])->limit(5); \u591a\u56fe/\u6587\u4ef6\u4e0a\u4f20\u7684\u65f6\u5019\u63d0\u4ea4\u7684\u6570\u636e\u662f\u4e00\u4e2a array \u6570\u7ec4\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u628a\u6570\u636e\u5728\u4fdd\u5b58\u8fdb\u6570\u636e\u5e93\u4e4b\u524d\u6539\u4e3a\u4f60\u60f3\u8981\u7684\u683c\u5f0f\uff1a // \u8f6c\u5316\u4e3ajson\u683c\u5f0f\u4fdd\u5b58\u5230\u6570\u636e\u5e93 $form->multipleFile($column[, $label])->saving(function ($paths) { // \u53ef\u4ee5\u8f6c\u5316\u4e3a\u7531 , \u9694\u5f00\u7684\u5b57\u7b26\u4e32\u683c\u5f0f // return implode(',', $paths); // \u4e5f\u53ef\u4ee5\u8f6c\u5316\u4e3ajson return json_encode($paths); }); \u5f53\u7136\uff0c\u5982\u679c\u4f60\u60f3\u4fdd\u5b58\u4e3a\u5176\u4ed6\u4efb\u610f\u683c\u5f0f\u90fd\u662f\u53ef\u4ee5\u7684\uff0c\u53ea\u662f\u5982\u679c\u8981\u4fdd\u5b58\u5176\u4ed6\u683c\u5f0f\uff0c\u9700\u8981\u901a\u8fc7\u7528 customFormat \u65b9\u6cd5\u628a\u6570\u636e\u8f6c\u5316\u4e3a\u4e00\u7ef4\u6570\u7ec4\u5c55\u793a\uff0c\u5982\uff1a $form->multipleFile($column[, $label]) ->customFormat(function ($paths) { return collect($paths)->map(function ($value) { return explode('|', $value); })->flatten()->toArray(); }) ->saving(function ($paths) { return implode('|', $paths); }); \u542f\u7528\u53ef\u6392\u5e8f\u529f\u80fd $form->multipleImage('images')->sortable(); \u5bcc\u6587\u672c\u7f16\u8f91\u5668 (editor) \u7cfb\u7edf\u96c6\u6210\u4e86 TinyMCE \u7f16\u8f91\u5668\u4f5c\u4e3a\u5185\u7f6e\u7f16\u8f91\u5668\u3002 \u57fa\u672c\u4f7f\u7528 $form->editor($column[, $label]); \u8bbe\u7f6e\u8bed\u8a00\u5305 \u9ed8\u8ba4\u652f\u6301\u7b80\u4f53\u4e2d\u6587\u548c\u82f1\u6587\u4e24\u79cd\u8bed\u8a00\uff0c\u5982\u9700\u5176\u4ed6\u8bed\u8a00\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8bbe\u7f6e\u8bed\u8a00\u5305\u5730\u5740\u3002 $form->editor('content')->languageUrl(url('TinyMCE/langs/de.js')); \u7f16\u8f91\u5668\u914d\u7f6e \u5177\u4f53\u914d\u7f6e\u7b49\u7684\u4f7f\u7528\u53ef\u4ee5\u53c2\u8003 \u5b98\u65b9\u6587\u6863 \u6216 \u4e2d\u6587\u6587\u6863 <?php use Dcat\\Admin\\Support\\JavaScript; $form->editor('content')->options([ 'toolbar' => [], 'setup' => JavaScript::make( <<<JS function (editor) { console.log('\u7f16\u8f91\u5668\u521d\u59cb\u5316\u6210\u529f', editor) } JS ), ]); \u8bbe\u7f6e\u9ad8\u5ea6 \u9ed8\u8ba4\u503c\u4e3a 400 $form->editor('content')->height('600'); \u53ea\u8bfb $form->editor('content')->readOnly(); // \u6216 $form->editor('content')->disable(); \u56fe\u7247\u4e0a\u4f20 \u8bbe\u7f6e\u56fe\u7247\u4e0a\u4f20 disk \u914d\u7f6e\uff0c\u9ed8\u8ba4\u4e0a\u4f20\u5230 admin.upload.disk \u6307\u5b9a\u7684\u914d\u7f6e // \u4e0a\u4f20\u5230oss $form->editor('content')->disk('oss'); \u8bbe\u7f6e\u56fe\u7247\u4e0a\u4f20\u76ee\u5f55\uff0c\u9ed8\u8ba4\u4e3a tinymce/images $form->editor('content')->imageDirectory('editor/images'); \u81ea\u5b9a\u4e49\u4e0a\u4f20\u63a5\u53e3\uff0c\u63a5\u53e3\u8fd4\u56de\u683c\u5f0f\u9700\u8981\u662f {\"location\": \"\u56fe\u7247url\"} $form->editor('content')->imageUrl('editor/upload-image'); \u5168\u5c40\u8bbe\u7f6e \u5982\u679c\u4f60\u9700\u8981\u5bf9\u7f16\u8f91\u5668\u8fdb\u884c\u5168\u5c40\u8bbe\u7f6e\uff0c\u53ef\u4ee5\u5728 app\\Admin\\bootstrap.php \u52a0\u4e0a\u4ee5\u4e0b\u4ee3\u7801 <?php use Dcat\\Admin\\Form\\Field\\Editor; Editor::resolving(function (Editor $editor) { // \u8bbe\u7f6e\u9ed8\u8ba4\u914d\u7f6e $editor->options([...]); // \u8bbe\u7f6e\u7f16\u8f91\u5668\u56fe\u7247\u9ed8\u8ba4\u4e0a\u4f20\u5230\u4e03\u725b\u4e91 $editor->disk('qiniu'); }); Markdown\u7f16\u8f91\u5668 (markdown) \u7cfb\u7edf\u96c6\u6210\u4e86 editor-md \u7f16\u8f91\u5668\u4f5c\u4e3a\u5185\u7f6eMarkdown\u7f16\u8f91\u5668\u3002 \u57fa\u672c\u4f7f\u7528 $form->markdown($column[, $label]); \u8bbe\u7f6e\u8bed\u8a00\u5305 \u9ed8\u8ba4\u652f\u6301\u7b80\u4f53\u4e2d\u6587\u548c\u82f1\u6587\u4e24\u79cd\u8bed\u8a00\uff0c\u5982\u9700\u5176\u4ed6\u8bed\u8a00\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8bbe\u7f6e\u8bed\u8a00\u5305\u5730\u5740\u3002 $form->markdown('content')->languageUrl(admin_asset('@admin/dcat/plugins/editor-md/languages/zh-tw.js')); \u7f16\u8f91\u5668\u914d\u7f6e \u5177\u4f53\u914d\u7f6e\u7b49\u7684\u4f7f\u7528\u53ef\u4ee5\u53c2\u8003 \u5b98\u65b9\u6587\u6863 <?php use Dcat\\Admin\\Support\\JavaScript; $form->markdown('content')->options([ 'onpreviewing' => JavaScript::make( <<<JS function() { // console.log(\"onpreviewing =>\", this, this.id, this.settings); // on previewing you can custom css .editormd-preview-active } JS ), ]); \u8bbe\u7f6e\u9ad8\u5ea6 \u9ed8\u8ba4\u503c\u4e3a 500 $form->markdown('content')->height('600'); \u53ea\u8bfb $form->markdown('content')->readOnly(); // \u6216 $form->markdown('content')->disable(); \u56fe\u7247\u4e0a\u4f20 \u8bbe\u7f6e\u56fe\u7247\u4e0a\u4f20 disk \u914d\u7f6e\uff0c\u9ed8\u8ba4\u4e0a\u4f20\u5230 admin.upload.disk \u6307\u5b9a\u7684\u914d\u7f6e // \u4e0a\u4f20\u5230oss $form->markdown('content')->disk('oss'); \u8bbe\u7f6e\u56fe\u7247\u4e0a\u4f20\u76ee\u5f55\uff0c\u9ed8\u8ba4\u4e3a markdown/images $form->markdown('content')->imageDirectory('markdown/images'); \u81ea\u5b9a\u4e49\u4e0a\u4f20\u63a5\u53e3\uff0c\u63a5\u53e3\u8fd4\u56de\u683c\u5f0f\u9700\u8981\u662f {\"success\": 1, \"url\": \"\u56fe\u7247url\"} $form->markdown('content')->imageUrl('markdown/upload-image'); \u5168\u5c40\u8bbe\u7f6e \u5982\u679c\u4f60\u9700\u8981\u5bf9\u7f16\u8f91\u5668\u8fdb\u884c\u5168\u5c40\u8bbe\u7f6e\uff0c\u53ef\u4ee5\u5728 app\\Admin\\bootstrap.php \u52a0\u4e0a\u4ee5\u4e0b\u4ee3\u7801 <?php use Dcat\\Admin\\Form\\Field\\Markdown; Markdown::resolving(function (Markdown $markdown) { // \u8bbe\u7f6e\u9ed8\u8ba4\u914d\u7f6e $markdown->options([...]); // \u8bbe\u7f6e\u7f16\u8f91\u5668\u56fe\u7247\u9ed8\u8ba4\u4e0a\u4f20\u5230\u4e03\u725b\u4e91 $markdown->disk('qiniu'); }); \u5f00\u5173 (switch) \u4f7f\u7528 $form->switch($column[, $label]); \u5f00\u5173\u8868\u5355\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u7684\u9ed8\u8ba4\u503c\u4e3a 1 \u548c 0 \uff0c\u5982\u679c\u9700\u8981\u66f4\u6539\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u7684\u503c\uff0c\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528 $form->switch($column[, $label]) ->customFormat(function ($v) { return $v == '\u6253\u5f00' ? 1 : 0; }) ->saving(function ($v) { return $v ? '\u6253\u5f00' : '\u5173\u95ed'; }); \u5730\u56fe (map) \u5730\u56fe\u63a7\u4ef6\uff0c\u7528\u6765\u9009\u62e9\u7ecf\u7eac\u5ea6, $latitude , $longitude \u4e3a\u7ecf\u7eac\u5ea6\u5b57\u6bb5\u3002 \u4f7f\u7528\u8fd9\u4e2a\u529f\u80fd\u9700\u8981\u5728 config/admin.php \u6587\u4ef6\u4e2d\u4fee\u6539 map_provider \u7684\u503c\uff08\u76ee\u524d\u652f\u6301\u7684\u5730\u56fe\u4e3a\uff1a\"tencent\", \"google\", \"yandex\"\uff0c\u4e0d\u540c\u5730\u56fe\u9700\u8981\u81ea\u5df1\u7533\u8bf7\u76f8\u5e94\u7684 KEY \u5e76\u5728 .env \u6587\u4ef6\u4e2d\u914d\u7f6e\uff0c\u7136\u540e\u9700\u8981\u5728 app/Admin/bootstrap.php \u4e2d\u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801 Form\\Field\\Map::requireAssets(); \u4f7f\u7528 $form->map($latitude, $longitude, $label); \u6ed1\u52a8\u6761 (slider) \u53ef\u4ee5\u7528\u6765\u6570\u5b57\u7c7b\u578b\u5b57\u6bb5\u7684\u9009\u62e9\uff0c\u6bd4\u5982\u5e74\u9f84\uff1a $form->slider($column[, $label])->options(['max' => 100, 'min' => 1, 'step' => 1, 'postfix' => 'years old']); \u66f4\u591aoptions\u8bf7\u53c2\u8003:https://github.com/IonDen/ion.rangeSlider#settings \u4ec5\u663e\u793a (display) \u53ea\u663e\u793a\u5b57\u6bb5\uff0c\u4e0d\u505a\u4efb\u4f55\u64cd\u4f5c\uff1a $form->display($column[, $label]); //\u66f4\u590d\u6742\u7684\u663e\u793a $form->display($column[, $label])->with(function ($value) { return \"<img src=\"$value\" />\"; }); \u5355\u4f4d\u7b26\u53f7 (currency) $form->currency($column[, $label]); // \u8bbe\u7f6e\u5355\u4f4d\u7b26\u53f7 $form->currency($column[, $label])->symbol('\uffe5'); \u6570\u5b57 (number) $form->number($column[, $label]); \u8d39\u7387 (rate) $form->rate($column[, $label]); \u5206\u5272\u7ebf (divider) $form->divider(); \u81ea\u5b9a\u4e49\u5185\u5bb9 (html) \u63d2\u5165html\u5185\u5bb9\uff0c\u53c2\u6570\u53ef\u4ee5\u662f\u5b9e\u73b0\u4e86 Htmlable \u3001 Renderable \u6216\u8005\u5b9e\u73b0\u4e86 __toString() \u65b9\u6cd5\u7684\u7c7b $form->html('\u4f60\u7684html\u5185\u5bb9', $label = ''); \u6807\u7b7e (tags) \u63d2\u5165\u9017\u53f7(,)\u9694\u5f00\u7684\u5b57\u7b26\u4e32 tags $form->tags('keywords'); tags \u540c\u6837\u652f\u6301 ManyToMany \u7684\u5173\u7cfb\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a $form->tags('tags', '\u6587\u7ae0\u6807\u7b7e') ->pluck('name', 'id') // name \u4e3a\u9700\u8981\u663e\u793a\u7684 Tag \u6a21\u578b\u7684\u5b57\u6bb5\uff0cid \u4e3a\u4e3b\u952e ->options(Tag::all());// \u4e0b\u62c9\u6846\u9009\u9879 \u6ce8\u610f\uff1a\u5904\u7406 ManyToMany \u5173\u7cfb\u65f6\u5fc5\u987b\u8c03\u7528 pluck \u65b9\u6cd5\uff0c\u6307\u5b9a\u663e\u793a\u7684\u5b57\u6bb5\u540d\u548c\u4e3b\u952e\u3002 \u6b64\u5916 options \u65b9\u6cd5\u4f20\u5165\u4e00\u4e2a Collection \u5bf9\u8c61\u65f6\uff0c options \u4f1a\u81ea\u52a8\u8c03\u7528\u8be5\u5bf9\u8c61\u7684 pluck \u65b9\u6cd5\u8f6c\u4e3a ['\u4e3b\u952e\u540d' => '\u663e\u793a\u5b57\u6bb5\u540d'] \u6570\u7ec4\uff0c\u4f5c\u4e3a\u4e0b\u62c9\u6846\u9009\u9879\u3002\u6216\u8005\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 ['\u4e3b\u952e\u540d' => '\u663e\u793a\u5b57\u6bb5\u540d'] \u8fd9\u6837\u7684\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\u3002 tags \u8fd8\u652f\u6301 saving \u65b9\u6cd5\u7528\u4e8e\u5904\u7406\u63d0\u4ea4\u7684\u6570\u636e\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a $form->tags('tags', '\u6587\u7ae0\u6807\u7b7e') ->pluck('name', 'id') ->options(Tag::all()) ->saving(function ($value) { return $value; }); saving \u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a\u300c\u53c2\u6570\u4e3a tags \u7684\u63d0\u4ea4\u503c\uff0c\u8fd4\u56de\u503c\u4e3a\u4fee\u6539\u540e\u7684 tags \u63d0\u4ea4\u503c\u300d\u7684\u95ed\u5305\uff0c\u53ef\u4ee5\u7528\u4e8e\u5b9e\u73b0\u81ea\u52a8\u521b\u5efa\u65b0 tag \u6216\u5176\u5b83\u529f\u80fd\u3002 \u5982\u679c\u9009\u9879\u8fc7\u591a\uff0c\u53ef\u901a\u8fc7ajax\u65b9\u5f0f\u52a8\u6001\u5206\u9875\u8f7d\u5165\u9009\u9879\uff1a $form->tags('friends')->options(function ($ids) { return User::find((array) $ids)->pluck('name', 'id'); })->ajax('api/users'); API /admin/api/users \u63a5\u53e3\u7684\u4ee3\u7801\uff1a public function users(Request $request) { $q = $request->get('q'); return User::where('name', 'like', \"%$q%\")->paginate(null, ['id', 'name as text']); } \u63a5\u53e3\u8fd4\u56de\u7684\u6570\u636e\u7ed3\u6784\u4e3a { \"total\": 4, \"per_page\": 15, \"current_page\": 1, \"last_page\": 1, \"next_page_url\": null, \"prev_page_url\": null, \"from\": 1, \"to\": 3, \"data\": [ { \"id\": 9, \"text\": \"xxx\" }, { \"id\": 21, \"text\": \"xxx\" }, { \"id\": 42, \"text\": \"xxx\" }, { \"id\": 48, \"text\": \"xxx\" } ] } \u56fe\u6807\u9009\u62e9\u5668 (icon) \u9009\u62e9 font-awesome \u56fe\u6807 $form->icon('icon'); \u6811\u5f62\u9009\u62e9\u5668 (tree) \u6811\u5f62\u7ed3\u6784\u8868\u5355 $form->tree('permissions') ->nodes(Model::get()->toArray()) // \u8bbe\u7f6e\u6240\u6709\u8282\u70b9 ->customFormat(function ($v) { // \u683c\u5f0f\u5316\u5916\u90e8\u6ce8\u5165\u7684\u503c if (!$v) return []; return array_column($v, 'id'); }); // \u4fee\u6539\u8282\u70b9\u7684\u5b57\u6bb5\u540d\u79f0 // \u9ed8\u8ba4 \u201cid\u201d \u201cname\u201d \u201cparent_id\u201d $form->tree('permissions') ->nodes($permissionModel->allNodes()) ->setIdColumn('id') ->setTitleColumn('title') ->setParentColumn('parent'); // \u9ed8\u8ba4\u662f\u4e0d\u4fdd\u5b58\u7236\u8282\u70b9\u7684\u503c\u7684\uff0c\u56e0\u4e3a\u4e00\u822c\u6765\u8bf4\u7236\u8282\u70b9\u53ea\u662f\u4f5c\u4e3a\u6807\u9898\u7684\u5f62\u5f0f\u5b58\u5728 // \u7981\u6b62\u8fc7\u6ee4\u7236\u8282\u70b9\u7684\u503c $form->tree('permissions') ->nodes($permissionModel->allNodes()) ->exceptParentNode(false); // \u9ed8\u8ba4\u6536\u7f29\u5b50\u8282\u70b9 $form->tree('permissions') ->nodes($permissionModel->allNodes()) ->expand(false); tree \u8868\u5355\u9ed8\u8ba4\u4e0d\u5141\u8bb8\u5355\u72ec\u9009\u4e2d\u7236\u8282\u70b9\uff0c\u53ef\u4ee5\u901a\u8fc7 treeState(false) \u5f00\u542f\u8fd9\u4e2a\u529f\u80fd $form->tree('xxx') ->treeState(false) # \u5141\u8bb8\u5355\u72ec\u9009\u62e9\u7236\u8282\u70b9 ->setTitleColumn('title') ->nodes(...); \u6548\u679c \u8868\u683c\u8868\u5355 (table) \u5982\u679c\u67d0\u4e00\u4e2a\u5b57\u6bb5\u5b58\u50a8\u7684\u662fjson\u683c\u5f0f\u7684\u4e8c\u7ef4\u6570\u7ec4\uff0c\u53ef\u4ee5\u4f7f\u7528table\u8868\u5355\u7ec4\u4ef6\u6765\u5b9e\u73b0\u5feb\u901f\u7684\u7f16\u8f91\uff1a $form->table('extra', function (NestedForm $table) { $table->text('key'); $table->text('value'); $table->text('desc'); }); \u540c\u65f6\u5728\u6a21\u578b\u91cc\u9762\u7ed9\u8fd9\u4e2a\u5b57\u6bb5\u589e\u52a0\u8bbf\u95ee\u5668\u548c\u4fee\u6539\u5668: public function getExtraAttribute($extra) { return array_values(json_decode($extra, true) ?: []); } public function setExtraAttribute($extra) { $this->attributes['extra'] = json_encode(array_values($extra)); } \u8fd9\u4e2a\u7ec4\u4ef6\u7c7b\u4f3c\u4e8ehasMany\u7ec4\u4ef6\uff0c\u4e0d\u8fc7\u662f\u7528\u6765\u5904\u7406\u5355\u4e2a\u5b57\u6bb5\u7684\u60c5\u51b5\uff0c\u9002\u7528\u4e8e\u7b80\u5355\u7684\u4e8c\u7ef4\u6570\u636e\u3002 \u4e00\u5bf9\u591a (hasMany) \u4e00\u5bf9\u591a\u5185\u5d4c\u8868\u683c\uff0c\u7528\u4e8e\u5904\u7406\u4e00\u5bf9\u591a\u7684\u5173\u7cfb\uff0c\u4e0b\u9762\u662f\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a \u6709\u4e24\u5f20\u8868\u662f\u4e00\u5bf9\u591a\u5173\u7cfb\uff1a CREATE TABLE `demo_painters` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `username` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `bio` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; CREATE TABLE `demo_paintings` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `painter_id` int(10) unsigned NOT NULL, `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `body` text COLLATE utf8_unicode_ci NOT NULL, `completed_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`), KEY painter_id (`painter_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; \u8868\u7684\u6a21\u578b\u4e3a\uff1a <?php namespace App\\Models\\Demo; use Illuminate\\Database\\Eloquent\\Model; class Painter extends Model { public function paintings() { return $this->hasMany(Painting::class, 'painter_id'); } } <?php namespace App\\Models\\Demo; use Illuminate\\Database\\Eloquent\\Model; class Painting extends Model { protected $fillable = ['title', 'body', 'completed_at']; public function painter() { return $this->belongsTo(Painter::class, 'painter_id'); } } \u6784\u5efa\u8868\u5355\u4ee3\u7801\u5982\u4e0b\uff1a use App\\Models\\Demo\\Painter; // \u8fd9\u91cc\u9700\u8981\u663e\u5f0f\u5730\u6307\u5b9a\u5173\u8054\u5173\u7cfb $builder = Painter::with('paintings'); // \u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f\u6570\u636e\u4ed3\u5e93\uff0c\u5219\u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a\u5173\u8054\u5173\u7cfb // $repository = new Painter(['paintings']); return Form::make($builder, function (Form $form) { $form->display('id', 'ID'); $form->text('username')->rules('required'); $form->textarea('bio')->rules('required'); $form->hasMany('paintings', function (Form\\NestedForm $form) { $form->text('title'); $form->textarea('body'); $form->datetime('completed_at'); }); $form->display('created_at', 'Created At'); $form->display('updated_at', 'Updated At'); // \u4e5f\u53ef\u4ee5\u8bbe\u7f6elabel // $form->hasMany('paintings', '\u753b\u4f5c', function (Form\\NestedForm $form) { // ... // }); }); \u6548\u679c \u8868\u683c\u6a21\u5f0f (table) \u5982\u679c\u4f60\u60f3\u8981\u663e\u793a\u8868\u683c\u6a21\u5f0f\uff0c\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528 use Dcat\\Admin\\Support\\Helper; $form->hasMany('paintings', function (Form\\NestedForm $form) { ... })->useTable(); \u6548\u679c \u5185\u5d4c (embeds) {tip} \u5185\u5d4c\u8868\u5355\u4e0d\u652f\u6301\u56fe\u7247\u548c\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u3002 \u7528\u4e8e\u5904\u7406 mysql \u7684 JSON \u7c7b\u578b\u5b57\u6bb5\u6570\u636e\u6216\u8005 mongodb \u7684 object \u7c7b\u578b\u6570\u636e\uff0c\u4e5f\u53ef\u4ee5\u5c06\u591a\u4e2afield\u7684\u6570\u636e\u503c\u4ee5 JSON \u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u5b58\u50a8\u5728 mysql \u7684\u5b57\u7b26\u4e32\u7c7b\u578b\u5b57\u6bb5\u4e2d \u6bd4\u5982 orders \u8868\u4e2d\u7684 JSON \u6216\u5b57\u7b26\u4e32\u7c7b\u578b\u7684 extra \u5b57\u6bb5\uff0c\u7528\u6765\u5b58\u50a8\u591a\u4e2afield\u7684\u6570\u636e\uff0c\u5148\u5b9a\u4e49model: class Order extends Model { protected $casts = [ 'extra' => 'json', ]; } \u7136\u540e\u5728form\u4e2d\u4f7f\u7528\uff1a $form->embeds('extra', function ($form) { $form->text('extra1')->rules('required'); $form->email('extra2')->rules('required'); $form->mobile('extra3'); $form->datetime('extra4'); $form->dateRange('extra5', 'extra6', '\u8303\u56f4')->rules('required'); }); // \u81ea\u5b9a\u4e49\u6807\u9898 $form->embeds('extra', '\u9644\u52a0\u4fe1\u606f', function ($form) { ... }); \u56de\u8c03\u51fd\u6570\u91cc\u9762\u6784\u5efa\u8868\u5355\u5143\u7d20\u7684\u65b9\u6cd5\u8c03\u7528\u548c\u5916\u9762\u662f\u4e00\u6837\u7684\u3002","title":"\u8868\u5355\u5b57\u6bb5\u7684\u4f7f\u7528"},{"location":"2.x/model-form-fields/#_1","text":"\u5728 model-form \u4e2d\u5185\u7f6e\u4e86\u5927\u91cf\u7684form\u7ec4\u4ef6\u6765\u5e2e\u52a9\u4f60\u5feb\u901f\u7684\u6784\u5efaform\u8868\u5355","title":"\u8868\u5355\u5b57\u6bb5\u7684\u4f7f\u7528"},{"location":"2.x/model-form-fields/#_2","text":"","title":"\u516c\u5171\u65b9\u6cd5"},{"location":"2.x/model-form-fields/#value","text":"$form->text('title')->value('text...');","title":"\u8bbe\u7f6e\u8868\u5355\u503c (value)"},{"location":"2.x/model-form-fields/#default","text":"$form->text('title')->default('text...'); \u6b64\u65b9\u6cd5\u4ec5\u5728 \u65b0\u589e\u9875\u9762 \u6709\u6548\uff0c\u5982\u679c \u7f16\u8f91\u9875\u9762 \u4e5f\u9700\u8981\u8bbe\u7f6e\u9ed8\u8ba4\u503c\uff0c\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u65b9\u6cd5 $form->text('xxx')->default('\u9ed8\u8ba4\u503c', true);","title":"\u8bbe\u7f6e\u9ed8\u8ba4\u503c (default)"},{"location":"2.x/model-form-fields/#help","text":"$form->text('title')->help('help...');","title":"\u8bbe\u7f6e\u63d0\u793a\u4fe1\u606f (help)"},{"location":"2.x/model-form-fields/#attribute","text":"$form->text('title')->attribute(['data-title' => 'title...']); $form->text('title')->attribute('data-title', 'title...');","title":"\u8bbe\u7f6e\u5c5e\u6027 (attribute)"},{"location":"2.x/model-form-fields/#required","text":"$form->text('title')->required(); // \u4e0d\u663e\u793a\"*\"\u53f7 $form->text('title')->required(false);","title":"\u8bbe\u7f6e\u4e3a\u5fc5\u586b (required)"},{"location":"2.x/model-form-fields/#disable","text":"$form->text('title')->disable();","title":"\u8bbe\u7f6e\u4e3a\u4e0d\u53ef\u7f16\u8f91 (disable)"},{"location":"2.x/model-form-fields/#placeholder","text":"$form->text('title')->placeholder('\u8bf7\u8f93\u5165\u3002\u3002\u3002');","title":"\u8bbe\u7f6e\u5360\u4f4d\u7b26 (placeholder)"},{"location":"2.x/model-form-fields/#width","text":"$form->text('title')->width(8, 2);","title":"\u8bbe\u7f6e\u5bbd\u5ea6 (width)"},{"location":"2.x/model-form-fields/#rules","text":"\u5177\u4f53\u4f7f\u7528\u53ef\u53c2\u8003 \u8868\u5355\u9a8c\u8bc1 \u3002","title":"\u8bbe\u7f6e\u9a8c\u8bc1\u89c4\u5219 (rules)"},{"location":"2.x/model-form-fields/#saving","text":"\u901a\u8fc7 saving \u65b9\u6cd5\u53ef\u4ee5\u66f4\u6539\u5f85\u4fdd\u5b58\u6570\u636e\u7684\u683c\u5f0f\u3002 use Dcat\\Admin\\Support\\Helper; $form->multipleFile('files')->saving(function ($paths) { $paths = Helper::array($paths); // \u83b7\u53d6\u6570\u636e\u5e93\u5f53\u524d\u884c\u7684\u5176\u4ed6\u5b57\u6bb5 $username = $this->username; // \u6700\u7ec8\u8f6c\u5316\u4e3ajson\u4fdd\u5b58\u5230\u6570\u636e\u5e93 return json_encode($paths); });","title":"\u4fee\u6539\u5f85\u4fdd\u5b58\u7684\u8868\u5355\u8f93\u5165\u503c (saving)"},{"location":"2.x/model-form-fields/#customformat","text":"\u901a\u8fc7 customFormat \u65b9\u6cd5\u53ef\u4ee5\u6539\u53d8\u4ece\u5916\u90e8\u6ce8\u5165\u5230\u8868\u5355\u7684\u5b57\u6bb5\u503c\u3002 \u5982\u4e0b\u4f8b\u5b50\u4e2d\uff0c multipleFile \u5b57\u6bb5\u8981\u6c42\u5f85\u6e32\u67d3\u7684\u5b57\u6bb5\u503c\u4e3a\u6570\u7ec4\u683c\u5f0f\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 customFormat \u65b9\u6cd5\u628a\u4ece\u6570\u636e\u5e93\u67e5\u51fa\u7684\u5b57\u6bb5\u503c\u8f6c\u5316\u4e3a array \u683c\u5f0f use Dcat\\Admin\\Support\\Helper; $form->multipleFile('files')->saving(function ($paths) { $paths = Helper::array($paths); return json_encode($paths); })->customFormat(function ($paths) { // \u83b7\u53d6\u6570\u636e\u5e93\u5f53\u524d\u884c\u7684\u5176\u4ed6\u5b57\u6bb5 $username = $this->username; // \u8f6c\u4e3a\u6570\u7ec4 return Helper::array($paths); });","title":"\u4fee\u6539\u8868\u5355\u6570\u636e\u663e\u793a (customFormat)"},{"location":"2.x/model-form-fields/#_3","text":"\u5982\u679c\u4e0d\u60f3\u5728\u5f39\u7a97\u4e2d\u663e\u793a\u67d0\u4e2a\u5b57\u6bb5\uff0c\u53ef\u4ee5\u4f7f\u7528 Form\\Field::hideInDialog \u65b9\u6cd5 $form->display('id'); $form->text('title'); $form->textarea('contents')->hideInDialog();","title":"\u5728\u5f39\u7a97\u4e2d\u9690\u85cf"},{"location":"2.x/model-form-fields/#saveasstring","text":"saveAsString \u65b9\u6cd5\u53ef\u4ee5\u628a\u8868\u5355\u503c\u8f6c\u5316\u4e3a string \u7c7b\u578b\u4fdd\u5b58\uff0c\u5f53\u4fdd\u5b58\u7684\u6570\u636e\u5e93\u5b57\u6bb5\u503c\u4e0d\u5141\u8bb8\u4e3a null \u65f6\u975e\u5e38\u6709\u7528\uff1b $form->text('nickname')->saveAsString();","title":"\u4fdd\u5b58\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b saveAsString"},{"location":"2.x/model-form-fields/#json-saveasjson","text":"saveAsJson \u53ef\u4ee5\u628a\u8868\u5355\u503c\u4fdd\u5b58\u4e3a json \u683c\u5f0f $form->text('nickname')->saveAsJson();","title":"\u4fdd\u5b58\u4e3ajson\u7c7b\u578b saveAsJson"},{"location":"2.x/model-form-fields/#text","text":"$form->text($column, [$label]); // \u6dfb\u52a0\u63d0\u4ea4\u9a8c\u8bc1\u89c4\u5219 $form->text($column, [$label])->rules('required|min:10');","title":"\u6587\u672c (text)"},{"location":"2.x/model-form-fields/#hidden","text":"\u901a\u8fc7 hidden \u65b9\u6cd5\u53ef\u4ee5\u7ed9\u4f60\u7684\u8868\u5355\u8bbe\u7f6e\u4e00\u4e2a\u9690\u85cf\u5b57\u6bb5\u3002 $form->hidden('author_id')->value(Admin::user()->getKey()); \u901a\u5e38\u53ef\u4ee5\u7ed3\u5408 saving \u4e8b\u4ef6\u4f7f\u7528 $form->hidden('author_id'); $form->saving(function (Form $form) { $form->author_id = Admin::user()->getKey(); });","title":"\u9690\u85cf\u5b57\u6bb5 (hidden)"},{"location":"2.x/model-form-fields/#select","text":"$form->select($column[, $label])->options([1 => 'foo', 2 => 'bar', 'val' => 'Option name']); \u6216\u8005\u4eceapi\u4e2d\u83b7\u53d6\u9009\u9879\u5217\u8868\uff1a $form->select($column[, $label])->options('/api/users'); // \u4f7f\u7528ajax\u5e76\u663e\u793a\u6240\u9009\u9879\u76ee $form->select($column[, $label])->options(Model::class)->ajax('/api/users'); // \u6216\u6307\u5b9a\u540d\u79f0\u548cID $form->select($column[, $label])->options(Model::class, 'name', 'id')->ajax('/api/users'); \u5176\u4e2dapi\u63a5\u53e3\u7684\u683c\u5f0f\u5fc5\u987b\u4e3a\u4e0b\u9762\u683c\u5f0f\uff1a [ { \"id\": 9, \"text\": \"xxx\" }, { \"id\": 21, \"text\": \"xxx\" }, ... ] \u5982\u679c\u9009\u9879\u8fc7\u591a\uff0c\u53ef\u901a\u8fc7ajax\u65b9\u5f0f\u52a8\u6001\u5206\u9875\u8f7d\u5165\u9009\u9879\uff1a $form->select('user_id')->options(function ($id) { $user = User::find($id); if ($user) { return [$user->id => $user->name]; } })->ajax('api/users'); \u4f7f\u7528model\u65b9\u6cd5\u5728\u7de8\u8f2f\u6642\u8f09\u5165\u8cc7\u6599\uff1a $form->select('user_id')->model(User::class, 'id', 'name'); \u4e0a\u9762\u7684\u4ee3\u78bc\u8ddf\u4e0b\u9762\u9019\u500b\u662f\u4e00\u6a23\u7684 $form->select('user_id')->options(function ($id) { $user = User::find($id); if ($user) { return [$user->id => $user->name]; } }); API /admin/api/users \u63a5\u53e3\u7684\u4ee3\u7801\uff1a public function users(Request $request) { $q = $request->get('q'); return User::where('name', 'like', \"%$q%\")->paginate(null, ['id', 'name as text']); } \u63a5\u53e3\u8fd4\u56de\u7684\u6570\u636e\u7ed3\u6784\u4e3a { \"total\": 4, \"per_page\": 15, \"current_page\": 1, \"last_page\": 1, \"next_page_url\": null, \"prev_page_url\": null, \"from\": 1, \"to\": 3, \"data\": [ { \"id\": 9, \"text\": \"xxx\" }, { \"id\": 21, \"text\": \"xxx\" }, { \"id\": 42, \"text\": \"xxx\" }, { \"id\": 48, \"text\": \"xxx\" } ] }","title":"\u4e0b\u62c9\u9009\u6846\u5355\u9009 (select)"},{"location":"2.x/model-form-fields/#load","text":"select \u7ec4\u4ef6\u652f\u6301\u7236\u5b50\u5173\u7cfb\u7684\u5355\u5411\u8054\u52a8\uff1a $form->select('province')->options(...)->load('city', '/api/city'); $form->select('city'); \u5176\u4e2d load('city', '/api/city'); \u7684\u610f\u601d\u662f\uff0c\u5728\u5f53\u524dselect\u7684\u9009\u9879\u5207\u6362\u4e4b\u540e\uff0c\u4f1a\u628a\u5f53\u524d\u9009\u9879\u7684\u503c\u901a\u8fc7\u53c2\u6570 q , \u8c03\u7528\u63a5\u53e3 /api/city \uff0c\u5e76\u628aapi\u8fd4\u56de\u7684\u6570\u636e\u586b\u5145\u4e3acity\u9009\u62e9\u6846\u7684\u9009\u9879\uff0c\u5176\u4e2dapi /api/city \u8fd4\u56de\u7684\u6570\u636e\u683c\u5f0f\u5fc5\u987b\u7b26\u5408: [ { \"id\": 9, \"text\": \"xxx\" }, { \"id\": 21, \"text\": \"xxx\" }, ... ] \u63a7\u5236\u5668action\u7684\u4ee3\u7801\u793a\u4f8b\u5982\u4e0b\uff1a public function city(Request $request) { $provinceId = $request->get('q'); return ChinaArea::city()->where('parent_id', $provinceId)->get(['id', DB::raw('name as text')]); } selectTable \u3001 multipleSelectTable \u3001 radio \u3001 checkbox \u4e5f\u53ef\u4ee5\u4f7f\u7528 load \u65b9\u6cd5\u8054\u52a8 select \u548c multipleSelect \u8868\u5355\uff0c\u7528\u6cd5\u548c\u4e0a\u9762\u7684\u793a\u4f8b\u4e00\u81f4\u3002","title":"\u4e0b\u62c9\u9009\u6846\u8054\u52a8 (load)"},{"location":"2.x/model-form-fields/#loads","text":"\u4f7f\u7528 loads \u65b9\u6cd5\u53ef\u4ee5\u8054\u52a8\u591a\u4e2a\u5b57\u6bb5\uff0c\u7528\u6cd5\u5982\u4e0b $form->select('status') ->options(...) ->loads(['field1', 'field2'], ['/api/field1', '/api/field2']); $form->select('field1'); $form->select('field2'); api \u8fd4\u56de\u7684\u6570\u636e\u683c\u5f0f\u4e0e load \u65b9\u6cd5\u4e00\u81f4\uff0c selectTable \u3001 multipleSelectTable \u3001 radio \u3001 checkbox \u4e5f\u53ef\u4ee5\u4f7f\u7528 loads \u65b9\u6cd5\u8054\u52a8\u3002","title":"\u8054\u52a8\u591a\u4e2a\u5b57\u6bb5 (loads)"},{"location":"2.x/model-form-fields/#multipleselect","text":"{tip} \u6ce8\u5165\u8fd9\u4e2a\u5b57\u6bb5\u7684\u6570\u636e\uff08\u4ece\u6570\u636e\u5e93\u67e5\u51fa\u6765\u7684\uff09\u53ef\u4ee5\u662f\u4e00\u4e2a\u4ee5 , \u9694\u5f00\u7684\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u662f json \u5b57\u7b26\u4e32\u6216 array \u6570\u7ec4\u3002 $form->multipleSelect($column[, $label]) ->options([1 => 'foo', 2 => 'bar', 'val' => 'Option name']) ->saving(function ($value) { // \u8f6c\u5316\u6210json\u5b57\u7b26\u4e32\u4fdd\u5b58\u5230\u6570\u636e\u5e93 return json_encode($value); }); // \u4f7f\u7528ajax\u5e76\u663e\u793a\u6240\u9009\u9879\u76ee\uff1a $form->multipleSelect($column[, $label])->options(Model::class)->ajax('ajax_url'); // \u6216\u6307\u5b9a\u540d\u79f0\u548cID $form->multipleSelect($column[, $label])->options(Model::class, 'name', 'id')->ajax('ajax_url'); \u591a\u9009\u6846\u53ef\u4ee5\u5904\u7406\u4e24\u79cd\u60c5\u51b5\uff0c\u7b2c\u4e00\u79cd\u662f ManyToMany \u7684\u5173\u7cfb\u3002 class Post extends Models { public function tags() { return $this->belongsToMany(Tag::class); } } return Form::make(Post::with('tags'), function (Form $form) { ... $form->multipleSelect('tags') ->options(Tag::all()->pluck('name', 'id')) ->customFormat(function ($v) { if (! $v) { return []; } // \u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u51fa\u7684\u4e8c\u7ef4\u6570\u7ec4\u4e2d\u8f6c\u5316\u6210ID return array_column($v, 'id'); }); }); \u7b2c\u4e8c\u79cd\u662f\u5c06\u9009\u9879\u6570\u7ec4\u5b58\u50a8\u5230\u5355\u5b57\u6bb5\u4e2d\uff0c\u5982\u679c\u5b57\u6bb5\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u90a3\u5c31\u9700\u8981\u5728\u6a21\u578b\u91cc\u9762\u4e3a\u8be5\u5b57\u6bb5\u5b9a\u4e49 \u8bbf\u95ee\u5668\u548c\u4fee\u6539\u5668 \u6765\u5b58\u50a8\u548c\u8bfb\u53d6\u4e86\u3002 \u5982\u679c\u9009\u9879\u8fc7\u591a\uff0c\u53ef\u901a\u8fc7ajax\u65b9\u5f0f\u52a8\u6001\u5206\u9875\u8f7d\u5165\u9009\u9879\uff1a $form->select('friends')->options(function ($ids) { return User::find($ids)->pluck('name', 'id'); })->ajax('api/users'); API /admin/api/users \u63a5\u53e3\u7684\u4ee3\u7801\uff1a public function users(Request $request) { $q = $request->get('q'); return User::where('name', 'like', \"%$q%\")->paginate(null, ['id', 'name as text']); } \u63a5\u53e3\u8fd4\u56de\u7684\u6570\u636e\u7ed3\u6784\u4e3a { \"total\": 4, \"per_page\": 15, \"current_page\": 1, \"last_page\": 1, \"next_page_url\": null, \"prev_page_url\": null, \"from\": 1, \"to\": 3, \"data\": [ { \"id\": 9, \"text\": \"xxx\" }, { \"id\": 21, \"text\": \"xxx\" }, { \"id\": 42, \"text\": \"xxx\" }, { \"id\": 48, \"text\": \"xxx\" } ] }","title":"\u4e0b\u62c9\u9009\u6846\u591a\u9009 (multipleSelect)"},{"location":"2.x/model-form-fields/#selecttable","text":"use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Models\\Administrator; $form->selectTable($field) ->title('\u5f39\u7a97\u6807\u9898') ->dialogWidth('50%') // \u5f39\u7a97\u5bbd\u5ea6\uff0c\u9ed8\u8ba4 800px ->from(UserTable::make(['id' => $form->getKey()])) // \u8bbe\u7f6e\u6e32\u67d3\u7c7b\u5b9e\u4f8b\uff0c\u5e76\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 ->model(Administrator::class, 'id', 'name'); // \u8bbe\u7f6e\u7f16\u8f91\u6570\u636e\u663e\u793a // \u4e0a\u9762\u7684\u4ee3\u7801\u7b49\u540c\u4e8e $form->selectTable($field) ->from(UserTable::make(['id' => $form->getKey()])) // \u8bbe\u7f6e\u6e32\u67d3\u7c7b\u5b9e\u4f8b\uff0c\u5e76\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 ->options(function ($v) { // \u8bbe\u7f6e\u7f16\u8f91\u6570\u636e\u663e\u793a if (! $v) { return []; } return Administrator::find($v)->pluck('name', 'id'); }); \u5b9a\u4e49\u6e32\u67d3\u7c7b\u5982\u4e0b\uff0c\u9700\u8981\u7ee7\u627f Dcat\\Admin\\Grid\\LazyRenderable {tip} \u8fd9\u91cc\u4f7f\u7528\u4e86\u6570\u636e\u8868\u683c\u5f02\u6b65\u52a0\u8f7d\u529f\u80fd\uff0c\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003 \u5f02\u6b65\u52a0\u8f7d <?php namespace App\\Admin\\Renderable; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Grid\\LazyRenderable; use Dcat\\Admin\\Models\\Administrator; class UserTable extends LazyRenderable { public function grid(): Grid { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u7684\u53c2\u6570 $id = $this->id; return Grid::make(Administrator::where('xxx_id', $id), function (Grid $grid) { $grid->column('id'); $grid->column('username'); $grid->column('name'); $grid->column('created_at'); $grid->column('updated_at'); $grid->quickSearch(['id', 'username', 'name']); $grid->paginate(10); $grid->disableActions(); $grid->filter(function (Grid\\Filter $filter) { $filter->like('username')->width(4); $filter->like('name')->width(4); }); }); } } \u6548\u679c","title":"\u8868\u683c\u9009\u62e9\u5668 (selectTable)"},{"location":"2.x/model-form-fields/#_4","text":"$form->selectTable($field) ->from(UserTable::make(['id' => $form->getKey()])) ->options(function ($v) { // \u8bbe\u7f6e\u7f16\u8f91\u6570\u636e\u663e\u793a if (! $v) { return []; } return Administrator::find($v)->pluck('name', 'id'); }) ->pluck('name', 'id'); // \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u663e\u793a\u7684\u5b57\u6bb5\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u9009\u4e2d\u540e\u5c06\u4fdd\u5b58\u5230\u8868\u5355\u7684\u5b57\u6bb5 // \u4e0a\u9762\u7684\u4ee3\u7801\u4e5f\u53ef\u4ee5\u7b80\u5316\u4e3a $form->selectTable($field) ->from(UserTable::make(['id' => $form->getKey()])) ->model(Administrator::class, 'id', 'name'); // \u8bbe\u7f6e\u7f16\u8f91\u6570\u636e\u663e\u793a","title":"\u8bbe\u7f6e\u9009\u4e2d\u540e\u5c06\u4fdd\u5b58\u5230\u8868\u5355\u7684\u5b57\u6bb5\u548c\u663e\u793a\u7684\u5b57\u6bb5"},{"location":"2.x/model-form-fields/#multipleselecttable","text":"\u591a\u9009\u7684\u7528\u6cd5\u4e0e\u4e0a\u8ff0 selectTable \u65b9\u6cd5\u4e00\u81f4 $form->multipleSelectTable($field) ->max(10) // \u6700\u591a\u9009\u62e9 10 \u4e2a\u9009\u9879\uff0c\u4e0d\u4f20\u5219\u4e0d\u9650\u5236 ->from(UserTable::make(['id' => $form->getKey()])) // \u8bbe\u7f6e\u6e32\u67d3\u7c7b\u5b9e\u4f8b\uff0c\u5e76\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 ->model(Administrator::class, 'id', 'name') // \u8bbe\u7f6e\u7f16\u8f91\u6570\u636e\u663e\u793a ->saving(function ($v) { // $v \u662f\u8868\u5355\u63d0\u4ea4\u7684\u5b57\u6bb5\u503c\uff0c\u9ed8\u8ba4\u662f\u6570\u7ec4\u7c7b\u578b\uff0c\u8fd9\u91cc\u9700\u8981\u624b\u52a8\u8f6c\u6362\u4e00\u4e0b // \u4fdd\u5b58\u4e3a\u4ee5 \",\" \u9694\u5f00\u7684\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u662f\u591a\u5bf9\u591a\u5173\u8054\u5173\u7cfb\uff0c\u5219\u4e0d\u9700\u8981\u8f6c\u6362\u3002 return implode(',', $v); });","title":"\u591a\u9009 (multipleSelectTable)"},{"location":"2.x/model-form-fields/#listbox","text":"\u4f7f\u7528\u65b9\u6cd5\u548c multipleSelect \u7c7b\u4f3c\u3002 {tip} \u6ce8\u5165\u8fd9\u4e2a\u5b57\u6bb5\u7684\u6570\u636e\uff08\u4ece\u6570\u636e\u5e93\u67e5\u51fa\u6765\u7684\uff09\u53ef\u4ee5\u662f\u4e00\u4e2a\u4ee5 , \u9694\u5f00\u7684\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u662f json \u5b57\u7b26\u4e32\u6216 array \u6570\u7ec4\u3002 $form->listbox($column[, $label])->options([1 => 'foo', 2 => 'bar', 'val' => 'Option name']);","title":"\u591a\u9009\u76d2 (listbox)"},{"location":"2.x/model-form-fields/#textarea","text":"$form->textarea($column[, $label])->rows(10);","title":"\u957f\u6587\u672c (textarea)"},{"location":"2.x/model-form-fields/#radio","text":"$form->radio($column[, $label])->options(['m' => 'Female', 'f'=> 'Male'])->default('m');","title":"\u5355\u9009 (radio)"},{"location":"2.x/model-form-fields/#checkbox","text":"options() \u65b9\u6cd5\u7528\u6765\u8bbe\u7f6e\u9009\u62e9\u9879: $form->checkbox($column[, $label]) ->options([1 => 'foo', 2 => 'bar', 'val' => 'Option name']) ->saving(function ($value) { // \u8f6c\u5316\u6210json\u5b57\u7b26\u4e32\u4fdd\u5b58\u5230\u6570\u636e\u5e93 return json_encode($value); }); \u542f\u7528\u9009\u4e2d\u5168\u90e8\u529f\u80fd $form->checkbox('column')->canCheckAll();","title":"\u591a\u9009 (checkbox)"},{"location":"2.x/model-form-fields/#autocomplete","text":"\u6b64\u8868\u5355\u53ef\u4ee5\u5728\u586b\u5199\u8868\u5355\u65f6\u8fdb\u884c\u5bf9\u8868\u5355\u503c\u8fdb\u884c\u641c\u7d22\uff0c\u5e76\u628a\u7ed3\u679c\u5c55\u793a\u5728\u4e0b\u62c9\u5217\u8868\u4e2d\uff0c\u7528\u6cd5\u5982\u4e0b $form->autocomplete($column[, $label])->options(['foo', 'bar', ...]); // \u8bbe\u7f6e\u5206\u7ec4\u540d\u79f0 $form->autocomplete($column[, $label])->groups([ [ 'label' => 'group name', 'options' => ['foo', 'bar', ...], ], ]); \u6548\u679c\u5982\u4e0b","title":"autocomplete"},{"location":"2.x/model-form-fields/#api","text":"\u4e5f\u53ef\u4ee5\u4ece\u8fdc\u7a0bAPI\u4e2d\u83b7\u53d6\u6570\u636e // ajax \u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a ajax url, \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a valueField\uff08\u53ef\u9009\uff09, \u7b2c\u4e09\u4e2a\u53c2\u6570\u4e3a groupField\uff08\u53ef\u9009\uff09 $form->autocomplete($column[, $label])->ajax('/countries', 'name', 'region'); \u8fdc\u7a0bAPI \u670d\u52a1\u7aef\u7684\u8bf7\u6c42\u53c2\u6570\u4e3aquery\uff0c\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a class CountryController extends AdminController { public function search() { $countries = Country::when(request('query'), function ($query, $value) { $query->where('name', 'like', \"%{$value}%\"); })->get(); return Admin::json($countries->toArray()); } }","title":"\u4ece\u8fdc\u7a0bAPI\u83b7\u53d6\u6570\u636e"},{"location":"2.x/model-form-fields/#autocomplete_1","text":"\u8be6\u7ec6\u8bbe\u7f6e\u8bf7\u53c2\u8003\uff1a devbridge/jQuery-Autocomplete $js = <<<JS function (suggestion) { alert('You selected: ' + suggestion.value + ', ' + suggestion.data); } JS; $form->autocomplete($column[, $label])->configs([ 'minChars' => 5, 'noCache' => true, 'onSelect' => JavaScript::make($js), ]); configs \u540c\u6837\u4e5f\u652f\u6301\u95ed\u5305\uff1a $form->autocomplete($column[, $label])->configs(function($model, $value){ return [ .... ]; });","title":"\u81ea\u5b9a\u4e49 autocomplete \u7684\u8bbe\u7f6e\uff1a"},{"location":"2.x/model-form-fields/#_5","text":"autocomplete \u7684\u8054\u52a8\u903b\u8f91\u548cselect\u7684\u521a\u597d\u76f8\u53cd\u3002 depends \u9700\u8981\u5199\u5728\u53d7\u5f71\u54cd\u7684\u5b57\u6bb5\uff0c\u4e0d\u9650\u4e0a\u7ea7\u5b57\u6bb5\u7c7b\u578b\uff0c\u4e0a\u7ea7\u5b57\u6bb5\u7684\u503c\u5c06\u540c\u65f6\u4e0a\u4f20\u5230API\u3002 $form->select('region')->options([ 'asia', 'Africa', 'America', 'Europe', ]); $form->autocomplete('country')->ajax('/countries', 'name', 'region'); // \u5c06\u4f1a\u53d1\u51fa /states?query={query}&region={region}&country={country} \u7684\u8bf7\u6c42 $form->autocomplete('addr')->ajax('/states', 'name')->depends(['region', 'country']);","title":"\u8868\u5355\u8054\u52a8"},{"location":"2.x/model-form-fields/#email","text":"$form->email($column[, $label]);","title":"\u90ae\u7bb1 (email)"},{"location":"2.x/model-form-fields/#password","text":"$form->password($column[, $label]);","title":"\u5bc6\u7801 (password)"},{"location":"2.x/model-form-fields/#url","text":"$form->url($column[, $label]);","title":"\u94fe\u63a5 (url)"},{"location":"2.x/model-form-fields/#ip-ip","text":"$form->ip($column[, $label]);","title":"IP\u5730\u5740 (ip)"},{"location":"2.x/model-form-fields/#mobile","text":"$form->mobile($column[, $label])->options(['mask' => '999 9999 9999']);","title":"\u624b\u673a (mobile)"},{"location":"2.x/model-form-fields/#color","text":"$form->color($column[, $label]);","title":"\u989c\u8272\u9009\u62e9\u5668 (color)"},{"location":"2.x/model-form-fields/#time","text":"$form->time($column[, $label]); // \u8bbe\u7f6e\u65f6\u95f4\u683c\u5f0f\uff0c\u66f4\u591a\u683c\u5f0f\u53c2\u8003http://momentjs.com/docs/#/displaying/format/ $form->time($column[, $label])->format('HH:mm:ss');","title":"\u65f6\u95f4 (time)"},{"location":"2.x/model-form-fields/#date","text":"$form->date($column[, $label]); // \u8bbe\u7f6e\u65e5\u671f\u683c\u5f0f\uff0c\u66f4\u591a\u683c\u5f0f\u53c2\u8003http://momentjs.com/docs/#/displaying/format/ $form->date($column[, $label])->format('YYYY-MM-DD');","title":"\u65e5\u671f (date)"},{"location":"2.x/model-form-fields/#datetime","text":"$form->datetime($column[, $label]); // \u8bbe\u7f6e\u65e5\u671f\u683c\u5f0f\uff0c\u66f4\u591a\u683c\u5f0f\u53c2\u8003http://momentjs.com/docs/#/displaying/format/ $form->datetime($column[, $label])->format('YYYY-MM-DD HH:mm:ss');","title":"\u65f6\u95f4\u65e5\u671f (datetime)"},{"location":"2.x/model-form-fields/#timerange","text":"$startTime \u3001 $endTime \u4e3a\u5f00\u59cb\u548c\u7ed3\u675f\u65f6\u95f4\u5b57\u6bb5: $form->timeRange($startTime, $endTime, 'Time Range');","title":"\u65f6\u95f4\u8303\u56f4 (timeRange)"},{"location":"2.x/model-form-fields/#daterange","text":"$startDate \u3001 $endDate \u4e3a\u5f00\u59cb\u548c\u7ed3\u675f\u65e5\u671f\u5b57\u6bb5: $form->dateRange($startDate, $endDate, 'Date Range');","title":"\u65e5\u671f\u8303\u56f4 (dateRange)"},{"location":"2.x/model-form-fields/#datetimerange","text":"$startDateTime \u3001 $endDateTime \u4e3a\u5f00\u59cb\u548c\u7ed3\u675f\u65f6\u95f4\u65e5\u671f: $form->datetimeRange($startDateTime, $endDateTime, 'DateTime Range');","title":"\u65f6\u95f4\u65e5\u671f\u8303\u56f4 (datetimeRange)"},{"location":"2.x/model-form-fields/#range","text":"$form->range('start_column', 'end_column', '\u8303\u56f4');","title":"\u8303\u56f4 (range)"},{"location":"2.x/model-form-fields/#file","text":"\u4f7f\u7528\u6587\u4ef6\u4e0a\u4f20\u529f\u80fd\u4e4b\u524d\u9700\u8981\u5148\u5b8c\u6210\u4e0a\u4f20\u914d\u7f6e\u3002\u6587\u4ef6\u4e0a\u4f20\u914d\u7f6e\u4ee5\u53ca\u5185\u7f6e\u65b9\u6cd5\u8bf7\u53c2\u8003: \u56fe\u7247/\u6587\u4ef6\u4e0a\u4f20 . \u6587\u4ef6\u4e0a\u4f20\u76ee\u5f55\u5728\u6587\u4ef6 config/admin.php \u4e2d\u7684 upload.file \u4e2d\u914d\u7f6e\uff0c\u5982\u679c\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u9700\u8981\u521b\u5efa\u8be5\u76ee\u5f55\u5e76\u5f00\u653e\u5199\u6743\u9650\u3002 {tip} \u6587\u4ef6\u6216\u56fe\u7247\u4e0a\u4f20\u8868\u5355\u5b57\u6bb5\u8bf7\u4e0d\u8981\u5728\u6a21\u578b\u4e2d\u8bbe\u7f6e \u8bbf\u95ee\u5668 \u548c \u4fee\u6539\u5668 \u62fc\u63a5\u57df\u540d\uff0c\u5982\u6709\u76f8\u5173\u9700\u6c42\u53ef\u53c2\u8003 \u6587\u4ef6/\u56fe\u7247\u57df\u540d\u62fc\u63a5 \u3002 $form->file($column[, $label]); // \u4fee\u6539\u6587\u4ef6\u4e0a\u4f20\u8def\u5f84\u548c\u6587\u4ef6\u540d $form->file($column[, $label])->move($dir, $name); // \u5e76\u8bbe\u7f6e\u4e0a\u4f20\u6587\u4ef6\u7c7b\u578b $form->file($column[, $label])->rules('mimes:doc,docx,xlsx'); // \u6dfb\u52a0\u6587\u4ef6\u5220\u9664\u6309\u94ae $form->file($column[, $label])->removable();","title":"\u6587\u4ef6\u4e0a\u4f20 (file)"},{"location":"2.x/model-form-fields/#image","text":"\u4f7f\u7528\u56fe\u7247\u4e0a\u4f20\u529f\u80fd\u4e4b\u524d\u9700\u8981\u5148\u5b8c\u6210\u4e0a\u4f20\u914d\u7f6e\u3002\u56fe\u7247\u4e0a\u4f20\u914d\u7f6e\u4ee5\u53ca\u5185\u7f6e\u65b9\u6cd5\u8bf7\u53c2\u8003: \u56fe\u7247/\u6587\u4ef6\u4e0a\u4f20 . \u56fe\u7247\u4e0a\u4f20\u76ee\u5f55\u5728\u6587\u4ef6 config/admin.php \u4e2d\u7684 upload.image \u4e2d\u914d\u7f6e\uff0c\u5982\u679c\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u9700\u8981\u521b\u5efa\u8be5\u76ee\u5f55\u5e76\u5f00\u653e\u5199\u6743\u9650\u3002 \u53ef\u4ee5\u4f7f\u7528\u538b\u7f29\u3001\u88c1\u5207\u3001\u6dfb\u52a0\u6c34\u5370\u7b49\u5404\u79cd\u65b9\u6cd5,\u9700\u8981\u5148\u5b89\u88c5 intervention/image \u3002 \u66f4\u591a\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003[ Intervention ]\uff1a {tip} \u6587\u4ef6\u6216\u56fe\u7247\u4e0a\u4f20\u8868\u5355\u5b57\u6bb5\u8bf7\u4e0d\u8981\u5728\u6a21\u578b\u4e2d\u8bbe\u7f6e \u8bbf\u95ee\u5668 \u548c \u4fee\u6539\u5668 \u62fc\u63a5\u57df\u540d\uff0c\u5982\u6709\u76f8\u5173\u9700\u6c42\u53ef\u53c2\u8003 \u6587\u4ef6/\u56fe\u7247\u57df\u540d\u62fc\u63a5 \u3002 $form->image($column[, $label]); // \u4fee\u6539\u56fe\u7247\u4e0a\u4f20\u8def\u5f84\u548c\u6587\u4ef6\u540d $form->image($column[, $label])->move($dir, $name); // \u526a\u88c1\u56fe\u7247 $form->image($column[, $label])->crop(int $width, int $height, [int $x, int $y]); // \u52a0\u6c34\u5370 $form->image($column[, $label])->insert($watermark, 'center');","title":"\u56fe\u7247\u4e0a\u4f20 (image)"},{"location":"2.x/model-form-fields/#multipleimagemultiplefile","text":"\u591a\u56fe\u7247\u4e0a\u4f20\u8868\u5355\u7ee7\u627f\u81ea\u5355\u56fe\u4e0a\u4f20\u8868\u5355\uff0c\u591a\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u7ee7\u627f\u81ea\u5355\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u3002 {tip} \u6ce8\u5165\u8fd9\u4e2a\u5b57\u6bb5\u7684\u6570\u636e\uff08\u4ece\u6570\u636e\u5e93\u67e5\u51fa\u6765\u7684\uff09\u53ef\u4ee5\u662f\u4e00\u4e2a\u4ee5 , \u9694\u5f00\u7684\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u662f json \u5b57\u7b26\u4e32\u6216 array \u6570\u7ec4\u3002 // \u591a\u56fe $form->multipleImage($column[, $label]); // \u9650\u5236\u6700\u5927\u4e0a\u4f20\u6570\u91cf $form->multipleImage($column[, $label])->limit(3); // \u591a\u6587\u4ef6 $form->multipleFile($column[, $label]); // \u9650\u5236\u6700\u5927\u4e0a\u4f20\u6570\u91cf $form->multipleFile($column[, $label])->limit(5); \u591a\u56fe/\u6587\u4ef6\u4e0a\u4f20\u7684\u65f6\u5019\u63d0\u4ea4\u7684\u6570\u636e\u662f\u4e00\u4e2a array \u6570\u7ec4\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u628a\u6570\u636e\u5728\u4fdd\u5b58\u8fdb\u6570\u636e\u5e93\u4e4b\u524d\u6539\u4e3a\u4f60\u60f3\u8981\u7684\u683c\u5f0f\uff1a // \u8f6c\u5316\u4e3ajson\u683c\u5f0f\u4fdd\u5b58\u5230\u6570\u636e\u5e93 $form->multipleFile($column[, $label])->saving(function ($paths) { // \u53ef\u4ee5\u8f6c\u5316\u4e3a\u7531 , \u9694\u5f00\u7684\u5b57\u7b26\u4e32\u683c\u5f0f // return implode(',', $paths); // \u4e5f\u53ef\u4ee5\u8f6c\u5316\u4e3ajson return json_encode($paths); }); \u5f53\u7136\uff0c\u5982\u679c\u4f60\u60f3\u4fdd\u5b58\u4e3a\u5176\u4ed6\u4efb\u610f\u683c\u5f0f\u90fd\u662f\u53ef\u4ee5\u7684\uff0c\u53ea\u662f\u5982\u679c\u8981\u4fdd\u5b58\u5176\u4ed6\u683c\u5f0f\uff0c\u9700\u8981\u901a\u8fc7\u7528 customFormat \u65b9\u6cd5\u628a\u6570\u636e\u8f6c\u5316\u4e3a\u4e00\u7ef4\u6570\u7ec4\u5c55\u793a\uff0c\u5982\uff1a $form->multipleFile($column[, $label]) ->customFormat(function ($paths) { return collect($paths)->map(function ($value) { return explode('|', $value); })->flatten()->toArray(); }) ->saving(function ($paths) { return implode('|', $paths); }); \u542f\u7528\u53ef\u6392\u5e8f\u529f\u80fd $form->multipleImage('images')->sortable();","title":"\u591a\u56fe\u548c\u591a\u6587\u4ef6\u4e0a\u4f20 (multipleImage/multipleFile)"},{"location":"2.x/model-form-fields/#editor","text":"\u7cfb\u7edf\u96c6\u6210\u4e86 TinyMCE \u7f16\u8f91\u5668\u4f5c\u4e3a\u5185\u7f6e\u7f16\u8f91\u5668\u3002","title":"\u5bcc\u6587\u672c\u7f16\u8f91\u5668 (editor)"},{"location":"2.x/model-form-fields/#_6","text":"$form->editor($column[, $label]);","title":"\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/model-form-fields/#_7","text":"\u9ed8\u8ba4\u652f\u6301\u7b80\u4f53\u4e2d\u6587\u548c\u82f1\u6587\u4e24\u79cd\u8bed\u8a00\uff0c\u5982\u9700\u5176\u4ed6\u8bed\u8a00\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8bbe\u7f6e\u8bed\u8a00\u5305\u5730\u5740\u3002 $form->editor('content')->languageUrl(url('TinyMCE/langs/de.js'));","title":"\u8bbe\u7f6e\u8bed\u8a00\u5305"},{"location":"2.x/model-form-fields/#_8","text":"\u5177\u4f53\u914d\u7f6e\u7b49\u7684\u4f7f\u7528\u53ef\u4ee5\u53c2\u8003 \u5b98\u65b9\u6587\u6863 \u6216 \u4e2d\u6587\u6587\u6863 <?php use Dcat\\Admin\\Support\\JavaScript; $form->editor('content')->options([ 'toolbar' => [], 'setup' => JavaScript::make( <<<JS function (editor) { console.log('\u7f16\u8f91\u5668\u521d\u59cb\u5316\u6210\u529f', editor) } JS ), ]);","title":"\u7f16\u8f91\u5668\u914d\u7f6e"},{"location":"2.x/model-form-fields/#_9","text":"\u9ed8\u8ba4\u503c\u4e3a 400 $form->editor('content')->height('600');","title":"\u8bbe\u7f6e\u9ad8\u5ea6"},{"location":"2.x/model-form-fields/#_10","text":"$form->editor('content')->readOnly(); // \u6216 $form->editor('content')->disable();","title":"\u53ea\u8bfb"},{"location":"2.x/model-form-fields/#_11","text":"\u8bbe\u7f6e\u56fe\u7247\u4e0a\u4f20 disk \u914d\u7f6e\uff0c\u9ed8\u8ba4\u4e0a\u4f20\u5230 admin.upload.disk \u6307\u5b9a\u7684\u914d\u7f6e // \u4e0a\u4f20\u5230oss $form->editor('content')->disk('oss'); \u8bbe\u7f6e\u56fe\u7247\u4e0a\u4f20\u76ee\u5f55\uff0c\u9ed8\u8ba4\u4e3a tinymce/images $form->editor('content')->imageDirectory('editor/images'); \u81ea\u5b9a\u4e49\u4e0a\u4f20\u63a5\u53e3\uff0c\u63a5\u53e3\u8fd4\u56de\u683c\u5f0f\u9700\u8981\u662f {\"location\": \"\u56fe\u7247url\"} $form->editor('content')->imageUrl('editor/upload-image');","title":"\u56fe\u7247\u4e0a\u4f20"},{"location":"2.x/model-form-fields/#_12","text":"\u5982\u679c\u4f60\u9700\u8981\u5bf9\u7f16\u8f91\u5668\u8fdb\u884c\u5168\u5c40\u8bbe\u7f6e\uff0c\u53ef\u4ee5\u5728 app\\Admin\\bootstrap.php \u52a0\u4e0a\u4ee5\u4e0b\u4ee3\u7801 <?php use Dcat\\Admin\\Form\\Field\\Editor; Editor::resolving(function (Editor $editor) { // \u8bbe\u7f6e\u9ed8\u8ba4\u914d\u7f6e $editor->options([...]); // \u8bbe\u7f6e\u7f16\u8f91\u5668\u56fe\u7247\u9ed8\u8ba4\u4e0a\u4f20\u5230\u4e03\u725b\u4e91 $editor->disk('qiniu'); });","title":"\u5168\u5c40\u8bbe\u7f6e"},{"location":"2.x/model-form-fields/#markdown-markdown","text":"\u7cfb\u7edf\u96c6\u6210\u4e86 editor-md \u7f16\u8f91\u5668\u4f5c\u4e3a\u5185\u7f6eMarkdown\u7f16\u8f91\u5668\u3002","title":"Markdown\u7f16\u8f91\u5668 (markdown)"},{"location":"2.x/model-form-fields/#_13","text":"$form->markdown($column[, $label]);","title":"\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/model-form-fields/#_14","text":"\u9ed8\u8ba4\u652f\u6301\u7b80\u4f53\u4e2d\u6587\u548c\u82f1\u6587\u4e24\u79cd\u8bed\u8a00\uff0c\u5982\u9700\u5176\u4ed6\u8bed\u8a00\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8bbe\u7f6e\u8bed\u8a00\u5305\u5730\u5740\u3002 $form->markdown('content')->languageUrl(admin_asset('@admin/dcat/plugins/editor-md/languages/zh-tw.js'));","title":"\u8bbe\u7f6e\u8bed\u8a00\u5305"},{"location":"2.x/model-form-fields/#_15","text":"\u5177\u4f53\u914d\u7f6e\u7b49\u7684\u4f7f\u7528\u53ef\u4ee5\u53c2\u8003 \u5b98\u65b9\u6587\u6863 <?php use Dcat\\Admin\\Support\\JavaScript; $form->markdown('content')->options([ 'onpreviewing' => JavaScript::make( <<<JS function() { // console.log(\"onpreviewing =>\", this, this.id, this.settings); // on previewing you can custom css .editormd-preview-active } JS ), ]);","title":"\u7f16\u8f91\u5668\u914d\u7f6e"},{"location":"2.x/model-form-fields/#_16","text":"\u9ed8\u8ba4\u503c\u4e3a 500 $form->markdown('content')->height('600');","title":"\u8bbe\u7f6e\u9ad8\u5ea6"},{"location":"2.x/model-form-fields/#_17","text":"$form->markdown('content')->readOnly(); // \u6216 $form->markdown('content')->disable();","title":"\u53ea\u8bfb"},{"location":"2.x/model-form-fields/#_18","text":"\u8bbe\u7f6e\u56fe\u7247\u4e0a\u4f20 disk \u914d\u7f6e\uff0c\u9ed8\u8ba4\u4e0a\u4f20\u5230 admin.upload.disk \u6307\u5b9a\u7684\u914d\u7f6e // \u4e0a\u4f20\u5230oss $form->markdown('content')->disk('oss'); \u8bbe\u7f6e\u56fe\u7247\u4e0a\u4f20\u76ee\u5f55\uff0c\u9ed8\u8ba4\u4e3a markdown/images $form->markdown('content')->imageDirectory('markdown/images'); \u81ea\u5b9a\u4e49\u4e0a\u4f20\u63a5\u53e3\uff0c\u63a5\u53e3\u8fd4\u56de\u683c\u5f0f\u9700\u8981\u662f {\"success\": 1, \"url\": \"\u56fe\u7247url\"} $form->markdown('content')->imageUrl('markdown/upload-image');","title":"\u56fe\u7247\u4e0a\u4f20"},{"location":"2.x/model-form-fields/#_19","text":"\u5982\u679c\u4f60\u9700\u8981\u5bf9\u7f16\u8f91\u5668\u8fdb\u884c\u5168\u5c40\u8bbe\u7f6e\uff0c\u53ef\u4ee5\u5728 app\\Admin\\bootstrap.php \u52a0\u4e0a\u4ee5\u4e0b\u4ee3\u7801 <?php use Dcat\\Admin\\Form\\Field\\Markdown; Markdown::resolving(function (Markdown $markdown) { // \u8bbe\u7f6e\u9ed8\u8ba4\u914d\u7f6e $markdown->options([...]); // \u8bbe\u7f6e\u7f16\u8f91\u5668\u56fe\u7247\u9ed8\u8ba4\u4e0a\u4f20\u5230\u4e03\u725b\u4e91 $markdown->disk('qiniu'); });","title":"\u5168\u5c40\u8bbe\u7f6e"},{"location":"2.x/model-form-fields/#switch","text":"\u4f7f\u7528 $form->switch($column[, $label]); \u5f00\u5173\u8868\u5355\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u7684\u9ed8\u8ba4\u503c\u4e3a 1 \u548c 0 \uff0c\u5982\u679c\u9700\u8981\u66f4\u6539\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u7684\u503c\uff0c\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528 $form->switch($column[, $label]) ->customFormat(function ($v) { return $v == '\u6253\u5f00' ? 1 : 0; }) ->saving(function ($v) { return $v ? '\u6253\u5f00' : '\u5173\u95ed'; });","title":"\u5f00\u5173 (switch)"},{"location":"2.x/model-form-fields/#map","text":"\u5730\u56fe\u63a7\u4ef6\uff0c\u7528\u6765\u9009\u62e9\u7ecf\u7eac\u5ea6, $latitude , $longitude \u4e3a\u7ecf\u7eac\u5ea6\u5b57\u6bb5\u3002 \u4f7f\u7528\u8fd9\u4e2a\u529f\u80fd\u9700\u8981\u5728 config/admin.php \u6587\u4ef6\u4e2d\u4fee\u6539 map_provider \u7684\u503c\uff08\u76ee\u524d\u652f\u6301\u7684\u5730\u56fe\u4e3a\uff1a\"tencent\", \"google\", \"yandex\"\uff0c\u4e0d\u540c\u5730\u56fe\u9700\u8981\u81ea\u5df1\u7533\u8bf7\u76f8\u5e94\u7684 KEY \u5e76\u5728 .env \u6587\u4ef6\u4e2d\u914d\u7f6e\uff0c\u7136\u540e\u9700\u8981\u5728 app/Admin/bootstrap.php \u4e2d\u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801 Form\\Field\\Map::requireAssets(); \u4f7f\u7528 $form->map($latitude, $longitude, $label);","title":"\u5730\u56fe (map)"},{"location":"2.x/model-form-fields/#slider","text":"\u53ef\u4ee5\u7528\u6765\u6570\u5b57\u7c7b\u578b\u5b57\u6bb5\u7684\u9009\u62e9\uff0c\u6bd4\u5982\u5e74\u9f84\uff1a $form->slider($column[, $label])->options(['max' => 100, 'min' => 1, 'step' => 1, 'postfix' => 'years old']); \u66f4\u591aoptions\u8bf7\u53c2\u8003:https://github.com/IonDen/ion.rangeSlider#settings","title":"\u6ed1\u52a8\u6761 (slider)"},{"location":"2.x/model-form-fields/#display","text":"\u53ea\u663e\u793a\u5b57\u6bb5\uff0c\u4e0d\u505a\u4efb\u4f55\u64cd\u4f5c\uff1a $form->display($column[, $label]); //\u66f4\u590d\u6742\u7684\u663e\u793a $form->display($column[, $label])->with(function ($value) { return \"<img src=\"$value\" />\"; });","title":"\u4ec5\u663e\u793a (display)"},{"location":"2.x/model-form-fields/#currency","text":"$form->currency($column[, $label]); // \u8bbe\u7f6e\u5355\u4f4d\u7b26\u53f7 $form->currency($column[, $label])->symbol('\uffe5');","title":"\u5355\u4f4d\u7b26\u53f7 (currency)"},{"location":"2.x/model-form-fields/#number","text":"$form->number($column[, $label]);","title":"\u6570\u5b57 (number)"},{"location":"2.x/model-form-fields/#rate","text":"$form->rate($column[, $label]);","title":"\u8d39\u7387 (rate)"},{"location":"2.x/model-form-fields/#divider","text":"$form->divider();","title":"\u5206\u5272\u7ebf (divider)"},{"location":"2.x/model-form-fields/#html","text":"\u63d2\u5165html\u5185\u5bb9\uff0c\u53c2\u6570\u53ef\u4ee5\u662f\u5b9e\u73b0\u4e86 Htmlable \u3001 Renderable \u6216\u8005\u5b9e\u73b0\u4e86 __toString() \u65b9\u6cd5\u7684\u7c7b $form->html('\u4f60\u7684html\u5185\u5bb9', $label = '');","title":"\u81ea\u5b9a\u4e49\u5185\u5bb9 (html)"},{"location":"2.x/model-form-fields/#tags","text":"\u63d2\u5165\u9017\u53f7(,)\u9694\u5f00\u7684\u5b57\u7b26\u4e32 tags $form->tags('keywords'); tags \u540c\u6837\u652f\u6301 ManyToMany \u7684\u5173\u7cfb\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a $form->tags('tags', '\u6587\u7ae0\u6807\u7b7e') ->pluck('name', 'id') // name \u4e3a\u9700\u8981\u663e\u793a\u7684 Tag \u6a21\u578b\u7684\u5b57\u6bb5\uff0cid \u4e3a\u4e3b\u952e ->options(Tag::all());// \u4e0b\u62c9\u6846\u9009\u9879 \u6ce8\u610f\uff1a\u5904\u7406 ManyToMany \u5173\u7cfb\u65f6\u5fc5\u987b\u8c03\u7528 pluck \u65b9\u6cd5\uff0c\u6307\u5b9a\u663e\u793a\u7684\u5b57\u6bb5\u540d\u548c\u4e3b\u952e\u3002 \u6b64\u5916 options \u65b9\u6cd5\u4f20\u5165\u4e00\u4e2a Collection \u5bf9\u8c61\u65f6\uff0c options \u4f1a\u81ea\u52a8\u8c03\u7528\u8be5\u5bf9\u8c61\u7684 pluck \u65b9\u6cd5\u8f6c\u4e3a ['\u4e3b\u952e\u540d' => '\u663e\u793a\u5b57\u6bb5\u540d'] \u6570\u7ec4\uff0c\u4f5c\u4e3a\u4e0b\u62c9\u6846\u9009\u9879\u3002\u6216\u8005\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 ['\u4e3b\u952e\u540d' => '\u663e\u793a\u5b57\u6bb5\u540d'] \u8fd9\u6837\u7684\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\u3002 tags \u8fd8\u652f\u6301 saving \u65b9\u6cd5\u7528\u4e8e\u5904\u7406\u63d0\u4ea4\u7684\u6570\u636e\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a $form->tags('tags', '\u6587\u7ae0\u6807\u7b7e') ->pluck('name', 'id') ->options(Tag::all()) ->saving(function ($value) { return $value; }); saving \u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a\u300c\u53c2\u6570\u4e3a tags \u7684\u63d0\u4ea4\u503c\uff0c\u8fd4\u56de\u503c\u4e3a\u4fee\u6539\u540e\u7684 tags \u63d0\u4ea4\u503c\u300d\u7684\u95ed\u5305\uff0c\u53ef\u4ee5\u7528\u4e8e\u5b9e\u73b0\u81ea\u52a8\u521b\u5efa\u65b0 tag \u6216\u5176\u5b83\u529f\u80fd\u3002 \u5982\u679c\u9009\u9879\u8fc7\u591a\uff0c\u53ef\u901a\u8fc7ajax\u65b9\u5f0f\u52a8\u6001\u5206\u9875\u8f7d\u5165\u9009\u9879\uff1a $form->tags('friends')->options(function ($ids) { return User::find((array) $ids)->pluck('name', 'id'); })->ajax('api/users'); API /admin/api/users \u63a5\u53e3\u7684\u4ee3\u7801\uff1a public function users(Request $request) { $q = $request->get('q'); return User::where('name', 'like', \"%$q%\")->paginate(null, ['id', 'name as text']); } \u63a5\u53e3\u8fd4\u56de\u7684\u6570\u636e\u7ed3\u6784\u4e3a { \"total\": 4, \"per_page\": 15, \"current_page\": 1, \"last_page\": 1, \"next_page_url\": null, \"prev_page_url\": null, \"from\": 1, \"to\": 3, \"data\": [ { \"id\": 9, \"text\": \"xxx\" }, { \"id\": 21, \"text\": \"xxx\" }, { \"id\": 42, \"text\": \"xxx\" }, { \"id\": 48, \"text\": \"xxx\" } ] }","title":"\u6807\u7b7e (tags)"},{"location":"2.x/model-form-fields/#icon","text":"\u9009\u62e9 font-awesome \u56fe\u6807 $form->icon('icon');","title":"\u56fe\u6807\u9009\u62e9\u5668 (icon)"},{"location":"2.x/model-form-fields/#tree","text":"\u6811\u5f62\u7ed3\u6784\u8868\u5355 $form->tree('permissions') ->nodes(Model::get()->toArray()) // \u8bbe\u7f6e\u6240\u6709\u8282\u70b9 ->customFormat(function ($v) { // \u683c\u5f0f\u5316\u5916\u90e8\u6ce8\u5165\u7684\u503c if (!$v) return []; return array_column($v, 'id'); }); // \u4fee\u6539\u8282\u70b9\u7684\u5b57\u6bb5\u540d\u79f0 // \u9ed8\u8ba4 \u201cid\u201d \u201cname\u201d \u201cparent_id\u201d $form->tree('permissions') ->nodes($permissionModel->allNodes()) ->setIdColumn('id') ->setTitleColumn('title') ->setParentColumn('parent'); // \u9ed8\u8ba4\u662f\u4e0d\u4fdd\u5b58\u7236\u8282\u70b9\u7684\u503c\u7684\uff0c\u56e0\u4e3a\u4e00\u822c\u6765\u8bf4\u7236\u8282\u70b9\u53ea\u662f\u4f5c\u4e3a\u6807\u9898\u7684\u5f62\u5f0f\u5b58\u5728 // \u7981\u6b62\u8fc7\u6ee4\u7236\u8282\u70b9\u7684\u503c $form->tree('permissions') ->nodes($permissionModel->allNodes()) ->exceptParentNode(false); // \u9ed8\u8ba4\u6536\u7f29\u5b50\u8282\u70b9 $form->tree('permissions') ->nodes($permissionModel->allNodes()) ->expand(false); tree \u8868\u5355\u9ed8\u8ba4\u4e0d\u5141\u8bb8\u5355\u72ec\u9009\u4e2d\u7236\u8282\u70b9\uff0c\u53ef\u4ee5\u901a\u8fc7 treeState(false) \u5f00\u542f\u8fd9\u4e2a\u529f\u80fd $form->tree('xxx') ->treeState(false) # \u5141\u8bb8\u5355\u72ec\u9009\u62e9\u7236\u8282\u70b9 ->setTitleColumn('title') ->nodes(...); \u6548\u679c","title":"\u6811\u5f62\u9009\u62e9\u5668 (tree)"},{"location":"2.x/model-form-fields/#table","text":"\u5982\u679c\u67d0\u4e00\u4e2a\u5b57\u6bb5\u5b58\u50a8\u7684\u662fjson\u683c\u5f0f\u7684\u4e8c\u7ef4\u6570\u7ec4\uff0c\u53ef\u4ee5\u4f7f\u7528table\u8868\u5355\u7ec4\u4ef6\u6765\u5b9e\u73b0\u5feb\u901f\u7684\u7f16\u8f91\uff1a $form->table('extra', function (NestedForm $table) { $table->text('key'); $table->text('value'); $table->text('desc'); }); \u540c\u65f6\u5728\u6a21\u578b\u91cc\u9762\u7ed9\u8fd9\u4e2a\u5b57\u6bb5\u589e\u52a0\u8bbf\u95ee\u5668\u548c\u4fee\u6539\u5668: public function getExtraAttribute($extra) { return array_values(json_decode($extra, true) ?: []); } public function setExtraAttribute($extra) { $this->attributes['extra'] = json_encode(array_values($extra)); } \u8fd9\u4e2a\u7ec4\u4ef6\u7c7b\u4f3c\u4e8ehasMany\u7ec4\u4ef6\uff0c\u4e0d\u8fc7\u662f\u7528\u6765\u5904\u7406\u5355\u4e2a\u5b57\u6bb5\u7684\u60c5\u51b5\uff0c\u9002\u7528\u4e8e\u7b80\u5355\u7684\u4e8c\u7ef4\u6570\u636e\u3002","title":"\u8868\u683c\u8868\u5355 (table)"},{"location":"2.x/model-form-fields/#hasmany","text":"\u4e00\u5bf9\u591a\u5185\u5d4c\u8868\u683c\uff0c\u7528\u4e8e\u5904\u7406\u4e00\u5bf9\u591a\u7684\u5173\u7cfb\uff0c\u4e0b\u9762\u662f\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a \u6709\u4e24\u5f20\u8868\u662f\u4e00\u5bf9\u591a\u5173\u7cfb\uff1a CREATE TABLE `demo_painters` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `username` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `bio` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; CREATE TABLE `demo_paintings` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `painter_id` int(10) unsigned NOT NULL, `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `body` text COLLATE utf8_unicode_ci NOT NULL, `completed_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`), KEY painter_id (`painter_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; \u8868\u7684\u6a21\u578b\u4e3a\uff1a <?php namespace App\\Models\\Demo; use Illuminate\\Database\\Eloquent\\Model; class Painter extends Model { public function paintings() { return $this->hasMany(Painting::class, 'painter_id'); } } <?php namespace App\\Models\\Demo; use Illuminate\\Database\\Eloquent\\Model; class Painting extends Model { protected $fillable = ['title', 'body', 'completed_at']; public function painter() { return $this->belongsTo(Painter::class, 'painter_id'); } } \u6784\u5efa\u8868\u5355\u4ee3\u7801\u5982\u4e0b\uff1a use App\\Models\\Demo\\Painter; // \u8fd9\u91cc\u9700\u8981\u663e\u5f0f\u5730\u6307\u5b9a\u5173\u8054\u5173\u7cfb $builder = Painter::with('paintings'); // \u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f\u6570\u636e\u4ed3\u5e93\uff0c\u5219\u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a\u5173\u8054\u5173\u7cfb // $repository = new Painter(['paintings']); return Form::make($builder, function (Form $form) { $form->display('id', 'ID'); $form->text('username')->rules('required'); $form->textarea('bio')->rules('required'); $form->hasMany('paintings', function (Form\\NestedForm $form) { $form->text('title'); $form->textarea('body'); $form->datetime('completed_at'); }); $form->display('created_at', 'Created At'); $form->display('updated_at', 'Updated At'); // \u4e5f\u53ef\u4ee5\u8bbe\u7f6elabel // $form->hasMany('paintings', '\u753b\u4f5c', function (Form\\NestedForm $form) { // ... // }); }); \u6548\u679c","title":"\u4e00\u5bf9\u591a (hasMany)"},{"location":"2.x/model-form-fields/#table_1","text":"\u5982\u679c\u4f60\u60f3\u8981\u663e\u793a\u8868\u683c\u6a21\u5f0f\uff0c\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528 use Dcat\\Admin\\Support\\Helper; $form->hasMany('paintings', function (Form\\NestedForm $form) { ... })->useTable(); \u6548\u679c","title":"\u8868\u683c\u6a21\u5f0f (table)"},{"location":"2.x/model-form-fields/#embeds","text":"{tip} \u5185\u5d4c\u8868\u5355\u4e0d\u652f\u6301\u56fe\u7247\u548c\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u3002 \u7528\u4e8e\u5904\u7406 mysql \u7684 JSON \u7c7b\u578b\u5b57\u6bb5\u6570\u636e\u6216\u8005 mongodb \u7684 object \u7c7b\u578b\u6570\u636e\uff0c\u4e5f\u53ef\u4ee5\u5c06\u591a\u4e2afield\u7684\u6570\u636e\u503c\u4ee5 JSON \u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u5b58\u50a8\u5728 mysql \u7684\u5b57\u7b26\u4e32\u7c7b\u578b\u5b57\u6bb5\u4e2d \u6bd4\u5982 orders \u8868\u4e2d\u7684 JSON \u6216\u5b57\u7b26\u4e32\u7c7b\u578b\u7684 extra \u5b57\u6bb5\uff0c\u7528\u6765\u5b58\u50a8\u591a\u4e2afield\u7684\u6570\u636e\uff0c\u5148\u5b9a\u4e49model: class Order extends Model { protected $casts = [ 'extra' => 'json', ]; } \u7136\u540e\u5728form\u4e2d\u4f7f\u7528\uff1a $form->embeds('extra', function ($form) { $form->text('extra1')->rules('required'); $form->email('extra2')->rules('required'); $form->mobile('extra3'); $form->datetime('extra4'); $form->dateRange('extra5', 'extra6', '\u8303\u56f4')->rules('required'); }); // \u81ea\u5b9a\u4e49\u6807\u9898 $form->embeds('extra', '\u9644\u52a0\u4fe1\u606f', function ($form) { ... }); \u56de\u8c03\u51fd\u6570\u91cc\u9762\u6784\u5efa\u8868\u5355\u5143\u7d20\u7684\u65b9\u6cd5\u8c03\u7528\u548c\u5916\u9762\u662f\u4e00\u6837\u7684\u3002","title":"\u5185\u5d4c (embeds)"},{"location":"2.x/model-form-init/","text":"\u8868\u5355\u521d\u59cb\u5316 \u901a\u8fc7 Form::resolving \u65b9\u6cd5\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u5728 Dcat\\Admin\\Form \u7c7b\u88ab\u5b9e\u4f8b\u5316\u65f6\u89e6\u53d1\uff1b \u901a\u8fc7 Form::composing \u65b9\u6cd5\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u5728 render() \u65b9\u6cd5\u88ab\u8c03\u7528\u65f6\uff08\u6e32\u67d3\u9875\u9762\u65f6\uff09\u89e6\u53d1\uff1b \u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u8fd9\u4e24\u4e2a\u4e8b\u4ef6\u4e2d\u6539\u53d8 Form \u7684\u4e00\u4e9b\u8bbe\u7f6e\u6216\u884c\u4e3a\uff0c\u6bd4\u5982\u9700\u8981\u7981\u7528\u6389\u67d0\u4e9b\u64cd\u4f5c\uff0c\u53ef\u4ee5\u5728 app/Admin/bootstrap.php \u52a0\u5165\u4e0b\u9762\u7684\u4ee3\u7801\uff1a use Dcat\\Admin\\Form; Form::resolving(function (Form $form) { $form->disableEditingCheck(); $form->disableCreatingCheck(); $form->disableViewCheck(); $form->tools(function (Form\\Tools $tools) { $tools->disableDelete(); $tools->disableView(); $tools->disableList(); }); }); \u8fd9\u6837\u5c31\u4e0d\u7528\u5728\u6bcf\u4e00\u4e2a\u63a7\u5236\u5668\u7684\u4ee3\u7801\u4e2d\u6765\u8bbe\u7f6e\u4e86\u3002 \u5982\u679c\u5168\u5c40\u8bbe\u7f6e\u540e\uff0c\u8981\u5728\u5176\u4e2d\u67d0\u4e00\u4e2a\u8868\u5355\u4e2d\u5f00\u542f\u8bbe\u7f6e\uff0c\u6bd4\u5982\u5f00\u542f\u663e\u793a \u7ee7\u7eed\u7f16\u8f91 \u7684checkbox\uff0c\u5728\u5bf9\u5e94\u7684\u5b9e\u4f8b\u4e0a\u8c03\u7528 $form->disableEditingCheck(false); \u5c31\u53ef\u4ee5\u4e86","title":"\u8868\u5355\u521d\u59cb\u5316"},{"location":"2.x/model-form-init/#_1","text":"\u901a\u8fc7 Form::resolving \u65b9\u6cd5\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u5728 Dcat\\Admin\\Form \u7c7b\u88ab\u5b9e\u4f8b\u5316\u65f6\u89e6\u53d1\uff1b \u901a\u8fc7 Form::composing \u65b9\u6cd5\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u5728 render() \u65b9\u6cd5\u88ab\u8c03\u7528\u65f6\uff08\u6e32\u67d3\u9875\u9762\u65f6\uff09\u89e6\u53d1\uff1b \u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u8fd9\u4e24\u4e2a\u4e8b\u4ef6\u4e2d\u6539\u53d8 Form \u7684\u4e00\u4e9b\u8bbe\u7f6e\u6216\u884c\u4e3a\uff0c\u6bd4\u5982\u9700\u8981\u7981\u7528\u6389\u67d0\u4e9b\u64cd\u4f5c\uff0c\u53ef\u4ee5\u5728 app/Admin/bootstrap.php \u52a0\u5165\u4e0b\u9762\u7684\u4ee3\u7801\uff1a use Dcat\\Admin\\Form; Form::resolving(function (Form $form) { $form->disableEditingCheck(); $form->disableCreatingCheck(); $form->disableViewCheck(); $form->tools(function (Form\\Tools $tools) { $tools->disableDelete(); $tools->disableView(); $tools->disableList(); }); }); \u8fd9\u6837\u5c31\u4e0d\u7528\u5728\u6bcf\u4e00\u4e2a\u63a7\u5236\u5668\u7684\u4ee3\u7801\u4e2d\u6765\u8bbe\u7f6e\u4e86\u3002 \u5982\u679c\u5168\u5c40\u8bbe\u7f6e\u540e\uff0c\u8981\u5728\u5176\u4e2d\u67d0\u4e00\u4e2a\u8868\u5355\u4e2d\u5f00\u542f\u8bbe\u7f6e\uff0c\u6bd4\u5982\u5f00\u542f\u663e\u793a \u7ee7\u7eed\u7f16\u8f91 \u7684checkbox\uff0c\u5728\u5bf9\u5e94\u7684\u5b9e\u4f8b\u4e0a\u8c03\u7528 $form->disableEditingCheck(false); \u5c31\u53ef\u4ee5\u4e86","title":"\u8868\u5355\u521d\u59cb\u5316"},{"location":"2.x/model-form-layout/","text":"\u8868\u5355\u5e03\u5c40 \u591a\u5217\u5e03\u5c40 (column) \u7c7b\u4f3c\u4e8e\u4e0a\u56fe\u7684\u5de6\u53f3\u4e24\u5217\u5e03\u5c40\u65b9\u5f0f\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u4ee3\u7801\u6765\u5b9e\u73b0 // \u7b2c\u4e00\u5217\u5360\u636e1/2\u7684\u9875\u9762\u5bbd\u5ea6 $form->column(6, function (Form $form) { $form->text('name')->required(); $form->date('born')->required(); $form->select('education')->options([...])->required(); $form->text('nation')->required(); $form->text('native')->required(); $form->text('job')->required(); $form->text('code')->required(); $form->text('phone')->required(); $form->text('work')->required(); $form->text('census')->required(); }); // \u7b2c\u4e8c\u5217\u5360\u636e1/2\u7684\u9875\u9762\u5bbd\u5ea6 $form->column(6, function (Form $form) { $form->image('avatar'); $form->decimal('wages'); $form->decimal('fund'); $form->decimal('pension'); $form->decimal('fee'); $form->decimal('business'); $form->decimal('other'); $form->text('area')->default(0); $form->textarea('illness'); $form->textarea('comment'); }); // \u8c03\u6574\u6240\u6709\u8868\u5355\u7684\u5bbd\u5ea6 $form->width(9, 2); \u4ee5\u4e0a\u5e03\u5c40\u529f\u80fd\u4f7f\u7528\u4e86 bootstrap \u7684\u6805\u683c\u5e03\u5c40\u7cfb\u7edf\uff0c\u6240\u6709\u5217\u7684\u5bbd\u5ea6\u603b\u548c\u4e0d\u5f97\u8d85\u51fa 12 \uff0c\u5e76\u4e14\u4e5f\u652f\u6301\u5728 hasMany \u548c array \u8868\u5355\u4e2d\u4f7f\u7528 $form->hasMany('jobs', function ($form) { $form->column(6, function (Form $form) { $form->text('name')->required(); $form->date('born')->required(); }); $form->column(6, function (Form $form) { $form->image('avatar'); $form->decimal('wages'); }); }); \u591a\u884c\u5e03\u5c40 (row) \u4f7f\u7528 $form->row(function (Form\\Row $form) { $form->width(4)->text('username')->required(); $form->width(3)->text('title'); ... }); $form->row(function (Form\\Row $form) { ... }); ... \u6548\u679c \u5e76\u4e14\u4e5f\u652f\u6301\u5728 hasMany \u548c array \u8868\u5355\u4e2d\u4f7f\u7528 $form->hasMany('jobs', function ($form) { $form->row(function (Form\\Row $form) { ... }); $form->row(function (Form\\Row $form) { ... }); }); \u9009\u9879\u5361\u8868\u5355 (tab) \u5982\u679c\u8868\u5355\u5143\u7d20\u592a\u591a,\u4f1a\u5bfc\u81f4\u8868\u5355\u9875\u9762\u592a\u957f, \u8fd9\u79cd\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528 tab \u65b9\u6cd5\u6765\u5206\u9694\u8868\u5355: $form->tab('Basic info', function (Form $form) { $form->text('username'); $form->email('email'); })->tab('Profile', function (Form $form) { $form->image('avatar'); $form->text('address'); $form->mobile('phone'); })->tab('Jobs', function (Form $form) { $form->hasMany('jobs', function ($form) { $form->text('company'); $form->date('start_date'); $form->date('end_date'); }); }) \u540c\u65f6\uff0c tab \u5e03\u5c40\u4e2d\u4e5f\u5141\u8bb8\u5d4c\u5957\u4f7f\u7528 column \u548c row \u5e03\u5c40 $form->tab('Basic info', function (Form $form) { $form->column(6, function (Form\\BlockForm $form) { $form->display('id'); $form->text('name'); }); $form->column(6, function (Form\\BlockForm $form) { $form->text('username'); }); }) \u8bbe\u7f6e\u9ed8\u8ba4\u663e\u793a\u7684 Tab // \u9ed8\u8ba4\u663e\u793a\u6807\u9898\u4e3a \u6807\u98982 \u7684 Tab $form->getTab()->active('\u6807\u98982'); // \u4e5f\u53ef\u4ee5\u6307\u5b9a\u504f\u79fb\u91cf $form->getTab()->activeByIndex(1); $form->tab('\u6807\u98981', function ($form) { ... }); $form->tab('\u6807\u98982', function ($form) { ... }); Fieldset\u5e03\u5c40 $form->fieldset('\u5206\u7ec4', function (Form $form) { $form->text('company'); $form->date('start_date'); $form->date('end_date'); }); \u5982\u679c\u60f3\u8981\u9ed8\u8ba4\u6536\u8d77 $form->fieldset('\u5206\u7ec4', function (Form $form) { ... })->collapsed(); \u6548\u679c \u5206\u5757\u5e03\u5c40 (block) \u5982\u679c\u4f60\u7684\u8868\u5355\u4e2d\u5b57\u6bb5\u975e\u5e38\u591a\uff0c\u90a3\u4e48\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8ba9\u4f60\u7684\u8868\u5355\u5206\u5757\u5e03\u5c40\uff0c\u5e76\u4e14\u5141\u8bb8\u5d4c\u5957\u4f7f\u7528 column \u548c row \u5e03\u5c40 $form->block(8, function (Form\\BlockForm $form) { // \u8bbe\u7f6e\u6807\u9898 $form->title('\u57fa\u672c\u8bbe\u7f6e'); // \u663e\u793a\u5e95\u90e8\u63d0\u4ea4\u6309\u94ae $form->showFooter(); // \u8bbe\u7f6e\u5b57\u6bb5\u5bbd\u5ea6 $form->width(9, 2); $form->column(6, function (Form\\BlockForm $form) { $form->display('id'); $form->text('name'); $form->email('email'); $form->image('avatar'); $form->password('password'); }); $form->column(6, function (Form\\BlockForm $form) { $form->text('username'); $form->email('mobile'); $form->textarea('description'); }); }); $form->block(4, function (Form\\BlockForm $form) { $form->title('\u5206\u57572'); $form->text('nickname'); $form->number('age'); $form->radio('status')->options(['1' => '\u9ed8\u8ba4', 2 => '\u51bb\u7ed3'])->default(1); $form->next(function (Form\\BlockForm $form) { $form->title('\u5206\u57573'); $form->date('birthday'); $form->date('created_at'); }); }); \u6548\u679c","title":"\u8868\u5355\u5e03\u5c40"},{"location":"2.x/model-form-layout/#_1","text":"","title":"\u8868\u5355\u5e03\u5c40"},{"location":"2.x/model-form-layout/#column","text":"\u7c7b\u4f3c\u4e8e\u4e0a\u56fe\u7684\u5de6\u53f3\u4e24\u5217\u5e03\u5c40\u65b9\u5f0f\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u4ee3\u7801\u6765\u5b9e\u73b0 // \u7b2c\u4e00\u5217\u5360\u636e1/2\u7684\u9875\u9762\u5bbd\u5ea6 $form->column(6, function (Form $form) { $form->text('name')->required(); $form->date('born')->required(); $form->select('education')->options([...])->required(); $form->text('nation')->required(); $form->text('native')->required(); $form->text('job')->required(); $form->text('code')->required(); $form->text('phone')->required(); $form->text('work')->required(); $form->text('census')->required(); }); // \u7b2c\u4e8c\u5217\u5360\u636e1/2\u7684\u9875\u9762\u5bbd\u5ea6 $form->column(6, function (Form $form) { $form->image('avatar'); $form->decimal('wages'); $form->decimal('fund'); $form->decimal('pension'); $form->decimal('fee'); $form->decimal('business'); $form->decimal('other'); $form->text('area')->default(0); $form->textarea('illness'); $form->textarea('comment'); }); // \u8c03\u6574\u6240\u6709\u8868\u5355\u7684\u5bbd\u5ea6 $form->width(9, 2); \u4ee5\u4e0a\u5e03\u5c40\u529f\u80fd\u4f7f\u7528\u4e86 bootstrap \u7684\u6805\u683c\u5e03\u5c40\u7cfb\u7edf\uff0c\u6240\u6709\u5217\u7684\u5bbd\u5ea6\u603b\u548c\u4e0d\u5f97\u8d85\u51fa 12 \uff0c\u5e76\u4e14\u4e5f\u652f\u6301\u5728 hasMany \u548c array \u8868\u5355\u4e2d\u4f7f\u7528 $form->hasMany('jobs', function ($form) { $form->column(6, function (Form $form) { $form->text('name')->required(); $form->date('born')->required(); }); $form->column(6, function (Form $form) { $form->image('avatar'); $form->decimal('wages'); }); });","title":"\u591a\u5217\u5e03\u5c40 (column)"},{"location":"2.x/model-form-layout/#row","text":"\u4f7f\u7528 $form->row(function (Form\\Row $form) { $form->width(4)->text('username')->required(); $form->width(3)->text('title'); ... }); $form->row(function (Form\\Row $form) { ... }); ... \u6548\u679c \u5e76\u4e14\u4e5f\u652f\u6301\u5728 hasMany \u548c array \u8868\u5355\u4e2d\u4f7f\u7528 $form->hasMany('jobs', function ($form) { $form->row(function (Form\\Row $form) { ... }); $form->row(function (Form\\Row $form) { ... }); });","title":"\u591a\u884c\u5e03\u5c40 (row)"},{"location":"2.x/model-form-layout/#tab","text":"\u5982\u679c\u8868\u5355\u5143\u7d20\u592a\u591a,\u4f1a\u5bfc\u81f4\u8868\u5355\u9875\u9762\u592a\u957f, \u8fd9\u79cd\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528 tab \u65b9\u6cd5\u6765\u5206\u9694\u8868\u5355: $form->tab('Basic info', function (Form $form) { $form->text('username'); $form->email('email'); })->tab('Profile', function (Form $form) { $form->image('avatar'); $form->text('address'); $form->mobile('phone'); })->tab('Jobs', function (Form $form) { $form->hasMany('jobs', function ($form) { $form->text('company'); $form->date('start_date'); $form->date('end_date'); }); }) \u540c\u65f6\uff0c tab \u5e03\u5c40\u4e2d\u4e5f\u5141\u8bb8\u5d4c\u5957\u4f7f\u7528 column \u548c row \u5e03\u5c40 $form->tab('Basic info', function (Form $form) { $form->column(6, function (Form\\BlockForm $form) { $form->display('id'); $form->text('name'); }); $form->column(6, function (Form\\BlockForm $form) { $form->text('username'); }); }) \u8bbe\u7f6e\u9ed8\u8ba4\u663e\u793a\u7684 Tab // \u9ed8\u8ba4\u663e\u793a\u6807\u9898\u4e3a \u6807\u98982 \u7684 Tab $form->getTab()->active('\u6807\u98982'); // \u4e5f\u53ef\u4ee5\u6307\u5b9a\u504f\u79fb\u91cf $form->getTab()->activeByIndex(1); $form->tab('\u6807\u98981', function ($form) { ... }); $form->tab('\u6807\u98982', function ($form) { ... });","title":"\u9009\u9879\u5361\u8868\u5355 (tab)"},{"location":"2.x/model-form-layout/#fieldset","text":"$form->fieldset('\u5206\u7ec4', function (Form $form) { $form->text('company'); $form->date('start_date'); $form->date('end_date'); }); \u5982\u679c\u60f3\u8981\u9ed8\u8ba4\u6536\u8d77 $form->fieldset('\u5206\u7ec4', function (Form $form) { ... })->collapsed(); \u6548\u679c","title":"Fieldset\u5e03\u5c40"},{"location":"2.x/model-form-layout/#block","text":"\u5982\u679c\u4f60\u7684\u8868\u5355\u4e2d\u5b57\u6bb5\u975e\u5e38\u591a\uff0c\u90a3\u4e48\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8ba9\u4f60\u7684\u8868\u5355\u5206\u5757\u5e03\u5c40\uff0c\u5e76\u4e14\u5141\u8bb8\u5d4c\u5957\u4f7f\u7528 column \u548c row \u5e03\u5c40 $form->block(8, function (Form\\BlockForm $form) { // \u8bbe\u7f6e\u6807\u9898 $form->title('\u57fa\u672c\u8bbe\u7f6e'); // \u663e\u793a\u5e95\u90e8\u63d0\u4ea4\u6309\u94ae $form->showFooter(); // \u8bbe\u7f6e\u5b57\u6bb5\u5bbd\u5ea6 $form->width(9, 2); $form->column(6, function (Form\\BlockForm $form) { $form->display('id'); $form->text('name'); $form->email('email'); $form->image('avatar'); $form->password('password'); }); $form->column(6, function (Form\\BlockForm $form) { $form->text('username'); $form->email('mobile'); $form->textarea('description'); }); }); $form->block(4, function (Form\\BlockForm $form) { $form->title('\u5206\u57572'); $form->text('nickname'); $form->number('age'); $form->radio('status')->options(['1' => '\u9ed8\u8ba4', 2 => '\u51bb\u7ed3'])->default(1); $form->next(function (Form\\BlockForm $form) { $form->title('\u5206\u57573'); $form->date('birthday'); $form->date('created_at'); }); }); \u6548\u679c","title":"\u5206\u5757\u5e03\u5c40 (block)"},{"location":"2.x/model-form-modal/","text":"\u8868\u5355\u5f39\u7a97 \u6570\u636e\u8868\u5355\u5f39\u7a97 \u901a\u8fc7 Form::dialog \u65b9\u6cd5\u53ef\u4ee5\u5feb\u901f\u6784\u5efa\u4e00\u4e2a\u57fa\u4e8e\u6570\u636e\u8868\u5355\u7684\u8868\u5355\u5f39\u7a97\uff0c\u4ec5\u9700\u589e\u52a0\u6570\u884c\u4ee3\u7801\u3002 {tip} \u8868\u5355\u5f39\u7a97\u7684\u5b9e\u73b0\u539f\u7406\u662f\uff1a\u901a\u8fc7 create \u548c edit \u9875\u9762\u83b7\u53d6\u6784\u5efa\u597d\u7684\u8868\u5355 HTML \u5b57\u7b26\uff0c\u7136\u540e\u4f7f\u7528\u5f39\u7a97\u63d2\u4ef6\u628a\u8fd9\u90e8\u5206 HTML \u5b57\u7b26\u6e32\u67d3\u51fa\u6765\u3002 \u5982\u679c\u671f\u95f4\u9700\u8981\u52a0\u8f7d\u65b0\u7684 js \u811a\u672c\uff0c\u5219\u4f1a\u7b49\u5f85\u811a\u672c\u52a0\u8f7d\u5b8c\u6bd5\u518d\u6267\u884c\u8868\u5355\u521d\u59cb\u5316 js \u4ee3\u7801\u3002 \u7b80\u5355\u793a\u4f8b \u5f00\u542f\u8868\u5355\u5f39\u7a97 <?php use App\\Http\\Controllers\\Controller; use Dcat\\Admin\\Form; use Dcat\\Admin\\Layout\\Content; class ModalFormController extends Controller { public function index(Content $content) { return $content ->header('Modal Form') ->body($this->build()); } protected function build() { Form::dialog('\u65b0\u589e\u89d2\u8272') ->click('.create-form') // \u7ed1\u5b9a\u70b9\u51fb\u6309\u94ae ->url('auth/roles/create') // \u8868\u5355\u9875\u9762\u94fe\u63a5\uff0c\u6b64\u53c2\u6570\u4f1a\u88ab\u6309\u94ae\u4e2d\u7684 \u201cdata-url\u201d \u5c5e\u6027\u66ff\u6362\u3002\u3002 ->width('700px') // \u6307\u5b9a\u5f39\u7a97\u5bbd\u5ea6\uff0c\u53ef\u586b\u5199\u767e\u5206\u6bd4\uff0c\u9ed8\u8ba4 720px ->height('650px') // \u6307\u5b9a\u5f39\u7a97\u9ad8\u5ea6\uff0c\u53ef\u586b\u5199\u767e\u5206\u6bd4\uff0c\u9ed8\u8ba4 690px ->success('Dcat.reload()'); // \u65b0\u589e\u6210\u529f\u540e\u5237\u65b0\u9875\u9762 Form::dialog('\u7f16\u8f91\u89d2\u8272') ->click('.edit-form') ->success('Dcat.reload()'); // \u7f16\u8f91\u6210\u529f\u540e\u5237\u65b0\u9875\u9762 // \u5f53\u9700\u8981\u5728\u540c\u4e2a\u201cclass\u201d\u7684\u6309\u94ae\u4e2d\u7ed1\u5b9a\u4e0d\u540c\u7684\u94fe\u63a5\u65f6\uff0c\u628a\u94fe\u63a5\u653e\u5230\u6309\u94ae\u7684\u201cdata-url\u201d\u5c5e\u6027\u4e2d\u5373\u53ef $editPage = admin_base_path('auth/roles/1/edit'); return \" <div style='padding:30px 0'> <span class='btn btn-success create-form'> \u65b0\u589e\u8868\u5355\u5f39\u7a97 </span> &nbsp;&nbsp; <span class='btn btn-blue edit-form' data-url='{$editPage}'> \u7f16\u8f91\u8868\u5355\u5f39\u7a97 </span> </div> \"; } } \u8868\u5355\u6784\u5efa\u4ee5\u53ca\u4fdd\u5b58\u6570\u636e <?php use App\\Admin\\Repositories\\Role; use Dcat\\Admin\\Controllers\\HasResourceActions; use Dcat\\Admin\\Form; use Dcat\\Admin\\Layout\\Content; use Dcat\\Admin\\Admin; class RoleController { use HasResourceActions; /** * Edit interface. * * @param mixed $id * @param Content $content * * @return Content */ public function edit($id, Content $content) { return $content ->header(trans('admin.roles')) ->description(trans('admin.edit')) ->body($this->form()->edit($id)); } /** * Create interface. * * @param Content $content * * @return Content */ public function create(Content $content) { return $content ->header(trans('admin.roles')) ->description(trans('admin.create')) ->body($this->form()); } /** * Make a form builder. * * @return Form */ protected function form() { return Form::make(new Role(), function (Form $form) { $form->display('id', 'ID'); $form->text('slug', trans('admin.slug'))->required()->prepareForSave(function ($value) { return $value; }); $form->text('name', trans('admin.name'))->required(); $form->tree('permissions') ->nodes(function () { $permissionModel = config('admin.database.permissions_model'); $permissionModel = new $permissionModel; return $permissionModel->allNodes(); }) ->customFormat(function ($v) { if (!$v) return []; return array_column($v, 'id'); }); $form->display('created_at', trans('admin.created_at')); $form->display('updated_at', trans('admin.updated_at')); }); } } \u6548\u679c \u529f\u80fd\u63a5\u53e3 \u8868\u5355\u5f39\u7a97\u5fc5\u987b\u7ed1\u5b9a\u4e00\u4e2a\u53ef\u70b9\u51fb\u7684\u9875\u9762\u5143\u7d20\uff0c\u901a\u8fc7\u70b9\u51fb\u8fd9\u4e2a\u5143\u7d20\u5f39\u51fa\u5f39\u7a97\u3002 \u8bbe\u7f6e\u5f39\u7a97\u6807\u9898 $modal = Form::dialog('\u6807\u9898'); \u7ed1\u5b9a\u70b9\u51fb\u6309\u94ae \u901a\u8fc7 ModalForm::click \u65b9\u6cd5\u53ef\u4ee5\u7ed1\u5b9a\u70b9\u51fb\u6309\u94ae\uff0c\u7ed1\u5b9a\u540e\u5f53\u70b9\u51fb\u8be5\u6309\u94ae\u65f6\u4f1a\u5f39\u51fa\u5f39\u7a97 Form::dialog('\u6807\u9898') ->click('#click-button'); \u8bbe\u7f6eURL \u5982\u679c\u662f\u521b\u5efa\u7c7b\u578b\u7684\u8868\u5355\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u6cd5\u8bbe\u7f6e\u83b7\u53d6\u8868\u5355\u6a21\u677f\u7684url Form::dialog('\u65b0\u589e\u89d2\u8272') ->click('.create-form') ->url('auth/roles/create'); \u5982\u679c\u662f\u7f16\u8f91\u7c7b\u578b\u7684\u8868\u5355\uff0c\u5219\u9700\u8981\u591a\u4e2aurl\uff0c\u56e0\u4e3a\u70b9\u51fb\u6bcf\u4e2a\u6309\u94ae\u5f39\u51fa\u5f39\u7a97\u7684\u8868\u5355\u5185\u5bb9\u662f\u4e0d\u540c\u7684\uff0c\u6240\u4ee5\u6bcf\u4e2a\u6309\u94ae\u7684\u94fe\u63a5\u4e5f\u4e0d\u540c\u3002 \u8fd9\u4e2a\u65f6\u5019\u901a\u8fc7 ModalForm::url \u65b9\u6cd5\u8bbe\u7f6e\u7684\u4e00\u4e2a\u94fe\u63a5\u5df2\u7ecf\u65e0\u6cd5\u6ee1\u8db3\u9700\u6c42\u4e86\uff0c\u56e0\u800c\u9700\u8981\u5728\u70b9\u51fb\u6309\u94ae\u7684 data-url \u5c5e\u6027\u4e0a\u4fdd\u5b58url\uff1a Form::dialog('\u7f16\u8f91\u89d2\u8272') ->click('.edit-form') ->success('Dcat.reload()'); // \u7f16\u8f91\u6210\u529f\u540e\u5237\u65b0\u9875\u9762 // \u5f53\u9700\u8981\u5728\u540c\u4e2a\u201cclass\u201d\u7684\u6309\u94ae\u4e2d\u7ed1\u5b9a\u4e0d\u540c\u7684\u94fe\u63a5\u65f6\uff0c\u628a\u94fe\u63a5\u653e\u5230\u6309\u94ae\u7684\u201cdata-url\u201d\u5c5e\u6027\u4e2d\u5373\u53ef $editPage1 = admin_base_path('auth/roles/1/edit'); $editPage2 = admin_base_path('auth/roles/2/edit'); return \" <div style='padding:30px 0'> <span class='btn btn-blue edit-form' data-url='{$editPage1}'> \u7f16\u8f91\u8868\u5355\u5f39\u7a971 </span> <span class='btn btn-blue edit-form' data-url='{$editPage2}'> \u7f16\u8f91\u8868\u5355\u5f39\u7a972 </span> </div> \"; \u8868\u5355\u4fdd\u5b58\u6210\u529f\u56de\u8c03 \u901a\u8fc7 success \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u8868\u5355\u4fdd\u5b58\u6210\u529f\u4e4b\u540e\u6267\u884c\u7684 js \u4ee3\u7801\uff0c\u5728\u8fd9\u6bb5 js \u4ee3\u7801\u4f5c\u7528\u57df\u5185\u6709\u4e00\u4e2a response \u53d8\u91cf\uff0c\u901a\u8fc7\u8fd9\u4e2a\u53d8\u91cf\u53ef\u4ee5\u83b7\u53d6\u670d\u52a1\u7aef\u8fd4\u56de\u7684 json \u6570\u636e\u3002 Form::dialog('\u7f16\u8f91\u89d2\u8272') ->click('.edit-form') ->success( <<<JS // \u6253\u5370\u670d\u52a1\u7aef\u54cd\u5e94\u6570\u636e console.log(response); // \u63d0\u793a\u6210\u529f\u4fe1\u606f Dcat.success(response.message || '\u4fdd\u5b58\u6210\u529f'); // \u4fdd\u5b58\u6210\u529f\u4e4b\u540e\u5237\u65b0\u9875\u9762 Dcat.reload(); JS ); \u8868\u5355\u4fdd\u5b58\u5931\u8d25\u56de\u8c03 \u901a\u8fc7 error \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u8868\u5355\u4fdd\u5b58\u5931\u8d25\u4e4b\u540e\u6267\u884c\u7684 js \u4ee3\u7801\uff0c\u5728\u8fd9\u6bb5 js \u4ee3\u7801\u4f5c\u7528\u57df\u5185\u6709\u4e00\u4e2a response \u53d8\u91cf\uff0c\u901a\u8fc7\u8fd9\u4e2a\u53d8\u91cf\u53ef\u4ee5\u83b7\u53d6\u670d\u52a1\u7aef\u8fd4\u56de\u7684 json \u6570\u636e\u3002 Form::dialog('\u7f16\u8f91\u89d2\u8272') ->click('.edit-form') ->error( <<<JS // \u6253\u5370\u670d\u52a1\u7aef\u54cd\u5e94\u6570\u636e console.log(response); JS ); \u8868\u5355\u4fdd\u5b58\u4e4b\u540e\u56de\u8c03 \u901a\u8fc7 saved \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u8868\u5355\u4fdd\u5b58\u4e4b\u540e\u6267\u884c\u7684 js \u4ee3\u7801\uff0c\u5728\u8fd9\u6bb5 js \u4ee3\u7801\u4f5c\u7528\u57df\u5185\u6709\u4e24\u4e2a js \u53d8\u91cf\uff1a - success \u503c\u4e3a\u771f\u8868\u793a\u4fdd\u5b58\u6210\u529f\uff0c\u5426\u5219\u5931\u8d25 - response \u670d\u52a1\u7aef\u8fd4\u56de\u7684 json \u6570\u636e Form::dialog('\u7f16\u8f91\u89d2\u8272') ->click('.edit-form') ->saved( <<<JS // \u6253\u5370\u670d\u52a1\u7aef\u54cd\u5e94\u6570\u636e console.log(response); if (success) { console.log('\u4fdd\u5b58\u6210\u529f'); } else { console.log('\u4fdd\u5b58\u5931\u8d25'); } JS ); \u5f3a\u5236\u5237\u65b0 \u6bcf\u6b21\u70b9\u51fb\u6309\u94ae\u90fd\u91cd\u65b0\u4ece\u670d\u52a1\u7aef\u62c9\u53d6\u65b0\u7684\u6a21\u677f\u6570\u636e Form::dialog('\u7f16\u8f91\u89d2\u8272') ->click('.edit-form') ->forceRefresh(); \u8bbe\u7f6e\u5f39\u7a97\u5bbd\u9ad8 Form::dialog('\u7f16\u8f91\u89d2\u8272') ->click('.edit-form') ->dimensions('50%', '400px'); // \u6216 Form::dialog('\u7f16\u8f91\u89d2\u8272') ->click('.edit-form') ->width('50%') ->height('400px'); \u5de5\u5177\u8868\u5355\u5f39\u7a97 \u6570\u636e\u8868\u5355\u7684\u5f39\u7a97\u529f\u80fd\u901a\u5e38\u9700\u8981\u7ed3\u5408\u4e00\u4e2a\u8d44\u6e90\u63a7\u5236\u5668\u53bb\u5b9e\u73b0\uff0c\u76f8\u5bf9\u4f1a\u6bd4\u8f83\u590d\u6742\u4e00\u70b9\uff0c\u6240\u4ee5\u7cfb\u7edf\u4e5f\u5185\u7f6e\u4e86\u53e6\u5916\u4e00\u79cd\u66f4\u7b80\u4fbf\u7684\u8868\u5355\u5f39\u7a97\u529f\u80fd\uff0c\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003 \u5de5\u5177\u8868\u5355-\u5f39\u7a97 \u3002","title":"\u8868\u5355\u5f39\u7a97"},{"location":"2.x/model-form-modal/#_1","text":"","title":"\u8868\u5355\u5f39\u7a97"},{"location":"2.x/model-form-modal/#_2","text":"\u901a\u8fc7 Form::dialog \u65b9\u6cd5\u53ef\u4ee5\u5feb\u901f\u6784\u5efa\u4e00\u4e2a\u57fa\u4e8e\u6570\u636e\u8868\u5355\u7684\u8868\u5355\u5f39\u7a97\uff0c\u4ec5\u9700\u589e\u52a0\u6570\u884c\u4ee3\u7801\u3002 {tip} \u8868\u5355\u5f39\u7a97\u7684\u5b9e\u73b0\u539f\u7406\u662f\uff1a\u901a\u8fc7 create \u548c edit \u9875\u9762\u83b7\u53d6\u6784\u5efa\u597d\u7684\u8868\u5355 HTML \u5b57\u7b26\uff0c\u7136\u540e\u4f7f\u7528\u5f39\u7a97\u63d2\u4ef6\u628a\u8fd9\u90e8\u5206 HTML \u5b57\u7b26\u6e32\u67d3\u51fa\u6765\u3002 \u5982\u679c\u671f\u95f4\u9700\u8981\u52a0\u8f7d\u65b0\u7684 js \u811a\u672c\uff0c\u5219\u4f1a\u7b49\u5f85\u811a\u672c\u52a0\u8f7d\u5b8c\u6bd5\u518d\u6267\u884c\u8868\u5355\u521d\u59cb\u5316 js \u4ee3\u7801\u3002","title":"\u6570\u636e\u8868\u5355\u5f39\u7a97"},{"location":"2.x/model-form-modal/#_3","text":"","title":"\u7b80\u5355\u793a\u4f8b"},{"location":"2.x/model-form-modal/#_4","text":"<?php use App\\Http\\Controllers\\Controller; use Dcat\\Admin\\Form; use Dcat\\Admin\\Layout\\Content; class ModalFormController extends Controller { public function index(Content $content) { return $content ->header('Modal Form') ->body($this->build()); } protected function build() { Form::dialog('\u65b0\u589e\u89d2\u8272') ->click('.create-form') // \u7ed1\u5b9a\u70b9\u51fb\u6309\u94ae ->url('auth/roles/create') // \u8868\u5355\u9875\u9762\u94fe\u63a5\uff0c\u6b64\u53c2\u6570\u4f1a\u88ab\u6309\u94ae\u4e2d\u7684 \u201cdata-url\u201d \u5c5e\u6027\u66ff\u6362\u3002\u3002 ->width('700px') // \u6307\u5b9a\u5f39\u7a97\u5bbd\u5ea6\uff0c\u53ef\u586b\u5199\u767e\u5206\u6bd4\uff0c\u9ed8\u8ba4 720px ->height('650px') // \u6307\u5b9a\u5f39\u7a97\u9ad8\u5ea6\uff0c\u53ef\u586b\u5199\u767e\u5206\u6bd4\uff0c\u9ed8\u8ba4 690px ->success('Dcat.reload()'); // \u65b0\u589e\u6210\u529f\u540e\u5237\u65b0\u9875\u9762 Form::dialog('\u7f16\u8f91\u89d2\u8272') ->click('.edit-form') ->success('Dcat.reload()'); // \u7f16\u8f91\u6210\u529f\u540e\u5237\u65b0\u9875\u9762 // \u5f53\u9700\u8981\u5728\u540c\u4e2a\u201cclass\u201d\u7684\u6309\u94ae\u4e2d\u7ed1\u5b9a\u4e0d\u540c\u7684\u94fe\u63a5\u65f6\uff0c\u628a\u94fe\u63a5\u653e\u5230\u6309\u94ae\u7684\u201cdata-url\u201d\u5c5e\u6027\u4e2d\u5373\u53ef $editPage = admin_base_path('auth/roles/1/edit'); return \" <div style='padding:30px 0'> <span class='btn btn-success create-form'> \u65b0\u589e\u8868\u5355\u5f39\u7a97 </span> &nbsp;&nbsp; <span class='btn btn-blue edit-form' data-url='{$editPage}'> \u7f16\u8f91\u8868\u5355\u5f39\u7a97 </span> </div> \"; } }","title":"\u5f00\u542f\u8868\u5355\u5f39\u7a97"},{"location":"2.x/model-form-modal/#_5","text":"<?php use App\\Admin\\Repositories\\Role; use Dcat\\Admin\\Controllers\\HasResourceActions; use Dcat\\Admin\\Form; use Dcat\\Admin\\Layout\\Content; use Dcat\\Admin\\Admin; class RoleController { use HasResourceActions; /** * Edit interface. * * @param mixed $id * @param Content $content * * @return Content */ public function edit($id, Content $content) { return $content ->header(trans('admin.roles')) ->description(trans('admin.edit')) ->body($this->form()->edit($id)); } /** * Create interface. * * @param Content $content * * @return Content */ public function create(Content $content) { return $content ->header(trans('admin.roles')) ->description(trans('admin.create')) ->body($this->form()); } /** * Make a form builder. * * @return Form */ protected function form() { return Form::make(new Role(), function (Form $form) { $form->display('id', 'ID'); $form->text('slug', trans('admin.slug'))->required()->prepareForSave(function ($value) { return $value; }); $form->text('name', trans('admin.name'))->required(); $form->tree('permissions') ->nodes(function () { $permissionModel = config('admin.database.permissions_model'); $permissionModel = new $permissionModel; return $permissionModel->allNodes(); }) ->customFormat(function ($v) { if (!$v) return []; return array_column($v, 'id'); }); $form->display('created_at', trans('admin.created_at')); $form->display('updated_at', trans('admin.updated_at')); }); } }","title":"\u8868\u5355\u6784\u5efa\u4ee5\u53ca\u4fdd\u5b58\u6570\u636e"},{"location":"2.x/model-form-modal/#_6","text":"","title":"\u6548\u679c"},{"location":"2.x/model-form-modal/#_7","text":"\u8868\u5355\u5f39\u7a97\u5fc5\u987b\u7ed1\u5b9a\u4e00\u4e2a\u53ef\u70b9\u51fb\u7684\u9875\u9762\u5143\u7d20\uff0c\u901a\u8fc7\u70b9\u51fb\u8fd9\u4e2a\u5143\u7d20\u5f39\u51fa\u5f39\u7a97\u3002","title":"\u529f\u80fd\u63a5\u53e3"},{"location":"2.x/model-form-modal/#_8","text":"$modal = Form::dialog('\u6807\u9898');","title":"\u8bbe\u7f6e\u5f39\u7a97\u6807\u9898"},{"location":"2.x/model-form-modal/#_9","text":"\u901a\u8fc7 ModalForm::click \u65b9\u6cd5\u53ef\u4ee5\u7ed1\u5b9a\u70b9\u51fb\u6309\u94ae\uff0c\u7ed1\u5b9a\u540e\u5f53\u70b9\u51fb\u8be5\u6309\u94ae\u65f6\u4f1a\u5f39\u51fa\u5f39\u7a97 Form::dialog('\u6807\u9898') ->click('#click-button');","title":"\u7ed1\u5b9a\u70b9\u51fb\u6309\u94ae"},{"location":"2.x/model-form-modal/#url","text":"\u5982\u679c\u662f\u521b\u5efa\u7c7b\u578b\u7684\u8868\u5355\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u6cd5\u8bbe\u7f6e\u83b7\u53d6\u8868\u5355\u6a21\u677f\u7684url Form::dialog('\u65b0\u589e\u89d2\u8272') ->click('.create-form') ->url('auth/roles/create'); \u5982\u679c\u662f\u7f16\u8f91\u7c7b\u578b\u7684\u8868\u5355\uff0c\u5219\u9700\u8981\u591a\u4e2aurl\uff0c\u56e0\u4e3a\u70b9\u51fb\u6bcf\u4e2a\u6309\u94ae\u5f39\u51fa\u5f39\u7a97\u7684\u8868\u5355\u5185\u5bb9\u662f\u4e0d\u540c\u7684\uff0c\u6240\u4ee5\u6bcf\u4e2a\u6309\u94ae\u7684\u94fe\u63a5\u4e5f\u4e0d\u540c\u3002 \u8fd9\u4e2a\u65f6\u5019\u901a\u8fc7 ModalForm::url \u65b9\u6cd5\u8bbe\u7f6e\u7684\u4e00\u4e2a\u94fe\u63a5\u5df2\u7ecf\u65e0\u6cd5\u6ee1\u8db3\u9700\u6c42\u4e86\uff0c\u56e0\u800c\u9700\u8981\u5728\u70b9\u51fb\u6309\u94ae\u7684 data-url \u5c5e\u6027\u4e0a\u4fdd\u5b58url\uff1a Form::dialog('\u7f16\u8f91\u89d2\u8272') ->click('.edit-form') ->success('Dcat.reload()'); // \u7f16\u8f91\u6210\u529f\u540e\u5237\u65b0\u9875\u9762 // \u5f53\u9700\u8981\u5728\u540c\u4e2a\u201cclass\u201d\u7684\u6309\u94ae\u4e2d\u7ed1\u5b9a\u4e0d\u540c\u7684\u94fe\u63a5\u65f6\uff0c\u628a\u94fe\u63a5\u653e\u5230\u6309\u94ae\u7684\u201cdata-url\u201d\u5c5e\u6027\u4e2d\u5373\u53ef $editPage1 = admin_base_path('auth/roles/1/edit'); $editPage2 = admin_base_path('auth/roles/2/edit'); return \" <div style='padding:30px 0'> <span class='btn btn-blue edit-form' data-url='{$editPage1}'> \u7f16\u8f91\u8868\u5355\u5f39\u7a971 </span> <span class='btn btn-blue edit-form' data-url='{$editPage2}'> \u7f16\u8f91\u8868\u5355\u5f39\u7a972 </span> </div> \";","title":"\u8bbe\u7f6eURL"},{"location":"2.x/model-form-modal/#_10","text":"\u901a\u8fc7 success \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u8868\u5355\u4fdd\u5b58\u6210\u529f\u4e4b\u540e\u6267\u884c\u7684 js \u4ee3\u7801\uff0c\u5728\u8fd9\u6bb5 js \u4ee3\u7801\u4f5c\u7528\u57df\u5185\u6709\u4e00\u4e2a response \u53d8\u91cf\uff0c\u901a\u8fc7\u8fd9\u4e2a\u53d8\u91cf\u53ef\u4ee5\u83b7\u53d6\u670d\u52a1\u7aef\u8fd4\u56de\u7684 json \u6570\u636e\u3002 Form::dialog('\u7f16\u8f91\u89d2\u8272') ->click('.edit-form') ->success( <<<JS // \u6253\u5370\u670d\u52a1\u7aef\u54cd\u5e94\u6570\u636e console.log(response); // \u63d0\u793a\u6210\u529f\u4fe1\u606f Dcat.success(response.message || '\u4fdd\u5b58\u6210\u529f'); // \u4fdd\u5b58\u6210\u529f\u4e4b\u540e\u5237\u65b0\u9875\u9762 Dcat.reload(); JS );","title":"\u8868\u5355\u4fdd\u5b58\u6210\u529f\u56de\u8c03"},{"location":"2.x/model-form-modal/#_11","text":"\u901a\u8fc7 error \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u8868\u5355\u4fdd\u5b58\u5931\u8d25\u4e4b\u540e\u6267\u884c\u7684 js \u4ee3\u7801\uff0c\u5728\u8fd9\u6bb5 js \u4ee3\u7801\u4f5c\u7528\u57df\u5185\u6709\u4e00\u4e2a response \u53d8\u91cf\uff0c\u901a\u8fc7\u8fd9\u4e2a\u53d8\u91cf\u53ef\u4ee5\u83b7\u53d6\u670d\u52a1\u7aef\u8fd4\u56de\u7684 json \u6570\u636e\u3002 Form::dialog('\u7f16\u8f91\u89d2\u8272') ->click('.edit-form') ->error( <<<JS // \u6253\u5370\u670d\u52a1\u7aef\u54cd\u5e94\u6570\u636e console.log(response); JS );","title":"\u8868\u5355\u4fdd\u5b58\u5931\u8d25\u56de\u8c03"},{"location":"2.x/model-form-modal/#_12","text":"\u901a\u8fc7 saved \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u8868\u5355\u4fdd\u5b58\u4e4b\u540e\u6267\u884c\u7684 js \u4ee3\u7801\uff0c\u5728\u8fd9\u6bb5 js \u4ee3\u7801\u4f5c\u7528\u57df\u5185\u6709\u4e24\u4e2a js \u53d8\u91cf\uff1a - success \u503c\u4e3a\u771f\u8868\u793a\u4fdd\u5b58\u6210\u529f\uff0c\u5426\u5219\u5931\u8d25 - response \u670d\u52a1\u7aef\u8fd4\u56de\u7684 json \u6570\u636e Form::dialog('\u7f16\u8f91\u89d2\u8272') ->click('.edit-form') ->saved( <<<JS // \u6253\u5370\u670d\u52a1\u7aef\u54cd\u5e94\u6570\u636e console.log(response); if (success) { console.log('\u4fdd\u5b58\u6210\u529f'); } else { console.log('\u4fdd\u5b58\u5931\u8d25'); } JS );","title":"\u8868\u5355\u4fdd\u5b58\u4e4b\u540e\u56de\u8c03"},{"location":"2.x/model-form-modal/#_13","text":"\u6bcf\u6b21\u70b9\u51fb\u6309\u94ae\u90fd\u91cd\u65b0\u4ece\u670d\u52a1\u7aef\u62c9\u53d6\u65b0\u7684\u6a21\u677f\u6570\u636e Form::dialog('\u7f16\u8f91\u89d2\u8272') ->click('.edit-form') ->forceRefresh();","title":"\u5f3a\u5236\u5237\u65b0"},{"location":"2.x/model-form-modal/#_14","text":"Form::dialog('\u7f16\u8f91\u89d2\u8272') ->click('.edit-form') ->dimensions('50%', '400px'); // \u6216 Form::dialog('\u7f16\u8f91\u89d2\u8272') ->click('.edit-form') ->width('50%') ->height('400px');","title":"\u8bbe\u7f6e\u5f39\u7a97\u5bbd\u9ad8"},{"location":"2.x/model-form-modal/#_15","text":"\u6570\u636e\u8868\u5355\u7684\u5f39\u7a97\u529f\u80fd\u901a\u5e38\u9700\u8981\u7ed3\u5408\u4e00\u4e2a\u8d44\u6e90\u63a7\u5236\u5668\u53bb\u5b9e\u73b0\uff0c\u76f8\u5bf9\u4f1a\u6bd4\u8f83\u590d\u6742\u4e00\u70b9\uff0c\u6240\u4ee5\u7cfb\u7edf\u4e5f\u5185\u7f6e\u4e86\u53e6\u5916\u4e00\u79cd\u66f4\u7b80\u4fbf\u7684\u8868\u5355\u5f39\u7a97\u529f\u80fd\uff0c\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003 \u5de5\u5177\u8868\u5355-\u5f39\u7a97 \u3002","title":"\u5de5\u5177\u8868\u5355\u5f39\u7a97"},{"location":"2.x/model-form-step/","text":"\u5206\u6b65\u8868\u5355 \u5b89\u88c5 \u524d\u5f80 https://github.com/dcat-admin/form-step \u4e0b\u8f7d\u5206\u6b65\u8868\u5355\u6269\u5c55\uff0c\u7136\u540e\u5b89\u88c5\u5e76\u542f\u7528\u3002 {tip} \u6269\u5c55\u5b89\u88c5\u8bf7\u53c2\u8003\u6587\u6863 \u6269\u5c55\u57fa\u672c\u4f7f\u7528 \u7ae0\u8282\u3002 \u7b80\u5355\u793a\u4f8b protected function form() { return Form::make(new Model(), function (Form $form) { $form->title('\u5206\u6b65\u8868\u5355'); $form->action('step'); $form->disableListButton(); $form->multipleSteps() ->remember() // \u8bb0\u4f4f\u8868\u5355\u6b65\u9aa4\uff0c\u9ed8\u8ba4\u4e0d\u5f00\u542f ->width('950px') ->add('\u57fa\u672c\u4fe1\u606f', function ($step) { $info = '<i class=\"fa fa-exclamation-circle\"></i> \u8868\u5355\u5b57\u6bb5\u652f\u6301\u524d\u7aef\u9a8c\u8bc1\u548c\u540e\u7aef\u9a8c\u8bc1\u6df7\u7528\uff0c\u524d\u7aef\u9a8c\u8bc1\u652f\u6301H5\u8868\u5355\u9a8c\u8bc1\u4ee5\u53ca\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u3002'; $step->html(Alert::make($info)->info()); $step->text('name', '\u59d3\u540d')->required()->maxLength(20); // h5 \u8868\u5355\u9a8c\u8bc1 $step->text('age', '\u5e74\u9f84') ->required() ->type('number') ->attribute('max', 150) ->help('\u524d\u7aef\u9a8c\u8bc1'); $step->radio('sex', '\u6027\u522b')->options(['\u672a\u77e5', '\u7537', '\u5973'])->default(0); // \u540e\u7aef\u9a8c\u8bc1 $step->text('birthplace', '\u7c4d\u8d2f') ->rules('required') ->help('\u6f14\u793a\u540e\u7aef\u5b57\u6bb5\u9a8c\u8bc1'); $step->url('homepage', '\u4e2a\u4eba\u4e3b\u9875'); $step->textarea('description', '\u7b80\u4ecb'); }) ->add('\u5174\u8da3\u7231\u597d', function ($step) { $step->tags('hobbies', '\u7231\u597d') ->options(['\u5531', '\u8df3', 'RAP', '\u8e22\u8db3\u7403']) ->required(); $step->text('books', '\u4e66\u7c4d'); $step->text('music', '\u97f3\u4e50'); // \u4e8b\u4ef6 $step->shown(function () { return <<<JS Dcat.info('\u5174\u8da3\u7231\u597d'); console.log('\u5174\u8da3\u7231\u597d', args); JS; }); }) ->add('\u5730\u5740', function ($step) { $step->text('address', '\u8857\u9053\u5730\u5740'); $step->text('post_code', '\u90ae\u653f\u7f16\u7801'); $step->tel('tel', ' \u8054\u7cfb\u7535\u8bdd'); }) ->done(function () use ($form) { $resource = $form->getResource(0); $data = [ 'title' => '\u64cd\u4f5c\u6210\u529f', 'description' => '\u606d\u559c\u60a8\u6210\u4e3a\u7b2c10086\u4f4d\u7528\u6237', 'createUrl' => $resource, 'backUrl' => $resource, ]; return view('admin::form.done-step', $data); }); }); } \u6548\u679c \u8fd0\u884c\u903b\u8f91 \u5206\u6b65\u8868\u5355\u7684\u4f7f\u7528\u5f88\u7b80\u5355\uff0c\u8fd0\u884c\u903b\u8f91\u4e5f\u4e0e\u666e\u901a\u8868\u5355\u6ca1\u6709\u592a\u5927\u533a\u522b\uff0c\u4e0b\u9762\u7b80\u5355\u8bf4\u8bf4\u5206\u6b65\u8868\u5355\u7684\u8fd0\u884c\u903b\u8f91\u3002 {tip} \u5206\u6b65\u8868\u5355\u6ca1\u6709 update \u7684\u6982\u5ff5\u3002 \u53c2\u6570\u9a8c\u8bc1 \u5f53\u7528\u6237\u70b9\u51fb \u4e0b\u4e00\u6b65 \u65f6\uff0c\u4f1a\u5411\u540e\u7aef\u53d1\u8d77\u8bf7\u6c42\u9a8c\u8bc1\u53c2\u6570\u662f\u5426\u6b63\u786e\uff0c\u5982\u679c\u53c2\u6570\u4e0d\u7b26\u5408\u8981\u6c42\u5219\u663e\u793a\u9519\u8bef\u4fe1\u606f\uff0c\u9a8c\u8bc1\u901a\u8fc7\u624d\u4f1a\u8fdb\u5165\u4e0b\u4e00\u4e2a\u6b65\u9aa4\u3002 \u8868\u5355\u63d0\u4ea4 \u5f53\u8fdb\u884c\u5230\u6700\u540e\u4e00\u6b65\u65f6\uff0c\u4f1a\u5bf9\u6240\u6709\u6b65\u9aa4\u7684\u8868\u5355\u53c2\u6570\u4e00\u8d77\u63d0\u4ea4\u5230\u540e\u7aef\u5e76\u8fdb\u884c\u9a8c\u8bc1\uff0c\u5982\u679c\u53c2\u6570\u4e0d\u7b26\u5408\u8981\u6c42\u5219\u663e\u793a\u9519\u8bef\u4fe1\u606f\uff0c\u9a8c\u8bc1\u901a\u8fc7\u5219\u4fdd\u5b58\u8868\u5355\u6570\u636e\uff0c\u4fdd\u5b58\u7684\u65b9\u6cd5\u4e0e\u666e\u901a\u8868\u5355\u5b8c\u5168\u4e00\u81f4\u3002 {tip} \u6700\u540e\u4fdd\u5b58\u8868\u5355\u7684\u65b9\u6cd5\u662f Form::store \u3002 \u5b8c\u6210\u9875\u9762 \u8868\u5355\u4fdd\u5b58\u5b8c\u6210\u4e4b\u540e\u4f1a\u663e\u793a\u5b8c\u6210\u9875\u9762\uff0c\u6b64\u6b65\u9aa4\u65e0\u6cd5\u5ffd\u7565\u3002 \u7f16\u8f91\u8868\u5355 \u5206\u6b65\u8868\u5355\u9ed8\u8ba4\u662f\u6ca1\u6709\u7f16\u8f91\u529f\u80fd\u7684\uff0c\u7528\u6237\u8f93\u5165\u4e86\u957f\u6b65\u9aa4\u7684\u8868\u5355\u4e4b\u540e\u4e0d\u9700\u8981\u518d\u5206\u6b65\u7f16\u8f91\uff0c\u56e0\u6b64\u5982\u679c\u9700\u8981\u5bf9\u5206\u6b65\u8868\u5355\u8fdb\u884c\u7f16\u8f91\uff0c\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u65b9\u5f0f protected function form() { return Form::make(new MyRepository(), function (Form $form) { // \u5224\u65ad\u662f\u5426\u662f\u7f16\u8f91\u9875\u9762 if ($form->isEditing()) { $form->text('age', '\u5e74\u9f84') ->required() ->type('number') ->attribute('max', 150) ->help('\u524d\u7aef\u9a8c\u8bc1') ... return; } $form->multipleSteps() ->remember() ->width('950px') ->add('\u57fa\u672c\u4fe1\u606f', function (Form\\StepForm $step) { $info = '<i class=\"fa fa-exclamation-circle\"></i> \u8868\u5355\u5b57\u6bb5\u652f\u6301\u524d\u7aef\u9a8c\u8bc1\u548c\u540e\u7aef\u9a8c\u8bc1\u6df7\u7528\uff0c\u524d\u7aef\u9a8c\u8bc1\u652f\u6301H5\u8868\u5355\u9a8c\u8bc1\u4ee5\u53ca\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u3002'; $step->html(Alert::make($info)->info()); $step->text('name', '\u59d3\u540d')->required()->maxLength(20); // h5 \u8868\u5355\u9a8c\u8bc1 $step->text('age', '\u5e74\u9f84') ->required() ->type('number') ->attribute('max', 150) ->help('\u524d\u7aef\u9a8c\u8bc1'); $step->radio('sex', '\u6027\u522b')->options(['\u672a\u77e5', '\u7537', '\u5973'])->default(0); ... }) ->add('\u5174\u8da3\u7231\u597d', function (Form\\StepForm $step) { ... }) ->done(function () use ($form) { ... }); }); } \u529f\u80fd\u63a5\u53e3 \u8bbe\u7f6e\u5bb9\u5668\u6700\u5927\u5bbd\u5ea6 \u9ed8\u8ba4 1000px \u3002 {tip} \u6b64\u65b9\u6cd5\u53ea\u9488\u5bf9\u5927\u5c4f\u5e55\uff0c\u624b\u673a\u7aef\u9875\u9762\u4f1a\u81ea\u52a8\u8c03\u8282\u5927\u5c0f\u3002 $form->multipleSteps()->width('900px'); \u8bb0\u4f4f\u8868\u5355\u6570\u636e \u5f00\u542f\u6b64\u529f\u80fd\u4e4b\u540e\uff0c\u5f53\u7528\u6237\u70b9\u51fb \u4e0b\u4e00\u6b65 \u6309\u94ae\u5e76\u4e14\u53c2\u6570\u9a8c\u8bc1\u901a\u8fc7\u540e\uff0c\u4f1a\u628a\u8868\u5355\u6570\u636e\u4fdd\u5b58\u5728 session \u4e2d\uff0c\u76f4\u5230\u6574\u4e2a\u5206\u6b65\u8868\u5355\u4fdd\u5b58\u5b8c\u6bd5\u4e4b\u540e\u624d\u4f1a\u9500\u6bc1\u3002 {tip} \u6b64\u529f\u80fd\u9ed8\u8ba4\u4e0d\u5f00\u542f\u3002 // \u5f00\u542f $form->multipleSteps()->remember(); // \u5173\u95ed $form->multipleSteps()->remember(false); \u8bbe\u7f6e\u5bb9\u5668\u95f4\u8ddd \u9ed8\u8ba4\u503c 30px 18px 30px \u3002 $form->multipleSteps()->padding('30px 18px 30px'); \u76d1\u542c\u9875\u9762\u79bb\u5f00\u4e8b\u4ef6 \u76d1\u542c\u6240\u6709\u6b65\u9aa4\u8868\u5355\u9875\u9762\u79bb\u5f00\u4e8b\u4ef6\uff0c\u53ef\u6dfb\u52a0\u591a\u4e2a\u3002 $form->multipleSteps()->leaving(<<<JS // \u83b7\u53d6\u5f53\u524d\u9875\u9762\u7684\u6b65\u9aa4\u7d22\u5f15 var index = args.index; Dcat.info(\"\u4f60\u5c06\u8981\u79bb\u5f00\u7b2c \" + (index + 1) + \" \u4e2a\u9875\u9762\"); // args\u53d8\u91cf\u662f\u4e00\u4e2ajs\u5bf9\u8c61\uff0c\u5305\u542b\u5f53\u524d\u4e8b\u4ef6\u5bf9\u8c61\u3001\u5f53\u524d\u6b65\u9aa4\u9009\u9879\u3001\u8868\u5355\u5bf9\u8c61\u548c\u8868\u5355\u503c\u7b49\u5b57\u6bb5\u3002 console.log(\"leaving\", args); // \u83b7\u53d6\u5f53\u524d\u4e8b\u4ef6\u5bf9\u8c61 var evt = args.event; // \u83b7\u53d6\u6b65\u9aa4\u8868\u5355\u6807\u9898tap\u5bf9\u8c61 var tab = args.tab; // \u83b7\u53d6\u52a8\u5411\u662f\u524d\u5f80\u4e0a\u4e00\u6b65\u8fd8\u662f\u4e0b\u4e00\u6b65\u9875\u9762\uff1a\"forward\"\u3001\"backward\" var direction = args.direction; // \u83b7\u53d6\u5f53\u524d\u6b65\u9aa4\u7684\u8868\u5355JQ\u5bf9\u8c61 var $form = args.form; // \u83b7\u53d6\u5f53\u524d\u6b65\u9aa4\u9875\u7684\u8868\u5355\u503c var formArray = args.formArray; // \u83b7\u53d6\u6307\u5b9a\u6b65\u9aa4\u7684\u8868\u5355JQ\u5bf9\u8c61 var $firstForm = args.getForm(0); // \u83b7\u53d6\u6307\u5b9a\u6b65\u9aa4\u7684\u8868\u5355\u503c var firstFormArray = args.getFormArray(0); // \u505c\u6b62\u79bb\u5f00\u5f53\u524d\u9875\u9762 return false; JS )->leaving(...); \u76d1\u542c\u9875\u9762\u663e\u793a\u4e8b\u4ef6 \u76d1\u542c\u6240\u6709\u6b65\u9aa4\u8868\u5355\u9875\u9762\u663e\u793a\u4e8b\u4ef6\uff0c\u53ef\u6dfb\u52a0\u591a\u4e2a\u3002 $form->multipleSteps()->shown(<<<JS // \u83b7\u53d6\u5f53\u524d\u9875\u9762\u7684\u6b65\u9aa4\u7d22\u5f15 var index = args.index; Dcat.info(\"\u5f53\u524d\u663e\u793a\u7684\u662f\u7b2c \" + (index + 1) + \" \u4e2a\u9875\u9762\"); // args\u53d8\u91cf\u7684\u503c\u4e0e\u201cleaving\u201d\u4e8b\u4ef6\u7684\u503c\u76f8\u540c\u3002 console.log(\"shown\", args); JS )->shown(...); \u589e\u52a0\u6b65\u9aa4\u8868\u5355 \u6b65\u9aa4\u8868\u5355\u652f\u6301\u6240\u6709\u8868\u5355\u5b57\u6bb5\u3002 use Dcat\\Admin\\Form; $form->multipleSteps()->add('\u6807\u9898', function (Form\\StepForm $step) { $step->text('username')->rules('required'); ... }); \u76d1\u542c\u6b65\u9aa4\u9875\u9762\u79bb\u5f00\u4e8b\u4ef6 \u76d1\u542c\u5f53\u524d\u6b65\u9aa4\u9875\u9762\u79bb\u5f00\u4e8b\u4ef6\uff0c\u652f\u6301\u76d1\u542c\u591a\u6b21\u3002 use Dcat\\Admin\\Form; $form->multipleSteps()->add('\u57fa\u672c\u4fe1\u606f', function (Form\\StepForm $step) { ... $step->leaving(<<<JS Dcat.info(\"\u4f60\u5c06\u8981\u79bb\u5f00 \u57fa\u672c\u4fe1\u606f \u9875\u9762\"); // args\u53d8\u91cf\u662f\u4e00\u4e2ajs\u5bf9\u8c61\uff0c\u5305\u542b\u5f53\u524d\u4e8b\u4ef6\u5bf9\u8c61\u3001\u5f53\u524d\u6b65\u9aa4\u9009\u9879\u3001\u8868\u5355\u5bf9\u8c61\u548c\u8868\u5355\u503c\u7b49\u5b57\u6bb5\u3002 console.log(\"\u79bb\u5f00 \u57fa\u672c\u4fe1\u606f\", args); // \u83b7\u53d6\u5f53\u524d\u4e8b\u4ef6\u5bf9\u8c61 var evt = args.event; // \u83b7\u53d6\u5f53\u524d\u9875\u9762\u7684\u6b65\u9aa4\u7d22\u5f15 var index = args.index; // \u83b7\u53d6\u6b65\u9aa4\u8868\u5355\u6807\u9898tap\u5bf9\u8c61 var tab = args.tab; // \u83b7\u53d6\u52a8\u5411\u662f\u524d\u5f80\u4e0a\u4e00\u6b65\u8fd8\u662f\u4e0b\u4e00\u6b65\u9875\u9762\uff1a\"forward\"\u3001\"backward\" var direction = args.direction; // \u83b7\u53d6\u5f53\u524d\u6b65\u9aa4\u7684\u8868\u5355JQ\u5bf9\u8c61 var $form = args.form; // \u83b7\u53d6\u5f53\u524d\u6b65\u9aa4\u9875\u7684\u8868\u5355\u503c var formArray = args.formArray; // \u83b7\u53d6\u6307\u5b9a\u6b65\u9aa4\u7684\u8868\u5355JQ\u5bf9\u8c61 var $firstForm = args.getForm(0); // \u83b7\u53d6\u6307\u5b9a\u6b65\u9aa4\u7684\u8868\u5355\u503c var firstFormArray = args.getFormArray(0); // \u505c\u6b62\u79bb\u5f00\u5f53\u524d\u9875\u9762 return false; JS ); // \u76d1\u542c\u591a\u6b21 $step->leaving(...); }); \u76d1\u542c\u6b65\u9aa4\u9875\u9762\u663e\u793a\u4e8b\u4ef6 \u76d1\u542c\u5f53\u524d\u6b65\u9aa4\u9875\u9762\u663e\u793a\u4e8b\u4ef6\uff0c\u652f\u6301\u76d1\u542c\u591a\u6b21\u3002 use Dcat\\Admin\\Form; $form->multipleSteps()->add('\u57fa\u672c\u4fe1\u606f', function (Form\\StepForm $step) { ... $step->shown(<<<JS Dcat.info(\"\u5f53\u524d\u6b65\u9aa4\u662f \u57fa\u672c\u4fe1\u606f\"); // args\u53d8\u91cf\u7684\u503c\u4e0e\u201cleaving\u201d\u4e8b\u4ef6\u7684\u503c\u76f8\u540c\u3002 console.log(\"\u663e\u793a \u57fa\u672c\u4fe1\u606f\", args); JS ); // \u76d1\u542c\u591a\u6b21 $step->shown(...); }); \u8bbe\u7f6e\u5b8c\u6210\u9875\u9762 \u5f53\u6240\u6709\u6b65\u9aa4\u90fd\u5b8c\u6210\u4e4b\u540e\u4f1a\u663e\u793a\u5b8c\u6210\u9875\u9762\uff0c\u7cfb\u7edf\u63d0\u4f9b\u4e00\u4e2a\u9ed8\u8ba4\u7684\u5b8c\u6210\u9875\u9762\uff0c\u5f00\u53d1\u8005\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u6cd5\u81ea\u5b9a\u4e49\u5b8c\u6210\u9875\u9762\u8981\u663e\u793a\u7684\u5185\u5bb9\u3002 use Dcat\\Admin\\Form; $form->multipleSteps()->done(function (Form\\DoneStep $done) { // \u83b7\u53d6\u65b0\u589eID // \u7531 Repository::store \u8fd4\u56de\u7684\u503c $newId = $done->getNewId(); // \u8fd4\u56de\u4f60\u8981\u663e\u793a\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u4f7f\u4e00\u4e2a\u89c6\u56fe\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002 return view(...); });","title":"\u5206\u6b65\u8868\u5355"},{"location":"2.x/model-form-step/#_1","text":"","title":"\u5206\u6b65\u8868\u5355"},{"location":"2.x/model-form-step/#_2","text":"\u524d\u5f80 https://github.com/dcat-admin/form-step \u4e0b\u8f7d\u5206\u6b65\u8868\u5355\u6269\u5c55\uff0c\u7136\u540e\u5b89\u88c5\u5e76\u542f\u7528\u3002 {tip} \u6269\u5c55\u5b89\u88c5\u8bf7\u53c2\u8003\u6587\u6863 \u6269\u5c55\u57fa\u672c\u4f7f\u7528 \u7ae0\u8282\u3002","title":"\u5b89\u88c5"},{"location":"2.x/model-form-step/#_3","text":"protected function form() { return Form::make(new Model(), function (Form $form) { $form->title('\u5206\u6b65\u8868\u5355'); $form->action('step'); $form->disableListButton(); $form->multipleSteps() ->remember() // \u8bb0\u4f4f\u8868\u5355\u6b65\u9aa4\uff0c\u9ed8\u8ba4\u4e0d\u5f00\u542f ->width('950px') ->add('\u57fa\u672c\u4fe1\u606f', function ($step) { $info = '<i class=\"fa fa-exclamation-circle\"></i> \u8868\u5355\u5b57\u6bb5\u652f\u6301\u524d\u7aef\u9a8c\u8bc1\u548c\u540e\u7aef\u9a8c\u8bc1\u6df7\u7528\uff0c\u524d\u7aef\u9a8c\u8bc1\u652f\u6301H5\u8868\u5355\u9a8c\u8bc1\u4ee5\u53ca\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u3002'; $step->html(Alert::make($info)->info()); $step->text('name', '\u59d3\u540d')->required()->maxLength(20); // h5 \u8868\u5355\u9a8c\u8bc1 $step->text('age', '\u5e74\u9f84') ->required() ->type('number') ->attribute('max', 150) ->help('\u524d\u7aef\u9a8c\u8bc1'); $step->radio('sex', '\u6027\u522b')->options(['\u672a\u77e5', '\u7537', '\u5973'])->default(0); // \u540e\u7aef\u9a8c\u8bc1 $step->text('birthplace', '\u7c4d\u8d2f') ->rules('required') ->help('\u6f14\u793a\u540e\u7aef\u5b57\u6bb5\u9a8c\u8bc1'); $step->url('homepage', '\u4e2a\u4eba\u4e3b\u9875'); $step->textarea('description', '\u7b80\u4ecb'); }) ->add('\u5174\u8da3\u7231\u597d', function ($step) { $step->tags('hobbies', '\u7231\u597d') ->options(['\u5531', '\u8df3', 'RAP', '\u8e22\u8db3\u7403']) ->required(); $step->text('books', '\u4e66\u7c4d'); $step->text('music', '\u97f3\u4e50'); // \u4e8b\u4ef6 $step->shown(function () { return <<<JS Dcat.info('\u5174\u8da3\u7231\u597d'); console.log('\u5174\u8da3\u7231\u597d', args); JS; }); }) ->add('\u5730\u5740', function ($step) { $step->text('address', '\u8857\u9053\u5730\u5740'); $step->text('post_code', '\u90ae\u653f\u7f16\u7801'); $step->tel('tel', ' \u8054\u7cfb\u7535\u8bdd'); }) ->done(function () use ($form) { $resource = $form->getResource(0); $data = [ 'title' => '\u64cd\u4f5c\u6210\u529f', 'description' => '\u606d\u559c\u60a8\u6210\u4e3a\u7b2c10086\u4f4d\u7528\u6237', 'createUrl' => $resource, 'backUrl' => $resource, ]; return view('admin::form.done-step', $data); }); }); } \u6548\u679c","title":"\u7b80\u5355\u793a\u4f8b"},{"location":"2.x/model-form-step/#_4","text":"\u5206\u6b65\u8868\u5355\u7684\u4f7f\u7528\u5f88\u7b80\u5355\uff0c\u8fd0\u884c\u903b\u8f91\u4e5f\u4e0e\u666e\u901a\u8868\u5355\u6ca1\u6709\u592a\u5927\u533a\u522b\uff0c\u4e0b\u9762\u7b80\u5355\u8bf4\u8bf4\u5206\u6b65\u8868\u5355\u7684\u8fd0\u884c\u903b\u8f91\u3002 {tip} \u5206\u6b65\u8868\u5355\u6ca1\u6709 update \u7684\u6982\u5ff5\u3002","title":"\u8fd0\u884c\u903b\u8f91"},{"location":"2.x/model-form-step/#_5","text":"\u5f53\u7528\u6237\u70b9\u51fb \u4e0b\u4e00\u6b65 \u65f6\uff0c\u4f1a\u5411\u540e\u7aef\u53d1\u8d77\u8bf7\u6c42\u9a8c\u8bc1\u53c2\u6570\u662f\u5426\u6b63\u786e\uff0c\u5982\u679c\u53c2\u6570\u4e0d\u7b26\u5408\u8981\u6c42\u5219\u663e\u793a\u9519\u8bef\u4fe1\u606f\uff0c\u9a8c\u8bc1\u901a\u8fc7\u624d\u4f1a\u8fdb\u5165\u4e0b\u4e00\u4e2a\u6b65\u9aa4\u3002","title":"\u53c2\u6570\u9a8c\u8bc1"},{"location":"2.x/model-form-step/#_6","text":"\u5f53\u8fdb\u884c\u5230\u6700\u540e\u4e00\u6b65\u65f6\uff0c\u4f1a\u5bf9\u6240\u6709\u6b65\u9aa4\u7684\u8868\u5355\u53c2\u6570\u4e00\u8d77\u63d0\u4ea4\u5230\u540e\u7aef\u5e76\u8fdb\u884c\u9a8c\u8bc1\uff0c\u5982\u679c\u53c2\u6570\u4e0d\u7b26\u5408\u8981\u6c42\u5219\u663e\u793a\u9519\u8bef\u4fe1\u606f\uff0c\u9a8c\u8bc1\u901a\u8fc7\u5219\u4fdd\u5b58\u8868\u5355\u6570\u636e\uff0c\u4fdd\u5b58\u7684\u65b9\u6cd5\u4e0e\u666e\u901a\u8868\u5355\u5b8c\u5168\u4e00\u81f4\u3002 {tip} \u6700\u540e\u4fdd\u5b58\u8868\u5355\u7684\u65b9\u6cd5\u662f Form::store \u3002","title":"\u8868\u5355\u63d0\u4ea4"},{"location":"2.x/model-form-step/#_7","text":"\u8868\u5355\u4fdd\u5b58\u5b8c\u6210\u4e4b\u540e\u4f1a\u663e\u793a\u5b8c\u6210\u9875\u9762\uff0c\u6b64\u6b65\u9aa4\u65e0\u6cd5\u5ffd\u7565\u3002","title":"\u5b8c\u6210\u9875\u9762"},{"location":"2.x/model-form-step/#_8","text":"\u5206\u6b65\u8868\u5355\u9ed8\u8ba4\u662f\u6ca1\u6709\u7f16\u8f91\u529f\u80fd\u7684\uff0c\u7528\u6237\u8f93\u5165\u4e86\u957f\u6b65\u9aa4\u7684\u8868\u5355\u4e4b\u540e\u4e0d\u9700\u8981\u518d\u5206\u6b65\u7f16\u8f91\uff0c\u56e0\u6b64\u5982\u679c\u9700\u8981\u5bf9\u5206\u6b65\u8868\u5355\u8fdb\u884c\u7f16\u8f91\uff0c\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u65b9\u5f0f protected function form() { return Form::make(new MyRepository(), function (Form $form) { // \u5224\u65ad\u662f\u5426\u662f\u7f16\u8f91\u9875\u9762 if ($form->isEditing()) { $form->text('age', '\u5e74\u9f84') ->required() ->type('number') ->attribute('max', 150) ->help('\u524d\u7aef\u9a8c\u8bc1') ... return; } $form->multipleSteps() ->remember() ->width('950px') ->add('\u57fa\u672c\u4fe1\u606f', function (Form\\StepForm $step) { $info = '<i class=\"fa fa-exclamation-circle\"></i> \u8868\u5355\u5b57\u6bb5\u652f\u6301\u524d\u7aef\u9a8c\u8bc1\u548c\u540e\u7aef\u9a8c\u8bc1\u6df7\u7528\uff0c\u524d\u7aef\u9a8c\u8bc1\u652f\u6301H5\u8868\u5355\u9a8c\u8bc1\u4ee5\u53ca\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u3002'; $step->html(Alert::make($info)->info()); $step->text('name', '\u59d3\u540d')->required()->maxLength(20); // h5 \u8868\u5355\u9a8c\u8bc1 $step->text('age', '\u5e74\u9f84') ->required() ->type('number') ->attribute('max', 150) ->help('\u524d\u7aef\u9a8c\u8bc1'); $step->radio('sex', '\u6027\u522b')->options(['\u672a\u77e5', '\u7537', '\u5973'])->default(0); ... }) ->add('\u5174\u8da3\u7231\u597d', function (Form\\StepForm $step) { ... }) ->done(function () use ($form) { ... }); }); }","title":"\u7f16\u8f91\u8868\u5355"},{"location":"2.x/model-form-step/#_9","text":"","title":"\u529f\u80fd\u63a5\u53e3"},{"location":"2.x/model-form-step/#_10","text":"\u9ed8\u8ba4 1000px \u3002 {tip} \u6b64\u65b9\u6cd5\u53ea\u9488\u5bf9\u5927\u5c4f\u5e55\uff0c\u624b\u673a\u7aef\u9875\u9762\u4f1a\u81ea\u52a8\u8c03\u8282\u5927\u5c0f\u3002 $form->multipleSteps()->width('900px');","title":"\u8bbe\u7f6e\u5bb9\u5668\u6700\u5927\u5bbd\u5ea6"},{"location":"2.x/model-form-step/#_11","text":"\u5f00\u542f\u6b64\u529f\u80fd\u4e4b\u540e\uff0c\u5f53\u7528\u6237\u70b9\u51fb \u4e0b\u4e00\u6b65 \u6309\u94ae\u5e76\u4e14\u53c2\u6570\u9a8c\u8bc1\u901a\u8fc7\u540e\uff0c\u4f1a\u628a\u8868\u5355\u6570\u636e\u4fdd\u5b58\u5728 session \u4e2d\uff0c\u76f4\u5230\u6574\u4e2a\u5206\u6b65\u8868\u5355\u4fdd\u5b58\u5b8c\u6bd5\u4e4b\u540e\u624d\u4f1a\u9500\u6bc1\u3002 {tip} \u6b64\u529f\u80fd\u9ed8\u8ba4\u4e0d\u5f00\u542f\u3002 // \u5f00\u542f $form->multipleSteps()->remember(); // \u5173\u95ed $form->multipleSteps()->remember(false);","title":"\u8bb0\u4f4f\u8868\u5355\u6570\u636e"},{"location":"2.x/model-form-step/#_12","text":"\u9ed8\u8ba4\u503c 30px 18px 30px \u3002 $form->multipleSteps()->padding('30px 18px 30px');","title":"\u8bbe\u7f6e\u5bb9\u5668\u95f4\u8ddd"},{"location":"2.x/model-form-step/#_13","text":"\u76d1\u542c\u6240\u6709\u6b65\u9aa4\u8868\u5355\u9875\u9762\u79bb\u5f00\u4e8b\u4ef6\uff0c\u53ef\u6dfb\u52a0\u591a\u4e2a\u3002 $form->multipleSteps()->leaving(<<<JS // \u83b7\u53d6\u5f53\u524d\u9875\u9762\u7684\u6b65\u9aa4\u7d22\u5f15 var index = args.index; Dcat.info(\"\u4f60\u5c06\u8981\u79bb\u5f00\u7b2c \" + (index + 1) + \" \u4e2a\u9875\u9762\"); // args\u53d8\u91cf\u662f\u4e00\u4e2ajs\u5bf9\u8c61\uff0c\u5305\u542b\u5f53\u524d\u4e8b\u4ef6\u5bf9\u8c61\u3001\u5f53\u524d\u6b65\u9aa4\u9009\u9879\u3001\u8868\u5355\u5bf9\u8c61\u548c\u8868\u5355\u503c\u7b49\u5b57\u6bb5\u3002 console.log(\"leaving\", args); // \u83b7\u53d6\u5f53\u524d\u4e8b\u4ef6\u5bf9\u8c61 var evt = args.event; // \u83b7\u53d6\u6b65\u9aa4\u8868\u5355\u6807\u9898tap\u5bf9\u8c61 var tab = args.tab; // \u83b7\u53d6\u52a8\u5411\u662f\u524d\u5f80\u4e0a\u4e00\u6b65\u8fd8\u662f\u4e0b\u4e00\u6b65\u9875\u9762\uff1a\"forward\"\u3001\"backward\" var direction = args.direction; // \u83b7\u53d6\u5f53\u524d\u6b65\u9aa4\u7684\u8868\u5355JQ\u5bf9\u8c61 var $form = args.form; // \u83b7\u53d6\u5f53\u524d\u6b65\u9aa4\u9875\u7684\u8868\u5355\u503c var formArray = args.formArray; // \u83b7\u53d6\u6307\u5b9a\u6b65\u9aa4\u7684\u8868\u5355JQ\u5bf9\u8c61 var $firstForm = args.getForm(0); // \u83b7\u53d6\u6307\u5b9a\u6b65\u9aa4\u7684\u8868\u5355\u503c var firstFormArray = args.getFormArray(0); // \u505c\u6b62\u79bb\u5f00\u5f53\u524d\u9875\u9762 return false; JS )->leaving(...);","title":"\u76d1\u542c\u9875\u9762\u79bb\u5f00\u4e8b\u4ef6"},{"location":"2.x/model-form-step/#_14","text":"\u76d1\u542c\u6240\u6709\u6b65\u9aa4\u8868\u5355\u9875\u9762\u663e\u793a\u4e8b\u4ef6\uff0c\u53ef\u6dfb\u52a0\u591a\u4e2a\u3002 $form->multipleSteps()->shown(<<<JS // \u83b7\u53d6\u5f53\u524d\u9875\u9762\u7684\u6b65\u9aa4\u7d22\u5f15 var index = args.index; Dcat.info(\"\u5f53\u524d\u663e\u793a\u7684\u662f\u7b2c \" + (index + 1) + \" \u4e2a\u9875\u9762\"); // args\u53d8\u91cf\u7684\u503c\u4e0e\u201cleaving\u201d\u4e8b\u4ef6\u7684\u503c\u76f8\u540c\u3002 console.log(\"shown\", args); JS )->shown(...);","title":"\u76d1\u542c\u9875\u9762\u663e\u793a\u4e8b\u4ef6"},{"location":"2.x/model-form-step/#_15","text":"\u6b65\u9aa4\u8868\u5355\u652f\u6301\u6240\u6709\u8868\u5355\u5b57\u6bb5\u3002 use Dcat\\Admin\\Form; $form->multipleSteps()->add('\u6807\u9898', function (Form\\StepForm $step) { $step->text('username')->rules('required'); ... });","title":"\u589e\u52a0\u6b65\u9aa4\u8868\u5355"},{"location":"2.x/model-form-step/#_16","text":"\u76d1\u542c\u5f53\u524d\u6b65\u9aa4\u9875\u9762\u79bb\u5f00\u4e8b\u4ef6\uff0c\u652f\u6301\u76d1\u542c\u591a\u6b21\u3002 use Dcat\\Admin\\Form; $form->multipleSteps()->add('\u57fa\u672c\u4fe1\u606f', function (Form\\StepForm $step) { ... $step->leaving(<<<JS Dcat.info(\"\u4f60\u5c06\u8981\u79bb\u5f00 \u57fa\u672c\u4fe1\u606f \u9875\u9762\"); // args\u53d8\u91cf\u662f\u4e00\u4e2ajs\u5bf9\u8c61\uff0c\u5305\u542b\u5f53\u524d\u4e8b\u4ef6\u5bf9\u8c61\u3001\u5f53\u524d\u6b65\u9aa4\u9009\u9879\u3001\u8868\u5355\u5bf9\u8c61\u548c\u8868\u5355\u503c\u7b49\u5b57\u6bb5\u3002 console.log(\"\u79bb\u5f00 \u57fa\u672c\u4fe1\u606f\", args); // \u83b7\u53d6\u5f53\u524d\u4e8b\u4ef6\u5bf9\u8c61 var evt = args.event; // \u83b7\u53d6\u5f53\u524d\u9875\u9762\u7684\u6b65\u9aa4\u7d22\u5f15 var index = args.index; // \u83b7\u53d6\u6b65\u9aa4\u8868\u5355\u6807\u9898tap\u5bf9\u8c61 var tab = args.tab; // \u83b7\u53d6\u52a8\u5411\u662f\u524d\u5f80\u4e0a\u4e00\u6b65\u8fd8\u662f\u4e0b\u4e00\u6b65\u9875\u9762\uff1a\"forward\"\u3001\"backward\" var direction = args.direction; // \u83b7\u53d6\u5f53\u524d\u6b65\u9aa4\u7684\u8868\u5355JQ\u5bf9\u8c61 var $form = args.form; // \u83b7\u53d6\u5f53\u524d\u6b65\u9aa4\u9875\u7684\u8868\u5355\u503c var formArray = args.formArray; // \u83b7\u53d6\u6307\u5b9a\u6b65\u9aa4\u7684\u8868\u5355JQ\u5bf9\u8c61 var $firstForm = args.getForm(0); // \u83b7\u53d6\u6307\u5b9a\u6b65\u9aa4\u7684\u8868\u5355\u503c var firstFormArray = args.getFormArray(0); // \u505c\u6b62\u79bb\u5f00\u5f53\u524d\u9875\u9762 return false; JS ); // \u76d1\u542c\u591a\u6b21 $step->leaving(...); });","title":"\u76d1\u542c\u6b65\u9aa4\u9875\u9762\u79bb\u5f00\u4e8b\u4ef6"},{"location":"2.x/model-form-step/#_17","text":"\u76d1\u542c\u5f53\u524d\u6b65\u9aa4\u9875\u9762\u663e\u793a\u4e8b\u4ef6\uff0c\u652f\u6301\u76d1\u542c\u591a\u6b21\u3002 use Dcat\\Admin\\Form; $form->multipleSteps()->add('\u57fa\u672c\u4fe1\u606f', function (Form\\StepForm $step) { ... $step->shown(<<<JS Dcat.info(\"\u5f53\u524d\u6b65\u9aa4\u662f \u57fa\u672c\u4fe1\u606f\"); // args\u53d8\u91cf\u7684\u503c\u4e0e\u201cleaving\u201d\u4e8b\u4ef6\u7684\u503c\u76f8\u540c\u3002 console.log(\"\u663e\u793a \u57fa\u672c\u4fe1\u606f\", args); JS ); // \u76d1\u542c\u591a\u6b21 $step->shown(...); });","title":"\u76d1\u542c\u6b65\u9aa4\u9875\u9762\u663e\u793a\u4e8b\u4ef6"},{"location":"2.x/model-form-step/#_18","text":"\u5f53\u6240\u6709\u6b65\u9aa4\u90fd\u5b8c\u6210\u4e4b\u540e\u4f1a\u663e\u793a\u5b8c\u6210\u9875\u9762\uff0c\u7cfb\u7edf\u63d0\u4f9b\u4e00\u4e2a\u9ed8\u8ba4\u7684\u5b8c\u6210\u9875\u9762\uff0c\u5f00\u53d1\u8005\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u6cd5\u81ea\u5b9a\u4e49\u5b8c\u6210\u9875\u9762\u8981\u663e\u793a\u7684\u5185\u5bb9\u3002 use Dcat\\Admin\\Form; $form->multipleSteps()->done(function (Form\\DoneStep $done) { // \u83b7\u53d6\u65b0\u589eID // \u7531 Repository::store \u8fd4\u56de\u7684\u503c $newId = $done->getNewId(); // \u8fd4\u56de\u4f60\u8981\u663e\u793a\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u4f7f\u4e00\u4e2a\u89c6\u56fe\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002 return view(...); });","title":"\u8bbe\u7f6e\u5b8c\u6210\u9875\u9762"},{"location":"2.x/model-form-trans/","text":"\u8868\u5355\u5b57\u6bb5\u7ffb\u8bd1 \u6570\u636e\u8868\u5355\u8868\u5355\u4e2d\u6240\u6709\u4f7f\u7528\u5230\u5b57\u6bb5\u7684\u5730\u65b9\u90fd\u4f1a\u81ea\u52a8\u8bfb\u53d6\u8bed\u8a00\u5305\u4e2d\u7684\u7ffb\u8bd1\u3002 {tip} \u8bed\u8a00\u5305\u7684\u8be6\u7ec6\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003 \u591a\u8bed\u8a00 \u3002 \u8bed\u8a00\u5305\u540d\u79f0 \u8bed\u8a00\u5305\u540d\u79f0\u9700\u8981\u4e0e\u63a7\u5236\u5668\u540d\u76f8\u5bf9\u5e94\uff0c\u5047\u5982\u63a7\u5236\u5668\u540d UserProfileController \uff0c\u5219\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u4e3a resources/lang/{\u5f53\u524d\u8bed\u8a00}/user-profile.php \uff08\u9700\u8981\u8f6c\u5316\u4e3a\u5c0f\u5199\u4e2d\u5212\u7ebf\u98ce\u683c\uff09\u3002 \u5982\u679c\u60f3\u8981\u66f4\u6539\u8bed\u8a00\u5305\u7684\u540d\u79f0\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\u66f4\u6539 \u65b9\u5f0f1 use Dcat\\Admin\\Http\\Controllers\\AdminController; class UserController extends AdminController { /** * \u6307\u5b9a\u7ffb\u8bd1\u6587\u4ef6\u540d\u79f0 * * @var string */ protected $translation = 'user1'; ... } \u65b9\u5f0f2 use Dcat\\Admin\\Admin; Admin::translation('user1'); \u793a\u4f8b \u73b0\u5728\u5047\u8bbe\u8bed\u8a00\u5305 resources/lang/zh_CN/user-profile.php \u5185\u5bb9\u5982\u4e0b\uff1a return [ 'fields' => [ 'name' => '\u540d\u79f0', 'age' => '\u5e74\u9f84', 'class' => '\u73ed\u7ea7', ], ]; \u63a7\u5236\u5668 UserProfileController \u4e2d\u8bbe\u7f6e\u7684 Form \u5b57\u6bb5\u4f1a\u81ea\u52a8\u8bfb\u53d6\u4ee5\u4e0a\u7ffb\u8bd1\uff1a // \u4e0d\u8bbe\u7f6elabael\u4f1a\u81ea\u52a8\u8bfb\u53d6\u8bed\u8a00\u5305\u7ffb\u8bd1 $form->display('id'); $form->text('name'); $form->text('age'); $form->text('class'); \u516c\u5171\u7ffb\u8bd1 \u5f53 admin_trans_field \u51fd\u6570\u627e\u4e0d\u5230\u5f53\u524d\u63a7\u5236\u5668\u4e2d\u5bf9\u6307\u5b9a\u5b57\u6bb5\u7684\u7ffb\u8bd1\u65f6\uff0c\u4f1a\u53bb global.php \u4e2d\u67e5\u627e\u3002\u5982\u679c\u67d0\u4e9b\u5b57\u6bb5\u662f\u5f88\u591a\u6570\u636e\u8868\u4e2d\u90fd\u6709\u7684\uff0c\u53ef\u4ee5\u628a\u8fd9\u4e9b\u7ffb\u8bd1\u5199\u5728 resources/lang/{\u5f53\u524d\u8bed\u8a00}/global.php \u6587\u4ef6\u4e2d\u3002 return [ // \u5e38\u7528\u7684\u5b57\u6bb5\u653e\u5728 global.php \u4e2d\u53ef\u4ee5\u6240\u6709\u63a7\u5236\u5668\u5171\u7528\u3002 'fields' => [ 'id' => 'ID', 'created_at' => '\u521b\u5efa\u65f6\u95f4', 'updated_at' => '\u66f4\u65b0\u65f6\u95f4', ], ];","title":"\u8868\u5355\u5b57\u6bb5\u7ffb\u8bd1"},{"location":"2.x/model-form-trans/#_1","text":"\u6570\u636e\u8868\u5355\u8868\u5355\u4e2d\u6240\u6709\u4f7f\u7528\u5230\u5b57\u6bb5\u7684\u5730\u65b9\u90fd\u4f1a\u81ea\u52a8\u8bfb\u53d6\u8bed\u8a00\u5305\u4e2d\u7684\u7ffb\u8bd1\u3002 {tip} \u8bed\u8a00\u5305\u7684\u8be6\u7ec6\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003 \u591a\u8bed\u8a00 \u3002","title":"\u8868\u5355\u5b57\u6bb5\u7ffb\u8bd1"},{"location":"2.x/model-form-trans/#_2","text":"\u8bed\u8a00\u5305\u540d\u79f0\u9700\u8981\u4e0e\u63a7\u5236\u5668\u540d\u76f8\u5bf9\u5e94\uff0c\u5047\u5982\u63a7\u5236\u5668\u540d UserProfileController \uff0c\u5219\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u4e3a resources/lang/{\u5f53\u524d\u8bed\u8a00}/user-profile.php \uff08\u9700\u8981\u8f6c\u5316\u4e3a\u5c0f\u5199\u4e2d\u5212\u7ebf\u98ce\u683c\uff09\u3002 \u5982\u679c\u60f3\u8981\u66f4\u6539\u8bed\u8a00\u5305\u7684\u540d\u79f0\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\u66f4\u6539 \u65b9\u5f0f1 use Dcat\\Admin\\Http\\Controllers\\AdminController; class UserController extends AdminController { /** * \u6307\u5b9a\u7ffb\u8bd1\u6587\u4ef6\u540d\u79f0 * * @var string */ protected $translation = 'user1'; ... } \u65b9\u5f0f2 use Dcat\\Admin\\Admin; Admin::translation('user1');","title":"\u8bed\u8a00\u5305\u540d\u79f0"},{"location":"2.x/model-form-trans/#_3","text":"\u73b0\u5728\u5047\u8bbe\u8bed\u8a00\u5305 resources/lang/zh_CN/user-profile.php \u5185\u5bb9\u5982\u4e0b\uff1a return [ 'fields' => [ 'name' => '\u540d\u79f0', 'age' => '\u5e74\u9f84', 'class' => '\u73ed\u7ea7', ], ]; \u63a7\u5236\u5668 UserProfileController \u4e2d\u8bbe\u7f6e\u7684 Form \u5b57\u6bb5\u4f1a\u81ea\u52a8\u8bfb\u53d6\u4ee5\u4e0a\u7ffb\u8bd1\uff1a // \u4e0d\u8bbe\u7f6elabael\u4f1a\u81ea\u52a8\u8bfb\u53d6\u8bed\u8a00\u5305\u7ffb\u8bd1 $form->display('id'); $form->text('name'); $form->text('age'); $form->text('class');","title":"\u793a\u4f8b"},{"location":"2.x/model-form-trans/#_4","text":"\u5f53 admin_trans_field \u51fd\u6570\u627e\u4e0d\u5230\u5f53\u524d\u63a7\u5236\u5668\u4e2d\u5bf9\u6307\u5b9a\u5b57\u6bb5\u7684\u7ffb\u8bd1\u65f6\uff0c\u4f1a\u53bb global.php \u4e2d\u67e5\u627e\u3002\u5982\u679c\u67d0\u4e9b\u5b57\u6bb5\u662f\u5f88\u591a\u6570\u636e\u8868\u4e2d\u90fd\u6709\u7684\uff0c\u53ef\u4ee5\u628a\u8fd9\u4e9b\u7ffb\u8bd1\u5199\u5728 resources/lang/{\u5f53\u524d\u8bed\u8a00}/global.php \u6587\u4ef6\u4e2d\u3002 return [ // \u5e38\u7528\u7684\u5b57\u6bb5\u653e\u5728 global.php \u4e2d\u53ef\u4ee5\u6240\u6709\u63a7\u5236\u5668\u5171\u7528\u3002 'fields' => [ 'id' => 'ID', 'created_at' => '\u521b\u5efa\u65f6\u95f4', 'updated_at' => '\u66f4\u65b0\u65f6\u95f4', ], ];","title":"\u516c\u5171\u7ffb\u8bd1"},{"location":"2.x/model-form-upload/","text":"\u56fe\u7247/\u6587\u4ef6\u4e0a\u4f20 \u6570\u636e\u8868\u5355 \u901a\u8fc7\u4ee5\u4e0b\u7684\u8c03\u7528\u6765\u751f\u6210\u56fe\u7247/\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\uff0c\u652f\u6301\u672c\u5730\u548c\u4e91\u5b58\u50a8\u7684\u6587\u4ef6\u4e0a\u4f20\u3002\u4e0a\u4f20\u7ec4\u4ef6\u662f\u57fa\u4e8e webuploader \u5b9e\u73b0\u7684\uff0c\u5177\u4f53\u7684\u4f7f\u7528\u914d\u7f6e\u53ef\u53c2\u8003 webuploader\u5b98\u65b9\u6587\u6863 \u3002 {tip} \u6587\u4ef6\u6216\u56fe\u7247\u4e0a\u4f20\u8868\u5355\u5b57\u6bb5\u8bf7\u4e0d\u8981\u5728\u6a21\u578b\u4e2d\u8bbe\u7f6e \u8bbf\u95ee\u5668 \u548c \u4fee\u6539\u5668 \u62fc\u63a5\u57df\u540d\uff0c\u5982\u6709\u76f8\u5173\u9700\u6c42\u53ef\u53c2\u8003 \u6587\u4ef6/\u56fe\u7247\u57df\u540d\u62fc\u63a5 \u3002 $form->file('file_column'); $form->image('image_column'); \u672c\u5730\u4e0a\u4f20 \u5148\u6dfb\u52a0\u5b58\u50a8\u914d\u7f6e\uff0c config/filesystems.php \u6dfb\u52a0\u4e00\u9879 disk : 'disks' => [ ... , 'admin' => [ 'driver' => 'local', 'root' => public_path('uploads'), 'visibility' => 'public', 'url' => env('APP_URL').'/uploads', ], ], \u8bbe\u7f6e\u4e0a\u4f20\u7684\u8def\u5f84\u4e3a public/uploads (public_path('uploads'))\u3002 \u7136\u540e\u9009\u62e9\u4e0a\u4f20\u7684 disk \uff0c\u6253\u5f00 config/admin.php \u627e\u5230\uff1a 'upload' => [ 'disk' => 'admin', 'directory' => [ 'image' => 'images', 'file' => 'files', ] ], \u5c06 disk \u8bbe\u7f6e\u4e3a\u4e0a\u9762\u6dfb\u52a0\u7684 admin \uff0c directory.image \u548c directory.file \u5206\u522b\u4e3a\u7528 $form->image($column) \u548c $form->file($column) \u4e0a\u4f20\u7684\u56fe\u7247\u548c\u6587\u4ef6\u7684\u4e0a\u4f20\u76ee\u5f55\u3002 \u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u5728\u4ee3\u7801\u4e2d\u6307\u5b9a disk \uff1a $form->file('file')->disk('your disk name'); \u4e91\u76d8\u4e0a\u4f20 \u5982\u679c\u9700\u8981\u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\uff0c\u9700\u8981\u5b89\u88c5\u5bf9\u5e94 laravel storage \u7684\u9002\u914d\u5668\uff0c\u62ff\u4e03\u725b\u4e91\u5b58\u50a8\u4e3e\u4f8b \u9996\u5148\u5b89\u88c5 zgldh/qiniu-laravel-storage \u540c\u6837\u914d\u7f6e\u597ddisk\uff0c\u5728 config/filesystems.php \u6dfb\u52a0\u4e00\u9879: 'disks' => [ ... , 'qiniu' => [ 'driver' => 'qiniu', 'domains' => [ 'default' => 'xxxxx.com1.z0.glb.clouddn.com', //\u4f60\u7684\u4e03\u725b\u57df\u540d 'https' => 'dn-yourdomain.qbox.me', //\u4f60\u7684HTTPS\u57df\u540d 'custom' => 'static.abc.com', //\u4f60\u7684\u81ea\u5b9a\u4e49\u57df\u540d ], 'access_key'=> '', //AccessKey 'secret_key'=> '', //SecretKey 'bucket' => '', //Bucket\u540d\u5b57 'notify_url'=> '', //\u6301\u4e45\u5316\u5904\u7406\u56de\u8c03\u5730\u5740 'url' => 'http://of8kfibjo.bkt.clouddn.com/', // \u586b\u5199\u6587\u4ef6\u8bbf\u95ee\u6839url ], ], \u7136\u540e\u4fee\u6539 dcat-admin \u7684\u4e0a\u4f20\u914d\u7f6e\uff0c\u6253\u5f00 config/admin.php \u627e\u5230\uff1a 'upload' => [ 'disk' => 'qiniu', 'directory' => [ 'image' => 'image', 'file' => 'file', ], ], disk \u9009\u62e9\u4e0a\u9762\u914d\u7f6e\u7684 qiniu \uff0c\u6216\uff1a $form->file('file')->disk('qiniu'); \u516c\u5171\u65b9\u6cd5 \u7f29\u7565\u56fe (thumbnail) \u4e0a\u4f20\u56fe\u7247\u7684\u540c\u65f6\u751f\u6210\u7f29\u7565\u56fe $form->image($column[, $label])->thumbnail('small', $width = 300, $height = 300); // \u751f\u6210\u591a\u5f20\u7f29\u7565\u56fe $form->image($column[, $label])->thumbnail([ 'small1' => [100, 100], 'small2' => [200, 200], 'small3' => [300, 300], ]); use Dcat\\Admin\\Traits\\Resizable; class Photo extends Model { use Resizable; } // To access thumbnail $photo->thumbnail('small', 'photo_column'); \u5b58\u50a8\u9a71\u52a8 (disk) \u4fee\u6539\u6587\u4ef6\u4e0a\u4f20\u6e90 $form->file('file')->disk('your disk name'); \u4e0a\u4f20\u8def\u5f84 (move) \u4fee\u6539\u4e0a\u4f20\u8def\u5f84 $form->file('file')->move('public/upload/image1/'); \u6587\u4ef6\u540d\u79f0 (name) \u4fee\u6539\u4e0a\u4f20\u6587\u4ef6\u540d\u79f0 $form->file('file')->name('test.text'); $form->image('picture')->name(function ($file) { return 'test.'.$file->guessExtension(); }); \u968f\u673a\u540d\u79f0 (uniqueName) \u4f7f\u7528\u968f\u673a\u751f\u6210\u6587\u4ef6\u540d (md5(uniqid()).extension) $form->image('picture')->uniqueName(); \u7981\u6b62\u9875\u9762\u5220\u9664\u6587\u4ef6 (\u66ff\u6362\u4e0a\u4f20) \u901a\u8fc7 removable \u65b9\u6cd5\u53ef\u4ee5\u7981\u6b62\u7528\u6237\u4ece\u9875\u9762\u70b9\u51fb\u5220\u9664\u670d\u52a1\u5668\u4e0a\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u5b9e\u73b0\u56fe\u7247\u8986\u76d6\u4e0a\u4f20\u6548\u679c\u3002 $form->file($column[, $label])->removable(false); \u81ea\u52a8\u4e0a\u4f20 (autoUpload) \u5f00\u542f\u8fd9\u4e2a\u529f\u80fd\u4e4b\u540e\u9009\u62e9\u5b8c\u6587\u4ef6\u4e4b\u540e\u4f1a\u7acb\u5373\u81ea\u52a8\u4e0a\u4f20\uff0c\u9875\u9762\u5c06\u4e0d\u518d\u663e\u793a \u4e0a\u4f20 \u6309\u94ae\uff0c\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b $form->file('file')->autoUpload(); $form->image('img')->autoUpload(); \u7981\u6b62\u5220\u9664 (retainable) \u5f00\u542f\u8fd9\u4e2a\u529f\u80fd\u4e4b\u540e\u6587\u4ef6\u5c06\u4e0d\u4f1a\u4ece\u670d\u52a1\u5668\u5220\u9664 $form->file('file')->retainable(); $form->image('img')->retainable(); storagePermission \u8bbe\u7f6e\u4e0a\u4f20\u6587\u4ef6\u7684\u6743\u9650 $form->image('picture')->storagePermission(777); \u9650\u5236\u4e0a\u4f20\u6587\u4ef6\u7c7b\u578b \u9650\u5236\u4e0a\u4f20\u6587\u4ef6\u7684\u7c7b\u578b $form->file('file')->accept('jpg,png,gif,jpeg'); // \u53ef\u4ee5\u6307\u5b9a mimeTypes\uff0c \u591a\u4e2a\u7528\u9017\u53f7\u5206\u5272 $form->file('file')->accept('jpg,png,gif,jpeg', 'image/*'); \u5206\u5757\u4e0a\u4f20 (chunked) \u542f\u7528\u5206\u5757\u4e0a\u4f20 $form->file('file')->chunked(); \u5206\u5757\u5927\u5c0f(chunkSize) \u8bbe\u7f6e\u5206\u5757\u5927\u5c0f\uff0c\u5355\u4f4d\u4e3a KB \uff0c\u9ed8\u8ba4 5MB {tip} \u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u81ea\u52a8\u542f\u7528\u5206\u5757\u4e0a\u4f20 // \u8bbe\u7f6e\u4e3a 1MB $form->file('file')->chunkSize(1024); \u6587\u4ef6\u5927\u5c0f(maxSize) \u8bbe\u7f6e\u5355\u4e2a\u6587\u4ef6\u6700\u5927\u5927\u5c0f\uff0c\u5355\u4f4d\u4e3a Kb \uff0c\u9ed8\u8ba4\u5927\u5c0f\u4e3a 10M \u3002 {tip} \u540c\u65f6\u5e94\u8be5\u4fdd\u8bc1 php.ini \u914d\u7f6e\u6587\u4ef6\u7684 upload_max_filesize \u53c2\u6570\u503c\u5fc5\u987b\u5927\u4e8e\u8fd9\u4e2a\u65b9\u6cd5\u8bbe\u7f6e\u7684\u503c\u3002 // \u8bbe\u7f6e\u5355\u4e2a\u6587\u4ef6\u6700\u5927\u4e3a1Mb $form->file('file')->maxSize(1024); \u5e76\u53d1\u4e0a\u4f20\u7ebf\u7a0b\u6570 (threads) \u8bbe\u7f6e\u5e76\u53d1\u4e0a\u4f20\u7ebf\u7a0b\u6570\uff0c\u9ed8\u8ba4 3 $form->file('file')->threads(5); \u81ea\u5b9a\u4e49\u4e0a\u4f20\u63a5\u53e3 (url) \u901a\u8fc7 url \u53ef\u4ee5\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u4e0a\u4f20\u63a5\u53e3 $form->file('file')->url('users/files'); \u7cfb\u7edf\u63d0\u4f9b\u4e86 Dcat\\Admin\\Traits\\HasUploadedFile \u8fd9\u4e2a trait \u6765\u5e2e\u52a9\u5f00\u53d1\u8005\u66f4\u8f7b\u677e\u5730\u5904\u7406\u4e0a\u4f20\u6587\u4ef6\uff0c\u7528\u6cd5\u5982\u4e0b <?php namespace App\\Admin\\Controllers; use Dcat\\Admin\\Traits\\HasUploadedFile; class FileController { use HasUploadedFile; public function handle() { $disk = $this->disk('local'); // \u5224\u65ad\u662f\u5426\u662f\u5220\u9664\u6587\u4ef6\u8bf7\u6c42 if ($this->isDeleteRequest()) { // \u5220\u9664\u6587\u4ef6\u5e76\u54cd\u5e94 return $this->deleteFileAndResponse($disk); } // \u83b7\u53d6\u4e0a\u4f20\u7684\u6587\u4ef6 $file = $this->file(); // \u83b7\u53d6\u4e0a\u4f20\u7684\u5b57\u6bb5\u540d\u79f0 $column = $this->uploader()->upload_column; $dir = 'my-images'; $newName = $column.'-\u6211\u7684\u6587\u4ef6\u540d\u79f0.'.$file->getClientOriginalExtension(); $result = $disk->putFileAs($dir, $file, $newName); $path = \"{$dir}/$newName\"; return $result ? $this->responseUploaded($path, $disk->url($path)) : $this->responseErrorMessage('\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25'); } } \u5728\u4f60\u7684\u8def\u7531\u6587\u4ef6 app\\Admin\\routes.php \u4e2d\u52a0\u4e0a $router->any('users/files', 'FileController@handle'); deleteUrl \u4fee\u6539\u5220\u9664\u5df2\u4e0a\u4f20\u6587\u4ef6\u8def\u5f84\uff0c\u6b64\u65b9\u6cd5\u4e00\u822c\u4e0d\u9700\u8981\u4fee\u6539 $form->file('file')->deleteUrl('file/delete'); \u81ea\u52a8\u4fdd\u5b58\u5b57\u6bb5\u503c (autoSave) \u8bbe\u7f6e\u4e0a\u4f20\u6587\u4ef6\u540e\u662f\u5426\u81ea\u52a8\u4fdd\u5b58\u6587\u4ef6\u8def\u5f84\u5230\u6570\u636e\u5e93\uff0c\u6b64\u65b9\u6cd5\u9ed8\u8ba4\u542f\u7528\uff0c\u4e00\u822c\u4e0d\u9700\u8981\u4fee\u6539 $form->file('file')->autoSave(false); \u914d\u7f6e (options) \u81ea\u5b9a\u4e49 webuploader \u914d\u7f6e $form->file('file')->options(['disableGlobalDnd' => true]); \u53ef\u6392\u5e8f (sortable) \u6b64\u65b9\u6cd5\u4ec5\u9488\u5bf9\u591a\u56fe/\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u6709\u6548 $form->multipleImage('images')->sortable(); \u538b\u7f29\u56fe\u7247 (compress) \u9ed8\u8ba4\u4e0d\u542f\u7528 // \u542f\u7528\u56fe\u7247\u538b\u7f29\u529f\u80fd $form->multipleImage('images')->compress(); $form->image('avatar')->compress([ 'width' => 1600, 'height' => 1600, // \u56fe\u7247\u8d28\u91cf\uff0c\u53ea\u6709type\u4e3a`image/jpeg`\u7684\u65f6\u5019\u624d\u6709\u6548\u3002 'quality' => 90, // \u662f\u5426\u5141\u8bb8\u653e\u5927\uff0c\u5982\u679c\u60f3\u8981\u751f\u6210\u5c0f\u56fe\u7684\u65f6\u5019\u4e0d\u5931\u771f\uff0c\u6b64\u9009\u9879\u5e94\u8be5\u8bbe\u7f6e\u4e3afalse. 'allowMagnify' => false, // \u662f\u5426\u5141\u8bb8\u88c1\u526a\u3002 'crop' => false, // \u662f\u5426\u4fdd\u7559\u5934\u90e8meta\u4fe1\u606f\u3002 'preserveHeaders' => true, // \u5982\u679c\u53d1\u73b0\u538b\u7f29\u540e\u6587\u4ef6\u5927\u5c0f\u6bd4\u539f\u6765\u8fd8\u5927\uff0c\u5219\u4f7f\u7528\u539f\u6765\u56fe\u7247 // \u6b64\u5c5e\u6027\u53ef\u80fd\u4f1a\u5f71\u54cd\u56fe\u7247\u81ea\u52a8\u7ea0\u6b63\u529f\u80fd 'noCompressIfLarger' => false, // \u5355\u4f4d\u5b57\u8282\uff0c\u5982\u679c\u56fe\u7247\u5927\u5c0f\u5c0f\u4e8e\u6b64\u503c\uff0c\u4e0d\u4f1a\u91c7\u7528\u538b\u7f29\u3002 'compressSize' => 0 ]); \u76d1\u542cWebUploader\u6587\u4ef6\u4e0a\u4f20\u4e8b\u4ef6 (on) \u901a\u8fc7 on \u65b9\u6cd5\u53ef\u4ee5\u76d1\u542c WebUploader\u6587\u4ef6\u4e0a\u4f20\u76f8\u5173\u4e8b\u4ef6 $form->file('...') ->on('startUpload', <<<JS function () { console.log('\u6587\u4ef6\u5f00\u59cb\u4e0a\u4f20...', this); // \u4e0a\u4f20\u6587\u4ef6\u524d\u9644\u52a0\u81ea\u5b9a\u4e49\u53c2\u6570\u5230\u6587\u4ef6\u4e0a\u4f20\u63a5\u53e3 this.uploader.options.formData['custom_field'] = '...'; } <<<JS ) ->on('uploadFinished', <<<JS function () { console.log('\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6bd5'); } <<<JS ); \u6587\u4ef6/\u56fe\u7247\u57df\u540d\u62fc\u63a5 \u6587\u4ef6\u6216\u56fe\u7247\u4e0a\u4f20\u8868\u5355\u5b57\u6bb5\u8bf7\u4e0d\u8981\u5728\u6a21\u578b\u4e2d\u8bbe\u7f6e \u8bbf\u95ee\u5668 \u548c \u4fee\u6539\u5668 \u62fc\u63a5\u57df\u540d\uff0c\u5982\u679c\u4f60\u9700\u8981\u5728\u8bbf\u95ee\u7684\u65f6\u5019\u62fc\u63a5\u5b8c\u6574\u57df\u540d\uff0c\u53ef\u4ee5\u5728\u6a21\u578b\u4e2d\u5b9a\u4e49\u4e00\u4e2a public \u65b9\u6cd5 <?php use Illuminate\\Support\\Str; use Illuminate\\Support\\Facades\\Storage; class YourModel extends Model { // \u5b9a\u4e49\u4e00\u4e2apublic\u65b9\u6cd5\u8bbf\u95ee\u56fe\u7247\u6216\u6587\u4ef6 public function getImage() { if (Str::contains($this->image, '//')) { return $this->image; } return Storage::disk('admin')->url($this->image); } } \u4fdd\u5b58\u57df\u540d \u5982\u679c\u4f60\u9700\u8981\u4fdd\u5b58\u6587\u4ef6\u57df\u540d\u5230\u6570\u636e\u8868\uff0c\u53ef\u4ee5\u4f7f\u7528 saveFullUrl \u65b9\u6cd5 $form->image('avatar')->saveFullUrl(); $form->file('...')->saveFullUrl(); \u76d1\u542c\u6587\u4ef6\u4e0a\u4f20\u53d8\u52a8 (change) \u901a\u8fc7\u4ee5\u4e0b\u65b9\u6cd5\u53ef\u4ee5\u76d1\u542c\u6587\u4ef6 \u4e0a\u4f20\u6210\u529f \u6216\u6587\u4ef6 \u88ab\u5220\u9664 \u65f6\u4ea7\u751f\u7684\u53d8\u52a8 $file = $form->file('...'); Admin::script( <<<JS $('{$file->getElementClassSelector()} .file-input').on('change', function () { console.log('\u6587\u4ef6\u53d1\u751f\u53d8\u52a8', this.value); }); JS ); \u8986\u76d6\u4e0a\u4f20 (override) \u901a\u8fc7 override \u65b9\u6cd5\u53ef\u4ee5\u5b9e\u73b0\u6587\u4ef6\u8986\u76d6\u4e0a\u4f20\u3002 $form->file('file')->override(); $form->image('img')->override(); \u56fe\u7247\u4e0a\u4f20\u5185\u7f6e\u65b9\u6cd5 \u538b\u7f29\u3001\u88c1\u5207\u3001\u6dfb\u52a0\u6c34\u5370\u7b49 \u53ef\u4ee5\u4f7f\u7528\u538b\u7f29\u3001\u88c1\u5207\u3001\u6dfb\u52a0\u6c34\u5370\u7b49\u5404\u79cd\u65b9\u6cd5,\u9700\u8981\u5148\u5b89\u88c5 intervention/image . \u66f4\u591a\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003[ Intervention ]\uff1a $form->image($column[, $label]); // \u4fee\u6539\u56fe\u7247\u4e0a\u4f20\u8def\u5f84\u548c\u6587\u4ef6\u540d $form->image($column[, $label])->move($dir, $name); // \u526a\u88c1\u56fe\u7247 $form->image($column[, $label])->crop(int $width, int $height, [int $x, int $y]); // \u52a0\u6c34\u5370 $form->image($column[, $label])->insert($watermark, 'center'); \u9650\u5236\u4e0a\u4f20\u56fe\u7247\u7684\u5c3a\u5bf8 \u8bbe\u7f6e\u6587\u4ef6\u4e0a\u4f20\u5c3a\u5bf8\u9650\u5236 \u53c2\u6570\uff1a array \u5355\u4f4d\u4e3a\u50cf\u7d20 - width \u6307\u5b9a\u5bbd\u5ea6 - height \u6307\u5b9a\u9ad8\u5ea6 - min_width \u6700\u5c0f\u5bbd\u5ea6 - min_height \u6700\u5c0f\u9ad8\u5ea6 - max_width \u6700\u5927\u5bbd\u5ea6 - max_height \u6700\u5927\u9ad8\u5ea6 - ratio \u5bbd\u9ad8\u6bd4 (width/height) // \u4e0a\u4f20\u5bbd\u5ea6\u4e3a100-300\u50cf\u7d20\u4e4b\u95f4\u7684\u56fe\u7247 $form->image('img')->dimensions(['min_width' = 100, 'max_width' => 300]); \u628a\u56fe\u7247/\u6587\u4ef6\u8def\u5f84\u4fdd\u5b58\u5728\u5176\u4ed6\u6570\u636e\u8868 \u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u6cd5\u53ef\u4ee5\u628a\u56fe\u7247\u6216\u6587\u4ef6\u7684\u8def\u5f84\u4fdd\u5b58\u5728\u5355\u72ec\u7684\u9644\u4ef6\u8868\uff0c\u800c\u5f53\u524d\u7684\u56fe\u7247/\u6587\u4ef6\u5b57\u6bb5\u53ea\u4fdd\u5b58ID {tip} \u8fd9\u91cc\u7684\u793a\u4f8b\u7528\u7684\u662f\u5355\u56fe\u4e0a\u4f20\u8868\u5355\uff0c\u5982\u679c\u662f\u591a\u56fe\u7684\u8bdd\u53ef\u4ee5\u6309\u8fd9\u4e2a\u601d\u8def\u81ea\u884c\u8c03\u6574\u3002 \u56fe\u7247/\u6587\u4ef6\u8868\u7ed3\u6784 CREATE TABLE `images` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `path` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '', `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`) ) ENGINE=MyISAM AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; \u4f7f\u7528 $form->image('image1') ->saving(function ($value) use ($form) { if ($form->isEditing() && ! $value) { // \u7f16\u8f91\u9875\u9762\uff0c\u5220\u9664\u56fe\u7247\u903b\u8f91 Image::destroy($form->model()->image1); return; } // \u65b0\u589e\u6216\u7f16\u8f91\u9875\u9762\u4e0a\u4f20\u56fe\u7247 if ($value) { $model = Image::where('path', $value)->first(); } if (empty($model)) { $model = new Image(); } $model->path = $value; $model->save(); return $model->getKey(); }) ->customFormat(function ($v) { if (! $v) { return; } return Image::find((array) $v)->pluck('path')->toArray(); }); \u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\u6216\u65e0\u6cd5\u8bbf\u95ee\uff1f \u5982\u679c\u4f60\u53d1\u73b0\u65e0\u6cd5\u4e0a\u4f20\u6587\u4ef6\uff0c\u90a3\u4e48\u901a\u5e38\u6709\u51e0\u4e0b\u51e0\u70b9\u539f\u56e0\uff1a Laravel \u6587\u4ef6\u4e0a\u4f20\u914d\u7f6e\u4e0d\u6b63\u786e\uff0c\u8bf7\u68c0\u67e5 admin.upload.disk \u53c2\u6570\u3002\u5982\u679c\u4f60\u4e0d\u4e86\u89e3 laravel \u6587\u4ef6\u4e0a\u4f20\u529f\u80fd\uff0c\u8bf7\u9605\u8bfb\u6587\u6863 Laravel - \u6587\u4ef6\u5b58\u50a8 \u6587\u4ef6\u8fc7\u5927\uff0c\u9700\u8981\u8c03\u6574 php.ini \u7684 upload_max_filesize \u53c2\u6570 \u6587\u4ef6\u4e0a\u4f20\u76ee\u5f55\u6ca1\u6709\u5199\u6743\u9650 php \u6ca1\u6709\u5b89\u88c5\u6216\u6ca1\u6709\u5f00\u542f fileinfo \u6269\u5c55 \u5982\u679c\u4f60\u7684\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\u4e86\uff0c\u5374\u65e0\u6cd5\u6b63\u5e38\u8bbf\u95ee\uff0c\u90a3\u4e48\u53ef\u80fd\u662f .env \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 APP_URL \u53c2\u6570\u6ca1\u6709\u8bbe\u7f6e\u6b63\u786e\u3002","title":"\u56fe\u7247/\u6587\u4ef6\u4e0a\u4f20"},{"location":"2.x/model-form-upload/#_1","text":"\u6570\u636e\u8868\u5355 \u901a\u8fc7\u4ee5\u4e0b\u7684\u8c03\u7528\u6765\u751f\u6210\u56fe\u7247/\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\uff0c\u652f\u6301\u672c\u5730\u548c\u4e91\u5b58\u50a8\u7684\u6587\u4ef6\u4e0a\u4f20\u3002\u4e0a\u4f20\u7ec4\u4ef6\u662f\u57fa\u4e8e webuploader \u5b9e\u73b0\u7684\uff0c\u5177\u4f53\u7684\u4f7f\u7528\u914d\u7f6e\u53ef\u53c2\u8003 webuploader\u5b98\u65b9\u6587\u6863 \u3002 {tip} \u6587\u4ef6\u6216\u56fe\u7247\u4e0a\u4f20\u8868\u5355\u5b57\u6bb5\u8bf7\u4e0d\u8981\u5728\u6a21\u578b\u4e2d\u8bbe\u7f6e \u8bbf\u95ee\u5668 \u548c \u4fee\u6539\u5668 \u62fc\u63a5\u57df\u540d\uff0c\u5982\u6709\u76f8\u5173\u9700\u6c42\u53ef\u53c2\u8003 \u6587\u4ef6/\u56fe\u7247\u57df\u540d\u62fc\u63a5 \u3002 $form->file('file_column'); $form->image('image_column');","title":"\u56fe\u7247/\u6587\u4ef6\u4e0a\u4f20"},{"location":"2.x/model-form-upload/#_2","text":"\u5148\u6dfb\u52a0\u5b58\u50a8\u914d\u7f6e\uff0c config/filesystems.php \u6dfb\u52a0\u4e00\u9879 disk : 'disks' => [ ... , 'admin' => [ 'driver' => 'local', 'root' => public_path('uploads'), 'visibility' => 'public', 'url' => env('APP_URL').'/uploads', ], ], \u8bbe\u7f6e\u4e0a\u4f20\u7684\u8def\u5f84\u4e3a public/uploads (public_path('uploads'))\u3002 \u7136\u540e\u9009\u62e9\u4e0a\u4f20\u7684 disk \uff0c\u6253\u5f00 config/admin.php \u627e\u5230\uff1a 'upload' => [ 'disk' => 'admin', 'directory' => [ 'image' => 'images', 'file' => 'files', ] ], \u5c06 disk \u8bbe\u7f6e\u4e3a\u4e0a\u9762\u6dfb\u52a0\u7684 admin \uff0c directory.image \u548c directory.file \u5206\u522b\u4e3a\u7528 $form->image($column) \u548c $form->file($column) \u4e0a\u4f20\u7684\u56fe\u7247\u548c\u6587\u4ef6\u7684\u4e0a\u4f20\u76ee\u5f55\u3002 \u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u5728\u4ee3\u7801\u4e2d\u6307\u5b9a disk \uff1a $form->file('file')->disk('your disk name');","title":"\u672c\u5730\u4e0a\u4f20"},{"location":"2.x/model-form-upload/#_3","text":"\u5982\u679c\u9700\u8981\u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\uff0c\u9700\u8981\u5b89\u88c5\u5bf9\u5e94 laravel storage \u7684\u9002\u914d\u5668\uff0c\u62ff\u4e03\u725b\u4e91\u5b58\u50a8\u4e3e\u4f8b \u9996\u5148\u5b89\u88c5 zgldh/qiniu-laravel-storage \u540c\u6837\u914d\u7f6e\u597ddisk\uff0c\u5728 config/filesystems.php \u6dfb\u52a0\u4e00\u9879: 'disks' => [ ... , 'qiniu' => [ 'driver' => 'qiniu', 'domains' => [ 'default' => 'xxxxx.com1.z0.glb.clouddn.com', //\u4f60\u7684\u4e03\u725b\u57df\u540d 'https' => 'dn-yourdomain.qbox.me', //\u4f60\u7684HTTPS\u57df\u540d 'custom' => 'static.abc.com', //\u4f60\u7684\u81ea\u5b9a\u4e49\u57df\u540d ], 'access_key'=> '', //AccessKey 'secret_key'=> '', //SecretKey 'bucket' => '', //Bucket\u540d\u5b57 'notify_url'=> '', //\u6301\u4e45\u5316\u5904\u7406\u56de\u8c03\u5730\u5740 'url' => 'http://of8kfibjo.bkt.clouddn.com/', // \u586b\u5199\u6587\u4ef6\u8bbf\u95ee\u6839url ], ], \u7136\u540e\u4fee\u6539 dcat-admin \u7684\u4e0a\u4f20\u914d\u7f6e\uff0c\u6253\u5f00 config/admin.php \u627e\u5230\uff1a 'upload' => [ 'disk' => 'qiniu', 'directory' => [ 'image' => 'image', 'file' => 'file', ], ], disk \u9009\u62e9\u4e0a\u9762\u914d\u7f6e\u7684 qiniu \uff0c\u6216\uff1a $form->file('file')->disk('qiniu');","title":"\u4e91\u76d8\u4e0a\u4f20"},{"location":"2.x/model-form-upload/#_4","text":"","title":"\u516c\u5171\u65b9\u6cd5"},{"location":"2.x/model-form-upload/#thumbnail","text":"\u4e0a\u4f20\u56fe\u7247\u7684\u540c\u65f6\u751f\u6210\u7f29\u7565\u56fe $form->image($column[, $label])->thumbnail('small', $width = 300, $height = 300); // \u751f\u6210\u591a\u5f20\u7f29\u7565\u56fe $form->image($column[, $label])->thumbnail([ 'small1' => [100, 100], 'small2' => [200, 200], 'small3' => [300, 300], ]); use Dcat\\Admin\\Traits\\Resizable; class Photo extends Model { use Resizable; } // To access thumbnail $photo->thumbnail('small', 'photo_column');","title":"\u7f29\u7565\u56fe (thumbnail)"},{"location":"2.x/model-form-upload/#disk","text":"\u4fee\u6539\u6587\u4ef6\u4e0a\u4f20\u6e90 $form->file('file')->disk('your disk name');","title":"\u5b58\u50a8\u9a71\u52a8 (disk)"},{"location":"2.x/model-form-upload/#move","text":"\u4fee\u6539\u4e0a\u4f20\u8def\u5f84 $form->file('file')->move('public/upload/image1/');","title":"\u4e0a\u4f20\u8def\u5f84 (move)"},{"location":"2.x/model-form-upload/#name","text":"\u4fee\u6539\u4e0a\u4f20\u6587\u4ef6\u540d\u79f0 $form->file('file')->name('test.text'); $form->image('picture')->name(function ($file) { return 'test.'.$file->guessExtension(); });","title":"\u6587\u4ef6\u540d\u79f0 (name)"},{"location":"2.x/model-form-upload/#uniquename","text":"\u4f7f\u7528\u968f\u673a\u751f\u6210\u6587\u4ef6\u540d (md5(uniqid()).extension) $form->image('picture')->uniqueName();","title":"\u968f\u673a\u540d\u79f0 (uniqueName)"},{"location":"2.x/model-form-upload/#_5","text":"\u901a\u8fc7 removable \u65b9\u6cd5\u53ef\u4ee5\u7981\u6b62\u7528\u6237\u4ece\u9875\u9762\u70b9\u51fb\u5220\u9664\u670d\u52a1\u5668\u4e0a\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u5b9e\u73b0\u56fe\u7247\u8986\u76d6\u4e0a\u4f20\u6548\u679c\u3002 $form->file($column[, $label])->removable(false);","title":"\u7981\u6b62\u9875\u9762\u5220\u9664\u6587\u4ef6 (\u66ff\u6362\u4e0a\u4f20)"},{"location":"2.x/model-form-upload/#autoupload","text":"\u5f00\u542f\u8fd9\u4e2a\u529f\u80fd\u4e4b\u540e\u9009\u62e9\u5b8c\u6587\u4ef6\u4e4b\u540e\u4f1a\u7acb\u5373\u81ea\u52a8\u4e0a\u4f20\uff0c\u9875\u9762\u5c06\u4e0d\u518d\u663e\u793a \u4e0a\u4f20 \u6309\u94ae\uff0c\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b $form->file('file')->autoUpload(); $form->image('img')->autoUpload();","title":"\u81ea\u52a8\u4e0a\u4f20 (autoUpload)"},{"location":"2.x/model-form-upload/#retainable","text":"\u5f00\u542f\u8fd9\u4e2a\u529f\u80fd\u4e4b\u540e\u6587\u4ef6\u5c06\u4e0d\u4f1a\u4ece\u670d\u52a1\u5668\u5220\u9664 $form->file('file')->retainable(); $form->image('img')->retainable();","title":"\u7981\u6b62\u5220\u9664 (retainable)"},{"location":"2.x/model-form-upload/#storagepermission","text":"\u8bbe\u7f6e\u4e0a\u4f20\u6587\u4ef6\u7684\u6743\u9650 $form->image('picture')->storagePermission(777);","title":"storagePermission"},{"location":"2.x/model-form-upload/#_6","text":"\u9650\u5236\u4e0a\u4f20\u6587\u4ef6\u7684\u7c7b\u578b $form->file('file')->accept('jpg,png,gif,jpeg'); // \u53ef\u4ee5\u6307\u5b9a mimeTypes\uff0c \u591a\u4e2a\u7528\u9017\u53f7\u5206\u5272 $form->file('file')->accept('jpg,png,gif,jpeg', 'image/*');","title":"\u9650\u5236\u4e0a\u4f20\u6587\u4ef6\u7c7b\u578b"},{"location":"2.x/model-form-upload/#chunked","text":"\u542f\u7528\u5206\u5757\u4e0a\u4f20 $form->file('file')->chunked();","title":"\u5206\u5757\u4e0a\u4f20 (chunked)"},{"location":"2.x/model-form-upload/#chunksize","text":"\u8bbe\u7f6e\u5206\u5757\u5927\u5c0f\uff0c\u5355\u4f4d\u4e3a KB \uff0c\u9ed8\u8ba4 5MB {tip} \u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u81ea\u52a8\u542f\u7528\u5206\u5757\u4e0a\u4f20 // \u8bbe\u7f6e\u4e3a 1MB $form->file('file')->chunkSize(1024);","title":"\u5206\u5757\u5927\u5c0f(chunkSize)"},{"location":"2.x/model-form-upload/#maxsize","text":"\u8bbe\u7f6e\u5355\u4e2a\u6587\u4ef6\u6700\u5927\u5927\u5c0f\uff0c\u5355\u4f4d\u4e3a Kb \uff0c\u9ed8\u8ba4\u5927\u5c0f\u4e3a 10M \u3002 {tip} \u540c\u65f6\u5e94\u8be5\u4fdd\u8bc1 php.ini \u914d\u7f6e\u6587\u4ef6\u7684 upload_max_filesize \u53c2\u6570\u503c\u5fc5\u987b\u5927\u4e8e\u8fd9\u4e2a\u65b9\u6cd5\u8bbe\u7f6e\u7684\u503c\u3002 // \u8bbe\u7f6e\u5355\u4e2a\u6587\u4ef6\u6700\u5927\u4e3a1Mb $form->file('file')->maxSize(1024);","title":"\u6587\u4ef6\u5927\u5c0f(maxSize)"},{"location":"2.x/model-form-upload/#threads","text":"\u8bbe\u7f6e\u5e76\u53d1\u4e0a\u4f20\u7ebf\u7a0b\u6570\uff0c\u9ed8\u8ba4 3 $form->file('file')->threads(5);","title":"\u5e76\u53d1\u4e0a\u4f20\u7ebf\u7a0b\u6570 (threads)"},{"location":"2.x/model-form-upload/#url","text":"\u901a\u8fc7 url \u53ef\u4ee5\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u4e0a\u4f20\u63a5\u53e3 $form->file('file')->url('users/files'); \u7cfb\u7edf\u63d0\u4f9b\u4e86 Dcat\\Admin\\Traits\\HasUploadedFile \u8fd9\u4e2a trait \u6765\u5e2e\u52a9\u5f00\u53d1\u8005\u66f4\u8f7b\u677e\u5730\u5904\u7406\u4e0a\u4f20\u6587\u4ef6\uff0c\u7528\u6cd5\u5982\u4e0b <?php namespace App\\Admin\\Controllers; use Dcat\\Admin\\Traits\\HasUploadedFile; class FileController { use HasUploadedFile; public function handle() { $disk = $this->disk('local'); // \u5224\u65ad\u662f\u5426\u662f\u5220\u9664\u6587\u4ef6\u8bf7\u6c42 if ($this->isDeleteRequest()) { // \u5220\u9664\u6587\u4ef6\u5e76\u54cd\u5e94 return $this->deleteFileAndResponse($disk); } // \u83b7\u53d6\u4e0a\u4f20\u7684\u6587\u4ef6 $file = $this->file(); // \u83b7\u53d6\u4e0a\u4f20\u7684\u5b57\u6bb5\u540d\u79f0 $column = $this->uploader()->upload_column; $dir = 'my-images'; $newName = $column.'-\u6211\u7684\u6587\u4ef6\u540d\u79f0.'.$file->getClientOriginalExtension(); $result = $disk->putFileAs($dir, $file, $newName); $path = \"{$dir}/$newName\"; return $result ? $this->responseUploaded($path, $disk->url($path)) : $this->responseErrorMessage('\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25'); } } \u5728\u4f60\u7684\u8def\u7531\u6587\u4ef6 app\\Admin\\routes.php \u4e2d\u52a0\u4e0a $router->any('users/files', 'FileController@handle');","title":"\u81ea\u5b9a\u4e49\u4e0a\u4f20\u63a5\u53e3 (url)"},{"location":"2.x/model-form-upload/#deleteurl","text":"\u4fee\u6539\u5220\u9664\u5df2\u4e0a\u4f20\u6587\u4ef6\u8def\u5f84\uff0c\u6b64\u65b9\u6cd5\u4e00\u822c\u4e0d\u9700\u8981\u4fee\u6539 $form->file('file')->deleteUrl('file/delete');","title":"deleteUrl"},{"location":"2.x/model-form-upload/#autosave","text":"\u8bbe\u7f6e\u4e0a\u4f20\u6587\u4ef6\u540e\u662f\u5426\u81ea\u52a8\u4fdd\u5b58\u6587\u4ef6\u8def\u5f84\u5230\u6570\u636e\u5e93\uff0c\u6b64\u65b9\u6cd5\u9ed8\u8ba4\u542f\u7528\uff0c\u4e00\u822c\u4e0d\u9700\u8981\u4fee\u6539 $form->file('file')->autoSave(false);","title":"\u81ea\u52a8\u4fdd\u5b58\u5b57\u6bb5\u503c (autoSave)"},{"location":"2.x/model-form-upload/#options","text":"\u81ea\u5b9a\u4e49 webuploader \u914d\u7f6e $form->file('file')->options(['disableGlobalDnd' => true]);","title":"\u914d\u7f6e (options)"},{"location":"2.x/model-form-upload/#sortable","text":"\u6b64\u65b9\u6cd5\u4ec5\u9488\u5bf9\u591a\u56fe/\u6587\u4ef6\u4e0a\u4f20\u8868\u5355\u6709\u6548 $form->multipleImage('images')->sortable();","title":"\u53ef\u6392\u5e8f (sortable)"},{"location":"2.x/model-form-upload/#compress","text":"\u9ed8\u8ba4\u4e0d\u542f\u7528 // \u542f\u7528\u56fe\u7247\u538b\u7f29\u529f\u80fd $form->multipleImage('images')->compress(); $form->image('avatar')->compress([ 'width' => 1600, 'height' => 1600, // \u56fe\u7247\u8d28\u91cf\uff0c\u53ea\u6709type\u4e3a`image/jpeg`\u7684\u65f6\u5019\u624d\u6709\u6548\u3002 'quality' => 90, // \u662f\u5426\u5141\u8bb8\u653e\u5927\uff0c\u5982\u679c\u60f3\u8981\u751f\u6210\u5c0f\u56fe\u7684\u65f6\u5019\u4e0d\u5931\u771f\uff0c\u6b64\u9009\u9879\u5e94\u8be5\u8bbe\u7f6e\u4e3afalse. 'allowMagnify' => false, // \u662f\u5426\u5141\u8bb8\u88c1\u526a\u3002 'crop' => false, // \u662f\u5426\u4fdd\u7559\u5934\u90e8meta\u4fe1\u606f\u3002 'preserveHeaders' => true, // \u5982\u679c\u53d1\u73b0\u538b\u7f29\u540e\u6587\u4ef6\u5927\u5c0f\u6bd4\u539f\u6765\u8fd8\u5927\uff0c\u5219\u4f7f\u7528\u539f\u6765\u56fe\u7247 // \u6b64\u5c5e\u6027\u53ef\u80fd\u4f1a\u5f71\u54cd\u56fe\u7247\u81ea\u52a8\u7ea0\u6b63\u529f\u80fd 'noCompressIfLarger' => false, // \u5355\u4f4d\u5b57\u8282\uff0c\u5982\u679c\u56fe\u7247\u5927\u5c0f\u5c0f\u4e8e\u6b64\u503c\uff0c\u4e0d\u4f1a\u91c7\u7528\u538b\u7f29\u3002 'compressSize' => 0 ]);","title":"\u538b\u7f29\u56fe\u7247 (compress)"},{"location":"2.x/model-form-upload/#webuploader-on","text":"\u901a\u8fc7 on \u65b9\u6cd5\u53ef\u4ee5\u76d1\u542c WebUploader\u6587\u4ef6\u4e0a\u4f20\u76f8\u5173\u4e8b\u4ef6 $form->file('...') ->on('startUpload', <<<JS function () { console.log('\u6587\u4ef6\u5f00\u59cb\u4e0a\u4f20...', this); // \u4e0a\u4f20\u6587\u4ef6\u524d\u9644\u52a0\u81ea\u5b9a\u4e49\u53c2\u6570\u5230\u6587\u4ef6\u4e0a\u4f20\u63a5\u53e3 this.uploader.options.formData['custom_field'] = '...'; } <<<JS ) ->on('uploadFinished', <<<JS function () { console.log('\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6bd5'); } <<<JS );","title":"\u76d1\u542cWebUploader\u6587\u4ef6\u4e0a\u4f20\u4e8b\u4ef6 (on)"},{"location":"2.x/model-form-upload/#_7","text":"\u6587\u4ef6\u6216\u56fe\u7247\u4e0a\u4f20\u8868\u5355\u5b57\u6bb5\u8bf7\u4e0d\u8981\u5728\u6a21\u578b\u4e2d\u8bbe\u7f6e \u8bbf\u95ee\u5668 \u548c \u4fee\u6539\u5668 \u62fc\u63a5\u57df\u540d\uff0c\u5982\u679c\u4f60\u9700\u8981\u5728\u8bbf\u95ee\u7684\u65f6\u5019\u62fc\u63a5\u5b8c\u6574\u57df\u540d\uff0c\u53ef\u4ee5\u5728\u6a21\u578b\u4e2d\u5b9a\u4e49\u4e00\u4e2a public \u65b9\u6cd5 <?php use Illuminate\\Support\\Str; use Illuminate\\Support\\Facades\\Storage; class YourModel extends Model { // \u5b9a\u4e49\u4e00\u4e2apublic\u65b9\u6cd5\u8bbf\u95ee\u56fe\u7247\u6216\u6587\u4ef6 public function getImage() { if (Str::contains($this->image, '//')) { return $this->image; } return Storage::disk('admin')->url($this->image); } }","title":"\u6587\u4ef6/\u56fe\u7247\u57df\u540d\u62fc\u63a5"},{"location":"2.x/model-form-upload/#_8","text":"\u5982\u679c\u4f60\u9700\u8981\u4fdd\u5b58\u6587\u4ef6\u57df\u540d\u5230\u6570\u636e\u8868\uff0c\u53ef\u4ee5\u4f7f\u7528 saveFullUrl \u65b9\u6cd5 $form->image('avatar')->saveFullUrl(); $form->file('...')->saveFullUrl();","title":"\u4fdd\u5b58\u57df\u540d"},{"location":"2.x/model-form-upload/#change","text":"\u901a\u8fc7\u4ee5\u4e0b\u65b9\u6cd5\u53ef\u4ee5\u76d1\u542c\u6587\u4ef6 \u4e0a\u4f20\u6210\u529f \u6216\u6587\u4ef6 \u88ab\u5220\u9664 \u65f6\u4ea7\u751f\u7684\u53d8\u52a8 $file = $form->file('...'); Admin::script( <<<JS $('{$file->getElementClassSelector()} .file-input').on('change', function () { console.log('\u6587\u4ef6\u53d1\u751f\u53d8\u52a8', this.value); }); JS );","title":"\u76d1\u542c\u6587\u4ef6\u4e0a\u4f20\u53d8\u52a8 (change)"},{"location":"2.x/model-form-upload/#override","text":"\u901a\u8fc7 override \u65b9\u6cd5\u53ef\u4ee5\u5b9e\u73b0\u6587\u4ef6\u8986\u76d6\u4e0a\u4f20\u3002 $form->file('file')->override(); $form->image('img')->override();","title":"\u8986\u76d6\u4e0a\u4f20 (override)"},{"location":"2.x/model-form-upload/#_9","text":"","title":"\u56fe\u7247\u4e0a\u4f20\u5185\u7f6e\u65b9\u6cd5"},{"location":"2.x/model-form-upload/#_10","text":"\u53ef\u4ee5\u4f7f\u7528\u538b\u7f29\u3001\u88c1\u5207\u3001\u6dfb\u52a0\u6c34\u5370\u7b49\u5404\u79cd\u65b9\u6cd5,\u9700\u8981\u5148\u5b89\u88c5 intervention/image . \u66f4\u591a\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003[ Intervention ]\uff1a $form->image($column[, $label]); // \u4fee\u6539\u56fe\u7247\u4e0a\u4f20\u8def\u5f84\u548c\u6587\u4ef6\u540d $form->image($column[, $label])->move($dir, $name); // \u526a\u88c1\u56fe\u7247 $form->image($column[, $label])->crop(int $width, int $height, [int $x, int $y]); // \u52a0\u6c34\u5370 $form->image($column[, $label])->insert($watermark, 'center');","title":"\u538b\u7f29\u3001\u88c1\u5207\u3001\u6dfb\u52a0\u6c34\u5370\u7b49"},{"location":"2.x/model-form-upload/#_11","text":"\u8bbe\u7f6e\u6587\u4ef6\u4e0a\u4f20\u5c3a\u5bf8\u9650\u5236 \u53c2\u6570\uff1a array \u5355\u4f4d\u4e3a\u50cf\u7d20 - width \u6307\u5b9a\u5bbd\u5ea6 - height \u6307\u5b9a\u9ad8\u5ea6 - min_width \u6700\u5c0f\u5bbd\u5ea6 - min_height \u6700\u5c0f\u9ad8\u5ea6 - max_width \u6700\u5927\u5bbd\u5ea6 - max_height \u6700\u5927\u9ad8\u5ea6 - ratio \u5bbd\u9ad8\u6bd4 (width/height) // \u4e0a\u4f20\u5bbd\u5ea6\u4e3a100-300\u50cf\u7d20\u4e4b\u95f4\u7684\u56fe\u7247 $form->image('img')->dimensions(['min_width' = 100, 'max_width' => 300]);","title":"\u9650\u5236\u4e0a\u4f20\u56fe\u7247\u7684\u5c3a\u5bf8"},{"location":"2.x/model-form-upload/#_12","text":"\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u6cd5\u53ef\u4ee5\u628a\u56fe\u7247\u6216\u6587\u4ef6\u7684\u8def\u5f84\u4fdd\u5b58\u5728\u5355\u72ec\u7684\u9644\u4ef6\u8868\uff0c\u800c\u5f53\u524d\u7684\u56fe\u7247/\u6587\u4ef6\u5b57\u6bb5\u53ea\u4fdd\u5b58ID {tip} \u8fd9\u91cc\u7684\u793a\u4f8b\u7528\u7684\u662f\u5355\u56fe\u4e0a\u4f20\u8868\u5355\uff0c\u5982\u679c\u662f\u591a\u56fe\u7684\u8bdd\u53ef\u4ee5\u6309\u8fd9\u4e2a\u601d\u8def\u81ea\u884c\u8c03\u6574\u3002 \u56fe\u7247/\u6587\u4ef6\u8868\u7ed3\u6784 CREATE TABLE `images` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `path` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '', `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`) ) ENGINE=MyISAM AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; \u4f7f\u7528 $form->image('image1') ->saving(function ($value) use ($form) { if ($form->isEditing() && ! $value) { // \u7f16\u8f91\u9875\u9762\uff0c\u5220\u9664\u56fe\u7247\u903b\u8f91 Image::destroy($form->model()->image1); return; } // \u65b0\u589e\u6216\u7f16\u8f91\u9875\u9762\u4e0a\u4f20\u56fe\u7247 if ($value) { $model = Image::where('path', $value)->first(); } if (empty($model)) { $model = new Image(); } $model->path = $value; $model->save(); return $model->getKey(); }) ->customFormat(function ($v) { if (! $v) { return; } return Image::find((array) $v)->pluck('path')->toArray(); });","title":"\u628a\u56fe\u7247/\u6587\u4ef6\u8def\u5f84\u4fdd\u5b58\u5728\u5176\u4ed6\u6570\u636e\u8868"},{"location":"2.x/model-form-upload/#_13","text":"\u5982\u679c\u4f60\u53d1\u73b0\u65e0\u6cd5\u4e0a\u4f20\u6587\u4ef6\uff0c\u90a3\u4e48\u901a\u5e38\u6709\u51e0\u4e0b\u51e0\u70b9\u539f\u56e0\uff1a Laravel \u6587\u4ef6\u4e0a\u4f20\u914d\u7f6e\u4e0d\u6b63\u786e\uff0c\u8bf7\u68c0\u67e5 admin.upload.disk \u53c2\u6570\u3002\u5982\u679c\u4f60\u4e0d\u4e86\u89e3 laravel \u6587\u4ef6\u4e0a\u4f20\u529f\u80fd\uff0c\u8bf7\u9605\u8bfb\u6587\u6863 Laravel - \u6587\u4ef6\u5b58\u50a8 \u6587\u4ef6\u8fc7\u5927\uff0c\u9700\u8981\u8c03\u6574 php.ini \u7684 upload_max_filesize \u53c2\u6570 \u6587\u4ef6\u4e0a\u4f20\u76ee\u5f55\u6ca1\u6709\u5199\u6743\u9650 php \u6ca1\u6709\u5b89\u88c5\u6216\u6ca1\u6709\u5f00\u542f fileinfo \u6269\u5c55 \u5982\u679c\u4f60\u7684\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\u4e86\uff0c\u5374\u65e0\u6cd5\u6b63\u5e38\u8bbf\u95ee\uff0c\u90a3\u4e48\u53ef\u80fd\u662f .env \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 APP_URL \u53c2\u6570\u6ca1\u6709\u8bbe\u7f6e\u6b63\u786e\u3002","title":"\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\u6216\u65e0\u6cd5\u8bbf\u95ee\uff1f"},{"location":"2.x/model-form-validation/","text":"\u8868\u5355\u9a8c\u8bc1 rule model-form \u4f7f\u7528laravel\u7684\u9a8c\u8bc1\u89c4\u5219\u6765\u9a8c\u8bc1\u8868\u5355\u63d0\u4ea4\u7684\u6570\u636e\uff1a $form->text('title')->rules('required|min:3'); // \u590d\u6742\u7684\u9a8c\u8bc1\u89c4\u5219\u53ef\u4ee5\u5728\u56de\u8c03\u91cc\u9762\u5b9e\u73b0 $form->text('title')->rules(function (Form $form) { // \u5982\u679c\u4e0d\u662f\u7f16\u8f91\u72b6\u6001\uff0c\u5219\u6dfb\u52a0\u5b57\u6bb5\u552f\u4e00\u9a8c\u8bc1 if (!$id = $form->model()->id) { return 'unique:users,email_address'; } }); \u4e5f\u53ef\u4ee5\u7ed9\u9a8c\u8bc1\u89c4\u5219\u81ea\u5b9a\u4e49\u9519\u8bef\u63d0\u793a\u6d88\u606f\uff1a $form->text('code')->rules('required|regex:/^\\d+$/|min:10', [ 'regex' => 'code\u5fc5\u987b\u5168\u90e8\u4e3a\u6570\u5b57', 'min' => 'code\u4e0d\u80fd\u5c11\u4e8e10\u4e2a\u5b57\u7b26', ]); \u5982\u679c\u8981\u5141\u8bb8\u5b57\u6bb5\u4e3a\u7a7a\uff0c\u9996\u5148\u8981\u5728\u6570\u636e\u5e93\u7684\u8868\u91cc\u9762\u5bf9\u8be5\u5b57\u6bb5\u8bbe\u7f6e\u4e3a NULL \uff0c\u7136\u540e $form->text('title')->rules('nullable'); \u66f4\u591a\u89c4\u5219\u8bf7\u53c2\u8003 Validation \u3002 creationRules \u6b64\u65b9\u6cd5\u7528\u6cd5\u548c Form\\Field::rule \u7528\u6cd5\u5b8c\u5168\u4e00\u81f4\uff0c\u4e0d\u540c\u7684\u662f\u6b64\u65b9\u6cd5\u53ea\u6709\u5728\u65b0\u589e\u6570\u636e\u65f6\u624d\u6709\u6548\u3002 {tip} \u5982\u679c\u8c03\u7528\u4e86 creationRules \u65b9\u6cd5\uff0c\u5219 rule \u65b9\u6cd5\u8bbe\u7f6e\u7684\u9a8c\u8bc1\u89c4\u5219\u5c06\u4f1a\u88ab\u5ffd\u7565\u3002 updateRules \u6b64\u65b9\u6cd5\u7528\u6cd5\u548c Form\\Field::rule \u7528\u6cd5\u5b8c\u5168\u4e00\u81f4\uff0c\u4e0d\u540c\u7684\u662f\u6b64\u65b9\u6cd5\u53ea\u6709\u5728\u66f4\u65b0\u6570\u636e\u65f6\u624d\u6709\u6548\u3002 {tip} \u5982\u679c\u8c03\u7528\u4e86 updateRules \u65b9\u6cd5\uff0c\u5219 rule \u65b9\u6cd5\u8bbe\u7f6e\u7684\u9a8c\u8bc1\u89c4\u5219\u5c06\u4f1a\u88ab\u5ffd\u7565\u3002 responseValidationMessages \u901a\u8fc7 Form::responseValidationMessages \u65b9\u6cd5\u53ef\u4ee5\u8fd4\u56de\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u9519\u8bef\u4fe1\u606f\uff0c\u5e76\u4e2d\u65ad\u540e\u7eed\u903b\u8f91\uff0c\u7528\u6cd5\u5982\u4e0b\uff1a // \u7f16\u8f91\u63d0\u4ea4\u65f6\u662f\u201cPUT\u201d\u65b9\u6cd5 if (request()->getMethod() == 'PUT') { if (...) { // \u4f60\u7684\u9a8c\u8bc1\u903b\u8f91 $form->responseValidationMessages('title', 'title\u683c\u5f0f\u9519\u8bef'); // \u5982\u6709\u591a\u4e2a\u9519\u8bef\u4fe1\u606f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f20\u6570\u7ec4 $form->responseValidationMessages('content', ['content\u683c\u5f0f\u9519\u8bef', 'content\u4e0d\u80fd\u4e3a\u7a7a']); } } $form->text('title'); $form->text('content'); \u4e5f\u53ef\u4ee5\u5728 submitted \u4e8b\u4ef6\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5 $form->submitted(function ($form) { if (...) { // \u4f60\u7684\u9a8c\u8bc1\u903b\u8f91 $form->responseValidationMessages('title', 'title\u683c\u5f0f\u9519\u8bef'); // \u5982\u6709\u591a\u4e2a\u9519\u8bef\u4fe1\u606f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f20\u6570\u7ec4 $form->responseValidationMessages('content', ['content\u683c\u5f0f\u9519\u8bef', 'content\u4e0d\u80fd\u4e3a\u7a7a']); } }); \u524d\u7aef\u9a8c\u8bc1 \u7cfb\u7edf\u7ee7\u627f\u4e86 bootstrap-validator \u8fdb\u884c\u524d\u7aef\u8868\u5355\u9a8c\u8bc1\uff0c\u652f\u6301H5\u8868\u5355\u7c7b\u578b\u7684\u9a8c\u8bc1\u3002 {tip} \u4e0d\u652f\u6301H5\u7684\u6d4f\u89c8\u5668\u4e5f\u53ef\u4ee5\u4f7f\u7528\u524d\u7aef\u9a8c\u8bc1\uff0c\u7cfb\u7edf\u5df2\u7ecf\u505a\u597d\u4e86\u517c\u5bb9\u3002\u5927\u90e8\u5206\u8868\u5355\u90fd\u652f\u6301\u524d\u7aef\u548c\u540e\u7aef\u9a8c\u8bc1\uff0c\u4e24\u8005\u53ef\u4ee5\u540c\u65f6\u5de5\u4f5c\u4e0d\u51b2\u7a81\uff0c\u5c11\u90e8\u5206\u8868\u5355\u524d\u7aef\u9a8c\u8bc1\u65e0\u6548\u3002 H5\u9a8c\u8bc1 required \u5fc5\u586b $form->text('title')->required(); number \u53ea\u5141\u8bb8\u8f93\u5165\u6570\u5b57 $form->text('age')->type('number'); \u9650\u5236\u8303\u56f4 // \u53ea\u5141\u8bb8\u8f93\u5165 10-60 \u8303\u56f4\u5185\u7684\u6570\u5b57 $form->text('age') ->type('number') ->attribute('min', 10) ->attribute('max', 60); email \u90ae\u7bb1 $form->email('email'); url \u94fe\u63a5 $form->text('website')->type('url'); \u5176\u5b83 minLength \u9650\u5236\u5b57\u7b26\u6700\u5c0f\u957f\u5ea6 $form->text('title')->minLength(20); // \u8bbe\u7f6e\u9519\u8bef\u4fe1\u606f $form->text('title')->minLength(20, '\u6700\u5c11\u8f93\u516520\u4e2a\u5b57\u7b26'); maxLength \u9650\u5236\u5b57\u7b26\u6700\u5927\u957f\u5ea6 $form->text('title')->maxLength(50); // \u8bbe\u7f6e\u9519\u8bef\u4fe1\u606f $form->text('title')->minLength(50, '\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26'); same \u9650\u5236\u5f53\u524d\u5b57\u6bb5\u503c\u5fc5\u987b\u4e0e\u7ed9\u5b9a\u5b57\u6bb5\u7684\u503c\u76f8\u7b49\uff0c\u5e38\u7528\u4e8e\u5bc6\u7801\u786e\u8ba4 $form->password('password'); $form->password('password_confirm')->same('password'); // \u8bbe\u7f6e\u9519\u8bef\u4fe1\u606f $form->password('password_confirm')->same('password', '\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4'); \u81ea\u5b9a\u4e49 \u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u6cd5\u81ea\u5b9a\u4e49\u524d\u7aef\u9a8c\u8bc1\u89c4\u5219\u3002 \u5728 app/Admin/bootstrap.php \u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u4ee3\u7801\u3002 use Dcat\\Admin\\Form\\Field; Field\\Text::macro('len', function (int $length, ?string $error = null) { // \u524d\u7aef\u9a8c\u8bc1\u903b\u8f91\u6269\u5c55 Admin::script( <<<'JS' Dcat.validator.extend('len', function ($el) { return $el.val().length != $el.attr('data-len'); }); JS ); // \u540c\u65f6\u6dfb\u52a0\u540e\u7aef\u9a8c\u8bc1\u903b\u8f91\uff0c\u8fd9\u4e2a\u53ef\u4ee5\u770b\u9700\u8981 $this->rules('size:'.$length); return $this->attribute([ 'data-len' => $length, 'data-len-error' => str_replace( [':attribute', ':len'], [$this->label, $length], $error ?: \"\u53ea\u80fd\u8f93\u5165:len\u4e2a\u5b57\u7b26\" ), ]); }); \u4f7f\u7528 $form->text('name')->len(10);","title":"\u8868\u5355\u9a8c\u8bc1"},{"location":"2.x/model-form-validation/#_1","text":"","title":"\u8868\u5355\u9a8c\u8bc1"},{"location":"2.x/model-form-validation/#rule","text":"model-form \u4f7f\u7528laravel\u7684\u9a8c\u8bc1\u89c4\u5219\u6765\u9a8c\u8bc1\u8868\u5355\u63d0\u4ea4\u7684\u6570\u636e\uff1a $form->text('title')->rules('required|min:3'); // \u590d\u6742\u7684\u9a8c\u8bc1\u89c4\u5219\u53ef\u4ee5\u5728\u56de\u8c03\u91cc\u9762\u5b9e\u73b0 $form->text('title')->rules(function (Form $form) { // \u5982\u679c\u4e0d\u662f\u7f16\u8f91\u72b6\u6001\uff0c\u5219\u6dfb\u52a0\u5b57\u6bb5\u552f\u4e00\u9a8c\u8bc1 if (!$id = $form->model()->id) { return 'unique:users,email_address'; } }); \u4e5f\u53ef\u4ee5\u7ed9\u9a8c\u8bc1\u89c4\u5219\u81ea\u5b9a\u4e49\u9519\u8bef\u63d0\u793a\u6d88\u606f\uff1a $form->text('code')->rules('required|regex:/^\\d+$/|min:10', [ 'regex' => 'code\u5fc5\u987b\u5168\u90e8\u4e3a\u6570\u5b57', 'min' => 'code\u4e0d\u80fd\u5c11\u4e8e10\u4e2a\u5b57\u7b26', ]); \u5982\u679c\u8981\u5141\u8bb8\u5b57\u6bb5\u4e3a\u7a7a\uff0c\u9996\u5148\u8981\u5728\u6570\u636e\u5e93\u7684\u8868\u91cc\u9762\u5bf9\u8be5\u5b57\u6bb5\u8bbe\u7f6e\u4e3a NULL \uff0c\u7136\u540e $form->text('title')->rules('nullable'); \u66f4\u591a\u89c4\u5219\u8bf7\u53c2\u8003 Validation \u3002","title":"rule"},{"location":"2.x/model-form-validation/#creationrules","text":"\u6b64\u65b9\u6cd5\u7528\u6cd5\u548c Form\\Field::rule \u7528\u6cd5\u5b8c\u5168\u4e00\u81f4\uff0c\u4e0d\u540c\u7684\u662f\u6b64\u65b9\u6cd5\u53ea\u6709\u5728\u65b0\u589e\u6570\u636e\u65f6\u624d\u6709\u6548\u3002 {tip} \u5982\u679c\u8c03\u7528\u4e86 creationRules \u65b9\u6cd5\uff0c\u5219 rule \u65b9\u6cd5\u8bbe\u7f6e\u7684\u9a8c\u8bc1\u89c4\u5219\u5c06\u4f1a\u88ab\u5ffd\u7565\u3002","title":"creationRules"},{"location":"2.x/model-form-validation/#updaterules","text":"\u6b64\u65b9\u6cd5\u7528\u6cd5\u548c Form\\Field::rule \u7528\u6cd5\u5b8c\u5168\u4e00\u81f4\uff0c\u4e0d\u540c\u7684\u662f\u6b64\u65b9\u6cd5\u53ea\u6709\u5728\u66f4\u65b0\u6570\u636e\u65f6\u624d\u6709\u6548\u3002 {tip} \u5982\u679c\u8c03\u7528\u4e86 updateRules \u65b9\u6cd5\uff0c\u5219 rule \u65b9\u6cd5\u8bbe\u7f6e\u7684\u9a8c\u8bc1\u89c4\u5219\u5c06\u4f1a\u88ab\u5ffd\u7565\u3002","title":"updateRules"},{"location":"2.x/model-form-validation/#responsevalidationmessages","text":"\u901a\u8fc7 Form::responseValidationMessages \u65b9\u6cd5\u53ef\u4ee5\u8fd4\u56de\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u9519\u8bef\u4fe1\u606f\uff0c\u5e76\u4e2d\u65ad\u540e\u7eed\u903b\u8f91\uff0c\u7528\u6cd5\u5982\u4e0b\uff1a // \u7f16\u8f91\u63d0\u4ea4\u65f6\u662f\u201cPUT\u201d\u65b9\u6cd5 if (request()->getMethod() == 'PUT') { if (...) { // \u4f60\u7684\u9a8c\u8bc1\u903b\u8f91 $form->responseValidationMessages('title', 'title\u683c\u5f0f\u9519\u8bef'); // \u5982\u6709\u591a\u4e2a\u9519\u8bef\u4fe1\u606f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f20\u6570\u7ec4 $form->responseValidationMessages('content', ['content\u683c\u5f0f\u9519\u8bef', 'content\u4e0d\u80fd\u4e3a\u7a7a']); } } $form->text('title'); $form->text('content'); \u4e5f\u53ef\u4ee5\u5728 submitted \u4e8b\u4ef6\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5 $form->submitted(function ($form) { if (...) { // \u4f60\u7684\u9a8c\u8bc1\u903b\u8f91 $form->responseValidationMessages('title', 'title\u683c\u5f0f\u9519\u8bef'); // \u5982\u6709\u591a\u4e2a\u9519\u8bef\u4fe1\u606f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f20\u6570\u7ec4 $form->responseValidationMessages('content', ['content\u683c\u5f0f\u9519\u8bef', 'content\u4e0d\u80fd\u4e3a\u7a7a']); } });","title":"responseValidationMessages"},{"location":"2.x/model-form-validation/#_2","text":"\u7cfb\u7edf\u7ee7\u627f\u4e86 bootstrap-validator \u8fdb\u884c\u524d\u7aef\u8868\u5355\u9a8c\u8bc1\uff0c\u652f\u6301H5\u8868\u5355\u7c7b\u578b\u7684\u9a8c\u8bc1\u3002 {tip} \u4e0d\u652f\u6301H5\u7684\u6d4f\u89c8\u5668\u4e5f\u53ef\u4ee5\u4f7f\u7528\u524d\u7aef\u9a8c\u8bc1\uff0c\u7cfb\u7edf\u5df2\u7ecf\u505a\u597d\u4e86\u517c\u5bb9\u3002\u5927\u90e8\u5206\u8868\u5355\u90fd\u652f\u6301\u524d\u7aef\u548c\u540e\u7aef\u9a8c\u8bc1\uff0c\u4e24\u8005\u53ef\u4ee5\u540c\u65f6\u5de5\u4f5c\u4e0d\u51b2\u7a81\uff0c\u5c11\u90e8\u5206\u8868\u5355\u524d\u7aef\u9a8c\u8bc1\u65e0\u6548\u3002","title":"\u524d\u7aef\u9a8c\u8bc1"},{"location":"2.x/model-form-validation/#h5","text":"","title":"H5\u9a8c\u8bc1"},{"location":"2.x/model-form-validation/#required","text":"\u5fc5\u586b $form->text('title')->required();","title":"required"},{"location":"2.x/model-form-validation/#number","text":"\u53ea\u5141\u8bb8\u8f93\u5165\u6570\u5b57 $form->text('age')->type('number'); \u9650\u5236\u8303\u56f4 // \u53ea\u5141\u8bb8\u8f93\u5165 10-60 \u8303\u56f4\u5185\u7684\u6570\u5b57 $form->text('age') ->type('number') ->attribute('min', 10) ->attribute('max', 60);","title":"number"},{"location":"2.x/model-form-validation/#email","text":"\u90ae\u7bb1 $form->email('email');","title":"email"},{"location":"2.x/model-form-validation/#url","text":"\u94fe\u63a5 $form->text('website')->type('url');","title":"url"},{"location":"2.x/model-form-validation/#_3","text":"","title":"\u5176\u5b83"},{"location":"2.x/model-form-validation/#minlength","text":"\u9650\u5236\u5b57\u7b26\u6700\u5c0f\u957f\u5ea6 $form->text('title')->minLength(20); // \u8bbe\u7f6e\u9519\u8bef\u4fe1\u606f $form->text('title')->minLength(20, '\u6700\u5c11\u8f93\u516520\u4e2a\u5b57\u7b26');","title":"minLength"},{"location":"2.x/model-form-validation/#maxlength","text":"\u9650\u5236\u5b57\u7b26\u6700\u5927\u957f\u5ea6 $form->text('title')->maxLength(50); // \u8bbe\u7f6e\u9519\u8bef\u4fe1\u606f $form->text('title')->minLength(50, '\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26');","title":"maxLength"},{"location":"2.x/model-form-validation/#same","text":"\u9650\u5236\u5f53\u524d\u5b57\u6bb5\u503c\u5fc5\u987b\u4e0e\u7ed9\u5b9a\u5b57\u6bb5\u7684\u503c\u76f8\u7b49\uff0c\u5e38\u7528\u4e8e\u5bc6\u7801\u786e\u8ba4 $form->password('password'); $form->password('password_confirm')->same('password'); // \u8bbe\u7f6e\u9519\u8bef\u4fe1\u606f $form->password('password_confirm')->same('password', '\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4');","title":"same"},{"location":"2.x/model-form-validation/#_4","text":"\u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u6cd5\u81ea\u5b9a\u4e49\u524d\u7aef\u9a8c\u8bc1\u89c4\u5219\u3002 \u5728 app/Admin/bootstrap.php \u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u4ee3\u7801\u3002 use Dcat\\Admin\\Form\\Field; Field\\Text::macro('len', function (int $length, ?string $error = null) { // \u524d\u7aef\u9a8c\u8bc1\u903b\u8f91\u6269\u5c55 Admin::script( <<<'JS' Dcat.validator.extend('len', function ($el) { return $el.val().length != $el.attr('data-len'); }); JS ); // \u540c\u65f6\u6dfb\u52a0\u540e\u7aef\u9a8c\u8bc1\u903b\u8f91\uff0c\u8fd9\u4e2a\u53ef\u4ee5\u770b\u9700\u8981 $this->rules('size:'.$length); return $this->attribute([ 'data-len' => $length, 'data-len-error' => str_replace( [':attribute', ':len'], [$this->label, $length], $error ?: \"\u53ea\u80fd\u8f93\u5165:len\u4e2a\u5b57\u7b26\" ), ]); }); \u4f7f\u7528 $form->text('name')->len(10);","title":"\u81ea\u5b9a\u4e49"},{"location":"2.x/model-form-when/","text":"\u8868\u5355\u5b57\u6bb5\u52a8\u6001\u663e\u793a {tip} \u6b64\u529f\u80fd\u5728 \u5de5\u5177\u8868\u5355 \u4e2d\u4e00\u6837\u6709\u6548 \u8868\u5355\u5b57\u6bb5\u52a8\u6001\u663e\u793a\u662f\u6307\uff0c\u5728\u9009\u62e9\u8868\u5355\u9879\u7684\u6307\u5b9a\u7684\u9009\u9879\u65f6\uff0c\u8054\u52a8\u663e\u793a\u5176\u4ed6\u7684\u8868\u5355\u9879\u3002 \u76ee\u524d\u652f\u6301\u7684\u8868\u5355\u8054\u52a8\u7684\u7ec4\u4ef6\u6709\uff1a select multipleSelect radio checkbox \u4f7f\u7528\u65b9\u6cd5 \u53ef\u4ee5\u5c06\u4e0a\u9762\u7684\u7ec4\u4ef6\u5206\u4e3a\u5355\u9009\u548c\u591a\u9009\u4e24\u79cd\u7c7b\u578b\uff0c\u5176\u4e2d select \u3001 radio \u4e3a\u5355\u9009\u7ec4\u4ef6\uff0c\u5176\u5b83\u4e3a\u591a\u9009\u7ec4\u4ef6 \u5355\u9009\u7ec4\u4ef6 \u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u9009\u62e9\u4e0d\u540c\u7684\u56fd\u7c4d\u7c7b\u578b\uff0c\u5c06\u4f1a\u5207\u6362\u9009\u62e9\u4e0d\u540c\u7684\u8054\u52a8\u8868\u5355\u9879\uff1a $form->radio('radio') ->when([1, 4], function (Form $form) { // \u503c\u4e3a1\u548c4\u65f6\u663e\u793a\u6587\u672c\u6846 $form->text('text1'); $form->text('text2'); $form->text('text3'); }) ->when(2, function (Form $form) { $form->editor('editor'); }) ->when(3, function (Form $form) { $form->image('image'); }) ->options([ 1 => '\u663e\u793a\u6587\u672c\u6846', 2 => '\u663e\u793a\u7f16\u8f91\u5668', 3 => '\u663e\u793a\u6587\u4ef6\u4e0a\u4f20', 4 => '\u8fd8\u662f\u663e\u793a\u6587\u672c\u6846', ]) ->default(1); \u4e0a\u4f8b\u4e2d\uff0c\u65b9\u6cd5 when(1, $callback) \u7b49\u6548\u4e8e when('=', 1, $callback) , \u5982\u679c\u7528\u64cd\u4f5c\u7b26 = \uff0c\u5219\u53ef\u4ee5\u7701\u7565\u8fd9\u4e2a\u53c2\u6570 \u540c\u65f6\u4e5f\u652f\u6301\u8fd9\u4e9b\u64cd\u4f5c\u7b26\uff0c = \u3001 > \u3001 >= \u3001 < \u3001 <= \u3001 != \u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a $form->radio('check') ->when('>', 1, function () { })->when('>=', 2, function () { }); select \u7ec4\u4ef6\u7684\u4f7f\u7528\u65b9\u6cd5\u548c radio \u662f\u4e00\u6837\u7684\u3002 \u53e6\u5916\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u4f7f\u7528\u52a8\u6001\u663e\u793a\u529f\u80fd\u4e4b\u540e\u8868\u5355\u4e0d\u80fd\u4f7f\u7528 required \u65b9\u6cd5\uff0c\u5e94\u8be5\u4f7f\u7528 required_if \u4ee3\u66ff\uff0c\u5982 $form->radio('type') ->when([1, 4], function (Form $form) { $form->text('text1') ->rules('required_if:type,1,4') // \u4f7f\u7528required_if ->setLabelClass(['asterisk']); // \u663e\u793a * \u53f7 }); \u591a\u9009\u7ec4\u4ef6 \u591a\u9009\u7ec4\u4ef6\u652f\u6301\u4e24\u4e2a\u64cd\u4f5c\u7b26\uff1a in \u3001 notIn $form->checkbox('nationality', '\u56fd\u7c4d') ->options([ 1 => '\u4e2d\u56fd', 2 => '\u5916\u56fd', ])->when([1, 2], function (Form $form) { $form->text('name', '\u59d3\u540d'); $form->text('idcard', '\u8eab\u4efd\u8bc1'); })->when('notIn', 2, function (Form $form) { $form->text('name', '\u59d3\u540d'); $form->text('passport', '\u62a4\u7167'); }); multipleSelect \u7ec4\u4ef6\u7684\u4f7f\u7528\u65b9\u6cd5\u548c checkbox \u662f\u4e00\u6837\u7684\u3002 \u5e03\u5c40 \u8868\u5355\u52a8\u6001\u663e\u793a\u529f\u80fd\u652f\u6301\u7ed3\u5408 column \u4ee5\u53ca tab \u5e03\u5c40\u529f\u80fd\u4e00\u8d77\u4f7f\u7528\uff0c\u7528\u6cd5\u5982\u4e0b tab \u5e03\u5c40 $form->tab('Radio', function (Form $form) { $form->display('title')->value('\u5355\u9009\u6846\u52a8\u6001\u5c55\u793a'); $form->radio('radio') ->when([1, 4], function (Form $form) { $form->text('text1'); $form->text('text2'); }) ->when(2, function (Form $form) { $form->editor('editor'); }) ->options($this->options) ->default(1); }); column \u5e03\u5c40 $form->column(6, function (Form $form) { $form->radio('radio') ->when([1, 4], function (Form $form) { $form->text('text1'); $form->text('text2'); }) ->when(2, function (Form $form) { $form->editor('editor'); }) ->options($this->options) ->default(1); });","title":"\u8868\u5355\u5b57\u6bb5\u52a8\u6001\u663e\u793a"},{"location":"2.x/model-form-when/#_1","text":"{tip} \u6b64\u529f\u80fd\u5728 \u5de5\u5177\u8868\u5355 \u4e2d\u4e00\u6837\u6709\u6548 \u8868\u5355\u5b57\u6bb5\u52a8\u6001\u663e\u793a\u662f\u6307\uff0c\u5728\u9009\u62e9\u8868\u5355\u9879\u7684\u6307\u5b9a\u7684\u9009\u9879\u65f6\uff0c\u8054\u52a8\u663e\u793a\u5176\u4ed6\u7684\u8868\u5355\u9879\u3002 \u76ee\u524d\u652f\u6301\u7684\u8868\u5355\u8054\u52a8\u7684\u7ec4\u4ef6\u6709\uff1a select multipleSelect radio checkbox","title":"\u8868\u5355\u5b57\u6bb5\u52a8\u6001\u663e\u793a"},{"location":"2.x/model-form-when/#_2","text":"\u53ef\u4ee5\u5c06\u4e0a\u9762\u7684\u7ec4\u4ef6\u5206\u4e3a\u5355\u9009\u548c\u591a\u9009\u4e24\u79cd\u7c7b\u578b\uff0c\u5176\u4e2d select \u3001 radio \u4e3a\u5355\u9009\u7ec4\u4ef6\uff0c\u5176\u5b83\u4e3a\u591a\u9009\u7ec4\u4ef6","title":"\u4f7f\u7528\u65b9\u6cd5"},{"location":"2.x/model-form-when/#_3","text":"\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u9009\u62e9\u4e0d\u540c\u7684\u56fd\u7c4d\u7c7b\u578b\uff0c\u5c06\u4f1a\u5207\u6362\u9009\u62e9\u4e0d\u540c\u7684\u8054\u52a8\u8868\u5355\u9879\uff1a $form->radio('radio') ->when([1, 4], function (Form $form) { // \u503c\u4e3a1\u548c4\u65f6\u663e\u793a\u6587\u672c\u6846 $form->text('text1'); $form->text('text2'); $form->text('text3'); }) ->when(2, function (Form $form) { $form->editor('editor'); }) ->when(3, function (Form $form) { $form->image('image'); }) ->options([ 1 => '\u663e\u793a\u6587\u672c\u6846', 2 => '\u663e\u793a\u7f16\u8f91\u5668', 3 => '\u663e\u793a\u6587\u4ef6\u4e0a\u4f20', 4 => '\u8fd8\u662f\u663e\u793a\u6587\u672c\u6846', ]) ->default(1); \u4e0a\u4f8b\u4e2d\uff0c\u65b9\u6cd5 when(1, $callback) \u7b49\u6548\u4e8e when('=', 1, $callback) , \u5982\u679c\u7528\u64cd\u4f5c\u7b26 = \uff0c\u5219\u53ef\u4ee5\u7701\u7565\u8fd9\u4e2a\u53c2\u6570 \u540c\u65f6\u4e5f\u652f\u6301\u8fd9\u4e9b\u64cd\u4f5c\u7b26\uff0c = \u3001 > \u3001 >= \u3001 < \u3001 <= \u3001 != \u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a $form->radio('check') ->when('>', 1, function () { })->when('>=', 2, function () { }); select \u7ec4\u4ef6\u7684\u4f7f\u7528\u65b9\u6cd5\u548c radio \u662f\u4e00\u6837\u7684\u3002 \u53e6\u5916\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u4f7f\u7528\u52a8\u6001\u663e\u793a\u529f\u80fd\u4e4b\u540e\u8868\u5355\u4e0d\u80fd\u4f7f\u7528 required \u65b9\u6cd5\uff0c\u5e94\u8be5\u4f7f\u7528 required_if \u4ee3\u66ff\uff0c\u5982 $form->radio('type') ->when([1, 4], function (Form $form) { $form->text('text1') ->rules('required_if:type,1,4') // \u4f7f\u7528required_if ->setLabelClass(['asterisk']); // \u663e\u793a * \u53f7 });","title":"\u5355\u9009\u7ec4\u4ef6"},{"location":"2.x/model-form-when/#_4","text":"\u591a\u9009\u7ec4\u4ef6\u652f\u6301\u4e24\u4e2a\u64cd\u4f5c\u7b26\uff1a in \u3001 notIn $form->checkbox('nationality', '\u56fd\u7c4d') ->options([ 1 => '\u4e2d\u56fd', 2 => '\u5916\u56fd', ])->when([1, 2], function (Form $form) { $form->text('name', '\u59d3\u540d'); $form->text('idcard', '\u8eab\u4efd\u8bc1'); })->when('notIn', 2, function (Form $form) { $form->text('name', '\u59d3\u540d'); $form->text('passport', '\u62a4\u7167'); }); multipleSelect \u7ec4\u4ef6\u7684\u4f7f\u7528\u65b9\u6cd5\u548c checkbox \u662f\u4e00\u6837\u7684\u3002","title":"\u591a\u9009\u7ec4\u4ef6"},{"location":"2.x/model-form-when/#_5","text":"\u8868\u5355\u52a8\u6001\u663e\u793a\u529f\u80fd\u652f\u6301\u7ed3\u5408 column \u4ee5\u53ca tab \u5e03\u5c40\u529f\u80fd\u4e00\u8d77\u4f7f\u7528\uff0c\u7528\u6cd5\u5982\u4e0b tab \u5e03\u5c40 $form->tab('Radio', function (Form $form) { $form->display('title')->value('\u5355\u9009\u6846\u52a8\u6001\u5c55\u793a'); $form->radio('radio') ->when([1, 4], function (Form $form) { $form->text('text1'); $form->text('text2'); }) ->when(2, function (Form $form) { $form->editor('editor'); }) ->options($this->options) ->default(1); }); column \u5e03\u5c40 $form->column(6, function (Form $form) { $form->radio('radio') ->when([1, 4], function (Form $form) { $form->text('text1'); $form->text('text2'); }) ->when(2, function (Form $form) { $form->editor('editor'); }) ->options($this->options) ->default(1); });","title":"\u5e03\u5c40"},{"location":"2.x/model-form/","text":"\u8868\u5355\u57fa\u672c\u4f7f\u7528 \u793a\u4f8b Dcat\\Admin\\Form \u7c7b\u7528\u4e8e\u5feb\u901f\u751f\u6210\u8868\u5355\u9875\u9762\uff0c\u5148\u6765\u4e2a\u4f8b\u5b50\uff0c\u6570\u636e\u5e93\u4e2d\u6709 movies \u8868 CREATE TABLE `movies` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `director` int(10) unsigned NOT NULL, `describe` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `rate` tinyint unsigned NOT NULL, `released` enum(0, 1), `release_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; \u5bf9\u5e94\u7684\u6570\u636e\u6a21\u578b\u4e3a App\\Models\\Movie \uff0c\u6570\u636e\u4ed3\u5e93\u4e3a App\\Admin\\Repositories\\Movie \uff1a use App\\Admin\\Repositories\\Movie; use Dcat\\Admin\\Form; use Dcat\\Admin\\Admin; $form = Form::make(new Movie(), function (Form $form) { // \u663e\u793a\u8bb0\u5f55id $form->display('id', 'ID'); // \u6dfb\u52a0text\u7c7b\u578b\u7684input\u6846 $form->text('title', '\u7535\u5f71\u6807\u9898'); $directors = [ 1 => 'John', 2 => 'Smith', 3 => 'Kate', ]; $form->select('director', '\u5bfc\u6f14')->options($directors); // \u6dfb\u52a0describe\u7684textarea\u8f93\u5165\u6846 $form->textarea('describe', '\u7b80\u4ecb'); // \u6570\u5b57\u8f93\u5165\u6846 $form->number('rate', '\u6253\u5206'); // \u6dfb\u52a0\u5f00\u5173\u64cd\u4f5c $form->switch('released', '\u53d1\u5e03\uff1f'); // \u6dfb\u52a0\u65e5\u671f\u65f6\u95f4\u9009\u62e9\u6846 $form->datetime('release_at', '\u53d1\u5e03\u65f6\u95f4'); // \u4e24\u4e2a\u65f6\u95f4\u663e\u793a $form->display('created_at', '\u521b\u5efa\u65f6\u95f4'); $form->display('updated_at', '\u4fee\u6539\u65f6\u95f4'); }); \u6570\u636e\u4ed3\u5e93 \u6570\u636e\u4ed3\u5e93( Repository )\u662f\u4e00\u4e2a\u53ef\u4ee5\u63d0\u4f9b\u7279\u5b9a\u63a5\u53e3\u5bf9\u6570\u636e\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u7684\u7c7b\uff0c\u901a\u8fc7\u6570\u636e\u4ed3\u5e93\u7684\u5f15\u5165\uff0c\u53ef\u4ee5\u8ba9\u9875\u9762\u7684\u6784\u5efa\u4e0d\u518d\u5173\u5fc3\u6570\u636e\u8bfb\u5199\u529f\u80fd\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u5f00\u53d1\u8005\u53ea\u9700\u8981\u5b9e\u73b0\u7279\u5b9a\u7684\u64cd\u4f5c\u63a5\u53e3\u5373\u53ef\u8f7b\u677e\u5207\u6362\u6570\u636e\u6e90\u3002\u5173\u4e8e\u6570\u636e\u4ed3\u5e93\u7684\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003\u6587\u6863 \u6570\u636e\u4ed3\u5e93 \u3002 \u8868\u5355\u5b9a\u4e49 \u63a8\u8350\u4f7f\u7528\u4ee5\u4e0b\u65b9\u5f0f\u6784\u5efa\u8868\u5355 use App\\Admin\\Repositories\\Movie; use Dcat\\Admin\\Form; use Dcat\\Admin\\Admin; $form = Form::make(new Movie, function (Form $form) { // \u663e\u793a\u8bb0\u5f55id $form->display('id', 'ID'); $form->select('director', '\u5bfc\u6f14')->options($directors); ... }); \u83b7\u53d6\u5f53\u524d\u6a21\u578b\u6570\u636e \u5728\u95ed\u5305\u5185\u53ef\u4ee5\u83b7\u53d6\u5230\u5f53\u524d\u6a21\u578b\u7684\u6570\u636e\uff08\u7f16\u8f91\uff09 Form::make(new Movie, function (Form $form) { // \u663e\u793a\u8bb0\u5f55id $form->display('id', 'ID'); // \u83b7\u53d6\u6a21\u578b\u6570\u636e\uff0c\u5982\u679c\"status == 1\"\u5219\u663e\u793a\"rate\"\u5b57\u6bb5 if ($form->model()->status == 1) { $form->number('rate'); } $form->select('director', '\u5bfc\u6f14')->options($directors); ... }); \u81ea\u5b9a\u4e49\u5de5\u5177 \u8868\u5355\u53f3\u4e0a\u89d2\u9ed8\u8ba4\u6709\u8fd4\u56de\u548c\u8df3\u8f6c\u5217\u8868\u4e24\u4e2a\u6309\u94ae\u5de5\u5177, \u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u65b9\u5f0f\u4fee\u6539\u5b83: $form->tools(function (Form\\Tools $tools) { // \u53bb\u6389\u8df3\u8f6c\u5217\u8868\u6309\u94ae $tools->disableList(); // \u53bb\u6389\u8df3\u8f6c\u8be6\u60c5\u9875\u6309\u94ae $tools->disableView(); // \u53bb\u6389\u5220\u9664\u6309\u94ae $tools->disableDelete(); // \u6dfb\u52a0\u4e00\u4e2a\u6309\u94ae, \u53c2\u6570\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32, \u533f\u540d\u51fd\u6570, \u6216\u8005\u5b9e\u73b0\u4e86Renderable\u6216Htmlable\u63a5\u53e3\u7684\u5bf9\u8c61\u5b9e\u4f8b $tools->append('<a class=\"btn btn-sm btn-danger\"><i class=\"fa fa-trash\"></i>&nbsp;&nbsp;delete</a>'); }); // \u53bb\u9664\u6574\u4e2a\u5de5\u5177\u680f\u5185\u5bb9 $form->disableHeader(); // \u4e5f\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u53bb\u9664\u5de5\u5177\u680f\u7684\u9ed8\u8ba4\u6309\u94ae $form->disableListButton(); $form->disableViewButton(); $form->disableDeleteButton(); \u81ea\u5b9a\u4e49\u590d\u6742\u5de5\u5177\u6309\u94ae \u8bf7\u53c2\u8003\u6587\u6863 \u8868\u5355\u52a8\u4f5c \u8868\u5355\u5e95\u90e8 \u4f7f\u7528\u4e0b\u9762\u7684\u65b9\u6cd5\u53bb\u6389form\u5e95\u90e8\u7684\u5143\u7d20 $form->footer(function ($footer) { // \u53bb\u6389`\u91cd\u7f6e`\u6309\u94ae $footer->disableReset(); // \u53bb\u6389`\u63d0\u4ea4`\u6309\u94ae $footer->disableSubmit(); // \u53bb\u6389`\u67e5\u770b`checkbox $footer->disableViewCheck(); // \u53bb\u6389`\u7ee7\u7eed\u7f16\u8f91`checkbox $footer->disableEditingCheck(); // \u53bb\u6389`\u7ee7\u7eed\u521b\u5efa`checkbox $footer->disableCreatingCheck(); // \u8bbe\u7f6e`\u67e5\u770b`\u9ed8\u8ba4\u9009\u4e2d $footer->defaultViewChecked(); // \u8bbe\u7f6e`\u7ee7\u7eed\u7f16\u8f91`\u9ed8\u8ba4\u9009\u4e2d $footer->defaultEditingChecked(); // \u8bbe\u7f6e`\u7ee7\u7eed\u521b\u5efa`\u9ed8\u8ba4\u9009\u4e2d $footer->defaultCreatingChecked(); }); // \u53bb\u9664\u6574\u4e2a\u5e95\u90e8\u5185\u5bb9 $form->disableFooter(); // \u4e5f\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u53bb\u5e95\u90e8\u5143\u7d20 $form->disableSubmitButton(); $form->disableResetButton(); $form->disableViewCheck(); $form->disableEditingCheck(); $form->disableCreatingCheck(); // \u8bbe\u7f6e`\u67e5\u770b`\u9ed8\u8ba4\u9009\u4e2d $form->defaultViewChecked(); // \u8bbe\u7f6e`\u7ee7\u7eed\u7f16\u8f91`\u9ed8\u8ba4\u9009\u4e2d $form->defaultEditingChecked(); // \u8bbe\u7f6e`\u7ee7\u7eed\u521b\u5efa`\u9ed8\u8ba4\u9009\u4e2d $form->defaultCreatingChecked(); \u81ea\u5b9a\u4e49\u89c6\u56fe $form->footer(function ($footer) { $footer->view('...', [...]); }); \u5e38\u7528\u65b9\u6cd5 \u8868\u5355\u5e03\u5c40 \u8bf7\u53c2\u8003 \u8868\u5355\u5e03\u5c40 \u8fd4\u56de\u5b57\u6bb5\u9a8c\u8bc1\u51fa\u9519\u4fe1\u606f (responseValidationMessages) \u901a\u8fc7 responseValidationMessages \u65b9\u6cd5\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u8fd4\u56de\u5b57\u6bb5\u9a8c\u8bc1\u51fa\u9519\u4fe1\u606f\uff0c\u800c\u4e0d\u9700\u8981\u4f7f\u7528 Laravel validation \u529f\u80fd\u3002 \u666e\u901a\u4f7f\u7528 protected function form() { return Form::make(new Model(), function (Form $form) { if (...) { // \u9a8c\u8bc1\u903b\u8f91 $form->responseValidationMessages('title', 'title\u683c\u5f0f\u9519\u8bef'); // \u5982\u6709\u591a\u4e2a\u9519\u8bef\u4fe1\u606f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f20\u6570\u7ec4 $form->responseValidationMessages('content', ['content\u683c\u5f0f\u9519\u8bef', 'content\u4e0d\u80fd\u4e3a\u7a7a']); } }); } \u5728\u4e8b\u4ef6\u4e2d\u4f7f\u7528 {tip} \u6b64\u65b9\u6cd5\u4ec5\u5728 submitted \u4e8b\u4ef6\u4e2d\u53ef\u7528 $form->submitted(function (Form $form) { // \u63a5\u6536\u8868\u5355\u53c2\u6570 $title = $form->title; if (...) { // \u9a8c\u8bc1\u903b\u8f91 $form->responseValidationMessages('title', 'title\u683c\u5f0f\u9519\u8bef'); // \u5982\u6709\u591a\u4e2a\u9519\u8bef\u4fe1\u606f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f20\u6570\u7ec4 $form->responseValidationMessages('content', ['content\u683c\u5f0f\u9519\u8bef', 'content\u4e0d\u80fd\u4e3a\u7a7a']); } }); \u79fb\u9664\u63d0\u4ea4\u6309\u94ae // \u53bb\u6389\u63d0\u4ea4\u6309\u94ae $form->disableSubmitButton(); // \u53bb\u6389\u91cd\u7f6e\u6309\u94ae $form->disableResetButton(); \u5ffd\u7565\u6389\u4e0d\u9700\u8981\u4fdd\u5b58\u7684\u5b57\u6bb5 (ignore) $form->ignore(['column1', 'column2', 'column3']); // \u53d6\u6d88\u5df2\u5ffd\u7565\u7684\u5b57\u6bb5 $form->removeIgnoredFields(['column1',]); \u8bbe\u7f6e\u5bbd\u5ea6 (width) \u6b64\u5904\u7684\u5bbd\u5ea6\u503c\u662f\u4e00\u4e2a 1-12 \u4e4b\u95f4\u7684\u6570\u5b57\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a field \u7684\u5bbd\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a label \u7684\u5bbd\u53ef\u7701\u7565 $form->width(10, 2); \u8bbe\u7f6e\u8868\u5355\u63d0\u4ea4\u7684action $form->action('auth/users'); \u5224\u65ad\u662f\u5426\u662f\u65b0\u589e (isCreating) \u65b0\u589e\u9875\u9762\u548c\u4fdd\u5b58\u65b0\u589e\u6570\u636e\u90fd\u53ef\u4ee5\u7528\u8fd9\u4e2a\u65b9\u6cd5\u5224\u65ad if ($form->isCreating()) { ... } \u5224\u65ad\u662f\u5426\u662f\u7f16\u8f91 (isEditing) \u7f16\u8f91\u9875\u9762\u548c\u4fdd\u5b58\u7f16\u8f91\u6570\u636e\u90fd\u53ef\u4ee5\u7528\u8fd9\u4e2a\u65b9\u6cd5\u5224\u65ad if ($form->isEditing()) { ... } \u5224\u65ad\u662f\u5426\u662f\u5220\u9664 (isDeleting) if ($form->isDeleting()) { ... } \u83b7\u53d6ID (getKey) \u65b0\u589e\u9875\u9762\u65e0\u6548\uff0c\u5fc5\u987b\u5728\u95ed\u5305\u91cc\u9762\u4f7f\u7528 return Form::make(new User, function (Form $form) { $id = $form->getKey(); ... }); \u83b7\u53d6\u7f16\u8f91\u6570\u636e (model) \u65b0\u589e\u9875\u9762\u65e0\u6548\uff0c\u5fc5\u987b\u5728\u95ed\u5305\u91cc\u9762\u4f7f\u7528 return Form::make(new User, function (Form $form) { $username = $form->model()->xxx; ... }); \u83b7\u53d6\u8868\u5355\u63d0\u4ea4\u7684\u6570\u636e (input) $form->saving(function (Form $form) { $username = $form->username; // \u7b49\u540c\u4e8e $username = $form->input('username'); }); \u4fee\u6539\u6216\u5220\u9664\u8868\u5355\u63d0\u4ea4\u7684\u6570\u636e $form->saving(function (Form $form) { // \u4fee\u6539 $form->input('username', 'Marry'); // \u6216 $form->username = 'Marry'; // \u5220\u9664 $form->deleteInput('username'); }); \u83b7\u53d6\u6700\u7ec8\u4fdd\u5b58\u7684\u6570\u636e (updates) \u6b64\u65b9\u6cd5\u4ec5\u5728 saved \u56de\u8c03\u6709\u6548\u3002 $form->saved(function (Form $form) { $data = $form->updates(); }); \u9875\u9762\u8df3\u8f6c (redirect) \u8df3\u8f6c\u5230\u6307\u5b9a\u9875\u9762\uff0c\u6b64\u65b9\u6cd5\u4ec5\u5728 \u8868\u5355\u56de\u8c03 \u4e8b\u4ef6\u5185\u53ef\u7528 // \u8df3\u8f6c\u5e76\u63d0\u793a\u6210\u529f\u4fe1\u606f $form->saved(function (Form $form) { return $form->response()->success('\u4fdd\u5b58\u6210\u529f')->redirect('auth/user'); }); // \u8df3\u8f6c\u5e76\u63d0\u793a\u9519\u8bef\u4fe1\u606f $form->saving(function (Form $form) { return $form->response()->error('\u7cfb\u7edf\u9519\u8bef')->redirect('auth/user'); }); \u663e\u793a\u786e\u8ba4\u5f39\u7a97 (confirm) \u70b9\u51fb\u8868\u5355\u63d0\u4ea4\u6309\u94ae\u65f6\u5f39\u51fa\u786e\u8ba4\u5f39\u7a97\uff0c\u5982\u679c\u662f\u5728\u666e\u901a\u6570\u636e\u8868\u5355\u4e2d $form->confirm('\u60a8\u786e\u5b9a\u8981\u63d0\u4ea4\u8868\u5355\u5417\uff1f', 'content'); \u8bbe\u7f6e\u5916\u5c42\u5bb9\u5668 (wrap) // \u66f4\u6539\u8868\u683c\u5916\u5c42\u5bb9\u5668 $form->wrap(function (Renderable $view) { $tab = Tab::make(); $tab->add('\u793a\u4f8b', $view); $tab->add('\u4ee3\u7801', $this->code(), true); return $tab; }); \u4fee\u6539\u5f85\u4fdd\u5b58\u7684\u8868\u5355\u8f93\u5165\u503c (saving) \u901a\u8fc7 saving \u65b9\u6cd5\u53ef\u4ee5\u66f4\u6539\u5f85\u4fdd\u5b58\u6570\u636e\u7684\u683c\u5f0f\u3002 use Dcat\\Admin\\Support\\Helper; $form->mutipleFile('files')->saving(function ($paths) { $paths = Helper::array($paths); // \u83b7\u53d6\u6570\u636e\u5e93\u5f53\u524d\u884c\u7684\u5176\u4ed6\u5b57\u6bb5 $username = $this->username; // \u6700\u7ec8\u8f6c\u5316\u4e3ajson\u4fdd\u5b58\u5230\u6570\u636e\u5e93 return json_encode($paths); }); \u4fee\u6539\u8868\u5355\u6570\u636e\u663e\u793a (customFormat) \u901a\u8fc7 customFormat \u65b9\u6cd5\u53ef\u4ee5\u6539\u53d8\u4ece\u5916\u90e8\u6ce8\u5165\u5230\u8868\u5355\u7684\u5b57\u6bb5\u503c\u3002 \u5982\u4e0b\u4f8b\u5b50\u4e2d\uff0c mutipleFile \u5b57\u6bb5\u8981\u6c42\u5f85\u6e32\u67d3\u7684\u5b57\u6bb5\u503c\u4e3a\u6570\u7ec4\u683c\u5f0f\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 customFormat \u65b9\u6cd5\u628a\u4ece\u6570\u636e\u5e93\u67e5\u51fa\u7684\u5b57\u6bb5\u503c\u8f6c\u5316\u4e3a array \u683c\u5f0f use Dcat\\Admin\\Support\\Helper; $form->mutipleFile('files')->saving(function ($paths) { $paths = Helper::array($paths); return json_encode($paths); })->customFormat(function ($paths) { // \u83b7\u53d6\u6570\u636e\u5e93\u5f53\u524d\u884c\u7684\u5176\u4ed6\u5b57\u6bb5 $username = $this->username; // \u8f6c\u4e3a\u6570\u7ec4 return Helper::array($paths); });","title":"\u8868\u5355\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/model-form/#_1","text":"","title":"\u8868\u5355\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/model-form/#_2","text":"Dcat\\Admin\\Form \u7c7b\u7528\u4e8e\u5feb\u901f\u751f\u6210\u8868\u5355\u9875\u9762\uff0c\u5148\u6765\u4e2a\u4f8b\u5b50\uff0c\u6570\u636e\u5e93\u4e2d\u6709 movies \u8868 CREATE TABLE `movies` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `director` int(10) unsigned NOT NULL, `describe` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `rate` tinyint unsigned NOT NULL, `released` enum(0, 1), `release_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; \u5bf9\u5e94\u7684\u6570\u636e\u6a21\u578b\u4e3a App\\Models\\Movie \uff0c\u6570\u636e\u4ed3\u5e93\u4e3a App\\Admin\\Repositories\\Movie \uff1a use App\\Admin\\Repositories\\Movie; use Dcat\\Admin\\Form; use Dcat\\Admin\\Admin; $form = Form::make(new Movie(), function (Form $form) { // \u663e\u793a\u8bb0\u5f55id $form->display('id', 'ID'); // \u6dfb\u52a0text\u7c7b\u578b\u7684input\u6846 $form->text('title', '\u7535\u5f71\u6807\u9898'); $directors = [ 1 => 'John', 2 => 'Smith', 3 => 'Kate', ]; $form->select('director', '\u5bfc\u6f14')->options($directors); // \u6dfb\u52a0describe\u7684textarea\u8f93\u5165\u6846 $form->textarea('describe', '\u7b80\u4ecb'); // \u6570\u5b57\u8f93\u5165\u6846 $form->number('rate', '\u6253\u5206'); // \u6dfb\u52a0\u5f00\u5173\u64cd\u4f5c $form->switch('released', '\u53d1\u5e03\uff1f'); // \u6dfb\u52a0\u65e5\u671f\u65f6\u95f4\u9009\u62e9\u6846 $form->datetime('release_at', '\u53d1\u5e03\u65f6\u95f4'); // \u4e24\u4e2a\u65f6\u95f4\u663e\u793a $form->display('created_at', '\u521b\u5efa\u65f6\u95f4'); $form->display('updated_at', '\u4fee\u6539\u65f6\u95f4'); });","title":"\u793a\u4f8b"},{"location":"2.x/model-form/#_3","text":"\u6570\u636e\u4ed3\u5e93( Repository )\u662f\u4e00\u4e2a\u53ef\u4ee5\u63d0\u4f9b\u7279\u5b9a\u63a5\u53e3\u5bf9\u6570\u636e\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u7684\u7c7b\uff0c\u901a\u8fc7\u6570\u636e\u4ed3\u5e93\u7684\u5f15\u5165\uff0c\u53ef\u4ee5\u8ba9\u9875\u9762\u7684\u6784\u5efa\u4e0d\u518d\u5173\u5fc3\u6570\u636e\u8bfb\u5199\u529f\u80fd\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u5f00\u53d1\u8005\u53ea\u9700\u8981\u5b9e\u73b0\u7279\u5b9a\u7684\u64cd\u4f5c\u63a5\u53e3\u5373\u53ef\u8f7b\u677e\u5207\u6362\u6570\u636e\u6e90\u3002\u5173\u4e8e\u6570\u636e\u4ed3\u5e93\u7684\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003\u6587\u6863 \u6570\u636e\u4ed3\u5e93 \u3002","title":"\u6570\u636e\u4ed3\u5e93"},{"location":"2.x/model-form/#_4","text":"\u63a8\u8350\u4f7f\u7528\u4ee5\u4e0b\u65b9\u5f0f\u6784\u5efa\u8868\u5355 use App\\Admin\\Repositories\\Movie; use Dcat\\Admin\\Form; use Dcat\\Admin\\Admin; $form = Form::make(new Movie, function (Form $form) { // \u663e\u793a\u8bb0\u5f55id $form->display('id', 'ID'); $form->select('director', '\u5bfc\u6f14')->options($directors); ... });","title":"\u8868\u5355\u5b9a\u4e49"},{"location":"2.x/model-form/#_5","text":"\u5728\u95ed\u5305\u5185\u53ef\u4ee5\u83b7\u53d6\u5230\u5f53\u524d\u6a21\u578b\u7684\u6570\u636e\uff08\u7f16\u8f91\uff09 Form::make(new Movie, function (Form $form) { // \u663e\u793a\u8bb0\u5f55id $form->display('id', 'ID'); // \u83b7\u53d6\u6a21\u578b\u6570\u636e\uff0c\u5982\u679c\"status == 1\"\u5219\u663e\u793a\"rate\"\u5b57\u6bb5 if ($form->model()->status == 1) { $form->number('rate'); } $form->select('director', '\u5bfc\u6f14')->options($directors); ... });","title":"\u83b7\u53d6\u5f53\u524d\u6a21\u578b\u6570\u636e"},{"location":"2.x/model-form/#_6","text":"\u8868\u5355\u53f3\u4e0a\u89d2\u9ed8\u8ba4\u6709\u8fd4\u56de\u548c\u8df3\u8f6c\u5217\u8868\u4e24\u4e2a\u6309\u94ae\u5de5\u5177, \u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u65b9\u5f0f\u4fee\u6539\u5b83: $form->tools(function (Form\\Tools $tools) { // \u53bb\u6389\u8df3\u8f6c\u5217\u8868\u6309\u94ae $tools->disableList(); // \u53bb\u6389\u8df3\u8f6c\u8be6\u60c5\u9875\u6309\u94ae $tools->disableView(); // \u53bb\u6389\u5220\u9664\u6309\u94ae $tools->disableDelete(); // \u6dfb\u52a0\u4e00\u4e2a\u6309\u94ae, \u53c2\u6570\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32, \u533f\u540d\u51fd\u6570, \u6216\u8005\u5b9e\u73b0\u4e86Renderable\u6216Htmlable\u63a5\u53e3\u7684\u5bf9\u8c61\u5b9e\u4f8b $tools->append('<a class=\"btn btn-sm btn-danger\"><i class=\"fa fa-trash\"></i>&nbsp;&nbsp;delete</a>'); }); // \u53bb\u9664\u6574\u4e2a\u5de5\u5177\u680f\u5185\u5bb9 $form->disableHeader(); // \u4e5f\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u53bb\u9664\u5de5\u5177\u680f\u7684\u9ed8\u8ba4\u6309\u94ae $form->disableListButton(); $form->disableViewButton(); $form->disableDeleteButton();","title":"\u81ea\u5b9a\u4e49\u5de5\u5177"},{"location":"2.x/model-form/#_7","text":"\u8bf7\u53c2\u8003\u6587\u6863 \u8868\u5355\u52a8\u4f5c","title":"\u81ea\u5b9a\u4e49\u590d\u6742\u5de5\u5177\u6309\u94ae"},{"location":"2.x/model-form/#_8","text":"\u4f7f\u7528\u4e0b\u9762\u7684\u65b9\u6cd5\u53bb\u6389form\u5e95\u90e8\u7684\u5143\u7d20 $form->footer(function ($footer) { // \u53bb\u6389`\u91cd\u7f6e`\u6309\u94ae $footer->disableReset(); // \u53bb\u6389`\u63d0\u4ea4`\u6309\u94ae $footer->disableSubmit(); // \u53bb\u6389`\u67e5\u770b`checkbox $footer->disableViewCheck(); // \u53bb\u6389`\u7ee7\u7eed\u7f16\u8f91`checkbox $footer->disableEditingCheck(); // \u53bb\u6389`\u7ee7\u7eed\u521b\u5efa`checkbox $footer->disableCreatingCheck(); // \u8bbe\u7f6e`\u67e5\u770b`\u9ed8\u8ba4\u9009\u4e2d $footer->defaultViewChecked(); // \u8bbe\u7f6e`\u7ee7\u7eed\u7f16\u8f91`\u9ed8\u8ba4\u9009\u4e2d $footer->defaultEditingChecked(); // \u8bbe\u7f6e`\u7ee7\u7eed\u521b\u5efa`\u9ed8\u8ba4\u9009\u4e2d $footer->defaultCreatingChecked(); }); // \u53bb\u9664\u6574\u4e2a\u5e95\u90e8\u5185\u5bb9 $form->disableFooter(); // \u4e5f\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u53bb\u5e95\u90e8\u5143\u7d20 $form->disableSubmitButton(); $form->disableResetButton(); $form->disableViewCheck(); $form->disableEditingCheck(); $form->disableCreatingCheck(); // \u8bbe\u7f6e`\u67e5\u770b`\u9ed8\u8ba4\u9009\u4e2d $form->defaultViewChecked(); // \u8bbe\u7f6e`\u7ee7\u7eed\u7f16\u8f91`\u9ed8\u8ba4\u9009\u4e2d $form->defaultEditingChecked(); // \u8bbe\u7f6e`\u7ee7\u7eed\u521b\u5efa`\u9ed8\u8ba4\u9009\u4e2d $form->defaultCreatingChecked(); \u81ea\u5b9a\u4e49\u89c6\u56fe $form->footer(function ($footer) { $footer->view('...', [...]); });","title":"\u8868\u5355\u5e95\u90e8"},{"location":"2.x/model-form/#_9","text":"","title":"\u5e38\u7528\u65b9\u6cd5"},{"location":"2.x/model-form/#_10","text":"\u8bf7\u53c2\u8003 \u8868\u5355\u5e03\u5c40","title":"\u8868\u5355\u5e03\u5c40"},{"location":"2.x/model-form/#responsevalidationmessages","text":"\u901a\u8fc7 responseValidationMessages \u65b9\u6cd5\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u8fd4\u56de\u5b57\u6bb5\u9a8c\u8bc1\u51fa\u9519\u4fe1\u606f\uff0c\u800c\u4e0d\u9700\u8981\u4f7f\u7528 Laravel validation \u529f\u80fd\u3002 \u666e\u901a\u4f7f\u7528 protected function form() { return Form::make(new Model(), function (Form $form) { if (...) { // \u9a8c\u8bc1\u903b\u8f91 $form->responseValidationMessages('title', 'title\u683c\u5f0f\u9519\u8bef'); // \u5982\u6709\u591a\u4e2a\u9519\u8bef\u4fe1\u606f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f20\u6570\u7ec4 $form->responseValidationMessages('content', ['content\u683c\u5f0f\u9519\u8bef', 'content\u4e0d\u80fd\u4e3a\u7a7a']); } }); } \u5728\u4e8b\u4ef6\u4e2d\u4f7f\u7528 {tip} \u6b64\u65b9\u6cd5\u4ec5\u5728 submitted \u4e8b\u4ef6\u4e2d\u53ef\u7528 $form->submitted(function (Form $form) { // \u63a5\u6536\u8868\u5355\u53c2\u6570 $title = $form->title; if (...) { // \u9a8c\u8bc1\u903b\u8f91 $form->responseValidationMessages('title', 'title\u683c\u5f0f\u9519\u8bef'); // \u5982\u6709\u591a\u4e2a\u9519\u8bef\u4fe1\u606f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u4f20\u6570\u7ec4 $form->responseValidationMessages('content', ['content\u683c\u5f0f\u9519\u8bef', 'content\u4e0d\u80fd\u4e3a\u7a7a']); } });","title":"\u8fd4\u56de\u5b57\u6bb5\u9a8c\u8bc1\u51fa\u9519\u4fe1\u606f (responseValidationMessages)"},{"location":"2.x/model-form/#_11","text":"// \u53bb\u6389\u63d0\u4ea4\u6309\u94ae $form->disableSubmitButton(); // \u53bb\u6389\u91cd\u7f6e\u6309\u94ae $form->disableResetButton();","title":"\u79fb\u9664\u63d0\u4ea4\u6309\u94ae"},{"location":"2.x/model-form/#ignore","text":"$form->ignore(['column1', 'column2', 'column3']); // \u53d6\u6d88\u5df2\u5ffd\u7565\u7684\u5b57\u6bb5 $form->removeIgnoredFields(['column1',]);","title":"\u5ffd\u7565\u6389\u4e0d\u9700\u8981\u4fdd\u5b58\u7684\u5b57\u6bb5 (ignore)"},{"location":"2.x/model-form/#width","text":"\u6b64\u5904\u7684\u5bbd\u5ea6\u503c\u662f\u4e00\u4e2a 1-12 \u4e4b\u95f4\u7684\u6570\u5b57\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a field \u7684\u5bbd\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a label \u7684\u5bbd\u53ef\u7701\u7565 $form->width(10, 2);","title":"\u8bbe\u7f6e\u5bbd\u5ea6 (width)"},{"location":"2.x/model-form/#action","text":"$form->action('auth/users');","title":"\u8bbe\u7f6e\u8868\u5355\u63d0\u4ea4\u7684action"},{"location":"2.x/model-form/#iscreating","text":"\u65b0\u589e\u9875\u9762\u548c\u4fdd\u5b58\u65b0\u589e\u6570\u636e\u90fd\u53ef\u4ee5\u7528\u8fd9\u4e2a\u65b9\u6cd5\u5224\u65ad if ($form->isCreating()) { ... }","title":"\u5224\u65ad\u662f\u5426\u662f\u65b0\u589e (isCreating)"},{"location":"2.x/model-form/#isediting","text":"\u7f16\u8f91\u9875\u9762\u548c\u4fdd\u5b58\u7f16\u8f91\u6570\u636e\u90fd\u53ef\u4ee5\u7528\u8fd9\u4e2a\u65b9\u6cd5\u5224\u65ad if ($form->isEditing()) { ... }","title":"\u5224\u65ad\u662f\u5426\u662f\u7f16\u8f91 (isEditing)"},{"location":"2.x/model-form/#isdeleting","text":"if ($form->isDeleting()) { ... }","title":"\u5224\u65ad\u662f\u5426\u662f\u5220\u9664 (isDeleting)"},{"location":"2.x/model-form/#id-getkey","text":"\u65b0\u589e\u9875\u9762\u65e0\u6548\uff0c\u5fc5\u987b\u5728\u95ed\u5305\u91cc\u9762\u4f7f\u7528 return Form::make(new User, function (Form $form) { $id = $form->getKey(); ... });","title":"\u83b7\u53d6ID (getKey)"},{"location":"2.x/model-form/#model","text":"\u65b0\u589e\u9875\u9762\u65e0\u6548\uff0c\u5fc5\u987b\u5728\u95ed\u5305\u91cc\u9762\u4f7f\u7528 return Form::make(new User, function (Form $form) { $username = $form->model()->xxx; ... });","title":"\u83b7\u53d6\u7f16\u8f91\u6570\u636e (model)"},{"location":"2.x/model-form/#input","text":"$form->saving(function (Form $form) { $username = $form->username; // \u7b49\u540c\u4e8e $username = $form->input('username'); });","title":"\u83b7\u53d6\u8868\u5355\u63d0\u4ea4\u7684\u6570\u636e (input)"},{"location":"2.x/model-form/#_12","text":"$form->saving(function (Form $form) { // \u4fee\u6539 $form->input('username', 'Marry'); // \u6216 $form->username = 'Marry'; // \u5220\u9664 $form->deleteInput('username'); });","title":"\u4fee\u6539\u6216\u5220\u9664\u8868\u5355\u63d0\u4ea4\u7684\u6570\u636e"},{"location":"2.x/model-form/#updates","text":"\u6b64\u65b9\u6cd5\u4ec5\u5728 saved \u56de\u8c03\u6709\u6548\u3002 $form->saved(function (Form $form) { $data = $form->updates(); });","title":"\u83b7\u53d6\u6700\u7ec8\u4fdd\u5b58\u7684\u6570\u636e (updates)"},{"location":"2.x/model-form/#redirect","text":"\u8df3\u8f6c\u5230\u6307\u5b9a\u9875\u9762\uff0c\u6b64\u65b9\u6cd5\u4ec5\u5728 \u8868\u5355\u56de\u8c03 \u4e8b\u4ef6\u5185\u53ef\u7528 // \u8df3\u8f6c\u5e76\u63d0\u793a\u6210\u529f\u4fe1\u606f $form->saved(function (Form $form) { return $form->response()->success('\u4fdd\u5b58\u6210\u529f')->redirect('auth/user'); }); // \u8df3\u8f6c\u5e76\u63d0\u793a\u9519\u8bef\u4fe1\u606f $form->saving(function (Form $form) { return $form->response()->error('\u7cfb\u7edf\u9519\u8bef')->redirect('auth/user'); });","title":"\u9875\u9762\u8df3\u8f6c (redirect)"},{"location":"2.x/model-form/#confirm","text":"\u70b9\u51fb\u8868\u5355\u63d0\u4ea4\u6309\u94ae\u65f6\u5f39\u51fa\u786e\u8ba4\u5f39\u7a97\uff0c\u5982\u679c\u662f\u5728\u666e\u901a\u6570\u636e\u8868\u5355\u4e2d $form->confirm('\u60a8\u786e\u5b9a\u8981\u63d0\u4ea4\u8868\u5355\u5417\uff1f', 'content');","title":"\u663e\u793a\u786e\u8ba4\u5f39\u7a97 (confirm)"},{"location":"2.x/model-form/#wrap","text":"// \u66f4\u6539\u8868\u683c\u5916\u5c42\u5bb9\u5668 $form->wrap(function (Renderable $view) { $tab = Tab::make(); $tab->add('\u793a\u4f8b', $view); $tab->add('\u4ee3\u7801', $this->code(), true); return $tab; });","title":"\u8bbe\u7f6e\u5916\u5c42\u5bb9\u5668 (wrap)"},{"location":"2.x/model-form/#saving","text":"\u901a\u8fc7 saving \u65b9\u6cd5\u53ef\u4ee5\u66f4\u6539\u5f85\u4fdd\u5b58\u6570\u636e\u7684\u683c\u5f0f\u3002 use Dcat\\Admin\\Support\\Helper; $form->mutipleFile('files')->saving(function ($paths) { $paths = Helper::array($paths); // \u83b7\u53d6\u6570\u636e\u5e93\u5f53\u524d\u884c\u7684\u5176\u4ed6\u5b57\u6bb5 $username = $this->username; // \u6700\u7ec8\u8f6c\u5316\u4e3ajson\u4fdd\u5b58\u5230\u6570\u636e\u5e93 return json_encode($paths); });","title":"\u4fee\u6539\u5f85\u4fdd\u5b58\u7684\u8868\u5355\u8f93\u5165\u503c (saving)"},{"location":"2.x/model-form/#customformat","text":"\u901a\u8fc7 customFormat \u65b9\u6cd5\u53ef\u4ee5\u6539\u53d8\u4ece\u5916\u90e8\u6ce8\u5165\u5230\u8868\u5355\u7684\u5b57\u6bb5\u503c\u3002 \u5982\u4e0b\u4f8b\u5b50\u4e2d\uff0c mutipleFile \u5b57\u6bb5\u8981\u6c42\u5f85\u6e32\u67d3\u7684\u5b57\u6bb5\u503c\u4e3a\u6570\u7ec4\u683c\u5f0f\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 customFormat \u65b9\u6cd5\u628a\u4ece\u6570\u636e\u5e93\u67e5\u51fa\u7684\u5b57\u6bb5\u503c\u8f6c\u5316\u4e3a array \u683c\u5f0f use Dcat\\Admin\\Support\\Helper; $form->mutipleFile('files')->saving(function ($paths) { $paths = Helper::array($paths); return json_encode($paths); })->customFormat(function ($paths) { // \u83b7\u53d6\u6570\u636e\u5e93\u5f53\u524d\u884c\u7684\u5176\u4ed6\u5b57\u6bb5 $username = $this->username; // \u8f6c\u4e3a\u6570\u7ec4 return Helper::array($paths); });","title":"\u4fee\u6539\u8868\u5355\u6570\u636e\u663e\u793a (customFormat)"},{"location":"2.x/model-grid-actions/","text":"\u884c\u7684\u4f7f\u7528\u548c\u6269\u5c55 \u542f\u7528\u6216\u7981\u7528\u9ed8\u8ba4\u64cd\u4f5c\u6309\u94ae model-grid \u9ed8\u8ba4\u6709\u56db\u4e2a\u884c\u64cd\u4f5c \u7f16\u8f91 \u3001 \u5feb\u6377\u7f16\u8f91 \u3001 \u5220\u9664 \u548c \u8be6\u60c5 \uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u5f0f\u5173\u95ed\u5b83\u4eec\uff1a use Dcat\\Admin\\Grid; $grid->actions(function (Grid\\Displayers\\Actions $actions) { $actions->disableDelete(); $actions->disableEdit(); $actions->disableQuickEdit(); $actions->disableView(); }); // \u4e5f\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u542f\u7528\u6216\u7981\u7528\u6309\u94ae $grid->disableDeleteButton(); $grid->disableEditButton(); $grid->disableQuickEditButton(); $grid->disableViewButton(); \u5207\u6362\u884c\u64cd\u4f5c\u6309\u94ae\u663e\u793a\u65b9\u5f0f \u5168\u5c40\u9ed8\u8ba4\u7684\u884c\u64cd\u4f5c\u6309\u94ae\u663e\u793a\u65b9\u5f0f\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u53c2\u6570 admin.grid.grid_action_class \u53c2\u6570\u8fdb\u884c\u914d\u7f6e\uff0c\u76ee\u524d\u652f\u6301\u7684\u884c\u64cd\u4f5c\u6309\u94ae\u663e\u793a\u65b9\u5f0f\u6709\u4ee5\u4e0b\u4e24\u79cd\uff1a Dcat\\Admin\\Grid\\Displayers\\DropdownActions \u4e0b\u62c9\u83dc\u5355\u65b9\u5f0f Dcat\\Admin\\Grid\\Displayers\\Actions \u56fe\u6807\u5c55\u5f00\u65b9\u5f0f Dcat\\Admin\\Grid\\Displayers\\ContextMenuActions \u9f20\u6807\u53f3\u952e\u663e\u793a\u4e0b\u62c9\u83dc\u5355 ... 'grid' => [ /* |-------------------------------------------------------------------------- | The global Grid action display class. |-------------------------------------------------------------------------- */ 'grid_action_class' => Dcat\\Admin\\Grid\\Displayers\\DropdownActions::class, ], ... \u5728\u63a7\u5236\u5668\u4e2d\u5207\u6362\u663e\u793a\u65b9\u5f0f use Dcat\\Admin\\Grid; public function grid() { return Grid(new Model(), function (Grid $grid) { $grid->setActionClass(Grid\\Displayers\\Actions::class); ... }); } \u83b7\u53d6\u884c\u5e8f\u53f7 (index) \u5e8f\u53f7\u4ece 0 \u5f00\u59cb\u8ba1\u7b97 // \u5728 display \u56de\u8c03\u4e2d\u4f7f\u7528 $grid->column('\u5e8f\u53f7')->display(function () { return $this->_index + 1; }); // \u5728\u884c\u64cd\u4f5c action \u4e2d\u4f7f\u7528 $grid->actions(function ($actions) { $index = $this->_index; ... }); \u83b7\u53d6\u5f53\u524d\u884c\u6570\u636e \u53ef\u4ee5\u901a\u8fc7\u4f20\u5165\u7684 $actions \u53c2\u6570\u6765\u83b7\u53d6\u5f53\u524d\u884c\u7684\u6570\u636e\uff1a use Dcat\\Admin\\Grid; $grid->actions(function (Grid\\Displayers\\Actions $actions) { // \u5f53\u524d\u884c\u7684\u6570\u636e\u6570\u7ec4 $rowArray = $actions->row->toArray(); // \u5f53\u524d\u884c\u7684\u67d0\u4e2a\u5b57\u6bb5\u7684\u6570\u636e $email = $actions->row->email; // \u83b7\u53d6\u5f53\u524d\u884c\u4e3b\u952e\u503c $id = $actions->getKey(); }); \u6dfb\u52a0\u81ea\u5b9a\u4e49\u6309\u94ae \u5982\u679c\u6709\u81ea\u5b9a\u4e49\u7684\u64cd\u4f5c\u6309\u94ae\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u5f0f\u6dfb\u52a0\uff1a use Dcat\\Admin\\Grid; $grid->actions(function (Grid\\Displayers\\Actions $actions) { // append\u4e00\u4e2a\u64cd\u4f5c $actions->append('<a href=\"\"><i class=\"fa fa-eye\"></i></a>'); // append\u4e00\u4e2a\u590d\u6742\u64cd\u4f5c $actions->append(new Copy()); // prepend\u4e00\u4e2a\u64cd\u4f5c $actions->prepend('<a href=\"\"><i class=\"fa fa-paper-plane\"></i></a>'); } \u6dfb\u52a0\u590d\u6742\u64cd\u4f5c\u6309\u94ae \u5982\u679c\u6709\u6bd4\u8f83\u590d\u6742\u7684\u64cd\u4f5c\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u65b9\u5f0f\uff1a \u5148\u5b9a\u4e49\u884c\u64cd\u4f5c\u7c7b\u7ee7\u627f Dcat\\Admin\\Grid\\RowAction {tip} \u52a8\u4f5c\u7c7b\u66f4\u8be6\u7ec6\u7684\u7528\u6cd5\uff0c\u8bf7\u53c2\u8003 \u52a8\u4f5c\u57fa\u672c\u4f7f\u7528 \u4ee5\u53ca \u6570\u636e\u8868\u683c\u52a8\u4f5c \u3002 <?php namespace App\\Admin\\Extensions; use Dcat\\Admin\\Grid\\RowAction; class CheckRow extends RowAction { /** * \u8fd4\u56de\u5b57\u6bb5\u6807\u9898 * * @return string */ public function title() { return 'Check row'; } /** * \u6dfb\u52a0JS * * @return string */ protected function script() { return <<<JS $('.grid-check-row').on('click', function () { // Your code. console.log($(this).data('id')); }); JS; } public function html() { // \u83b7\u53d6\u5f53\u524d\u884c\u6570\u636eID $id = $this->getKey(); // \u83b7\u53d6\u5f53\u524d\u884c\u6570\u636e\u7684\u7528\u6237\u540d $username = $this->row->username; // \u8fd9\u91cc\u9700\u8981\u6dfb\u52a0\u4e00\u4e2aclass, \u548c\u4e0a\u9762script\u65b9\u6cd5\u5bf9\u5e94 $this->setHtmlAttribute(['data-id' => $id, 'email' => $username, 'class' => 'grid-check-row']); return parent::html(); } } \u7136\u540e\u6dfb\u52a0\u64cd\u4f5c\uff1a $grid->actions([new CheckRow()]); // \u4e5f\u53ef\u4ee5\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u6dfb\u52a0 $grid->actions(function (Grid\\Displayers\\Actions $actions) { $actions->append(new CheckRow()); } \u64cd\u4f5c\u6309\u94ae\u9700\u8981\u4e0eAPI\u4ea4\u4e92 \u5982\u679c\u4f60\u7684\u64cd\u4f5c\u7c7b\u9700\u8981\u4e0e\u540e\u53f0\u63a5\u53e3\u4ea4\u4e92\uff0c\u5219\u53ef\u4ee5\u5728\u4f60\u7684\u64cd\u4f5c\u7c7b\u4e2d\u52a0\u4e0a handle \u65b9\u6cd5\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5728\u540c\u4e00\u4e2a\u7c7b\u91cc\u9762\u5904\u7406\u5b8c\u6240\u6709\u903b\u8f91 {tip} \u52a8\u4f5c\u7c7b\u66f4\u8be6\u7ec6\u7684\u7528\u6cd5\uff0c\u8bf7\u53c2\u8003 \u52a8\u4f5c\u57fa\u672c\u4f7f\u7528 \u4ee5\u53ca \u6570\u636e\u8868\u683c\u52a8\u4f5c \u3002 <?php namespace App\\Admin\\RowActions; use Dcat\\Admin\\Grid\\RowAction; use Illuminate\\Http\\Request; use Illuminate\\Database\\Eloquent\\Model; class Copy extends RowAction { protected $model; public function __construct(string $model = null) { $this->model = $model; } /** * \u6807\u9898 * * @return string */ public function title() { return 'Copy'; } /** * \u8bbe\u7f6e\u786e\u8ba4\u5f39\u7a97\u4fe1\u606f\uff0c\u5982\u679c\u8fd4\u56de\u7a7a\u503c\uff0c\u5219\u4e0d\u4f1a\u5f39\u51fa\u5f39\u7a97 * * \u5141\u8bb8\u8fd4\u56de\u5b57\u7b26\u4e32\u6216\u6570\u7ec4\u7c7b\u578b * * @return array|string|void */ public function confirm() { return [ // \u786e\u8ba4\u5f39\u7a97 title \"\u60a8\u786e\u5b9a\u8981\u590d\u5236\u8fd9\u884c\u6570\u636e\u5417\uff1f\", // \u786e\u8ba4\u5f39\u7a97 content $this->row->username, ]; } /** * \u5904\u7406\u8bf7\u6c42 * * @param Request $request * * @return \\Dcat\\Admin\\Actions\\Response */ public function handle(Request $request) { // \u83b7\u53d6\u5f53\u524d\u884cID $id = $this->getKey(); // \u83b7\u53d6 parameters \u65b9\u6cd5\u4f20\u9012\u7684\u53c2\u6570 $username = $request->get('username'); $model = $request->get('model'); // \u590d\u5236\u6570\u636e $model::find($id)->replicate()->save(); // \u8fd4\u56de\u54cd\u5e94\u7ed3\u679c\u5e76\u5237\u65b0\u9875\u9762 return $this->response()->success(\"\u590d\u5236\u6210\u529f: [{$username}]\")->refresh(); } /** * \u8bbe\u7f6e\u8981POST\u5230\u63a5\u53e3\u7684\u6570\u636e * * @return array */ public function parameters() { return [ // \u53d1\u9001\u5f53\u524d\u884c username \u5b57\u6bb5\u6570\u636e\u5230\u63a5\u53e3 'username' => $this->row->username, // \u628a\u6a21\u578b\u7c7b\u540d\u4f20\u9012\u5230\u63a5\u53e3 'model' => $this->model, ]; } } \u4f7f\u7528 use App\\Models\\User; $grid->actions([new Copy(User::class)]); // \u4e5f\u53ef\u4ee5\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u6dfb\u52a0 $grid->actions(function (Grid\\Displayers\\Actions $actions) { $actions->append(new Copy(User::class)); } \u8868\u5355\u5f39\u7a97 \u8bf7\u53c2\u8003\u6587\u6863 \u5de5\u5177\u8868\u5355 - \u5f39\u7a97","title":"\u884c\u7684\u4f7f\u7528\u548c\u6269\u5c55"},{"location":"2.x/model-grid-actions/#_1","text":"","title":"\u884c\u7684\u4f7f\u7528\u548c\u6269\u5c55"},{"location":"2.x/model-grid-actions/#_2","text":"model-grid \u9ed8\u8ba4\u6709\u56db\u4e2a\u884c\u64cd\u4f5c \u7f16\u8f91 \u3001 \u5feb\u6377\u7f16\u8f91 \u3001 \u5220\u9664 \u548c \u8be6\u60c5 \uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u5f0f\u5173\u95ed\u5b83\u4eec\uff1a use Dcat\\Admin\\Grid; $grid->actions(function (Grid\\Displayers\\Actions $actions) { $actions->disableDelete(); $actions->disableEdit(); $actions->disableQuickEdit(); $actions->disableView(); }); // \u4e5f\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u542f\u7528\u6216\u7981\u7528\u6309\u94ae $grid->disableDeleteButton(); $grid->disableEditButton(); $grid->disableQuickEditButton(); $grid->disableViewButton();","title":"\u542f\u7528\u6216\u7981\u7528\u9ed8\u8ba4\u64cd\u4f5c\u6309\u94ae"},{"location":"2.x/model-grid-actions/#_3","text":"\u5168\u5c40\u9ed8\u8ba4\u7684\u884c\u64cd\u4f5c\u6309\u94ae\u663e\u793a\u65b9\u5f0f\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u53c2\u6570 admin.grid.grid_action_class \u53c2\u6570\u8fdb\u884c\u914d\u7f6e\uff0c\u76ee\u524d\u652f\u6301\u7684\u884c\u64cd\u4f5c\u6309\u94ae\u663e\u793a\u65b9\u5f0f\u6709\u4ee5\u4e0b\u4e24\u79cd\uff1a Dcat\\Admin\\Grid\\Displayers\\DropdownActions \u4e0b\u62c9\u83dc\u5355\u65b9\u5f0f Dcat\\Admin\\Grid\\Displayers\\Actions \u56fe\u6807\u5c55\u5f00\u65b9\u5f0f Dcat\\Admin\\Grid\\Displayers\\ContextMenuActions \u9f20\u6807\u53f3\u952e\u663e\u793a\u4e0b\u62c9\u83dc\u5355 ... 'grid' => [ /* |-------------------------------------------------------------------------- | The global Grid action display class. |-------------------------------------------------------------------------- */ 'grid_action_class' => Dcat\\Admin\\Grid\\Displayers\\DropdownActions::class, ], ... \u5728\u63a7\u5236\u5668\u4e2d\u5207\u6362\u663e\u793a\u65b9\u5f0f use Dcat\\Admin\\Grid; public function grid() { return Grid(new Model(), function (Grid $grid) { $grid->setActionClass(Grid\\Displayers\\Actions::class); ... }); }","title":"\u5207\u6362\u884c\u64cd\u4f5c\u6309\u94ae\u663e\u793a\u65b9\u5f0f"},{"location":"2.x/model-grid-actions/#index","text":"\u5e8f\u53f7\u4ece 0 \u5f00\u59cb\u8ba1\u7b97 // \u5728 display \u56de\u8c03\u4e2d\u4f7f\u7528 $grid->column('\u5e8f\u53f7')->display(function () { return $this->_index + 1; }); // \u5728\u884c\u64cd\u4f5c action \u4e2d\u4f7f\u7528 $grid->actions(function ($actions) { $index = $this->_index; ... });","title":"\u83b7\u53d6\u884c\u5e8f\u53f7 (index)"},{"location":"2.x/model-grid-actions/#_4","text":"\u53ef\u4ee5\u901a\u8fc7\u4f20\u5165\u7684 $actions \u53c2\u6570\u6765\u83b7\u53d6\u5f53\u524d\u884c\u7684\u6570\u636e\uff1a use Dcat\\Admin\\Grid; $grid->actions(function (Grid\\Displayers\\Actions $actions) { // \u5f53\u524d\u884c\u7684\u6570\u636e\u6570\u7ec4 $rowArray = $actions->row->toArray(); // \u5f53\u524d\u884c\u7684\u67d0\u4e2a\u5b57\u6bb5\u7684\u6570\u636e $email = $actions->row->email; // \u83b7\u53d6\u5f53\u524d\u884c\u4e3b\u952e\u503c $id = $actions->getKey(); });","title":"\u83b7\u53d6\u5f53\u524d\u884c\u6570\u636e"},{"location":"2.x/model-grid-actions/#_5","text":"\u5982\u679c\u6709\u81ea\u5b9a\u4e49\u7684\u64cd\u4f5c\u6309\u94ae\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u5f0f\u6dfb\u52a0\uff1a use Dcat\\Admin\\Grid; $grid->actions(function (Grid\\Displayers\\Actions $actions) { // append\u4e00\u4e2a\u64cd\u4f5c $actions->append('<a href=\"\"><i class=\"fa fa-eye\"></i></a>'); // append\u4e00\u4e2a\u590d\u6742\u64cd\u4f5c $actions->append(new Copy()); // prepend\u4e00\u4e2a\u64cd\u4f5c $actions->prepend('<a href=\"\"><i class=\"fa fa-paper-plane\"></i></a>'); }","title":"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u6309\u94ae"},{"location":"2.x/model-grid-actions/#_6","text":"\u5982\u679c\u6709\u6bd4\u8f83\u590d\u6742\u7684\u64cd\u4f5c\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u65b9\u5f0f\uff1a \u5148\u5b9a\u4e49\u884c\u64cd\u4f5c\u7c7b\u7ee7\u627f Dcat\\Admin\\Grid\\RowAction {tip} \u52a8\u4f5c\u7c7b\u66f4\u8be6\u7ec6\u7684\u7528\u6cd5\uff0c\u8bf7\u53c2\u8003 \u52a8\u4f5c\u57fa\u672c\u4f7f\u7528 \u4ee5\u53ca \u6570\u636e\u8868\u683c\u52a8\u4f5c \u3002 <?php namespace App\\Admin\\Extensions; use Dcat\\Admin\\Grid\\RowAction; class CheckRow extends RowAction { /** * \u8fd4\u56de\u5b57\u6bb5\u6807\u9898 * * @return string */ public function title() { return 'Check row'; } /** * \u6dfb\u52a0JS * * @return string */ protected function script() { return <<<JS $('.grid-check-row').on('click', function () { // Your code. console.log($(this).data('id')); }); JS; } public function html() { // \u83b7\u53d6\u5f53\u524d\u884c\u6570\u636eID $id = $this->getKey(); // \u83b7\u53d6\u5f53\u524d\u884c\u6570\u636e\u7684\u7528\u6237\u540d $username = $this->row->username; // \u8fd9\u91cc\u9700\u8981\u6dfb\u52a0\u4e00\u4e2aclass, \u548c\u4e0a\u9762script\u65b9\u6cd5\u5bf9\u5e94 $this->setHtmlAttribute(['data-id' => $id, 'email' => $username, 'class' => 'grid-check-row']); return parent::html(); } } \u7136\u540e\u6dfb\u52a0\u64cd\u4f5c\uff1a $grid->actions([new CheckRow()]); // \u4e5f\u53ef\u4ee5\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u6dfb\u52a0 $grid->actions(function (Grid\\Displayers\\Actions $actions) { $actions->append(new CheckRow()); }","title":"\u6dfb\u52a0\u590d\u6742\u64cd\u4f5c\u6309\u94ae"},{"location":"2.x/model-grid-actions/#api","text":"\u5982\u679c\u4f60\u7684\u64cd\u4f5c\u7c7b\u9700\u8981\u4e0e\u540e\u53f0\u63a5\u53e3\u4ea4\u4e92\uff0c\u5219\u53ef\u4ee5\u5728\u4f60\u7684\u64cd\u4f5c\u7c7b\u4e2d\u52a0\u4e0a handle \u65b9\u6cd5\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5728\u540c\u4e00\u4e2a\u7c7b\u91cc\u9762\u5904\u7406\u5b8c\u6240\u6709\u903b\u8f91 {tip} \u52a8\u4f5c\u7c7b\u66f4\u8be6\u7ec6\u7684\u7528\u6cd5\uff0c\u8bf7\u53c2\u8003 \u52a8\u4f5c\u57fa\u672c\u4f7f\u7528 \u4ee5\u53ca \u6570\u636e\u8868\u683c\u52a8\u4f5c \u3002 <?php namespace App\\Admin\\RowActions; use Dcat\\Admin\\Grid\\RowAction; use Illuminate\\Http\\Request; use Illuminate\\Database\\Eloquent\\Model; class Copy extends RowAction { protected $model; public function __construct(string $model = null) { $this->model = $model; } /** * \u6807\u9898 * * @return string */ public function title() { return 'Copy'; } /** * \u8bbe\u7f6e\u786e\u8ba4\u5f39\u7a97\u4fe1\u606f\uff0c\u5982\u679c\u8fd4\u56de\u7a7a\u503c\uff0c\u5219\u4e0d\u4f1a\u5f39\u51fa\u5f39\u7a97 * * \u5141\u8bb8\u8fd4\u56de\u5b57\u7b26\u4e32\u6216\u6570\u7ec4\u7c7b\u578b * * @return array|string|void */ public function confirm() { return [ // \u786e\u8ba4\u5f39\u7a97 title \"\u60a8\u786e\u5b9a\u8981\u590d\u5236\u8fd9\u884c\u6570\u636e\u5417\uff1f\", // \u786e\u8ba4\u5f39\u7a97 content $this->row->username, ]; } /** * \u5904\u7406\u8bf7\u6c42 * * @param Request $request * * @return \\Dcat\\Admin\\Actions\\Response */ public function handle(Request $request) { // \u83b7\u53d6\u5f53\u524d\u884cID $id = $this->getKey(); // \u83b7\u53d6 parameters \u65b9\u6cd5\u4f20\u9012\u7684\u53c2\u6570 $username = $request->get('username'); $model = $request->get('model'); // \u590d\u5236\u6570\u636e $model::find($id)->replicate()->save(); // \u8fd4\u56de\u54cd\u5e94\u7ed3\u679c\u5e76\u5237\u65b0\u9875\u9762 return $this->response()->success(\"\u590d\u5236\u6210\u529f: [{$username}]\")->refresh(); } /** * \u8bbe\u7f6e\u8981POST\u5230\u63a5\u53e3\u7684\u6570\u636e * * @return array */ public function parameters() { return [ // \u53d1\u9001\u5f53\u524d\u884c username \u5b57\u6bb5\u6570\u636e\u5230\u63a5\u53e3 'username' => $this->row->username, // \u628a\u6a21\u578b\u7c7b\u540d\u4f20\u9012\u5230\u63a5\u53e3 'model' => $this->model, ]; } } \u4f7f\u7528 use App\\Models\\User; $grid->actions([new Copy(User::class)]); // \u4e5f\u53ef\u4ee5\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u6dfb\u52a0 $grid->actions(function (Grid\\Displayers\\Actions $actions) { $actions->append(new Copy(User::class)); }","title":"\u64cd\u4f5c\u6309\u94ae\u9700\u8981\u4e0eAPI\u4ea4\u4e92"},{"location":"2.x/model-grid-actions/#_7","text":"\u8bf7\u53c2\u8003\u6587\u6863 \u5de5\u5177\u8868\u5355 - \u5f39\u7a97","title":"\u8868\u5355\u5f39\u7a97"},{"location":"2.x/model-grid-async/","text":"\u8868\u683c\u5f02\u6b65\u6e32\u67d3 \u5f53\u9875\u9762\u7684\u8868\u683c\u5c55\u793a\u7684\u6570\u636e\u7279\u522b\u591a\uff08\u5217\u591a\u884c\u591a\uff09\uff0c\u5e76\u4e14\u52a0\u8f7d\u7684\u7ec4\u4ef6\u4e5f\u8f83\u591a\u65f6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u5361\u987f\u7684\u73b0\u8c61\uff0c\u6b64\u65f6\u53ef\u4ee5\u4f7f\u7528\u8868\u683c\u5f02\u6b65\u6e32\u67d3\u529f\u80fd\uff0c\u53ef\u4ee5\u6709\u6548\u5730\u51cf\u8f7b\u9875\u9762\u5361\u987f\u7684\u60c5\u51b5\uff1a // \u542f\u7528\u8868\u683c\u5f02\u6b65\u6e32\u67d3\u529f\u80fd $grid->async(); // \u7981\u7528 $grid->async(false); // \u5224\u65ad\u662f\u5426\u662f\u5f02\u6b65\u6e32\u67d3\u8bf7\u6c42 if ($grid->isAsyncRequest()) { ... } \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u9875\u9762\u6ca1\u6709\u51fa\u73b0\u660e\u663e\u7684\u5361\u987f\u73b0\u8c61\uff0c\u5219\u65e0\u9700\u542f\u7528\u6b64\u529f\u80fd\u3002\u5e76\u4e14\u5982\u679c\u9875\u9762\u4e2d\u5b58\u5728\u591a\u4e2a\u6570\u636e\u8868\u683c\uff0c\u90a3\u4e48\u4e5f\u65e0\u6cd5\u4f7f\u7528\u6b64\u529f\u80fd\u3002 \u5f00\u542f\u6b64\u529f\u80fd\u4e4b\u540e\uff0c\u8868\u683c \u5de5\u5177\u680f ( toolbar )\u4ee5\u4e0b\u7684\u4f4d\u7f6e\u90fd\u4f1a\u91c7\u7528\u5f02\u6b65\u7684\u65b9\u5f0f\u8fdb\u884c\u6e32\u67d3\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c \u5de5\u5177\u680f ( toolbar )\u4ee5\u53ca\u4ee5\u4e0a\u7684\u4f4d\u7f6e\u53ea\u4f1a\u5237\u65b0\u4e00\u6b21\uff01\u5728\u5b9e\u9645\u7f16\u7801\u8fc7\u7a0b\u4e2d\u9700\u8981\u6ce8\u610f\u6709\u65e0\u7279\u6b8a\u5f71\u54cd\u3002","title":"\u8868\u683c\u5f02\u6b65\u6e32\u67d3"},{"location":"2.x/model-grid-async/#_1","text":"\u5f53\u9875\u9762\u7684\u8868\u683c\u5c55\u793a\u7684\u6570\u636e\u7279\u522b\u591a\uff08\u5217\u591a\u884c\u591a\uff09\uff0c\u5e76\u4e14\u52a0\u8f7d\u7684\u7ec4\u4ef6\u4e5f\u8f83\u591a\u65f6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u5361\u987f\u7684\u73b0\u8c61\uff0c\u6b64\u65f6\u53ef\u4ee5\u4f7f\u7528\u8868\u683c\u5f02\u6b65\u6e32\u67d3\u529f\u80fd\uff0c\u53ef\u4ee5\u6709\u6548\u5730\u51cf\u8f7b\u9875\u9762\u5361\u987f\u7684\u60c5\u51b5\uff1a // \u542f\u7528\u8868\u683c\u5f02\u6b65\u6e32\u67d3\u529f\u80fd $grid->async(); // \u7981\u7528 $grid->async(false); // \u5224\u65ad\u662f\u5426\u662f\u5f02\u6b65\u6e32\u67d3\u8bf7\u6c42 if ($grid->isAsyncRequest()) { ... } \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u9875\u9762\u6ca1\u6709\u51fa\u73b0\u660e\u663e\u7684\u5361\u987f\u73b0\u8c61\uff0c\u5219\u65e0\u9700\u542f\u7528\u6b64\u529f\u80fd\u3002\u5e76\u4e14\u5982\u679c\u9875\u9762\u4e2d\u5b58\u5728\u591a\u4e2a\u6570\u636e\u8868\u683c\uff0c\u90a3\u4e48\u4e5f\u65e0\u6cd5\u4f7f\u7528\u6b64\u529f\u80fd\u3002 \u5f00\u542f\u6b64\u529f\u80fd\u4e4b\u540e\uff0c\u8868\u683c \u5de5\u5177\u680f ( toolbar )\u4ee5\u4e0b\u7684\u4f4d\u7f6e\u90fd\u4f1a\u91c7\u7528\u5f02\u6b65\u7684\u65b9\u5f0f\u8fdb\u884c\u6e32\u67d3\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c \u5de5\u5177\u680f ( toolbar )\u4ee5\u53ca\u4ee5\u4e0a\u7684\u4f4d\u7f6e\u53ea\u4f1a\u5237\u65b0\u4e00\u6b21\uff01\u5728\u5b9e\u9645\u7f16\u7801\u8fc7\u7a0b\u4e2d\u9700\u8981\u6ce8\u610f\u6709\u65e0\u7279\u6b8a\u5f71\u54cd\u3002","title":"\u8868\u683c\u5f02\u6b65\u6e32\u67d3"},{"location":"2.x/model-grid-column-display/","text":"\u5217\u7684\u663e\u793a\u548c\u6269\u5c55 \u6570\u636e\u8868\u683c\u5185\u7f6e\u4e86\u5f88\u591a\u5bf9\u4e8e\u5217\u7684\u64cd\u4f5c\u65b9\u6cd5\uff0c\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e9b\u65b9\u6cd5\u5f88\u7075\u6d3b\u7684\u64cd\u4f5c\u5217\u6570\u636e\u3002 \u6839\u636e\u6761\u4ef6\u663e\u793a\u4e0d\u540c\u7684\u7ec4\u4ef6 \u6709\u4e9b\u60c5\u51b5\u6211\u4eec\u9700\u8981\u6839\u636e\u67d0\u4e2a\u6761\u4ef6\u53bb\u5224\u65ad\u662f\u5426\u4f7f\u7528\u5217\u7684\u67d0\u4e2a\u663e\u793a\u529f\u80fd\uff1a {tip} \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c Grid\\Column::if \u53ea\u5bf9\u5217\u7684\u663e\u793a\u76f8\u5173\u529f\u80fd\u6709\u6548\uff0c\u5176\u4ed6\u65b9\u6cd5\u5982\u8868\u5934\u7684\u76f8\u5173\u64cd\u4f5c\u90fd\u4e0d\u80fd\u4f7f\u7528\u6b64\u65b9\u6cd5\uff01 $grid->column('config') ->if(function ($column) { // \u83b7\u53d6\u5f53\u524d\u884c\u5176\u4ed6\u5b57\u6bb5\u503c $username = $this->username; // $column->getValue() \u662f\u5f53\u524d\u5b57\u6bb5\u7684\u503c return $column->getValue(); }) ->display($view) ->copyable() ->else() ->display(''); \u4e0a\u9762\u5199\u6cd5\u7b49\u540c\u4e8e $grid->column('config') ->if(function ($column) { return $column->getValue(); }) ->then(function (Grid\\Column $column) { $column->display($view)->copyable(); }) ->else(function (Grid\\Column $column) { $column->display(''); }); \u652f\u6301\u591a\u4e2a if $grid->column('config') ->if(...) ->then(...) ->else(...) ->if(...) ->then(...) ->else(...); \u7ec8\u7ed3\u6761\u4ef6\u5224\u65ad end $grid->column('status') ->if(...) // \u6761\u4ef61 ->display(...) ->display(...) ->if(...) // \u6761\u4ef62 ->display(...) ->display(...) ->end() // \u7ec8\u7ed3\u524d\u9762\u7684\u6761\u4ef6\u5224\u65ad ->display(...); // \u6240\u6709\u6761\u4ef6\u90fd\u80fd\u751f\u6548 \u5217\u663e\u793a model-grid \u5185\u7f6e\u4e86\u82e5\u5e72\u65b9\u6cd5\u6765\u5e2e\u52a9\u4f60\u6269\u5c55\u5217\u529f\u80fd display Dcat\\Admin\\Grid\\Column \u5bf9\u8c61\u5185\u7f6e\u4e86 display() \u65b9\u6cd5\u6765\u901a\u8fc7\u4f20\u5165\u7684\u56de\u8c03\u51fd\u6570\u6765\u5904\u7406\u5f53\u524d\u5217\u7684\u503c\uff0c $grid->column('title')->display(function ($title) { return \"<span style='color:blue'>$title</span>\"; }); \u5728\u4f20\u5165\u7684\u533f\u540d\u51fd\u6570\u4e2d\u53ef\u4ee5\u901a\u8fc7\u4efb\u4f55\u65b9\u5f0f\u5bf9\u6570\u636e\u8fdb\u884c\u5904\u7406\uff0c\u53e6\u5916\u533f\u540d\u51fd\u6570\u7ed1\u5b9a\u4e86\u5f53\u524d\u5217\u7684\u6570\u636e\u4f5c\u4e3a\u7236\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5728\u51fd\u6570\u4e2d\u8c03\u7528\u5f53\u524d\u884c\u7684\u6570\u636e\uff1a $grid->column('first_name'); $grid->column('last_name'); // \u4e0d\u5b58\u5728\u7684`full_name`\u5b57\u6bb5 $grid->column('full_name')->display(function () { return $this->first_name . ' ' . $this->last_name; }); \u8bbe\u7f6e\u5217\u7684HTML\u5c5e\u6027 \u8bbe\u5217\u7684 html \u5c5e\u6027 $grid->column('name')->setAttributes(['style' => 'font-size:14px']); \u5217\u89c6\u56fe view \u65b9\u6cd5\u53ef\u4ee5\u5f15\u5165\u4e00\u4e2a\u89c6\u56fe\u6587\u4ef6\u3002 $grid->column('content')->view('admin.fields.content'); \u9ed8\u8ba4\u4f1a\u4f20\u5165\u89c6\u56fe\u7684\u4e09\u4e2a\u53d8\u91cf\uff1a - $model \u5f53\u524d\u884c\u6570\u636e - $name \u5b57\u6bb5\u540d\u79f0 - $value \u4e3a\u5f53\u524d\u5217\u7684\u503c \u6a21\u677f\u4ee3\u7801\u5982\u4e0b\uff1a <label>\u540d\u79f0\uff1a{{ $name }}</label> <label>\u503c\uff1a{{ $value }}</label> <label>\u5176\u4ed6\u5b57\u6bb5\uff1a{{ $model->title }}</label> \u56fe\u7247 $grid->column('picture')->image(); //\u8bbe\u7f6e\u670d\u52a1\u5668\u548c\u5bbd\u9ad8 $grid->column('picture')->image('http://xxx.com', 100, 100); // \u663e\u793a\u591a\u56fe $grid->column('pictures')->display(function ($pictures) { return json_decode($pictures, true); })->image('http://xxx.com', 100, 100); \u663e\u793alabel\u6807\u7b7e \u652f\u6301 Dcat\\Admin\\Color \u7c7b\u4e2d\u5185\u7f6e\u7684\u6240\u6709\u989c\u8272 use Dcat\\Admin\\Admin; $grid->column('name')->label(); // \u8bbe\u7f6e\u989c\u8272\uff0c\u76f4\u63a5\u4f20\u522b\u540d $grid->column('name')->label('danger'); // \u4e5f\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528 $grid->column('name')->label(Admin::color()->danger()); // \u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f20\u989c\u8272\u4ee3\u7801 $grid->column('name')->label('#222'); \u7ed9\u4e0d\u540c\u7684\u503c\u8bbe\u7f6e\u4e0d\u540c\u7684\u989c\u8272 use Dcat\\Admin\\Admin; $grid->column('state')->using([1 => '\u672a\u5904\u7406', 2 => '\u5df2\u5904\u7406', ...])->label([ 'default' => 'primary', // \u8bbe\u7f6e\u9ed8\u8ba4\u989c\u8272\uff0c\u4e0d\u8bbe\u7f6e\u5219\u9ed8\u8ba4\u4e3a default 1 => 'primary', 2 => 'danger', 3 => 'success', 4 => Admin::color()->info(), ]); \u663e\u793abadge\u6807\u7b7e \u652f\u6301 Dcat\\Admin\\Color \u7c7b\u4e2d\u5185\u7f6e\u7684\u6240\u6709\u989c\u8272 $grid->column('name')->badge(); // \u8bbe\u7f6e\u989c\u8272\uff0c\u76f4\u63a5\u4f20\u522b\u540d $grid->column('name')->badge('danger'); // \u4e5f\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528 $grid->column('name')->badge(Admin::color()->danger()); // \u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f20\u989c\u8272\u4ee3\u7801 $grid->column('name')->badge('#222'); \u7ed9\u4e0d\u540c\u7684\u503c\u8bbe\u7f6e\u4e0d\u540c\u7684\u989c\u8272 use Dcat\\Admin\\Admin; $grid->state->using([1 => '\u672a\u5904\u7406', 2 => '\u5df2\u5904\u7406', ...])->badge([ 'default' => 'primary', // \u8bbe\u7f6e\u9ed8\u8ba4\u989c\u8272\uff0c\u4e0d\u8bbe\u7f6e\u5219\u9ed8\u8ba4\u4e3a default 1 => 'primary', 2 => 'danger', 3 => 'success', 4 => Admin::color()->info(), ]); \u5e03\u5c14\u503c\u663e\u793a (bool) \u5c06\u8fd9\u4e00\u5217\u8f6c\u4e3a bool \u503c\u4e4b\u540e\u663e\u793a\u4e3a \u2713 \u548c \u2717 \u3002 $grid->column('approved')->bool(); \u4f60\u4e5f\u53ef\u4ee5\u6309\u7167\u8fd9\u4e00\u5217\u7684\u503c\u6307\u5b9a\u663e\u793a\uff0c\u6bd4\u5982\u5b57\u6bb5\u7684\u503c\u4e3a Y \u548c N \u8868\u793a true \u548c false $grid->column('approved')->bool(['Y' => true, 'N' => false]); \u6548\u679c \u5706\u70b9\u524d\u7f00 (dot) \u901a\u8fc7 dot \u65b9\u6cd5\u53ef\u4ee5\u5728\u5217\u6587\u5b57\u524d\u9762\u52a0\u4e0a\u4e00\u4e2a\u5e26\u989c\u8272\u7684\u5706\u70b9 use Dcat\\Admin\\Admin; $grid->column('state') ->using([1 => '\u672a\u5904\u7406', 2 => '\u5df2\u5904\u7406', ...]) ->dot( [ 1 => 'primary', 2 => 'danger', 3 => 'success', 4 => Admin::color()->info(), ], 'primary' // \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u9ed8\u8ba4\u503c ); \u6548\u679c \u5217\u5c55\u5f00 (expand) expand \u65b9\u6cd5\u53ef\u4ee5\u628a\u5185\u5bb9\u9690\u85cf\uff0c\u70b9\u51fb\u6309\u94ae\u7684\u65f6\u5019\u663e\u793a\u5728\u8868\u683c\u4e0b\u4e00\u884c $grid->column('content') ->display('\u8be6\u60c5') // \u8bbe\u7f6e\u6309\u94ae\u540d\u79f0 ->expand(function () { // \u8fd4\u56de\u663e\u793a\u7684\u8be6\u60c5 // \u8fd9\u91cc\u8fd4\u56de content \u5b57\u6bb5\u5185\u5bb9\uff0c\u5e76\u7528 Card \u5305\u88f9\u8d77\u6765 $card = new Card(null, $this->content); return \"<div style='padding:10px 10px 0'>$card</div>\"; }); \u4e5f\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8bbe\u7f6e\u6309\u94ae $grid->column('content')->expand(function (Grid\\Displayers\\Expand $expand) { // \u8bbe\u7f6e\u6309\u94ae\u540d\u79f0 $expand->button('\u8be6\u60c5'); // \u8fd4\u56de\u663e\u793a\u7684\u8be6\u60c5 // \u8fd9\u91cc\u8fd4\u56de content \u5b57\u6bb5\u5185\u5bb9\uff0c\u5e76\u7528 Card \u5305\u88f9\u8d77\u6765 $card = new Card(null, $this->content); return \"<div style='padding:10px 10px 0'>$card</div>\"; }); \u5f02\u6b65\u52a0\u8f7d {tip} \u66f4\u591a\u7528\u6cd5\u8bf7\u53c2\u8003\u6587\u6863 \u5f02\u6b65\u52a0\u8f7d \u5b9a\u4e49\u6e32\u67d3\u7c7b\uff0c\u7ee7\u627f Dcat\\Admin\\Support\\LazyRenderable use App\\Models\\Post as PostModel; use Dcat\\Admin\\Support\\LazyRenderable; use Dcat\\Admin\\Widgets\\Table; class Post extends LazyRenderable { public function render() { // \u83b7\u53d6ID $id = $this->key; // \u83b7\u53d6\u5176\u4ed6\u81ea\u5b9a\u4e49\u53c2\u6570 $type = $this->post_type; $data = PostModel::where('user_id', $id) ->where('type', $type) ->get(['title', 'body', 'body', 'created_at']) ->toArray(); $titles = [ 'User ID', 'Title', 'Body', 'Created At', ]; return Table::make($titles, $data); } } \u4f7f\u7528 $grid->post->display('View')->expand(Post::make(['post_type' => 1])); // \u53ef\u4ee5\u5728\u95ed\u5305\u5185\u8fd4\u56de\u5f02\u6b65\u52a0\u8f7d\u7c7b\u7684\u5b9e\u4f8b $grid->post->expand(function () { // \u5141\u8bb8\u5728\u6bd4\u5305\u5185\u8fd4\u56de\u5f02\u6b65\u52a0\u8f7d\u7c7b\u7684\u5b9e\u4f8b return Post::make(['title' => $this->title]); }); \u6548\u679c \u5f02\u6b65\u52a0\u8f7d\u5de5\u5177\u8868\u5355 \u5b9a\u4e49 \u5de5\u5177\u8868\u5355 \u7c7b\u5982\u4e0b {tip} \u66f4\u591a\u7528\u6cd5\u8bf7\u53c2\u8003 \u5f02\u6b65\u52a0\u8f7d <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Contracts\\LazyRenderable; use Dcat\\Admin\\Traits\\LazyWidget; use Dcat\\Admin\\Widgets\\Form; class UserProfile extends Form implements LazyRenderable { use LazyWidget; public function handle(array $input) { // \u63a5\u6536\u5916\u90e8\u4f20\u9012\u53c2\u6570 $type = $this->payload['type'] ?? null; return $this->response()->success('\u4fdd\u5b58\u6210\u529f'); } public function form() { // \u63a5\u6536\u5916\u90e8\u4f20\u9012\u53c2\u6570 $type = $this->payload['type'] ?? null; $this->text('name', trans('admin.name'))->required()->help('\u7528\u6237\u6635\u79f0'); $this->image('avatar', trans('admin.avatar'))->autoUpload(); $this->password('old_password', trans('admin.old_password')); $this->password('password', trans('admin.password')) ->minLength(5) ->maxLength(20) ->customFormat(function ($v) { if ($v == $this->password) { return; } return $v; }) ->help('\u8bf7\u8f93\u51655-20\u4e2a\u5b57\u7b26'); $this->password('password_confirmation', trans('admin.password_confirmation')) ->same('password') ->help('\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801'); } } \u4f7f\u7528 $grid->user->display('View')->expand(UserProfile::make(['type' => 1])); \u5f39\u51fa\u6a21\u6001\u6846 (modal) modal \u65b9\u6cd5\u53ef\u4ee5\u628a\u5185\u5bb9\u9690\u85cf\uff0c\u70b9\u51fb\u6309\u94ae\u7684\u65f6\u5019\u663e\u793a\u5728\u8868\u683c\u4e0b\u4e00\u884c $grid->column('content') ->display('\u67e5\u770b') // \u8bbe\u7f6e\u6309\u94ae\u540d\u79f0 ->modal(function ($modal) { // \u8bbe\u7f6e\u5f39\u7a97\u6807\u9898 $modal->title('\u6807\u9898 '.$this->username); // \u81ea\u5b9a\u4e49\u56fe\u6807 $modal->icon('feather icon-x'); $card = new Card(null, $this->content); return \"<div style='padding:10px 10px 0'>$card</div>\"; }); // \u4e5f\u53ef\u4ee5\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u8bbe\u7f6e\u5f39\u7a97\u6807\u9898 $grid->column('content') ->display('\u67e5\u770b') // \u8bbe\u7f6e\u6309\u94ae\u540d\u79f0 ->modal('\u5f39\u7a97\u6807\u9898', ...); \u5f02\u6b65\u52a0\u8f7d {tip} \u5173\u4e8e\u5f02\u6b65\u52a0\u8f7d\u7684\u66f4\u5177\u4f53\u7528\u6cd5\uff0c\u8bf7\u53c2\u8003\u6587\u6863 \u5f02\u6b65\u52a0\u8f7d \u5b9a\u4e49\u6e32\u67d3\u7c7b\uff0c\u7ee7\u627f Dcat\\Admin\\Support\\LazyRenderable use App\\Models\\Post as PostModel; use Dcat\\Admin\\Support\\LazyRenderable; use Dcat\\Admin\\Widgets\\Table; class Post extends LazyRenderable { public function render() { // \u83b7\u53d6ID $id = $this->key; // \u83b7\u53d6\u5176\u4ed6\u81ea\u5b9a\u4e49\u53c2\u6570 $type = $this->post_type; $data = PostModel::where('user_id', $id) ->where('type', $type) ->get(['title', 'body', 'body', 'created_at']) ->toArray(); $titles = [ 'User ID', 'Title', 'Body', 'Created At', ]; return Table::make($titles, $data); } } \u4f7f\u7528 $grid->post->display('View')->modal('Post', Post::make(['post_type' => 2])); // \u53ef\u4ee5\u5728\u95ed\u5305\u5185\u8fd4\u56de\u5f02\u6b65\u52a0\u8f7d\u7c7b\u7684\u5b9e\u4f8b $grid->post->modal(function ($modal) { $modal->title('\u81ea\u5b9a\u4e49\u5f39\u7a97\u6807\u9898'); // \u5141\u8bb8\u5728\u6bd4\u5305\u5185\u8fd4\u56de\u5f02\u6b65\u52a0\u8f7d\u7c7b\u7684\u5b9e\u4f8b return Post::make(['title' => $this->title]); }); \u6548\u679c \u5f02\u6b65\u52a0\u8f7d\u5de5\u5177\u8868\u5355 \u5b9a\u4e49 \u5de5\u5177\u8868\u5355 \u7c7b\u5982\u4e0b {tip} \u66f4\u591a\u7528\u6cd5\u8bf7\u53c2\u8003 \u5f02\u6b65\u52a0\u8f7d <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Contracts\\LazyRenderable; use Dcat\\Admin\\Traits\\LazyWidget; use Dcat\\Admin\\Widgets\\Form; class UserProfile extends Form implements LazyRenderable { use LazyWidget; public function handle(array $input) { // \u63a5\u6536\u5916\u90e8\u4f20\u9012\u53c2\u6570 $type = $this->payload['type'] ?? null; return $this->response()->success('\u4fdd\u5b58\u6210\u529f'); } public function form() { // \u63a5\u6536\u5916\u90e8\u4f20\u9012\u53c2\u6570 $type = $this->payload['type'] ?? null; $this->text('name', trans('admin.name'))->required()->help('\u7528\u6237\u6635\u79f0'); $this->image('avatar', trans('admin.avatar'))->autoUpload(); $this->password('old_password', trans('admin.old_password')); $this->password('password', trans('admin.password')) ->minLength(5) ->maxLength(20) ->customFormat(function ($v) { if ($v == $this->password) { return; } return $v; }) ->help('\u8bf7\u8f93\u51655-20\u4e2a\u5b57\u7b26'); $this->password('password_confirmation', trans('admin.password_confirmation')) ->same('password') ->help('\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801'); } } \u4f7f\u7528 $grid->user->display('View')->modal(UserProfile::make(['type' => 1])); \u8fdb\u5ea6\u6761 (progressBar) progressBar \u8fdb\u5ea6\u6761 $grid->rate->progressBar(); //\u8bbe\u7f6e\u989c\u8272\uff0c\u9ed8\u8ba4`primary`,\u53ef\u9009`danger`\u3001`warning`\u3001`info`\u3001`primary`\u3001`success` $grid->rate->progressBar('success'); // \u8bbe\u7f6e\u8fdb\u5ea6\u6761\u5c3a\u5bf8\u548c\u6700\u5927\u503c $grid->rate->progressBar('success', 'sm', 100); showTreeInDialog showTreeInDialog \u65b9\u6cd5\u53ef\u4ee5\u628a\u4e00\u4e2a\u5e26\u6709\u5c42\u7ea7\u5173\u7cfb\u7684\u6570\u7ec4\u5448\u73b0\u4e3a\u6811\u5f62\u5f39\u7a97\uff0c\u6bd4\u5982\u6743\u9650\u5c31\u53ef\u4ee5\u7528\u6b64\u65b9\u6cd5\u5c55\u793a // \u67e5\u51fa\u6240\u6709\u7684\u6743\u9650\u6570\u636e $nodes = (new $permissionModel)->allNodes(); // \u4f20\u5165\u4e8c\u7ef4\u6570\u7ec4\uff08\u672a\u5206\u5c42\u7ea7\uff09 $grid->permissions->showTreeInDialog($nodes); // \u4e5f\u53ef\u4ee5\u4f20\u5165\u95ed\u5305 $grid->permissions->showTreeInDialog(function (Grid\\Displayers\\DialogTree $tree) use (&$nodes, $roleModel) { // \u8bbe\u7f6e\u6240\u6709\u8282\u70b9 $tree->nodes($nodes); // \u8bbe\u7f6e\u8282\u70b9\u6570\u636e\u5b57\u6bb5\u540d\u79f0\uff0c\u9ed8\u8ba4\"id\"\uff0c\"name\"\uff0c\"parent_id\" $tree->setIdColumn('id'); $tree->setTitleColumn('title'); $tree->setParentColumn('parent_id'); // $this->roles \u53ef\u4ee5\u83b7\u53d6\u5f53\u524d\u884c\u7684\u5b57\u6bb5\u503c foreach (array_column($this->roles, 'slug') as $slug) { if ($roleModel::isAdministrator($slug)) { // \u9009\u4e2d\u6240\u6709\u8282\u70b9 $tree->checkAll(); } } }); \u5185\u5bb9\u6620\u5c04 (using) $grid->status->using([0 => '\u672a\u6fc0\u6d3b', 1 => '\u6b63\u5e38']); // \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u9ed8\u8ba4\u503c $grid->gender->using([1 => '\u7537', 2 => '\u5973'], '\u672a\u77e5'); \u5b57\u7b26\u4e32\u5206\u5272\u4e3a\u6570\u7ec4 explode \u65b9\u6cd5\u53ef\u4ee5\u628a\u5b57\u7b26\u4e32\u5206\u5272\u4e3a\u6570\u7ec4\u3002 $grid->tag->explode()->label(); // \u53ef\u4ee5\u6307\u5b9a\u5206\u9694\u7b26\uff0c\u9ed8\u8ba4\",\" $grid->tag->explode('|')->label(); prepend prepend \u65b9\u6cd5\u7528\u4e8e\u7ed9 string \u6216 array \u7c7b\u578b\u7684\u503c\u524d\u9762\u63d2\u5165\u5185\u5bb9\u3002 // \u5f53\u5b57\u6bb5\u503c\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32 $grid->email->prepend('mailto:'); // \u5f53\u5b57\u6bb5\u503c\u662f\u4e00\u4e2a\u6570\u7ec4 $grid->arr->prepend('first item'); prepend \u65b9\u6cd5\u5141\u8bb8\u4f20\u5165\u95ed\u5305\u53c2\u6570 $grid->email->prepend(function ($value, $original) { // $value \u662f\u5f53\u524d\u5b57\u6bb5\u503c // $original \u662f\u5f53\u524d\u5b57\u6bb5\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u51fa\u6765\u7684\u539f\u59cb\u503c // \u83b7\u53d6\u5176\u4ed6\u5b57\u6bb5\u503c $username = $this->username; return \"[{$username}]\"; }); append append \u65b9\u6cd5\u7528\u4e8e\u7ed9 string \u6216 array \u7c7b\u578b\u7684\u503c\u540e\u9762\u63d2\u5165\u5185\u5bb9\u3002 // \u5f53\u5b57\u6bb5\u503c\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32 $grid->email->append('@gmail.com'); // \u5f53\u5b57\u6bb5\u503c\u662f\u4e00\u4e2a\u6570\u7ec4 $grid->arr->append('last item'); append \u65b9\u6cd5\u5141\u8bb8\u4f20\u5165\u95ed\u5305\u53c2\u6570 $grid->email->append(function ($value, $original) { // $value \u662f\u5f53\u524d\u5b57\u6bb5\u503c // $original \u662f\u5f53\u524d\u5b57\u6bb5\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u51fa\u6765\u7684\u539f\u59cb\u503c // \u83b7\u53d6\u5176\u4ed6\u5b57\u6bb5\u503c $username = $this->username; return \"[{$username}]\"; }); \u5b57\u7b26\u4e32\u6216\u6570\u7ec4\u622a\u53d6 (limit) // \u6700\u591a\u663e\u793a50\u4e2a\u5b57\u7b26 $grid->column('content')->limit(50, '...'); // \u5982\u679c\u5b57\u6bb5\u503c\u662f\u6570\u7ec4\u4e5f\u652f\u6301 $grid->tags->limit(3); \u5217\u4e8c\u7ef4\u7801 (qrcode) $grid->website->qrcode(function () { return $this->url; }, 200, 200); \u53ef\u590d\u5236 (copyable) $grid->website->copyable(); \u53ef\u6392\u5e8f (orderable) \u901a\u8fc7 Column::orderable \u53ef\u4ee5\u5f00\u542f\u5b57\u6bb5\u53ef\u6392\u5e8f\u529f\u80fd\uff0c\u6b64\u529f\u80fd\u9700\u8981\u5728\u4f60\u7684\u6a21\u578b\u7c7b\u4e2d use ModelTree \u6216 use SortableTrait \uff0c\u5e76\u4e14\u9700\u8981\u7ee7\u627f Spatie\\EloquentSortable\\Sortable \u63a5\u53e3\u3002 SortableTrait \u5982\u679c\u4f60\u7684\u6570\u636e\u4e0d\u662f\u5c42\u7ea7\u7ed3\u6784\u6570\u636e\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 use SortableTrait \uff0c\u66f4\u591a\u7528\u6cd5\u53ef\u53c2\u8003 eloquent-sortable \u3002 \u6a21\u578b <?php namespace App\\Models; use Illuminate\\Database\\Eloquent\\Model; use Spatie\\EloquentSortable\\Sortable; use Spatie\\EloquentSortable\\SortableTrait; class MyModel extends Model implements Sortable { use SortableTrait; protected $sortable = [ // \u8bbe\u7f6e\u6392\u5e8f\u5b57\u6bb5\u540d\u79f0 'order_column_name' => 'order', // \u662f\u5426\u5728\u521b\u5efa\u65f6\u81ea\u52a8\u6392\u5e8f\uff0c\u6b64\u53c2\u6570\u5efa\u8bae\u8bbe\u7f6e\u4e3atrue 'sort_when_creating' => true, ]; } \u4f7f\u7528 $grid->model()->orderBy('order'); $grid->order->orderable(); ModelTree \u5982\u679c\u4f60\u7684\u6570\u636e\u662f\u5c42\u7ea7\u7ed3\u6784\u6570\u636e\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 use Model \uff0c\u4e0b\u9762\u4ee5\u6743\u9650\u6a21\u578b\u4e3a\u4f8b\u6765\u6f14\u793a\u7528\u6cd5 {tip} ModelTree \u5b9e\u9645\u4e0a\u4e5f\u662f\u7ee7\u627f\u4e86 eloquent-sortable \u7684\u529f\u80fd\u3002 <?php namespace Dcat\\Admin\\Models; use Dcat\\Admin\\Traits\\HasDateTimeFormatter; use Dcat\\Admin\\Traits\\ModelTree; use Spatie\\EloquentSortable\\Sortable; class Permission extends Model implements Sortable { use HasDateTimeFormatter, ModelTree { ModelTree::boot as treeBoot; } ... } \u4f7f\u7528 $grid->order->orderable(); \u94fe\u63a5 (link) \u5c06\u5b57\u6bb5\u663e\u793a\u4e3a\u4e00\u4e2a\u94fe\u63a5\u3002 // link\u65b9\u6cd5\u4e0d\u4f20\u53c2\u6570\u65f6\uff0c\u94fe\u63a5\u7684`href`\u548c`text`\u90fd\u662f\u5f53\u524d\u5217\u7684\u503c $grid->column('homepage')->link(); // \u4f20\u5165\u95ed\u5305 $grid->column('homepage')->link(function ($value) { return admin_url('users/'.$value); }); \u884c\u64cd\u4f5c (action) {tip} \u5728\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\u4e4b\u524d\uff0c\u8bf7\u5148\u9605\u8bfb \u81ea\u5b9a\u4e49\u64cd\u4f5c-\u884c\u64cd\u4f5c \u8fd9\u4e2a\u529f\u80fd\u53ef\u4ee5\u5c06\u67d0\u4e00\u5217\u663e\u793a\u4e3a\u4e00\u4e2a \u884c\u64cd\u4f5c \u7684\u6309\u94ae\uff0c\u6bd4\u5982\u4e0b\u9762\u6240\u793a\u662f\u4e00\u4e2a\u6807\u661f\u548c\u53d6\u6d88\u6807\u661f\u7684\u5217\u64cd\u4f5c\uff0c \u70b9\u51fb\u8fd9\u4e00\u5217\u7684\u661f\u6807\u56fe\u6807\u4e4b\u540e, \u540e\u53f0\u4f1a\u5207\u6362\u5b57\u6bb5\u7684\u72b6\u6001\uff0c\u9875\u9762\u56fe\u6807\u4e5f\u8ddf\u7740\u5207\u6362\uff0c\u5177\u4f53\u5b9e\u73b0\u4ee3\u7801\u5982\u4e0b\uff1a <?php namespace App\\Admin\\Extensions\\Grid\\RowAction; use Dcat\\Admin\\Grid\\RowAction; use Illuminate\\Http\\Request; class Star extends RowAction { protected function html() { $icon = ($this->row->{$this->getColumnName()}) ? 'fa-star' : 'fa-star-o'; return <<<HTML <i class=\"{$this->getElementClass()} fa {$icon}\"></i> HTML; } public function handle(Request $request) { try { $class = $request->class; $column = $request->column; $id = $this->getKey(); $model = $class::find($id); $model->{$column} = (int) !$model->{$column}; $model->save(); return $this->response()->success(\"success\")->refresh(); } catch (\\Exception $e) { return $this->response()->error($e->getMessage()); } } public function parameters() { return [ 'class' => $this->modelClass(), 'column' => $this->getColumnName(), ]; } public function getColumnName() { return $this->column->getName(); } public function modelClass() { return get_class($this->parent->model()->repository()->model()); } } \u4f7f\u7528 protected function grid() { $grid = new Grid(new $this->model()); $grid->column('star', '-')->action(Star::class); // here $grid->column('id', 'ID')->sortable()->bold(); return $grid; } \u6548\u679c \u5e2e\u52a9\u65b9\u6cd5 \u5b57\u7b26\u4e32\u64cd\u4f5c \u5982\u679c\u5f53\u524d\u91cc\u7684\u8f93\u51fa\u6570\u636e\u4e3a\u5b57\u7b26\u4e32\uff0c\u90a3\u4e48\u53ef\u4ee5\u901a\u8fc7\u94fe\u5f0f\u65b9\u6cd5\u8c03\u7528 Illuminate\\Support\\Str \u7684\u65b9\u6cd5\u3002 \u6bd4\u5982\u6709\u5982\u4e0b\u4e00\u5217\uff0c\u663e\u793a title \u5b57\u6bb5\u7684\u5b57\u7b26\u4e32\u503c: $grid->title(); \u5728 title \u5217\u8f93\u51fa\u7684\u5b57\u7b26\u4e32\u57fa\u7840\u4e0a\u8c03\u7528 Str::title() \u65b9\u6cd5 $grid->title()->title(); \u8c03\u7528\u65b9\u6cd5\u4e4b\u540e\u8f93\u51fa\u7684\u8fd8\u662f\u5b57\u7b26\u4e32\uff0c\u6240\u4ee5\u53ef\u4ee5\u7ee7\u7eed\u8c03\u7528 Illuminate\\Support\\Str \u7684\u65b9\u6cd5\uff1a $grid->title()->title()->ucfirst(); $grid->title()->title()->ucfirst()->substr(1, 10); \u6570\u7ec4\u64cd\u4f5c \u5982\u679c\u5f53\u524d\u5217\u8f93\u51fa\u7684\u662f\u6570\u7ec4\uff0c\u53ef\u4ee5\u76f4\u63a5\u94fe\u5f0f\u8c03\u7528 Illuminate\\Support\\Collection \u65b9\u6cd5\u3002 \u6bd4\u5982 tags \u5217\u662f\u4ece\u4e00\u5bf9\u591a\u5173\u7cfb\u53d6\u51fa\u6765\u7684\u6570\u7ec4\u6570\u636e\uff1a $grid->tags(); array ( 0 => array ( 'id' => '16', 'name' => 'php', 'created_at' => '2016-11-13 14:03:03', 'updated_at' => '2016-12-25 04:29:35', ), 1 => array ( 'id' => '17', 'name' => 'python', 'created_at' => '2016-11-13 14:03:09', 'updated_at' => '2016-12-25 04:30:27', ), ) \u8c03\u7528 Collection::pluck() \u65b9\u6cd5\u53d6\u51fa\u6570\u7ec4\u7684\u4e2d\u7684 name \u5217 $grid->tags()->pluck('name'); array ( 0 => 'php', 1 => 'python', ), \u53d6\u51fa name \u5217\u4e4b\u540e\u8f93\u51fa\u7684\u8fd8\u662f\u6570\u7ec4\uff0c\u8fd8\u80fd\u7ee7\u7eed\u8c03\u7528\u7528 Illuminate\\Support\\Collection \u7684\u65b9\u6cd5 $grid->tags()->pluck('name')->map('ucwords'); array ( 0 => 'Php', 1 => 'Python', ), \u5c06\u6570\u7ec4\u8f93\u51fa\u4e3a\u5b57\u7b26\u4e32 $grid->tags()->pluck('name')->map('ucwords')->implode('-'); \"Php-Python\" \u6df7\u5408\u4f7f\u7528 \u5728\u4e0a\u9762\u4e24\u79cd\u7c7b\u578b\u7684\u65b9\u6cd5\u8c03\u7528\u4e2d\uff0c\u53ea\u8981\u4e0a\u4e00\u6b65\u8f93\u51fa\u7684\u662f\u786e\u5b9a\u7c7b\u578b\u7684\u503c\uff0c\u4fbf\u53ef\u4ee5\u8c03\u7528\u7c7b\u578b\u5bf9\u5e94\u7684\u65b9\u6cd5\uff0c\u6240\u4ee5\u53ef\u4ee5\u5f88\u7075\u6d3b\u7684\u6df7\u5408\u4f7f\u7528\u3002 \u6bd4\u5982 images \u5b57\u6bb5\u662f\u5b58\u50a8\u591a\u56fe\u7247\u5730\u5740\u6570\u7ec4\u7684JSON\u683c\u5f0f\u5b57\u7b26\u4e32\u7c7b\u578b\uff1a $grid->images(); // \"['foo.jpg', 'bar.png']\" // \u94fe\u5f0f\u65b9\u6cd5\u8c03\u7528\u6765\u663e\u793a\u591a\u56fe $grid->images()->display(function ($images) { return json_decode($images, true); })->map(function ($path) { return 'http://localhost/images/'. $path; })->image(); \u6269\u5c55\u5217\u7684\u663e\u793a\u529f\u80fd \u53ef\u4ee5\u901a\u8fc7\u4e24\u79cd\u65b9\u5f0f\u6269\u5c55\u5217\u529f\u80fd\uff0c\u7b2c\u4e00\u79cd\u662f\u901a\u8fc7\u533f\u540d\u51fd\u6570\u7684\u65b9\u5f0f\u3002 \u6269\u5c55\u5217\u529f\u80fd\u65b9\u6cd5\u540eIDE\u9ed8\u8ba4\u662f\u4e0d\u4f1a\u81ea\u52a8\u8865\u5168\u7684\uff0c\u8fd9\u65f6\u5019\u53ef\u4ee5\u901a\u8fc7 php artisan admin:ide-helper \u751f\u6210IDE\u63d0\u793a\u6587\u4ef6\u3002 \u533f\u540d\u51fd\u6570 \u5728 app/Admin/bootstrap.php \u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801: use Dcat\\Admin\\Grid\\Column; // \u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u81ea\u5b9a\u4e49\u53c2\u6570 Column::extend('color', function ($value, $color) { return \"<span style='color: $color'>$value</span>\"; }); \u7136\u540e\u5728 model-grid \u4e2d\u4f7f\u7528\u8fd9\u4e2a\u6269\u5c55\uff1a $grid->title()->color('#ccc'); \u6269\u5c55\u7c7b \u5982\u679c\u5217\u663e\u793a\u903b\u8f91\u6bd4\u8f83\u590d\u6742\uff0c\u53ef\u4ee5\u901a\u8fc7\u6269\u5c55\u7c7b\u6765\u5b9e\u73b0\u3002 \u6269\u5c55\u7c7b app/Admin/Extensions/Popover.php : <?php namespace App\\Admin\\Extensions; use Dcat\\Admin\\Admin; use Dcat\\Admin\\Grid\\Displayers\\AbstractDisplayer; class Popover extends AbstractDisplayer { public function display($placement = 'left') { Admin::script(\"$('[data-toggle=\\\"popover\\\"]').popover()\"); return <<<EOT <button type=\"button\" class=\"btn btn-secondary\" title=\"popover\" data-container=\"body\" data-toggle=\"popover\" data-placement=\"$placement\" data-content=\"{$this->value}\" > \u5f39\u51fa\u63d0\u793a </button> EOT; } } \u7136\u540e\u5728 app/Admin/bootstrap.php \u6ce8\u518c\u6269\u5c55\u7c7b\uff1a use Dcat\\Admin\\Grid\\Column; use App\\Admin\\Extensions\\Popover; Column::extend('popover', Popover::class); \u7136\u540e\u5c31\u80fd\u5728 model-grid \u4e2d\u4f7f\u7528\u4e86\uff1a $grid->desciption()->popover('right'); \u6307\u5b9a\u5217\u540d \u51fa\u4e86\u4e0a\u8ff0\u4e24\u79cd\u65b9\u5f0f\u6269\u5c55\u5217\u529f\u80fd\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a\u5217\u540d\u79f0\u7684\u65b9\u5f0f\u6269\u5c55\u5217\u529f\u80fd \u5728 app/Admin/bootstrap.php \u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801: use Dcat\\Admin\\Grid\\Column; // \u8fd9\u4e2a\u6269\u5c55\u65b9\u6cd5\u7b49\u540c\u4e8e // $grid->title()->display(function ($value) { // return \"<span style='color:red'>$value</span>\" // }); Column::define('title', function ($value) { return \"<span style='color:red'>$value</span>\" }); // \u8fd9\u4e2a\u6269\u5c55\u65b9\u6cd5\u7b49\u540c\u4e8e // $grid->status()->switch(); Column::define('status', Dcat\\Admin\\Grid\\Displayers\\SwitchDisplay::class); \u7136\u540e\u5728 model-grid \u4e2d title \u548c status \u5b57\u6bb5\u4f1a\u81ea\u52a8\u4f7f\u7528\u4ee5\u4e0a\u6269\u5c55\uff1a $grid->title(); $grid->status();","title":"\u5217\u7684\u663e\u793a\u548c\u6269\u5c55"},{"location":"2.x/model-grid-column-display/#_1","text":"\u6570\u636e\u8868\u683c\u5185\u7f6e\u4e86\u5f88\u591a\u5bf9\u4e8e\u5217\u7684\u64cd\u4f5c\u65b9\u6cd5\uff0c\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e9b\u65b9\u6cd5\u5f88\u7075\u6d3b\u7684\u64cd\u4f5c\u5217\u6570\u636e\u3002","title":"\u5217\u7684\u663e\u793a\u548c\u6269\u5c55"},{"location":"2.x/model-grid-column-display/#_2","text":"\u6709\u4e9b\u60c5\u51b5\u6211\u4eec\u9700\u8981\u6839\u636e\u67d0\u4e2a\u6761\u4ef6\u53bb\u5224\u65ad\u662f\u5426\u4f7f\u7528\u5217\u7684\u67d0\u4e2a\u663e\u793a\u529f\u80fd\uff1a {tip} \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c Grid\\Column::if \u53ea\u5bf9\u5217\u7684\u663e\u793a\u76f8\u5173\u529f\u80fd\u6709\u6548\uff0c\u5176\u4ed6\u65b9\u6cd5\u5982\u8868\u5934\u7684\u76f8\u5173\u64cd\u4f5c\u90fd\u4e0d\u80fd\u4f7f\u7528\u6b64\u65b9\u6cd5\uff01 $grid->column('config') ->if(function ($column) { // \u83b7\u53d6\u5f53\u524d\u884c\u5176\u4ed6\u5b57\u6bb5\u503c $username = $this->username; // $column->getValue() \u662f\u5f53\u524d\u5b57\u6bb5\u7684\u503c return $column->getValue(); }) ->display($view) ->copyable() ->else() ->display(''); \u4e0a\u9762\u5199\u6cd5\u7b49\u540c\u4e8e $grid->column('config') ->if(function ($column) { return $column->getValue(); }) ->then(function (Grid\\Column $column) { $column->display($view)->copyable(); }) ->else(function (Grid\\Column $column) { $column->display(''); }); \u652f\u6301\u591a\u4e2a if $grid->column('config') ->if(...) ->then(...) ->else(...) ->if(...) ->then(...) ->else(...); \u7ec8\u7ed3\u6761\u4ef6\u5224\u65ad end $grid->column('status') ->if(...) // \u6761\u4ef61 ->display(...) ->display(...) ->if(...) // \u6761\u4ef62 ->display(...) ->display(...) ->end() // \u7ec8\u7ed3\u524d\u9762\u7684\u6761\u4ef6\u5224\u65ad ->display(...); // \u6240\u6709\u6761\u4ef6\u90fd\u80fd\u751f\u6548","title":"\u6839\u636e\u6761\u4ef6\u663e\u793a\u4e0d\u540c\u7684\u7ec4\u4ef6"},{"location":"2.x/model-grid-column-display/#_3","text":"model-grid \u5185\u7f6e\u4e86\u82e5\u5e72\u65b9\u6cd5\u6765\u5e2e\u52a9\u4f60\u6269\u5c55\u5217\u529f\u80fd","title":"\u5217\u663e\u793a"},{"location":"2.x/model-grid-column-display/#display","text":"Dcat\\Admin\\Grid\\Column \u5bf9\u8c61\u5185\u7f6e\u4e86 display() \u65b9\u6cd5\u6765\u901a\u8fc7\u4f20\u5165\u7684\u56de\u8c03\u51fd\u6570\u6765\u5904\u7406\u5f53\u524d\u5217\u7684\u503c\uff0c $grid->column('title')->display(function ($title) { return \"<span style='color:blue'>$title</span>\"; }); \u5728\u4f20\u5165\u7684\u533f\u540d\u51fd\u6570\u4e2d\u53ef\u4ee5\u901a\u8fc7\u4efb\u4f55\u65b9\u5f0f\u5bf9\u6570\u636e\u8fdb\u884c\u5904\u7406\uff0c\u53e6\u5916\u533f\u540d\u51fd\u6570\u7ed1\u5b9a\u4e86\u5f53\u524d\u5217\u7684\u6570\u636e\u4f5c\u4e3a\u7236\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5728\u51fd\u6570\u4e2d\u8c03\u7528\u5f53\u524d\u884c\u7684\u6570\u636e\uff1a $grid->column('first_name'); $grid->column('last_name'); // \u4e0d\u5b58\u5728\u7684`full_name`\u5b57\u6bb5 $grid->column('full_name')->display(function () { return $this->first_name . ' ' . $this->last_name; });","title":"display"},{"location":"2.x/model-grid-column-display/#html","text":"\u8bbe\u5217\u7684 html \u5c5e\u6027 $grid->column('name')->setAttributes(['style' => 'font-size:14px']);","title":"\u8bbe\u7f6e\u5217\u7684HTML\u5c5e\u6027"},{"location":"2.x/model-grid-column-display/#_4","text":"view \u65b9\u6cd5\u53ef\u4ee5\u5f15\u5165\u4e00\u4e2a\u89c6\u56fe\u6587\u4ef6\u3002 $grid->column('content')->view('admin.fields.content'); \u9ed8\u8ba4\u4f1a\u4f20\u5165\u89c6\u56fe\u7684\u4e09\u4e2a\u53d8\u91cf\uff1a - $model \u5f53\u524d\u884c\u6570\u636e - $name \u5b57\u6bb5\u540d\u79f0 - $value \u4e3a\u5f53\u524d\u5217\u7684\u503c \u6a21\u677f\u4ee3\u7801\u5982\u4e0b\uff1a <label>\u540d\u79f0\uff1a{{ $name }}</label> <label>\u503c\uff1a{{ $value }}</label> <label>\u5176\u4ed6\u5b57\u6bb5\uff1a{{ $model->title }}</label>","title":"\u5217\u89c6\u56fe"},{"location":"2.x/model-grid-column-display/#_5","text":"$grid->column('picture')->image(); //\u8bbe\u7f6e\u670d\u52a1\u5668\u548c\u5bbd\u9ad8 $grid->column('picture')->image('http://xxx.com', 100, 100); // \u663e\u793a\u591a\u56fe $grid->column('pictures')->display(function ($pictures) { return json_decode($pictures, true); })->image('http://xxx.com', 100, 100);","title":"\u56fe\u7247"},{"location":"2.x/model-grid-column-display/#label","text":"\u652f\u6301 Dcat\\Admin\\Color \u7c7b\u4e2d\u5185\u7f6e\u7684\u6240\u6709\u989c\u8272 use Dcat\\Admin\\Admin; $grid->column('name')->label(); // \u8bbe\u7f6e\u989c\u8272\uff0c\u76f4\u63a5\u4f20\u522b\u540d $grid->column('name')->label('danger'); // \u4e5f\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528 $grid->column('name')->label(Admin::color()->danger()); // \u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f20\u989c\u8272\u4ee3\u7801 $grid->column('name')->label('#222'); \u7ed9\u4e0d\u540c\u7684\u503c\u8bbe\u7f6e\u4e0d\u540c\u7684\u989c\u8272 use Dcat\\Admin\\Admin; $grid->column('state')->using([1 => '\u672a\u5904\u7406', 2 => '\u5df2\u5904\u7406', ...])->label([ 'default' => 'primary', // \u8bbe\u7f6e\u9ed8\u8ba4\u989c\u8272\uff0c\u4e0d\u8bbe\u7f6e\u5219\u9ed8\u8ba4\u4e3a default 1 => 'primary', 2 => 'danger', 3 => 'success', 4 => Admin::color()->info(), ]);","title":"\u663e\u793alabel\u6807\u7b7e"},{"location":"2.x/model-grid-column-display/#badge","text":"\u652f\u6301 Dcat\\Admin\\Color \u7c7b\u4e2d\u5185\u7f6e\u7684\u6240\u6709\u989c\u8272 $grid->column('name')->badge(); // \u8bbe\u7f6e\u989c\u8272\uff0c\u76f4\u63a5\u4f20\u522b\u540d $grid->column('name')->badge('danger'); // \u4e5f\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528 $grid->column('name')->badge(Admin::color()->danger()); // \u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f20\u989c\u8272\u4ee3\u7801 $grid->column('name')->badge('#222'); \u7ed9\u4e0d\u540c\u7684\u503c\u8bbe\u7f6e\u4e0d\u540c\u7684\u989c\u8272 use Dcat\\Admin\\Admin; $grid->state->using([1 => '\u672a\u5904\u7406', 2 => '\u5df2\u5904\u7406', ...])->badge([ 'default' => 'primary', // \u8bbe\u7f6e\u9ed8\u8ba4\u989c\u8272\uff0c\u4e0d\u8bbe\u7f6e\u5219\u9ed8\u8ba4\u4e3a default 1 => 'primary', 2 => 'danger', 3 => 'success', 4 => Admin::color()->info(), ]);","title":"\u663e\u793abadge\u6807\u7b7e"},{"location":"2.x/model-grid-column-display/#bool","text":"\u5c06\u8fd9\u4e00\u5217\u8f6c\u4e3a bool \u503c\u4e4b\u540e\u663e\u793a\u4e3a \u2713 \u548c \u2717 \u3002 $grid->column('approved')->bool(); \u4f60\u4e5f\u53ef\u4ee5\u6309\u7167\u8fd9\u4e00\u5217\u7684\u503c\u6307\u5b9a\u663e\u793a\uff0c\u6bd4\u5982\u5b57\u6bb5\u7684\u503c\u4e3a Y \u548c N \u8868\u793a true \u548c false $grid->column('approved')->bool(['Y' => true, 'N' => false]); \u6548\u679c","title":"\u5e03\u5c14\u503c\u663e\u793a (bool)"},{"location":"2.x/model-grid-column-display/#dot","text":"\u901a\u8fc7 dot \u65b9\u6cd5\u53ef\u4ee5\u5728\u5217\u6587\u5b57\u524d\u9762\u52a0\u4e0a\u4e00\u4e2a\u5e26\u989c\u8272\u7684\u5706\u70b9 use Dcat\\Admin\\Admin; $grid->column('state') ->using([1 => '\u672a\u5904\u7406', 2 => '\u5df2\u5904\u7406', ...]) ->dot( [ 1 => 'primary', 2 => 'danger', 3 => 'success', 4 => Admin::color()->info(), ], 'primary' // \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u9ed8\u8ba4\u503c ); \u6548\u679c","title":"\u5706\u70b9\u524d\u7f00 (dot)"},{"location":"2.x/model-grid-column-display/#expand","text":"expand \u65b9\u6cd5\u53ef\u4ee5\u628a\u5185\u5bb9\u9690\u85cf\uff0c\u70b9\u51fb\u6309\u94ae\u7684\u65f6\u5019\u663e\u793a\u5728\u8868\u683c\u4e0b\u4e00\u884c $grid->column('content') ->display('\u8be6\u60c5') // \u8bbe\u7f6e\u6309\u94ae\u540d\u79f0 ->expand(function () { // \u8fd4\u56de\u663e\u793a\u7684\u8be6\u60c5 // \u8fd9\u91cc\u8fd4\u56de content \u5b57\u6bb5\u5185\u5bb9\uff0c\u5e76\u7528 Card \u5305\u88f9\u8d77\u6765 $card = new Card(null, $this->content); return \"<div style='padding:10px 10px 0'>$card</div>\"; }); \u4e5f\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8bbe\u7f6e\u6309\u94ae $grid->column('content')->expand(function (Grid\\Displayers\\Expand $expand) { // \u8bbe\u7f6e\u6309\u94ae\u540d\u79f0 $expand->button('\u8be6\u60c5'); // \u8fd4\u56de\u663e\u793a\u7684\u8be6\u60c5 // \u8fd9\u91cc\u8fd4\u56de content \u5b57\u6bb5\u5185\u5bb9\uff0c\u5e76\u7528 Card \u5305\u88f9\u8d77\u6765 $card = new Card(null, $this->content); return \"<div style='padding:10px 10px 0'>$card</div>\"; });","title":"\u5217\u5c55\u5f00 (expand)"},{"location":"2.x/model-grid-column-display/#_6","text":"{tip} \u66f4\u591a\u7528\u6cd5\u8bf7\u53c2\u8003\u6587\u6863 \u5f02\u6b65\u52a0\u8f7d \u5b9a\u4e49\u6e32\u67d3\u7c7b\uff0c\u7ee7\u627f Dcat\\Admin\\Support\\LazyRenderable use App\\Models\\Post as PostModel; use Dcat\\Admin\\Support\\LazyRenderable; use Dcat\\Admin\\Widgets\\Table; class Post extends LazyRenderable { public function render() { // \u83b7\u53d6ID $id = $this->key; // \u83b7\u53d6\u5176\u4ed6\u81ea\u5b9a\u4e49\u53c2\u6570 $type = $this->post_type; $data = PostModel::where('user_id', $id) ->where('type', $type) ->get(['title', 'body', 'body', 'created_at']) ->toArray(); $titles = [ 'User ID', 'Title', 'Body', 'Created At', ]; return Table::make($titles, $data); } } \u4f7f\u7528 $grid->post->display('View')->expand(Post::make(['post_type' => 1])); // \u53ef\u4ee5\u5728\u95ed\u5305\u5185\u8fd4\u56de\u5f02\u6b65\u52a0\u8f7d\u7c7b\u7684\u5b9e\u4f8b $grid->post->expand(function () { // \u5141\u8bb8\u5728\u6bd4\u5305\u5185\u8fd4\u56de\u5f02\u6b65\u52a0\u8f7d\u7c7b\u7684\u5b9e\u4f8b return Post::make(['title' => $this->title]); }); \u6548\u679c","title":"\u5f02\u6b65\u52a0\u8f7d"},{"location":"2.x/model-grid-column-display/#_7","text":"\u5b9a\u4e49 \u5de5\u5177\u8868\u5355 \u7c7b\u5982\u4e0b {tip} \u66f4\u591a\u7528\u6cd5\u8bf7\u53c2\u8003 \u5f02\u6b65\u52a0\u8f7d <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Contracts\\LazyRenderable; use Dcat\\Admin\\Traits\\LazyWidget; use Dcat\\Admin\\Widgets\\Form; class UserProfile extends Form implements LazyRenderable { use LazyWidget; public function handle(array $input) { // \u63a5\u6536\u5916\u90e8\u4f20\u9012\u53c2\u6570 $type = $this->payload['type'] ?? null; return $this->response()->success('\u4fdd\u5b58\u6210\u529f'); } public function form() { // \u63a5\u6536\u5916\u90e8\u4f20\u9012\u53c2\u6570 $type = $this->payload['type'] ?? null; $this->text('name', trans('admin.name'))->required()->help('\u7528\u6237\u6635\u79f0'); $this->image('avatar', trans('admin.avatar'))->autoUpload(); $this->password('old_password', trans('admin.old_password')); $this->password('password', trans('admin.password')) ->minLength(5) ->maxLength(20) ->customFormat(function ($v) { if ($v == $this->password) { return; } return $v; }) ->help('\u8bf7\u8f93\u51655-20\u4e2a\u5b57\u7b26'); $this->password('password_confirmation', trans('admin.password_confirmation')) ->same('password') ->help('\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801'); } } \u4f7f\u7528 $grid->user->display('View')->expand(UserProfile::make(['type' => 1]));","title":"\u5f02\u6b65\u52a0\u8f7d\u5de5\u5177\u8868\u5355"},{"location":"2.x/model-grid-column-display/#modal","text":"modal \u65b9\u6cd5\u53ef\u4ee5\u628a\u5185\u5bb9\u9690\u85cf\uff0c\u70b9\u51fb\u6309\u94ae\u7684\u65f6\u5019\u663e\u793a\u5728\u8868\u683c\u4e0b\u4e00\u884c $grid->column('content') ->display('\u67e5\u770b') // \u8bbe\u7f6e\u6309\u94ae\u540d\u79f0 ->modal(function ($modal) { // \u8bbe\u7f6e\u5f39\u7a97\u6807\u9898 $modal->title('\u6807\u9898 '.$this->username); // \u81ea\u5b9a\u4e49\u56fe\u6807 $modal->icon('feather icon-x'); $card = new Card(null, $this->content); return \"<div style='padding:10px 10px 0'>$card</div>\"; }); // \u4e5f\u53ef\u4ee5\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u8bbe\u7f6e\u5f39\u7a97\u6807\u9898 $grid->column('content') ->display('\u67e5\u770b') // \u8bbe\u7f6e\u6309\u94ae\u540d\u79f0 ->modal('\u5f39\u7a97\u6807\u9898', ...);","title":"\u5f39\u51fa\u6a21\u6001\u6846 (modal)"},{"location":"2.x/model-grid-column-display/#_8","text":"{tip} \u5173\u4e8e\u5f02\u6b65\u52a0\u8f7d\u7684\u66f4\u5177\u4f53\u7528\u6cd5\uff0c\u8bf7\u53c2\u8003\u6587\u6863 \u5f02\u6b65\u52a0\u8f7d \u5b9a\u4e49\u6e32\u67d3\u7c7b\uff0c\u7ee7\u627f Dcat\\Admin\\Support\\LazyRenderable use App\\Models\\Post as PostModel; use Dcat\\Admin\\Support\\LazyRenderable; use Dcat\\Admin\\Widgets\\Table; class Post extends LazyRenderable { public function render() { // \u83b7\u53d6ID $id = $this->key; // \u83b7\u53d6\u5176\u4ed6\u81ea\u5b9a\u4e49\u53c2\u6570 $type = $this->post_type; $data = PostModel::where('user_id', $id) ->where('type', $type) ->get(['title', 'body', 'body', 'created_at']) ->toArray(); $titles = [ 'User ID', 'Title', 'Body', 'Created At', ]; return Table::make($titles, $data); } } \u4f7f\u7528 $grid->post->display('View')->modal('Post', Post::make(['post_type' => 2])); // \u53ef\u4ee5\u5728\u95ed\u5305\u5185\u8fd4\u56de\u5f02\u6b65\u52a0\u8f7d\u7c7b\u7684\u5b9e\u4f8b $grid->post->modal(function ($modal) { $modal->title('\u81ea\u5b9a\u4e49\u5f39\u7a97\u6807\u9898'); // \u5141\u8bb8\u5728\u6bd4\u5305\u5185\u8fd4\u56de\u5f02\u6b65\u52a0\u8f7d\u7c7b\u7684\u5b9e\u4f8b return Post::make(['title' => $this->title]); }); \u6548\u679c","title":"\u5f02\u6b65\u52a0\u8f7d"},{"location":"2.x/model-grid-column-display/#_9","text":"\u5b9a\u4e49 \u5de5\u5177\u8868\u5355 \u7c7b\u5982\u4e0b {tip} \u66f4\u591a\u7528\u6cd5\u8bf7\u53c2\u8003 \u5f02\u6b65\u52a0\u8f7d <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Contracts\\LazyRenderable; use Dcat\\Admin\\Traits\\LazyWidget; use Dcat\\Admin\\Widgets\\Form; class UserProfile extends Form implements LazyRenderable { use LazyWidget; public function handle(array $input) { // \u63a5\u6536\u5916\u90e8\u4f20\u9012\u53c2\u6570 $type = $this->payload['type'] ?? null; return $this->response()->success('\u4fdd\u5b58\u6210\u529f'); } public function form() { // \u63a5\u6536\u5916\u90e8\u4f20\u9012\u53c2\u6570 $type = $this->payload['type'] ?? null; $this->text('name', trans('admin.name'))->required()->help('\u7528\u6237\u6635\u79f0'); $this->image('avatar', trans('admin.avatar'))->autoUpload(); $this->password('old_password', trans('admin.old_password')); $this->password('password', trans('admin.password')) ->minLength(5) ->maxLength(20) ->customFormat(function ($v) { if ($v == $this->password) { return; } return $v; }) ->help('\u8bf7\u8f93\u51655-20\u4e2a\u5b57\u7b26'); $this->password('password_confirmation', trans('admin.password_confirmation')) ->same('password') ->help('\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801'); } } \u4f7f\u7528 $grid->user->display('View')->modal(UserProfile::make(['type' => 1]));","title":"\u5f02\u6b65\u52a0\u8f7d\u5de5\u5177\u8868\u5355"},{"location":"2.x/model-grid-column-display/#progressbar","text":"progressBar \u8fdb\u5ea6\u6761 $grid->rate->progressBar(); //\u8bbe\u7f6e\u989c\u8272\uff0c\u9ed8\u8ba4`primary`,\u53ef\u9009`danger`\u3001`warning`\u3001`info`\u3001`primary`\u3001`success` $grid->rate->progressBar('success'); // \u8bbe\u7f6e\u8fdb\u5ea6\u6761\u5c3a\u5bf8\u548c\u6700\u5927\u503c $grid->rate->progressBar('success', 'sm', 100);","title":"\u8fdb\u5ea6\u6761 (progressBar)"},{"location":"2.x/model-grid-column-display/#showtreeindialog","text":"showTreeInDialog \u65b9\u6cd5\u53ef\u4ee5\u628a\u4e00\u4e2a\u5e26\u6709\u5c42\u7ea7\u5173\u7cfb\u7684\u6570\u7ec4\u5448\u73b0\u4e3a\u6811\u5f62\u5f39\u7a97\uff0c\u6bd4\u5982\u6743\u9650\u5c31\u53ef\u4ee5\u7528\u6b64\u65b9\u6cd5\u5c55\u793a // \u67e5\u51fa\u6240\u6709\u7684\u6743\u9650\u6570\u636e $nodes = (new $permissionModel)->allNodes(); // \u4f20\u5165\u4e8c\u7ef4\u6570\u7ec4\uff08\u672a\u5206\u5c42\u7ea7\uff09 $grid->permissions->showTreeInDialog($nodes); // \u4e5f\u53ef\u4ee5\u4f20\u5165\u95ed\u5305 $grid->permissions->showTreeInDialog(function (Grid\\Displayers\\DialogTree $tree) use (&$nodes, $roleModel) { // \u8bbe\u7f6e\u6240\u6709\u8282\u70b9 $tree->nodes($nodes); // \u8bbe\u7f6e\u8282\u70b9\u6570\u636e\u5b57\u6bb5\u540d\u79f0\uff0c\u9ed8\u8ba4\"id\"\uff0c\"name\"\uff0c\"parent_id\" $tree->setIdColumn('id'); $tree->setTitleColumn('title'); $tree->setParentColumn('parent_id'); // $this->roles \u53ef\u4ee5\u83b7\u53d6\u5f53\u524d\u884c\u7684\u5b57\u6bb5\u503c foreach (array_column($this->roles, 'slug') as $slug) { if ($roleModel::isAdministrator($slug)) { // \u9009\u4e2d\u6240\u6709\u8282\u70b9 $tree->checkAll(); } } });","title":"showTreeInDialog"},{"location":"2.x/model-grid-column-display/#using","text":"$grid->status->using([0 => '\u672a\u6fc0\u6d3b', 1 => '\u6b63\u5e38']); // \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u9ed8\u8ba4\u503c $grid->gender->using([1 => '\u7537', 2 => '\u5973'], '\u672a\u77e5');","title":"\u5185\u5bb9\u6620\u5c04 (using)"},{"location":"2.x/model-grid-column-display/#_10","text":"explode \u65b9\u6cd5\u53ef\u4ee5\u628a\u5b57\u7b26\u4e32\u5206\u5272\u4e3a\u6570\u7ec4\u3002 $grid->tag->explode()->label(); // \u53ef\u4ee5\u6307\u5b9a\u5206\u9694\u7b26\uff0c\u9ed8\u8ba4\",\" $grid->tag->explode('|')->label();","title":"\u5b57\u7b26\u4e32\u5206\u5272\u4e3a\u6570\u7ec4"},{"location":"2.x/model-grid-column-display/#prepend","text":"prepend \u65b9\u6cd5\u7528\u4e8e\u7ed9 string \u6216 array \u7c7b\u578b\u7684\u503c\u524d\u9762\u63d2\u5165\u5185\u5bb9\u3002 // \u5f53\u5b57\u6bb5\u503c\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32 $grid->email->prepend('mailto:'); // \u5f53\u5b57\u6bb5\u503c\u662f\u4e00\u4e2a\u6570\u7ec4 $grid->arr->prepend('first item'); prepend \u65b9\u6cd5\u5141\u8bb8\u4f20\u5165\u95ed\u5305\u53c2\u6570 $grid->email->prepend(function ($value, $original) { // $value \u662f\u5f53\u524d\u5b57\u6bb5\u503c // $original \u662f\u5f53\u524d\u5b57\u6bb5\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u51fa\u6765\u7684\u539f\u59cb\u503c // \u83b7\u53d6\u5176\u4ed6\u5b57\u6bb5\u503c $username = $this->username; return \"[{$username}]\"; });","title":"prepend"},{"location":"2.x/model-grid-column-display/#append","text":"append \u65b9\u6cd5\u7528\u4e8e\u7ed9 string \u6216 array \u7c7b\u578b\u7684\u503c\u540e\u9762\u63d2\u5165\u5185\u5bb9\u3002 // \u5f53\u5b57\u6bb5\u503c\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32 $grid->email->append('@gmail.com'); // \u5f53\u5b57\u6bb5\u503c\u662f\u4e00\u4e2a\u6570\u7ec4 $grid->arr->append('last item'); append \u65b9\u6cd5\u5141\u8bb8\u4f20\u5165\u95ed\u5305\u53c2\u6570 $grid->email->append(function ($value, $original) { // $value \u662f\u5f53\u524d\u5b57\u6bb5\u503c // $original \u662f\u5f53\u524d\u5b57\u6bb5\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u51fa\u6765\u7684\u539f\u59cb\u503c // \u83b7\u53d6\u5176\u4ed6\u5b57\u6bb5\u503c $username = $this->username; return \"[{$username}]\"; });","title":"append"},{"location":"2.x/model-grid-column-display/#limit","text":"// \u6700\u591a\u663e\u793a50\u4e2a\u5b57\u7b26 $grid->column('content')->limit(50, '...'); // \u5982\u679c\u5b57\u6bb5\u503c\u662f\u6570\u7ec4\u4e5f\u652f\u6301 $grid->tags->limit(3);","title":"\u5b57\u7b26\u4e32\u6216\u6570\u7ec4\u622a\u53d6 (limit)"},{"location":"2.x/model-grid-column-display/#qrcode","text":"$grid->website->qrcode(function () { return $this->url; }, 200, 200);","title":"\u5217\u4e8c\u7ef4\u7801 (qrcode)"},{"location":"2.x/model-grid-column-display/#copyable","text":"$grid->website->copyable();","title":"\u53ef\u590d\u5236 (copyable)"},{"location":"2.x/model-grid-column-display/#orderable","text":"\u901a\u8fc7 Column::orderable \u53ef\u4ee5\u5f00\u542f\u5b57\u6bb5\u53ef\u6392\u5e8f\u529f\u80fd\uff0c\u6b64\u529f\u80fd\u9700\u8981\u5728\u4f60\u7684\u6a21\u578b\u7c7b\u4e2d use ModelTree \u6216 use SortableTrait \uff0c\u5e76\u4e14\u9700\u8981\u7ee7\u627f Spatie\\EloquentSortable\\Sortable \u63a5\u53e3\u3002","title":"\u53ef\u6392\u5e8f (orderable)"},{"location":"2.x/model-grid-column-display/#sortabletrait","text":"\u5982\u679c\u4f60\u7684\u6570\u636e\u4e0d\u662f\u5c42\u7ea7\u7ed3\u6784\u6570\u636e\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 use SortableTrait \uff0c\u66f4\u591a\u7528\u6cd5\u53ef\u53c2\u8003 eloquent-sortable \u3002 \u6a21\u578b <?php namespace App\\Models; use Illuminate\\Database\\Eloquent\\Model; use Spatie\\EloquentSortable\\Sortable; use Spatie\\EloquentSortable\\SortableTrait; class MyModel extends Model implements Sortable { use SortableTrait; protected $sortable = [ // \u8bbe\u7f6e\u6392\u5e8f\u5b57\u6bb5\u540d\u79f0 'order_column_name' => 'order', // \u662f\u5426\u5728\u521b\u5efa\u65f6\u81ea\u52a8\u6392\u5e8f\uff0c\u6b64\u53c2\u6570\u5efa\u8bae\u8bbe\u7f6e\u4e3atrue 'sort_when_creating' => true, ]; } \u4f7f\u7528 $grid->model()->orderBy('order'); $grid->order->orderable();","title":"SortableTrait"},{"location":"2.x/model-grid-column-display/#modeltree","text":"\u5982\u679c\u4f60\u7684\u6570\u636e\u662f\u5c42\u7ea7\u7ed3\u6784\u6570\u636e\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 use Model \uff0c\u4e0b\u9762\u4ee5\u6743\u9650\u6a21\u578b\u4e3a\u4f8b\u6765\u6f14\u793a\u7528\u6cd5 {tip} ModelTree \u5b9e\u9645\u4e0a\u4e5f\u662f\u7ee7\u627f\u4e86 eloquent-sortable \u7684\u529f\u80fd\u3002 <?php namespace Dcat\\Admin\\Models; use Dcat\\Admin\\Traits\\HasDateTimeFormatter; use Dcat\\Admin\\Traits\\ModelTree; use Spatie\\EloquentSortable\\Sortable; class Permission extends Model implements Sortable { use HasDateTimeFormatter, ModelTree { ModelTree::boot as treeBoot; } ... } \u4f7f\u7528 $grid->order->orderable();","title":"ModelTree"},{"location":"2.x/model-grid-column-display/#link","text":"\u5c06\u5b57\u6bb5\u663e\u793a\u4e3a\u4e00\u4e2a\u94fe\u63a5\u3002 // link\u65b9\u6cd5\u4e0d\u4f20\u53c2\u6570\u65f6\uff0c\u94fe\u63a5\u7684`href`\u548c`text`\u90fd\u662f\u5f53\u524d\u5217\u7684\u503c $grid->column('homepage')->link(); // \u4f20\u5165\u95ed\u5305 $grid->column('homepage')->link(function ($value) { return admin_url('users/'.$value); });","title":"\u94fe\u63a5 (link)"},{"location":"2.x/model-grid-column-display/#action","text":"{tip} \u5728\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\u4e4b\u524d\uff0c\u8bf7\u5148\u9605\u8bfb \u81ea\u5b9a\u4e49\u64cd\u4f5c-\u884c\u64cd\u4f5c \u8fd9\u4e2a\u529f\u80fd\u53ef\u4ee5\u5c06\u67d0\u4e00\u5217\u663e\u793a\u4e3a\u4e00\u4e2a \u884c\u64cd\u4f5c \u7684\u6309\u94ae\uff0c\u6bd4\u5982\u4e0b\u9762\u6240\u793a\u662f\u4e00\u4e2a\u6807\u661f\u548c\u53d6\u6d88\u6807\u661f\u7684\u5217\u64cd\u4f5c\uff0c \u70b9\u51fb\u8fd9\u4e00\u5217\u7684\u661f\u6807\u56fe\u6807\u4e4b\u540e, \u540e\u53f0\u4f1a\u5207\u6362\u5b57\u6bb5\u7684\u72b6\u6001\uff0c\u9875\u9762\u56fe\u6807\u4e5f\u8ddf\u7740\u5207\u6362\uff0c\u5177\u4f53\u5b9e\u73b0\u4ee3\u7801\u5982\u4e0b\uff1a <?php namespace App\\Admin\\Extensions\\Grid\\RowAction; use Dcat\\Admin\\Grid\\RowAction; use Illuminate\\Http\\Request; class Star extends RowAction { protected function html() { $icon = ($this->row->{$this->getColumnName()}) ? 'fa-star' : 'fa-star-o'; return <<<HTML <i class=\"{$this->getElementClass()} fa {$icon}\"></i> HTML; } public function handle(Request $request) { try { $class = $request->class; $column = $request->column; $id = $this->getKey(); $model = $class::find($id); $model->{$column} = (int) !$model->{$column}; $model->save(); return $this->response()->success(\"success\")->refresh(); } catch (\\Exception $e) { return $this->response()->error($e->getMessage()); } } public function parameters() { return [ 'class' => $this->modelClass(), 'column' => $this->getColumnName(), ]; } public function getColumnName() { return $this->column->getName(); } public function modelClass() { return get_class($this->parent->model()->repository()->model()); } } \u4f7f\u7528 protected function grid() { $grid = new Grid(new $this->model()); $grid->column('star', '-')->action(Star::class); // here $grid->column('id', 'ID')->sortable()->bold(); return $grid; } \u6548\u679c","title":"\u884c\u64cd\u4f5c (action)"},{"location":"2.x/model-grid-column-display/#_11","text":"","title":"\u5e2e\u52a9\u65b9\u6cd5"},{"location":"2.x/model-grid-column-display/#_12","text":"\u5982\u679c\u5f53\u524d\u91cc\u7684\u8f93\u51fa\u6570\u636e\u4e3a\u5b57\u7b26\u4e32\uff0c\u90a3\u4e48\u53ef\u4ee5\u901a\u8fc7\u94fe\u5f0f\u65b9\u6cd5\u8c03\u7528 Illuminate\\Support\\Str \u7684\u65b9\u6cd5\u3002 \u6bd4\u5982\u6709\u5982\u4e0b\u4e00\u5217\uff0c\u663e\u793a title \u5b57\u6bb5\u7684\u5b57\u7b26\u4e32\u503c: $grid->title(); \u5728 title \u5217\u8f93\u51fa\u7684\u5b57\u7b26\u4e32\u57fa\u7840\u4e0a\u8c03\u7528 Str::title() \u65b9\u6cd5 $grid->title()->title(); \u8c03\u7528\u65b9\u6cd5\u4e4b\u540e\u8f93\u51fa\u7684\u8fd8\u662f\u5b57\u7b26\u4e32\uff0c\u6240\u4ee5\u53ef\u4ee5\u7ee7\u7eed\u8c03\u7528 Illuminate\\Support\\Str \u7684\u65b9\u6cd5\uff1a $grid->title()->title()->ucfirst(); $grid->title()->title()->ucfirst()->substr(1, 10);","title":"\u5b57\u7b26\u4e32\u64cd\u4f5c"},{"location":"2.x/model-grid-column-display/#_13","text":"\u5982\u679c\u5f53\u524d\u5217\u8f93\u51fa\u7684\u662f\u6570\u7ec4\uff0c\u53ef\u4ee5\u76f4\u63a5\u94fe\u5f0f\u8c03\u7528 Illuminate\\Support\\Collection \u65b9\u6cd5\u3002 \u6bd4\u5982 tags \u5217\u662f\u4ece\u4e00\u5bf9\u591a\u5173\u7cfb\u53d6\u51fa\u6765\u7684\u6570\u7ec4\u6570\u636e\uff1a $grid->tags(); array ( 0 => array ( 'id' => '16', 'name' => 'php', 'created_at' => '2016-11-13 14:03:03', 'updated_at' => '2016-12-25 04:29:35', ), 1 => array ( 'id' => '17', 'name' => 'python', 'created_at' => '2016-11-13 14:03:09', 'updated_at' => '2016-12-25 04:30:27', ), ) \u8c03\u7528 Collection::pluck() \u65b9\u6cd5\u53d6\u51fa\u6570\u7ec4\u7684\u4e2d\u7684 name \u5217 $grid->tags()->pluck('name'); array ( 0 => 'php', 1 => 'python', ), \u53d6\u51fa name \u5217\u4e4b\u540e\u8f93\u51fa\u7684\u8fd8\u662f\u6570\u7ec4\uff0c\u8fd8\u80fd\u7ee7\u7eed\u8c03\u7528\u7528 Illuminate\\Support\\Collection \u7684\u65b9\u6cd5 $grid->tags()->pluck('name')->map('ucwords'); array ( 0 => 'Php', 1 => 'Python', ), \u5c06\u6570\u7ec4\u8f93\u51fa\u4e3a\u5b57\u7b26\u4e32 $grid->tags()->pluck('name')->map('ucwords')->implode('-'); \"Php-Python\"","title":"\u6570\u7ec4\u64cd\u4f5c"},{"location":"2.x/model-grid-column-display/#_14","text":"\u5728\u4e0a\u9762\u4e24\u79cd\u7c7b\u578b\u7684\u65b9\u6cd5\u8c03\u7528\u4e2d\uff0c\u53ea\u8981\u4e0a\u4e00\u6b65\u8f93\u51fa\u7684\u662f\u786e\u5b9a\u7c7b\u578b\u7684\u503c\uff0c\u4fbf\u53ef\u4ee5\u8c03\u7528\u7c7b\u578b\u5bf9\u5e94\u7684\u65b9\u6cd5\uff0c\u6240\u4ee5\u53ef\u4ee5\u5f88\u7075\u6d3b\u7684\u6df7\u5408\u4f7f\u7528\u3002 \u6bd4\u5982 images \u5b57\u6bb5\u662f\u5b58\u50a8\u591a\u56fe\u7247\u5730\u5740\u6570\u7ec4\u7684JSON\u683c\u5f0f\u5b57\u7b26\u4e32\u7c7b\u578b\uff1a $grid->images(); // \"['foo.jpg', 'bar.png']\" // \u94fe\u5f0f\u65b9\u6cd5\u8c03\u7528\u6765\u663e\u793a\u591a\u56fe $grid->images()->display(function ($images) { return json_decode($images, true); })->map(function ($path) { return 'http://localhost/images/'. $path; })->image();","title":"\u6df7\u5408\u4f7f\u7528"},{"location":"2.x/model-grid-column-display/#_15","text":"\u53ef\u4ee5\u901a\u8fc7\u4e24\u79cd\u65b9\u5f0f\u6269\u5c55\u5217\u529f\u80fd\uff0c\u7b2c\u4e00\u79cd\u662f\u901a\u8fc7\u533f\u540d\u51fd\u6570\u7684\u65b9\u5f0f\u3002 \u6269\u5c55\u5217\u529f\u80fd\u65b9\u6cd5\u540eIDE\u9ed8\u8ba4\u662f\u4e0d\u4f1a\u81ea\u52a8\u8865\u5168\u7684\uff0c\u8fd9\u65f6\u5019\u53ef\u4ee5\u901a\u8fc7 php artisan admin:ide-helper \u751f\u6210IDE\u63d0\u793a\u6587\u4ef6\u3002","title":"\u6269\u5c55\u5217\u7684\u663e\u793a\u529f\u80fd"},{"location":"2.x/model-grid-column-display/#_16","text":"\u5728 app/Admin/bootstrap.php \u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801: use Dcat\\Admin\\Grid\\Column; // \u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u81ea\u5b9a\u4e49\u53c2\u6570 Column::extend('color', function ($value, $color) { return \"<span style='color: $color'>$value</span>\"; }); \u7136\u540e\u5728 model-grid \u4e2d\u4f7f\u7528\u8fd9\u4e2a\u6269\u5c55\uff1a $grid->title()->color('#ccc');","title":"\u533f\u540d\u51fd\u6570"},{"location":"2.x/model-grid-column-display/#_17","text":"\u5982\u679c\u5217\u663e\u793a\u903b\u8f91\u6bd4\u8f83\u590d\u6742\uff0c\u53ef\u4ee5\u901a\u8fc7\u6269\u5c55\u7c7b\u6765\u5b9e\u73b0\u3002 \u6269\u5c55\u7c7b app/Admin/Extensions/Popover.php : <?php namespace App\\Admin\\Extensions; use Dcat\\Admin\\Admin; use Dcat\\Admin\\Grid\\Displayers\\AbstractDisplayer; class Popover extends AbstractDisplayer { public function display($placement = 'left') { Admin::script(\"$('[data-toggle=\\\"popover\\\"]').popover()\"); return <<<EOT <button type=\"button\" class=\"btn btn-secondary\" title=\"popover\" data-container=\"body\" data-toggle=\"popover\" data-placement=\"$placement\" data-content=\"{$this->value}\" > \u5f39\u51fa\u63d0\u793a </button> EOT; } } \u7136\u540e\u5728 app/Admin/bootstrap.php \u6ce8\u518c\u6269\u5c55\u7c7b\uff1a use Dcat\\Admin\\Grid\\Column; use App\\Admin\\Extensions\\Popover; Column::extend('popover', Popover::class); \u7136\u540e\u5c31\u80fd\u5728 model-grid \u4e2d\u4f7f\u7528\u4e86\uff1a $grid->desciption()->popover('right');","title":"\u6269\u5c55\u7c7b"},{"location":"2.x/model-grid-column-display/#_18","text":"\u51fa\u4e86\u4e0a\u8ff0\u4e24\u79cd\u65b9\u5f0f\u6269\u5c55\u5217\u529f\u80fd\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7\u6307\u5b9a\u5217\u540d\u79f0\u7684\u65b9\u5f0f\u6269\u5c55\u5217\u529f\u80fd \u5728 app/Admin/bootstrap.php \u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801: use Dcat\\Admin\\Grid\\Column; // \u8fd9\u4e2a\u6269\u5c55\u65b9\u6cd5\u7b49\u540c\u4e8e // $grid->title()->display(function ($value) { // return \"<span style='color:red'>$value</span>\" // }); Column::define('title', function ($value) { return \"<span style='color:red'>$value</span>\" }); // \u8fd9\u4e2a\u6269\u5c55\u65b9\u6cd5\u7b49\u540c\u4e8e // $grid->status()->switch(); Column::define('status', Dcat\\Admin\\Grid\\Displayers\\SwitchDisplay::class); \u7136\u540e\u5728 model-grid \u4e2d title \u548c status \u5b57\u6bb5\u4f1a\u81ea\u52a8\u4f7f\u7528\u4ee5\u4e0a\u6269\u5c55\uff1a $grid->title(); $grid->status();","title":"\u6307\u5b9a\u5217\u540d"},{"location":"2.x/model-grid-column-filter/","text":"\u5217\u8fc7\u6ee4\u5668 \u8fd9\u4e2a\u529f\u80fd\u53ef\u4ee5\u7ed9\u8868\u683c\u7684\u5217\u8bbe\u7f6e\u4e00\u4e2a\u8fc7\u6ee4\u5668\uff0c\u53ef\u4ee5\u66f4\u65b9\u4fbf\u7684\u6839\u636e\u8fd9\u4e00\u5217\u8fdb\u884c\u6570\u636e\u8868\u683c\u8fc7\u6ee4\u64cd\u4f5c \u5b57\u7b26\u4e32\u6bd4\u8f83\u67e5\u8be2 use Dcat\\Admin\\Grid; // WHERE `username` = \"$input\" $grid->username->filter( Grid\\Column\\Filter\\Equal::make() ); \u4e0a\u9762\u7684\u8c03\u7528\u53ef\u4ee5\u7ed9 username \u8fd9\u4e00\u5217\u7684\u5934\u90e8\u52a0\u4e0a\u4e00\u4e2a input \u7c7b\u578b\u7684\u8fc7\u6ee4\u5668\uff0c\u70b9\u51fb\u8fc7\u6ee4\u5668\u56fe\u6807\u5c55\u5f00\u8fc7\u6ee4\u5668\uff0c\u8f93\u5165\u67e5\u8be2\u63d0\u4ea4\u540e\uff0c\u4f1a\u5bf9\u8fd9\u4e00\u5217\u6267\u884c \u7b49\u4e8e \u67e5\u8be2\u3002 \u5f00\u542f\u5b57\u6bb5\u503c\u67e5\u8be2 \u8fd9\u4e2a\u529f\u80fd\u53ef\u4ee5\u7ed9\u6bcf\u4e00\u5217\u5b57\u6bb5\u7684\u503c\u8bbe\u7f6e\u4e00\u4e2a\u8fc7\u6ee4\u5668\uff0c\u70b9\u51fb\u8be5\u5217\u5b57\u6bb5\u7684\u503c\u5c31\u53ef\u4ee5\u8fdb\u884c\u6570\u636e\u8868\u683c\u8fc7\u6ee4\u64cd\u4f5c\uff0c\u975e\u5e38\u65b9\u4fbf\u3002 {tip} \u5f00\u542f\u6b64\u529f\u80fd\u4e4b\u540e\u4f1a\u628a\u8fd9\u4e2a\u5b57\u6bb5\u7684\u539f\u59cb\u503c\u4f5c\u4e3a\u641c\u7d22\u5185\u5bb9\uff0c\u4e0d\u4f1a\u53d7 display \u65b9\u6cd5\u5f71\u54cd\u3002 use Dcat\\Admin\\Grid; // \u8bbe\u7f6e\u4e3a label \u6216\u8c03\u7528 display \u65b9\u6cd5\u4e0d\u4f1a\u5f71\u54cd\u67e5\u8be2\u5185\u5bb9 $grid->ip->label()->filter(); // \u76f8\u5f53\u4e8e $grid->ip->filter( Grid\\Column\\Filter\\Equal::make()->valueFilter() ); \u9f20\u6807\u79fb\u52a8\u5230\u5f00\u542f\u4e86\u503c\u67e5\u8be2\u529f\u80fd\u7684\u5217\u4e0a\u9762\uff0c\u53f3\u8fb9\u4f1a\u663e\u793a\u4e00\u4e2a\u201c\u653e\u5927\u955c\u201d\u56fe\u6807 \u70b9\u51fb\u5217\u4e4b\u540e\uff0c\u8868\u5934\u4f1a\u51fa\u73b0\u201c\u91cd\u7f6e\u201d\u6309\u94ae\uff0c\u70b9\u51fb\u53ef\u4ee5\u53d6\u6d88\u7b5b\u9009 \u8bbe\u7f6e\u503c\u7684\u5b57\u6bb5\u540d\u79f0 \u5982\u679c\u5f53\u524d\u5217\u7684\u503c\u5e76\u975e\u7528\u6237\u60f3\u8981\u641c\u7d22\u7684\u503c\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u6cd5\u66f4\u6539\u5b57\u6bb5\u540d\u79f0\u3002 $grid->model()->with('user'); // \u5b9e\u9645\u641c\u7d22\u7684\u4f1a\u662f name \u5b57\u6bb5\u7684\u503c $grid->username->filter('name'); // \u4e8c\u7ef4\u6570\u7ec4 $grid->user_id->filter('user.id'); // \u95ed\u5305 $grid->user_id->filter(function () { return $this->user['id']; }); \u9690\u85cf\u8868\u5934\u7684\u7b5b\u9009\u5668\u56fe\u6807 use Dcat\\Admin\\Grid; $grid->user_id->filterByValue(); // \u76f8\u5f53\u4e8e $grid->user_id->filter( Grid\\Column\\Filter\\Equal::make() ->valueFilter() ->hide() ); \u6548\u679c\u5982\u4e0b \u5176\u4f59Input\u8868\u5355\u7c7b\u578b\u8fc7\u6ee4\u5668 use Dcat\\Admin\\Grid; // WHERE `username` LIKE \"%{$input}%\" $grid->username->filter( Grid\\Column\\Filter\\Like::make() ); // WHERE `username` LIKE \"{$input}%\" $grid->username->filter( Grid\\Column\\Filter\\StartWith::make() ); // WHERE `username` > \"$input\" $grid->username->filter( Grid\\Column\\Filter\\Gt::make() ); // WHERE `username` <= \"$input\" $grid->username->filter( Grid\\Column\\Filter\\Ngt::make() ); // WHERE `username` < \"$input\" $grid->username->filter( Grid\\Column\\Filter\\Lt::make() ); // WHERE `username` >= \"$input\" $grid->username->filter( Grid\\Column\\Filter\\Nlt::make() ); \u65f6\u95f4\u65e5\u671f \u5982\u679c\u5b57\u6bb5\u662f\u65f6\u95f4\u3001\u65e5\u671f\u76f8\u5173\u7684\u5b57\u6bb5\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u65b9\u6cd5 use Dcat\\Admin\\Grid; $grid->date()->filter( Grid\\Column\\Filter\\Equal::make()->date() ); $grid->time()->filter( Grid\\Column\\Filter\\Like::make()->time() ); $grid->datetime()->filter( Grid\\Column\\Filter\\Gt::make()->datetime('YYYY-MM-DD HH:mm:ss') ); \u591a\u9009\u67e5\u8be2 \u5047\u8bbe\u9700\u8981\u5728\u8868\u683c\u6570\u636e\u4e2d\u901a\u8fc7 status \u5b57\u6bb5\u8fc7\u6ee4\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u72b6\u6001\u7684\u6570\u636e\uff0c\u4f7f\u7528\u591a\u9009\u8fc7\u6ee4\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u7684\u5b9e\u73b0 use Dcat\\Admin\\Grid; $grid->column('status', '\u72b6\u6001')->filter( Grid\\Column\\Filter\\In::make([ 0 => '\u672a\u77e5', 1 => '\u5df2\u4e0b\u5355', 2 => '\u5df2\u4ed8\u6b3e', 3 => '\u5df2\u53d6\u6d88', ]) ); \u8303\u56f4\u67e5\u8be2 \u5047\u8bbe\u9700\u8981\u901a\u8fc7 price \u5b57\u6bb5\u8fc7\u6ee4\u51fa\u67d0\u4e2a\u4ef7\u683c\u8303\u56f4\u5185\u7684\u6570\u636e $grid->column('price')->filter( Grid\\Column\\Filter\\Between::make() ); \u6216\u8005\u662f\u65f6\u95f4\u3001\u65e5\u671f\u8303\u56f4\u7684\u8fc7\u6ee4 use Dcat\\Admin\\Grid; $grid->date()->filter( Grid\\Column\\Filter\\Between::make()->date() ); $grid->time()->filter( Grid\\Column\\Filter\\Between::make()->time() ); $grid->datetime()->filter( Grid\\Column\\Filter\\Between::make()->datetime() ); \u6307\u5b9a\u67e5\u8be2\u5b57\u6bb5\u540d \u901a\u8fc7 setColumnName \u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u67e5\u8be2\u5b57\u6bb5\u7684\u540d\u79f0 $grid->column('column')->filter( Grid\\Column\\Filter\\Equal::make()->setColumnName('custom_column') ); \u67e5\u8be2json\u5b57\u6bb5 $grid->column('column')->filter( Grid\\Column\\Filter\\Equal::make()->setColumnName('json_column->label') ); \u5173\u8054\u5173\u7cfb\u5b57\u6bb5\u67e5\u8be2 \u5982\u679c\u5b89\u88c5\u4e86 dcat/laravel-wherehasin \uff0c\u5219\u4f1a\u4f18\u5148\u4f7f\u7528 whereHasIn \u65b9\u6cd5\u8fdb\u884c\u67e5\u8be2\u64cd\u4f5c $grid->column('user.name')->filter( Grid\\Column\\Filter\\Equal::make() ); $grid->column('user_name')->filter( Grid\\Column\\Filter\\Equal::make()->setColumnName('user.name') );","title":"\u5217\u8fc7\u6ee4\u5668"},{"location":"2.x/model-grid-column-filter/#_1","text":"\u8fd9\u4e2a\u529f\u80fd\u53ef\u4ee5\u7ed9\u8868\u683c\u7684\u5217\u8bbe\u7f6e\u4e00\u4e2a\u8fc7\u6ee4\u5668\uff0c\u53ef\u4ee5\u66f4\u65b9\u4fbf\u7684\u6839\u636e\u8fd9\u4e00\u5217\u8fdb\u884c\u6570\u636e\u8868\u683c\u8fc7\u6ee4\u64cd\u4f5c","title":"\u5217\u8fc7\u6ee4\u5668"},{"location":"2.x/model-grid-column-filter/#_2","text":"use Dcat\\Admin\\Grid; // WHERE `username` = \"$input\" $grid->username->filter( Grid\\Column\\Filter\\Equal::make() ); \u4e0a\u9762\u7684\u8c03\u7528\u53ef\u4ee5\u7ed9 username \u8fd9\u4e00\u5217\u7684\u5934\u90e8\u52a0\u4e0a\u4e00\u4e2a input \u7c7b\u578b\u7684\u8fc7\u6ee4\u5668\uff0c\u70b9\u51fb\u8fc7\u6ee4\u5668\u56fe\u6807\u5c55\u5f00\u8fc7\u6ee4\u5668\uff0c\u8f93\u5165\u67e5\u8be2\u63d0\u4ea4\u540e\uff0c\u4f1a\u5bf9\u8fd9\u4e00\u5217\u6267\u884c \u7b49\u4e8e \u67e5\u8be2\u3002","title":"\u5b57\u7b26\u4e32\u6bd4\u8f83\u67e5\u8be2"},{"location":"2.x/model-grid-column-filter/#_3","text":"\u8fd9\u4e2a\u529f\u80fd\u53ef\u4ee5\u7ed9\u6bcf\u4e00\u5217\u5b57\u6bb5\u7684\u503c\u8bbe\u7f6e\u4e00\u4e2a\u8fc7\u6ee4\u5668\uff0c\u70b9\u51fb\u8be5\u5217\u5b57\u6bb5\u7684\u503c\u5c31\u53ef\u4ee5\u8fdb\u884c\u6570\u636e\u8868\u683c\u8fc7\u6ee4\u64cd\u4f5c\uff0c\u975e\u5e38\u65b9\u4fbf\u3002 {tip} \u5f00\u542f\u6b64\u529f\u80fd\u4e4b\u540e\u4f1a\u628a\u8fd9\u4e2a\u5b57\u6bb5\u7684\u539f\u59cb\u503c\u4f5c\u4e3a\u641c\u7d22\u5185\u5bb9\uff0c\u4e0d\u4f1a\u53d7 display \u65b9\u6cd5\u5f71\u54cd\u3002 use Dcat\\Admin\\Grid; // \u8bbe\u7f6e\u4e3a label \u6216\u8c03\u7528 display \u65b9\u6cd5\u4e0d\u4f1a\u5f71\u54cd\u67e5\u8be2\u5185\u5bb9 $grid->ip->label()->filter(); // \u76f8\u5f53\u4e8e $grid->ip->filter( Grid\\Column\\Filter\\Equal::make()->valueFilter() ); \u9f20\u6807\u79fb\u52a8\u5230\u5f00\u542f\u4e86\u503c\u67e5\u8be2\u529f\u80fd\u7684\u5217\u4e0a\u9762\uff0c\u53f3\u8fb9\u4f1a\u663e\u793a\u4e00\u4e2a\u201c\u653e\u5927\u955c\u201d\u56fe\u6807 \u70b9\u51fb\u5217\u4e4b\u540e\uff0c\u8868\u5934\u4f1a\u51fa\u73b0\u201c\u91cd\u7f6e\u201d\u6309\u94ae\uff0c\u70b9\u51fb\u53ef\u4ee5\u53d6\u6d88\u7b5b\u9009","title":"\u5f00\u542f\u5b57\u6bb5\u503c\u67e5\u8be2"},{"location":"2.x/model-grid-column-filter/#_4","text":"\u5982\u679c\u5f53\u524d\u5217\u7684\u503c\u5e76\u975e\u7528\u6237\u60f3\u8981\u641c\u7d22\u7684\u503c\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u6cd5\u66f4\u6539\u5b57\u6bb5\u540d\u79f0\u3002 $grid->model()->with('user'); // \u5b9e\u9645\u641c\u7d22\u7684\u4f1a\u662f name \u5b57\u6bb5\u7684\u503c $grid->username->filter('name'); // \u4e8c\u7ef4\u6570\u7ec4 $grid->user_id->filter('user.id'); // \u95ed\u5305 $grid->user_id->filter(function () { return $this->user['id']; });","title":"\u8bbe\u7f6e\u503c\u7684\u5b57\u6bb5\u540d\u79f0"},{"location":"2.x/model-grid-column-filter/#_5","text":"use Dcat\\Admin\\Grid; $grid->user_id->filterByValue(); // \u76f8\u5f53\u4e8e $grid->user_id->filter( Grid\\Column\\Filter\\Equal::make() ->valueFilter() ->hide() ); \u6548\u679c\u5982\u4e0b","title":"\u9690\u85cf\u8868\u5934\u7684\u7b5b\u9009\u5668\u56fe\u6807"},{"location":"2.x/model-grid-column-filter/#input","text":"use Dcat\\Admin\\Grid; // WHERE `username` LIKE \"%{$input}%\" $grid->username->filter( Grid\\Column\\Filter\\Like::make() ); // WHERE `username` LIKE \"{$input}%\" $grid->username->filter( Grid\\Column\\Filter\\StartWith::make() ); // WHERE `username` > \"$input\" $grid->username->filter( Grid\\Column\\Filter\\Gt::make() ); // WHERE `username` <= \"$input\" $grid->username->filter( Grid\\Column\\Filter\\Ngt::make() ); // WHERE `username` < \"$input\" $grid->username->filter( Grid\\Column\\Filter\\Lt::make() ); // WHERE `username` >= \"$input\" $grid->username->filter( Grid\\Column\\Filter\\Nlt::make() );","title":"\u5176\u4f59Input\u8868\u5355\u7c7b\u578b\u8fc7\u6ee4\u5668"},{"location":"2.x/model-grid-column-filter/#_6","text":"\u5982\u679c\u5b57\u6bb5\u662f\u65f6\u95f4\u3001\u65e5\u671f\u76f8\u5173\u7684\u5b57\u6bb5\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u65b9\u6cd5 use Dcat\\Admin\\Grid; $grid->date()->filter( Grid\\Column\\Filter\\Equal::make()->date() ); $grid->time()->filter( Grid\\Column\\Filter\\Like::make()->time() ); $grid->datetime()->filter( Grid\\Column\\Filter\\Gt::make()->datetime('YYYY-MM-DD HH:mm:ss') );","title":"\u65f6\u95f4\u65e5\u671f"},{"location":"2.x/model-grid-column-filter/#_7","text":"\u5047\u8bbe\u9700\u8981\u5728\u8868\u683c\u6570\u636e\u4e2d\u901a\u8fc7 status \u5b57\u6bb5\u8fc7\u6ee4\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u72b6\u6001\u7684\u6570\u636e\uff0c\u4f7f\u7528\u591a\u9009\u8fc7\u6ee4\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u7684\u5b9e\u73b0 use Dcat\\Admin\\Grid; $grid->column('status', '\u72b6\u6001')->filter( Grid\\Column\\Filter\\In::make([ 0 => '\u672a\u77e5', 1 => '\u5df2\u4e0b\u5355', 2 => '\u5df2\u4ed8\u6b3e', 3 => '\u5df2\u53d6\u6d88', ]) );","title":"\u591a\u9009\u67e5\u8be2"},{"location":"2.x/model-grid-column-filter/#_8","text":"\u5047\u8bbe\u9700\u8981\u901a\u8fc7 price \u5b57\u6bb5\u8fc7\u6ee4\u51fa\u67d0\u4e2a\u4ef7\u683c\u8303\u56f4\u5185\u7684\u6570\u636e $grid->column('price')->filter( Grid\\Column\\Filter\\Between::make() ); \u6216\u8005\u662f\u65f6\u95f4\u3001\u65e5\u671f\u8303\u56f4\u7684\u8fc7\u6ee4 use Dcat\\Admin\\Grid; $grid->date()->filter( Grid\\Column\\Filter\\Between::make()->date() ); $grid->time()->filter( Grid\\Column\\Filter\\Between::make()->time() ); $grid->datetime()->filter( Grid\\Column\\Filter\\Between::make()->datetime() );","title":"\u8303\u56f4\u67e5\u8be2"},{"location":"2.x/model-grid-column-filter/#_9","text":"\u901a\u8fc7 setColumnName \u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u67e5\u8be2\u5b57\u6bb5\u7684\u540d\u79f0 $grid->column('column')->filter( Grid\\Column\\Filter\\Equal::make()->setColumnName('custom_column') );","title":"\u6307\u5b9a\u67e5\u8be2\u5b57\u6bb5\u540d"},{"location":"2.x/model-grid-column-filter/#json","text":"$grid->column('column')->filter( Grid\\Column\\Filter\\Equal::make()->setColumnName('json_column->label') );","title":"\u67e5\u8be2json\u5b57\u6bb5"},{"location":"2.x/model-grid-column-filter/#_10","text":"\u5982\u679c\u5b89\u88c5\u4e86 dcat/laravel-wherehasin \uff0c\u5219\u4f1a\u4f18\u5148\u4f7f\u7528 whereHasIn \u65b9\u6cd5\u8fdb\u884c\u67e5\u8be2\u64cd\u4f5c $grid->column('user.name')->filter( Grid\\Column\\Filter\\Equal::make() ); $grid->column('user_name')->filter( Grid\\Column\\Filter\\Equal::make()->setColumnName('user.name') );","title":"\u5173\u8054\u5173\u7cfb\u5b57\u6bb5\u67e5\u8be2"},{"location":"2.x/model-grid-column/","text":"\u5217\u7684\u57fa\u672c\u4f7f\u7528 \u8bbe\u7f6e\u5217\u4e3a\u53ef\u6392\u5e8f (sortable) $grid->column('id')->sortable(); \u8868\u683c\u5b57\u6bb5\u652f\u6301\u5173\u8054\u5173\u7cfb\u8868\u5b57\u6bb5\u4ee5\u53ca json \u5b57\u6bb5\u7684\u6392\u5e8f \u6ce8\u610f\uff0c\u5173\u8054\u5173\u7cfb\u4ec5\u652f\u6301 hasOne \u4ee5\u53ca belongsTo \u4e24\u79cd\u7c7b\u578b\u7684\u5b57\u6bb5\u6392\u5e8f\uff0c\u5e76\u4e14\u4e0d\u652f\u6301\u591a\u5c42\u7ea7\u5d4c\u5957\uff01 // \u5173\u8054\u5173\u7cfb\u8868\u5b57\u6bb5\u6392\u5e8f $grid->column('profile.age')->sortable(); // \u6307\u5b9a\u9700\u8981\u6392\u5e8f\u7684\u5b57\u6bb5\u540d\u79f0 $grid->column('my_age')->sortable('profile.age'); // json\u5b57\u6bb5\u6392\u5e8f $grid->column('options.price')->sortable('options->price'); // \u5173\u8054\u5173\u7cfb\u8868\u7684 json \u5b57\u6bb5\u6392\u5e8f $grid->column('profile.options.price')->sortable('profile.options->price'); \u652f\u6301 MySql \u7684 order by cast(`{field}` as {type}) \u7528\u6cd5 $grid->column('profile.age')->sortable(null, 'SIGNED'); $grid->column('profile.options.price')->sortable('profile.options->price', 'SIGNED'); \u8bbe\u7f6e\u9ed8\u8ba4\u6392\u5e8f $grid->model()->orderBy('id', 'desc'); \u8fd9\u4e2a\u529f\u80fd\u4e5f\u652f\u6301\u5173\u8054\u5173\u7cfb\u8868\u5b57\u6bb5\u6392\u5e8f\uff0c\u6ce8\u610f\u8fd9\u91cc\u4ec5\u652f\u6301 \u4e00\u5bf9\u4e00 \u4ee5\u53ca \u4e00\u5bf9\u591a \u5173\u8054\u5173\u7cfb $grid->model()->orderBy('profile.age'); \u8bbe\u7f6e\u5217\u7684\u5bbd\u5ea6 (width) \u8bbe\u7f6e\u5217\u7684\u5bbd\u5ea6\uff0c\u5f53\u5b57\u6bb5\u5185\u5bb9\u8fc7\u957f\u65f6\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\u9650\u5236\u5217\u5bbd\u5ea6 // px $grid->column('long_text')->width('300px'); // \u767e\u5206\u6bd4 $grid->column('long_text')->width('15%'); \u56fa\u5b9a\u5217 (fixColumns) \u901a\u8fc7 fixColumns \u65b9\u6cd5\u53ef\u4ee5\u7ed9\u8868\u683c\u8bbe\u7f6e\u56fa\u5b9a\u5217\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u8868\u793a\u56fa\u5b9a\u4ece\u5934\u5f00\u59cb\u7684\u524d\u4e09\u5217\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793a\u56fa\u5b9a\u4ece\u540e\u5f80\u524d\u6570\u7684\u4e24\u5217\uff0c\uff08\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4e0d\u4f20\uff0c\u9ed8\u8ba4\u4e3a-1\uff09 $grid->fixColumns(2, -2); \u6548\u679c \u83b7\u53d6\u884c\u5e8f\u53f7 (index) \u5e8f\u53f7\u4ece 0 \u5f00\u59cb\u8ba1\u7b97 // \u5728 display \u56de\u8c03\u4e2d\u4f7f\u7528 $grid->column('\u5e8f\u53f7')->display(function () { return $this->_index + 1; }); // \u5728\u884c\u64cd\u4f5c action \u4e2d\u4f7f\u7528 $grid->actions(function ($actions) { $index = $this->_index; ... }); \u8bbe\u7f6etd\u6807\u7b7eHTML\u5c5e\u6027 (setAttributes) $grid->column('email')->setAttributes(['name' => '...']) \u8bbe\u7f6e\u8868\u683c\u5934HTML\u5c5e\u6027 (setHeaderAttributes) \u8bbe\u6807\u9898\u7684 html \u5c5e\u6027 // \u4fee\u6539\u989c\u8272 $grid->column('name')->setHeaderAttributes(['style' => 'color:#5b69bc']); \u8bbe\u7f6e\u5217\u9009\u62e9\u5668 (\u5b57\u6bb5\u663e\u793a\u6216\u9690\u85cf showColumnSelector) \u6b64\u529f\u80fd\u9ed8\u8ba4\u4e0d\u542f\u7528 // \u5f00\u542f\u5b57\u6bb5\u9009\u62e9\u5668\u529f\u80fd $grid->showColumnSelector(); // \u8bbe\u7f6e\u9ed8\u8ba4\u9690\u85cf\u5b57\u6bb5 $grid->hideColumns(['field1', ...]); \u5b58\u50a8\u9a71\u52a8 (\u6301\u4e45\u5316) \u5728\u914d\u7f6e\u6587\u4ef6 config/admin.php \u53ef\u4ee5\u914d\u7f6e\u5b58\u50a8\u5217\u9009\u62e9\u5668\u72b6\u6001\u7684\u65b9\u5f0f\uff0c\u652f\u6301\u7684\u5b58\u50a8\u65b9\u5f0f\u5982\u4e0b Dcat\\Admin\\Grid\\ColumnSelector\\SessionStore \u5217\u9009\u62e9\u5668\u72b6\u6001\u6570\u636e\u4fdd\u5b58\u5728 session \u4e2d\uff0c\u4ec5\u5728\u767b\u9646\u72b6\u6001\u4e2d\u6709\u6548 Dcat\\Admin\\Grid\\ColumnSelector\\CacheStore \u5217\u9009\u62e9\u5668\u72b6\u6001\u6570\u636e\u4fdd\u5b58\u5728 Laravel Cache \u7f13\u5b58\u7cfb\u7edf\u4e2d\uff0c\u6700\u957f\u53ef\u4fdd\u5b58 300 \u5929\uff0c\u5e76\u53ef\u4ee5\u901a\u8fc7 admin.grid.column_selector.store_params.driver \u53ef\u4ee5\u914d\u7f6e\u7f13\u5b58\u9a71\u52a8\uff0c\u9ed8\u8ba4\u4e3a file 'grid' => [ ... 'column_selector' => [ 'store' => Dcat\\Admin\\Grid\\ColumnSelector\\SessionStore::class, 'store_params' => [ 'driver' => 'file', ], ], ], \u8bbe\u7f6e\u5217\u63d0\u793a\u4fe1\u606f (help) Grid\\Column::help \u53c2\u6570\uff1a - $help string \u63d0\u793a\u5185\u5bb9 - $style string \u63d0\u793a\u7a97\u80cc\u666f\u989c\u8272\uff0c\u652f\u6301 green \u3001 blue \u3001 red \u3001 purple - $placement string \u63d0\u793a\u7a97\u4f4d\u7f6e\uff0c\u652f\u6301 top \u3001 left \u3001 right \u3001 bottom $grid->column('id')->help('\u63d0\u793a\u4fe1\u606f'); \u8bbe\u7f6e\u5217\u641c\u7d22 \u901a\u8fc7 Grid\\Column::filter \u65b9\u6cd5\u53ef\u4ee5\u7ed9\u5217\u8bbe\u7f6e\u4e00\u4e2a\u8fc7\u6ee4\u5668\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u6839\u636e\u8fd9\u4e00\u5217\u8fdb\u884c\u6570\u636e\u8868\u683c\u8fc7\u6ee4\u64cd\u4f5c\uff0c\u5177\u4f53\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003 \u5217\u8fc7\u6ee4\u5668 \u3002 \u6269\u5c55\u5217\u529f\u80fd \u901a\u8fc7 Grid\\Column::macro \u65b9\u6cd5\u53ef\u4ee5\u6269\u5c55\u5217\u65b9\u6cd5\u3002 \u5728 app/Admin/bootstrap.php \u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u4ee3\u7801 use Dcat\\Admin\\Grid; // $value \u662f\u5f53\u524d\u5b57\u6bb5\u7684\u503c // $p1\u3001$p2 \u662f\u81ea\u5b9a\u4e49\u53c2\u6570 Grid\\Column::macro('myHeader', function ($value, $p1, $p2 = null) { // MyHeader \u9700\u8981\u5b9e\u73b0 Illuminate\\Contracts\\Support\\Renderable \u63a5\u53e3 // \u5f53\u7136\u8fd9\u91cc\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f20\u5b57\u7b26\u4e32 return $this->addHeader(new MyHeader($this, $p1, $p2)); }); MyHeader \u7c7b use Dcat\\Admin\\Grid\\Column; use Illuminate\\Contracts\\Support\\Renderable; class MyHeader implements Renderable { public function __construct(Column $column, $p1, $p2) { ... } public function render() { ... } } \u4f7f\u7528 $grid->column('user')->myHeader($p1, $p2); $grid->column('first_name')->myHeader($p1);","title":"\u5217\u7684\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/model-grid-column/#_1","text":"","title":"\u5217\u7684\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/model-grid-column/#sortable","text":"$grid->column('id')->sortable(); \u8868\u683c\u5b57\u6bb5\u652f\u6301\u5173\u8054\u5173\u7cfb\u8868\u5b57\u6bb5\u4ee5\u53ca json \u5b57\u6bb5\u7684\u6392\u5e8f \u6ce8\u610f\uff0c\u5173\u8054\u5173\u7cfb\u4ec5\u652f\u6301 hasOne \u4ee5\u53ca belongsTo \u4e24\u79cd\u7c7b\u578b\u7684\u5b57\u6bb5\u6392\u5e8f\uff0c\u5e76\u4e14\u4e0d\u652f\u6301\u591a\u5c42\u7ea7\u5d4c\u5957\uff01 // \u5173\u8054\u5173\u7cfb\u8868\u5b57\u6bb5\u6392\u5e8f $grid->column('profile.age')->sortable(); // \u6307\u5b9a\u9700\u8981\u6392\u5e8f\u7684\u5b57\u6bb5\u540d\u79f0 $grid->column('my_age')->sortable('profile.age'); // json\u5b57\u6bb5\u6392\u5e8f $grid->column('options.price')->sortable('options->price'); // \u5173\u8054\u5173\u7cfb\u8868\u7684 json \u5b57\u6bb5\u6392\u5e8f $grid->column('profile.options.price')->sortable('profile.options->price'); \u652f\u6301 MySql \u7684 order by cast(`{field}` as {type}) \u7528\u6cd5 $grid->column('profile.age')->sortable(null, 'SIGNED'); $grid->column('profile.options.price')->sortable('profile.options->price', 'SIGNED');","title":"\u8bbe\u7f6e\u5217\u4e3a\u53ef\u6392\u5e8f (sortable)"},{"location":"2.x/model-grid-column/#_2","text":"$grid->model()->orderBy('id', 'desc'); \u8fd9\u4e2a\u529f\u80fd\u4e5f\u652f\u6301\u5173\u8054\u5173\u7cfb\u8868\u5b57\u6bb5\u6392\u5e8f\uff0c\u6ce8\u610f\u8fd9\u91cc\u4ec5\u652f\u6301 \u4e00\u5bf9\u4e00 \u4ee5\u53ca \u4e00\u5bf9\u591a \u5173\u8054\u5173\u7cfb $grid->model()->orderBy('profile.age');","title":"\u8bbe\u7f6e\u9ed8\u8ba4\u6392\u5e8f"},{"location":"2.x/model-grid-column/#width","text":"\u8bbe\u7f6e\u5217\u7684\u5bbd\u5ea6\uff0c\u5f53\u5b57\u6bb5\u5185\u5bb9\u8fc7\u957f\u65f6\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\u9650\u5236\u5217\u5bbd\u5ea6 // px $grid->column('long_text')->width('300px'); // \u767e\u5206\u6bd4 $grid->column('long_text')->width('15%');","title":"\u8bbe\u7f6e\u5217\u7684\u5bbd\u5ea6 (width)"},{"location":"2.x/model-grid-column/#fixcolumns","text":"\u901a\u8fc7 fixColumns \u65b9\u6cd5\u53ef\u4ee5\u7ed9\u8868\u683c\u8bbe\u7f6e\u56fa\u5b9a\u5217\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u8868\u793a\u56fa\u5b9a\u4ece\u5934\u5f00\u59cb\u7684\u524d\u4e09\u5217\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793a\u56fa\u5b9a\u4ece\u540e\u5f80\u524d\u6570\u7684\u4e24\u5217\uff0c\uff08\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4e0d\u4f20\uff0c\u9ed8\u8ba4\u4e3a-1\uff09 $grid->fixColumns(2, -2); \u6548\u679c","title":"\u56fa\u5b9a\u5217 (fixColumns)"},{"location":"2.x/model-grid-column/#index","text":"\u5e8f\u53f7\u4ece 0 \u5f00\u59cb\u8ba1\u7b97 // \u5728 display \u56de\u8c03\u4e2d\u4f7f\u7528 $grid->column('\u5e8f\u53f7')->display(function () { return $this->_index + 1; }); // \u5728\u884c\u64cd\u4f5c action \u4e2d\u4f7f\u7528 $grid->actions(function ($actions) { $index = $this->_index; ... });","title":"\u83b7\u53d6\u884c\u5e8f\u53f7 (index)"},{"location":"2.x/model-grid-column/#tdhtml-setattributes","text":"$grid->column('email')->setAttributes(['name' => '...'])","title":"\u8bbe\u7f6etd\u6807\u7b7eHTML\u5c5e\u6027 (setAttributes)"},{"location":"2.x/model-grid-column/#html-setheaderattributes","text":"\u8bbe\u6807\u9898\u7684 html \u5c5e\u6027 // \u4fee\u6539\u989c\u8272 $grid->column('name')->setHeaderAttributes(['style' => 'color:#5b69bc']);","title":"\u8bbe\u7f6e\u8868\u683c\u5934HTML\u5c5e\u6027 (setHeaderAttributes)"},{"location":"2.x/model-grid-column/#showcolumnselector","text":"\u6b64\u529f\u80fd\u9ed8\u8ba4\u4e0d\u542f\u7528 // \u5f00\u542f\u5b57\u6bb5\u9009\u62e9\u5668\u529f\u80fd $grid->showColumnSelector(); // \u8bbe\u7f6e\u9ed8\u8ba4\u9690\u85cf\u5b57\u6bb5 $grid->hideColumns(['field1', ...]);","title":"\u8bbe\u7f6e\u5217\u9009\u62e9\u5668 (\u5b57\u6bb5\u663e\u793a\u6216\u9690\u85cf showColumnSelector)"},{"location":"2.x/model-grid-column/#_3","text":"\u5728\u914d\u7f6e\u6587\u4ef6 config/admin.php \u53ef\u4ee5\u914d\u7f6e\u5b58\u50a8\u5217\u9009\u62e9\u5668\u72b6\u6001\u7684\u65b9\u5f0f\uff0c\u652f\u6301\u7684\u5b58\u50a8\u65b9\u5f0f\u5982\u4e0b Dcat\\Admin\\Grid\\ColumnSelector\\SessionStore \u5217\u9009\u62e9\u5668\u72b6\u6001\u6570\u636e\u4fdd\u5b58\u5728 session \u4e2d\uff0c\u4ec5\u5728\u767b\u9646\u72b6\u6001\u4e2d\u6709\u6548 Dcat\\Admin\\Grid\\ColumnSelector\\CacheStore \u5217\u9009\u62e9\u5668\u72b6\u6001\u6570\u636e\u4fdd\u5b58\u5728 Laravel Cache \u7f13\u5b58\u7cfb\u7edf\u4e2d\uff0c\u6700\u957f\u53ef\u4fdd\u5b58 300 \u5929\uff0c\u5e76\u53ef\u4ee5\u901a\u8fc7 admin.grid.column_selector.store_params.driver \u53ef\u4ee5\u914d\u7f6e\u7f13\u5b58\u9a71\u52a8\uff0c\u9ed8\u8ba4\u4e3a file 'grid' => [ ... 'column_selector' => [ 'store' => Dcat\\Admin\\Grid\\ColumnSelector\\SessionStore::class, 'store_params' => [ 'driver' => 'file', ], ], ],","title":"\u5b58\u50a8\u9a71\u52a8 (\u6301\u4e45\u5316)"},{"location":"2.x/model-grid-column/#help","text":"Grid\\Column::help \u53c2\u6570\uff1a - $help string \u63d0\u793a\u5185\u5bb9 - $style string \u63d0\u793a\u7a97\u80cc\u666f\u989c\u8272\uff0c\u652f\u6301 green \u3001 blue \u3001 red \u3001 purple - $placement string \u63d0\u793a\u7a97\u4f4d\u7f6e\uff0c\u652f\u6301 top \u3001 left \u3001 right \u3001 bottom $grid->column('id')->help('\u63d0\u793a\u4fe1\u606f');","title":"\u8bbe\u7f6e\u5217\u63d0\u793a\u4fe1\u606f (help)"},{"location":"2.x/model-grid-column/#_4","text":"\u901a\u8fc7 Grid\\Column::filter \u65b9\u6cd5\u53ef\u4ee5\u7ed9\u5217\u8bbe\u7f6e\u4e00\u4e2a\u8fc7\u6ee4\u5668\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u6839\u636e\u8fd9\u4e00\u5217\u8fdb\u884c\u6570\u636e\u8868\u683c\u8fc7\u6ee4\u64cd\u4f5c\uff0c\u5177\u4f53\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003 \u5217\u8fc7\u6ee4\u5668 \u3002","title":"\u8bbe\u7f6e\u5217\u641c\u7d22"},{"location":"2.x/model-grid-column/#_5","text":"\u901a\u8fc7 Grid\\Column::macro \u65b9\u6cd5\u53ef\u4ee5\u6269\u5c55\u5217\u65b9\u6cd5\u3002 \u5728 app/Admin/bootstrap.php \u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u4ee3\u7801 use Dcat\\Admin\\Grid; // $value \u662f\u5f53\u524d\u5b57\u6bb5\u7684\u503c // $p1\u3001$p2 \u662f\u81ea\u5b9a\u4e49\u53c2\u6570 Grid\\Column::macro('myHeader', function ($value, $p1, $p2 = null) { // MyHeader \u9700\u8981\u5b9e\u73b0 Illuminate\\Contracts\\Support\\Renderable \u63a5\u53e3 // \u5f53\u7136\u8fd9\u91cc\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f20\u5b57\u7b26\u4e32 return $this->addHeader(new MyHeader($this, $p1, $p2)); }); MyHeader \u7c7b use Dcat\\Admin\\Grid\\Column; use Illuminate\\Contracts\\Support\\Renderable; class MyHeader implements Renderable { public function __construct(Column $column, $p1, $p2) { ... } public function render() { ... } } \u4f7f\u7528 $grid->column('user')->myHeader($p1, $p2); $grid->column('first_name')->myHeader($p1);","title":"\u6269\u5c55\u5217\u529f\u80fd"},{"location":"2.x/model-grid-combination/","text":"\u7ec4\u5408\u8868\u5934 \u901a\u8fc7 Grid::combine \u65b9\u6cd5\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u628a\u4efb\u610f\u4e24\u4e2a\u4ee5\u4e0a\u7684\u5b57\u6bb5\u7ec4\u5408\u6210\u4e00\u7ea7\u8868\u5934 \u793a\u4f8b protected function grid() { return Grid::make(new Report(), function (Grid $grid) { // \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u4e00\u7ea7\u8868\u5934\u5b57\u6bb5\u540d\u79f0\uff0c\u7b2c\u4e8c\u4e2a\u5b57\u6bb5\u4e3a\u4e8c\u7ea7\u8868\u5934\u5b57\u6bb5\u540d\u79f0\uff0c\u4e8c\u7ea7\u8868\u5934\u5b57\u6bb5\u6700\u5c11\u8bbe\u7f6e\u4e24\u4e2a $grid->combine('avgCost', ['avgMonthCost', 'avgQuarterCost', 'avgYearCost']); $grid->combine('avgVist', ['avgMonthVist', 'avgQuarterVist', 'avgYearVist']); // \u8bbe\u7f6e\u6837\u5f0f $grid->combine('top', ['topCost', 'topVist', 'topIncr'])->style('color:#1867c0'); $grid->column('content')->limit(50); $grid->column('cost')->sortable(); $grid->column('avgMonthCost'); $grid->column('avgQuarterCost')->setHeaderAttributes(['style' => 'color:#5b69bc']); $grid->column('avgYearCost'); $grid->column('avgMonthVist'); $grid->column('avgQuarterVist'); $grid->column('avgYearVist'); $grid->column('incrs'); $grid->column('avgVists'); $grid->column('topCost'); $grid->column('topVist'); $grid->column('topIncr'); $grid->column('date')->sortable(); }); }","title":"\u7ec4\u5408\u8868\u5934"},{"location":"2.x/model-grid-combination/#_1","text":"\u901a\u8fc7 Grid::combine \u65b9\u6cd5\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u628a\u4efb\u610f\u4e24\u4e2a\u4ee5\u4e0a\u7684\u5b57\u6bb5\u7ec4\u5408\u6210\u4e00\u7ea7\u8868\u5934 \u793a\u4f8b protected function grid() { return Grid::make(new Report(), function (Grid $grid) { // \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u4e00\u7ea7\u8868\u5934\u5b57\u6bb5\u540d\u79f0\uff0c\u7b2c\u4e8c\u4e2a\u5b57\u6bb5\u4e3a\u4e8c\u7ea7\u8868\u5934\u5b57\u6bb5\u540d\u79f0\uff0c\u4e8c\u7ea7\u8868\u5934\u5b57\u6bb5\u6700\u5c11\u8bbe\u7f6e\u4e24\u4e2a $grid->combine('avgCost', ['avgMonthCost', 'avgQuarterCost', 'avgYearCost']); $grid->combine('avgVist', ['avgMonthVist', 'avgQuarterVist', 'avgYearVist']); // \u8bbe\u7f6e\u6837\u5f0f $grid->combine('top', ['topCost', 'topVist', 'topIncr'])->style('color:#1867c0'); $grid->column('content')->limit(50); $grid->column('cost')->sortable(); $grid->column('avgMonthCost'); $grid->column('avgQuarterCost')->setHeaderAttributes(['style' => 'color:#5b69bc']); $grid->column('avgYearCost'); $grid->column('avgMonthVist'); $grid->column('avgQuarterVist'); $grid->column('avgYearVist'); $grid->column('incrs'); $grid->column('avgVists'); $grid->column('topCost'); $grid->column('topVist'); $grid->column('topIncr'); $grid->column('date')->sortable(); }); }","title":"\u7ec4\u5408\u8868\u5934"},{"location":"2.x/model-grid-custom-tools/","text":"\u5de5\u5177\u680f \u5de5\u5177\u6309\u94ae \u5728 model-grid \u7684\u5934\u90e8\u9ed8\u8ba4\u6709 \u6279\u91cf\u5220\u9664 \u548c \u5237\u65b0 \u4e24\u4e2a\u64cd\u4f5c\u5de5\u5177\uff0c\u5982\u679c\u6709\u66f4\u591a\u7684\u64cd\u4f5c\u9700\u6c42\uff0c\u7cfb\u7edf\u63d0\u4f9b\u4e86\u81ea\u5b9a\u4e49\u5de5\u5177\u7684\u529f\u80fd,\u4e0b\u9762\u7684\u793a\u4f8b\u6dfb\u52a0\u4e00\u4e2a\u6027\u522b\u5206\u7c7b\u9009\u62e9\u7684\u6309\u94ae\u7ec4\u5de5\u5177\u3002 \u8bbe\u7f6e\u5de5\u5177\u680f\u6309\u94ae\u6837\u5f0f \u5de5\u5177\u680f\u6309\u94ae\u9ed8\u8ba4\u663e\u793a outline \u6a21\u5f0f\uff0c\u6548\u679c\u5982\u4e0b \u7528\u6cd5 $grid->toolsWithOutline(); // \u7981\u6b62 $grid->toolsWithOutline(false); \u6548\u679c \u7981\u7528 outline \u540e\u7684\u6548\u679c \u5982\u679c\u4f60\u5e0c\u671b\u67d0\u4e2a\u6309\u94ae\u4e0d\u4f7f\u7528 outline \u6a21\u5f0f\uff0c\u53ef\u4ee5\u5728\u6309\u94ae\u7684 class \u5c5e\u6027\u4e2d\u52a0\u4e0a disable-outline $grid->tools('<a class=\"btn btn-primary disable-outline\">\u6d4b\u8bd5\u6309\u94ae</a>'); \u81ea\u5b9a\u4e49\u5de5\u5177\u680f\u6309\u94ae \u5148\u5b9a\u4e49\u5de5\u5177\u7c7b app/Admin/Extensions/Tools/UserGender.php \u7ee7\u627f\u5de5\u5177\u7c7b\u7684\u57fa\u7c7b Dcat\\Admin\\Grid\\Tools\\AbstractTool \uff1a <?php namespace App\\Admin\\Grid\\Tools; use Dcat\\Admin\\Admin; use Dcat\\Admin\\Grid\\Tools\\AbstractTool; class UserGender extends AbstractTool { protected function script() { $url = request()->fullUrlWithQuery(['gender' => '_gender_']); return <<<JS $('input:radio.user-gender').change(function () { var url = \"$url\".replace('_gender_', $(this).val()); Dcat.reload(url); }); JS; } public function render() { Admin::script($this->script()); $options = [ 'all' => 'All', 'm' => 'Male', 'f' => 'Female', ]; return view('admin.tools.gender', compact('options')); } } \u89c6\u56fe admin.tools.gender \u6587\u4ef6\u4e3a resources/views/admin/tools/gender.blade.php : <div class=\"btn-group\" data-toggle=\"buttons\"> @foreach($options as $option => $label) <label class=\"btn btn-default {{ request()->get('gender', 'all') == $option ? 'active' : '' }}\"> <input type=\"radio\" class=\"user-gender\" value=\"{{ $option }}\">{{$label}} </label> @endforeach </div> \u5728 Grid \u5f15\u5165\u8fd9\u4e2a\u5de5\u5177\uff1a $grid->tools(new UserGender()); \u5728 model-grid \u5b9a\u4e49\u4e2d\u63a5\u6536\u5230 gender \u53c2\u6570\u540e\uff0c\u505a\u597d\u6570\u636e\u67e5\u8be2\u5c31\u53ef\u4ee5\u4e86\uff1a if (in_array($gender = request()->get('gender'), ['m', 'f'])) { $grid->model()->where('gender', $gender); } \u53ef\u4ee5\u53c2\u8003\u4e0a\u9762\u7684\u65b9\u5f0f\u6765\u6dfb\u52a0\u81ea\u5df1\u7684\u5de5\u5177\u3002 \u8fdb\u9636\u7528\u6cd5 \u5982\u679c\u4f60\u7684\u5de5\u5177\u6309\u94ae\u9700\u8981\u4e0e\u540e\u7aefAPI\u8fdb\u884c\u4ea4\u4e92\uff0c\u5219\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u65b9\u5f0f\u5b9a\u4e49\uff1a {tip} AbstractTool \u7c7b\u662f\u5c5e\u4e8e Dcat\\Admin\\Actions\\Action \u7684\u5b50\u7c7b\uff0c\u672c\u8d28\u4e5f\u662f\u52a8\u4f5c\u7c7b\u7684\u4e00\u79cd\uff0c\u66f4\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003 \u52a8\u4f5c\u7c7b\u57fa\u672c\u4f7f\u7528 \u3002 <?php namespace App\\Admin\\Grid\\Tools; use Dcat\\Admin\\Grid\\Tools\\AbstractTool; use Illuminate\\Http\\Request; class SendMessage extends AbstractTool { /** * \u6309\u94ae\u6837\u5f0f\u5b9a\u4e49\uff0c\u9ed8\u8ba4 btn btn-white waves-effect * * @var string */ protected $style = 'btn btn-white waves-effect'; /** * \u6309\u94ae\u6587\u672c * * @return string|void */ public function title() { return '\u53d1\u9001\u63d0\u9192'; } /** * \u786e\u8ba4\u5f39\u7a97\uff0c\u5982\u679c\u4e0d\u9700\u8981\u5219\u8fd4\u56de\u7a7a\u5373\u53ef * * @return array|string|void */ public function confirm() { // \u53ea\u663e\u793a\u6807\u9898 // return '\u60a8\u786e\u5b9a\u8981\u53d1\u9001\u65b0\u7684\u63d0\u9192\u6d88\u606f\u5417\uff1f'; // \u663e\u793a\u6807\u9898\u548c\u5185\u5bb9 return ['\u60a8\u786e\u5b9a\u8981\u53d1\u9001\u65b0\u7684\u63d0\u9192\u6d88\u606f\u5417\uff1f', '\u786e\u8ba4\u4fe1\u606f\u5185\u5bb9\uff0c\u5982\u6ca1\u6709\u53ef\u4ee5\u7559\u7a7a']; } /** * \u5904\u7406\u8bf7\u6c42 * \u5982\u679c\u4f60\u7684\u7c7b\u4e2d\u5305\u542b\u4e86\u6b64\u65b9\u6cd5\uff0c\u5219\u70b9\u51fb\u6309\u94ae\u540e\u4f1a\u81ea\u52a8\u5411\u540e\u7aef\u53d1\u8d77ajax\u8bf7\u6c42\uff0c\u5e76\u4e14\u4f1a\u901a\u8fc7\u6b64\u65b9\u6cd5\u5904\u7406\u8bf7\u6c42\u903b\u8f91 * * @param Request $request */ public function handle(Request $request) { // \u4f60\u7684\u4ee3\u7801\u903b\u8f91 return $this->response()->success('\u53d1\u9001\u6210\u529f')->refresh(); } /** * \u8bbe\u7f6e\u8bf7\u6c42\u53c2\u6570 * * @return array|void */ public function parameters() { return [ ]; } } \u4f7f\u7528 use App\\Admin\\Grid\\Tools\\SendMessage; $grid->tools(new SendMessage()); \u6dfb\u52a0\u5de5\u5177\u7c7b Grid::tools \u65b9\u6cd5\u5141\u8bb8\u4f20\u5165 string \uff0c array , AbstractTool \u548c \u95ed\u5305 \u7b49\u7c7b\u578b\u53c2\u6570\uff0c\u4e0b\u9762\u662f\u6f14\u793a\u3002 // \u4f20\u5165\u5b57\u7b26\u4e32 $grid->tools('<a class=\"btn btn-sm btn-default\">\u5de5\u5177\u6309\u94ae\u6d4b\u8bd5</a>'); // \u4f20\u5165\u6570\u7ec4 $grid->tools([ '<a class=\"btn btn-sm btn-default\">\u5de5\u5177\u6309\u94ae\u6d4b\u8bd5</a>', new UserGender(), ]); // \u4f20\u5165\u95ed\u5305 $grid->tools(function (Grid\\Tools $tools) { $tools->append(new UserGender()); }); \u6279\u91cf\u64cd\u4f5c \u7981\u7528\u6279\u91cf\u5220\u9664 \u7cfb\u7edf\u9ed8\u8ba4\u5f00\u542f\u4e86\u6279\u91cf\u5220\u9664\u64cd\u4f5c\u7684\u529f\u80fd\uff0c\u5982\u679c\u8981\u7981\u7528\u6279\u91cf\u5220\u9664\u64cd\u4f5c\uff1a $grid->tools(function ($tools) { $tools->batch(function ($batch) { $batch->disableDelete(); }); }); // \u4e5f\u53ef\u4ee5\u8fd9\u6837 $grid->disableBatchDelete(); // \u6216 $grid->batchActions(function (Grid\\Tools\\BatchActions $batch) { $batch->disableDelete(); }); \u81ea\u5b9a\u4e49\u6279\u91cf\u64cd\u4f5c \u4e0b\u9762\u901a\u8fc7\u6269\u5c55\u4e00\u4e2a\u5bf9\u6587\u7ae0\u6279\u91cf\u53d1\u5e03\u7684\u529f\u80fd\u6765\u6f14\u793a\u81ea\u5b9a\u4e49\u6279\u91cf\u64cd\u4f5c\u7684\u529f\u80fd\uff1a \u5148\u5b9a\u4e49\u64cd\u4f5c\u7c7b app/Admin/Extensions/Tools/ReleasePost.php \uff0c\u7ee7\u627f Dcat\\Admin\\Grid\\BatchAction \uff1a {tip} BatchAction \u7c7b\u662f\u5c5e\u4e8e Dcat\\Admin\\Actions\\Action \u7684\u5b50\u7c7b\uff0c\u672c\u8d28\u4e5f\u662f\u52a8\u4f5c\u7c7b\u7684\u4e00\u79cd\uff0c\u66f4\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003 \u52a8\u4f5c\u7c7b\u57fa\u672c\u4f7f\u7528 \u3002 <?php namespace App\\Admin\\Extensions\\Tools; use Dcat\\Admin\\Grid\\BatchAction; use Illuminate\\Http\\Request; class ReleasePost extends BatchAction { protected $action; // \u6ce8\u610faction\u7684\u6784\u9020\u65b9\u6cd5\u53c2\u6570\u4e00\u5b9a\u8981\u7ed9\u9ed8\u8ba4\u503c public function __construct($title = null, $action = 1) { $this->title = $title; $this->action = $action; } // \u786e\u8ba4\u5f39\u7a97\u4fe1\u606f public function confirm() { return '\u60a8\u786e\u5b9a\u8981\u53d1\u5e03\u5df2\u9009\u4e2d\u7684\u6587\u7ae0\u5417\uff1f'; } // \u5904\u7406\u8bf7\u6c42 public function handle(Request $request) { // \u83b7\u53d6\u9009\u4e2d\u7684\u6587\u7ae0ID\u6570\u7ec4 $keys = $this->getKey(); // \u83b7\u53d6\u8bf7\u6c42\u53c2\u6570 $action = $request->get('action'); foreach (Post::find($keys) as $post) { $post->released = $action; $post->save(); } $message = $action ? '\u6587\u7ae0\u53d1\u5e03\u6210\u529f' : '\u6587\u7ae0\u4e0b\u7ebf\u6210\u529f'; return $this->response()->success($message)->refresh(); } // \u8bbe\u7f6e\u8bf7\u6c42\u53c2\u6570 public function parameters() { return [ 'action' => $this->action, ]; } } \u770b\u4ee3\u7801\u7684\u5b9e\u73b0\uff0c\u901a\u8fc7click\u64cd\u4f5c\u53d1\u9001\u4e00\u4e2apost\u8bf7\u6c42\uff0c\u628a\u9009\u4e2d\u7684\u884c\u6570\u636e id \u901a\u8fc7\u6570\u7ec4\u7684\u5f62\u5f0f\u4f20\u7ed9\u540e\u7aef\u63a5\u53e3\uff0c\u540e\u7aef\u63a5\u53e3\u62ff\u5230 id \u5217\u8868\u548c\u8981\u4fee\u6539\u7684\u72b6\u6001\u6765\u66f4\u65b0\u6570\u636e\uff0c\u7136\u540e\u524d\u7aef\u5237\u65b0\u9875\u9762(pjax reload)\uff0c\u5e76\u5f39\u51fa toastr \u63d0\u793a\u64cd\u4f5c\u6210\u529f\u3002 \u5728 model-grid \u4e2d\u52a0\u5165\u8fd9\u4e2a\u6279\u91cf\u64cd\u4f5c\u529f\u80fd\uff1a $grid->batchActions([ new ReleasePost('\u53d1\u5e03\u6587\u7ae0', 1), new ReleasePost('\u6587\u7ae0\u4e0b\u7ebf', 0) ]); // \u4e5f\u53ef\u4ee5\u8fd9\u4e48\u5199 $grid->batchActions(function ($batch) { $batch->add(new ReleasePost('\u53d1\u5e03\u6587\u7ae0', 1)); $batch->add(new ReleasePost('\u6587\u7ae0\u4e0b\u7ebf', 0)); }); // \u6216 $grid->tools(function ($tools) { $tools->batch(function ($batch) { $batch->add(new ReleasePost('\u53d1\u5e03\u6587\u7ae0', 1)); $batch->add(new ReleasePost('\u6587\u7ae0\u4e0b\u7ebf', 0)); }); }); \u83b7\u53d6\u590d\u9009\u6846\u9009\u4e2d\u7684ID\u6570\u7ec4 \u901a\u8fc7 getSelectedKeysScript \u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u5230\u590d\u9009\u6846\u9009\u4e2d\u7684ID\u6570\u7ec4\uff0c\u7528\u6cd5\u5982\u4e0b {tip} getSelectedKeysScript \u65b9\u6cd5\u8fd4\u56de\u7684\u662f js \u4ee3\u7801\uff0c\u53ea\u80fd\u5728 js \u4ee3\u7801\u4e2d\u4f7f\u7528\u3002 <?php namespace App\\Admin\\Extensions\\Tools; use Dcat\\Admin\\Grid\\BatchAction; use Illuminate\\Http\\Request; class ReleasePost extends BatchAction { protected $action; public function __construct($title, $action = 1) { $this->title = $title; $this->action = $action; } // \u786e\u8ba4\u5f39\u7a97\u4fe1\u606f public function confirm() { return '\u60a8\u786e\u5b9a\u8981\u53d1\u5e03\u5df2\u9009\u4e2d\u7684\u6587\u7ae0\u5417\uff1f'; } // \u5904\u7406\u8bf7\u6c42 public function handle(Request $request) { ... } /** * \u8bbe\u7f6e\u52a8\u4f5c\u53d1\u8d77\u8bf7\u6c42\u524d\u7684\u56de\u8c03\u51fd\u6570\uff0c\u8fd4\u56defalse\u53ef\u4ee5\u4e2d\u65ad\u8bf7\u6c42. * * @return string */ public function actionScript(){ $warning = __('No data selected!'); return <<<JS function (data, target, action) { var key = {$this->getSelectedKeysScript()} if (key.length === 0) { Dcat.warning('{$warning}'); return false; } // \u8bbe\u7f6e\u4e3b\u952e\u4e3a\u590d\u9009\u6846\u9009\u4e2d\u7684\u884cID\u6570\u7ec4 action.options.key = key; } JS; } } \u8868\u5355\u5f39\u7a97 \u8bf7\u53c2\u8003\u6587\u6863 \u5de5\u5177\u8868\u5355 - \u5f39\u7a97","title":"\u5de5\u5177\u680f"},{"location":"2.x/model-grid-custom-tools/#_1","text":"","title":"\u5de5\u5177\u680f"},{"location":"2.x/model-grid-custom-tools/#_2","text":"\u5728 model-grid \u7684\u5934\u90e8\u9ed8\u8ba4\u6709 \u6279\u91cf\u5220\u9664 \u548c \u5237\u65b0 \u4e24\u4e2a\u64cd\u4f5c\u5de5\u5177\uff0c\u5982\u679c\u6709\u66f4\u591a\u7684\u64cd\u4f5c\u9700\u6c42\uff0c\u7cfb\u7edf\u63d0\u4f9b\u4e86\u81ea\u5b9a\u4e49\u5de5\u5177\u7684\u529f\u80fd,\u4e0b\u9762\u7684\u793a\u4f8b\u6dfb\u52a0\u4e00\u4e2a\u6027\u522b\u5206\u7c7b\u9009\u62e9\u7684\u6309\u94ae\u7ec4\u5de5\u5177\u3002","title":"\u5de5\u5177\u6309\u94ae"},{"location":"2.x/model-grid-custom-tools/#_3","text":"\u5de5\u5177\u680f\u6309\u94ae\u9ed8\u8ba4\u663e\u793a outline \u6a21\u5f0f\uff0c\u6548\u679c\u5982\u4e0b \u7528\u6cd5 $grid->toolsWithOutline(); // \u7981\u6b62 $grid->toolsWithOutline(false); \u6548\u679c \u7981\u7528 outline \u540e\u7684\u6548\u679c \u5982\u679c\u4f60\u5e0c\u671b\u67d0\u4e2a\u6309\u94ae\u4e0d\u4f7f\u7528 outline \u6a21\u5f0f\uff0c\u53ef\u4ee5\u5728\u6309\u94ae\u7684 class \u5c5e\u6027\u4e2d\u52a0\u4e0a disable-outline $grid->tools('<a class=\"btn btn-primary disable-outline\">\u6d4b\u8bd5\u6309\u94ae</a>');","title":"\u8bbe\u7f6e\u5de5\u5177\u680f\u6309\u94ae\u6837\u5f0f"},{"location":"2.x/model-grid-custom-tools/#_4","text":"\u5148\u5b9a\u4e49\u5de5\u5177\u7c7b app/Admin/Extensions/Tools/UserGender.php \u7ee7\u627f\u5de5\u5177\u7c7b\u7684\u57fa\u7c7b Dcat\\Admin\\Grid\\Tools\\AbstractTool \uff1a <?php namespace App\\Admin\\Grid\\Tools; use Dcat\\Admin\\Admin; use Dcat\\Admin\\Grid\\Tools\\AbstractTool; class UserGender extends AbstractTool { protected function script() { $url = request()->fullUrlWithQuery(['gender' => '_gender_']); return <<<JS $('input:radio.user-gender').change(function () { var url = \"$url\".replace('_gender_', $(this).val()); Dcat.reload(url); }); JS; } public function render() { Admin::script($this->script()); $options = [ 'all' => 'All', 'm' => 'Male', 'f' => 'Female', ]; return view('admin.tools.gender', compact('options')); } } \u89c6\u56fe admin.tools.gender \u6587\u4ef6\u4e3a resources/views/admin/tools/gender.blade.php : <div class=\"btn-group\" data-toggle=\"buttons\"> @foreach($options as $option => $label) <label class=\"btn btn-default {{ request()->get('gender', 'all') == $option ? 'active' : '' }}\"> <input type=\"radio\" class=\"user-gender\" value=\"{{ $option }}\">{{$label}} </label> @endforeach </div> \u5728 Grid \u5f15\u5165\u8fd9\u4e2a\u5de5\u5177\uff1a $grid->tools(new UserGender()); \u5728 model-grid \u5b9a\u4e49\u4e2d\u63a5\u6536\u5230 gender \u53c2\u6570\u540e\uff0c\u505a\u597d\u6570\u636e\u67e5\u8be2\u5c31\u53ef\u4ee5\u4e86\uff1a if (in_array($gender = request()->get('gender'), ['m', 'f'])) { $grid->model()->where('gender', $gender); } \u53ef\u4ee5\u53c2\u8003\u4e0a\u9762\u7684\u65b9\u5f0f\u6765\u6dfb\u52a0\u81ea\u5df1\u7684\u5de5\u5177\u3002","title":"\u81ea\u5b9a\u4e49\u5de5\u5177\u680f\u6309\u94ae"},{"location":"2.x/model-grid-custom-tools/#_5","text":"\u5982\u679c\u4f60\u7684\u5de5\u5177\u6309\u94ae\u9700\u8981\u4e0e\u540e\u7aefAPI\u8fdb\u884c\u4ea4\u4e92\uff0c\u5219\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u65b9\u5f0f\u5b9a\u4e49\uff1a {tip} AbstractTool \u7c7b\u662f\u5c5e\u4e8e Dcat\\Admin\\Actions\\Action \u7684\u5b50\u7c7b\uff0c\u672c\u8d28\u4e5f\u662f\u52a8\u4f5c\u7c7b\u7684\u4e00\u79cd\uff0c\u66f4\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003 \u52a8\u4f5c\u7c7b\u57fa\u672c\u4f7f\u7528 \u3002 <?php namespace App\\Admin\\Grid\\Tools; use Dcat\\Admin\\Grid\\Tools\\AbstractTool; use Illuminate\\Http\\Request; class SendMessage extends AbstractTool { /** * \u6309\u94ae\u6837\u5f0f\u5b9a\u4e49\uff0c\u9ed8\u8ba4 btn btn-white waves-effect * * @var string */ protected $style = 'btn btn-white waves-effect'; /** * \u6309\u94ae\u6587\u672c * * @return string|void */ public function title() { return '\u53d1\u9001\u63d0\u9192'; } /** * \u786e\u8ba4\u5f39\u7a97\uff0c\u5982\u679c\u4e0d\u9700\u8981\u5219\u8fd4\u56de\u7a7a\u5373\u53ef * * @return array|string|void */ public function confirm() { // \u53ea\u663e\u793a\u6807\u9898 // return '\u60a8\u786e\u5b9a\u8981\u53d1\u9001\u65b0\u7684\u63d0\u9192\u6d88\u606f\u5417\uff1f'; // \u663e\u793a\u6807\u9898\u548c\u5185\u5bb9 return ['\u60a8\u786e\u5b9a\u8981\u53d1\u9001\u65b0\u7684\u63d0\u9192\u6d88\u606f\u5417\uff1f', '\u786e\u8ba4\u4fe1\u606f\u5185\u5bb9\uff0c\u5982\u6ca1\u6709\u53ef\u4ee5\u7559\u7a7a']; } /** * \u5904\u7406\u8bf7\u6c42 * \u5982\u679c\u4f60\u7684\u7c7b\u4e2d\u5305\u542b\u4e86\u6b64\u65b9\u6cd5\uff0c\u5219\u70b9\u51fb\u6309\u94ae\u540e\u4f1a\u81ea\u52a8\u5411\u540e\u7aef\u53d1\u8d77ajax\u8bf7\u6c42\uff0c\u5e76\u4e14\u4f1a\u901a\u8fc7\u6b64\u65b9\u6cd5\u5904\u7406\u8bf7\u6c42\u903b\u8f91 * * @param Request $request */ public function handle(Request $request) { // \u4f60\u7684\u4ee3\u7801\u903b\u8f91 return $this->response()->success('\u53d1\u9001\u6210\u529f')->refresh(); } /** * \u8bbe\u7f6e\u8bf7\u6c42\u53c2\u6570 * * @return array|void */ public function parameters() { return [ ]; } } \u4f7f\u7528 use App\\Admin\\Grid\\Tools\\SendMessage; $grid->tools(new SendMessage());","title":"\u8fdb\u9636\u7528\u6cd5"},{"location":"2.x/model-grid-custom-tools/#_6","text":"Grid::tools \u65b9\u6cd5\u5141\u8bb8\u4f20\u5165 string \uff0c array , AbstractTool \u548c \u95ed\u5305 \u7b49\u7c7b\u578b\u53c2\u6570\uff0c\u4e0b\u9762\u662f\u6f14\u793a\u3002 // \u4f20\u5165\u5b57\u7b26\u4e32 $grid->tools('<a class=\"btn btn-sm btn-default\">\u5de5\u5177\u6309\u94ae\u6d4b\u8bd5</a>'); // \u4f20\u5165\u6570\u7ec4 $grid->tools([ '<a class=\"btn btn-sm btn-default\">\u5de5\u5177\u6309\u94ae\u6d4b\u8bd5</a>', new UserGender(), ]); // \u4f20\u5165\u95ed\u5305 $grid->tools(function (Grid\\Tools $tools) { $tools->append(new UserGender()); });","title":"\u6dfb\u52a0\u5de5\u5177\u7c7b"},{"location":"2.x/model-grid-custom-tools/#_7","text":"","title":"\u6279\u91cf\u64cd\u4f5c"},{"location":"2.x/model-grid-custom-tools/#_8","text":"\u7cfb\u7edf\u9ed8\u8ba4\u5f00\u542f\u4e86\u6279\u91cf\u5220\u9664\u64cd\u4f5c\u7684\u529f\u80fd\uff0c\u5982\u679c\u8981\u7981\u7528\u6279\u91cf\u5220\u9664\u64cd\u4f5c\uff1a $grid->tools(function ($tools) { $tools->batch(function ($batch) { $batch->disableDelete(); }); }); // \u4e5f\u53ef\u4ee5\u8fd9\u6837 $grid->disableBatchDelete(); // \u6216 $grid->batchActions(function (Grid\\Tools\\BatchActions $batch) { $batch->disableDelete(); });","title":"\u7981\u7528\u6279\u91cf\u5220\u9664"},{"location":"2.x/model-grid-custom-tools/#_9","text":"\u4e0b\u9762\u901a\u8fc7\u6269\u5c55\u4e00\u4e2a\u5bf9\u6587\u7ae0\u6279\u91cf\u53d1\u5e03\u7684\u529f\u80fd\u6765\u6f14\u793a\u81ea\u5b9a\u4e49\u6279\u91cf\u64cd\u4f5c\u7684\u529f\u80fd\uff1a \u5148\u5b9a\u4e49\u64cd\u4f5c\u7c7b app/Admin/Extensions/Tools/ReleasePost.php \uff0c\u7ee7\u627f Dcat\\Admin\\Grid\\BatchAction \uff1a {tip} BatchAction \u7c7b\u662f\u5c5e\u4e8e Dcat\\Admin\\Actions\\Action \u7684\u5b50\u7c7b\uff0c\u672c\u8d28\u4e5f\u662f\u52a8\u4f5c\u7c7b\u7684\u4e00\u79cd\uff0c\u66f4\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003 \u52a8\u4f5c\u7c7b\u57fa\u672c\u4f7f\u7528 \u3002 <?php namespace App\\Admin\\Extensions\\Tools; use Dcat\\Admin\\Grid\\BatchAction; use Illuminate\\Http\\Request; class ReleasePost extends BatchAction { protected $action; // \u6ce8\u610faction\u7684\u6784\u9020\u65b9\u6cd5\u53c2\u6570\u4e00\u5b9a\u8981\u7ed9\u9ed8\u8ba4\u503c public function __construct($title = null, $action = 1) { $this->title = $title; $this->action = $action; } // \u786e\u8ba4\u5f39\u7a97\u4fe1\u606f public function confirm() { return '\u60a8\u786e\u5b9a\u8981\u53d1\u5e03\u5df2\u9009\u4e2d\u7684\u6587\u7ae0\u5417\uff1f'; } // \u5904\u7406\u8bf7\u6c42 public function handle(Request $request) { // \u83b7\u53d6\u9009\u4e2d\u7684\u6587\u7ae0ID\u6570\u7ec4 $keys = $this->getKey(); // \u83b7\u53d6\u8bf7\u6c42\u53c2\u6570 $action = $request->get('action'); foreach (Post::find($keys) as $post) { $post->released = $action; $post->save(); } $message = $action ? '\u6587\u7ae0\u53d1\u5e03\u6210\u529f' : '\u6587\u7ae0\u4e0b\u7ebf\u6210\u529f'; return $this->response()->success($message)->refresh(); } // \u8bbe\u7f6e\u8bf7\u6c42\u53c2\u6570 public function parameters() { return [ 'action' => $this->action, ]; } } \u770b\u4ee3\u7801\u7684\u5b9e\u73b0\uff0c\u901a\u8fc7click\u64cd\u4f5c\u53d1\u9001\u4e00\u4e2apost\u8bf7\u6c42\uff0c\u628a\u9009\u4e2d\u7684\u884c\u6570\u636e id \u901a\u8fc7\u6570\u7ec4\u7684\u5f62\u5f0f\u4f20\u7ed9\u540e\u7aef\u63a5\u53e3\uff0c\u540e\u7aef\u63a5\u53e3\u62ff\u5230 id \u5217\u8868\u548c\u8981\u4fee\u6539\u7684\u72b6\u6001\u6765\u66f4\u65b0\u6570\u636e\uff0c\u7136\u540e\u524d\u7aef\u5237\u65b0\u9875\u9762(pjax reload)\uff0c\u5e76\u5f39\u51fa toastr \u63d0\u793a\u64cd\u4f5c\u6210\u529f\u3002 \u5728 model-grid \u4e2d\u52a0\u5165\u8fd9\u4e2a\u6279\u91cf\u64cd\u4f5c\u529f\u80fd\uff1a $grid->batchActions([ new ReleasePost('\u53d1\u5e03\u6587\u7ae0', 1), new ReleasePost('\u6587\u7ae0\u4e0b\u7ebf', 0) ]); // \u4e5f\u53ef\u4ee5\u8fd9\u4e48\u5199 $grid->batchActions(function ($batch) { $batch->add(new ReleasePost('\u53d1\u5e03\u6587\u7ae0', 1)); $batch->add(new ReleasePost('\u6587\u7ae0\u4e0b\u7ebf', 0)); }); // \u6216 $grid->tools(function ($tools) { $tools->batch(function ($batch) { $batch->add(new ReleasePost('\u53d1\u5e03\u6587\u7ae0', 1)); $batch->add(new ReleasePost('\u6587\u7ae0\u4e0b\u7ebf', 0)); }); });","title":"\u81ea\u5b9a\u4e49\u6279\u91cf\u64cd\u4f5c"},{"location":"2.x/model-grid-custom-tools/#id","text":"\u901a\u8fc7 getSelectedKeysScript \u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u5230\u590d\u9009\u6846\u9009\u4e2d\u7684ID\u6570\u7ec4\uff0c\u7528\u6cd5\u5982\u4e0b {tip} getSelectedKeysScript \u65b9\u6cd5\u8fd4\u56de\u7684\u662f js \u4ee3\u7801\uff0c\u53ea\u80fd\u5728 js \u4ee3\u7801\u4e2d\u4f7f\u7528\u3002 <?php namespace App\\Admin\\Extensions\\Tools; use Dcat\\Admin\\Grid\\BatchAction; use Illuminate\\Http\\Request; class ReleasePost extends BatchAction { protected $action; public function __construct($title, $action = 1) { $this->title = $title; $this->action = $action; } // \u786e\u8ba4\u5f39\u7a97\u4fe1\u606f public function confirm() { return '\u60a8\u786e\u5b9a\u8981\u53d1\u5e03\u5df2\u9009\u4e2d\u7684\u6587\u7ae0\u5417\uff1f'; } // \u5904\u7406\u8bf7\u6c42 public function handle(Request $request) { ... } /** * \u8bbe\u7f6e\u52a8\u4f5c\u53d1\u8d77\u8bf7\u6c42\u524d\u7684\u56de\u8c03\u51fd\u6570\uff0c\u8fd4\u56defalse\u53ef\u4ee5\u4e2d\u65ad\u8bf7\u6c42. * * @return string */ public function actionScript(){ $warning = __('No data selected!'); return <<<JS function (data, target, action) { var key = {$this->getSelectedKeysScript()} if (key.length === 0) { Dcat.warning('{$warning}'); return false; } // \u8bbe\u7f6e\u4e3b\u952e\u4e3a\u590d\u9009\u6846\u9009\u4e2d\u7684\u884cID\u6570\u7ec4 action.options.key = key; } JS; } }","title":"\u83b7\u53d6\u590d\u9009\u6846\u9009\u4e2d\u7684ID\u6570\u7ec4"},{"location":"2.x/model-grid-custom-tools/#_10","text":"\u8bf7\u53c2\u8003\u6587\u6863 \u5de5\u5177\u8868\u5355 - \u5f39\u7a97","title":"\u8868\u5355\u5f39\u7a97"},{"location":"2.x/model-grid-data/","text":"\u8868\u683c\u6570\u636e\u6e90 \u6570\u636e\u4ed3\u5e93( Repository )\u662f\u4e00\u4e2a\u53ef\u4ee5\u63d0\u4f9b\u7279\u5b9a\u63a5\u53e3\u5bf9\u6570\u636e\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u7684\u7c7b\uff0c\u901a\u8fc7\u6570\u636e\u4ed3\u5e93\u7684\u5f15\u5165\uff0c\u53ef\u4ee5\u8ba9\u9875\u9762\u7684\u6784\u5efa\u4e0d\u518d\u5173\u5fc3\u6570\u636e\u8bfb\u5199\u529f\u80fd\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u5f00\u53d1\u8005\u53ea\u9700\u8981\u5b9e\u73b0\u7279\u5b9a\u7684\u64cd\u4f5c\u63a5\u53e3\u5373\u53ef\u8f7b\u677e\u5207\u6362\u6570\u636e\u6e90\u3002\u5173\u4e8e\u6570\u636e\u4ed3\u5e93\u7684\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003\u6587\u6863 \u6570\u636e\u4ed3\u5e93 \u3002 {tip} \u8868\u683c\u7684\u6570\u636e\u662f\u901a\u8fc7 Dcat\\Admin\\Contracts\\Repository::get \u63a5\u53e3\u83b7\u53d6\u7684\u3002 \u6570\u636e\u6765\u81ea\u6a21\u578b {tip} \u5982\u679c\u4f60\u7684\u6570\u636e\u6765\u81ea Model \uff0c\u90a3\u4e48\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 Model \u5b9e\u4f8b\uff0c\u5e95\u5c42\u4f1a\u81ea\u52a8\u628a Model \u8f6c\u5316\u4e3a\u6570\u636e\u4ed3\u5e93\u5b9e\u4f8b\u3002 \u5f53\u6570\u636e\u6e90\u652f\u6301 Eloquent Model \u65f6\uff0c\u53ea\u9700\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684 Repository \u7c7b\u7ee7\u627f Dcat\\Admin\\Repositories\\EloquentRepository \u5373\u53ef <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use App\\Models\\Movie as MovieModel; class Movie extends EloquentRepository { // \u8fd9\u91cc\u5b9a\u4e49\u4f60\u7684\u6a21\u578b\u7c7b\u540d protected $eloquentClass = MovieModel::class; // \u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\"*\" public function getGridColumns() { return [$this->getKeyName(), 'name', 'title', 'created_at']; } } \u76f4\u63a5\u4f7f\u7528\u6a21\u578b \u5982\u679c\u4f60\u8fd8\u89c9\u5f97\u521b\u5efa Repository \u7c7b\u9ebb\u70e6\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u628a Eloquent Model \u7684\u5b9e\u4f8b\u4f20\u9012\u5230 Grid \u4e2d\uff0c\u5e95\u5c42\u4f1a\u81ea\u52a8\u628a Eloquent Model \u8f6c\u5316\u4e3a EloquentRepository \u5b9e\u4f8b use App\\Models\\Movie as MovieModel; $grid = new Grid(new MovieModel()); ... \u4fee\u6539\u6765\u6e90\u6570\u636e 1\u3001\u4f7f\u7528 Grid\\Model use App\\Admin\\Repositories\\Movie; $grid = new Grid(new Movie()); // \u6dfb\u52a0\u9ed8\u8ba4\u67e5\u8be2\u6761\u4ef6 $grid->model()->where('id', '>', 100); // \u8bbe\u7f6e\u521d\u59cb\u6392\u5e8f\u6761\u4ef6 $grid->model()->orderBy('id', 'desc'); ... \u5176\u5b83\u67e5\u8be2\u65b9\u6cd5\u53ef\u4ee5\u53c2\u8003 eloquent \u7684\u67e5\u8be2\u65b9\u6cd5\u3002 2\u3001\u4f7f\u7528 Model Query use App\\Models\\Movie as MovieModel; $grid = new Grid(MovieModel::where('id', '>', 100)); ... \u5173\u8054\u6570\u636e \u6709\u4ee5\u4e0b\u4e09\u79cd\u65b9\u5f0f\u8ba9\u4f60\u7684\u8868\u683c\u652f\u6301\u5173\u8054\u6570\u636e 1\u3001\u4f7f\u7528Repository use App\\Admin\\Repositories\\Movie; // \u76f8\u5f53\u4e8e MovieModel::with('categories') $grid = new Grid(new Movie(['categories'])); $grid->categories; ... 2\u3001\u4f7f\u7528 Grid\\Model use App\\Admin\\Repositories\\Movie; $grid = new Grid(new Movie()); $grid->model()->with('categories'); $grid->categories; ... 3\u3001\u4f7f\u7528 Model Query use App\\Models\\Movie as MovieModel; $grid = new Grid(MovieModel::with('categories')); $grid->categories; ... \u6570\u636e\u6765\u81ea\u5916\u90e8API \u793a\u4f8b \u5982\u679c\u6570\u636e\u662f\u6765\u81ea\u5916\u90e8\u7684API\uff0c\u53ea\u9700\u8981\u8986\u5199 Repository \u4e2d\u7684 get \u65b9\u6cd5\u65e2\u53ef, \u5177\u4f53\u7528\u6cd5\u53ef\u53c2\u8003\u4e0b\u9762\u7684\u793a\u4f8b\uff0c\u91c7\u7528 \u8c46\u74e3\u7535\u5f71 API\u83b7\u53d6\u5e76\u5c55\u793a\u6570\u636e\uff1a {tip} \u9700\u8981\u6ce8\u610f\u7684\u662f\u5206\u9875\u548c\u4e0d\u5206\u9875\u7684\u60c5\u51b5\u4e0b get \u65b9\u6cd5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u7c7b\u578b\u662f\u4e0d\u540c\u7684\uff0c\u5177\u4f53\u4f7f\u7528\u53ef\u53c2\u8003 \u6570\u636e\u4ed3\u5e93 - get \u3002 <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Repositories\\Repository; use Illuminate\\Pagination\\LengthAwarePaginator; class ComingSoon extends Repository { protected $api = 'https://api.douban.com/v2/movie/coming_soon'; /** * \u5b9a\u4e49\u4e3b\u952e\u5b57\u6bb5\u540d\u79f0 * * @return string */ public function getPrimaryKeyColumn() { return '_id'; } /** * \u67e5\u8be2\u8868\u683c\u6570\u636e * * @param Grid\\Model $model * @return LengthAwarePaginator */ public function get(Grid\\Model $model) { // \u5f53\u524d\u9875\u6570 $currentPage = $model->getCurrentPage(); // \u6bcf\u9875\u663e\u793a\u884c\u6570 $perPage = $model->getPerPage(); // \u83b7\u53d6\u6392\u5e8f\u5b57\u6bb5 [$orderColumn, $orderType] = $model->getSort(); // \u83b7\u53d6\"scope\"\u7b5b\u9009\u503c $city = $model->filter()->input(Grid\\Filter\\Scope::QUERY_NAME, '\u5e7f\u5dde'); // \u5982\u679c\u8bbe\u7f6e\u4e86\u5176\u4ed6\u8fc7\u6ee4\u5668\u5b57\u6bb5\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u201cinput\u201d\u65b9\u6cd5\u83b7\u53d6\u503c\uff0c\u5982\uff1a $title = $model->filter()->input('title'); if ($title !== null) { // \u6267\u884c\u4f60\u7684\u7b5b\u9009\u903b\u8f91 } $start = ($currentPage - 1) * $perPage; $client = new \\GuzzleHttp\\Client(); $response = $client->get(\"{$this->api}?{$this->apiKey}&city=$city&start=$start&count=$perPage\"); $data = json_decode((string)$response->getBody(), true); return $model->makePaginator( $data['total'] ?? 0, // \u4f20\u5165\u603b\u8bb0\u5f55\u6570 $data['subjects'] ?? [] // \u4f20\u5165\u6570\u636e\u4e8c\u7ef4\u6570\u7ec4 ); } } Grid\\Model \u5e38\u7528\u65b9\u6cd5 \u83b7\u53d6\u5f53\u524d\u9875\u6570 (getCurrentPage) \u83b7\u53d6\u5f53\u524d\u9875\u7801 - \u8fd4\u56de\u503c\uff1a int|null \u5982\u679c\u4e0d\u5141\u8bb8\u5206\u9875\u8fd4\u56denull $page = $model->getCurrentPage(); \u83b7\u53d6\u6bcf\u9875\u663e\u793a\u884c\u6570 (getPerPage) \u83b7\u53d6\u6bcf\u9875\u663e\u793a\u884c\u6570 - \u8fd4\u56de\u503c\uff1a int|null \u5982\u679c\u4e0d\u5141\u8bb8\u5206\u9875\u8fd4\u56denull $limit = $model->getPerPage(); \u83b7\u53d6\u6392\u5e8f\u5b57\u6bb5 (getSort) \u83b7\u53d6\u6392\u5e8f\u5b57\u6bb5 - \u8fd4\u56de\u503c\uff1a array [$orderColumn, 'desc'|'asc'] || [null, null] // $orderColumn \u5b57\u6bb5\u540d\u79f0\uff0c\u5982\u6ca1\u6709\u8fdb\u884c\u6392\u5e8f\u5219\u4e3a null // $orderType \u6b63\u5e8f\u6216\u5012\u5e8f\uff1a \"desc\"\u3001\"asc\"\uff0c\u5982\u6ca1\u6709\u8fdb\u884c\u6392\u5e8f\u5219\u4e3a null list($orderColumn, $orderType) = $model->getSort(); \u83b7\u53d6\u8fc7\u6ee4\u5668\u5bf9\u8c61 (filter) \u83b7\u53d6\u8fc7\u6ee4\u5668\u5bf9\u8c61\uff0c\u901a\u8fc7\u8fc7\u6ee4\u5668\u5bf9\u8c61\u53ef\u4ee5\u83b7\u53d6\u5230\u641c\u7d22\u8868\u5355\u7684\u503c\uff0c\u7528\u6cd5\u5982\u4e0b - \u8fd4\u56de\u503c Dcat\\Admin\\Grid\\Filter // \u83b7\u53d6\"scope\"\u7b5b\u9009\u503c $city = $model->filter()->input(Grid\\Filter\\Scope::QUERY_NAME, '\u5e7f\u5dde'); // \u5982\u679c\u8bbe\u7f6e\u4e86\u5176\u4ed6\u8fc7\u6ee4\u5668\u5b57\u6bb5\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u201cinput\u201d\u65b9\u6cd5\u83b7\u53d6\u503c\uff0c\u5982\uff1a $title = $model->filter()->input('title'); if ($title !== null) { // \u6267\u884c\u4f60\u7684\u7b5b\u9009\u903b\u8f91 } \u83b7\u53d6\u5feb\u6377\u641c\u7d22\u8868\u5355\u503c \u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u53ef\u4ee5\u83b7\u53d6\u5230\u5feb\u6377\u641c\u7d22\u8868\u5355\u503c $quickSearch = $model->grid()->quickSearch()->value(); \u6570\u636e\u6765\u81ea\u590d\u6742SQL\u67e5\u8be2 \u5982\u679c\u6765\u6e90\u6570\u636e\u9700\u8981\u6267\u884c\u6bd4\u8f83\u590d\u6742\u7684SQL\u8bed\u53e5\u83b7\u53d6\uff0c\u90a3\u4e48\u6709\u4e24\u4e2a\u529e\u6cd5, \u7b2c\u4e00\u4e2a\u529e\u6cd5\u5c31\u662f\u4e0a\u9762\u7684\u65b9\u6cd5\uff0c\u8986\u76d6\u6389 Repository \u7684 get \u65b9\u6cd5\u5b9e\u73b0\u3002 {tip} \u9700\u8981\u6ce8\u610f\u7684\u662f\u5206\u9875\u548c\u4e0d\u5206\u9875\u7684\u60c5\u51b5\u4e0b get \u65b9\u6cd5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u7c7b\u578b\u662f\u4e0d\u540c\u7684\uff0c\u5177\u4f53\u4f7f\u7528\u53ef\u53c2\u8003 \u6570\u636e\u4ed3\u5e93 - get \u3002","title":"\u8868\u683c\u6570\u636e\u6e90"},{"location":"2.x/model-grid-data/#_1","text":"\u6570\u636e\u4ed3\u5e93( Repository )\u662f\u4e00\u4e2a\u53ef\u4ee5\u63d0\u4f9b\u7279\u5b9a\u63a5\u53e3\u5bf9\u6570\u636e\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u7684\u7c7b\uff0c\u901a\u8fc7\u6570\u636e\u4ed3\u5e93\u7684\u5f15\u5165\uff0c\u53ef\u4ee5\u8ba9\u9875\u9762\u7684\u6784\u5efa\u4e0d\u518d\u5173\u5fc3\u6570\u636e\u8bfb\u5199\u529f\u80fd\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u5f00\u53d1\u8005\u53ea\u9700\u8981\u5b9e\u73b0\u7279\u5b9a\u7684\u64cd\u4f5c\u63a5\u53e3\u5373\u53ef\u8f7b\u677e\u5207\u6362\u6570\u636e\u6e90\u3002\u5173\u4e8e\u6570\u636e\u4ed3\u5e93\u7684\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003\u6587\u6863 \u6570\u636e\u4ed3\u5e93 \u3002 {tip} \u8868\u683c\u7684\u6570\u636e\u662f\u901a\u8fc7 Dcat\\Admin\\Contracts\\Repository::get \u63a5\u53e3\u83b7\u53d6\u7684\u3002","title":"\u8868\u683c\u6570\u636e\u6e90"},{"location":"2.x/model-grid-data/#_2","text":"{tip} \u5982\u679c\u4f60\u7684\u6570\u636e\u6765\u81ea Model \uff0c\u90a3\u4e48\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 Model \u5b9e\u4f8b\uff0c\u5e95\u5c42\u4f1a\u81ea\u52a8\u628a Model \u8f6c\u5316\u4e3a\u6570\u636e\u4ed3\u5e93\u5b9e\u4f8b\u3002 \u5f53\u6570\u636e\u6e90\u652f\u6301 Eloquent Model \u65f6\uff0c\u53ea\u9700\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684 Repository \u7c7b\u7ee7\u627f Dcat\\Admin\\Repositories\\EloquentRepository \u5373\u53ef <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use App\\Models\\Movie as MovieModel; class Movie extends EloquentRepository { // \u8fd9\u91cc\u5b9a\u4e49\u4f60\u7684\u6a21\u578b\u7c7b\u540d protected $eloquentClass = MovieModel::class; // \u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\"*\" public function getGridColumns() { return [$this->getKeyName(), 'name', 'title', 'created_at']; } }","title":"\u6570\u636e\u6765\u81ea\u6a21\u578b"},{"location":"2.x/model-grid-data/#_3","text":"\u5982\u679c\u4f60\u8fd8\u89c9\u5f97\u521b\u5efa Repository \u7c7b\u9ebb\u70e6\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u628a Eloquent Model \u7684\u5b9e\u4f8b\u4f20\u9012\u5230 Grid \u4e2d\uff0c\u5e95\u5c42\u4f1a\u81ea\u52a8\u628a Eloquent Model \u8f6c\u5316\u4e3a EloquentRepository \u5b9e\u4f8b use App\\Models\\Movie as MovieModel; $grid = new Grid(new MovieModel()); ...","title":"\u76f4\u63a5\u4f7f\u7528\u6a21\u578b"},{"location":"2.x/model-grid-data/#_4","text":"1\u3001\u4f7f\u7528 Grid\\Model use App\\Admin\\Repositories\\Movie; $grid = new Grid(new Movie()); // \u6dfb\u52a0\u9ed8\u8ba4\u67e5\u8be2\u6761\u4ef6 $grid->model()->where('id', '>', 100); // \u8bbe\u7f6e\u521d\u59cb\u6392\u5e8f\u6761\u4ef6 $grid->model()->orderBy('id', 'desc'); ... \u5176\u5b83\u67e5\u8be2\u65b9\u6cd5\u53ef\u4ee5\u53c2\u8003 eloquent \u7684\u67e5\u8be2\u65b9\u6cd5\u3002 2\u3001\u4f7f\u7528 Model Query use App\\Models\\Movie as MovieModel; $grid = new Grid(MovieModel::where('id', '>', 100)); ...","title":"\u4fee\u6539\u6765\u6e90\u6570\u636e"},{"location":"2.x/model-grid-data/#_5","text":"\u6709\u4ee5\u4e0b\u4e09\u79cd\u65b9\u5f0f\u8ba9\u4f60\u7684\u8868\u683c\u652f\u6301\u5173\u8054\u6570\u636e 1\u3001\u4f7f\u7528Repository use App\\Admin\\Repositories\\Movie; // \u76f8\u5f53\u4e8e MovieModel::with('categories') $grid = new Grid(new Movie(['categories'])); $grid->categories; ... 2\u3001\u4f7f\u7528 Grid\\Model use App\\Admin\\Repositories\\Movie; $grid = new Grid(new Movie()); $grid->model()->with('categories'); $grid->categories; ... 3\u3001\u4f7f\u7528 Model Query use App\\Models\\Movie as MovieModel; $grid = new Grid(MovieModel::with('categories')); $grid->categories; ...","title":"\u5173\u8054\u6570\u636e"},{"location":"2.x/model-grid-data/#api","text":"","title":"\u6570\u636e\u6765\u81ea\u5916\u90e8API"},{"location":"2.x/model-grid-data/#_6","text":"\u5982\u679c\u6570\u636e\u662f\u6765\u81ea\u5916\u90e8\u7684API\uff0c\u53ea\u9700\u8981\u8986\u5199 Repository \u4e2d\u7684 get \u65b9\u6cd5\u65e2\u53ef, \u5177\u4f53\u7528\u6cd5\u53ef\u53c2\u8003\u4e0b\u9762\u7684\u793a\u4f8b\uff0c\u91c7\u7528 \u8c46\u74e3\u7535\u5f71 API\u83b7\u53d6\u5e76\u5c55\u793a\u6570\u636e\uff1a {tip} \u9700\u8981\u6ce8\u610f\u7684\u662f\u5206\u9875\u548c\u4e0d\u5206\u9875\u7684\u60c5\u51b5\u4e0b get \u65b9\u6cd5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u7c7b\u578b\u662f\u4e0d\u540c\u7684\uff0c\u5177\u4f53\u4f7f\u7528\u53ef\u53c2\u8003 \u6570\u636e\u4ed3\u5e93 - get \u3002 <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Repositories\\Repository; use Illuminate\\Pagination\\LengthAwarePaginator; class ComingSoon extends Repository { protected $api = 'https://api.douban.com/v2/movie/coming_soon'; /** * \u5b9a\u4e49\u4e3b\u952e\u5b57\u6bb5\u540d\u79f0 * * @return string */ public function getPrimaryKeyColumn() { return '_id'; } /** * \u67e5\u8be2\u8868\u683c\u6570\u636e * * @param Grid\\Model $model * @return LengthAwarePaginator */ public function get(Grid\\Model $model) { // \u5f53\u524d\u9875\u6570 $currentPage = $model->getCurrentPage(); // \u6bcf\u9875\u663e\u793a\u884c\u6570 $perPage = $model->getPerPage(); // \u83b7\u53d6\u6392\u5e8f\u5b57\u6bb5 [$orderColumn, $orderType] = $model->getSort(); // \u83b7\u53d6\"scope\"\u7b5b\u9009\u503c $city = $model->filter()->input(Grid\\Filter\\Scope::QUERY_NAME, '\u5e7f\u5dde'); // \u5982\u679c\u8bbe\u7f6e\u4e86\u5176\u4ed6\u8fc7\u6ee4\u5668\u5b57\u6bb5\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u201cinput\u201d\u65b9\u6cd5\u83b7\u53d6\u503c\uff0c\u5982\uff1a $title = $model->filter()->input('title'); if ($title !== null) { // \u6267\u884c\u4f60\u7684\u7b5b\u9009\u903b\u8f91 } $start = ($currentPage - 1) * $perPage; $client = new \\GuzzleHttp\\Client(); $response = $client->get(\"{$this->api}?{$this->apiKey}&city=$city&start=$start&count=$perPage\"); $data = json_decode((string)$response->getBody(), true); return $model->makePaginator( $data['total'] ?? 0, // \u4f20\u5165\u603b\u8bb0\u5f55\u6570 $data['subjects'] ?? [] // \u4f20\u5165\u6570\u636e\u4e8c\u7ef4\u6570\u7ec4 ); } }","title":"\u793a\u4f8b"},{"location":"2.x/model-grid-data/#gridmodel","text":"","title":"Grid\\Model \u5e38\u7528\u65b9\u6cd5"},{"location":"2.x/model-grid-data/#getcurrentpage","text":"\u83b7\u53d6\u5f53\u524d\u9875\u7801 - \u8fd4\u56de\u503c\uff1a int|null \u5982\u679c\u4e0d\u5141\u8bb8\u5206\u9875\u8fd4\u56denull $page = $model->getCurrentPage();","title":"\u83b7\u53d6\u5f53\u524d\u9875\u6570 (getCurrentPage)"},{"location":"2.x/model-grid-data/#getperpage","text":"\u83b7\u53d6\u6bcf\u9875\u663e\u793a\u884c\u6570 - \u8fd4\u56de\u503c\uff1a int|null \u5982\u679c\u4e0d\u5141\u8bb8\u5206\u9875\u8fd4\u56denull $limit = $model->getPerPage();","title":"\u83b7\u53d6\u6bcf\u9875\u663e\u793a\u884c\u6570 (getPerPage)"},{"location":"2.x/model-grid-data/#getsort","text":"\u83b7\u53d6\u6392\u5e8f\u5b57\u6bb5 - \u8fd4\u56de\u503c\uff1a array [$orderColumn, 'desc'|'asc'] || [null, null] // $orderColumn \u5b57\u6bb5\u540d\u79f0\uff0c\u5982\u6ca1\u6709\u8fdb\u884c\u6392\u5e8f\u5219\u4e3a null // $orderType \u6b63\u5e8f\u6216\u5012\u5e8f\uff1a \"desc\"\u3001\"asc\"\uff0c\u5982\u6ca1\u6709\u8fdb\u884c\u6392\u5e8f\u5219\u4e3a null list($orderColumn, $orderType) = $model->getSort();","title":"\u83b7\u53d6\u6392\u5e8f\u5b57\u6bb5 (getSort)"},{"location":"2.x/model-grid-data/#filter","text":"\u83b7\u53d6\u8fc7\u6ee4\u5668\u5bf9\u8c61\uff0c\u901a\u8fc7\u8fc7\u6ee4\u5668\u5bf9\u8c61\u53ef\u4ee5\u83b7\u53d6\u5230\u641c\u7d22\u8868\u5355\u7684\u503c\uff0c\u7528\u6cd5\u5982\u4e0b - \u8fd4\u56de\u503c Dcat\\Admin\\Grid\\Filter // \u83b7\u53d6\"scope\"\u7b5b\u9009\u503c $city = $model->filter()->input(Grid\\Filter\\Scope::QUERY_NAME, '\u5e7f\u5dde'); // \u5982\u679c\u8bbe\u7f6e\u4e86\u5176\u4ed6\u8fc7\u6ee4\u5668\u5b57\u6bb5\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u201cinput\u201d\u65b9\u6cd5\u83b7\u53d6\u503c\uff0c\u5982\uff1a $title = $model->filter()->input('title'); if ($title !== null) { // \u6267\u884c\u4f60\u7684\u7b5b\u9009\u903b\u8f91 }","title":"\u83b7\u53d6\u8fc7\u6ee4\u5668\u5bf9\u8c61 (filter)"},{"location":"2.x/model-grid-data/#_7","text":"\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u53ef\u4ee5\u83b7\u53d6\u5230\u5feb\u6377\u641c\u7d22\u8868\u5355\u503c $quickSearch = $model->grid()->quickSearch()->value();","title":"\u83b7\u53d6\u5feb\u6377\u641c\u7d22\u8868\u5355\u503c"},{"location":"2.x/model-grid-data/#sql","text":"\u5982\u679c\u6765\u6e90\u6570\u636e\u9700\u8981\u6267\u884c\u6bd4\u8f83\u590d\u6742\u7684SQL\u8bed\u53e5\u83b7\u53d6\uff0c\u90a3\u4e48\u6709\u4e24\u4e2a\u529e\u6cd5, \u7b2c\u4e00\u4e2a\u529e\u6cd5\u5c31\u662f\u4e0a\u9762\u7684\u65b9\u6cd5\uff0c\u8986\u76d6\u6389 Repository \u7684 get \u65b9\u6cd5\u5b9e\u73b0\u3002 {tip} \u9700\u8981\u6ce8\u610f\u7684\u662f\u5206\u9875\u548c\u4e0d\u5206\u9875\u7684\u60c5\u51b5\u4e0b get \u65b9\u6cd5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u7c7b\u578b\u662f\u4e0d\u540c\u7684\uff0c\u5177\u4f53\u4f7f\u7528\u53ef\u53c2\u8003 \u6570\u636e\u4ed3\u5e93 - get \u3002","title":"\u6570\u636e\u6765\u81ea\u590d\u6742SQL\u67e5\u8be2"},{"location":"2.x/model-grid-editable/","text":"\u6570\u636e\u8868\u683c\u884c\u5185\u7f16\u8f91 \u6570\u636e\u8868\u683c\u6240\u6709\u4f7f\u7528\u884c\u5185\u7f16\u8f91\u7684\u5217\u5b57\u6bb5\uff0c\u90fd\u5fc5\u987b\u5728 form \u8868\u5355\u4e2d\u5b9a\u4e49\u4e00\u4e2a\u76f8\u540c\u7684\u8868\u5355\u5b57\u6bb5\uff0c\u5426\u5219\u5c06\u65e0\u6cd5\u8fdb\u884c\u7f16\u8f91\u3002 \u6587\u672c (editable) \u542f\u7528 $grid->column('title')->editable(); // \u7f16\u8f91\u6210\u529f\u540e\u5237\u65b0\u9875\u9762 $grid->column('nickname')->editable(true); \u6548\u679c \u5f00\u5173 (switch) \u5feb\u901f\u5c06\u5217\u53d8\u6210\u5f00\u5173\u7ec4\u4ef6\uff0c\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a $grid->column('status')->switch(); // \u8bbe\u7f6e\u989c\u8272 use Dcat\\Admin\\Admin; $grid->column('status')->switch(Admin::color()->info()); $grid->column('status')->switch('#333'); \u8fd9\u4e2a\u529f\u80fd\u9700\u8981\u4f60\u5728 form \u8868\u5355\u65b9\u6cd5\u4e2d\u540c\u6837\u8bbe\u7f6e\u4e00\u4e2a status \u5b57\u6bb5 $form->hidden('status') ->customFormat(function ($v) { return $v == '\u6253\u5f00' ? 1 : 0; }) ->saving(function ($v) { return $v ? '\u6253\u5f00' : '\u5173\u95ed'; }); // \u6216\u8005 $form->switch('status') ->customFormat(function ($v) { return $v == '\u6253\u5f00' ? 1 : 0; }) ->saving(function ($v) { return $v ? '\u6253\u5f00' : '\u5173\u95ed'; }); \u7f16\u8f91\u6210\u529f\u540e\u5237\u65b0\u9875\u9762 $grid->column('status')->switch('', true); \u5f00\u5173\u7ec4 (switchGroup) {tip} \u6ce8\u610f\uff1a\u5728 grid \u4e2d\u5bf9\u67d0\u5b57\u6bb5\u8bbe\u7f6e switchGroup \u9ed8\u8ba4\u7684\u4fdd\u5b58\u7ed3\u679c\u662f 0 \u6216 1 \uff0c\u5982\u9700\u4fee\u6539\u53ef\u4ee5\u901a\u8fc7 $form->hidden(xxx)->saving(...) \u65b9\u6cd5\u4fee\u6539\u3002 \u5feb\u901f\u5c06\u5217\u53d8\u6210\u5f00\u5173\u7ec4\u4ef6\u7ec4\uff0c\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a $grid->switch_group->switchGroup([ 'hot' => '\u70ed\u95e8', 'new' => '\u6700\u65b0', 'recommend' => '\u63a8\u8350', 'image.show' => '\u663e\u793a\u56fe\u7247', // \u66f4\u65b0\u5bf9\u5e94\u5173\u8054\u6a21\u578b ]); // \u6216 // \u4e0d\u5199label\u4f1a\u81ea\u52a8\u4ece\u7ffb\u8bd1\u6587\u4ef6\u7ffb\u8bd1\uff0c\u5177\u4f53\u4f7f\u7528\u8bf7\u53c2\u7167 \u201c\u5b57\u6bb5\u7ffb\u8bd1\u201d \u7ae0\u8282 $grid->switch_group->switchGroup(['is_new', 'is_hot', 'published']); \u8fd9\u4e2a\u529f\u80fd\u9700\u8981\u4f60\u5728 form \u8868\u5355\u65b9\u6cd5\u4e2d\u540c\u6837\u8bbe\u7f6e\u5bf9\u5e94\u7684\u5b57\u6bb5 $form->switch('hot') ->customFormat(function ($v) { return $v == '\u6253\u5f00' ? 1 : 0; }) ->saving(function ($v) { return $v ? '\u6253\u5f00' : '\u5173\u95ed'; }); $form->switch('new') ->customFormat(function ($v) { return $v == '\u6253\u5f00' ? 1 : 0; }) ->saving(function ($v) { return $v ? '\u6253\u5f00' : '\u5173\u95ed'; }); \u7f16\u8f91\u6210\u529f\u540e\u5237\u65b0\u9875\u9762 $grid->column('switch_group')->switchGroup([...], true); \u4e0b\u62c9\u9009\u6846 (select) $grid->column('options')->select([ 1 => 'Sed ut perspiciatis unde omni', 2 => 'voluptatem accusantium doloremque', 3 => 'dicta sunt explicabo', 4 => 'laudantium, totam rem aperiam', ]); select \u4e5f\u652f\u6301\u53c2\u6570\u4e3a\u95ed\u5305\uff0c\u4f7f\u7528\u65b9\u6cd5\u548c editable \u7684 select \u7c7b\u4f3c\u3002 \u7f16\u8f91\u6210\u529f\u540e\u5237\u65b0\u9875\u9762 $grid->column('options')->select([...], true); \u5355\u9009\u6846 (radio) $grid->column('options')->radio([ 1 => 'Sed ut perspiciatis unde omni', 2 => 'voluptatem accusantium doloremque', 3 => 'dicta sunt explicabo', 4 => 'laudantium, totam rem aperiam', ]); radio \u4e5f\u652f\u6301\u53c2\u6570\u4e3a\u95ed\u5305\uff0c\u4f7f\u7528\u65b9\u6cd5\u548c editable \u7684 select \u7c7b\u4f3c\u3002 \u7f16\u8f91\u6210\u529f\u540e\u5237\u65b0\u9875\u9762 $grid->column('options')->radio([...], true); \u591a\u9009\u6846 (checkbox) $grid->column('options')->checkbox([ 1 => 'Sed ut perspiciatis unde omni', 2 => 'voluptatem accusantium doloremque', 3 => 'dicta sunt explicabo', 4 => 'laudantium, totam rem aperiam', ]); checkbox \u4e5f\u652f\u6301\u53c2\u6570\u4e3a\u95ed\u5305\uff0c\u4f7f\u7528\u65b9\u6cd5\u548c editable \u7684 select \u7c7b\u4f3c\u3002 \u7f16\u8f91\u6210\u529f\u540e\u5237\u65b0\u9875\u9762 $grid->column('options')->checkbox([...], true); textarea $grid->column('...')->textarea();","title":"\u6570\u636e\u8868\u683c\u884c\u5185\u7f16\u8f91"},{"location":"2.x/model-grid-editable/#_1","text":"\u6570\u636e\u8868\u683c\u6240\u6709\u4f7f\u7528\u884c\u5185\u7f16\u8f91\u7684\u5217\u5b57\u6bb5\uff0c\u90fd\u5fc5\u987b\u5728 form \u8868\u5355\u4e2d\u5b9a\u4e49\u4e00\u4e2a\u76f8\u540c\u7684\u8868\u5355\u5b57\u6bb5\uff0c\u5426\u5219\u5c06\u65e0\u6cd5\u8fdb\u884c\u7f16\u8f91\u3002","title":"\u6570\u636e\u8868\u683c\u884c\u5185\u7f16\u8f91"},{"location":"2.x/model-grid-editable/#editable","text":"\u542f\u7528 $grid->column('title')->editable(); // \u7f16\u8f91\u6210\u529f\u540e\u5237\u65b0\u9875\u9762 $grid->column('nickname')->editable(true); \u6548\u679c","title":"\u6587\u672c (editable)"},{"location":"2.x/model-grid-editable/#switch","text":"\u5feb\u901f\u5c06\u5217\u53d8\u6210\u5f00\u5173\u7ec4\u4ef6\uff0c\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a $grid->column('status')->switch(); // \u8bbe\u7f6e\u989c\u8272 use Dcat\\Admin\\Admin; $grid->column('status')->switch(Admin::color()->info()); $grid->column('status')->switch('#333'); \u8fd9\u4e2a\u529f\u80fd\u9700\u8981\u4f60\u5728 form \u8868\u5355\u65b9\u6cd5\u4e2d\u540c\u6837\u8bbe\u7f6e\u4e00\u4e2a status \u5b57\u6bb5 $form->hidden('status') ->customFormat(function ($v) { return $v == '\u6253\u5f00' ? 1 : 0; }) ->saving(function ($v) { return $v ? '\u6253\u5f00' : '\u5173\u95ed'; }); // \u6216\u8005 $form->switch('status') ->customFormat(function ($v) { return $v == '\u6253\u5f00' ? 1 : 0; }) ->saving(function ($v) { return $v ? '\u6253\u5f00' : '\u5173\u95ed'; }); \u7f16\u8f91\u6210\u529f\u540e\u5237\u65b0\u9875\u9762 $grid->column('status')->switch('', true);","title":"\u5f00\u5173 (switch)"},{"location":"2.x/model-grid-editable/#switchgroup","text":"{tip} \u6ce8\u610f\uff1a\u5728 grid \u4e2d\u5bf9\u67d0\u5b57\u6bb5\u8bbe\u7f6e switchGroup \u9ed8\u8ba4\u7684\u4fdd\u5b58\u7ed3\u679c\u662f 0 \u6216 1 \uff0c\u5982\u9700\u4fee\u6539\u53ef\u4ee5\u901a\u8fc7 $form->hidden(xxx)->saving(...) \u65b9\u6cd5\u4fee\u6539\u3002 \u5feb\u901f\u5c06\u5217\u53d8\u6210\u5f00\u5173\u7ec4\u4ef6\u7ec4\uff0c\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a $grid->switch_group->switchGroup([ 'hot' => '\u70ed\u95e8', 'new' => '\u6700\u65b0', 'recommend' => '\u63a8\u8350', 'image.show' => '\u663e\u793a\u56fe\u7247', // \u66f4\u65b0\u5bf9\u5e94\u5173\u8054\u6a21\u578b ]); // \u6216 // \u4e0d\u5199label\u4f1a\u81ea\u52a8\u4ece\u7ffb\u8bd1\u6587\u4ef6\u7ffb\u8bd1\uff0c\u5177\u4f53\u4f7f\u7528\u8bf7\u53c2\u7167 \u201c\u5b57\u6bb5\u7ffb\u8bd1\u201d \u7ae0\u8282 $grid->switch_group->switchGroup(['is_new', 'is_hot', 'published']); \u8fd9\u4e2a\u529f\u80fd\u9700\u8981\u4f60\u5728 form \u8868\u5355\u65b9\u6cd5\u4e2d\u540c\u6837\u8bbe\u7f6e\u5bf9\u5e94\u7684\u5b57\u6bb5 $form->switch('hot') ->customFormat(function ($v) { return $v == '\u6253\u5f00' ? 1 : 0; }) ->saving(function ($v) { return $v ? '\u6253\u5f00' : '\u5173\u95ed'; }); $form->switch('new') ->customFormat(function ($v) { return $v == '\u6253\u5f00' ? 1 : 0; }) ->saving(function ($v) { return $v ? '\u6253\u5f00' : '\u5173\u95ed'; }); \u7f16\u8f91\u6210\u529f\u540e\u5237\u65b0\u9875\u9762 $grid->column('switch_group')->switchGroup([...], true);","title":"\u5f00\u5173\u7ec4 (switchGroup)"},{"location":"2.x/model-grid-editable/#select","text":"$grid->column('options')->select([ 1 => 'Sed ut perspiciatis unde omni', 2 => 'voluptatem accusantium doloremque', 3 => 'dicta sunt explicabo', 4 => 'laudantium, totam rem aperiam', ]); select \u4e5f\u652f\u6301\u53c2\u6570\u4e3a\u95ed\u5305\uff0c\u4f7f\u7528\u65b9\u6cd5\u548c editable \u7684 select \u7c7b\u4f3c\u3002 \u7f16\u8f91\u6210\u529f\u540e\u5237\u65b0\u9875\u9762 $grid->column('options')->select([...], true);","title":"\u4e0b\u62c9\u9009\u6846 (select)"},{"location":"2.x/model-grid-editable/#radio","text":"$grid->column('options')->radio([ 1 => 'Sed ut perspiciatis unde omni', 2 => 'voluptatem accusantium doloremque', 3 => 'dicta sunt explicabo', 4 => 'laudantium, totam rem aperiam', ]); radio \u4e5f\u652f\u6301\u53c2\u6570\u4e3a\u95ed\u5305\uff0c\u4f7f\u7528\u65b9\u6cd5\u548c editable \u7684 select \u7c7b\u4f3c\u3002 \u7f16\u8f91\u6210\u529f\u540e\u5237\u65b0\u9875\u9762 $grid->column('options')->radio([...], true);","title":"\u5355\u9009\u6846 (radio)"},{"location":"2.x/model-grid-editable/#checkbox","text":"$grid->column('options')->checkbox([ 1 => 'Sed ut perspiciatis unde omni', 2 => 'voluptatem accusantium doloremque', 3 => 'dicta sunt explicabo', 4 => 'laudantium, totam rem aperiam', ]); checkbox \u4e5f\u652f\u6301\u53c2\u6570\u4e3a\u95ed\u5305\uff0c\u4f7f\u7528\u65b9\u6cd5\u548c editable \u7684 select \u7c7b\u4f3c\u3002 \u7f16\u8f91\u6210\u529f\u540e\u5237\u65b0\u9875\u9762 $grid->column('options')->checkbox([...], true);","title":"\u591a\u9009\u6846 (checkbox)"},{"location":"2.x/model-grid-editable/#textarea","text":"$grid->column('...')->textarea();","title":"textarea"},{"location":"2.x/model-grid-events/","text":"\u6570\u636e\u8868\u683c\u4e8b\u4ef6 \u521d\u59cb\u5316 \u901a\u8fc7 Grid::resolving \u65b9\u6cd5\u53ef\u4ee5\u76d1\u542c\u8868\u683c\u521d\u59cb\u5316\u4e8b\u4ef6\u3002 \u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u8fd9\u4e24\u4e2a\u4e8b\u4ef6\u4e2d\u6539\u53d8 Grid \u7684\u4e00\u4e9b\u8bbe\u7f6e\u6216\u884c\u4e3a\uff0c\u6bd4\u5982\u9700\u8981\u7981\u7528\u6389\u67d0\u4e9b\u64cd\u4f5c\uff0c\u53ef\u4ee5\u5728 app/Admin/bootstrap.php \u52a0\u5165\u4e0b\u9762\u7684\u4ee3\u7801\uff1a use Dcat\\Admin\\Grid; Grid::resolving(function (Grid $grid) { $grid->disableActions(); $grid->disablePagination(); $grid->disableCreateButton(); $grid->disableFilter(); $grid->disableRowSelector(); $grid->disableToolbar(); }); // \u53ea\u9700\u8981\u76d1\u542c\u4e00\u6b21 Grid::resolving(function (Grid $grid) { ... }, true); \u8fd9\u6837\u5c31\u4e0d\u7528\u5728\u6bcf\u4e00\u4e2a\u63a7\u5236\u5668\u7684\u4ee3\u7801\u4e2d\u6765\u8bbe\u7f6e\u4e86\u3002 \u5982\u679c\u5168\u5c40\u8bbe\u7f6e\u540e\uff0c\u8981\u5728\u5176\u4e2d\u67d0\u4e00\u4e2a\u8868\u683c\u4e2d\u5f00\u542f\u8bbe\u7f6e\uff0c\u6bd4\u5982\u5f00\u542f\u663e\u793a\u64cd\u4f5c\u5217\uff0c\u5728\u5bf9\u5e94\u7684\u5b9e\u4f8b\u4e0a\u8c03\u7528 $grid->disableActions(false); \u5c31\u53ef\u4ee5\u4e86 \u6784\u5efa \u901a\u8fc7 Grid::composing \u65b9\u6cd5\u53ef\u4ee5\u76d1\u542c\u8868\u683c\u88ab\u8c03\u7528\u4e8b\u4ef6\u3002 Grid::composing(function (Grid $grid) { ... }); // \u53ea\u9700\u8981\u76d1\u542c\u4e00\u6b21 Grid::composing(function (Grid $grid) { ... }, true); Fetching \u76d1\u542c\u8868\u683c\u83b7\u53d6\u6570\u636e\u4e4b\u524d\u4e8b\u4ef6\uff0c\u6b64\u4e8b\u4ef6\u5728 composing \u4e8b\u4ef6\u4e4b\u540e\u89e6\u53d1\u3002 $grid->listen(Grid\\Events\\Fetching::class, function ($grid) { }); // \u53ef\u4ee5\u5728 composing \u4e8b\u4ef6\u4e2d\u4f7f\u7528 Grid::composing(function (Grid $grid) { $grid->listen(Grid\\Events\\Fetching::class, function ($grid) { }); }); Fetched \u76d1\u542c\u8868\u683c\u83b7\u53d6\u6570\u636e\u4e4b\u540e\u4e8b\u4ef6\uff0c\u901a\u8fc7\u76d1\u542c\u6b64\u4e8b\u4ef6\u53ef\u4ee5\u6279\u91cf\u4fee\u6539\u6570\u636e, \u53c2\u8003\u4e0b\u9762\u5b9e\u4f8b $grid->listen(Grid\\Events\\Fetched::class, function ($grid, Collection $rows) { // $collection \u5f53\u524d\u8fd9\u4e00\u4e2a\u8868\u683c\u6570\u636e\u7684\u6a21\u578b\u96c6\u5408\uff0c \u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u9700\u8981\u6765\u8bfb\u53d6\u6216\u8005\u4fee\u6539\u5b83\u7684\u6570\u636e\u3002 $rows->transform(function ($row) { // \u66f4\u6539\u884c\u6570\u636e $row['name'] = $row['first_name'].' '.$row['last_name']; return $row; }); }); ApplyFilter \u76d1\u542c\u8868\u683c\u8fc7\u6ee4\u5668\u641c\u7d22\u4e8b\u4ef6\uff0c\u6b64\u4e8b\u4ef6\u53ea\u6709\u5728\u8fc7\u6ee4\u5668\u6709\u641c\u7d22\u6761\u4ef6\u65f6\u624d\u4f1a\u89e6\u53d1 $grid->listen(Grid\\Events\\ApplyFilter::class, function ($grid, array $conditions) { // $conditions \u5f53\u524d\u8fc7\u6ee4\u5668\u751f\u6210\u7684\u641c\u7d22\u6761\u4ef6\u6570\u7ec4 dd('\u8868\u683c\u8fc7\u6ee4\u5668', $conditions); }); ApplyQuickSearch \u76d1\u542c\u8868\u683c\u5feb\u6377\u641c\u7d22\u4e8b\u4ef6\uff0c\u6b64\u4e8b\u4ef6\u53ea\u6709\u5728\u5feb\u6377\u641c\u7d22\u8f93\u5165\u6846\u6709\u503c\u65f6\u624d\u4f1a\u89e6\u53d1 $grid->listen(Grid\\Events\\ApplyQuickSearch::class, function ($grid, $input) { // $input \u641c\u7d22\u5173\u952e\u5b57 dd('\u8868\u683c\u5feb\u6377\u641c\u7d22', $input); }); ApplySelector \u76d1\u542c\u8868\u683c\u89c4\u683c\u7b5b\u9009\u5668\u4e8b\u4ef6\uff0c\u6b64\u4e8b\u4ef6\u53ea\u6709\u5728\u89c4\u683c\u7b5b\u9009\u5668\u9009\u4e2d\u9009\u9879\u65f6\u624d\u4f1a\u89e6\u53d1 $grid->listen(Grid\\Events\\ApplySelector::class, function ($grid, array $input) { // $input \u7b5b\u9009\u5668\u9009\u4e2d\u7684\u9009\u9879\u6570\u7ec4 dd('\u8868\u683c\u89c4\u683c\u7b5b\u9009\u5668', $input); }); rows\u56de\u8c03 \u901a\u8fc7 Grid::rows \u65b9\u6cd5\u53ef\u4ee5\u76d1\u542c\u8868\u683c\u83b7\u53d6\u6570\u636e\u4e4b\u540e\u4e8b\u4ef6\u3002 use Dcat\\Admin\\Grid\\Row; use Illuminate\\Support\\Collection; $grid->rows(function (Collection $rows) { /** * \u83b7\u53d6\u7b2c\u4e00\u884c\u6570\u636e * * @var Row $firstRow */ $firstRow = $rows->first(); // \u8bbe\u7f6e tr html\u5c5e\u6027 $firstRow->setAttributes(['name' => '....']); if ($firstRow) { // \u83b7\u53d6\u7b2c\u4e00\u884c\u7684 id $id = $firstRow->id; // \u8f6c\u5316\u4e3a\u6570\u7ec4 $row = $firstRow->toArray(); } });","title":"\u6570\u636e\u8868\u683c\u4e8b\u4ef6"},{"location":"2.x/model-grid-events/#_1","text":"","title":"\u6570\u636e\u8868\u683c\u4e8b\u4ef6"},{"location":"2.x/model-grid-events/#_2","text":"\u901a\u8fc7 Grid::resolving \u65b9\u6cd5\u53ef\u4ee5\u76d1\u542c\u8868\u683c\u521d\u59cb\u5316\u4e8b\u4ef6\u3002 \u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u8fd9\u4e24\u4e2a\u4e8b\u4ef6\u4e2d\u6539\u53d8 Grid \u7684\u4e00\u4e9b\u8bbe\u7f6e\u6216\u884c\u4e3a\uff0c\u6bd4\u5982\u9700\u8981\u7981\u7528\u6389\u67d0\u4e9b\u64cd\u4f5c\uff0c\u53ef\u4ee5\u5728 app/Admin/bootstrap.php \u52a0\u5165\u4e0b\u9762\u7684\u4ee3\u7801\uff1a use Dcat\\Admin\\Grid; Grid::resolving(function (Grid $grid) { $grid->disableActions(); $grid->disablePagination(); $grid->disableCreateButton(); $grid->disableFilter(); $grid->disableRowSelector(); $grid->disableToolbar(); }); // \u53ea\u9700\u8981\u76d1\u542c\u4e00\u6b21 Grid::resolving(function (Grid $grid) { ... }, true); \u8fd9\u6837\u5c31\u4e0d\u7528\u5728\u6bcf\u4e00\u4e2a\u63a7\u5236\u5668\u7684\u4ee3\u7801\u4e2d\u6765\u8bbe\u7f6e\u4e86\u3002 \u5982\u679c\u5168\u5c40\u8bbe\u7f6e\u540e\uff0c\u8981\u5728\u5176\u4e2d\u67d0\u4e00\u4e2a\u8868\u683c\u4e2d\u5f00\u542f\u8bbe\u7f6e\uff0c\u6bd4\u5982\u5f00\u542f\u663e\u793a\u64cd\u4f5c\u5217\uff0c\u5728\u5bf9\u5e94\u7684\u5b9e\u4f8b\u4e0a\u8c03\u7528 $grid->disableActions(false); \u5c31\u53ef\u4ee5\u4e86","title":"\u521d\u59cb\u5316"},{"location":"2.x/model-grid-events/#_3","text":"\u901a\u8fc7 Grid::composing \u65b9\u6cd5\u53ef\u4ee5\u76d1\u542c\u8868\u683c\u88ab\u8c03\u7528\u4e8b\u4ef6\u3002 Grid::composing(function (Grid $grid) { ... }); // \u53ea\u9700\u8981\u76d1\u542c\u4e00\u6b21 Grid::composing(function (Grid $grid) { ... }, true);","title":"\u6784\u5efa"},{"location":"2.x/model-grid-events/#fetching","text":"\u76d1\u542c\u8868\u683c\u83b7\u53d6\u6570\u636e\u4e4b\u524d\u4e8b\u4ef6\uff0c\u6b64\u4e8b\u4ef6\u5728 composing \u4e8b\u4ef6\u4e4b\u540e\u89e6\u53d1\u3002 $grid->listen(Grid\\Events\\Fetching::class, function ($grid) { }); // \u53ef\u4ee5\u5728 composing \u4e8b\u4ef6\u4e2d\u4f7f\u7528 Grid::composing(function (Grid $grid) { $grid->listen(Grid\\Events\\Fetching::class, function ($grid) { }); });","title":"Fetching"},{"location":"2.x/model-grid-events/#fetched","text":"\u76d1\u542c\u8868\u683c\u83b7\u53d6\u6570\u636e\u4e4b\u540e\u4e8b\u4ef6\uff0c\u901a\u8fc7\u76d1\u542c\u6b64\u4e8b\u4ef6\u53ef\u4ee5\u6279\u91cf\u4fee\u6539\u6570\u636e, \u53c2\u8003\u4e0b\u9762\u5b9e\u4f8b $grid->listen(Grid\\Events\\Fetched::class, function ($grid, Collection $rows) { // $collection \u5f53\u524d\u8fd9\u4e00\u4e2a\u8868\u683c\u6570\u636e\u7684\u6a21\u578b\u96c6\u5408\uff0c \u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u9700\u8981\u6765\u8bfb\u53d6\u6216\u8005\u4fee\u6539\u5b83\u7684\u6570\u636e\u3002 $rows->transform(function ($row) { // \u66f4\u6539\u884c\u6570\u636e $row['name'] = $row['first_name'].' '.$row['last_name']; return $row; }); });","title":"Fetched"},{"location":"2.x/model-grid-events/#applyfilter","text":"\u76d1\u542c\u8868\u683c\u8fc7\u6ee4\u5668\u641c\u7d22\u4e8b\u4ef6\uff0c\u6b64\u4e8b\u4ef6\u53ea\u6709\u5728\u8fc7\u6ee4\u5668\u6709\u641c\u7d22\u6761\u4ef6\u65f6\u624d\u4f1a\u89e6\u53d1 $grid->listen(Grid\\Events\\ApplyFilter::class, function ($grid, array $conditions) { // $conditions \u5f53\u524d\u8fc7\u6ee4\u5668\u751f\u6210\u7684\u641c\u7d22\u6761\u4ef6\u6570\u7ec4 dd('\u8868\u683c\u8fc7\u6ee4\u5668', $conditions); });","title":"ApplyFilter"},{"location":"2.x/model-grid-events/#applyquicksearch","text":"\u76d1\u542c\u8868\u683c\u5feb\u6377\u641c\u7d22\u4e8b\u4ef6\uff0c\u6b64\u4e8b\u4ef6\u53ea\u6709\u5728\u5feb\u6377\u641c\u7d22\u8f93\u5165\u6846\u6709\u503c\u65f6\u624d\u4f1a\u89e6\u53d1 $grid->listen(Grid\\Events\\ApplyQuickSearch::class, function ($grid, $input) { // $input \u641c\u7d22\u5173\u952e\u5b57 dd('\u8868\u683c\u5feb\u6377\u641c\u7d22', $input); });","title":"ApplyQuickSearch"},{"location":"2.x/model-grid-events/#applyselector","text":"\u76d1\u542c\u8868\u683c\u89c4\u683c\u7b5b\u9009\u5668\u4e8b\u4ef6\uff0c\u6b64\u4e8b\u4ef6\u53ea\u6709\u5728\u89c4\u683c\u7b5b\u9009\u5668\u9009\u4e2d\u9009\u9879\u65f6\u624d\u4f1a\u89e6\u53d1 $grid->listen(Grid\\Events\\ApplySelector::class, function ($grid, array $input) { // $input \u7b5b\u9009\u5668\u9009\u4e2d\u7684\u9009\u9879\u6570\u7ec4 dd('\u8868\u683c\u89c4\u683c\u7b5b\u9009\u5668', $input); });","title":"ApplySelector"},{"location":"2.x/model-grid-events/#rows","text":"\u901a\u8fc7 Grid::rows \u65b9\u6cd5\u53ef\u4ee5\u76d1\u542c\u8868\u683c\u83b7\u53d6\u6570\u636e\u4e4b\u540e\u4e8b\u4ef6\u3002 use Dcat\\Admin\\Grid\\Row; use Illuminate\\Support\\Collection; $grid->rows(function (Collection $rows) { /** * \u83b7\u53d6\u7b2c\u4e00\u884c\u6570\u636e * * @var Row $firstRow */ $firstRow = $rows->first(); // \u8bbe\u7f6e tr html\u5c5e\u6027 $firstRow->setAttributes(['name' => '....']); if ($firstRow) { // \u83b7\u53d6\u7b2c\u4e00\u884c\u7684 id $id = $firstRow->id; // \u8f6c\u5316\u4e3a\u6570\u7ec4 $row = $firstRow->toArray(); } });","title":"rows\u56de\u8c03"},{"location":"2.x/model-grid-export/","text":"\u6570\u636e\u5bfc\u51fa \u7cfb\u7edf\u9ed8\u8ba4\u4f7f\u7528 Easy Excel \u4f5c\u4e3a\u5bfc\u51fa\u5de5\u5177\uff0c\u652f\u6301\u5bfc\u51fa csv \u3001 xlsx \u548c ods \u7b49\u683c\u5f0f\u6587\u4ef6\u3002 \u4f7f\u7528\u524d\u5fc5\u987b\u5148\u5b89\u88c5 Easy Excel \uff1a composer require dcat/easy-excel {tip} \u9ed8\u8ba4\u4e0d\u5f00\u542f\u5bfc\u51fa\u529f\u80fd\u3002 \u542f\u7528\u5bfc\u51fa\u529f\u80fd \u542f\u7528\u6216\u7981\u7528\u5bfc\u51fa\u529f\u80fd $grid->export(); \u7981\u7528 \u5bfc\u51fa\u6240\u6709 \u9009\u9879 $grid->export()->disableExportAll(); \u7981\u7528 \u5bfc\u51fa\u9009\u4e2d\u884c \u9009\u9879 $grid->export()->disableExportSelectedRow(); \u7981\u7528 \u5bfc\u51fa\u5f53\u524d\u9875 \u9009\u9879 $grid->export()->disableExportCurrentPage(); \u5bfc\u51fa\u6587\u4ef6\u7c7b\u578b {tip} \u9ed8\u8ba4\u5bfc\u51fa xlsx \u683c\u5f0f\u6587\u4ef6\u3002 // csv $grid->export()->csv(); // xlsx $grid->export()->xlsx(); // ods $grid->export()->ods(); \u8bbe\u7f6e\u5217\u6807\u9898 {tip} \u5982\u679c\u8bbe\u7f6e\u4e86\u6807\u9898\uff0c\u90a3\u4e48\u5bfc\u51fa\u7684\u6587\u4ef6\u7684 \u5217\u6570 \u4e0e\u6807\u9898\u7684 \u5217\u6570 \u76f8\u540c\uff0c\u4e14\u5217\u7684 \u6392\u5e8f \u4e5f\u76f8\u540c\u3002 // \u53ea\u5bfc\u51fa id, name\u548cemail \u4e09\u5217\u6570\u636e $titles = ['id' => 'ID', 'name' => '\u540d\u79f0', 'email' => '\u90ae\u7bb1']; $grid->export($titles); // \u4e5f\u53ef\u4ee5\u8fd9\u4e48\u4f7f\u7528 $grid->export()->titles($titles); \u5904\u7406\u5bfc\u51fa\u6570\u636e $grid->export()->rows(function (array $rows) { foreach ($rows as $index => &$row) { $row['name'] = $row['first_name'].' '.$row['last_name']; } return $rows; }); \u8bbe\u7f6e\u5bfc\u51fa\u6587\u4ef6\u540d $grid->export()->filename('\u7ba1\u7406\u5458\u6570\u636e'); \u6269\u5c55\u5bfc\u51fa\u529f\u80fd \u5982\u679c\u7cfb\u7edf\u5185\u7f6e\u7684\u5bfc\u51fa\u529f\u80fd\u4e0d\u4e86\u81ea\u5df1\u7684\u9700\u6c42\uff0c\u53ef\u4ee5\u6309\u7167\u4e0b\u9762\u7684\u6b65\u9aa4\u6765\u81ea\u5b9a\u4e49\u5bfc\u51fa\u529f\u80fd \u672c\u793a\u4f8b\u7528 Laravel-Excel \u4f5c\u4e3aexcel\u64cd\u4f5c\u5e93\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u5176\u4ed6excel\u5e93 \u9996\u5148\u5b89\u88c5\u597d\u5b83\uff1a composer require maatwebsite/excel:~2.1.0 php artisan vendor:publish --provider=\"Maatwebsite\\Excel\\ExcelServiceProvider\" \u7136\u540e\u65b0\u5efa\u81ea\u5b9a\u4e49\u5bfc\u51fa\u7c7b\uff0c\u6bd4\u5982 app/Admin/Extensions/ExcelExpoter.php : <?php namespace App\\Admin\\Extensions; use Dcat\\Admin\\Grid\\Exporters\\AbstractExporter; use Maatwebsite\\Excel\\Facades\\Excel; class ExcelExpoter extends AbstractExporter { public function export() { Excel::create('Filename', function($excel) { $excel->sheet('Sheetname', function($sheet) { // \u6700\u591a\u5bfc\u51fa10W\u6761\u6570\u636e // \u5fc5\u987b\u8bbe\u7f6emaxSize\uff0c\u5f53\u5426\u5219\u9009\u62e9\u5bfc\u51fa\u6240\u6709\u9009\u9879\u65f6\u53ea\u80fd\u5bfc\u51fa\u9ed8\u8ba4\u768420\u6761\u6570\u636e\u3002 $maxSize = 10000; // \u8fd9\u6bb5\u903b\u8f91\u662f\u4ece\u8868\u683c\u6570\u636e\u4e2d\u53d6\u51fa\u9700\u8981\u5bfc\u51fa\u7684\u5b57\u6bb5 $rows = collect($this->buildData(1, $maxSize))->map(function ($item) { return array_only($item, ['id', 'title', 'content', 'rate', 'keywords']); }); $sheet->rows($rows); }); })->export('xls'); } } \u7136\u540e\u5728 model-grid \u4e2d\u4f7f\u7528\u8fd9\u4e2a\u5bfc\u51fa\u7c7b\uff1a use App\\Admin\\Extensions\\ExcelExpoter; $grid->export(new ExcelExpoter()); \u6709\u5173\u66f4\u591a Laravel-Excel \u7684\u4f7f\u7528\u65b9\u6cd5\uff0c\u53c2\u8003 laravel-excel/docs","title":"\u6570\u636e\u5bfc\u51fa"},{"location":"2.x/model-grid-export/#_1","text":"\u7cfb\u7edf\u9ed8\u8ba4\u4f7f\u7528 Easy Excel \u4f5c\u4e3a\u5bfc\u51fa\u5de5\u5177\uff0c\u652f\u6301\u5bfc\u51fa csv \u3001 xlsx \u548c ods \u7b49\u683c\u5f0f\u6587\u4ef6\u3002 \u4f7f\u7528\u524d\u5fc5\u987b\u5148\u5b89\u88c5 Easy Excel \uff1a composer require dcat/easy-excel {tip} \u9ed8\u8ba4\u4e0d\u5f00\u542f\u5bfc\u51fa\u529f\u80fd\u3002","title":"\u6570\u636e\u5bfc\u51fa"},{"location":"2.x/model-grid-export/#_2","text":"\u542f\u7528\u6216\u7981\u7528\u5bfc\u51fa\u529f\u80fd $grid->export(); \u7981\u7528 \u5bfc\u51fa\u6240\u6709 \u9009\u9879 $grid->export()->disableExportAll(); \u7981\u7528 \u5bfc\u51fa\u9009\u4e2d\u884c \u9009\u9879 $grid->export()->disableExportSelectedRow(); \u7981\u7528 \u5bfc\u51fa\u5f53\u524d\u9875 \u9009\u9879 $grid->export()->disableExportCurrentPage();","title":"\u542f\u7528\u5bfc\u51fa\u529f\u80fd"},{"location":"2.x/model-grid-export/#_3","text":"{tip} \u9ed8\u8ba4\u5bfc\u51fa xlsx \u683c\u5f0f\u6587\u4ef6\u3002 // csv $grid->export()->csv(); // xlsx $grid->export()->xlsx(); // ods $grid->export()->ods();","title":"\u5bfc\u51fa\u6587\u4ef6\u7c7b\u578b"},{"location":"2.x/model-grid-export/#_4","text":"{tip} \u5982\u679c\u8bbe\u7f6e\u4e86\u6807\u9898\uff0c\u90a3\u4e48\u5bfc\u51fa\u7684\u6587\u4ef6\u7684 \u5217\u6570 \u4e0e\u6807\u9898\u7684 \u5217\u6570 \u76f8\u540c\uff0c\u4e14\u5217\u7684 \u6392\u5e8f \u4e5f\u76f8\u540c\u3002 // \u53ea\u5bfc\u51fa id, name\u548cemail \u4e09\u5217\u6570\u636e $titles = ['id' => 'ID', 'name' => '\u540d\u79f0', 'email' => '\u90ae\u7bb1']; $grid->export($titles); // \u4e5f\u53ef\u4ee5\u8fd9\u4e48\u4f7f\u7528 $grid->export()->titles($titles);","title":"\u8bbe\u7f6e\u5217\u6807\u9898"},{"location":"2.x/model-grid-export/#_5","text":"$grid->export()->rows(function (array $rows) { foreach ($rows as $index => &$row) { $row['name'] = $row['first_name'].' '.$row['last_name']; } return $rows; });","title":"\u5904\u7406\u5bfc\u51fa\u6570\u636e"},{"location":"2.x/model-grid-export/#_6","text":"$grid->export()->filename('\u7ba1\u7406\u5458\u6570\u636e');","title":"\u8bbe\u7f6e\u5bfc\u51fa\u6587\u4ef6\u540d"},{"location":"2.x/model-grid-export/#_7","text":"\u5982\u679c\u7cfb\u7edf\u5185\u7f6e\u7684\u5bfc\u51fa\u529f\u80fd\u4e0d\u4e86\u81ea\u5df1\u7684\u9700\u6c42\uff0c\u53ef\u4ee5\u6309\u7167\u4e0b\u9762\u7684\u6b65\u9aa4\u6765\u81ea\u5b9a\u4e49\u5bfc\u51fa\u529f\u80fd \u672c\u793a\u4f8b\u7528 Laravel-Excel \u4f5c\u4e3aexcel\u64cd\u4f5c\u5e93\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u5176\u4ed6excel\u5e93 \u9996\u5148\u5b89\u88c5\u597d\u5b83\uff1a composer require maatwebsite/excel:~2.1.0 php artisan vendor:publish --provider=\"Maatwebsite\\Excel\\ExcelServiceProvider\" \u7136\u540e\u65b0\u5efa\u81ea\u5b9a\u4e49\u5bfc\u51fa\u7c7b\uff0c\u6bd4\u5982 app/Admin/Extensions/ExcelExpoter.php : <?php namespace App\\Admin\\Extensions; use Dcat\\Admin\\Grid\\Exporters\\AbstractExporter; use Maatwebsite\\Excel\\Facades\\Excel; class ExcelExpoter extends AbstractExporter { public function export() { Excel::create('Filename', function($excel) { $excel->sheet('Sheetname', function($sheet) { // \u6700\u591a\u5bfc\u51fa10W\u6761\u6570\u636e // \u5fc5\u987b\u8bbe\u7f6emaxSize\uff0c\u5f53\u5426\u5219\u9009\u62e9\u5bfc\u51fa\u6240\u6709\u9009\u9879\u65f6\u53ea\u80fd\u5bfc\u51fa\u9ed8\u8ba4\u768420\u6761\u6570\u636e\u3002 $maxSize = 10000; // \u8fd9\u6bb5\u903b\u8f91\u662f\u4ece\u8868\u683c\u6570\u636e\u4e2d\u53d6\u51fa\u9700\u8981\u5bfc\u51fa\u7684\u5b57\u6bb5 $rows = collect($this->buildData(1, $maxSize))->map(function ($item) { return array_only($item, ['id', 'title', 'content', 'rate', 'keywords']); }); $sheet->rows($rows); }); })->export('xls'); } } \u7136\u540e\u5728 model-grid \u4e2d\u4f7f\u7528\u8fd9\u4e2a\u5bfc\u51fa\u7c7b\uff1a use App\\Admin\\Extensions\\ExcelExpoter; $grid->export(new ExcelExpoter()); \u6709\u5173\u66f4\u591a Laravel-Excel \u7684\u4f7f\u7528\u65b9\u6cd5\uff0c\u53c2\u8003 laravel-excel/docs","title":"\u6269\u5c55\u5bfc\u51fa\u529f\u80fd"},{"location":"2.x/model-grid-exporter/","text":"\u81ea\u5b9a\u4e49\u5bfc\u51fa dcat-admin\u7684\u6570\u636e\u8868\u683c\u9ed8\u8ba4\u652f\u6301\u5bfc\u51facsv\u6587\u4ef6\uff0c <?php namespace App\\Admin\\Extensions; use Dcat\\Admin\\Grid\\Exporters\\AbstractExporter; class CustomExporter extends AbstractExporter { public function export() { $filename = $this->getTable().'.csv'; $data = $this->getData(); $output = ''; $headers = [ 'Content-Encoding' => 'UTF-8', 'Content-Type' => 'text/csv;charset=UTF-8', 'Content-Disposition' => \"attachment; filename=\\\"$filename\\\"\", ]; response(rtrim($output, \"\\n\"), 200, $headers)->send(); exit; } }","title":"\u81ea\u5b9a\u4e49\u5bfc\u51fa"},{"location":"2.x/model-grid-exporter/#_1","text":"dcat-admin\u7684\u6570\u636e\u8868\u683c\u9ed8\u8ba4\u652f\u6301\u5bfc\u51facsv\u6587\u4ef6\uff0c <?php namespace App\\Admin\\Extensions; use Dcat\\Admin\\Grid\\Exporters\\AbstractExporter; class CustomExporter extends AbstractExporter { public function export() { $filename = $this->getTable().'.csv'; $data = $this->getData(); $output = ''; $headers = [ 'Content-Encoding' => 'UTF-8', 'Content-Type' => 'text/csv;charset=UTF-8', 'Content-Disposition' => \"attachment; filename=\\\"$filename\\\"\", ]; response(rtrim($output, \"\\n\"), 200, $headers)->send(); exit; } }","title":"\u81ea\u5b9a\u4e49\u5bfc\u51fa"},{"location":"2.x/model-grid-filters/","text":"\u67e5\u8be2\u8fc7\u6ee4 model-grid \u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u7684\u65b9\u6cd5\u5b9e\u73b0\u8868\u683c\u6570\u636e\u7684\u67e5\u8be2\u8fc7\u6ee4\uff1a // \u7981\u7528 $grid->disableFilter(); // \u663e\u793a $grid->showFilter(); // \u7981\u7528\u8fc7\u6ee4\u5668\u6309\u94ae $grid->disableFilterButton(); // \u663e\u793a\u8fc7\u6ee4\u5668\u6309\u94ae $grid->showFilterButton(); $grid->filter(function($filter){ // \u5c55\u5f00\u8fc7\u6ee4\u5668 $filter->expand(); // \u5728\u8fd9\u91cc\u6dfb\u52a0\u5b57\u6bb5\u8fc7\u6ee4\u5668 $filter->equal('id', '\u4ea7\u54c1\u5e8f\u5217\u53f7'); $filter->like('name', 'name'); ... }); \u8fc7\u6ee4\u5668\u5e03\u5c40 \u9ed8\u8ba4\u5e03\u5c40\u65b9\u5f0f\u4e3a rightSide rightSide use Dcat\\Admin\\Grid; $grid->filter(function (Grid\\Filter $filter) { // \u66f4\u6539\u4e3a rightSide \u5e03\u5c40 $filter->rightSide(); ... }); \u6548\u679c panel use Dcat\\Admin\\Grid; $grid->filter(function (Grid\\Filter $filter) { // \u66f4\u6539\u4e3a panel \u5e03\u5c40 $filter->panel(); // \u6ce8\u610f\u5207\u6362\u4e3apanel\u5e03\u5c40\u65b9\u5f0f\u65f6\u9700\u8981\u91cd\u65b0\u8c03\u6574\u8868\u5355\u5b57\u6bb5\u7684\u5bbd\u5ea6 $filter->equal('id')->width(3); }); \u6548\u679c \u81ea\u5b9a\u4e49\u5e03\u5c40 (view) \u5982\u679c\u4ee5\u4e0a\u7684\u5e03\u5c40\u65e0\u6cd5\u6ee1\u8db3\u9700\u6c42\uff0c\u53ef\u4ee5\u901a\u8fc7 view \u65b9\u6cd5\u81ea\u5b9a\u4e49\u8fc7\u6ee4\u5668\u6a21\u677f $grid->filter(function ($filter) { $filter->view('xxx'); ... }); \u67e5\u8be2\u7c7b\u578b \u76ee\u524d\u652f\u6301\u7684\u8fc7\u6ee4\u7c7b\u578b\u6709\u4e0b\u9762\u8fd9\u4e9b: equal sql: ... WHERE column = \"$input\" \uff1a $filter->equal('column', $label); notEqual sql: ... WHERE column != \"$input\" \uff1a $filter->notEqual('column', $label); like sql: ... WHERE column LIKE \"%$input%\" \uff1a $filter->like('column', $label); ilike sql: ... WHERE column ILIKE \"%$input%\" \uff1a $filter->ilike('column', $label); startWith sql: ... WHERE column LIKE \"$input%\" \uff1a $filter->startWith('column', $label); // \u5982\u679c\u9700\u8981\u4f7f\u7528\u201cilike\u201d $filter->startWith('column', $label)->ilike(); endWith sql: ... WHERE column LIKE \"%$input\" \uff1a $filter->endWith('column', $label); // \u5982\u679c\u9700\u8981\u4f7f\u7528\u201cilike\u201d $filter->endWith('column', $label)->ilike(); gt sql: ... WHERE column > \"$input\" \uff1a $filter->gt('column', $label); lt sql: ... WHERE column < \"$input\" \uff1a $filter->lt('column', $label); ngt sql: ... WHERE column <= \"$input\" \uff1a $filter->ngt('column', $label); nlt sql: ... WHERE column >= \"$input\" \uff1a $filter->nlt('column', $label); between sql: ... WHERE column BETWEEN \"$start\" AND \"$end\" \uff1a $filter->between('column', $label); // \u8bbe\u7f6edatetime\u7c7b\u578b $filter->between('column', $label)->datetime(); // \u8bbe\u7f6etime\u7c7b\u578b $filter->between('column', $label)->time(); in sql: ... WHERE column in (...$inputs) \uff1a $filter->in('column', $label)->multipleSelect(['key' => 'value']); notIn sql: ... WHERE column not in (...$inputs) \uff1a $filter->notIn('column', $label)->multipleSelect(['key' => 'value']); date sql: ... WHERE DATE( column ) = \"$input\" \uff1a $filter->date('column', $label); day sql: ... WHERE DAY( column ) = \"$input\" \uff1a $filter->day('column', $label); month sql: ... WHERE MONTH( column ) = \"$input\" \uff1a $filter->month('column', $label); year sql: ... WHERE YEAR( column ) = \"$input\" \uff1a $filter->year('column', $label); findInSet sql: ... WHERE FIND_IN_SET(\"$input\", $column) \uff1a $filter->findInSet('column', $label); \u590d\u6742\u67e5\u8be2where \u53ef\u4ee5\u7528where\u6765\u6784\u5efa\u6bd4\u8f83\u590d\u6742\u7684\u67e5\u8be2\u8fc7\u6ee4 sql: ... WHERE title LIKE \"%$input\" OR content LIKE \"%$input\" \uff1a $filter->where('search', function ($query) { $query->where('title', 'like', \"%{$this->input}%\") ->orWhere('content', 'like', \"%{$this->input}%\"); }); sql: ... WHERE rate >= 6 AND created_at = {$input} : $filter->where('Text', function ($query) { $query->whereRaw(\"`rate` >= 6 AND `created_at` = {$this->input}\"); }); \u5173\u7cfb\u67e5\u8be2\uff0c\u67e5\u8be2\u5bf9\u5e94\u5173\u7cfb profile \u7684\u5b57\u6bb5\uff1a $filter->where('mobile', function ($query) { $query->whereHas('profile', function ($query) { $query->where('address', 'like', \"%{$this->input}%\")->orWhere('email', 'like', \"%{$this->input}%\"); }); }, '\u5730\u5740\u6216\u624b\u673a\u53f7'); \u590d\u6742\u8303\u56f4\u67e5\u8be2whereBetween \u901a\u8fc7 whereBetween \u53ef\u4ee5\u81ea\u5b9a\u4e49\u8303\u56f4\u67e5\u8be2 $filter->whereBetween('created_at', function ($q) { $start = $this->input['start'] ?? null; $end = $this->input['end'] ?? null; $q->whereHas('goods', function ($q) use ($start) { if ($start !== null) { $q->where('price', '>=', $start); } if ($end !== null) { $q->where('price', '<=', $end); } }); }); \u540c\u65f6\u8fd9\u4e2a\u65b9\u6cd5\u4e5f\u652f\u6301\u65f6\u95f4\u65e5\u671f\u8303\u56f4\u67e5\u8be2 $filter->whereBetween('created_at', function ($q) { ... })->datetime(); \u8fc7\u6ee4\u5668\u7ec4group \u6709\u65f6\u5019\u5bf9\u540c\u4e00\u4e2a\u5b57\u6bb5\u8981\u8bbe\u7f6e\u591a\u79cd\u7b5b\u9009\u65b9\u5f0f\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u5f0f\u5b9e\u73b0 $filter->group('rate', function ($group) { $group->gt('\u5927\u4e8e'); $group->lt('\u5c0f\u4e8e'); $group->nlt('\u4e0d\u5c0f\u4e8e'); $group->ngt('\u4e0d\u5927\u4e8e'); $group->equal('\u7b49\u4e8e'); }); \u6709\u4e0b\u9762\u7684\u51e0\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u8c03\u7528 // \u7b49\u4e8e $group->equal(); // \u4e0d\u7b49\u4e8e $group->notEqual(); // \u5927\u4e8e $group->gt(); // \u5c0f\u4e8e $group->lt(); // \u5927\u4e8e\u7b49\u4e8e $group->nlt(); // \u5c0f\u4e8e\u7b49\u4e8e $group->ngt(); // \u5339\u914d $group->match(); // \u590d\u6742\u6761\u4ef6 $group->where(); // like\u67e5\u8be2 $group->like(); // like\u67e5\u8be2 $group->contains(); // ilike\u67e5\u8be2 $group->ilike(); // \u4ee5\u8f93\u5165\u7684\u5185\u5bb9\u5f00\u5934 $group->startWith(); // \u4ee5\u8f93\u5165\u7684\u5185\u5bb9\u7ed3\u5c3e $group->endWith(); \u8303\u56f4\u67e5\u8be2scope \u53ef\u4ee5\u628a\u4f60\u6700\u5e38\u7528\u7684\u67e5\u8be2\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u67e5\u8be2\u8303\u56f4\uff0c\u5b83\u5c06\u4f1a\u51fa\u73b0\u5728\u7b5b\u9009\u6309\u94ae\u7684\u4e0b\u62c9\u83dc\u5355\u4e2d\uff0c\u4e0b\u9762\u662f\u51e0\u4e2a\u4f8b\u5b50\uff1a $filter->scope('male', '\u7537\u6027')->where('gender', 'm'); // \u591a\u6761\u4ef6\u67e5\u8be2 $filter->scope('new', '\u6700\u8fd1\u4fee\u6539') ->whereDate('created_at', date('Y-m-d')) ->orWhere('updated_at', date('Y-m-d')); // \u5173\u8054\u5173\u7cfb\u67e5\u8be2 $filter->scope('address')->whereHas('profile', function ($query) { $query->whereNotNull('address'); }); $filter->scope('trashed', '\u88ab\u8f6f\u5220\u9664\u7684\u6570\u636e')->onlyTrashed(); scope\u65b9\u6cd5\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u67e5\u8be2\u7684key, \u4f1a\u51fa\u73b0\u7684url\u53c2\u6570\u4e2d\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e0b\u62c9\u83dc\u5355\u9879\u7684label, \u5982\u679c\u4e0d\u586b\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f1a\u4f5c\u4e3alabel\u663e\u793a scope\u65b9\u6cd5\u53ef\u4ee5\u94fe\u5f0f\u8c03\u7528\u4efb\u4f55eloquent\u67e5\u8be2\u6761\u4ef6\uff0c\u6548\u679c\u53c2\u8003Demo \u8868\u5355\u7c7b\u578b text \u8868\u5355\u7c7b\u578b\u9ed8\u8ba4\u662f text input \uff0c\u53ef\u4ee5\u8bbe\u7f6e placeholder \uff1a $filter->equal('column')->placeholder('\u8bf7\u8f93\u5165\u3002\u3002\u3002'); \u4e5f\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u4e00\u4e9b\u65b9\u6cd5\u6765\u9650\u5236\u7528\u6237\u8f93\u5165\u683c\u5f0f\uff1a $filter->equal('column')->url(); $filter->equal('column')->email(); $filter->equal('column')->integer(); $filter->equal('column')->ip(); $filter->equal('column')->mac(); $filter->equal('column')->mobile(); // $options \u53c2\u8003 https://github.com/RobinHerbots/Inputmask/blob/4.x/README_numeric.md $filter->equal('column')->decimal($options = []); // $options \u53c2\u8003 https://github.com/RobinHerbots/Inputmask/blob/4.x/README_numeric.md $filter->equal('column')->currency($options = []); // $options \u53c2\u8003 https://github.com/RobinHerbots/Inputmask/blob/4.x/README_numeric.md $filter->equal('column')->percentage($options = []); // $options \u53c2\u8003 https://github.com/RobinHerbots/Inputmask, $icon\u4e3ainput\u524d\u9762\u7684\u56fe\u6807 $filter->equal('column')->inputmask($options = [], $icon = 'pencil'); \u8868\u683c\u9009\u62e9\u5668 (selectTable) use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Models\\Administrator; $filter->equal('user_id') ->selectTable(UserTable::make(['id' => ...])) // \u8bbe\u7f6e\u6e32\u67d3\u7c7b\u5b9e\u4f8b\uff0c\u5e76\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 ->title('\u5f39\u7a97\u6807\u9898') ->dialogWidth('50%') // \u5f39\u7a97\u5bbd\u5ea6\uff0c\u9ed8\u8ba4 800px ->model(Administrator::class, 'id', 'name'); // \u8bbe\u7f6e\u7f16\u8f91\u6570\u636e\u663e\u793a // \u4e0a\u9762\u7684\u4ee3\u7801\u7b49\u540c\u4e8e $filter->equal('user_id') ->selectTable(UserTable::make(['id' => ...])) // \u8bbe\u7f6e\u6e32\u67d3\u7c7b\u5b9e\u4f8b\uff0c\u5e76\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 ->options(function ($v) { // \u8bbe\u7f6e\u7f16\u8f91\u6570\u636e\u663e\u793a if (! $v) { return []; } return Administrator::find($v)->pluck('name', 'id'); }); \u5b9a\u4e49\u6e32\u67d3\u7c7b\u5982\u4e0b\uff0c\u9700\u8981\u7ee7\u627f Dcat\\Admin\\Grid\\LazyRenderable {tip} \u8fd9\u91cc\u4f7f\u7528\u4e86\u6570\u636e\u8868\u683c\u5f02\u6b65\u52a0\u8f7d\u529f\u80fd\uff0c\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003 \u5f02\u6b65\u52a0\u8f7d <?php namespace App\\Admin\\Renderable; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Grid\\LazyRenderable; use Dcat\\Admin\\Models\\Administrator; class UserTable extends LazyRenderable { public function grid(): Grid { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u7684\u53c2\u6570 $id = $this->id; return Grid::make(new Administrator(), function (Grid $grid) { $grid->column('id'); $grid->column('username'); $grid->column('name'); $grid->column('created_at'); $grid->column('updated_at'); // \u6307\u5b9a\u884c\u9009\u62e9\u5668\u9009\u4e2d\u65f6\u663e\u793a\u7684\u503c\u7684\u5b57\u6bb5\u540d\u79f0 // \u6307\u5b9a\u884c\u9009\u62e9\u5668\u9009\u4e2d\u65f6\u663e\u793a\u7684\u503c\u7684\u5b57\u6bb5\u540d\u79f0 // \u6307\u5b9a\u884c\u9009\u62e9\u5668\u9009\u4e2d\u65f6\u663e\u793a\u7684\u503c\u7684\u5b57\u6bb5\u540d\u79f0 // \u5982\u679c\u8868\u683c\u6570\u636e\u4e2d\u5e26\u6709 \u201cname\u201d\u3001\u201ctitle\u201d\u6216\u201cusername\u201d\u5b57\u6bb5\uff0c\u5219\u53ef\u4ee5\u4e0d\u7528\u8bbe\u7f6e $grid->rowSelector()->titleColumn('username'); $grid->quickSearch(['id', 'username', 'name']); $grid->paginate(10); $grid->disableActions(); $grid->filter(function (Grid\\Filter $filter) { $filter->like('username')->width(4); $filter->like('name')->width(4); }); }); } } \u591a\u9009 (multipleSelectTable) \u591a\u9009\u7684\u7528\u6cd5\u4e0e\u4e0a\u8ff0 selectTable \u65b9\u6cd5\u4e00\u81f4 $filter->in('user_id') ->multipleSelectTable(UserTable::make(['id' => $form->getKey()])) // \u8bbe\u7f6e\u6e32\u67d3\u7c7b\u5b9e\u4f8b\uff0c\u5e76\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 ->max(10) // \u6700\u591a\u9009\u62e9 10 \u4e2a\u9009\u9879\uff0c\u4e0d\u4f20\u5219\u4e0d\u9650\u5236 ->model(Administrator::class, 'id', 'name'); // \u8bbe\u7f6e\u7f16\u8f91\u6570\u636e\u663e\u793a select $filter->equal('column')->select(['key' => 'value'...]); // \u6216\u8005\u4eceapi\u83b7\u53d6\u6570\u636e\uff0capi\u7684\u683c\u5f0f\u53c2\u8003model-form\u7684select\u7ec4\u4ef6 $filter->equal('column')->select('api/users'); multipleSelect \u4e00\u822c\u7528\u6765\u914d\u5408 in \u548c notIn \u4e24\u4e2a\u9700\u8981\u67e5\u8be2\u6570\u7ec4\u7684\u67e5\u8be2\u7c7b\u578b\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u5728 where \u7c7b\u578b\u7684\u67e5\u8be2\u4e2d\u4f7f\u7528\uff1a $filter->in('column')->multipleSelect(['key' => 'value'...]); // \u6216\u8005\u4eceapi\u83b7\u53d6\u6570\u636e\uff0capi\u7684\u683c\u5f0f\u53c2\u8003model-form\u7684multipleSelect\u7ec4\u4ef6 $filter->in('column')->multipleSelect('api/users'); datetime \u901a\u8fc7\u65e5\u671f\u65f6\u95f4\u7ec4\u4ef6\u6765\u67e5\u8be2\uff0c $options \u7684\u53c2\u6570\u548c\u503c\u53c2\u8003 bootstrap-datetimepicker $filter->equal('column')->datetime($options); // `date()` \u76f8\u5f53\u4e8e `datetime(['format' => 'YYYY-MM-DD'])` $filter->equal('column')->date(); // `time()` \u76f8\u5f53\u4e8e `datetime(['format' => 'HH:mm:ss'])` $filter->equal('column')->time(); // `day()` \u76f8\u5f53\u4e8e `datetime(['format' => 'DD'])` $filter->equal('column')->day(); // `month()` \u76f8\u5f53\u4e8e `datetime(['format' => 'MM'])` $filter->equal('column')->month(); // `year()` \u76f8\u5f53\u4e8e `datetime(['format' => 'YYYY'])` $filter->equal('column')->year(); \u5982\u679c\u4f60\u7684\u65f6\u95f4\u65e5\u671f\u5b57\u6bb5\u5728\u6570\u636e\u5e93\u4e2d\u5b58\u50a8\u7684\u662f\u65f6\u95f4\u6233\u7c7b\u578b\uff0c\u90a3\u4e48\u53ef\u4ee5\u901a\u8fc7 toTimestamp \u65b9\u6cd5\u628a\u8868\u5355\u7684\u503c\u8f6c\u5316\u4e3a\u65f6\u95f4\u6233 $filter->equal('column')->datetime($options)->toTimestamp(); \u5e38\u7528\u65b9\u6cd5 \u8fc7\u6ee4\u5668\u5bbd\u5ea6 (width) // \u8bbe\u7f6e\u4e3a\u201c1-12\u201d\u4e4b\u95f4\u7684\u503c\uff0c\u9ed8\u8ba4\u503c\u662f\u201c3\u201d $filter->equal('column')->width(3); // \u4e5f\u53ef\u4ee5\u5199\u6b7b\u5bbd\u5ea6 $filter->equal('column')->width('250px'); \u8bbe\u7f6e\u9ed8\u8ba4\u503c (default) $filter->equal('column')->default('text'); $filter->equal('column')->select([0 => 'PHP', 1 => 'Java'])->default(1); \u5c55\u5f00\u8fc7\u6ee4\u5668 (expand) $filter->expand(); $filter->equal('column'); ... \u4e0d\u663e\u793a\u8fc7\u6ee4\u5668input\u8f93\u5165\u6846\u7684\u8fb9\u6846 $filter->withoutInputBorder(); $filter->equal('column'); ... \u8bbe\u7f6e\u8fc7\u6ee4\u5668\u5bb9\u5668\u6837\u5f0f $filter->style('padding:0'); $filter->equal('column'); ... \u8bbe\u7f6e\u8fc7\u6ee4\u5668\u5bb9\u5668padding $filter->padding('10px', '10px', '10px', '10px'); $filter->equal('column'); ... \u5ffd\u7565\u7b5b\u9009\u9879 (ignore) \u901a\u8fc7 ignore \u65b9\u6cd5\u53ef\u4ee5\u5728\u63d0\u4ea4\u8868\u5355\u65f6\u5ffd\u7565\u5f53\u524d\u7b5b\u9009\u9879 $filter->equal('column')->ignore(); \u5173\u8054\u5173\u7cfb\u5b57\u6bb5\u67e5\u8be2 \u5047\u8bbe\u4f60\u7684\u6a21\u578b\u5982\u4e0b class User extends Model { public function profile() { return $this->hasOne(...); } public function myPosts() { return $this->hasMany(...); } } \u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u6cd5\u53ef\u4ee5\u67e5\u8be2 profiles \u8868\u7684 first_name \u5b57\u6bb5\u4ee5\u53ca posts \u8868\u7684 title \u5b57\u6bb5 $grid->filter(function ($filter) { $filter->like('profile.first_name'); $filter->like('myPosts.title'); }); \u5982\u679c\u5b89\u88c5\u4e86 dcat/laravel-wherehasin \uff0c\u5219\u4f1a\u4f18\u5148\u4f7f\u7528 whereHasIn \u65b9\u6cd5\u8fdb\u884c\u67e5\u8be2\u64cd\u4f5c \u81ea\u5b9a\u4e49\u8fc7\u6ee4\u5668 \u4e0b\u9762\u901a\u8fc7 between \u7684\u5b9e\u73b0\u6765\u8bb2\u89e3\u4e0b\u600e\u4e48\u81ea\u5b9a\u4e49\u8fc7\u6ee4\u5668\u3002 \u9996\u5148\u65b0\u5efa\u4e00\u4e2a\u8fc7\u6ee4\u5668\u7c7b\u7ee7\u627f Dcat\\Admin\\Grid\\Filter\\AbstractFilter \uff1a <?php namespace Dcat\\Admin\\Grid\\Filter; use Dcat\\Admin\\Admin; use Dcat\\Admin\\Grid\\Filter\\Presenter\\DateTime; use Illuminate\\Support\\Arr; class Between extends AbstractFilter { // \u81ea\u5b9a\u4e49\u4f60\u7684\u8fc7\u6ee4\u5668\u663e\u793a\u6a21\u677f protected $view = 'admin::filter.between'; // \u8fd9\u4e2a\u65b9\u6cd5\u7528\u4e8e\u751f\u6210\u8fc7\u6ee4\u5668\u5b57\u6bb5\u7684\u552f\u4e00id // \u901a\u8fc7\u8fd9\u4e2a\u552f\u4e00id\u5219\u53ef\u4ee5\u7528js\u4ee3\u7801\u5bf9\u5176\u8fdb\u884c\u64cd\u4f5c public function formatId($column) { $id = str_replace('.', '_', $column); $name = $this->parent->getGrid()->getName(); return ['start' => \"{$name}{$id}_start\", 'end' => \"{$name}{$id}_end\"]; } // form\u8868\u5355name\u5c5e\u6027\u683c\u5f0f\u5316 protected function formatName($column) { $columns = explode('.', $column); if (count($columns) == 1) { $name = $columns[0]; } else { $name = array_shift($columns); foreach ($columns as $column) { $name .= \"[$column]\"; } } return ['start' => \"{$name}[start]\", 'end' => \"{$name}[end]\"]; } // \u521b\u5efa\u6761\u4ef6 // \u8fd9\u91cc\u6784\u5efa\u7684\u6761\u4ef6\u652f\u6301`Laravel query builder`\u5373\u53ef\u3002 public function condition($inputs) { if (!Arr::has($inputs, $this->column)) { return; } $this->value = Arr::get($inputs, $this->column); $value = array_filter($this->value, function ($val) { return $val !== ''; }); if (empty($value)) { return; } if (!isset($value['start']) && isset($value['end'])) { // \u8fd9\u91cc\u8fd4\u56de\u7684\u6570\u7ec4\u76f8\u5f53\u4e8e // $query->where($this->column, '<=', $value['end']); return $this->buildCondition($this->column, '<=', $value['end']); } if (!isset($value['end']) && isset($value['start'])) { // \u8fd9\u91cc\u8fd4\u56de\u7684\u6570\u7ec4\u76f8\u5f53\u4e8e // $query->where($this->column, '>=', $value['end']); return $this->buildCondition($this->column, '>=', $value['start']); } $this->query = 'whereBetween'; // \u8fd9\u91cc\u8fd4\u56de\u7684\u6570\u7ec4\u76f8\u5f53\u4e8e // $query->whereBetween($this->column, $value['end']); return $this->buildCondition($this->column, $this->value); } // \u81ea\u5b9a\u4e49\u8fc7\u6ee4\u5668\u8868\u5355\u663e\u793a\u65b9\u5f0f public function datetime($options = []) { $this->view = 'admin::filter.betweenDatetime'; DateTime::collectAssets(); $this->setupDatetime($options); return $this; } protected function setupDatetime($options = []) { $options['format'] = Arr::get($options, 'format', 'YYYY-MM-DD HH:mm:ss'); $options['locale'] = Arr::get($options, 'locale', config('app.locale')); $startOptions = json_encode($options); $endOptions = json_encode($options + ['useCurrent' => false]); // \u901a\u8fc7\u4e0a\u9762\u683c\u5f0f\u5316\u540e\u7684id\u5bf9\u8868\u5355\u8fdb\u884c\u4f60\u60f3\u8981\u7684\u64cd\u4f5c $script = <<<JS $('#{$this->id['start']}').datetimepicker($startOptions); $('#{$this->id['end']}').datetimepicker($endOptions); $(\"#{$this->id['start']}\").on(\"dp.change\", function (e) { $('#{$this->id['end']}').data(\"DateTimePicker\").minDate(e.date); }); $(\"#{$this->id['end']}\").on(\"dp.change\", function (e) { $('#{$this->id['start']}').data(\"DateTimePicker\").maxDate(e.date); }); JS; Admin::script($script); } } admin::filter.between \u6a21\u677f\u5185\u5bb9\u5982\u4e0b\uff1a <div class=\"filter-input col-sm-{{ $width }} \" style=\"{!! $style !!}\"> <div class=\"form-group\" > <div class=\"input-group input-group-sm\"> <span class=\"input-group-addon\"><b>{!! $label !!}</b></span> <input type=\"text\" class=\"form-control\" placeholder=\"{{$label}}\" name=\"{{$name['start']}}\" value=\"{{ request($name['start'], \\Illuminate\\Support\\Arr::get($value, 'start')) }}\"> <span class=\"input-group-addon\" style=\"border-left: 0; border-right: 0;\">To</span> <input type=\"text\" class=\"form-control\" placeholder=\"{{$label}}\" name=\"{{$name['end']}}\" value=\"{{ request($name['end'], \\Illuminate\\Support\\Arr::get($value, 'end')) }}\"> </div> </div> </div> admin::filter.betweenDatetime \u6a21\u677f\u5185\u5bb9\u5982\u4e0b\uff1a <div class=\"filter-input col-sm-{{ $width }}\" style=\"{!! $style !!}\"> <div class=\"form-group\"> <div class=\"input-group input-group-sm\"> <span class=\"input-group-addon\"><b>{{$label}}</b> &nbsp;<i class=\"fa fa-calendar\"></i></span> <input type=\"text\" class=\"form-control\" id=\"{{$id['start']}}\" placeholder=\"{{$label}}\" name=\"{{$name['start']}}\" value=\"{{ request($name['start'], \\Illuminate\\Support\\Arr::get($value, 'start')) }}\"> <span class=\"input-group-addon\" style=\"border-left: 0; border-right: 0;\">To</span> <input type=\"text\" class=\"form-control\" id=\"{{$id['end']}}\" placeholder=\"{{$label}}\" name=\"{{$name['end']}}\" value=\"{{ request($name['end'], \\Illuminate\\Support\\Arr::get($value, 'end')) }}\"> </div> </div> </div> \u73b0\u5728\u53ea\u8981\u8c03\u7528 extend \u65b9\u6cd5\u53ef\u4ee5\u4f7f\u7528\u4e86\uff0c\u6253\u5f00 app/Admin/bootstrap.php \uff0c\u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801\uff1a Filter::extend('customBetween', Filter\\Between::class); \u4f7f\u7528\uff1a $filter->customBetween('created_at')->datetime();","title":"\u67e5\u8be2\u8fc7\u6ee4"},{"location":"2.x/model-grid-filters/#_1","text":"model-grid \u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u7684\u65b9\u6cd5\u5b9e\u73b0\u8868\u683c\u6570\u636e\u7684\u67e5\u8be2\u8fc7\u6ee4\uff1a // \u7981\u7528 $grid->disableFilter(); // \u663e\u793a $grid->showFilter(); // \u7981\u7528\u8fc7\u6ee4\u5668\u6309\u94ae $grid->disableFilterButton(); // \u663e\u793a\u8fc7\u6ee4\u5668\u6309\u94ae $grid->showFilterButton(); $grid->filter(function($filter){ // \u5c55\u5f00\u8fc7\u6ee4\u5668 $filter->expand(); // \u5728\u8fd9\u91cc\u6dfb\u52a0\u5b57\u6bb5\u8fc7\u6ee4\u5668 $filter->equal('id', '\u4ea7\u54c1\u5e8f\u5217\u53f7'); $filter->like('name', 'name'); ... });","title":"\u67e5\u8be2\u8fc7\u6ee4"},{"location":"2.x/model-grid-filters/#_2","text":"\u9ed8\u8ba4\u5e03\u5c40\u65b9\u5f0f\u4e3a rightSide","title":"\u8fc7\u6ee4\u5668\u5e03\u5c40"},{"location":"2.x/model-grid-filters/#rightside","text":"use Dcat\\Admin\\Grid; $grid->filter(function (Grid\\Filter $filter) { // \u66f4\u6539\u4e3a rightSide \u5e03\u5c40 $filter->rightSide(); ... }); \u6548\u679c","title":"rightSide"},{"location":"2.x/model-grid-filters/#panel","text":"use Dcat\\Admin\\Grid; $grid->filter(function (Grid\\Filter $filter) { // \u66f4\u6539\u4e3a panel \u5e03\u5c40 $filter->panel(); // \u6ce8\u610f\u5207\u6362\u4e3apanel\u5e03\u5c40\u65b9\u5f0f\u65f6\u9700\u8981\u91cd\u65b0\u8c03\u6574\u8868\u5355\u5b57\u6bb5\u7684\u5bbd\u5ea6 $filter->equal('id')->width(3); }); \u6548\u679c","title":"panel"},{"location":"2.x/model-grid-filters/#view","text":"\u5982\u679c\u4ee5\u4e0a\u7684\u5e03\u5c40\u65e0\u6cd5\u6ee1\u8db3\u9700\u6c42\uff0c\u53ef\u4ee5\u901a\u8fc7 view \u65b9\u6cd5\u81ea\u5b9a\u4e49\u8fc7\u6ee4\u5668\u6a21\u677f $grid->filter(function ($filter) { $filter->view('xxx'); ... });","title":"\u81ea\u5b9a\u4e49\u5e03\u5c40 (view)"},{"location":"2.x/model-grid-filters/#_3","text":"\u76ee\u524d\u652f\u6301\u7684\u8fc7\u6ee4\u7c7b\u578b\u6709\u4e0b\u9762\u8fd9\u4e9b:","title":"\u67e5\u8be2\u7c7b\u578b"},{"location":"2.x/model-grid-filters/#equal","text":"sql: ... WHERE column = \"$input\" \uff1a $filter->equal('column', $label);","title":"equal"},{"location":"2.x/model-grid-filters/#notequal","text":"sql: ... WHERE column != \"$input\" \uff1a $filter->notEqual('column', $label);","title":"notEqual"},{"location":"2.x/model-grid-filters/#like","text":"sql: ... WHERE column LIKE \"%$input%\" \uff1a $filter->like('column', $label);","title":"like"},{"location":"2.x/model-grid-filters/#ilike","text":"sql: ... WHERE column ILIKE \"%$input%\" \uff1a $filter->ilike('column', $label);","title":"ilike"},{"location":"2.x/model-grid-filters/#startwith","text":"sql: ... WHERE column LIKE \"$input%\" \uff1a $filter->startWith('column', $label); // \u5982\u679c\u9700\u8981\u4f7f\u7528\u201cilike\u201d $filter->startWith('column', $label)->ilike();","title":"startWith"},{"location":"2.x/model-grid-filters/#endwith","text":"sql: ... WHERE column LIKE \"%$input\" \uff1a $filter->endWith('column', $label); // \u5982\u679c\u9700\u8981\u4f7f\u7528\u201cilike\u201d $filter->endWith('column', $label)->ilike();","title":"endWith"},{"location":"2.x/model-grid-filters/#gt","text":"sql: ... WHERE column > \"$input\" \uff1a $filter->gt('column', $label);","title":"gt"},{"location":"2.x/model-grid-filters/#lt","text":"sql: ... WHERE column < \"$input\" \uff1a $filter->lt('column', $label);","title":"lt"},{"location":"2.x/model-grid-filters/#ngt","text":"sql: ... WHERE column <= \"$input\" \uff1a $filter->ngt('column', $label);","title":"ngt"},{"location":"2.x/model-grid-filters/#nlt","text":"sql: ... WHERE column >= \"$input\" \uff1a $filter->nlt('column', $label);","title":"nlt"},{"location":"2.x/model-grid-filters/#between","text":"sql: ... WHERE column BETWEEN \"$start\" AND \"$end\" \uff1a $filter->between('column', $label); // \u8bbe\u7f6edatetime\u7c7b\u578b $filter->between('column', $label)->datetime(); // \u8bbe\u7f6etime\u7c7b\u578b $filter->between('column', $label)->time();","title":"between"},{"location":"2.x/model-grid-filters/#in","text":"sql: ... WHERE column in (...$inputs) \uff1a $filter->in('column', $label)->multipleSelect(['key' => 'value']);","title":"in"},{"location":"2.x/model-grid-filters/#notin","text":"sql: ... WHERE column not in (...$inputs) \uff1a $filter->notIn('column', $label)->multipleSelect(['key' => 'value']);","title":"notIn"},{"location":"2.x/model-grid-filters/#date","text":"sql: ... WHERE DATE( column ) = \"$input\" \uff1a $filter->date('column', $label);","title":"date"},{"location":"2.x/model-grid-filters/#day","text":"sql: ... WHERE DAY( column ) = \"$input\" \uff1a $filter->day('column', $label);","title":"day"},{"location":"2.x/model-grid-filters/#month","text":"sql: ... WHERE MONTH( column ) = \"$input\" \uff1a $filter->month('column', $label);","title":"month"},{"location":"2.x/model-grid-filters/#year","text":"sql: ... WHERE YEAR( column ) = \"$input\" \uff1a $filter->year('column', $label);","title":"year"},{"location":"2.x/model-grid-filters/#findinset","text":"sql: ... WHERE FIND_IN_SET(\"$input\", $column) \uff1a $filter->findInSet('column', $label);","title":"findInSet"},{"location":"2.x/model-grid-filters/#where","text":"\u53ef\u4ee5\u7528where\u6765\u6784\u5efa\u6bd4\u8f83\u590d\u6742\u7684\u67e5\u8be2\u8fc7\u6ee4 sql: ... WHERE title LIKE \"%$input\" OR content LIKE \"%$input\" \uff1a $filter->where('search', function ($query) { $query->where('title', 'like', \"%{$this->input}%\") ->orWhere('content', 'like', \"%{$this->input}%\"); }); sql: ... WHERE rate >= 6 AND created_at = {$input} : $filter->where('Text', function ($query) { $query->whereRaw(\"`rate` >= 6 AND `created_at` = {$this->input}\"); }); \u5173\u7cfb\u67e5\u8be2\uff0c\u67e5\u8be2\u5bf9\u5e94\u5173\u7cfb profile \u7684\u5b57\u6bb5\uff1a $filter->where('mobile', function ($query) { $query->whereHas('profile', function ($query) { $query->where('address', 'like', \"%{$this->input}%\")->orWhere('email', 'like', \"%{$this->input}%\"); }); }, '\u5730\u5740\u6216\u624b\u673a\u53f7');","title":"\u590d\u6742\u67e5\u8be2where"},{"location":"2.x/model-grid-filters/#wherebetween","text":"\u901a\u8fc7 whereBetween \u53ef\u4ee5\u81ea\u5b9a\u4e49\u8303\u56f4\u67e5\u8be2 $filter->whereBetween('created_at', function ($q) { $start = $this->input['start'] ?? null; $end = $this->input['end'] ?? null; $q->whereHas('goods', function ($q) use ($start) { if ($start !== null) { $q->where('price', '>=', $start); } if ($end !== null) { $q->where('price', '<=', $end); } }); }); \u540c\u65f6\u8fd9\u4e2a\u65b9\u6cd5\u4e5f\u652f\u6301\u65f6\u95f4\u65e5\u671f\u8303\u56f4\u67e5\u8be2 $filter->whereBetween('created_at', function ($q) { ... })->datetime();","title":"\u590d\u6742\u8303\u56f4\u67e5\u8be2whereBetween"},{"location":"2.x/model-grid-filters/#group","text":"\u6709\u65f6\u5019\u5bf9\u540c\u4e00\u4e2a\u5b57\u6bb5\u8981\u8bbe\u7f6e\u591a\u79cd\u7b5b\u9009\u65b9\u5f0f\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u5f0f\u5b9e\u73b0 $filter->group('rate', function ($group) { $group->gt('\u5927\u4e8e'); $group->lt('\u5c0f\u4e8e'); $group->nlt('\u4e0d\u5c0f\u4e8e'); $group->ngt('\u4e0d\u5927\u4e8e'); $group->equal('\u7b49\u4e8e'); }); \u6709\u4e0b\u9762\u7684\u51e0\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u8c03\u7528 // \u7b49\u4e8e $group->equal(); // \u4e0d\u7b49\u4e8e $group->notEqual(); // \u5927\u4e8e $group->gt(); // \u5c0f\u4e8e $group->lt(); // \u5927\u4e8e\u7b49\u4e8e $group->nlt(); // \u5c0f\u4e8e\u7b49\u4e8e $group->ngt(); // \u5339\u914d $group->match(); // \u590d\u6742\u6761\u4ef6 $group->where(); // like\u67e5\u8be2 $group->like(); // like\u67e5\u8be2 $group->contains(); // ilike\u67e5\u8be2 $group->ilike(); // \u4ee5\u8f93\u5165\u7684\u5185\u5bb9\u5f00\u5934 $group->startWith(); // \u4ee5\u8f93\u5165\u7684\u5185\u5bb9\u7ed3\u5c3e $group->endWith();","title":"\u8fc7\u6ee4\u5668\u7ec4group"},{"location":"2.x/model-grid-filters/#scope","text":"\u53ef\u4ee5\u628a\u4f60\u6700\u5e38\u7528\u7684\u67e5\u8be2\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u67e5\u8be2\u8303\u56f4\uff0c\u5b83\u5c06\u4f1a\u51fa\u73b0\u5728\u7b5b\u9009\u6309\u94ae\u7684\u4e0b\u62c9\u83dc\u5355\u4e2d\uff0c\u4e0b\u9762\u662f\u51e0\u4e2a\u4f8b\u5b50\uff1a $filter->scope('male', '\u7537\u6027')->where('gender', 'm'); // \u591a\u6761\u4ef6\u67e5\u8be2 $filter->scope('new', '\u6700\u8fd1\u4fee\u6539') ->whereDate('created_at', date('Y-m-d')) ->orWhere('updated_at', date('Y-m-d')); // \u5173\u8054\u5173\u7cfb\u67e5\u8be2 $filter->scope('address')->whereHas('profile', function ($query) { $query->whereNotNull('address'); }); $filter->scope('trashed', '\u88ab\u8f6f\u5220\u9664\u7684\u6570\u636e')->onlyTrashed(); scope\u65b9\u6cd5\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u67e5\u8be2\u7684key, \u4f1a\u51fa\u73b0\u7684url\u53c2\u6570\u4e2d\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e0b\u62c9\u83dc\u5355\u9879\u7684label, \u5982\u679c\u4e0d\u586b\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f1a\u4f5c\u4e3alabel\u663e\u793a scope\u65b9\u6cd5\u53ef\u4ee5\u94fe\u5f0f\u8c03\u7528\u4efb\u4f55eloquent\u67e5\u8be2\u6761\u4ef6\uff0c\u6548\u679c\u53c2\u8003Demo","title":"\u8303\u56f4\u67e5\u8be2scope"},{"location":"2.x/model-grid-filters/#_4","text":"","title":"\u8868\u5355\u7c7b\u578b"},{"location":"2.x/model-grid-filters/#text","text":"\u8868\u5355\u7c7b\u578b\u9ed8\u8ba4\u662f text input \uff0c\u53ef\u4ee5\u8bbe\u7f6e placeholder \uff1a $filter->equal('column')->placeholder('\u8bf7\u8f93\u5165\u3002\u3002\u3002'); \u4e5f\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u4e00\u4e9b\u65b9\u6cd5\u6765\u9650\u5236\u7528\u6237\u8f93\u5165\u683c\u5f0f\uff1a $filter->equal('column')->url(); $filter->equal('column')->email(); $filter->equal('column')->integer(); $filter->equal('column')->ip(); $filter->equal('column')->mac(); $filter->equal('column')->mobile(); // $options \u53c2\u8003 https://github.com/RobinHerbots/Inputmask/blob/4.x/README_numeric.md $filter->equal('column')->decimal($options = []); // $options \u53c2\u8003 https://github.com/RobinHerbots/Inputmask/blob/4.x/README_numeric.md $filter->equal('column')->currency($options = []); // $options \u53c2\u8003 https://github.com/RobinHerbots/Inputmask/blob/4.x/README_numeric.md $filter->equal('column')->percentage($options = []); // $options \u53c2\u8003 https://github.com/RobinHerbots/Inputmask, $icon\u4e3ainput\u524d\u9762\u7684\u56fe\u6807 $filter->equal('column')->inputmask($options = [], $icon = 'pencil');","title":"text"},{"location":"2.x/model-grid-filters/#selecttable","text":"use App\\Admin\\Renderable\\UserTable; use Dcat\\Admin\\Models\\Administrator; $filter->equal('user_id') ->selectTable(UserTable::make(['id' => ...])) // \u8bbe\u7f6e\u6e32\u67d3\u7c7b\u5b9e\u4f8b\uff0c\u5e76\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 ->title('\u5f39\u7a97\u6807\u9898') ->dialogWidth('50%') // \u5f39\u7a97\u5bbd\u5ea6\uff0c\u9ed8\u8ba4 800px ->model(Administrator::class, 'id', 'name'); // \u8bbe\u7f6e\u7f16\u8f91\u6570\u636e\u663e\u793a // \u4e0a\u9762\u7684\u4ee3\u7801\u7b49\u540c\u4e8e $filter->equal('user_id') ->selectTable(UserTable::make(['id' => ...])) // \u8bbe\u7f6e\u6e32\u67d3\u7c7b\u5b9e\u4f8b\uff0c\u5e76\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 ->options(function ($v) { // \u8bbe\u7f6e\u7f16\u8f91\u6570\u636e\u663e\u793a if (! $v) { return []; } return Administrator::find($v)->pluck('name', 'id'); }); \u5b9a\u4e49\u6e32\u67d3\u7c7b\u5982\u4e0b\uff0c\u9700\u8981\u7ee7\u627f Dcat\\Admin\\Grid\\LazyRenderable {tip} \u8fd9\u91cc\u4f7f\u7528\u4e86\u6570\u636e\u8868\u683c\u5f02\u6b65\u52a0\u8f7d\u529f\u80fd\uff0c\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003 \u5f02\u6b65\u52a0\u8f7d <?php namespace App\\Admin\\Renderable; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Grid\\LazyRenderable; use Dcat\\Admin\\Models\\Administrator; class UserTable extends LazyRenderable { public function grid(): Grid { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u7684\u53c2\u6570 $id = $this->id; return Grid::make(new Administrator(), function (Grid $grid) { $grid->column('id'); $grid->column('username'); $grid->column('name'); $grid->column('created_at'); $grid->column('updated_at'); // \u6307\u5b9a\u884c\u9009\u62e9\u5668\u9009\u4e2d\u65f6\u663e\u793a\u7684\u503c\u7684\u5b57\u6bb5\u540d\u79f0 // \u6307\u5b9a\u884c\u9009\u62e9\u5668\u9009\u4e2d\u65f6\u663e\u793a\u7684\u503c\u7684\u5b57\u6bb5\u540d\u79f0 // \u6307\u5b9a\u884c\u9009\u62e9\u5668\u9009\u4e2d\u65f6\u663e\u793a\u7684\u503c\u7684\u5b57\u6bb5\u540d\u79f0 // \u5982\u679c\u8868\u683c\u6570\u636e\u4e2d\u5e26\u6709 \u201cname\u201d\u3001\u201ctitle\u201d\u6216\u201cusername\u201d\u5b57\u6bb5\uff0c\u5219\u53ef\u4ee5\u4e0d\u7528\u8bbe\u7f6e $grid->rowSelector()->titleColumn('username'); $grid->quickSearch(['id', 'username', 'name']); $grid->paginate(10); $grid->disableActions(); $grid->filter(function (Grid\\Filter $filter) { $filter->like('username')->width(4); $filter->like('name')->width(4); }); }); } }","title":"\u8868\u683c\u9009\u62e9\u5668 (selectTable)"},{"location":"2.x/model-grid-filters/#multipleselecttable","text":"\u591a\u9009\u7684\u7528\u6cd5\u4e0e\u4e0a\u8ff0 selectTable \u65b9\u6cd5\u4e00\u81f4 $filter->in('user_id') ->multipleSelectTable(UserTable::make(['id' => $form->getKey()])) // \u8bbe\u7f6e\u6e32\u67d3\u7c7b\u5b9e\u4f8b\uff0c\u5e76\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 ->max(10) // \u6700\u591a\u9009\u62e9 10 \u4e2a\u9009\u9879\uff0c\u4e0d\u4f20\u5219\u4e0d\u9650\u5236 ->model(Administrator::class, 'id', 'name'); // \u8bbe\u7f6e\u7f16\u8f91\u6570\u636e\u663e\u793a","title":"\u591a\u9009 (multipleSelectTable)"},{"location":"2.x/model-grid-filters/#select","text":"$filter->equal('column')->select(['key' => 'value'...]); // \u6216\u8005\u4eceapi\u83b7\u53d6\u6570\u636e\uff0capi\u7684\u683c\u5f0f\u53c2\u8003model-form\u7684select\u7ec4\u4ef6 $filter->equal('column')->select('api/users');","title":"select"},{"location":"2.x/model-grid-filters/#multipleselect","text":"\u4e00\u822c\u7528\u6765\u914d\u5408 in \u548c notIn \u4e24\u4e2a\u9700\u8981\u67e5\u8be2\u6570\u7ec4\u7684\u67e5\u8be2\u7c7b\u578b\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u5728 where \u7c7b\u578b\u7684\u67e5\u8be2\u4e2d\u4f7f\u7528\uff1a $filter->in('column')->multipleSelect(['key' => 'value'...]); // \u6216\u8005\u4eceapi\u83b7\u53d6\u6570\u636e\uff0capi\u7684\u683c\u5f0f\u53c2\u8003model-form\u7684multipleSelect\u7ec4\u4ef6 $filter->in('column')->multipleSelect('api/users');","title":"multipleSelect"},{"location":"2.x/model-grid-filters/#datetime","text":"\u901a\u8fc7\u65e5\u671f\u65f6\u95f4\u7ec4\u4ef6\u6765\u67e5\u8be2\uff0c $options \u7684\u53c2\u6570\u548c\u503c\u53c2\u8003 bootstrap-datetimepicker $filter->equal('column')->datetime($options); // `date()` \u76f8\u5f53\u4e8e `datetime(['format' => 'YYYY-MM-DD'])` $filter->equal('column')->date(); // `time()` \u76f8\u5f53\u4e8e `datetime(['format' => 'HH:mm:ss'])` $filter->equal('column')->time(); // `day()` \u76f8\u5f53\u4e8e `datetime(['format' => 'DD'])` $filter->equal('column')->day(); // `month()` \u76f8\u5f53\u4e8e `datetime(['format' => 'MM'])` $filter->equal('column')->month(); // `year()` \u76f8\u5f53\u4e8e `datetime(['format' => 'YYYY'])` $filter->equal('column')->year(); \u5982\u679c\u4f60\u7684\u65f6\u95f4\u65e5\u671f\u5b57\u6bb5\u5728\u6570\u636e\u5e93\u4e2d\u5b58\u50a8\u7684\u662f\u65f6\u95f4\u6233\u7c7b\u578b\uff0c\u90a3\u4e48\u53ef\u4ee5\u901a\u8fc7 toTimestamp \u65b9\u6cd5\u628a\u8868\u5355\u7684\u503c\u8f6c\u5316\u4e3a\u65f6\u95f4\u6233 $filter->equal('column')->datetime($options)->toTimestamp();","title":"datetime"},{"location":"2.x/model-grid-filters/#_5","text":"","title":"\u5e38\u7528\u65b9\u6cd5"},{"location":"2.x/model-grid-filters/#width","text":"// \u8bbe\u7f6e\u4e3a\u201c1-12\u201d\u4e4b\u95f4\u7684\u503c\uff0c\u9ed8\u8ba4\u503c\u662f\u201c3\u201d $filter->equal('column')->width(3); // \u4e5f\u53ef\u4ee5\u5199\u6b7b\u5bbd\u5ea6 $filter->equal('column')->width('250px');","title":"\u8fc7\u6ee4\u5668\u5bbd\u5ea6 (width)"},{"location":"2.x/model-grid-filters/#default","text":"$filter->equal('column')->default('text'); $filter->equal('column')->select([0 => 'PHP', 1 => 'Java'])->default(1);","title":"\u8bbe\u7f6e\u9ed8\u8ba4\u503c (default)"},{"location":"2.x/model-grid-filters/#expand","text":"$filter->expand(); $filter->equal('column'); ...","title":"\u5c55\u5f00\u8fc7\u6ee4\u5668 (expand)"},{"location":"2.x/model-grid-filters/#input","text":"$filter->withoutInputBorder(); $filter->equal('column'); ...","title":"\u4e0d\u663e\u793a\u8fc7\u6ee4\u5668input\u8f93\u5165\u6846\u7684\u8fb9\u6846"},{"location":"2.x/model-grid-filters/#_6","text":"$filter->style('padding:0'); $filter->equal('column'); ...","title":"\u8bbe\u7f6e\u8fc7\u6ee4\u5668\u5bb9\u5668\u6837\u5f0f"},{"location":"2.x/model-grid-filters/#padding","text":"$filter->padding('10px', '10px', '10px', '10px'); $filter->equal('column'); ...","title":"\u8bbe\u7f6e\u8fc7\u6ee4\u5668\u5bb9\u5668padding"},{"location":"2.x/model-grid-filters/#ignore","text":"\u901a\u8fc7 ignore \u65b9\u6cd5\u53ef\u4ee5\u5728\u63d0\u4ea4\u8868\u5355\u65f6\u5ffd\u7565\u5f53\u524d\u7b5b\u9009\u9879 $filter->equal('column')->ignore();","title":"\u5ffd\u7565\u7b5b\u9009\u9879 (ignore)"},{"location":"2.x/model-grid-filters/#_7","text":"\u5047\u8bbe\u4f60\u7684\u6a21\u578b\u5982\u4e0b class User extends Model { public function profile() { return $this->hasOne(...); } public function myPosts() { return $this->hasMany(...); } } \u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u6cd5\u53ef\u4ee5\u67e5\u8be2 profiles \u8868\u7684 first_name \u5b57\u6bb5\u4ee5\u53ca posts \u8868\u7684 title \u5b57\u6bb5 $grid->filter(function ($filter) { $filter->like('profile.first_name'); $filter->like('myPosts.title'); }); \u5982\u679c\u5b89\u88c5\u4e86 dcat/laravel-wherehasin \uff0c\u5219\u4f1a\u4f18\u5148\u4f7f\u7528 whereHasIn \u65b9\u6cd5\u8fdb\u884c\u67e5\u8be2\u64cd\u4f5c","title":"\u5173\u8054\u5173\u7cfb\u5b57\u6bb5\u67e5\u8be2"},{"location":"2.x/model-grid-filters/#_8","text":"\u4e0b\u9762\u901a\u8fc7 between \u7684\u5b9e\u73b0\u6765\u8bb2\u89e3\u4e0b\u600e\u4e48\u81ea\u5b9a\u4e49\u8fc7\u6ee4\u5668\u3002 \u9996\u5148\u65b0\u5efa\u4e00\u4e2a\u8fc7\u6ee4\u5668\u7c7b\u7ee7\u627f Dcat\\Admin\\Grid\\Filter\\AbstractFilter \uff1a <?php namespace Dcat\\Admin\\Grid\\Filter; use Dcat\\Admin\\Admin; use Dcat\\Admin\\Grid\\Filter\\Presenter\\DateTime; use Illuminate\\Support\\Arr; class Between extends AbstractFilter { // \u81ea\u5b9a\u4e49\u4f60\u7684\u8fc7\u6ee4\u5668\u663e\u793a\u6a21\u677f protected $view = 'admin::filter.between'; // \u8fd9\u4e2a\u65b9\u6cd5\u7528\u4e8e\u751f\u6210\u8fc7\u6ee4\u5668\u5b57\u6bb5\u7684\u552f\u4e00id // \u901a\u8fc7\u8fd9\u4e2a\u552f\u4e00id\u5219\u53ef\u4ee5\u7528js\u4ee3\u7801\u5bf9\u5176\u8fdb\u884c\u64cd\u4f5c public function formatId($column) { $id = str_replace('.', '_', $column); $name = $this->parent->getGrid()->getName(); return ['start' => \"{$name}{$id}_start\", 'end' => \"{$name}{$id}_end\"]; } // form\u8868\u5355name\u5c5e\u6027\u683c\u5f0f\u5316 protected function formatName($column) { $columns = explode('.', $column); if (count($columns) == 1) { $name = $columns[0]; } else { $name = array_shift($columns); foreach ($columns as $column) { $name .= \"[$column]\"; } } return ['start' => \"{$name}[start]\", 'end' => \"{$name}[end]\"]; } // \u521b\u5efa\u6761\u4ef6 // \u8fd9\u91cc\u6784\u5efa\u7684\u6761\u4ef6\u652f\u6301`Laravel query builder`\u5373\u53ef\u3002 public function condition($inputs) { if (!Arr::has($inputs, $this->column)) { return; } $this->value = Arr::get($inputs, $this->column); $value = array_filter($this->value, function ($val) { return $val !== ''; }); if (empty($value)) { return; } if (!isset($value['start']) && isset($value['end'])) { // \u8fd9\u91cc\u8fd4\u56de\u7684\u6570\u7ec4\u76f8\u5f53\u4e8e // $query->where($this->column, '<=', $value['end']); return $this->buildCondition($this->column, '<=', $value['end']); } if (!isset($value['end']) && isset($value['start'])) { // \u8fd9\u91cc\u8fd4\u56de\u7684\u6570\u7ec4\u76f8\u5f53\u4e8e // $query->where($this->column, '>=', $value['end']); return $this->buildCondition($this->column, '>=', $value['start']); } $this->query = 'whereBetween'; // \u8fd9\u91cc\u8fd4\u56de\u7684\u6570\u7ec4\u76f8\u5f53\u4e8e // $query->whereBetween($this->column, $value['end']); return $this->buildCondition($this->column, $this->value); } // \u81ea\u5b9a\u4e49\u8fc7\u6ee4\u5668\u8868\u5355\u663e\u793a\u65b9\u5f0f public function datetime($options = []) { $this->view = 'admin::filter.betweenDatetime'; DateTime::collectAssets(); $this->setupDatetime($options); return $this; } protected function setupDatetime($options = []) { $options['format'] = Arr::get($options, 'format', 'YYYY-MM-DD HH:mm:ss'); $options['locale'] = Arr::get($options, 'locale', config('app.locale')); $startOptions = json_encode($options); $endOptions = json_encode($options + ['useCurrent' => false]); // \u901a\u8fc7\u4e0a\u9762\u683c\u5f0f\u5316\u540e\u7684id\u5bf9\u8868\u5355\u8fdb\u884c\u4f60\u60f3\u8981\u7684\u64cd\u4f5c $script = <<<JS $('#{$this->id['start']}').datetimepicker($startOptions); $('#{$this->id['end']}').datetimepicker($endOptions); $(\"#{$this->id['start']}\").on(\"dp.change\", function (e) { $('#{$this->id['end']}').data(\"DateTimePicker\").minDate(e.date); }); $(\"#{$this->id['end']}\").on(\"dp.change\", function (e) { $('#{$this->id['start']}').data(\"DateTimePicker\").maxDate(e.date); }); JS; Admin::script($script); } } admin::filter.between \u6a21\u677f\u5185\u5bb9\u5982\u4e0b\uff1a <div class=\"filter-input col-sm-{{ $width }} \" style=\"{!! $style !!}\"> <div class=\"form-group\" > <div class=\"input-group input-group-sm\"> <span class=\"input-group-addon\"><b>{!! $label !!}</b></span> <input type=\"text\" class=\"form-control\" placeholder=\"{{$label}}\" name=\"{{$name['start']}}\" value=\"{{ request($name['start'], \\Illuminate\\Support\\Arr::get($value, 'start')) }}\"> <span class=\"input-group-addon\" style=\"border-left: 0; border-right: 0;\">To</span> <input type=\"text\" class=\"form-control\" placeholder=\"{{$label}}\" name=\"{{$name['end']}}\" value=\"{{ request($name['end'], \\Illuminate\\Support\\Arr::get($value, 'end')) }}\"> </div> </div> </div> admin::filter.betweenDatetime \u6a21\u677f\u5185\u5bb9\u5982\u4e0b\uff1a <div class=\"filter-input col-sm-{{ $width }}\" style=\"{!! $style !!}\"> <div class=\"form-group\"> <div class=\"input-group input-group-sm\"> <span class=\"input-group-addon\"><b>{{$label}}</b> &nbsp;<i class=\"fa fa-calendar\"></i></span> <input type=\"text\" class=\"form-control\" id=\"{{$id['start']}}\" placeholder=\"{{$label}}\" name=\"{{$name['start']}}\" value=\"{{ request($name['start'], \\Illuminate\\Support\\Arr::get($value, 'start')) }}\"> <span class=\"input-group-addon\" style=\"border-left: 0; border-right: 0;\">To</span> <input type=\"text\" class=\"form-control\" id=\"{{$id['end']}}\" placeholder=\"{{$label}}\" name=\"{{$name['end']}}\" value=\"{{ request($name['end'], \\Illuminate\\Support\\Arr::get($value, 'end')) }}\"> </div> </div> </div> \u73b0\u5728\u53ea\u8981\u8c03\u7528 extend \u65b9\u6cd5\u53ef\u4ee5\u4f7f\u7528\u4e86\uff0c\u6253\u5f00 app/Admin/bootstrap.php \uff0c\u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801\uff1a Filter::extend('customBetween', Filter\\Between::class); \u4f7f\u7528\uff1a $filter->customBetween('created_at')->datetime();","title":"\u81ea\u5b9a\u4e49\u8fc7\u6ee4\u5668"},{"location":"2.x/model-grid-header/","text":"\u5934\u90e8\u548c\u811a\u90e8 \u6570\u636e\u8868\u683c\u652f\u6301\u5f80\u5934\u90e8\u548c\u811a\u90e8\u4e24\u4e2a\u533a\u5757\u586b\u5165\u4f60\u60f3\u8981\u7684\u5185\u5bb9 $grid->header(function ($collection) { return 'header'; }); $grid->footer(function ($collection) { return 'footer'; }); \u5176\u4e2d\u95ed\u5305\u51fd\u6570\u7684\u53c2\u6570 $collection \u4e3a Illuminate\\Support\\Collection \u7c7b\u5b9e\u4f8b\uff0c\u662f\u5f53\u524d\u9875\u8868\u683c\u6570\u636e\uff0c\u4e0b\u9762\u662f\u4e24\u4e2a\u4e0d\u540c\u573a\u666f\u7684\u4f7f\u7528\u4e3e\u4f8b \u5934\u90e8 $grid->header(function ($collection) use ($grid) { $query = Model::query(); // \u62ff\u5230\u8868\u683c\u7b5b\u9009 where \u6761\u4ef6\u6570\u7ec4\u8fdb\u884c\u904d\u5386 $grid->model()->getQueries()->unique()->each(function ($value) use (&$query) { if (in_array($value['method'], ['paginate', 'get', 'orderBy', 'orderByDesc'], true)) { return; } $query = call_user_func_array([$query, $value['method']], $value['arguments'] ?? []); }); // \u67e5\u51fa\u7edf\u8ba1\u6570\u636e $data = $query->get(); // \u81ea\u5b9a\u4e49\u7ec4\u4ef6 return new Card($data); }); \u81ea\u5b9a\u4e49\u5934\u90e8\u5c55\u793a\u7684\u7ec4\u4ef6\u5b9e\u73b0 <?php use Illuminate\\Contracts\\Support\\Renderable; use Dcat\\Admin\\Admin; class Card implements Renderable { public static $js = [ 'xxx/js/card.min.js', ]; public static $css = [ 'xxx/css/card.min.css', ]; protected $data; public function __construct($data) { $this->data = $data; } public function script() { return <<<JS console.log('\u6240\u6709JS\u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u4e86'); $('xxx').card(); JS; } public function render() { // \u5728\u8fd9\u91cc\u53ef\u4ee5\u5f15\u5165\u4f60\u7684js\u6216css\u6587\u4ef6 Admin::js(static::$js); Admin::css(static::$css); // \u9700\u8981\u5728\u9875\u9762\u6267\u884c\u7684JS\u4ee3\u7801 // \u901a\u8fc7 Admin::script \u8bbe\u7f6e\u7684JS\u4ee3\u7801\u4f1a\u81ea\u52a8\u5728\u6240\u6709JS\u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u6bd5\u540e\u6267\u884c Admin::script($this->script()); return view('...', ['data' => $this->data])->render(); } } \u811a\u90e8 \u4e00\u4e2a\u6bd4\u8f83\u5e38\u89c1\u7684\u573a\u666f\u662f\u5728\u6570\u636e\u8868\u683c\u7684\u811a\u90e8\u663e\u793a\u7edf\u8ba1\u4fe1\u606f\uff0c\u6bd4\u5982\u5728\u8ba2\u5355\u8868\u683c\u7684\u811a\u90e8\u52a0\u5165\u6536\u5165\u7edf\u8ba1\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u4ee3\u7801\u5b9e\u73b0\uff1a $grid->footer(function ($collection) use ($grid) { $query = Model::query(); // \u62ff\u5230\u8868\u683c\u7b5b\u9009 where \u6761\u4ef6\u6570\u7ec4\u8fdb\u884c\u904d\u5386 $grid->model()->getQueries()->unique()->each(function ($value) use (&$query) { if (in_array($value['method'], ['paginate', 'get', 'orderBy', 'orderByDesc'], true)) { return; } $query = call_user_func_array([$query, $value['method']], $value['arguments'] ?? []); }); // \u67e5\u51fa\u7edf\u8ba1\u6570\u636e $data = $query->get(); return \"<div style='padding: 10px;'>\u603b\u6536\u5165 \uff1a $data</div>\"; }); \u5982\u679c\u6709\u6bd4\u8f83\u590d\u6742\u7684\u811a\u90e8\u9700\u8981\u663e\u793a\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u89c6\u56fe\u5bf9\u8c61\u6216\u8005\u5c01\u88c5\u6210\u4e00\u4e2a\u7c7b\u6765\u5b9e\u73b0\u3002","title":"\u5934\u90e8\u548c\u811a\u90e8"},{"location":"2.x/model-grid-header/#_1","text":"\u6570\u636e\u8868\u683c\u652f\u6301\u5f80\u5934\u90e8\u548c\u811a\u90e8\u4e24\u4e2a\u533a\u5757\u586b\u5165\u4f60\u60f3\u8981\u7684\u5185\u5bb9 $grid->header(function ($collection) { return 'header'; }); $grid->footer(function ($collection) { return 'footer'; }); \u5176\u4e2d\u95ed\u5305\u51fd\u6570\u7684\u53c2\u6570 $collection \u4e3a Illuminate\\Support\\Collection \u7c7b\u5b9e\u4f8b\uff0c\u662f\u5f53\u524d\u9875\u8868\u683c\u6570\u636e\uff0c\u4e0b\u9762\u662f\u4e24\u4e2a\u4e0d\u540c\u573a\u666f\u7684\u4f7f\u7528\u4e3e\u4f8b","title":"\u5934\u90e8\u548c\u811a\u90e8"},{"location":"2.x/model-grid-header/#_2","text":"$grid->header(function ($collection) use ($grid) { $query = Model::query(); // \u62ff\u5230\u8868\u683c\u7b5b\u9009 where \u6761\u4ef6\u6570\u7ec4\u8fdb\u884c\u904d\u5386 $grid->model()->getQueries()->unique()->each(function ($value) use (&$query) { if (in_array($value['method'], ['paginate', 'get', 'orderBy', 'orderByDesc'], true)) { return; } $query = call_user_func_array([$query, $value['method']], $value['arguments'] ?? []); }); // \u67e5\u51fa\u7edf\u8ba1\u6570\u636e $data = $query->get(); // \u81ea\u5b9a\u4e49\u7ec4\u4ef6 return new Card($data); }); \u81ea\u5b9a\u4e49\u5934\u90e8\u5c55\u793a\u7684\u7ec4\u4ef6\u5b9e\u73b0 <?php use Illuminate\\Contracts\\Support\\Renderable; use Dcat\\Admin\\Admin; class Card implements Renderable { public static $js = [ 'xxx/js/card.min.js', ]; public static $css = [ 'xxx/css/card.min.css', ]; protected $data; public function __construct($data) { $this->data = $data; } public function script() { return <<<JS console.log('\u6240\u6709JS\u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u4e86'); $('xxx').card(); JS; } public function render() { // \u5728\u8fd9\u91cc\u53ef\u4ee5\u5f15\u5165\u4f60\u7684js\u6216css\u6587\u4ef6 Admin::js(static::$js); Admin::css(static::$css); // \u9700\u8981\u5728\u9875\u9762\u6267\u884c\u7684JS\u4ee3\u7801 // \u901a\u8fc7 Admin::script \u8bbe\u7f6e\u7684JS\u4ee3\u7801\u4f1a\u81ea\u52a8\u5728\u6240\u6709JS\u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u6bd5\u540e\u6267\u884c Admin::script($this->script()); return view('...', ['data' => $this->data])->render(); } }","title":"\u5934\u90e8"},{"location":"2.x/model-grid-header/#_3","text":"\u4e00\u4e2a\u6bd4\u8f83\u5e38\u89c1\u7684\u573a\u666f\u662f\u5728\u6570\u636e\u8868\u683c\u7684\u811a\u90e8\u663e\u793a\u7edf\u8ba1\u4fe1\u606f\uff0c\u6bd4\u5982\u5728\u8ba2\u5355\u8868\u683c\u7684\u811a\u90e8\u52a0\u5165\u6536\u5165\u7edf\u8ba1\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u4ee3\u7801\u5b9e\u73b0\uff1a $grid->footer(function ($collection) use ($grid) { $query = Model::query(); // \u62ff\u5230\u8868\u683c\u7b5b\u9009 where \u6761\u4ef6\u6570\u7ec4\u8fdb\u884c\u904d\u5386 $grid->model()->getQueries()->unique()->each(function ($value) use (&$query) { if (in_array($value['method'], ['paginate', 'get', 'orderBy', 'orderByDesc'], true)) { return; } $query = call_user_func_array([$query, $value['method']], $value['arguments'] ?? []); }); // \u67e5\u51fa\u7edf\u8ba1\u6570\u636e $data = $query->get(); return \"<div style='padding: 10px;'>\u603b\u6536\u5165 \uff1a $data</div>\"; }); \u5982\u679c\u6709\u6bd4\u8f83\u590d\u6742\u7684\u811a\u90e8\u9700\u8981\u663e\u793a\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u89c6\u56fe\u5bf9\u8c61\u6216\u8005\u5c01\u88c5\u6210\u4e00\u4e2a\u7c7b\u6765\u5b9e\u73b0\u3002","title":"\u811a\u90e8"},{"location":"2.x/model-grid-quick-create/","text":"\u5feb\u6377\u521b\u5efa \u5728\u8868\u683c\u4e2d\u5f00\u542f\u8fd9\u4e2a\u529f\u80fd\u4e4b\u540e\uff0c\u4f1a\u5728\u8868\u683c\u5934\u90e8\u589e\u52a0\u4e00\u4e2a form \u8868\u5355\u6765\u521b\u5efa\u6570\u636e\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u7b80\u5355\u7684\u8868\u683c\u9875\u9762\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5feb\u901f\u521b\u5efa\u6570\u636e\uff0c\u4e0d\u7528\u8df3\u8f6c\u5230\u521b\u5efa\u9875\u9762\u64cd\u4f5c \u57fa\u672c\u4f7f\u7528 {tip} \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5feb\u6377\u521b\u5efa\u8868\u5355\u4e2d\u7684\u6bcf\u4e00\u9879\uff0c\u5728 form \u8868\u5355\u9875\u9762\u8981\u8bbe\u7f6e\u76f8\u540c\u7c7b\u578b\u7684\u8868\u5355\u9879\u3002 $grid->quickCreate(function (Grid\\Tools\\QuickCreate $create) { $create->text('name', '\u540d\u79f0'); $create->email('email', '\u90ae\u7bb1'); }); \u8bbe\u7f6e\u63d0\u4ea4\u5730\u5740 $grid->quickCreate(function (Grid\\Tools\\QuickCreate $create) { $create->action('auth/users'); $create->method('GET'); }); \u8868\u5355\u652f\u6301\u7684\u8868\u5355\u9879\u6709\u4e0b\u9762\u7684\u51e0\u79cd\u7c7b\u578b \u6587\u672c(text) \u6587\u672c\u8f93\u5165\u6846 $create->text('column_name', 'placeholder...'); \u9690\u85cf\u8868\u5355(hidden) \u6587\u672c\u8f93\u5165\u6846 $create->hidden('column_name'); \u90ae\u7bb1(email) \u90ae\u7bb1\u8f93\u5165\u6846 $create->email('column_name', 'placeholder...'); IP\u8f93\u5165\u6846 ip\u5730\u5740\u8f93\u5165\u6846 $create->ip('column_name', 'placeholder...'); URL\u8f93\u5165\u6846 url\u8f93\u5165\u6846 $create->url('column_name', 'placeholder...'); \u5bc6\u7801(password) \u5bc6\u7801\u8f93\u5165\u6846 $create->password('column_name', 'placeholder...'); \u624b\u673a\u53f7(mobile) \u624b\u673a\u53f7\u8f93\u5165\u6846 $create->mobile('column_name', 'placeholder...'); \u6574\u6570(integer) \u6574\u5f62\u6570\u5b57\u8f93\u5165\u6846 $create->integer('column_name', 'placeholder...'); \u4e0b\u62c9\u9009\u6846(select) \u5355\u9009\u6846 $create->select('column_name', 'placeholder...')->options([ 1 => 'foo', 2 => 'bar', ]); \u4e0b\u62c9\u9009\u6846\u591a\u9009(multipleSelect) \u591a\u9009\u6846 $create->multipleSelect('column_name', 'placeholder...')->options([ 1 => 'foo', 2 => 'bar', ]); \u6807\u7b7e(tags) $create->tags('column_name', 'placeholder...')->options([ 1 => 'foo', 2 => 'bar', ]); \u5f39\u7a97\u9009\u62e9\u5668(selectResource) \u901a\u8fc7 selectResource \u8868\u5355\u53ef\u4ee5\u6784\u5efa\u4e00\u4e2a\u5f39\u7a97\u9009\u62e9\u5668\uff0c\u53ef\u4ee5\u4ece\u5f39\u7a97\u91cc\u9762\u9009\u62e9\u8868\u683c\u6570\u636e\uff0c\u5e76\u4e14\u652f\u6301\u6570\u636e\u7b5b\u9009\u7b49\u64cd\u4f5c\u3002 $form->selectResource('user') ->path('auth/users') // \u8bbe\u7f6e\u8868\u683c\u9875\u9762\u94fe\u63a5 ->options(function ($v) { // \u663e\u793a\u5df2\u9009\u4e2d\u7684\u6570\u636e if (!$v) return $v; $userModel = config('admin.database.users_model'); return $userModel::find($v)->pluck('name', 'id'); }); // \u8bbe\u7f6e\u4e3a\u591a\u9009 $form->selectResource('user') ->path('auth/users') ->multiple() // \u8bbe\u7f6e\u4e3a\u591a\u9009 ->options(function ($v) { ... }); // \u9650\u5236\u6700\u5927\u9009\u62e9\u6570\u91cf $form->selectResource('user') ->path('auth/users') ->multiple(3) // \u6700\u591a\u9009\u62e93\u4e2a\u9009\u9879 ->options(function ($v) { ... }); \u7136\u540e\u8bbe\u7f6e\u4f60\u7684\u8def\u7531 app/Admin/routes.php {tip} \u8fd9\u91cc\u7684\u6dfb\u52a0\u8def\u7531\u53ea\u662f\u793a\u4f8b\uff0c\u5982\u679c\u662f\u65b0\u589e\u7684\u63a7\u5236\u5668\u9700\u8981\u52a0\u8def\u7531\uff0c\u5982\u679c\u8def\u7531\u5df2\u7ecf\u5b58\u5728\u5219\u4e0d\u9700\u8981\u518d\u6dfb\u52a0\u3002 $router->resource('auth/users', 'UserController'); auth/users \u9875\u9762\u5b9e\u73b0\u4ee3\u7801\u5982\u4e0b\uff1a <?php use Dcat\\Admin\\Models\\Administrator; use Dcat\\Admin\\IFrameGrid; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Controllers\\AdminController; class UserController extends AdminController { protected function iFrameGrid() { $grid = new IFrameGrid(new Administrator()); // \u6307\u5b9a\u884c\u9009\u62e9\u5668\u9009\u4e2d\u65f6\u663e\u793a\u7684\u503c\u7684\u5b57\u6bb5\u540d\u79f0 // \u6307\u5b9a\u884c\u9009\u62e9\u5668\u9009\u4e2d\u65f6\u663e\u793a\u7684\u503c\u7684\u5b57\u6bb5\u540d\u79f0 // \u6307\u5b9a\u884c\u9009\u62e9\u5668\u9009\u4e2d\u65f6\u663e\u793a\u7684\u503c\u7684\u5b57\u6bb5\u540d\u79f0 // \u5982\u679c\u8868\u683c\u6570\u636e\u4e2d\u5e26\u6709 \u201cname\u201d\u3001\u201ctitle\u201d\u6216\u201cusername\u201d\u5b57\u6bb5\uff0c\u5219\u53ef\u4ee5\u4e0d\u7528\u8bbe\u7f6e $grid->rowSelector()->titleColumn('username'); $grid->id->sortable(); $grid->username; $grid->name; $grid->filter(function (Grid\\Filter $filter) { $filter->equal('id'); $filter->like('username'); $filter->like('name'); }); return $grid; } } \u6548\u679c \u65e5\u671f\u65f6\u95f4\u9009\u62e9 \u65f6\u95f4\u65e5\u671f\u8f93\u5165\u6846 $create->datetime('column_name', 'placeholder...'); \u65f6\u95f4\u9009\u62e9(time) \u65f6\u95f4\u8f93\u5165\u6846 $create->time('column_name', 'placeholder...'); \u65e5\u671f\u9009\u62e9 $create->date('column_name', 'placeholder...');","title":"\u5feb\u6377\u521b\u5efa"},{"location":"2.x/model-grid-quick-create/#_1","text":"\u5728\u8868\u683c\u4e2d\u5f00\u542f\u8fd9\u4e2a\u529f\u80fd\u4e4b\u540e\uff0c\u4f1a\u5728\u8868\u683c\u5934\u90e8\u589e\u52a0\u4e00\u4e2a form \u8868\u5355\u6765\u521b\u5efa\u6570\u636e\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u7b80\u5355\u7684\u8868\u683c\u9875\u9762\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5feb\u901f\u521b\u5efa\u6570\u636e\uff0c\u4e0d\u7528\u8df3\u8f6c\u5230\u521b\u5efa\u9875\u9762\u64cd\u4f5c","title":"\u5feb\u6377\u521b\u5efa"},{"location":"2.x/model-grid-quick-create/#_2","text":"{tip} \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5feb\u6377\u521b\u5efa\u8868\u5355\u4e2d\u7684\u6bcf\u4e00\u9879\uff0c\u5728 form \u8868\u5355\u9875\u9762\u8981\u8bbe\u7f6e\u76f8\u540c\u7c7b\u578b\u7684\u8868\u5355\u9879\u3002 $grid->quickCreate(function (Grid\\Tools\\QuickCreate $create) { $create->text('name', '\u540d\u79f0'); $create->email('email', '\u90ae\u7bb1'); });","title":"\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/model-grid-quick-create/#_3","text":"$grid->quickCreate(function (Grid\\Tools\\QuickCreate $create) { $create->action('auth/users'); $create->method('GET'); }); \u8868\u5355\u652f\u6301\u7684\u8868\u5355\u9879\u6709\u4e0b\u9762\u7684\u51e0\u79cd\u7c7b\u578b","title":"\u8bbe\u7f6e\u63d0\u4ea4\u5730\u5740"},{"location":"2.x/model-grid-quick-create/#text","text":"\u6587\u672c\u8f93\u5165\u6846 $create->text('column_name', 'placeholder...');","title":"\u6587\u672c(text)"},{"location":"2.x/model-grid-quick-create/#hidden","text":"\u6587\u672c\u8f93\u5165\u6846 $create->hidden('column_name');","title":"\u9690\u85cf\u8868\u5355(hidden)"},{"location":"2.x/model-grid-quick-create/#email","text":"\u90ae\u7bb1\u8f93\u5165\u6846 $create->email('column_name', 'placeholder...');","title":"\u90ae\u7bb1(email)"},{"location":"2.x/model-grid-quick-create/#ip","text":"ip\u5730\u5740\u8f93\u5165\u6846 $create->ip('column_name', 'placeholder...');","title":"IP\u8f93\u5165\u6846"},{"location":"2.x/model-grid-quick-create/#url","text":"url\u8f93\u5165\u6846 $create->url('column_name', 'placeholder...');","title":"URL\u8f93\u5165\u6846"},{"location":"2.x/model-grid-quick-create/#password","text":"\u5bc6\u7801\u8f93\u5165\u6846 $create->password('column_name', 'placeholder...');","title":"\u5bc6\u7801(password)"},{"location":"2.x/model-grid-quick-create/#mobile","text":"\u624b\u673a\u53f7\u8f93\u5165\u6846 $create->mobile('column_name', 'placeholder...');","title":"\u624b\u673a\u53f7(mobile)"},{"location":"2.x/model-grid-quick-create/#integer","text":"\u6574\u5f62\u6570\u5b57\u8f93\u5165\u6846 $create->integer('column_name', 'placeholder...');","title":"\u6574\u6570(integer)"},{"location":"2.x/model-grid-quick-create/#select","text":"\u5355\u9009\u6846 $create->select('column_name', 'placeholder...')->options([ 1 => 'foo', 2 => 'bar', ]);","title":"\u4e0b\u62c9\u9009\u6846(select)"},{"location":"2.x/model-grid-quick-create/#multipleselect","text":"\u591a\u9009\u6846 $create->multipleSelect('column_name', 'placeholder...')->options([ 1 => 'foo', 2 => 'bar', ]);","title":"\u4e0b\u62c9\u9009\u6846\u591a\u9009(multipleSelect)"},{"location":"2.x/model-grid-quick-create/#tags","text":"$create->tags('column_name', 'placeholder...')->options([ 1 => 'foo', 2 => 'bar', ]);","title":"\u6807\u7b7e(tags)"},{"location":"2.x/model-grid-quick-create/#selectresource","text":"\u901a\u8fc7 selectResource \u8868\u5355\u53ef\u4ee5\u6784\u5efa\u4e00\u4e2a\u5f39\u7a97\u9009\u62e9\u5668\uff0c\u53ef\u4ee5\u4ece\u5f39\u7a97\u91cc\u9762\u9009\u62e9\u8868\u683c\u6570\u636e\uff0c\u5e76\u4e14\u652f\u6301\u6570\u636e\u7b5b\u9009\u7b49\u64cd\u4f5c\u3002 $form->selectResource('user') ->path('auth/users') // \u8bbe\u7f6e\u8868\u683c\u9875\u9762\u94fe\u63a5 ->options(function ($v) { // \u663e\u793a\u5df2\u9009\u4e2d\u7684\u6570\u636e if (!$v) return $v; $userModel = config('admin.database.users_model'); return $userModel::find($v)->pluck('name', 'id'); }); // \u8bbe\u7f6e\u4e3a\u591a\u9009 $form->selectResource('user') ->path('auth/users') ->multiple() // \u8bbe\u7f6e\u4e3a\u591a\u9009 ->options(function ($v) { ... }); // \u9650\u5236\u6700\u5927\u9009\u62e9\u6570\u91cf $form->selectResource('user') ->path('auth/users') ->multiple(3) // \u6700\u591a\u9009\u62e93\u4e2a\u9009\u9879 ->options(function ($v) { ... }); \u7136\u540e\u8bbe\u7f6e\u4f60\u7684\u8def\u7531 app/Admin/routes.php {tip} \u8fd9\u91cc\u7684\u6dfb\u52a0\u8def\u7531\u53ea\u662f\u793a\u4f8b\uff0c\u5982\u679c\u662f\u65b0\u589e\u7684\u63a7\u5236\u5668\u9700\u8981\u52a0\u8def\u7531\uff0c\u5982\u679c\u8def\u7531\u5df2\u7ecf\u5b58\u5728\u5219\u4e0d\u9700\u8981\u518d\u6dfb\u52a0\u3002 $router->resource('auth/users', 'UserController'); auth/users \u9875\u9762\u5b9e\u73b0\u4ee3\u7801\u5982\u4e0b\uff1a <?php use Dcat\\Admin\\Models\\Administrator; use Dcat\\Admin\\IFrameGrid; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Controllers\\AdminController; class UserController extends AdminController { protected function iFrameGrid() { $grid = new IFrameGrid(new Administrator()); // \u6307\u5b9a\u884c\u9009\u62e9\u5668\u9009\u4e2d\u65f6\u663e\u793a\u7684\u503c\u7684\u5b57\u6bb5\u540d\u79f0 // \u6307\u5b9a\u884c\u9009\u62e9\u5668\u9009\u4e2d\u65f6\u663e\u793a\u7684\u503c\u7684\u5b57\u6bb5\u540d\u79f0 // \u6307\u5b9a\u884c\u9009\u62e9\u5668\u9009\u4e2d\u65f6\u663e\u793a\u7684\u503c\u7684\u5b57\u6bb5\u540d\u79f0 // \u5982\u679c\u8868\u683c\u6570\u636e\u4e2d\u5e26\u6709 \u201cname\u201d\u3001\u201ctitle\u201d\u6216\u201cusername\u201d\u5b57\u6bb5\uff0c\u5219\u53ef\u4ee5\u4e0d\u7528\u8bbe\u7f6e $grid->rowSelector()->titleColumn('username'); $grid->id->sortable(); $grid->username; $grid->name; $grid->filter(function (Grid\\Filter $filter) { $filter->equal('id'); $filter->like('username'); $filter->like('name'); }); return $grid; } } \u6548\u679c","title":"\u5f39\u7a97\u9009\u62e9\u5668(selectResource)"},{"location":"2.x/model-grid-quick-create/#_4","text":"\u65f6\u95f4\u65e5\u671f\u8f93\u5165\u6846 $create->datetime('column_name', 'placeholder...');","title":"\u65e5\u671f\u65f6\u95f4\u9009\u62e9"},{"location":"2.x/model-grid-quick-create/#time","text":"\u65f6\u95f4\u8f93\u5165\u6846 $create->time('column_name', 'placeholder...');","title":"\u65f6\u95f4\u9009\u62e9(time)"},{"location":"2.x/model-grid-quick-create/#_5","text":"$create->date('column_name', 'placeholder...');","title":"\u65e5\u671f\u9009\u62e9"},{"location":"2.x/model-grid-quick-search/","text":"\u8868\u683c\u5feb\u6377\u641c\u7d22 \u5feb\u6377\u641c\u7d22\u662f\u9664\u4e86 filter \u4e4b\u5916\u7684\u53e6\u4e00\u4e2a\u8868\u683c\u6570\u636e\u641c\u7d22\u65b9\u5f0f\uff0c\u7528\u6765\u5feb\u901f\u8fc7\u6ee4\u4f60\u60f3\u8981\u7684\u6570\u636e\uff0c\u5f00\u542f\u65b9\u5f0f\u5982\u4e0b\uff1a $grid->quickSearch(); // \u8bbe\u7f6e\u8868\u5355\u63d0\u793a\u503c $grid->quickSearch()->placeholder('\u641c\u7d22...'); \u8fd9\u6837\u8868\u5934\u4f1a\u51fa\u73b0\u4e00\u4e2a\u641c\u7d22\u6846: \u901a\u8fc7\u7ed9 quickSearch \u65b9\u6cd5\u4f20\u5165\u4e0d\u540c\u7684\u53c2\u6570\uff0c\u6765\u8bbe\u7f6e\u4e0d\u540c\u7684\u641c\u7d22\u65b9\u5f0f\uff0c\u6709\u4e0b\u9762\u51e0\u79cd\u4f7f\u7528\u65b9\u6cd5 Like\u641c\u7d22 \u7b2c\u4e00\u79cd\u65b9\u5f0f\uff0c\u901a\u8fc7\u8bbe\u7f6e\u5b57\u6bb5\u540d\u79f0\u6765\u8fdb\u884c\u7b80\u5355\u7684like\u67e5\u8be2 $grid->quickSearch('title'); // \u63d0\u4ea4\u540e\u6a21\u578b\u4f1a\u6267\u884c\u4e0b\u9762\u7684\u67e5\u8be2 $model->where('title', 'like', \"%{$input}%\"); \u6216\u8005\u5bf9\u591a\u4e2a\u5b57\u6bb5\u505alike\u67e5\u8be2: $grid->quickSearch('title', 'desc', 'content'); // \u6216 $grid->quickSearch(['title', 'desc', 'content']); // \u63d0\u4ea4\u540e\u6a21\u578b\u4f1a\u6267\u884c\u4e0b\u9762\u7684\u67e5\u8be2 $model->where('title', 'like', \"%{$input}%\") ->orWhere('desc', 'like', \"%{$input}%\") ->orWhere('content', 'like', \"%{$input}%\"); \u5173\u8054\u5173\u7cfb \u5982\u679c\u5b89\u88c5\u4e86 dcat/laravel-wherehasin \uff0c\u5219\u4f1a\u4f18\u5148\u4f7f\u7528 whereHasIn \u65b9\u6cd5\u8fdb\u884c\u67e5\u8be2\u64cd\u4f5c $grid->quickSearch('user.name', 'user.username', 'content'); \u81ea\u5b9a\u4e49\u641c\u7d22 \u7b2c\u4e8c\u79cd\u65b9\u5f0f\u53ef\u4ee5\u8ba9\u4f60\u66f4\u7075\u6d3b\u7684\u63a7\u5236\u641c\u7d22\u6761\u4ef6 $grid->quickSearch(function ($model, $query) { $model->where('title', $query)->orWhere('desc', 'like', \"%{$query}%\"); }); \u5176\u4e2d\u95ed\u5305\u7684\u53c2\u6570 $query \u4e3a\u4f60\u586b\u5165\u641c\u7d22\u6846\u4e2d\u7684\u5185\u5bb9\uff0c\u63d0\u4ea4\u4e4b\u540e\u8fdb\u884c\u95ed\u5305\u4e2d\u7684\u67e5\u8be2\u3002 \u5feb\u6377\u8bed\u6cd5\u641c\u7d22 \u7b2c\u4e09\u79cd\u65b9\u5f0f\u53c2\u8003\u4e86 Github \u7684\u641c\u7d22\u8bed\u6cd5\uff0c\u6765\u8fdb\u884c\u5feb\u6377\u641c\u7d22\uff0c\u8c03\u7528\u65b9\u5f0f\uff1a // \u4e0d\u4f20\u53c2\u6570 $grid->quickSearch(); \u586b\u5165\u641c\u7d22\u6846\u7684\u5185\u5bb9\u6309\u7167\u4ee5\u4e0b\u7684\u8bed\u6cd5\uff0c\u5728\u63d0\u4ea4\u4e4b\u540e\u4f1a\u8fdb\u884c\u76f8\u5e94\u7684\u67e5\u8be2 : \u6bd4\u8f83\u67e5\u8be2 title:foo \u3001 title:!foo $model->where('title', 'foo'); $model->where('title', '!=', 'foo'); rate:>10 \u3001 rate:<10 \u3001 rate:>=10 \u3001 rate:<=10 $model->where('rate', '>', 10); $model->where('rate', '<', 10); $model->where('rate', '>=', 10); $model->where('rate', '<=', 10); In\u3001NotIn\u67e5\u8be2 status:(1,2,3,4) \u3001 status:!(1,2,3,4) $model->whereIn('status', [1,2,3,4]); $model->whereNotIn('status', [1,2,3,4]); Between\u67e5\u8be2 score:[1,10] $model->whereBetween('score', [1, 10]); \u65f6\u95f4\u65e5\u671f\u51fd\u6570\u67e5\u8be2 created_at:date,2019-06-08 $model->whereDate('created_at', '2019-06-08'); created_at:time,09:57:45 $model->whereTime('created_at', '09:57:45'); created_at:day,08 $model->whereDay('created_at', '08'); created_at:month,06 $model->whereMonth('created_at', '06'); created_at:year,2019 $model->whereYear('created_at', '2019'); Like\u67e5\u8be2 content:%Laudantium% \u3001 content:Laud% $model->where('content', 'like', '%Laudantium%'); $model->where('content', 'like', 'Laud%'); \u6b63\u5219\u67e5\u8be2 username:/song/ {tip} \u8fd9\u91cc\u8bf7\u4f7f\u7528MYSQL\u6b63\u5219\u8bed\u6cd5 $model->where('username', 'REGEXP', 'song'); \u591a\u6761\u4ef6\u7ec4\u5408\u641c\u7d22 \u7528\u7a7a\u683c\u9694\u5f00\u591a\u4e2a\u641c\u7d22\u8bed\u53e5\u5c31\u53ef\u4ee5\u5b9e\u73b0\u591a\u4e2a\u5b57\u6bb5\u7684AND\u67e5\u8be2\uff0c\u6bd4\u5982 username:%song% status:(1,2,3) , \u63d0\u4ea4\u4e4b\u540e\u4f1a\u8fd0\u884c\u4e0b\u9762\u7684\u641c\u7d22 $model->where('username', 'like', '%song%')->whereIn('status', [1, 2, 3]); \u5982\u679c\u67d0\u4e00\u4e2a\u6761\u4ef6\u662f OR \u67e5\u8be2, \u53ea\u9700\u8981\u5728\u8bed\u53e5\u5355\u5143\u524d\u589e\u52a0\u4e00\u4e2a|\u7b26\u53f7\u5373\u53ef\uff1a username:%song% |status:(1,2,3) $model->where('username', 'like', '%song%')->orWhereIn('status', [1, 2, 3]); {tip} \u5982\u679c\u586b\u5165\u7684\u67e5\u8be2\u6587\u5b57\u4e2d\u5305\u542b\u7a7a\u683c\uff0c\u9700\u8981\u653e\u5728\u53cc\u5f15\u53f7\u91cc\u9762\uff1a updated_at:\"2019-06-08 09:57:45\" Label\u4f5c\u4e3a\u67e5\u8be2\u5b57\u6bb5\u540d\u79f0 \u4e0d\u65b9\u4fbf\u5f97\u5230\u5b57\u6bb5\u540d\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528label\u540d\u79f0\u4f5c\u4e3a\u67e5\u8be2\u5b57\u6bb5 // \u6bd4\u5982\u8bbe\u7f6e\u4e86`user_status`\u7684\u8868\u5934\u5217\u540d\u4e3a`\u7528\u6237\u72b6\u6001` $grid->column('user_status', '\u7528\u6237\u72b6\u6001'); \u90a3\u4e48\u53ef\u4ee5\u586b\u5165 \u7528\u6237\u72b6\u6001:(1,2,3) \u6765\u6267\u884c\u4e0b\u9762\u7684\u67e5\u8be2 $model->whereIn('user_status', [1, 2, 3]); \u7981\u6b62\u81ea\u52a8\u63d0\u4ea4 \u5feb\u6377\u641c\u7d22\u9ed8\u8ba4\u662f\u5f00\u542f\u81ea\u52a8\u63d0\u4ea4\u529f\u80fd\u7684\uff0c\u5982\u679c\u4f60\u4e0d\u9700\u8981\u81ea\u52a8\u63d0\u4ea4\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u7981\u7528\u8fd9\u4e2a\u529f\u80fd {tip} \u7981\u7528\u4e86\u81ea\u52a8\u63d0\u4ea4\u529f\u80fd\u4e4b\u540e\u9700\u8981\u901a\u8fc7\u6309\u56de\u8f66( Enter )\u952e\u8fdb\u884c\u641c\u7d22\u3002 $grid->quickSearch()->auto(false);","title":"\u8868\u683c\u5feb\u6377\u641c\u7d22"},{"location":"2.x/model-grid-quick-search/#_1","text":"\u5feb\u6377\u641c\u7d22\u662f\u9664\u4e86 filter \u4e4b\u5916\u7684\u53e6\u4e00\u4e2a\u8868\u683c\u6570\u636e\u641c\u7d22\u65b9\u5f0f\uff0c\u7528\u6765\u5feb\u901f\u8fc7\u6ee4\u4f60\u60f3\u8981\u7684\u6570\u636e\uff0c\u5f00\u542f\u65b9\u5f0f\u5982\u4e0b\uff1a $grid->quickSearch(); // \u8bbe\u7f6e\u8868\u5355\u63d0\u793a\u503c $grid->quickSearch()->placeholder('\u641c\u7d22...'); \u8fd9\u6837\u8868\u5934\u4f1a\u51fa\u73b0\u4e00\u4e2a\u641c\u7d22\u6846: \u901a\u8fc7\u7ed9 quickSearch \u65b9\u6cd5\u4f20\u5165\u4e0d\u540c\u7684\u53c2\u6570\uff0c\u6765\u8bbe\u7f6e\u4e0d\u540c\u7684\u641c\u7d22\u65b9\u5f0f\uff0c\u6709\u4e0b\u9762\u51e0\u79cd\u4f7f\u7528\u65b9\u6cd5","title":"\u8868\u683c\u5feb\u6377\u641c\u7d22"},{"location":"2.x/model-grid-quick-search/#like","text":"\u7b2c\u4e00\u79cd\u65b9\u5f0f\uff0c\u901a\u8fc7\u8bbe\u7f6e\u5b57\u6bb5\u540d\u79f0\u6765\u8fdb\u884c\u7b80\u5355\u7684like\u67e5\u8be2 $grid->quickSearch('title'); // \u63d0\u4ea4\u540e\u6a21\u578b\u4f1a\u6267\u884c\u4e0b\u9762\u7684\u67e5\u8be2 $model->where('title', 'like', \"%{$input}%\"); \u6216\u8005\u5bf9\u591a\u4e2a\u5b57\u6bb5\u505alike\u67e5\u8be2: $grid->quickSearch('title', 'desc', 'content'); // \u6216 $grid->quickSearch(['title', 'desc', 'content']); // \u63d0\u4ea4\u540e\u6a21\u578b\u4f1a\u6267\u884c\u4e0b\u9762\u7684\u67e5\u8be2 $model->where('title', 'like', \"%{$input}%\") ->orWhere('desc', 'like', \"%{$input}%\") ->orWhere('content', 'like', \"%{$input}%\");","title":"Like\u641c\u7d22"},{"location":"2.x/model-grid-quick-search/#_2","text":"\u5982\u679c\u5b89\u88c5\u4e86 dcat/laravel-wherehasin \uff0c\u5219\u4f1a\u4f18\u5148\u4f7f\u7528 whereHasIn \u65b9\u6cd5\u8fdb\u884c\u67e5\u8be2\u64cd\u4f5c $grid->quickSearch('user.name', 'user.username', 'content');","title":"\u5173\u8054\u5173\u7cfb"},{"location":"2.x/model-grid-quick-search/#_3","text":"\u7b2c\u4e8c\u79cd\u65b9\u5f0f\u53ef\u4ee5\u8ba9\u4f60\u66f4\u7075\u6d3b\u7684\u63a7\u5236\u641c\u7d22\u6761\u4ef6 $grid->quickSearch(function ($model, $query) { $model->where('title', $query)->orWhere('desc', 'like', \"%{$query}%\"); }); \u5176\u4e2d\u95ed\u5305\u7684\u53c2\u6570 $query \u4e3a\u4f60\u586b\u5165\u641c\u7d22\u6846\u4e2d\u7684\u5185\u5bb9\uff0c\u63d0\u4ea4\u4e4b\u540e\u8fdb\u884c\u95ed\u5305\u4e2d\u7684\u67e5\u8be2\u3002","title":"\u81ea\u5b9a\u4e49\u641c\u7d22"},{"location":"2.x/model-grid-quick-search/#_4","text":"\u7b2c\u4e09\u79cd\u65b9\u5f0f\u53c2\u8003\u4e86 Github \u7684\u641c\u7d22\u8bed\u6cd5\uff0c\u6765\u8fdb\u884c\u5feb\u6377\u641c\u7d22\uff0c\u8c03\u7528\u65b9\u5f0f\uff1a // \u4e0d\u4f20\u53c2\u6570 $grid->quickSearch(); \u586b\u5165\u641c\u7d22\u6846\u7684\u5185\u5bb9\u6309\u7167\u4ee5\u4e0b\u7684\u8bed\u6cd5\uff0c\u5728\u63d0\u4ea4\u4e4b\u540e\u4f1a\u8fdb\u884c\u76f8\u5e94\u7684\u67e5\u8be2 :","title":"\u5feb\u6377\u8bed\u6cd5\u641c\u7d22"},{"location":"2.x/model-grid-quick-search/#_5","text":"title:foo \u3001 title:!foo $model->where('title', 'foo'); $model->where('title', '!=', 'foo'); rate:>10 \u3001 rate:<10 \u3001 rate:>=10 \u3001 rate:<=10 $model->where('rate', '>', 10); $model->where('rate', '<', 10); $model->where('rate', '>=', 10); $model->where('rate', '<=', 10);","title":"\u6bd4\u8f83\u67e5\u8be2"},{"location":"2.x/model-grid-quick-search/#innotin","text":"status:(1,2,3,4) \u3001 status:!(1,2,3,4) $model->whereIn('status', [1,2,3,4]); $model->whereNotIn('status', [1,2,3,4]);","title":"In\u3001NotIn\u67e5\u8be2"},{"location":"2.x/model-grid-quick-search/#between","text":"score:[1,10] $model->whereBetween('score', [1, 10]);","title":"Between\u67e5\u8be2"},{"location":"2.x/model-grid-quick-search/#_6","text":"created_at:date,2019-06-08 $model->whereDate('created_at', '2019-06-08'); created_at:time,09:57:45 $model->whereTime('created_at', '09:57:45'); created_at:day,08 $model->whereDay('created_at', '08'); created_at:month,06 $model->whereMonth('created_at', '06'); created_at:year,2019 $model->whereYear('created_at', '2019');","title":"\u65f6\u95f4\u65e5\u671f\u51fd\u6570\u67e5\u8be2"},{"location":"2.x/model-grid-quick-search/#like_1","text":"content:%Laudantium% \u3001 content:Laud% $model->where('content', 'like', '%Laudantium%'); $model->where('content', 'like', 'Laud%');","title":"Like\u67e5\u8be2"},{"location":"2.x/model-grid-quick-search/#_7","text":"username:/song/ {tip} \u8fd9\u91cc\u8bf7\u4f7f\u7528MYSQL\u6b63\u5219\u8bed\u6cd5 $model->where('username', 'REGEXP', 'song');","title":"\u6b63\u5219\u67e5\u8be2"},{"location":"2.x/model-grid-quick-search/#_8","text":"\u7528\u7a7a\u683c\u9694\u5f00\u591a\u4e2a\u641c\u7d22\u8bed\u53e5\u5c31\u53ef\u4ee5\u5b9e\u73b0\u591a\u4e2a\u5b57\u6bb5\u7684AND\u67e5\u8be2\uff0c\u6bd4\u5982 username:%song% status:(1,2,3) , \u63d0\u4ea4\u4e4b\u540e\u4f1a\u8fd0\u884c\u4e0b\u9762\u7684\u641c\u7d22 $model->where('username', 'like', '%song%')->whereIn('status', [1, 2, 3]); \u5982\u679c\u67d0\u4e00\u4e2a\u6761\u4ef6\u662f OR \u67e5\u8be2, \u53ea\u9700\u8981\u5728\u8bed\u53e5\u5355\u5143\u524d\u589e\u52a0\u4e00\u4e2a|\u7b26\u53f7\u5373\u53ef\uff1a username:%song% |status:(1,2,3) $model->where('username', 'like', '%song%')->orWhereIn('status', [1, 2, 3]); {tip} \u5982\u679c\u586b\u5165\u7684\u67e5\u8be2\u6587\u5b57\u4e2d\u5305\u542b\u7a7a\u683c\uff0c\u9700\u8981\u653e\u5728\u53cc\u5f15\u53f7\u91cc\u9762\uff1a updated_at:\"2019-06-08 09:57:45\"","title":"\u591a\u6761\u4ef6\u7ec4\u5408\u641c\u7d22"},{"location":"2.x/model-grid-quick-search/#label","text":"\u4e0d\u65b9\u4fbf\u5f97\u5230\u5b57\u6bb5\u540d\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528label\u540d\u79f0\u4f5c\u4e3a\u67e5\u8be2\u5b57\u6bb5 // \u6bd4\u5982\u8bbe\u7f6e\u4e86`user_status`\u7684\u8868\u5934\u5217\u540d\u4e3a`\u7528\u6237\u72b6\u6001` $grid->column('user_status', '\u7528\u6237\u72b6\u6001'); \u90a3\u4e48\u53ef\u4ee5\u586b\u5165 \u7528\u6237\u72b6\u6001:(1,2,3) \u6765\u6267\u884c\u4e0b\u9762\u7684\u67e5\u8be2 $model->whereIn('user_status', [1, 2, 3]);","title":"Label\u4f5c\u4e3a\u67e5\u8be2\u5b57\u6bb5\u540d\u79f0"},{"location":"2.x/model-grid-quick-search/#_9","text":"\u5feb\u6377\u641c\u7d22\u9ed8\u8ba4\u662f\u5f00\u542f\u81ea\u52a8\u63d0\u4ea4\u529f\u80fd\u7684\uff0c\u5982\u679c\u4f60\u4e0d\u9700\u8981\u81ea\u52a8\u63d0\u4ea4\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u7981\u7528\u8fd9\u4e2a\u529f\u80fd {tip} \u7981\u7528\u4e86\u81ea\u52a8\u63d0\u4ea4\u529f\u80fd\u4e4b\u540e\u9700\u8981\u901a\u8fc7\u6309\u56de\u8f66( Enter )\u952e\u8fdb\u884c\u641c\u7d22\u3002 $grid->quickSearch()->auto(false);","title":"\u7981\u6b62\u81ea\u52a8\u63d0\u4ea4"},{"location":"2.x/model-grid-relationship/","text":"\u8868\u683c\u5173\u8054\u5173\u7cfb \u4e00\u5bf9\u4e00 users \u8868\u548c profiles \u8868\u901a\u8fc7 profiles.user_id \u5b57\u6bb5\u751f\u6210\u4e00\u5bf9\u4e00\u5173\u8054 CREATE TABLE `users` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; CREATE TABLE `profiles` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `user_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `age` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `gender` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; \u5bf9\u5e94\u7684\u6570\u636e\u6a21\u4ee5\u53ca\u6570\u636e\u4ed3\u5e93\u5206\u522b\u4e3a: <?php namespace App\\Models; use Illuminate\\Database\\Eloquent\\Model; class User extends Model { public function profile() { return $this->hasOne(Profile::class); } } <?php namespace App\\Models; use Illuminate\\Database\\Eloquent\\Model; class Profile extends Model { public function user() { return $this->belongsTo(User::class); } } \u6570\u636e\u4ed3\u5e93 <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use App\\Models\\User as UserModel; class User extends EloquentRepository { protected $eloquentClass = UserModel::class; } \u4e09\u79cd\u5173\u8054\u6570\u636e\u8868\u7684\u65b9\u6cd5 \u901a\u8fc7\u4ee5\u4e0b\u4e09\u79cd\u65b9\u5f0f\u7684\u4ee3\u7801\u53ef\u4ee5\u5173\u8054 profile \u8868\u6570\u636e: \u65b9\u5f0f\u4e00\uff1a\u76f4\u63a5\u4f7f\u7528\u6570\u636e\u4ed3\u5e93\u5173\u8054 use App\\Admin\\Repositories\\User; use Dcat\\Admin\\Grid; // \u5173\u8054 profile \u8868\u6570\u636e $grid = Grid::make(User::with(['profile']), function (Grid $grid) { $grid->id('ID')->sortable(); $grid->name(); $grid->email(); // \u663e\u793a\u4e00\u5bf9\u4e00\u6570\u636e $grid->column('profile.age'); $grid->column('profile.gender'); $grid->created_at(); $grid->updated_at(); }); \u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528 Model::with \u65b9\u6cd5\u5173\u8054 use App\\Models\\User; use Dcat\\Admin\\Grid; // \u5173\u8054 profile \u8868\u6570\u636e $grid = Grid::make(User::with(['profile']), function (Grid $grid) { $grid->id('ID')->sortable(); ... }); \u65b9\u5f0f\u4e09\uff1a\u4f7f\u7528 Grid\\Model \u65b9\u6cd5\u5173\u8054 use App\\Admin\\Repositories\\User; use Dcat\\Admin\\Grid; $grid = Grid::make(new User(), function (Grid $grid) { // \u5173\u8054 profile \u8868\u6570\u636e $grid->model()->with(['profile']); $grid->id('ID')->sortable(); ... }); \u4e00\u5bf9\u591a posts \u8868\u548c comments \u8868\u901a\u8fc7 comments.post_id \u5b57\u6bb5\u751f\u6210\u4e00\u5bf9\u591a\u5173\u8054 CREATE TABLE `posts` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `content` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; CREATE TABLE `comments` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `post_id` int(10) unsigned NOT NULL, `content` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; \u5bf9\u5e94\u7684\u6570\u636e\u6a21\u548c\u6570\u636e\u4ed3\u5e93\u5206\u522b\u4e3a: <?php namespace App\\Models; use Illuminate\\Database\\Eloquent\\Model; class Post extends Model { public function comments() { return $this->hasMany(Comment::class); } } <?php namespace App\\Models; use Illuminate\\Database\\Eloquent\\Model; class Comment extends Model { public function post() { return $this->belongsTo(Post::class); } } <?php namespace App\\Admin\\Repositories; use App\\Models\\Post as PostModel; use Dcat\\Admin\\Repositories\\EloquentRepository; class Post extends EloquentRepository { protected $eloquentClass = PostModel::class; } <?php namespace App\\Admin\\Repositories; use App\\Models\\Comment as CommentModel; use Dcat\\Admin\\Repositories\\EloquentRepository; class Comment extends EloquentRepository { protected $eloquentClass = CommentModel::class; } \u540c\u6837\u8fd9\u91cc\u652f\u6301\u4e0a\u8ff0\u7684 \u4e09\u79cd\u65b9\u5f0f\u5173\u8054\u6570\u636e \uff0c\u9650\u4e8e\u7bc7\u5e45\u8fd9\u91cc\u4e0d\u518d\u91cd\u590d\u5199\u6240\u6709\u7528\u6cd5 Post\u8868\u683c use App\\Admin\\Repositories\\Post; // \u5173\u8054 comment \u8868\u6570\u636e $grid = Grid::make(Post::with(['comments']), function (Grid $grid) { $grid->id('id')->sortable(); $grid->title(); $grid->content(); $grid->comments('\u8bc4\u8bba\u6570')->display(function ($comments) { $count = count($comments); return \"<span class='label label-warning'>{$count}</span>\"; }); $grid->created_at(); $grid->updated_at(); }); Comment\u8868\u683c use App\\Admin\\Repositories\\Comment; // \u5173\u8054 post \u8868\u6570\u636e $grid = new Grid(Comment::with(['post'])); $grid->column('id'); $grid->column('post.title'); $grid->column('content'); $grid->created_at()->sortable(); $grid->updated_at(); \u591a\u5bf9\u591a users \u548c roles \u8868\u901a\u8fc7\u4e2d\u95f4\u8868 role_users \u4ea7\u751f\u591a\u5bf9\u591a\u5173\u7cfb CREATE TABLE `users` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `username` varchar(190) COLLATE utf8_unicode_ci NOT NULL, `password` varchar(60) COLLATE utf8_unicode_ci NOT NULL, `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `users_username_unique` (`username`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci CREATE TABLE `roles` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(50) COLLATE utf8_unicode_ci NOT NULL, `slug` varchar(50) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `roles_name_unique` (`name`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci CREATE TABLE `role_users` ( `role_id` int(11) NOT NULL, `user_id` int(11) NOT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, KEY `role_users_role_id_user_id_index` (`role_id`,`user_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci \u5bf9\u5e94\u7684\u6570\u636e\u6a21\u548c\u6570\u636e\u4ed3\u5e93\u5206\u522b\u4e3a: User \u6a21\u578b <?php namespace App\\Models; use Illuminate\\Database\\Eloquent\\Model; class User extends Model { public function roles() { return $this->belongsToMany(Role::class); } } Role \u6a21\u578b <?php namespace App\\Models; use Illuminate\\Database\\Eloquent\\Model; class Role extends Model { public function users() { return $this->belongsToMany(User::class); } } \u6570\u636e\u4ed3\u5e93 <?php namespace App\\Admin\\Repositories; use App\\Models\\User as UserModel; use Dcat\\Admin\\Repositories\\EloquentRepository; class User extends EloquentRepository { protected $eloquentClass = UserModel::class; } \u540c\u6837\u8fd9\u91cc\u652f\u6301\u4e0a\u8ff0\u7684 \u4e09\u79cd\u65b9\u5f0f\u5173\u8054\u6570\u636e \uff0c\u9650\u4e8e\u7bc7\u5e45\u8fd9\u91cc\u4e0d\u518d\u91cd\u590d\u5199\u6240\u6709\u7528\u6cd5 use App\\Admin\\Repositories\\User; // \u5173\u8054 role \u8868\u6570\u636e $grid = Grid::make(User::with('roles'), function (Grid $grid) { $grid->id('ID')->sortable(); $grid->username(); $grid->name(); $grid->roles()->pluck('name')->label(); $grid->created_at(); $grid->updated_at(); });","title":"\u8868\u683c\u5173\u8054\u5173\u7cfb"},{"location":"2.x/model-grid-relationship/#_1","text":"","title":"\u8868\u683c\u5173\u8054\u5173\u7cfb"},{"location":"2.x/model-grid-relationship/#_2","text":"users \u8868\u548c profiles \u8868\u901a\u8fc7 profiles.user_id \u5b57\u6bb5\u751f\u6210\u4e00\u5bf9\u4e00\u5173\u8054 CREATE TABLE `users` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; CREATE TABLE `profiles` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `user_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `age` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `gender` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; \u5bf9\u5e94\u7684\u6570\u636e\u6a21\u4ee5\u53ca\u6570\u636e\u4ed3\u5e93\u5206\u522b\u4e3a: <?php namespace App\\Models; use Illuminate\\Database\\Eloquent\\Model; class User extends Model { public function profile() { return $this->hasOne(Profile::class); } } <?php namespace App\\Models; use Illuminate\\Database\\Eloquent\\Model; class Profile extends Model { public function user() { return $this->belongsTo(User::class); } } \u6570\u636e\u4ed3\u5e93 <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use App\\Models\\User as UserModel; class User extends EloquentRepository { protected $eloquentClass = UserModel::class; }","title":"\u4e00\u5bf9\u4e00"},{"location":"2.x/model-grid-relationship/#_3","text":"\u901a\u8fc7\u4ee5\u4e0b\u4e09\u79cd\u65b9\u5f0f\u7684\u4ee3\u7801\u53ef\u4ee5\u5173\u8054 profile \u8868\u6570\u636e: \u65b9\u5f0f\u4e00\uff1a\u76f4\u63a5\u4f7f\u7528\u6570\u636e\u4ed3\u5e93\u5173\u8054 use App\\Admin\\Repositories\\User; use Dcat\\Admin\\Grid; // \u5173\u8054 profile \u8868\u6570\u636e $grid = Grid::make(User::with(['profile']), function (Grid $grid) { $grid->id('ID')->sortable(); $grid->name(); $grid->email(); // \u663e\u793a\u4e00\u5bf9\u4e00\u6570\u636e $grid->column('profile.age'); $grid->column('profile.gender'); $grid->created_at(); $grid->updated_at(); }); \u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528 Model::with \u65b9\u6cd5\u5173\u8054 use App\\Models\\User; use Dcat\\Admin\\Grid; // \u5173\u8054 profile \u8868\u6570\u636e $grid = Grid::make(User::with(['profile']), function (Grid $grid) { $grid->id('ID')->sortable(); ... }); \u65b9\u5f0f\u4e09\uff1a\u4f7f\u7528 Grid\\Model \u65b9\u6cd5\u5173\u8054 use App\\Admin\\Repositories\\User; use Dcat\\Admin\\Grid; $grid = Grid::make(new User(), function (Grid $grid) { // \u5173\u8054 profile \u8868\u6570\u636e $grid->model()->with(['profile']); $grid->id('ID')->sortable(); ... });","title":"\u4e09\u79cd\u5173\u8054\u6570\u636e\u8868\u7684\u65b9\u6cd5"},{"location":"2.x/model-grid-relationship/#_4","text":"posts \u8868\u548c comments \u8868\u901a\u8fc7 comments.post_id \u5b57\u6bb5\u751f\u6210\u4e00\u5bf9\u591a\u5173\u8054 CREATE TABLE `posts` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `content` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; CREATE TABLE `comments` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `post_id` int(10) unsigned NOT NULL, `content` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; \u5bf9\u5e94\u7684\u6570\u636e\u6a21\u548c\u6570\u636e\u4ed3\u5e93\u5206\u522b\u4e3a: <?php namespace App\\Models; use Illuminate\\Database\\Eloquent\\Model; class Post extends Model { public function comments() { return $this->hasMany(Comment::class); } } <?php namespace App\\Models; use Illuminate\\Database\\Eloquent\\Model; class Comment extends Model { public function post() { return $this->belongsTo(Post::class); } } <?php namespace App\\Admin\\Repositories; use App\\Models\\Post as PostModel; use Dcat\\Admin\\Repositories\\EloquentRepository; class Post extends EloquentRepository { protected $eloquentClass = PostModel::class; } <?php namespace App\\Admin\\Repositories; use App\\Models\\Comment as CommentModel; use Dcat\\Admin\\Repositories\\EloquentRepository; class Comment extends EloquentRepository { protected $eloquentClass = CommentModel::class; } \u540c\u6837\u8fd9\u91cc\u652f\u6301\u4e0a\u8ff0\u7684 \u4e09\u79cd\u65b9\u5f0f\u5173\u8054\u6570\u636e \uff0c\u9650\u4e8e\u7bc7\u5e45\u8fd9\u91cc\u4e0d\u518d\u91cd\u590d\u5199\u6240\u6709\u7528\u6cd5 Post\u8868\u683c use App\\Admin\\Repositories\\Post; // \u5173\u8054 comment \u8868\u6570\u636e $grid = Grid::make(Post::with(['comments']), function (Grid $grid) { $grid->id('id')->sortable(); $grid->title(); $grid->content(); $grid->comments('\u8bc4\u8bba\u6570')->display(function ($comments) { $count = count($comments); return \"<span class='label label-warning'>{$count}</span>\"; }); $grid->created_at(); $grid->updated_at(); }); Comment\u8868\u683c use App\\Admin\\Repositories\\Comment; // \u5173\u8054 post \u8868\u6570\u636e $grid = new Grid(Comment::with(['post'])); $grid->column('id'); $grid->column('post.title'); $grid->column('content'); $grid->created_at()->sortable(); $grid->updated_at();","title":"\u4e00\u5bf9\u591a"},{"location":"2.x/model-grid-relationship/#_5","text":"users \u548c roles \u8868\u901a\u8fc7\u4e2d\u95f4\u8868 role_users \u4ea7\u751f\u591a\u5bf9\u591a\u5173\u7cfb CREATE TABLE `users` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `username` varchar(190) COLLATE utf8_unicode_ci NOT NULL, `password` varchar(60) COLLATE utf8_unicode_ci NOT NULL, `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `users_username_unique` (`username`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci CREATE TABLE `roles` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(50) COLLATE utf8_unicode_ci NOT NULL, `slug` varchar(50) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `roles_name_unique` (`name`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci CREATE TABLE `role_users` ( `role_id` int(11) NOT NULL, `user_id` int(11) NOT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, KEY `role_users_role_id_user_id_index` (`role_id`,`user_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci \u5bf9\u5e94\u7684\u6570\u636e\u6a21\u548c\u6570\u636e\u4ed3\u5e93\u5206\u522b\u4e3a: User \u6a21\u578b <?php namespace App\\Models; use Illuminate\\Database\\Eloquent\\Model; class User extends Model { public function roles() { return $this->belongsToMany(Role::class); } } Role \u6a21\u578b <?php namespace App\\Models; use Illuminate\\Database\\Eloquent\\Model; class Role extends Model { public function users() { return $this->belongsToMany(User::class); } } \u6570\u636e\u4ed3\u5e93 <?php namespace App\\Admin\\Repositories; use App\\Models\\User as UserModel; use Dcat\\Admin\\Repositories\\EloquentRepository; class User extends EloquentRepository { protected $eloquentClass = UserModel::class; } \u540c\u6837\u8fd9\u91cc\u652f\u6301\u4e0a\u8ff0\u7684 \u4e09\u79cd\u65b9\u5f0f\u5173\u8054\u6570\u636e \uff0c\u9650\u4e8e\u7bc7\u5e45\u8fd9\u91cc\u4e0d\u518d\u91cd\u590d\u5199\u6240\u6709\u7528\u6cd5 use App\\Admin\\Repositories\\User; // \u5173\u8054 role \u8868\u6570\u636e $grid = Grid::make(User::with('roles'), function (Grid $grid) { $grid->id('ID')->sortable(); $grid->username(); $grid->name(); $grid->roles()->pluck('name')->label(); $grid->created_at(); $grid->updated_at(); });","title":"\u591a\u5bf9\u591a"},{"location":"2.x/model-grid-selector/","text":"\u8868\u683c\u89c4\u683c\u7b5b\u9009\u5668 \u8fd9\u4e2a\u529f\u80fd\u7528\u6765\u6784\u5efa\u7c7b\u4f3c\u6dd8\u5b9d\u6216\u4eac\u4e1c\u5546\u54c1\u7684\u89c4\u683c\u9009\u62e9\u3002 \u57fa\u672c\u4f7f\u7528 {tip} select \u548c selectOne \u65b9\u6cd5\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u9009\u62e9\u5668 label , \u53ef\u4ee5\u7701\u7565\uff0c\u5982\u679c\u7701\u7565\u7684\u8bdd\u5c06\u4f1a\u81ea\u52a8\u4f7f\u7528\u7ffb\u8bd1\u6587\u4ef6\u7684\u7ffb\u8bd1. \u5982\u4e0b\u4ee3\u7801\u6240\u793a\uff0c\u5047\u8bbe brand \u5b57\u6bb5\u76844\u4e2a\u53d6\u503c\u5206\u522b\u5bf9\u5e944\u4e2a\u54c1\u724c\uff0c\u4e0b\u9762\u7684\u65b9\u5f0f\u4f1a\u6784\u5efa\u51fa brand \u7684\u89c4\u683c\u9009\u62e9\u5668 use Dcat\\Admin\\Grid; $grid->selector(function (Grid\\Tools\\Selector $selector) { $selector->select('brand', '\u54c1\u724c', [ 1 => '\u534e\u4e3a', 2 => '\u5c0f\u7c73', 3 => 'OPPO', 4 => 'vivo', ]); }); select \u65b9\u6cd5\u9ed8\u8ba4\u662f\u591a\u9009\u7684\uff0c\u5728\u9875\u9762\u4e0a\u70b9\u51fb\u6bcf\u4e00\u4e2a\u9009\u9879\u7684\u53f3\u8fb9\u7684\u52a0\u53f7\uff0c\u8fd9\u4e2a\u5b57\u6bb5\u7684\u67e5\u8be2\u4f1a\u589e\u52a0\u4e00\u4e2a\u67e5\u8be2\u9009\u9879\uff0c\u5982\u679c\u5b57\u6bb5\u7b5b\u9009\u53ea\u5141\u8bb8\u9009\u62e9\u4e00\u9879\uff0c\u4f7f\u7528 selectOne \u65b9\u6cd5 $selector->selectOne('brand', '\u54c1\u724c', [ 1 => '\u534e\u4e3a', 2 => '\u5c0f\u7c73', 3 => 'OPPO', 4 => 'vivo', ]); \u5173\u8054\u5173\u7cfb\u5b57\u6bb5\u67e5\u8be2 \u5982\u679c\u5b89\u88c5\u4e86 dcat/laravel-wherehasin \uff0c\u5219\u4f1a\u4f18\u5148\u4f7f\u7528 whereHasIn \u65b9\u6cd5\u8fdb\u884c\u67e5\u8be2\u64cd\u4f5c use Dcat\\Admin\\Grid; $grid->selector(function (Grid\\Tools\\Selector $selector) { $selector->select('brand.id', '\u54c1\u724c', [ 1 => '\u534e\u4e3a', 2 => '\u5c0f\u7c73', 3 => 'OPPO', 4 => 'vivo', ]); }); \u81ea\u5b9a\u4e49\u67e5\u8be2 \u4e0a\u9762\u7684\u65b9\u5f0f\u4f1a\u4f7f\u7528\u5728\u9009\u62e9\u5668\u4e0a\u9009\u5b9a\u7684\u503c\uff0c\u4f5c\u4e3a\u67e5\u8be2\u6761\u4ef6\u8fdb\u884c\u67e5\u8be2\uff0c\u4f46\u662f\u6709\u4e9b\u60c5\u51b5\u9700\u8981\u66f4\u7075\u6d3b\u7684\u63a7\u5236\u67e5\u8be2\u65b9\u5f0f\uff0c\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u65b9\u5f0f\u81ea\u5b9a\u4e49\u67e5\u8be2\uff1a $selector->select('price', '\u4ef7\u683c', ['0-999', '1000-1999', '2000-2999'], function ($query, $value) { $between = [ [0, 999], [1000, 1999], [2000, 2999], ]; $value = current($value); $query->whereBetween('price', $between[$value]); }); \u5982\u4e0a\u6240\u793a\uff0c\u4f20\u5165\u4e00\u4e2a\u533f\u540d\u51fd\u6570\u4f5c\u4e3a\u7b2c\u56db\u4e2a\u53c2\u6570\uff0c\u4ef7\u683c\u5b57\u6bb5price\u9009\u62e9\u4e4b\u540e\uff0c\u5c06\u4f1a\u4f7f\u7528\u533f\u540d\u51fd\u6570\u4e2d\u7684\u903b\u8f91\u8fdb\u884c\u6570\u636e\u67e5\u8be2\uff0c\u8fd9\u6837\u4f60\u53ef\u4ee5\u5b9a\u4e49\u4efb\u610f\u7684\u67e5\u8be2\u65b9\u5f0f\u3002","title":"\u8868\u683c\u89c4\u683c\u7b5b\u9009\u5668"},{"location":"2.x/model-grid-selector/#_1","text":"\u8fd9\u4e2a\u529f\u80fd\u7528\u6765\u6784\u5efa\u7c7b\u4f3c\u6dd8\u5b9d\u6216\u4eac\u4e1c\u5546\u54c1\u7684\u89c4\u683c\u9009\u62e9\u3002","title":"\u8868\u683c\u89c4\u683c\u7b5b\u9009\u5668"},{"location":"2.x/model-grid-selector/#_2","text":"{tip} select \u548c selectOne \u65b9\u6cd5\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u9009\u62e9\u5668 label , \u53ef\u4ee5\u7701\u7565\uff0c\u5982\u679c\u7701\u7565\u7684\u8bdd\u5c06\u4f1a\u81ea\u52a8\u4f7f\u7528\u7ffb\u8bd1\u6587\u4ef6\u7684\u7ffb\u8bd1. \u5982\u4e0b\u4ee3\u7801\u6240\u793a\uff0c\u5047\u8bbe brand \u5b57\u6bb5\u76844\u4e2a\u53d6\u503c\u5206\u522b\u5bf9\u5e944\u4e2a\u54c1\u724c\uff0c\u4e0b\u9762\u7684\u65b9\u5f0f\u4f1a\u6784\u5efa\u51fa brand \u7684\u89c4\u683c\u9009\u62e9\u5668 use Dcat\\Admin\\Grid; $grid->selector(function (Grid\\Tools\\Selector $selector) { $selector->select('brand', '\u54c1\u724c', [ 1 => '\u534e\u4e3a', 2 => '\u5c0f\u7c73', 3 => 'OPPO', 4 => 'vivo', ]); }); select \u65b9\u6cd5\u9ed8\u8ba4\u662f\u591a\u9009\u7684\uff0c\u5728\u9875\u9762\u4e0a\u70b9\u51fb\u6bcf\u4e00\u4e2a\u9009\u9879\u7684\u53f3\u8fb9\u7684\u52a0\u53f7\uff0c\u8fd9\u4e2a\u5b57\u6bb5\u7684\u67e5\u8be2\u4f1a\u589e\u52a0\u4e00\u4e2a\u67e5\u8be2\u9009\u9879\uff0c\u5982\u679c\u5b57\u6bb5\u7b5b\u9009\u53ea\u5141\u8bb8\u9009\u62e9\u4e00\u9879\uff0c\u4f7f\u7528 selectOne \u65b9\u6cd5 $selector->selectOne('brand', '\u54c1\u724c', [ 1 => '\u534e\u4e3a', 2 => '\u5c0f\u7c73', 3 => 'OPPO', 4 => 'vivo', ]);","title":"\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/model-grid-selector/#_3","text":"\u5982\u679c\u5b89\u88c5\u4e86 dcat/laravel-wherehasin \uff0c\u5219\u4f1a\u4f18\u5148\u4f7f\u7528 whereHasIn \u65b9\u6cd5\u8fdb\u884c\u67e5\u8be2\u64cd\u4f5c use Dcat\\Admin\\Grid; $grid->selector(function (Grid\\Tools\\Selector $selector) { $selector->select('brand.id', '\u54c1\u724c', [ 1 => '\u534e\u4e3a', 2 => '\u5c0f\u7c73', 3 => 'OPPO', 4 => 'vivo', ]); });","title":"\u5173\u8054\u5173\u7cfb\u5b57\u6bb5\u67e5\u8be2"},{"location":"2.x/model-grid-selector/#_4","text":"\u4e0a\u9762\u7684\u65b9\u5f0f\u4f1a\u4f7f\u7528\u5728\u9009\u62e9\u5668\u4e0a\u9009\u5b9a\u7684\u503c\uff0c\u4f5c\u4e3a\u67e5\u8be2\u6761\u4ef6\u8fdb\u884c\u67e5\u8be2\uff0c\u4f46\u662f\u6709\u4e9b\u60c5\u51b5\u9700\u8981\u66f4\u7075\u6d3b\u7684\u63a7\u5236\u67e5\u8be2\u65b9\u5f0f\uff0c\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u65b9\u5f0f\u81ea\u5b9a\u4e49\u67e5\u8be2\uff1a $selector->select('price', '\u4ef7\u683c', ['0-999', '1000-1999', '2000-2999'], function ($query, $value) { $between = [ [0, 999], [1000, 1999], [2000, 2999], ]; $value = current($value); $query->whereBetween('price', $between[$value]); }); \u5982\u4e0a\u6240\u793a\uff0c\u4f20\u5165\u4e00\u4e2a\u533f\u540d\u51fd\u6570\u4f5c\u4e3a\u7b2c\u56db\u4e2a\u53c2\u6570\uff0c\u4ef7\u683c\u5b57\u6bb5price\u9009\u62e9\u4e4b\u540e\uff0c\u5c06\u4f1a\u4f7f\u7528\u533f\u540d\u51fd\u6570\u4e2d\u7684\u903b\u8f91\u8fdb\u884c\u6570\u636e\u67e5\u8be2\uff0c\u8fd9\u6837\u4f60\u53ef\u4ee5\u5b9a\u4e49\u4efb\u610f\u7684\u67e5\u8be2\u65b9\u5f0f\u3002","title":"\u81ea\u5b9a\u4e49\u67e5\u8be2"},{"location":"2.x/model-grid-softdelete/","text":"\u6570\u636e\u8f6f\u5220\u9664 \u5148\u53c2\u8003 Laravel \u6587\u6863\u5b9e\u73b0\u6a21\u578b\u7684 \u8f6f\u5220\u9664 : <?php namespace App\\Models; use Illuminate\\Database\\Eloquent\\Model; use Illuminate\\Database\\Eloquent\\SoftDeletes; class Post extends Model { use SoftDeletes; } \u8fd9\u6837\u5728 grid \u5217\u8868\u4e2d\u663e\u793a\u7684\u6570\u636e\u90fd\u662f\u672a\u88ab\u5220\u9664\u7684\u6570\u636e return Grid::make(new Post(), function (Grid $grid) { $grid->id('ID')->sortable(); $grid->title('Title'); $grid->created_at('Created at'); $grid->updated_at('Updated at'); }); \u56de\u6536\u7ad9\u5165\u53e3 \u63a5\u4e0b\u6765\u9700\u8981\u589e\u52a0\u4e00\u4e2a\u5165\u53e3\uff0c\u80fd\u8ba9\u6211\u4eec\u770b\u5230\u88ab\u8f6f\u5220\u9664\u7684\u6570\u636e\uff0c\u8fd9\u91cc\u53ef\u4ee5\u4f7f\u7528 model-grid \u7684 \u8303\u56f4\u8fc7\u6ee4\u5668 \u6765\u5b9e\u73b0 $grid->filter(function () { // \u8303\u56f4\u8fc7\u6ee4\u5668\uff0c\u8c03\u7528\u6a21\u578b\u7684`onlyTrashed`\u65b9\u6cd5\uff0c\u67e5\u8be2\u51fa\u88ab\u8f6f\u5220\u9664\u7684\u6570\u636e\u3002 $filter->scope('trashed', '\u56de\u6536\u7ad9')->onlyTrashed(); }); \u5728\u8868\u5934\u7684\u7b5b\u9009\u6309\u94ae\u7684\u4e0b\u62c9\u83dc\u5355\u4e2d\u5c31\u4f1a\u51fa\u73b0\u4e00\u4e2a \u56de\u6536\u7ad9 \u6309\u94ae\uff0c\u70b9\u51fb\u5b83\uff0c\u5c31\u4f1a\u8c03\u7528\u6a21\u578b\u7684 onlyTrashed \u65b9\u6cd5\uff0c\u4ece\u8868\u4e2d\u67e5\u8be2\u51fa\u88ab\u5220\u9664\u7684\u6570\u636e\uff0c\u4e5f\u5c31\u662f\u56de\u6536\u7ad9\u4e2d\u7684\u6570\u636e\u3002 \u884c\u6062\u590d\u64cd\u4f5c \u6309\u7167\u4e0b\u9762\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u56de\u6536\u7ad9\u4e2d\u7684\u6bcf\u4e00\u884c\u6570\u636e\u52a0\u4e0a\u4e00\u4e2a\u6062\u590d\u64cd\u4f5c\uff0c\u65b9\u4fbf\u6062\u590d\u6570\u636e \u5148\u5b9a\u4e49\u64cd\u4f5c\u7c7b app/Admin/Actions/Post/Restore.php \uff1a <?php namespace App\\Admin\\Actions\\Post; use Dcat\\Admin\\Grid\\RowAction; use Illuminate\\Http\\Request; class Restore extends RowAction { protected $title = '\u6062\u590d'; protected $model; // \u6ce8\u610f\u6784\u9020\u65b9\u6cd5\u7684\u53c2\u6570\u5fc5\u987b\u8981\u6709\u9ed8\u8ba4\u503c public function __construct(string $model = null) { $this->model = $model; } public function handle(Request $request) { $key = $this->getKey(); $model = $request->get('model'); $model::withTrashed()->findOrFail($key)->restore(); return $this->response()->success('\u5df2\u6062\u590d')->refresh(); } public function confirm() { return ['\u786e\u5b9a\u6062\u590d\u5417\uff1f']; } public function parameters() { return [ 'model' => $this->model, ]; } } \u6dfb\u52a0\u5230\u884c\u64cd\u4f5c: use App\\Models\\Post; use App\\Admin\\Actions\\Post\\Restore; $grid->actions(function (Grid\\Displayers\\Actions $actions) { if (request('_scope_') == 'trashed') { $actions->append(new Restore(Post::class)); } }); \u6279\u91cf\u6062\u590d\u64cd\u4f5c \u5148\u5b9a\u4e49\u64cd\u4f5c\u7c7b app/Admin/Actions/Post/BatchRestore.php \uff1a <?php namespace App\\Admin\\Actions\\Post; use Dcat\\Admin\\Grid\\BatchAction; use Illuminate\\Http\\Request; class BatchRestore extends BatchAction { protected $title = '\u6062\u590d'; protected $model; // \u6ce8\u610f\u6784\u9020\u65b9\u6cd5\u7684\u53c2\u6570\u5fc5\u987b\u8981\u6709\u9ed8\u8ba4\u503c public function __construct(string $model = null) { $this->model = $model; } public function handle(Request $request) { $model = $request->get('model'); foreach ((array) $this->getKey() as $key) { $model::withTrashed()->findOrFail($key)->restore(); } return $this->response()->success('\u5df2\u6062\u590d')->refresh(); } public function confirm() { return ['\u786e\u5b9a\u6062\u590d\u5417\uff1f']; } public function parameters() { return [ 'model' => $this->model, ]; } } \u6dfb\u52a0\u5230\u6279\u91cf\u64cd\u4f5c: use App\\Models\\Post; use App\\Admin\\Actions\\Post\\BatchRestore; $grid->batchActions(function (Grid\\Tools\\BatchActions $batch) { if (request('_scope_') == 'trashed') { $batch->add(new BatchRestore(Post::class)); } });","title":"\u6570\u636e\u8f6f\u5220\u9664"},{"location":"2.x/model-grid-softdelete/#_1","text":"\u5148\u53c2\u8003 Laravel \u6587\u6863\u5b9e\u73b0\u6a21\u578b\u7684 \u8f6f\u5220\u9664 : <?php namespace App\\Models; use Illuminate\\Database\\Eloquent\\Model; use Illuminate\\Database\\Eloquent\\SoftDeletes; class Post extends Model { use SoftDeletes; } \u8fd9\u6837\u5728 grid \u5217\u8868\u4e2d\u663e\u793a\u7684\u6570\u636e\u90fd\u662f\u672a\u88ab\u5220\u9664\u7684\u6570\u636e return Grid::make(new Post(), function (Grid $grid) { $grid->id('ID')->sortable(); $grid->title('Title'); $grid->created_at('Created at'); $grid->updated_at('Updated at'); });","title":"\u6570\u636e\u8f6f\u5220\u9664"},{"location":"2.x/model-grid-softdelete/#_2","text":"\u63a5\u4e0b\u6765\u9700\u8981\u589e\u52a0\u4e00\u4e2a\u5165\u53e3\uff0c\u80fd\u8ba9\u6211\u4eec\u770b\u5230\u88ab\u8f6f\u5220\u9664\u7684\u6570\u636e\uff0c\u8fd9\u91cc\u53ef\u4ee5\u4f7f\u7528 model-grid \u7684 \u8303\u56f4\u8fc7\u6ee4\u5668 \u6765\u5b9e\u73b0 $grid->filter(function () { // \u8303\u56f4\u8fc7\u6ee4\u5668\uff0c\u8c03\u7528\u6a21\u578b\u7684`onlyTrashed`\u65b9\u6cd5\uff0c\u67e5\u8be2\u51fa\u88ab\u8f6f\u5220\u9664\u7684\u6570\u636e\u3002 $filter->scope('trashed', '\u56de\u6536\u7ad9')->onlyTrashed(); }); \u5728\u8868\u5934\u7684\u7b5b\u9009\u6309\u94ae\u7684\u4e0b\u62c9\u83dc\u5355\u4e2d\u5c31\u4f1a\u51fa\u73b0\u4e00\u4e2a \u56de\u6536\u7ad9 \u6309\u94ae\uff0c\u70b9\u51fb\u5b83\uff0c\u5c31\u4f1a\u8c03\u7528\u6a21\u578b\u7684 onlyTrashed \u65b9\u6cd5\uff0c\u4ece\u8868\u4e2d\u67e5\u8be2\u51fa\u88ab\u5220\u9664\u7684\u6570\u636e\uff0c\u4e5f\u5c31\u662f\u56de\u6536\u7ad9\u4e2d\u7684\u6570\u636e\u3002","title":"\u56de\u6536\u7ad9\u5165\u53e3"},{"location":"2.x/model-grid-softdelete/#_3","text":"\u6309\u7167\u4e0b\u9762\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u56de\u6536\u7ad9\u4e2d\u7684\u6bcf\u4e00\u884c\u6570\u636e\u52a0\u4e0a\u4e00\u4e2a\u6062\u590d\u64cd\u4f5c\uff0c\u65b9\u4fbf\u6062\u590d\u6570\u636e \u5148\u5b9a\u4e49\u64cd\u4f5c\u7c7b app/Admin/Actions/Post/Restore.php \uff1a <?php namespace App\\Admin\\Actions\\Post; use Dcat\\Admin\\Grid\\RowAction; use Illuminate\\Http\\Request; class Restore extends RowAction { protected $title = '\u6062\u590d'; protected $model; // \u6ce8\u610f\u6784\u9020\u65b9\u6cd5\u7684\u53c2\u6570\u5fc5\u987b\u8981\u6709\u9ed8\u8ba4\u503c public function __construct(string $model = null) { $this->model = $model; } public function handle(Request $request) { $key = $this->getKey(); $model = $request->get('model'); $model::withTrashed()->findOrFail($key)->restore(); return $this->response()->success('\u5df2\u6062\u590d')->refresh(); } public function confirm() { return ['\u786e\u5b9a\u6062\u590d\u5417\uff1f']; } public function parameters() { return [ 'model' => $this->model, ]; } } \u6dfb\u52a0\u5230\u884c\u64cd\u4f5c: use App\\Models\\Post; use App\\Admin\\Actions\\Post\\Restore; $grid->actions(function (Grid\\Displayers\\Actions $actions) { if (request('_scope_') == 'trashed') { $actions->append(new Restore(Post::class)); } });","title":"\u884c\u6062\u590d\u64cd\u4f5c"},{"location":"2.x/model-grid-softdelete/#_4","text":"\u5148\u5b9a\u4e49\u64cd\u4f5c\u7c7b app/Admin/Actions/Post/BatchRestore.php \uff1a <?php namespace App\\Admin\\Actions\\Post; use Dcat\\Admin\\Grid\\BatchAction; use Illuminate\\Http\\Request; class BatchRestore extends BatchAction { protected $title = '\u6062\u590d'; protected $model; // \u6ce8\u610f\u6784\u9020\u65b9\u6cd5\u7684\u53c2\u6570\u5fc5\u987b\u8981\u6709\u9ed8\u8ba4\u503c public function __construct(string $model = null) { $this->model = $model; } public function handle(Request $request) { $model = $request->get('model'); foreach ((array) $this->getKey() as $key) { $model::withTrashed()->findOrFail($key)->restore(); } return $this->response()->success('\u5df2\u6062\u590d')->refresh(); } public function confirm() { return ['\u786e\u5b9a\u6062\u590d\u5417\uff1f']; } public function parameters() { return [ 'model' => $this->model, ]; } } \u6dfb\u52a0\u5230\u6279\u91cf\u64cd\u4f5c: use App\\Models\\Post; use App\\Admin\\Actions\\Post\\BatchRestore; $grid->batchActions(function (Grid\\Tools\\BatchActions $batch) { if (request('_scope_') == 'trashed') { $batch->add(new BatchRestore(Post::class)); } });","title":"\u6279\u91cf\u6062\u590d\u64cd\u4f5c"},{"location":"2.x/model-grid-trans/","text":"\u8868\u683c\u5b57\u6bb5\u7ffb\u8bd1 \u6570\u636e\u8868\u683c\u4e2d\u6240\u6709\u4f7f\u7528\u5230\u5b57\u6bb5\u7684\u5730\u65b9\u90fd\u4f1a\u81ea\u52a8\u8bfb\u53d6\u8bed\u8a00\u5305\u4e2d\u7684\u7ffb\u8bd1\u3002 {tip} \u8bed\u8a00\u5305\u7684\u8be6\u7ec6\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003 \u591a\u8bed\u8a00 \u3002 \u8bed\u8a00\u5305\u540d\u79f0 \u8bed\u8a00\u5305\u540d\u79f0\u9700\u8981\u4e0e\u63a7\u5236\u5668\u540d\u76f8\u5bf9\u5e94\uff0c\u5047\u5982\u63a7\u5236\u5668\u540d UserProfileController \uff0c\u5219\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u4e3a resources/lang/{\u5f53\u524d\u8bed\u8a00}/user-profile.php \uff08\u9700\u8981\u8f6c\u5316\u4e3a\u5c0f\u5199\u4e2d\u5212\u7ebf\u98ce\u683c\uff09\u3002 \u5982\u679c\u60f3\u8981\u66f4\u6539\u8bed\u8a00\u5305\u7684\u540d\u79f0\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\u66f4\u6539 \u65b9\u5f0f1 use Dcat\\Admin\\Http\\Controllers\\AdminController; class UserController extends AdminController { /** * \u6307\u5b9a\u7ffb\u8bd1\u6587\u4ef6\u540d\u79f0 * * @var string */ protected $translation = 'user1'; ... } \u65b9\u5f0f2 use Dcat\\Admin\\Admin; Admin::translation('user1'); \u793a\u4f8b \u73b0\u5728\u5047\u8bbe\u8bed\u8a00\u5305 resources/lang/zh_CN/user-profile.php \u5185\u5bb9\u5982\u4e0b\uff1a return [ 'fields' => [ 'name' => '\u540d\u79f0', 'age' => '\u5e74\u9f84', 'class' => '\u73ed\u7ea7', ], ]; \u63a7\u5236\u5668 UserProfileController \u4e2d\u8bbe\u7f6e\u7684 Grid \u5b57\u6bb5\u4f1a\u81ea\u52a8\u8bfb\u53d6\u4ee5\u4e0a\u7ffb\u8bd1\uff1a // \u4e0d\u8bbe\u7f6elabael\u4f1a\u81ea\u52a8\u8bfb\u53d6\u8bed\u8a00\u5305\u7ffb\u8bd1 $grid->id(); $grid->name; $grid->age; $grid->class; $grid->filter(function ($filter) { $filter->gt('age'); }); // \u4e0a\u9762\u4ee3\u7801\u7b49\u540c\u4e8e $grid->name('\u540d\u79f0'); $grid->age('\u5e74\u9f84'); // \u4e5f\u53ef\u8fd9\u6837\u4f7f\u7528 $grid->id(admin_trans_field('id')); $grid->name(admin_trans_field('name')); $grid->age(admin_trans_field('age')); \u516c\u5171\u7ffb\u8bd1 \u5f53 admin_trans_field \u51fd\u6570\u627e\u4e0d\u5230\u5f53\u524d\u63a7\u5236\u5668\u4e2d\u5bf9\u6307\u5b9a\u5b57\u6bb5\u7684\u7ffb\u8bd1\u65f6\uff0c\u4f1a\u53bb global.php \u4e2d\u67e5\u627e\u3002\u5982\u679c\u67d0\u4e9b\u5b57\u6bb5\u662f\u5f88\u591a\u6570\u636e\u8868\u4e2d\u90fd\u6709\u7684\uff0c\u53ef\u4ee5\u628a\u8fd9\u4e9b\u7ffb\u8bd1\u5199\u5728 resources/lang/{\u5f53\u524d\u8bed\u8a00}/global.php \u6587\u4ef6\u4e2d\u3002 return [ // \u5e38\u7528\u7684\u5b57\u6bb5\u653e\u5728 global.php \u4e2d\u53ef\u4ee5\u6240\u6709\u63a7\u5236\u5668\u5171\u7528\u3002 'fields' => [ 'id' => 'ID', 'created_at' => '\u521b\u5efa\u65f6\u95f4', 'updated_at' => '\u66f4\u65b0\u65f6\u95f4', ], ];","title":"\u8868\u683c\u5b57\u6bb5\u7ffb\u8bd1"},{"location":"2.x/model-grid-trans/#_1","text":"\u6570\u636e\u8868\u683c\u4e2d\u6240\u6709\u4f7f\u7528\u5230\u5b57\u6bb5\u7684\u5730\u65b9\u90fd\u4f1a\u81ea\u52a8\u8bfb\u53d6\u8bed\u8a00\u5305\u4e2d\u7684\u7ffb\u8bd1\u3002 {tip} \u8bed\u8a00\u5305\u7684\u8be6\u7ec6\u4f7f\u7528\u65b9\u6cd5\u8bf7\u53c2\u8003 \u591a\u8bed\u8a00 \u3002","title":"\u8868\u683c\u5b57\u6bb5\u7ffb\u8bd1"},{"location":"2.x/model-grid-trans/#_2","text":"\u8bed\u8a00\u5305\u540d\u79f0\u9700\u8981\u4e0e\u63a7\u5236\u5668\u540d\u76f8\u5bf9\u5e94\uff0c\u5047\u5982\u63a7\u5236\u5668\u540d UserProfileController \uff0c\u5219\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u4e3a resources/lang/{\u5f53\u524d\u8bed\u8a00}/user-profile.php \uff08\u9700\u8981\u8f6c\u5316\u4e3a\u5c0f\u5199\u4e2d\u5212\u7ebf\u98ce\u683c\uff09\u3002 \u5982\u679c\u60f3\u8981\u66f4\u6539\u8bed\u8a00\u5305\u7684\u540d\u79f0\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\u66f4\u6539 \u65b9\u5f0f1 use Dcat\\Admin\\Http\\Controllers\\AdminController; class UserController extends AdminController { /** * \u6307\u5b9a\u7ffb\u8bd1\u6587\u4ef6\u540d\u79f0 * * @var string */ protected $translation = 'user1'; ... } \u65b9\u5f0f2 use Dcat\\Admin\\Admin; Admin::translation('user1');","title":"\u8bed\u8a00\u5305\u540d\u79f0"},{"location":"2.x/model-grid-trans/#_3","text":"\u73b0\u5728\u5047\u8bbe\u8bed\u8a00\u5305 resources/lang/zh_CN/user-profile.php \u5185\u5bb9\u5982\u4e0b\uff1a return [ 'fields' => [ 'name' => '\u540d\u79f0', 'age' => '\u5e74\u9f84', 'class' => '\u73ed\u7ea7', ], ]; \u63a7\u5236\u5668 UserProfileController \u4e2d\u8bbe\u7f6e\u7684 Grid \u5b57\u6bb5\u4f1a\u81ea\u52a8\u8bfb\u53d6\u4ee5\u4e0a\u7ffb\u8bd1\uff1a // \u4e0d\u8bbe\u7f6elabael\u4f1a\u81ea\u52a8\u8bfb\u53d6\u8bed\u8a00\u5305\u7ffb\u8bd1 $grid->id(); $grid->name; $grid->age; $grid->class; $grid->filter(function ($filter) { $filter->gt('age'); }); // \u4e0a\u9762\u4ee3\u7801\u7b49\u540c\u4e8e $grid->name('\u540d\u79f0'); $grid->age('\u5e74\u9f84'); // \u4e5f\u53ef\u8fd9\u6837\u4f7f\u7528 $grid->id(admin_trans_field('id')); $grid->name(admin_trans_field('name')); $grid->age(admin_trans_field('age'));","title":"\u793a\u4f8b"},{"location":"2.x/model-grid-trans/#_4","text":"\u5f53 admin_trans_field \u51fd\u6570\u627e\u4e0d\u5230\u5f53\u524d\u63a7\u5236\u5668\u4e2d\u5bf9\u6307\u5b9a\u5b57\u6bb5\u7684\u7ffb\u8bd1\u65f6\uff0c\u4f1a\u53bb global.php \u4e2d\u67e5\u627e\u3002\u5982\u679c\u67d0\u4e9b\u5b57\u6bb5\u662f\u5f88\u591a\u6570\u636e\u8868\u4e2d\u90fd\u6709\u7684\uff0c\u53ef\u4ee5\u628a\u8fd9\u4e9b\u7ffb\u8bd1\u5199\u5728 resources/lang/{\u5f53\u524d\u8bed\u8a00}/global.php \u6587\u4ef6\u4e2d\u3002 return [ // \u5e38\u7528\u7684\u5b57\u6bb5\u653e\u5728 global.php \u4e2d\u53ef\u4ee5\u6240\u6709\u63a7\u5236\u5668\u5171\u7528\u3002 'fields' => [ 'id' => 'ID', 'created_at' => '\u521b\u5efa\u65f6\u95f4', 'updated_at' => '\u66f4\u65b0\u65f6\u95f4', ], ];","title":"\u516c\u5171\u7ffb\u8bd1"},{"location":"2.x/model-grid-tree/","text":"\u6811\u72b6\u8868\u683c \u6811\u72b6\u8868\u683c\u652f\u6301\u5206\u9875\u548c\u70b9\u51fb\u52a0\u8f7d\u529f\u80fd\uff0c\u7279\u522b\u9002\u5408\u7528\u6765\u5c55\u793a\u6570\u636e\u91cf\u8f83\u5927\u7684\u591a\u5c42\u7ea7\u7ed3\u6784\u6570\u636e\u3002 \u8868\u7ed3\u6784\u548c\u6a21\u578b \u8981\u4f7f\u7528\u6811\u72b6\u8868\u683c\uff0c\u8981\u9075\u5b88\u7ea6\u5b9a\u7684\u8868\u7ed3\u6784\uff1a {tip} \u6b64\u8868\u7ed3\u6784\u548c\u6a21\u578b\u53ef\u5b8c\u5168\u517c\u5bb9 \u6a21\u578b\u6811 \u3002 CREATE TABLE `demo_categories` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `parent_id` int(11) NOT NULL DEFAULT '0', `order` int(11) NOT NULL DEFAULT '0', // order \u5b57\u6bb5\u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u4e0d\u8bbe\u7f6e\u4e5f\u53ef\u4ee5 `title` varchar(50) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci \u4e0a\u9762\u7684\u8868\u683c\u7ed3\u6784\u91cc\u9762\u6709\u4e09\u4e2a\u5fc5\u8981\u7684\u5b57\u6bb5 parent_id \u3001 title ,\u5176\u5b83\u5b57\u6bb5\u6ca1\u6709\u8981\u6c42\u3002 \u5bf9\u5e94\u7684\u6a21\u578b\u4e3a app/Models/Category.php : {tip} \u4e3a\u4e86\u4fbf\u4e8e\u9605\u8bfb\uff0c\u8fd9\u91cc\u4e0d\u518d\u5c55\u793a Repository \u4ee3\u7801\u3002 <?php namespace App\\Models\\Demo; use Dcat\\Admin\\Traits\\ModelTree; use Illuminate\\Database\\Eloquent\\Model; class Category extends Model { use ModelTree; protected $table = 'demo_categories'; } \u8868\u7ed3\u6784\u4e2d\u7684\u4e09\u4e2a\u5b57\u6bb5 parent_id \u3001 order \u3001 title \u7684\u5b57\u6bb5\u540d\u4e5f\u662f\u53ef\u4ee5\u4fee\u6539\u7684\uff1a <?php namespace App\\Models\\Demo; use Dcat\\Admin\\Traits\\ModelTree; use Illuminate\\Database\\Eloquent\\Model; class Category extends Model { use ModelTree; protected $table = 'demo_categories'; protected $titleColumn = 'name'; protected $orderColumn = 'sort'; protected $parentColumn = 'pid'; } \u5982\u679c\u4f60\u7684\u6570\u636e\u8868\u4e0d\u9700\u8981 order \u5b57\u6bb5\u6392\u5e8f\uff0c\u5219\u5728\u6a21\u578b\u4e2d\u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801\u5373\u53ef <?php namespace App\\Models\\Demo; use Dcat\\Admin\\Traits\\ModelTree; use Illuminate\\Database\\Eloquent\\Model; class Category extends Model { use ModelTree; protected $table = 'demo_categories'; // \u8fd4\u56de\u7a7a\u503c\u5373\u53ef\u7981\u7528 order \u5b57\u6bb5 public function getOrderColumn() { return null; } } \u4f7f\u7528 \u901a\u8fc7\u8c03\u7528 Grid\\Column::tree \u65b9\u6cd5\u5373\u53ef\u5f00\u542f\u6811\u72b6\u8868\u683c\u529f\u80fd\uff0c\u5f00\u542f\u4e4b\u540e\u9ed8\u8ba4\u53ea\u67e5\u8be2\u6700\u9876\u7ea7\u8282\u70b9\u7684\u6570\u636e\uff0c\u5b50\u8282\u70b9\u6570\u636e\u9700\u8981\u70b9\u51fb\u52a0\u8f7d <?php namespace App\\Admin\\Controllers\\Demo; use App\\Models\\Category; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Controllers\\AdminController; class CategoryController extends AdminController { protected function grid() { return Grid::make(new Category(), function (Grid $grid) { $grid->id('ID')->bold()->sortable(); $grid->title->tree(); // \u5f00\u542f\u6811\u72b6\u8868\u683c\u529f\u80fd $grid->order; $grid->created_at; $grid->updated_at->sortable(); $grid->filter(function (Grid\\Filter $filter) { $filter->like('slug'); $filter->like('name'); $filter->like('http_path'); }); }); } } \u4e0a\u9762\u7684\u4ee3\u7801\u6267\u884c\u7684 sql \u5982\u4e0b\uff08\u9ed8\u8ba4\u53ea\u67e5\u8be2 parent = 0 \u7684\u6570\u636e\uff09\uff1a select count(*) as aggregate from `demo_categories` where `parent_id` = 0 select * from `demo_categories` where `parent_id` = 0 order by `order` asc, `id` asc limit 20 offset 0 Grid\\Column::tree \u65b9\u6cd5\u53c2\u6570 bool $showAll false \u662f\u5426\u4e00\u6b21\u6027\u5c55\u793a\u4e0b\u4e00\u5c42\u7ea7\u7684\u6240\u6709\u8282\u70b9\uff0c\u9ed8\u8ba4\u5206\u9875\u5c55\u793a bool $sortable true \u662f\u5426\u5f00\u542f\u6392\u5e8f\u529f\u80fd // \u7981\u7528\u5206\u9875\u529f\u80fd\uff0c\u4e00\u6b21\u6027\u52a0\u8f7d\u6240\u6709\u4e0b\u4e00\u5c42\u7ea7\u8282\u70b9 $grid->title->tree(true); // \u4e0d\u9700\u8981 order \u5b57\u6bb5\u6392\u5e8f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f20 false \u5373\u53ef $grid->title->tree(false, false); orderable\u6392\u5e8f orderable \u6392\u5e8f\u529f\u80fd\u4f9d\u8d56 spatie/eloquent-sortable \u7ec4\u4ef6\uff0c\u9700\u8981\u4fee\u6539\u6a21\u578b\uff1a use Spatie\\EloquentSortable\\Sortable; class Category extends Model implements Sortable { use ModelTree; // \u8bbe\u7f6e\u6392\u5e8f\u5b57\u6bb5\uff0c\u9ed8\u8ba4order protected $orderColumn = 'sort'; } \u4e0b\u9762\u662f\u4f7f\u7528\u793a\u4f8b class CategoryController extends AdminController { protected function grid() { return Grid::make(new Category(), function (Grid $grid) { $grid->id('ID')->bold()->sortable(); $grid->title->tree(); // \u5f00\u542f\u6811\u72b6\u8868\u683c\u529f\u80fd $grid->order->orderable(); // \u5f00\u542f\u6392\u5e8f\u529f\u80fd ...; }); } } \u5173\u4e8e\u6570\u636e\u641c\u7d22 \u5982\u679c\u5728\u6811\u72b6\u8868\u683c\u4e2d\u4f7f\u7528\u4e86\u641c\u7d22\u529f\u80fd\uff08 Grid::filter \u3001 Grid\\Column::filter \u3001 Grid::quickSearch \uff09\uff0c\u4e3a\u4e86\u8ba9\u7528\u6237\u80fd\u641c\u7d22\u5230\u60f3\u8981\u7684\u6570\u636e\uff0c\u5219\u4f1a \u53d6\u6d88\u53ea\u67e5\u6700\u9876\u7ea7\u6570\u636e\u7684\u64cd\u4f5c \u3002 {tip} \u4f7f\u7528 \u67e5\u8be2\u8fc7\u6ee4 \u3001 \u5217\u8fc7\u6ee4\u5668 \u3001 \u5feb\u6377\u641c\u7d22 \u7b49\u641c\u7d22\u529f\u80fd\u90fd\u4f1a \u53d6\u6d88\u53ea\u67e5\u6700\u9876\u7ea7\u6570\u636e\u7684\u64cd\u4f5c \uff0c\u53ea\u6709 \u7b5b\u9009\u5668 \u548c \u8303\u56f4\u67e5\u8be2scope \u7b49\u529f\u80fd\u4f8b\u5916\u3002 \u4f8b\u5982\u4e0b\u9762\u7684\u4ee3\u7801\u5f00\u542f\u4e86\u5feb\u6377\u641c\u7d22 class CategoryController extends AdminController { protected function grid() { return Grid::make(new Category(), function (Grid $grid) { $grid->id('ID')->bold()->sortable(); $grid->title->tree(); // \u5f00\u542f\u6811\u72b6\u8868\u683c\u529f\u80fd $grid->order->orderable(); // \u5f00\u542f\u6392\u5e8f\u529f\u80fd $grid->quickSearch(['id', 'title']); ...; }); } } \u4e14\u7528\u6237\u5728\u6d4f\u89c8\u5668\u4e2d\u4f7f\u7528\u4e86\u5feb\u6377\u641c\u7d22\uff0c\u5219\u4ea7\u751f sql \u5982\u4e0b select count(*) as aggregate from `demo_categories` where `id` like \"%xxx%\" or `title` like \"%xxx%\" select * from `demo_categories` where `id` like \"%xxx%\" or `title` like \"%xxx%\" order by `order` asc, `id` asc limit 20 offset 0 \u4e0e\u6a21\u578b\u6811\u529f\u80fd\u7684\u5dee\u522b \u6a21\u578b\u6811 \u540c\u6837\u53ef\u7528\u4e8e\u5c55\u793a\u591a\u5c42\u7ea7\u7ed3\u6784\u6570\u636e\uff0c\u5e76\u4e14\u652f\u6301\u7528\u62d6\u62fd\u7684\u65b9\u5f0f\u5b9e\u73b0\u6570\u636e\u7684\u5c42\u7ea7\u3001\u6392\u5e8f\u7b49\u64cd\u4f5c\uff0c\u4f46\u662f\u4e0d\u652f\u6301\u5206\u9875\u548c\u70b9\u51fb\u52a0\u8f7d\u529f\u80fd\uff0c\u53ea\u80fd\u4e00\u6b21\u6027\u52a0\u8f7d\u5b8c\u6240\u6709\u6570\u636e\uff0c \u56e0\u6b64 \u6a21\u578b\u6811 \u5e76\u4e0d\u9002\u5408\u7528\u6765\u5c55\u793a\u6570\u636e\u91cf\u8f83\u5927\u7684\u6570\u636e\u3002 \u800c\u6811\u72b6\u8868\u683c\u652f\u6301\u5206\u9875\u548c\u70b9\u51fb\u52a0\u8f7d\u529f\u80fd\uff0c\u9002\u5408\u7528\u6765\u5c55\u793a\u6570\u636e\u91cf\u8f83\u5927\u7684\u591a\u5c42\u7ea7\u7ed3\u6784\u6570\u636e\uff0c\u4f46\u4e0d\u652f\u6301\u7528\u62d6\u62fd\u7684\u65b9\u5f0f\u5b9e\u73b0\u6570\u636e\u7684\u5c42\u7ea7\u3001\u6392\u5e8f\u64cd\u4f5c\u3002","title":"\u6811\u72b6\u8868\u683c"},{"location":"2.x/model-grid-tree/#_1","text":"\u6811\u72b6\u8868\u683c\u652f\u6301\u5206\u9875\u548c\u70b9\u51fb\u52a0\u8f7d\u529f\u80fd\uff0c\u7279\u522b\u9002\u5408\u7528\u6765\u5c55\u793a\u6570\u636e\u91cf\u8f83\u5927\u7684\u591a\u5c42\u7ea7\u7ed3\u6784\u6570\u636e\u3002","title":"\u6811\u72b6\u8868\u683c"},{"location":"2.x/model-grid-tree/#_2","text":"\u8981\u4f7f\u7528\u6811\u72b6\u8868\u683c\uff0c\u8981\u9075\u5b88\u7ea6\u5b9a\u7684\u8868\u7ed3\u6784\uff1a {tip} \u6b64\u8868\u7ed3\u6784\u548c\u6a21\u578b\u53ef\u5b8c\u5168\u517c\u5bb9 \u6a21\u578b\u6811 \u3002 CREATE TABLE `demo_categories` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `parent_id` int(11) NOT NULL DEFAULT '0', `order` int(11) NOT NULL DEFAULT '0', // order \u5b57\u6bb5\u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u4e0d\u8bbe\u7f6e\u4e5f\u53ef\u4ee5 `title` varchar(50) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci \u4e0a\u9762\u7684\u8868\u683c\u7ed3\u6784\u91cc\u9762\u6709\u4e09\u4e2a\u5fc5\u8981\u7684\u5b57\u6bb5 parent_id \u3001 title ,\u5176\u5b83\u5b57\u6bb5\u6ca1\u6709\u8981\u6c42\u3002 \u5bf9\u5e94\u7684\u6a21\u578b\u4e3a app/Models/Category.php : {tip} \u4e3a\u4e86\u4fbf\u4e8e\u9605\u8bfb\uff0c\u8fd9\u91cc\u4e0d\u518d\u5c55\u793a Repository \u4ee3\u7801\u3002 <?php namespace App\\Models\\Demo; use Dcat\\Admin\\Traits\\ModelTree; use Illuminate\\Database\\Eloquent\\Model; class Category extends Model { use ModelTree; protected $table = 'demo_categories'; } \u8868\u7ed3\u6784\u4e2d\u7684\u4e09\u4e2a\u5b57\u6bb5 parent_id \u3001 order \u3001 title \u7684\u5b57\u6bb5\u540d\u4e5f\u662f\u53ef\u4ee5\u4fee\u6539\u7684\uff1a <?php namespace App\\Models\\Demo; use Dcat\\Admin\\Traits\\ModelTree; use Illuminate\\Database\\Eloquent\\Model; class Category extends Model { use ModelTree; protected $table = 'demo_categories'; protected $titleColumn = 'name'; protected $orderColumn = 'sort'; protected $parentColumn = 'pid'; } \u5982\u679c\u4f60\u7684\u6570\u636e\u8868\u4e0d\u9700\u8981 order \u5b57\u6bb5\u6392\u5e8f\uff0c\u5219\u5728\u6a21\u578b\u4e2d\u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801\u5373\u53ef <?php namespace App\\Models\\Demo; use Dcat\\Admin\\Traits\\ModelTree; use Illuminate\\Database\\Eloquent\\Model; class Category extends Model { use ModelTree; protected $table = 'demo_categories'; // \u8fd4\u56de\u7a7a\u503c\u5373\u53ef\u7981\u7528 order \u5b57\u6bb5 public function getOrderColumn() { return null; } }","title":"\u8868\u7ed3\u6784\u548c\u6a21\u578b"},{"location":"2.x/model-grid-tree/#_3","text":"\u901a\u8fc7\u8c03\u7528 Grid\\Column::tree \u65b9\u6cd5\u5373\u53ef\u5f00\u542f\u6811\u72b6\u8868\u683c\u529f\u80fd\uff0c\u5f00\u542f\u4e4b\u540e\u9ed8\u8ba4\u53ea\u67e5\u8be2\u6700\u9876\u7ea7\u8282\u70b9\u7684\u6570\u636e\uff0c\u5b50\u8282\u70b9\u6570\u636e\u9700\u8981\u70b9\u51fb\u52a0\u8f7d <?php namespace App\\Admin\\Controllers\\Demo; use App\\Models\\Category; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Controllers\\AdminController; class CategoryController extends AdminController { protected function grid() { return Grid::make(new Category(), function (Grid $grid) { $grid->id('ID')->bold()->sortable(); $grid->title->tree(); // \u5f00\u542f\u6811\u72b6\u8868\u683c\u529f\u80fd $grid->order; $grid->created_at; $grid->updated_at->sortable(); $grid->filter(function (Grid\\Filter $filter) { $filter->like('slug'); $filter->like('name'); $filter->like('http_path'); }); }); } } \u4e0a\u9762\u7684\u4ee3\u7801\u6267\u884c\u7684 sql \u5982\u4e0b\uff08\u9ed8\u8ba4\u53ea\u67e5\u8be2 parent = 0 \u7684\u6570\u636e\uff09\uff1a select count(*) as aggregate from `demo_categories` where `parent_id` = 0 select * from `demo_categories` where `parent_id` = 0 order by `order` asc, `id` asc limit 20 offset 0 Grid\\Column::tree \u65b9\u6cd5\u53c2\u6570 bool $showAll false \u662f\u5426\u4e00\u6b21\u6027\u5c55\u793a\u4e0b\u4e00\u5c42\u7ea7\u7684\u6240\u6709\u8282\u70b9\uff0c\u9ed8\u8ba4\u5206\u9875\u5c55\u793a bool $sortable true \u662f\u5426\u5f00\u542f\u6392\u5e8f\u529f\u80fd // \u7981\u7528\u5206\u9875\u529f\u80fd\uff0c\u4e00\u6b21\u6027\u52a0\u8f7d\u6240\u6709\u4e0b\u4e00\u5c42\u7ea7\u8282\u70b9 $grid->title->tree(true); // \u4e0d\u9700\u8981 order \u5b57\u6bb5\u6392\u5e8f\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f20 false \u5373\u53ef $grid->title->tree(false, false);","title":"\u4f7f\u7528"},{"location":"2.x/model-grid-tree/#orderable","text":"orderable \u6392\u5e8f\u529f\u80fd\u4f9d\u8d56 spatie/eloquent-sortable \u7ec4\u4ef6\uff0c\u9700\u8981\u4fee\u6539\u6a21\u578b\uff1a use Spatie\\EloquentSortable\\Sortable; class Category extends Model implements Sortable { use ModelTree; // \u8bbe\u7f6e\u6392\u5e8f\u5b57\u6bb5\uff0c\u9ed8\u8ba4order protected $orderColumn = 'sort'; } \u4e0b\u9762\u662f\u4f7f\u7528\u793a\u4f8b class CategoryController extends AdminController { protected function grid() { return Grid::make(new Category(), function (Grid $grid) { $grid->id('ID')->bold()->sortable(); $grid->title->tree(); // \u5f00\u542f\u6811\u72b6\u8868\u683c\u529f\u80fd $grid->order->orderable(); // \u5f00\u542f\u6392\u5e8f\u529f\u80fd ...; }); } }","title":"orderable\u6392\u5e8f"},{"location":"2.x/model-grid-tree/#_4","text":"\u5982\u679c\u5728\u6811\u72b6\u8868\u683c\u4e2d\u4f7f\u7528\u4e86\u641c\u7d22\u529f\u80fd\uff08 Grid::filter \u3001 Grid\\Column::filter \u3001 Grid::quickSearch \uff09\uff0c\u4e3a\u4e86\u8ba9\u7528\u6237\u80fd\u641c\u7d22\u5230\u60f3\u8981\u7684\u6570\u636e\uff0c\u5219\u4f1a \u53d6\u6d88\u53ea\u67e5\u6700\u9876\u7ea7\u6570\u636e\u7684\u64cd\u4f5c \u3002 {tip} \u4f7f\u7528 \u67e5\u8be2\u8fc7\u6ee4 \u3001 \u5217\u8fc7\u6ee4\u5668 \u3001 \u5feb\u6377\u641c\u7d22 \u7b49\u641c\u7d22\u529f\u80fd\u90fd\u4f1a \u53d6\u6d88\u53ea\u67e5\u6700\u9876\u7ea7\u6570\u636e\u7684\u64cd\u4f5c \uff0c\u53ea\u6709 \u7b5b\u9009\u5668 \u548c \u8303\u56f4\u67e5\u8be2scope \u7b49\u529f\u80fd\u4f8b\u5916\u3002 \u4f8b\u5982\u4e0b\u9762\u7684\u4ee3\u7801\u5f00\u542f\u4e86\u5feb\u6377\u641c\u7d22 class CategoryController extends AdminController { protected function grid() { return Grid::make(new Category(), function (Grid $grid) { $grid->id('ID')->bold()->sortable(); $grid->title->tree(); // \u5f00\u542f\u6811\u72b6\u8868\u683c\u529f\u80fd $grid->order->orderable(); // \u5f00\u542f\u6392\u5e8f\u529f\u80fd $grid->quickSearch(['id', 'title']); ...; }); } } \u4e14\u7528\u6237\u5728\u6d4f\u89c8\u5668\u4e2d\u4f7f\u7528\u4e86\u5feb\u6377\u641c\u7d22\uff0c\u5219\u4ea7\u751f sql \u5982\u4e0b select count(*) as aggregate from `demo_categories` where `id` like \"%xxx%\" or `title` like \"%xxx%\" select * from `demo_categories` where `id` like \"%xxx%\" or `title` like \"%xxx%\" order by `order` asc, `id` asc limit 20 offset 0","title":"\u5173\u4e8e\u6570\u636e\u641c\u7d22"},{"location":"2.x/model-grid-tree/#_5","text":"\u6a21\u578b\u6811 \u540c\u6837\u53ef\u7528\u4e8e\u5c55\u793a\u591a\u5c42\u7ea7\u7ed3\u6784\u6570\u636e\uff0c\u5e76\u4e14\u652f\u6301\u7528\u62d6\u62fd\u7684\u65b9\u5f0f\u5b9e\u73b0\u6570\u636e\u7684\u5c42\u7ea7\u3001\u6392\u5e8f\u7b49\u64cd\u4f5c\uff0c\u4f46\u662f\u4e0d\u652f\u6301\u5206\u9875\u548c\u70b9\u51fb\u52a0\u8f7d\u529f\u80fd\uff0c\u53ea\u80fd\u4e00\u6b21\u6027\u52a0\u8f7d\u5b8c\u6240\u6709\u6570\u636e\uff0c \u56e0\u6b64 \u6a21\u578b\u6811 \u5e76\u4e0d\u9002\u5408\u7528\u6765\u5c55\u793a\u6570\u636e\u91cf\u8f83\u5927\u7684\u6570\u636e\u3002 \u800c\u6811\u72b6\u8868\u683c\u652f\u6301\u5206\u9875\u548c\u70b9\u51fb\u52a0\u8f7d\u529f\u80fd\uff0c\u9002\u5408\u7528\u6765\u5c55\u793a\u6570\u636e\u91cf\u8f83\u5927\u7684\u591a\u5c42\u7ea7\u7ed3\u6784\u6570\u636e\uff0c\u4f46\u4e0d\u652f\u6301\u7528\u62d6\u62fd\u7684\u65b9\u5f0f\u5b9e\u73b0\u6570\u636e\u7684\u5c42\u7ea7\u3001\u6392\u5e8f\u64cd\u4f5c\u3002","title":"\u4e0e\u6a21\u578b\u6811\u529f\u80fd\u7684\u5dee\u522b"},{"location":"2.x/model-grid/","text":"\u8868\u683c\u57fa\u672c\u4f7f\u7528 \u7b80\u5355\u793a\u4f8b Dcat\\Admin\\Grid \u7c7b\u7528\u4e8e\u751f\u6210\u57fa\u4e8e\u6570\u636e\u6a21\u578b\u7684\u8868\u683c\uff0c\u5148\u6765\u4e2a\u4f8b\u5b50\uff0c\u6570\u636e\u5e93\u4e2d\u6709 movies \u8868 CREATE TABLE `movies` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `director` int(10) unsigned NOT NULL, `describe` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `rate` tinyint unsigned NOT NULL, `released` enum(0, 1), `release_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; \u5bf9\u5e94\u7684\u6570\u636e\u6a21\u578b\u4e3a App\\Models\\Movie \uff0c\u5bf9\u5e94\u7684\u6570\u636e\u4ed3\u5e93\u4e3a App\\Admin\\Repositories\\Movie \uff0c\u6570\u636e\u4ed3\u5e93\u4ee3\u7801\u5982\u4e0b\uff1a {tip} \u5982\u679c\u4f60\u7684\u6570\u636e\u6765\u81ea MySQL \uff0c\u5219 \u6570\u636e\u4ed3\u5e93 \u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 Model \u3002 <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use App\\Models\\Movie as MovieModel; class Movie extends EloquentRepository { protected $eloquentClass = MovieModel::class; /** * \u8bbe\u7f6e\u8868\u683c\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\u67e5\u8be2\u6240\u6709\u5b57\u6bb5 * * @return array */ public function getGridColumns(){ return ['id', 'title', 'director', 'rate', ...]; } } \u4e0b\u9762\u7684\u4ee3\u7801\u53ef\u4ee5\u751f\u6210\u8868 movies \u7684\u6570\u636e\u8868\u683c\uff1a <?php namespace App\\Admin\\Controllers; use App\\Admin\\Repositories\\Movie; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Controllers\\AdminController; class MovieController extends AdminController { protected function grid() { return Grid::make(new Movie(), function (Grid $grid) { // \u7b2c\u4e00\u5217\u663e\u793aid\u5b57\u6bb5\uff0c\u5e76\u5c06\u8fd9\u4e00\u5217\u8bbe\u7f6e\u4e3a\u53ef\u6392\u5e8f\u5217 $grid->column('id', 'ID')->sortable(); // \u7b2c\u4e8c\u5217\u663e\u793atitle\u5b57\u6bb5\uff0c\u7531\u4e8etitle\u5b57\u6bb5\u540d\u548cGrid\u5bf9\u8c61\u7684title\u65b9\u6cd5\u51b2\u7a81\uff0c\u6240\u4ee5\u7528Grid\u7684column()\u65b9\u6cd5\u4ee3\u66ff $grid->column('title'); // \u7b2c\u4e09\u5217\u663e\u793adirector\u5b57\u6bb5\uff0c\u901a\u8fc7display($callback)\u65b9\u6cd5\u8bbe\u7f6e\u8fd9\u4e00\u5217\u7684\u663e\u793a\u5185\u5bb9\u4e3ausers\u8868\u4e2d\u5bf9\u5e94\u7684\u7528\u6237\u540d $grid->column('director')->display(function($userId) { return User::find($userId)->name; }); // \u7b2c\u56db\u5217\u663e\u793a\u4e3adescribe\u5b57\u6bb5 $grid->column('describe'); // \u7b2c\u4e94\u5217\u663e\u793a\u4e3arate\u5b57\u6bb5 $grid->column('rate'); // \u7b2c\u516d\u5217\u663e\u793areleased\u5b57\u6bb5\uff0c\u901a\u8fc7display($callback)\u65b9\u6cd5\u6765\u683c\u5f0f\u5316\u663e\u793a\u8f93\u51fa $grid->column('released', '\u4e0a\u6620?')->display(function ($released) { return $released ? '\u662f' : '\u5426'; }); // \u4e0b\u9762\u4e3a\u4e09\u4e2a\u65f6\u95f4\u5b57\u6bb5\u7684\u5217\u663e\u793a $grid->column('release_at'); $grid->column('created_at'); $grid->column('updated_at'); // filter($callback)\u65b9\u6cd5\u7528\u6765\u8bbe\u7f6e\u8868\u683c\u7684\u7b80\u5355\u641c\u7d22\u6846 $grid->filter(function ($filter) { // \u8bbe\u7f6ecreated_at\u5b57\u6bb5\u7684\u8303\u56f4\u67e5\u8be2 $filter->between('created_at', 'Created Time')->datetime(); }); }); } } \u8868\u683c\u663e\u793a\u6a21\u5f0f table_collapse \u5728\u8fd9\u4e2a\u7248\u672c\u5f00\u59cb\uff0c\u9ed8\u8ba4\u7684\u8868\u683c\u5e03\u5c40\u5c06\u4f1a\u91c7\u7528 table_collapse \u6a21\u5f0f\uff0c\u6548\u679c\u5982\u4e0b \u5982\u679c\u60f3\u8981\u5207\u6362\u56de\u65e7\u7248\u672c\u7684\u8868\u683c\u5e03\u5c40\u6837\u5f0f\uff0c\u53ef\u4ee5\u5728 app/Admin/bootstrap.php \u4e2d\u52a0\u4e0a Grid::resolving(function (Grid $grid) { $grid->tableCollapse(false); }); \u8fb9\u6846\u6a21\u5f0f \u901a\u8fc7 withBorder \u65b9\u5f0f\u53ef\u4ee5\u8ba9\u8868\u683c\u663e\u793a\u8fb9\u6846 $grid->withBorder(); \u6548\u679c \u7981\u7528\u8fb9\u6846\u6a21\u5f0f $grid->withBorder(false); \u57fa\u672c\u4f7f\u7528\u65b9\u6cd5 \u6dfb\u52a0\u5217 (column) // \u6dfb\u52a0\u5355\u5217 $grid->column('username', '\u7528\u6237\u540d'); // \u6dfb\u52a0\u591a\u5217 $grid->columns('email', 'username' ...); \u4fee\u6539\u6765\u6e90\u6570\u636e $grid->model()->where('id', '>', 100); $grid->model()->orderBy('profile.age'); // \u56de\u6536\u7ad9\u6570\u636e $grid->model()->onlyTrashed(); ... \u540c\u65f6\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u65b9\u5f0f protected function grid() { return Grid::make(Model::with('...')->where(...), function (Grid $grid) { ... }); } \u5176\u5b83\u67e5\u8be2\u65b9\u6cd5\u53ef\u4ee5\u53c2\u8003 eloquent \u7684\u67e5\u8be2\u65b9\u6cd5 \u4fee\u6539\u663e\u793a\u8f93\u51fa (display) $grid->column('text')->display(function($text) { return str_limit($text, 30, '...'); }); // \u5141\u8bb8\u6df7\u5408\u4f7f\u7528\u591a\u4e2a\u201cdisplay\u201d\u65b9\u6cd5 $grid->column('name')->display(function ($name) { return \"<b>$name</b>\"; })->display(function ($name) { return \"<span class='label'>$name</span>\"; }); $grid->column('email')->display(function ($email) { return \"mailto:$email\"; }); // \u53ef\u4ee5\u76f4\u63a5\u5199\u5b57\u7b26\u4e32 $grid->column('username')->display('...'); // \u6dfb\u52a0\u4e0d\u5b58\u5728\u7684\u5b57\u6bb5 $grid->column('column_not_in_table')->display(function () { return 'blablabla....'.$this->id; }); \u663e\u793a\u5e8f\u53f7 (number) \u901a\u8fc7 number \u65b9\u6cd5\u53ef\u4ee5\u5728\u8868\u683c\u4e2d\u6dfb\u52a0\u4e00\u5217\u4ece 1 \u5f00\u59cb\u8ba1\u7b97\u7684\u884c\u5e8f\u53f7\u5217 $grid->number(); \u8bbe\u7f6e\u540d\u79f0 (setName) \u5f53\u9875\u9762\u5b58\u5728\u591a\u4e2a Grid \u8868\u683c\u65f6\uff0c\u9700\u8981\u7ed9\u8868\u683c\u8bbe\u7f6e\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5426\u5219\u90e8\u5206\u529f\u80fd\u53ef\u80fd\u4f1a\u51fa\u73b0\u51b2\u7a81\u7684\u60c5\u51b5 $grid->setName('name1'); \u83b7\u53d6\u5f53\u524d\u884c\u6570\u636e (row) display() \u65b9\u6cd5\u63a5\u6536\u7684\u533f\u540d\u51fd\u6570\u7ed1\u5b9a\u4e86\u5f53\u524d\u884c\u7684\u6570\u636e\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5728\u91cc\u9762\u8c03\u7528\u5f53\u524d\u884c\u7684\u5176\u5b83\u5b57\u6bb5\u6570\u636e $grid->column('first_name'); $grid->column('last_name'); // \u4e0d\u5b58\u7684\u5b57\u6bb5\u5217 $grid->column('full_name')->display(function () { return $this->first_name.' '.$this->last_name; }); \u8bbe\u7f6e\u5de5\u5177\u680f\u6309\u94ae\u6837\u5f0f \u5de5\u5177\u680f\u6309\u94ae\u9ed8\u8ba4\u663e\u793a outline \u6a21\u5f0f\uff0c\u6548\u679c\u5982\u4e0b \u7528\u6cd5 $grid->toolsWithOutline(); // \u7981\u6b62 $grid->toolsWithOutline(false); \u6548\u679c \u7981\u7528 outline \u540e\u7684\u6548\u679c \u5982\u679c\u4f60\u5e0c\u671b\u67d0\u4e2a\u6309\u94ae\u4e0d\u4f7f\u7528 outline \u6a21\u5f0f\uff0c\u53ef\u4ee5\u5728\u6309\u94ae\u7684 class \u5c5e\u6027\u4e2d\u52a0\u4e0a disable-outline $grid->tools('<a class=\"btn btn-primary disable-outline\">\u6d4b\u8bd5\u6309\u94ae</a>'); \u8bbe\u7f6e\u521b\u5efa\u6309\u94ae \u6b64\u529f\u80fd\u9ed8\u8ba4\u5f00\u542f // \u7981\u7528 $grid->disableCreateButton(); // \u663e\u793a $grid->showCreateButton(); \u5f00\u542f\u5f39\u7a97\u521b\u5efa\u8868\u5355 \u6b64\u529f\u80fd\u9ed8\u8ba4\u4e0d\u5f00\u542f $grid->enableDialogCreate(); // \u8bbe\u7f6e\u5f39\u7a97\u5bbd\u9ad8\uff0c\u9ed8\u8ba4\u503c\u4e3a '700px', '670px' $grid->setDialogFormDimensions('50%', '50%'); \u4fee\u6539\u521b\u5efa\u4ee5\u53ca\u66f4\u65b0\u6309\u94ae\u7684\u8def\u7531 (setResource) \u8bbe\u7f6e\u4fee\u6539\u521b\u5efa\u4ee5\u53ca\u66f4\u65b0\u6309\u94ae\u7684\u8def\u7531\u524d\u7f00 $grid->setResource('auth/users'); \u8bbe\u7f6e\u67e5\u8be2\u8fc7\u6ee4\u5668 \u6b64\u529f\u80fd\u9ed8\u8ba4\u5f00\u542f // \u7981\u7528 $grid->disableFilter(); // \u663e\u793a $grid->showFilter(); // \u7981\u7528\u8fc7\u6ee4\u5668\u6309\u94ae $grid->disableFilterButton(); // \u663e\u793a\u8fc7\u6ee4\u5668\u6309\u94ae $grid->showFilterButton(); \u884c\u9009\u62e9\u5668 (rowSelector) // \u7981\u7528 $grid->disableRowSelector(); // \u663e\u793a $grid->showRowSelector(); \u8bbe\u7f6e\u9009\u62e9\u4e2d\u884c\u7684\u6807\u9898\u5b57\u6bb5 \u8bbe\u7f6e\u9009\u4e2d\u540e\u9700\u8981\u663e\u793a\u7684\u5b57\u6bb5\uff0c\u5982\u4e0d\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u53d6 name \u3001 title \u3001 username \u4e2d\u7684\u4e00\u4e2a\u3002 $grid->column('full_name'); $grid->column('age'); ... $grid->rowSelector()->titleColumn('full_name'); \u8bbe\u7f6e\u9009\u62e9\u4e2d\u884c\u7684ID\u5b57\u6bb5 \u8bbe\u7f6e\u9009\u4e2d\u540e\u9700\u8981\u4fdd\u5b58\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\u4e3a \u6570\u636e\u8868\u4e3b\u952e(id) \u5b57\u6bb5 $grid->column('new_id'); ... $grid->rowSelector()->idColumn('new_id'); \u8bbe\u7f6echeckbox\u9009\u62e9\u6846\u989c\u8272 \u9ed8\u8ba4 primary \uff0c\u652f\u6301\uff1a default \u3001 primary \u3001 success \u3001 info \u3001 danger \u3001 purple \u3001 inverse \u3002 $grid->rowSelector()->style('success'); \u70b9\u51fb\u5f53\u524d\u884c\u4efb\u610f\u4f4d\u7f6e\u9009\u4e2d \u6b64\u529f\u80fd\u9ed8\u8ba4\u4e0d\u5f00\u542f\u3002 $grid->rowSelector()->click(); \u8bbe\u7f6e\u9009\u4e2d\u884c\u7684\u80cc\u666f\u989c\u8272 use Dcat\\Admin\\Admin; $grid->rowSelector()->background(Admin::color()->dark20()); \u8bbe\u7f6e\u9ed8\u8ba4\u9009\u4e2d (check) Since v2.0.21 \u901a\u8fc7 check \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u9ed8\u8ba4\u9009\u4e2d\u7684\u884c\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a array \u7c7b\u578b\u6216 \u533f\u540d\u51fd\u6570 \u53c2\u6570 // \u8bbe\u7f6e\u9ed8\u8ba4\u9009\u4e2d\u7b2c 1/3/5 \u884c $grid->rowSelector()->check([0, 2, 4]); // \u4f20\u9012\u95ed\u5305 $grid->rowSelector()->check(function () { // \u8bbe\u7f6e\u9ed8\u8ba4\u9009\u4e2d\u7b2c 1/3/5 \u884c return in_array($this->_index, [0, 2, 4]); }); // \u5728\u95ed\u5305\u4e2d\u4f7f\u7528\u5f53\u524d\u884c\u5176\u4ed6\u5b57\u6bb5 $grid->rowSelector()->check(function () { // \u8bbe\u7f6e\u9ed8\u8ba4\u9009\u4e2d id > 10 \u7684\u884c return $this->id > 10; }); \u7981\u6b62\u66f4\u6539\u9009\u4e2d\u72b6\u6001 (disable) Since v2.0.21 \u901a\u8fc7 disable \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u7981\u6b62\u66f4\u6539\u9009\u4e2d\u72b6\u6001\u7684\u884c\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a array \u7c7b\u578b\u6216 \u533f\u540d\u51fd\u6570 \u53c2\u6570 // \u7981\u6b62\u7b2c 1/3/5 \u884c\u66f4\u6539\u9009\u4e2d\u72b6\u6001 $grid->rowSelector()->disable([0, 2, 4]); // \u4f20\u9012\u95ed\u5305 $grid->rowSelector()->disable(function () { // \u7981\u6b62\u7b2c 1/3/5 \u884c\u66f4\u6539\u9009\u4e2d\u72b6\u6001 return in_array($this->_index, [0, 2, 4]); }); // \u5728\u95ed\u5305\u4e2d\u4f7f\u7528\u5f53\u524d\u884c\u5176\u4ed6\u5b57\u6bb5 $grid->rowSelector()->disable(function () { // \u7981\u6b62 id > 10 \u7684\u884c\u66f4\u6539\u9009\u4e2d\u72b6\u6001 return $this->id > 10; }); // disable \u53ef\u4ee5\u548c check \u65b9\u6cd5\u4e00\u8d77\u4f7f\u7528 $grid->rowSelector()->check([2, 4])->disable([0, 2, 4]); \u8bbe\u7f6e\u884c\u64cd\u4f5c\u6309\u94ae // \u7981\u7528 $grid->disableActions(); // \u663e\u793a $grid->showActions(); // \u7981\u7528\u8be6\u60c5\u6309\u94ae $grid->disableViewButton(); // \u663e\u793a\u8be6\u60c5\u6309\u94ae $grid->showViewButton(); // \u7981\u7528\u7f16\u8f91\u6309\u94ae $grid->disableEditButton(); // \u663e\u793a\u7f16\u8f91\u6309\u94ae $grid->showEditButton(); // \u7981\u7528\u5feb\u6377\u7f16\u8f91\u6309\u94ae $grid->disableQuickEditButton(); // \u663e\u793a\u5feb\u6377\u7f16\u8f91\u6309\u94ae $grid->showQuickEditButton(); // \u8bbe\u7f6e\u5f39\u7a97\u5bbd\u9ad8\uff0c\u9ed8\u8ba4\u503c\u4e3a '700px', '670px' $grid->setDialogFormDimensions('50%', '50%'); // \u7981\u7528\u5220\u9664\u6309\u94ae $grid->disableDeleteButton(); // \u663e\u793a\u5220\u9664\u6309\u94ae $grid->showDeleteButton(); \u8bbe\u7f6e\u6279\u91cf\u64cd\u4f5c\u6309\u94ae (batchActions) // \u7981\u7528 $grid->disableBatchActions(); // \u663e\u793a $grid->showBatchActions(); // \u7981\u7528\u6279\u91cf\u5220\u9664\u6309\u94ae $grid->disableBatchDelete(); // \u663e\u793a\u6279\u91cf\u5220\u9664\u6309\u94ae $grid->showBatchDelete(); \u8bbe\u7f6e\u5de5\u5177\u680f (toolbar) // \u7981\u7528 $grid->disableToolbar(); // \u663e\u793a $grid->showToolbar(); \u8bbe\u7f6e\u5237\u65b0\u6309\u94ae (refresh) // \u7981\u7528 $grid->disableRefreshButton(); // \u663e\u793a $grid->showRefreshButton(); \u8bbe\u7f6e\u5206\u9875\u529f\u80fd (paginate) // \u7981\u7528 $grid->disablePagination(); // \u663e\u793a $grid->showPagination(); \u7b80\u5316\u5206\u9875 (simplePaginate) \u542f\u7528 simplePaginate \u529f\u80fd\u540e\u4f1a\u4f7f\u7528 Laravel \u7684 simplePaginate \u529f\u80fd\u8fdb\u884c\u5206\u9875\uff0c\u5f53\u6570\u636e\u91cf\u8f83\u5927\u65f6\u53ef\u4ee5\u5927\u5e45\u63d0\u5347\u9875\u9762\u7684\u54cd\u5e94\u901f\u5ea6\uff0c\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4f7f\u7528\u6b64\u529f\u80fd\u540e\u5c06\u4e0d\u4f1a\u67e5\u8be2\u6570\u636e\u8868\u7684 \u603b\u884c\u6570 \u3002 // \u542f\u7528 $grid->simplePaginate(); // \u7981\u7528 $grid->simplePaginate(false); \u8bbe\u7f6e\u6bcf\u9875\u663e\u793a\u884c\u6570 // \u9ed8\u8ba4\u4e3a\u6bcf\u987520\u6761 $grid->paginate(15); \u8bbe\u7f6e\u5206\u9875\u9009\u62e9\u5668\u9009\u9879 $grid->perPages([10, 20, 30, 40, 50]); // \u7981\u7528\u5206\u9875\u9009\u62e9\u5668 $grid->disablePerPages(); addTableClass \u901a\u8fc7 addTableClass \u53ef\u4ee5\u7ed9\u8868\u683c\u7684 table \u6dfb\u52a0 css \u6837\u5f0f $grid->addTableClass(['class1', 'class2']); \u8bbe\u7f6e\u8868\u683c\u6587\u5b57\u5c45\u4e2d (text-center) $grid->addTableClass(['table-text-center']); \u663e\u793a\u6a2a\u5411\u6eda\u52a8\u6761 (scrollbarX) \u663e\u793a\u8868\u683c\u6a2a\u5411\u6eda\u52a8\u6761\uff0c\u9ed8\u8ba4\u4e0d\u663e\u793a // \u542f\u7528 $grid->scrollbarX(); // \u7981\u7528 $grid->scrollbarX(false); \u8bbe\u7f6e\u8868\u683c\u5916\u5c42\u5bb9\u5668 // \u66f4\u6539\u8868\u683c\u5916\u5c42\u5bb9\u5668 $grid->wrap(function (Renderable $view) { $tab = Tab::make(); $tab->add('\u793a\u4f8b', $view); $tab->add('\u4ee3\u7801', $this->code(), true); return $tab; }); \u5173\u8054\u6a21\u578b \u53c2\u8003 \u8868\u683c\u5173\u8054\u5173\u7cfb","title":"\u8868\u683c\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/model-grid/#_1","text":"","title":"\u8868\u683c\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/model-grid/#_2","text":"Dcat\\Admin\\Grid \u7c7b\u7528\u4e8e\u751f\u6210\u57fa\u4e8e\u6570\u636e\u6a21\u578b\u7684\u8868\u683c\uff0c\u5148\u6765\u4e2a\u4f8b\u5b50\uff0c\u6570\u636e\u5e93\u4e2d\u6709 movies \u8868 CREATE TABLE `movies` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `director` int(10) unsigned NOT NULL, `describe` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `rate` tinyint unsigned NOT NULL, `released` enum(0, 1), `release_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; \u5bf9\u5e94\u7684\u6570\u636e\u6a21\u578b\u4e3a App\\Models\\Movie \uff0c\u5bf9\u5e94\u7684\u6570\u636e\u4ed3\u5e93\u4e3a App\\Admin\\Repositories\\Movie \uff0c\u6570\u636e\u4ed3\u5e93\u4ee3\u7801\u5982\u4e0b\uff1a {tip} \u5982\u679c\u4f60\u7684\u6570\u636e\u6765\u81ea MySQL \uff0c\u5219 \u6570\u636e\u4ed3\u5e93 \u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 Model \u3002 <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use App\\Models\\Movie as MovieModel; class Movie extends EloquentRepository { protected $eloquentClass = MovieModel::class; /** * \u8bbe\u7f6e\u8868\u683c\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\u67e5\u8be2\u6240\u6709\u5b57\u6bb5 * * @return array */ public function getGridColumns(){ return ['id', 'title', 'director', 'rate', ...]; } } \u4e0b\u9762\u7684\u4ee3\u7801\u53ef\u4ee5\u751f\u6210\u8868 movies \u7684\u6570\u636e\u8868\u683c\uff1a <?php namespace App\\Admin\\Controllers; use App\\Admin\\Repositories\\Movie; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Controllers\\AdminController; class MovieController extends AdminController { protected function grid() { return Grid::make(new Movie(), function (Grid $grid) { // \u7b2c\u4e00\u5217\u663e\u793aid\u5b57\u6bb5\uff0c\u5e76\u5c06\u8fd9\u4e00\u5217\u8bbe\u7f6e\u4e3a\u53ef\u6392\u5e8f\u5217 $grid->column('id', 'ID')->sortable(); // \u7b2c\u4e8c\u5217\u663e\u793atitle\u5b57\u6bb5\uff0c\u7531\u4e8etitle\u5b57\u6bb5\u540d\u548cGrid\u5bf9\u8c61\u7684title\u65b9\u6cd5\u51b2\u7a81\uff0c\u6240\u4ee5\u7528Grid\u7684column()\u65b9\u6cd5\u4ee3\u66ff $grid->column('title'); // \u7b2c\u4e09\u5217\u663e\u793adirector\u5b57\u6bb5\uff0c\u901a\u8fc7display($callback)\u65b9\u6cd5\u8bbe\u7f6e\u8fd9\u4e00\u5217\u7684\u663e\u793a\u5185\u5bb9\u4e3ausers\u8868\u4e2d\u5bf9\u5e94\u7684\u7528\u6237\u540d $grid->column('director')->display(function($userId) { return User::find($userId)->name; }); // \u7b2c\u56db\u5217\u663e\u793a\u4e3adescribe\u5b57\u6bb5 $grid->column('describe'); // \u7b2c\u4e94\u5217\u663e\u793a\u4e3arate\u5b57\u6bb5 $grid->column('rate'); // \u7b2c\u516d\u5217\u663e\u793areleased\u5b57\u6bb5\uff0c\u901a\u8fc7display($callback)\u65b9\u6cd5\u6765\u683c\u5f0f\u5316\u663e\u793a\u8f93\u51fa $grid->column('released', '\u4e0a\u6620?')->display(function ($released) { return $released ? '\u662f' : '\u5426'; }); // \u4e0b\u9762\u4e3a\u4e09\u4e2a\u65f6\u95f4\u5b57\u6bb5\u7684\u5217\u663e\u793a $grid->column('release_at'); $grid->column('created_at'); $grid->column('updated_at'); // filter($callback)\u65b9\u6cd5\u7528\u6765\u8bbe\u7f6e\u8868\u683c\u7684\u7b80\u5355\u641c\u7d22\u6846 $grid->filter(function ($filter) { // \u8bbe\u7f6ecreated_at\u5b57\u6bb5\u7684\u8303\u56f4\u67e5\u8be2 $filter->between('created_at', 'Created Time')->datetime(); }); }); } }","title":"\u7b80\u5355\u793a\u4f8b"},{"location":"2.x/model-grid/#_3","text":"","title":"\u8868\u683c\u663e\u793a\u6a21\u5f0f"},{"location":"2.x/model-grid/#table_collapse","text":"\u5728\u8fd9\u4e2a\u7248\u672c\u5f00\u59cb\uff0c\u9ed8\u8ba4\u7684\u8868\u683c\u5e03\u5c40\u5c06\u4f1a\u91c7\u7528 table_collapse \u6a21\u5f0f\uff0c\u6548\u679c\u5982\u4e0b \u5982\u679c\u60f3\u8981\u5207\u6362\u56de\u65e7\u7248\u672c\u7684\u8868\u683c\u5e03\u5c40\u6837\u5f0f\uff0c\u53ef\u4ee5\u5728 app/Admin/bootstrap.php \u4e2d\u52a0\u4e0a Grid::resolving(function (Grid $grid) { $grid->tableCollapse(false); });","title":"table_collapse"},{"location":"2.x/model-grid/#_4","text":"\u901a\u8fc7 withBorder \u65b9\u5f0f\u53ef\u4ee5\u8ba9\u8868\u683c\u663e\u793a\u8fb9\u6846 $grid->withBorder(); \u6548\u679c \u7981\u7528\u8fb9\u6846\u6a21\u5f0f $grid->withBorder(false);","title":"\u8fb9\u6846\u6a21\u5f0f"},{"location":"2.x/model-grid/#_5","text":"","title":"\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5"},{"location":"2.x/model-grid/#column","text":"// \u6dfb\u52a0\u5355\u5217 $grid->column('username', '\u7528\u6237\u540d'); // \u6dfb\u52a0\u591a\u5217 $grid->columns('email', 'username' ...);","title":"\u6dfb\u52a0\u5217 (column)"},{"location":"2.x/model-grid/#_6","text":"$grid->model()->where('id', '>', 100); $grid->model()->orderBy('profile.age'); // \u56de\u6536\u7ad9\u6570\u636e $grid->model()->onlyTrashed(); ... \u540c\u65f6\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u65b9\u5f0f protected function grid() { return Grid::make(Model::with('...')->where(...), function (Grid $grid) { ... }); } \u5176\u5b83\u67e5\u8be2\u65b9\u6cd5\u53ef\u4ee5\u53c2\u8003 eloquent \u7684\u67e5\u8be2\u65b9\u6cd5","title":"\u4fee\u6539\u6765\u6e90\u6570\u636e"},{"location":"2.x/model-grid/#display","text":"$grid->column('text')->display(function($text) { return str_limit($text, 30, '...'); }); // \u5141\u8bb8\u6df7\u5408\u4f7f\u7528\u591a\u4e2a\u201cdisplay\u201d\u65b9\u6cd5 $grid->column('name')->display(function ($name) { return \"<b>$name</b>\"; })->display(function ($name) { return \"<span class='label'>$name</span>\"; }); $grid->column('email')->display(function ($email) { return \"mailto:$email\"; }); // \u53ef\u4ee5\u76f4\u63a5\u5199\u5b57\u7b26\u4e32 $grid->column('username')->display('...'); // \u6dfb\u52a0\u4e0d\u5b58\u5728\u7684\u5b57\u6bb5 $grid->column('column_not_in_table')->display(function () { return 'blablabla....'.$this->id; });","title":"\u4fee\u6539\u663e\u793a\u8f93\u51fa (display)"},{"location":"2.x/model-grid/#number","text":"\u901a\u8fc7 number \u65b9\u6cd5\u53ef\u4ee5\u5728\u8868\u683c\u4e2d\u6dfb\u52a0\u4e00\u5217\u4ece 1 \u5f00\u59cb\u8ba1\u7b97\u7684\u884c\u5e8f\u53f7\u5217 $grid->number();","title":"\u663e\u793a\u5e8f\u53f7 (number)"},{"location":"2.x/model-grid/#setname","text":"\u5f53\u9875\u9762\u5b58\u5728\u591a\u4e2a Grid \u8868\u683c\u65f6\uff0c\u9700\u8981\u7ed9\u8868\u683c\u8bbe\u7f6e\u4e0d\u540c\u7684\u540d\u79f0\uff0c\u5426\u5219\u90e8\u5206\u529f\u80fd\u53ef\u80fd\u4f1a\u51fa\u73b0\u51b2\u7a81\u7684\u60c5\u51b5 $grid->setName('name1');","title":"\u8bbe\u7f6e\u540d\u79f0 (setName)"},{"location":"2.x/model-grid/#row","text":"display() \u65b9\u6cd5\u63a5\u6536\u7684\u533f\u540d\u51fd\u6570\u7ed1\u5b9a\u4e86\u5f53\u524d\u884c\u7684\u6570\u636e\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5728\u91cc\u9762\u8c03\u7528\u5f53\u524d\u884c\u7684\u5176\u5b83\u5b57\u6bb5\u6570\u636e $grid->column('first_name'); $grid->column('last_name'); // \u4e0d\u5b58\u7684\u5b57\u6bb5\u5217 $grid->column('full_name')->display(function () { return $this->first_name.' '.$this->last_name; });","title":"\u83b7\u53d6\u5f53\u524d\u884c\u6570\u636e (row)"},{"location":"2.x/model-grid/#_7","text":"\u5de5\u5177\u680f\u6309\u94ae\u9ed8\u8ba4\u663e\u793a outline \u6a21\u5f0f\uff0c\u6548\u679c\u5982\u4e0b \u7528\u6cd5 $grid->toolsWithOutline(); // \u7981\u6b62 $grid->toolsWithOutline(false); \u6548\u679c \u7981\u7528 outline \u540e\u7684\u6548\u679c \u5982\u679c\u4f60\u5e0c\u671b\u67d0\u4e2a\u6309\u94ae\u4e0d\u4f7f\u7528 outline \u6a21\u5f0f\uff0c\u53ef\u4ee5\u5728\u6309\u94ae\u7684 class \u5c5e\u6027\u4e2d\u52a0\u4e0a disable-outline $grid->tools('<a class=\"btn btn-primary disable-outline\">\u6d4b\u8bd5\u6309\u94ae</a>');","title":"\u8bbe\u7f6e\u5de5\u5177\u680f\u6309\u94ae\u6837\u5f0f"},{"location":"2.x/model-grid/#_8","text":"\u6b64\u529f\u80fd\u9ed8\u8ba4\u5f00\u542f // \u7981\u7528 $grid->disableCreateButton(); // \u663e\u793a $grid->showCreateButton();","title":"\u8bbe\u7f6e\u521b\u5efa\u6309\u94ae"},{"location":"2.x/model-grid/#_9","text":"\u6b64\u529f\u80fd\u9ed8\u8ba4\u4e0d\u5f00\u542f $grid->enableDialogCreate(); // \u8bbe\u7f6e\u5f39\u7a97\u5bbd\u9ad8\uff0c\u9ed8\u8ba4\u503c\u4e3a '700px', '670px' $grid->setDialogFormDimensions('50%', '50%');","title":"\u5f00\u542f\u5f39\u7a97\u521b\u5efa\u8868\u5355"},{"location":"2.x/model-grid/#setresource","text":"\u8bbe\u7f6e\u4fee\u6539\u521b\u5efa\u4ee5\u53ca\u66f4\u65b0\u6309\u94ae\u7684\u8def\u7531\u524d\u7f00 $grid->setResource('auth/users');","title":"\u4fee\u6539\u521b\u5efa\u4ee5\u53ca\u66f4\u65b0\u6309\u94ae\u7684\u8def\u7531 (setResource)"},{"location":"2.x/model-grid/#_10","text":"\u6b64\u529f\u80fd\u9ed8\u8ba4\u5f00\u542f // \u7981\u7528 $grid->disableFilter(); // \u663e\u793a $grid->showFilter(); // \u7981\u7528\u8fc7\u6ee4\u5668\u6309\u94ae $grid->disableFilterButton(); // \u663e\u793a\u8fc7\u6ee4\u5668\u6309\u94ae $grid->showFilterButton();","title":"\u8bbe\u7f6e\u67e5\u8be2\u8fc7\u6ee4\u5668"},{"location":"2.x/model-grid/#rowselector","text":"// \u7981\u7528 $grid->disableRowSelector(); // \u663e\u793a $grid->showRowSelector();","title":"\u884c\u9009\u62e9\u5668 (rowSelector)"},{"location":"2.x/model-grid/#_11","text":"\u8bbe\u7f6e\u9009\u4e2d\u540e\u9700\u8981\u663e\u793a\u7684\u5b57\u6bb5\uff0c\u5982\u4e0d\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u53d6 name \u3001 title \u3001 username \u4e2d\u7684\u4e00\u4e2a\u3002 $grid->column('full_name'); $grid->column('age'); ... $grid->rowSelector()->titleColumn('full_name');","title":"\u8bbe\u7f6e\u9009\u62e9\u4e2d\u884c\u7684\u6807\u9898\u5b57\u6bb5"},{"location":"2.x/model-grid/#id","text":"\u8bbe\u7f6e\u9009\u4e2d\u540e\u9700\u8981\u4fdd\u5b58\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\u4e3a \u6570\u636e\u8868\u4e3b\u952e(id) \u5b57\u6bb5 $grid->column('new_id'); ... $grid->rowSelector()->idColumn('new_id');","title":"\u8bbe\u7f6e\u9009\u62e9\u4e2d\u884c\u7684ID\u5b57\u6bb5"},{"location":"2.x/model-grid/#checkbox","text":"\u9ed8\u8ba4 primary \uff0c\u652f\u6301\uff1a default \u3001 primary \u3001 success \u3001 info \u3001 danger \u3001 purple \u3001 inverse \u3002 $grid->rowSelector()->style('success');","title":"\u8bbe\u7f6echeckbox\u9009\u62e9\u6846\u989c\u8272"},{"location":"2.x/model-grid/#_12","text":"\u6b64\u529f\u80fd\u9ed8\u8ba4\u4e0d\u5f00\u542f\u3002 $grid->rowSelector()->click();","title":"\u70b9\u51fb\u5f53\u524d\u884c\u4efb\u610f\u4f4d\u7f6e\u9009\u4e2d"},{"location":"2.x/model-grid/#_13","text":"use Dcat\\Admin\\Admin; $grid->rowSelector()->background(Admin::color()->dark20());","title":"\u8bbe\u7f6e\u9009\u4e2d\u884c\u7684\u80cc\u666f\u989c\u8272"},{"location":"2.x/model-grid/#check","text":"Since v2.0.21 \u901a\u8fc7 check \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u9ed8\u8ba4\u9009\u4e2d\u7684\u884c\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a array \u7c7b\u578b\u6216 \u533f\u540d\u51fd\u6570 \u53c2\u6570 // \u8bbe\u7f6e\u9ed8\u8ba4\u9009\u4e2d\u7b2c 1/3/5 \u884c $grid->rowSelector()->check([0, 2, 4]); // \u4f20\u9012\u95ed\u5305 $grid->rowSelector()->check(function () { // \u8bbe\u7f6e\u9ed8\u8ba4\u9009\u4e2d\u7b2c 1/3/5 \u884c return in_array($this->_index, [0, 2, 4]); }); // \u5728\u95ed\u5305\u4e2d\u4f7f\u7528\u5f53\u524d\u884c\u5176\u4ed6\u5b57\u6bb5 $grid->rowSelector()->check(function () { // \u8bbe\u7f6e\u9ed8\u8ba4\u9009\u4e2d id > 10 \u7684\u884c return $this->id > 10; });","title":"\u8bbe\u7f6e\u9ed8\u8ba4\u9009\u4e2d (check)"},{"location":"2.x/model-grid/#disable","text":"Since v2.0.21 \u901a\u8fc7 disable \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u7981\u6b62\u66f4\u6539\u9009\u4e2d\u72b6\u6001\u7684\u884c\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a array \u7c7b\u578b\u6216 \u533f\u540d\u51fd\u6570 \u53c2\u6570 // \u7981\u6b62\u7b2c 1/3/5 \u884c\u66f4\u6539\u9009\u4e2d\u72b6\u6001 $grid->rowSelector()->disable([0, 2, 4]); // \u4f20\u9012\u95ed\u5305 $grid->rowSelector()->disable(function () { // \u7981\u6b62\u7b2c 1/3/5 \u884c\u66f4\u6539\u9009\u4e2d\u72b6\u6001 return in_array($this->_index, [0, 2, 4]); }); // \u5728\u95ed\u5305\u4e2d\u4f7f\u7528\u5f53\u524d\u884c\u5176\u4ed6\u5b57\u6bb5 $grid->rowSelector()->disable(function () { // \u7981\u6b62 id > 10 \u7684\u884c\u66f4\u6539\u9009\u4e2d\u72b6\u6001 return $this->id > 10; }); // disable \u53ef\u4ee5\u548c check \u65b9\u6cd5\u4e00\u8d77\u4f7f\u7528 $grid->rowSelector()->check([2, 4])->disable([0, 2, 4]);","title":"\u7981\u6b62\u66f4\u6539\u9009\u4e2d\u72b6\u6001 (disable)"},{"location":"2.x/model-grid/#_14","text":"// \u7981\u7528 $grid->disableActions(); // \u663e\u793a $grid->showActions(); // \u7981\u7528\u8be6\u60c5\u6309\u94ae $grid->disableViewButton(); // \u663e\u793a\u8be6\u60c5\u6309\u94ae $grid->showViewButton(); // \u7981\u7528\u7f16\u8f91\u6309\u94ae $grid->disableEditButton(); // \u663e\u793a\u7f16\u8f91\u6309\u94ae $grid->showEditButton(); // \u7981\u7528\u5feb\u6377\u7f16\u8f91\u6309\u94ae $grid->disableQuickEditButton(); // \u663e\u793a\u5feb\u6377\u7f16\u8f91\u6309\u94ae $grid->showQuickEditButton(); // \u8bbe\u7f6e\u5f39\u7a97\u5bbd\u9ad8\uff0c\u9ed8\u8ba4\u503c\u4e3a '700px', '670px' $grid->setDialogFormDimensions('50%', '50%'); // \u7981\u7528\u5220\u9664\u6309\u94ae $grid->disableDeleteButton(); // \u663e\u793a\u5220\u9664\u6309\u94ae $grid->showDeleteButton();","title":"\u8bbe\u7f6e\u884c\u64cd\u4f5c\u6309\u94ae"},{"location":"2.x/model-grid/#batchactions","text":"// \u7981\u7528 $grid->disableBatchActions(); // \u663e\u793a $grid->showBatchActions(); // \u7981\u7528\u6279\u91cf\u5220\u9664\u6309\u94ae $grid->disableBatchDelete(); // \u663e\u793a\u6279\u91cf\u5220\u9664\u6309\u94ae $grid->showBatchDelete();","title":"\u8bbe\u7f6e\u6279\u91cf\u64cd\u4f5c\u6309\u94ae (batchActions)"},{"location":"2.x/model-grid/#toolbar","text":"// \u7981\u7528 $grid->disableToolbar(); // \u663e\u793a $grid->showToolbar();","title":"\u8bbe\u7f6e\u5de5\u5177\u680f (toolbar)"},{"location":"2.x/model-grid/#refresh","text":"// \u7981\u7528 $grid->disableRefreshButton(); // \u663e\u793a $grid->showRefreshButton();","title":"\u8bbe\u7f6e\u5237\u65b0\u6309\u94ae (refresh)"},{"location":"2.x/model-grid/#paginate","text":"// \u7981\u7528 $grid->disablePagination(); // \u663e\u793a $grid->showPagination();","title":"\u8bbe\u7f6e\u5206\u9875\u529f\u80fd (paginate)"},{"location":"2.x/model-grid/#simplepaginate","text":"\u542f\u7528 simplePaginate \u529f\u80fd\u540e\u4f1a\u4f7f\u7528 Laravel \u7684 simplePaginate \u529f\u80fd\u8fdb\u884c\u5206\u9875\uff0c\u5f53\u6570\u636e\u91cf\u8f83\u5927\u65f6\u53ef\u4ee5\u5927\u5e45\u63d0\u5347\u9875\u9762\u7684\u54cd\u5e94\u901f\u5ea6\uff0c\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4f7f\u7528\u6b64\u529f\u80fd\u540e\u5c06\u4e0d\u4f1a\u67e5\u8be2\u6570\u636e\u8868\u7684 \u603b\u884c\u6570 \u3002 // \u542f\u7528 $grid->simplePaginate(); // \u7981\u7528 $grid->simplePaginate(false);","title":"\u7b80\u5316\u5206\u9875 (simplePaginate)"},{"location":"2.x/model-grid/#_15","text":"// \u9ed8\u8ba4\u4e3a\u6bcf\u987520\u6761 $grid->paginate(15);","title":"\u8bbe\u7f6e\u6bcf\u9875\u663e\u793a\u884c\u6570"},{"location":"2.x/model-grid/#_16","text":"$grid->perPages([10, 20, 30, 40, 50]); // \u7981\u7528\u5206\u9875\u9009\u62e9\u5668 $grid->disablePerPages();","title":"\u8bbe\u7f6e\u5206\u9875\u9009\u62e9\u5668\u9009\u9879"},{"location":"2.x/model-grid/#addtableclass","text":"\u901a\u8fc7 addTableClass \u53ef\u4ee5\u7ed9\u8868\u683c\u7684 table \u6dfb\u52a0 css \u6837\u5f0f $grid->addTableClass(['class1', 'class2']);","title":"addTableClass"},{"location":"2.x/model-grid/#text-center","text":"$grid->addTableClass(['table-text-center']);","title":"\u8bbe\u7f6e\u8868\u683c\u6587\u5b57\u5c45\u4e2d (text-center)"},{"location":"2.x/model-grid/#scrollbarx","text":"\u663e\u793a\u8868\u683c\u6a2a\u5411\u6eda\u52a8\u6761\uff0c\u9ed8\u8ba4\u4e0d\u663e\u793a // \u542f\u7528 $grid->scrollbarX(); // \u7981\u7528 $grid->scrollbarX(false);","title":"\u663e\u793a\u6a2a\u5411\u6eda\u52a8\u6761 (scrollbarX)"},{"location":"2.x/model-grid/#_17","text":"// \u66f4\u6539\u8868\u683c\u5916\u5c42\u5bb9\u5668 $grid->wrap(function (Renderable $view) { $tab = Tab::make(); $tab->add('\u793a\u4f8b', $view); $tab->add('\u4ee3\u7801', $this->code(), true); return $tab; });","title":"\u8bbe\u7f6e\u8868\u683c\u5916\u5c42\u5bb9\u5668"},{"location":"2.x/model-grid/#_18","text":"\u53c2\u8003 \u8868\u683c\u5173\u8054\u5173\u7cfb","title":"\u5173\u8054\u6a21\u578b"},{"location":"2.x/model-json/","text":"JSON\u683c\u5f0f\u5b57\u6bb5\u5904\u7406 dcat-admin \u7684\u8868\u5355\u63d0\u4f9b\u4e86\u4e0b\u9762\u51e0\u4e2a\u7ec4\u4ef6\u6765\u5904\u7406 JSON \u683c\u5f0f\u7684\u5b57\u6bb5\uff0c\u65b9\u4fbf\u7528\u6765\u5904\u7406 JOSN \u683c\u5f0f\u7684\u5bf9\u8c61\u3001\u4e00\u7ef4\u6570\u7ec4\u3001\u4e8c\u7ef4\u6570\u7ec4\u7b49\u5bf9\u8c61\u3002 \u952e\u503c\u5bf9\u8c61 (keyValue) \u5982\u679c\u4f60\u7684\u5b57\u6bb5\u5b58\u50a8\u7684\u662f\u4e0d\u56fa\u5b9a \u952e \u7684 {\"field\":\"value\"} \u683c\u5f0f\uff0c\u53ef\u4ee5\u7528 keyValue \u7ec4\u4ef6: $form->keyValue('column_name'); // \u8bbe\u7f6e\u6821\u9a8c\u89c4\u5219 $form->keyValue('column_name')->rules('required|min:5'); \u81ea\u5b9a\u4e49\u952e\u540d\u4ee5\u53ca\u952e\u503c\u6807\u9898\u7ffb\u8bd1 $form->keyValue(...)->setKeyLabel('\u952e\u540d')->setValueLabel('\u952e\u503c'); \u56fa\u5b9a\u952e\u503c\u5bf9\u8c61 (embeds) \u7528\u4e8e\u5904\u7406 mysql \u7684 JSON \u7c7b\u578b\u5b57\u6bb5\u6570\u636e\u6216\u8005 mongodb \u7684 object \u7c7b\u578b\u6570\u636e\uff0c\u4e5f\u53ef\u4ee5\u5c06\u591a\u4e2a field \u7684\u6570\u636e\u503c\u4ee5 JSON \u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u5b58\u50a8\u5728 mysql \u7684\u5b57\u7b26\u4e32\u7c7b\u578b\u5b57\u6bb5\u4e2d \u9002\u7528\u4e8e\u6709\u56fa\u5b9a\u952e\u503c\u7684 JSON \u7c7b\u578b\u5b57\u6bb5 $form->embeds('column_name', function ($form) { $form->text('key1')->required(); $form->email('key2')->required(); $form->datetime('key3'); $form->dateRange('key4', 'key5', '\u8303\u56f4')->rules('required'); })->saving(funtion ($v) { // \u8f6c\u5316\u4e3ajson\u683c\u5f0f\u5b58\u50a8 return json_encode($v); }); // \u81ea\u5b9a\u4e49\u6807\u9898 $form->embeds('column_name', '\u5b57\u6bb5\u6807\u9898', function ($form) { ... }); \u56de\u8c03\u51fd\u6570\u91cc\u9762\u6784\u5efa\u8868\u5355\u5143\u7d20\u7684\u65b9\u6cd5\u8c03\u7528\u548c\u5916\u9762\u662f\u4e00\u6837\u7684\u3002 \u4e00\u7ef4\u6570\u7ec4 (list) \u5982\u679c\u4f60\u7684\u5b57\u6bb5\u662f\u7528\u6765\u5b58\u50a8 [\"foo\", \"Bar\"] \u683c\u5f0f\u7684\u4e00\u7ef4\u6570\u7ec4, \u53ef\u4ee5\u4f7f\u7528 list \u7ec4\u4ef6: $form->list('column_name'); // \u8bbe\u7f6e\u6821\u9a8c\u89c4\u5219 $form->list('column_name')->rules('required|min:5'); // \u8bbe\u7f6e\u6700\u5927\u548c\u6700\u5c0f\u5143\u7d20\u4e2a\u6570 $form->list('column_name')->max(10)->min(5); \u4e8c\u7ef4\u6570\u7ec4 (table) \u5982\u679c\u67d0\u4e00\u4e2a\u5b57\u6bb5\u5b58\u50a8\u7684\u662f json \u683c\u5f0f\u7684\u4e8c\u7ef4\u6570\u7ec4\uff0c\u53ef\u4ee5\u4f7f\u7528 table \u8868\u5355\u7ec4\u4ef6\u6765\u5b9e\u73b0\u5feb\u901f\u7684\u7f16\u8f91\uff1a $form->table('column_name', function ($table) { $table->text('key'); $table->text('value'); $table->textarea('desc'); })->saving(function ($v) { return json_encode($v); }); \u8fd9\u4e2a\u7ec4\u4ef6\u7c7b\u4f3c\u4e8e hasMany \u7ec4\u4ef6\uff0c\u4e0d\u8fc7\u662f\u7528\u6765\u5904\u7406\u5355\u4e2a\u5b57\u6bb5\u7684\u60c5\u51b5\uff0c\u9002\u7528\u4e8e\u7b80\u5355\u7684\u4e8c\u7ef4\u6570\u636e\u3002 \u4e8c\u7ef4\u6570\u7ec4 (array) \u5982\u679c\u67d0\u4e00\u4e2a\u5b57\u6bb5\u5b58\u50a8\u7684\u662f json \u683c\u5f0f\u7684\u4e8c\u7ef4\u6570\u7ec4\uff0c\u5e76\u4e14\u5b57\u6bb5\u6bd4\u8f83\u591a\uff0c\u53ef\u4ee5\u4f7f\u7528 array \u8868\u5355\u7ec4\u4ef6\u6765\u5b9e\u73b0\u5feb\u901f\u7684\u7f16\u8f91\uff1a $form->array('column_name', function ($table) { $table->text('key'); $table->text('value'); $table->textarea('desc'); })->saveAsJson();","title":"JSON\u683c\u5f0f\u5b57\u6bb5\u5904\u7406"},{"location":"2.x/model-json/#json","text":"dcat-admin \u7684\u8868\u5355\u63d0\u4f9b\u4e86\u4e0b\u9762\u51e0\u4e2a\u7ec4\u4ef6\u6765\u5904\u7406 JSON \u683c\u5f0f\u7684\u5b57\u6bb5\uff0c\u65b9\u4fbf\u7528\u6765\u5904\u7406 JOSN \u683c\u5f0f\u7684\u5bf9\u8c61\u3001\u4e00\u7ef4\u6570\u7ec4\u3001\u4e8c\u7ef4\u6570\u7ec4\u7b49\u5bf9\u8c61\u3002","title":"JSON\u683c\u5f0f\u5b57\u6bb5\u5904\u7406"},{"location":"2.x/model-json/#keyvalue","text":"\u5982\u679c\u4f60\u7684\u5b57\u6bb5\u5b58\u50a8\u7684\u662f\u4e0d\u56fa\u5b9a \u952e \u7684 {\"field\":\"value\"} \u683c\u5f0f\uff0c\u53ef\u4ee5\u7528 keyValue \u7ec4\u4ef6: $form->keyValue('column_name'); // \u8bbe\u7f6e\u6821\u9a8c\u89c4\u5219 $form->keyValue('column_name')->rules('required|min:5'); \u81ea\u5b9a\u4e49\u952e\u540d\u4ee5\u53ca\u952e\u503c\u6807\u9898\u7ffb\u8bd1 $form->keyValue(...)->setKeyLabel('\u952e\u540d')->setValueLabel('\u952e\u503c');","title":"\u952e\u503c\u5bf9\u8c61 (keyValue)"},{"location":"2.x/model-json/#embeds","text":"\u7528\u4e8e\u5904\u7406 mysql \u7684 JSON \u7c7b\u578b\u5b57\u6bb5\u6570\u636e\u6216\u8005 mongodb \u7684 object \u7c7b\u578b\u6570\u636e\uff0c\u4e5f\u53ef\u4ee5\u5c06\u591a\u4e2a field \u7684\u6570\u636e\u503c\u4ee5 JSON \u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u5b58\u50a8\u5728 mysql \u7684\u5b57\u7b26\u4e32\u7c7b\u578b\u5b57\u6bb5\u4e2d \u9002\u7528\u4e8e\u6709\u56fa\u5b9a\u952e\u503c\u7684 JSON \u7c7b\u578b\u5b57\u6bb5 $form->embeds('column_name', function ($form) { $form->text('key1')->required(); $form->email('key2')->required(); $form->datetime('key3'); $form->dateRange('key4', 'key5', '\u8303\u56f4')->rules('required'); })->saving(funtion ($v) { // \u8f6c\u5316\u4e3ajson\u683c\u5f0f\u5b58\u50a8 return json_encode($v); }); // \u81ea\u5b9a\u4e49\u6807\u9898 $form->embeds('column_name', '\u5b57\u6bb5\u6807\u9898', function ($form) { ... }); \u56de\u8c03\u51fd\u6570\u91cc\u9762\u6784\u5efa\u8868\u5355\u5143\u7d20\u7684\u65b9\u6cd5\u8c03\u7528\u548c\u5916\u9762\u662f\u4e00\u6837\u7684\u3002","title":"\u56fa\u5b9a\u952e\u503c\u5bf9\u8c61 (embeds)"},{"location":"2.x/model-json/#list","text":"\u5982\u679c\u4f60\u7684\u5b57\u6bb5\u662f\u7528\u6765\u5b58\u50a8 [\"foo\", \"Bar\"] \u683c\u5f0f\u7684\u4e00\u7ef4\u6570\u7ec4, \u53ef\u4ee5\u4f7f\u7528 list \u7ec4\u4ef6: $form->list('column_name'); // \u8bbe\u7f6e\u6821\u9a8c\u89c4\u5219 $form->list('column_name')->rules('required|min:5'); // \u8bbe\u7f6e\u6700\u5927\u548c\u6700\u5c0f\u5143\u7d20\u4e2a\u6570 $form->list('column_name')->max(10)->min(5);","title":"\u4e00\u7ef4\u6570\u7ec4 (list)"},{"location":"2.x/model-json/#table","text":"\u5982\u679c\u67d0\u4e00\u4e2a\u5b57\u6bb5\u5b58\u50a8\u7684\u662f json \u683c\u5f0f\u7684\u4e8c\u7ef4\u6570\u7ec4\uff0c\u53ef\u4ee5\u4f7f\u7528 table \u8868\u5355\u7ec4\u4ef6\u6765\u5b9e\u73b0\u5feb\u901f\u7684\u7f16\u8f91\uff1a $form->table('column_name', function ($table) { $table->text('key'); $table->text('value'); $table->textarea('desc'); })->saving(function ($v) { return json_encode($v); }); \u8fd9\u4e2a\u7ec4\u4ef6\u7c7b\u4f3c\u4e8e hasMany \u7ec4\u4ef6\uff0c\u4e0d\u8fc7\u662f\u7528\u6765\u5904\u7406\u5355\u4e2a\u5b57\u6bb5\u7684\u60c5\u51b5\uff0c\u9002\u7528\u4e8e\u7b80\u5355\u7684\u4e8c\u7ef4\u6570\u636e\u3002","title":"\u4e8c\u7ef4\u6570\u7ec4 (table)"},{"location":"2.x/model-json/#array","text":"\u5982\u679c\u67d0\u4e00\u4e2a\u5b57\u6bb5\u5b58\u50a8\u7684\u662f json \u683c\u5f0f\u7684\u4e8c\u7ef4\u6570\u7ec4\uff0c\u5e76\u4e14\u5b57\u6bb5\u6bd4\u8f83\u591a\uff0c\u53ef\u4ee5\u4f7f\u7528 array \u8868\u5355\u7ec4\u4ef6\u6765\u5b9e\u73b0\u5feb\u901f\u7684\u7f16\u8f91\uff1a $form->array('column_name', function ($table) { $table->text('key'); $table->text('value'); $table->textarea('desc'); })->saveAsJson();","title":"\u4e8c\u7ef4\u6570\u7ec4 (array)"},{"location":"2.x/model-relationship/","text":"\u8868\u5355\u5173\u8054\u5173\u7cfb \u4e00\u5bf9\u4e00 users \u8868\u548c profiles \u8868\u901a\u8fc7 profiles.user_id \u5b57\u6bb5\u751f\u6210\u4e00\u5bf9\u4e00\u5173\u8054 CREATE TABLE `users` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; CREATE TABLE `profiles` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `user_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `age` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `gender` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; \u5bf9\u5e94\u7684\u6570\u636e\u6a21\u5206\u522b\u4e3a: <?php namespace App\\Admin\\Models; use Illuminate\\Database\\Eloquent\\Model; class User extends Model { public function profile() { return $this->hasOne(Profile::class); } } class Profile extends Model { public function user() { return $this->belongsTo(User::class); } } \u5bf9\u5e94\u7684\u6570\u636e\u4ed3\u5e93\u4e3a\uff1a <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use User as UserModel; class User extends \\Dcat\\Admin\\Repositories\\EloquentRepository { protected $eloquentClass = UserModel::class; } \u901a\u8fc7\u4e0b\u9762\u7684\u4ee3\u7801\u53ef\u4ee5\u5173\u8054\u5728\u4e00\u4e2aform\u91cc\u9762: {tip} \u5b9e\u4f8b\u5316\u6570\u636e\u4ed3\u5e93\u65f6\u9700\u8981\u4f20\u5165\u5173\u8054\u6a21\u578b\u5b9a\u4e49\u7684\u5173\u8054\u540d\u79f0\uff0c\u76f8\u5f53\u4e8e\u4e3b\u52a8\u4f7f\u7528 Eloquent\\Model::with \u65b9\u6cd5\u3002 use App\\Admin\\Repositories\\User; // \u6ce8\u610f\u8fd9\u91cc\u5b9e\u4f8b\u5316\u6570\u636e\u4ed3\u5e93`User`\u65f6\u5fc5\u987b\u4f20\u5165\"profile\"\uff0c\u5426\u5219\u5c06\u65e0\u6cd5\u5173\u8054\"profiles\"\u8868\u6570\u636e $form = Form::make(User::with('profile'), function (Form $form) { $form->display('id'); $form->text('name'); $form->text('email'); $form->text('profile.age'); $form->text('profile.gender'); $form->datetime('created_at'); $form->datetime('updated_at'); }); \u5982\u679c\u4f60\u4e0d\u60f3\u4f7f\u7528\u6570\u636e\u4ed3\u5e93\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u6a21\u578b use App\\Admin\\Models\\User; // \u6ce8\u610f\u8fd9\u91cc\u662f\u76f4\u63a5\u4f7f\u7528\u6a21\u578b\uff0c\u6ca1\u6709\u4f7f\u7528\u6570\u636e\u4ed3\u5e93 $form = Form::make(User::with('profile'), function (Form $form) { $form->display('id'); ... }); \u4e00\u5bf9\u591a \u4e00\u5bf9\u591a\u7684\u4f7f\u7528\u8bf7\u53c2\u8003\u6587\u6863 \u8868\u5355\u5b57\u6bb5\u7684\u4f7f\u7528-\u4e00\u5bf9\u591a \u591a\u5bf9\u591a \u4e0b\u9762\u4ee5\u9879\u76ee\u5185\u7f6e\u7684 \u89d2\u8272\u7ba1\u7406 \u6a21\u5757\u7684 \u89d2\u8272\u7ed1\u5b9a\u6743\u9650 \u529f\u80fd\u4e3a\u4f8b\u6765\u6f14\u793a\u591a\u5bf9\u591a\u5173\u8054\u6a21\u578b\u7684\u7528\u6cd5 \u6a21\u578b Role <?php namespace Dcat\\Admin\\Models; use Dcat\\Admin\\Traits\\HasDateTimeFormatter; use Illuminate\\Database\\Eloquent\\Model; use Illuminate\\Database\\Eloquent\\Relations\\BelongsToMany; class Role extends Model { use HasDateTimeFormatter; /** * \u5b9a\u4e49\u4f60\u7684\u5173\u8054\u6a21\u578b. * * @return BelongsToMany */ public function permissions(): BelongsToMany { $pivotTable = 'admin_role_permissions'; // \u4e2d\u95f4\u8868 $relatedModel = Permission::class; // \u5173\u8054\u6a21\u578b\u7c7b\u540d return $this->belongsToMany($relatedModel, $pivotTable, 'role_id', 'permission_id'); } } use Dcat\\Admin\\Models\\Permission; // \u5b9e\u4f8b\u5316\u6570\u636e\u4ed3\u5e93\u65f6\u4f20\u5165 permissions\uff0c\u5219\u4f1a\u81ea\u52a8\u5173\u8054\u5173\u8054\u6a21\u578b\u7684\u6570\u636e // \u8fd9\u91cc\u4f20\u5165 permissions \u5173\u8054\u6743\u9650\u6a21\u578b\u7684\u6570\u636e $repository = Role::with(['permissions']); return Form::make($repository, function (Form $form) { $form->display('id', 'ID'); $form->text('slug', trans('admin.slug'))->required(); $form->text('name', trans('admin.name'))->required(); // \u8fd9\u91cc\u7684\u6570\u636e\u4f1a\u81ea\u52a8\u4fdd\u5b58\u5230\u5173\u8054\u6a21\u578b\u4e2d $form->tree('permissions') ->nodes(function () { return (new Permission())->allNodes(); }) ->customFormat(function ($v) { if (!$v) return []; // \u8fd9\u4e00\u6b65\u975e\u5e38\u91cd\u8981\uff0c\u9700\u8981\u628a\u6570\u636e\u5e93\u4e2d\u67e5\u51fa\u6765\u7684\u4e8c\u7ef4\u6570\u7ec4\u8f6c\u5316\u6210\u4e00\u7ef4\u6570\u7ec4 return array_column($v, 'id'); }); ... }); \u5982\u679c\u4f60\u4e0d\u60f3\u4f7f\u7528\u6570\u636e\u4ed3\u5e93\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u6a21\u578b use Dcat\\Admin\\Models\\Role; // \u6ce8\u610f\u8fd9\u91cc\u662f\u76f4\u63a5\u4f7f\u7528\u6a21\u578b\uff0c\u6ca1\u6709\u4f7f\u7528\u6570\u636e\u4ed3\u5e93 $form = Form::make(Role::with('permissions'), function (Form $form) { $form->display('id'); ... }); \u6700\u7ec8\u6548\u679c\u5982\u4e0b \u5173\u8054\u6a21\u578b\u540d\u79f0\u4e3a\u9a7c\u5cf0\u98ce\u683c \u5982\u679c\u4f60\u7684\u5173\u8054\u6a21\u578b\u540d\u79f0\u7684\u547d\u540d\u662f \u9a7c\u5cf0 \u98ce\u683c\uff0c\u90a3\u4e48\u4f7f\u7528\u7684\u65f6\u5019\u9700\u8981\u8f6c\u5316\u4e3a \u4e0b\u5212\u7ebf \u98ce\u683c\u547d\u540d \u4f8b\u5982 class User extend Model { public function userProfile() { return ...; } } \u4f7f\u7528 return Form::make(User::with(['userProfile']), function (Form $form) { ... // \u6ce8\u610f\u8fd9\u91cc\u5fc5\u987b\u4f7f\u7528\u4e0b\u5212\u7ebf\u98ce\u683c\u547d\u540d\uff0c\u5426\u5219\u5c06\u65e0\u6cd5\u663e\u793a\u7f16\u8f91\u6570\u636e $form->text('user_profile.postcode'); $form->text('user_profile.address'); });","title":"\u8868\u5355\u5173\u8054\u5173\u7cfb"},{"location":"2.x/model-relationship/#_1","text":"","title":"\u8868\u5355\u5173\u8054\u5173\u7cfb"},{"location":"2.x/model-relationship/#_2","text":"users \u8868\u548c profiles \u8868\u901a\u8fc7 profiles.user_id \u5b57\u6bb5\u751f\u6210\u4e00\u5bf9\u4e00\u5173\u8054 CREATE TABLE `users` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; CREATE TABLE `profiles` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `user_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `age` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `gender` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; \u5bf9\u5e94\u7684\u6570\u636e\u6a21\u5206\u522b\u4e3a: <?php namespace App\\Admin\\Models; use Illuminate\\Database\\Eloquent\\Model; class User extends Model { public function profile() { return $this->hasOne(Profile::class); } } class Profile extends Model { public function user() { return $this->belongsTo(User::class); } } \u5bf9\u5e94\u7684\u6570\u636e\u4ed3\u5e93\u4e3a\uff1a <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use User as UserModel; class User extends \\Dcat\\Admin\\Repositories\\EloquentRepository { protected $eloquentClass = UserModel::class; } \u901a\u8fc7\u4e0b\u9762\u7684\u4ee3\u7801\u53ef\u4ee5\u5173\u8054\u5728\u4e00\u4e2aform\u91cc\u9762: {tip} \u5b9e\u4f8b\u5316\u6570\u636e\u4ed3\u5e93\u65f6\u9700\u8981\u4f20\u5165\u5173\u8054\u6a21\u578b\u5b9a\u4e49\u7684\u5173\u8054\u540d\u79f0\uff0c\u76f8\u5f53\u4e8e\u4e3b\u52a8\u4f7f\u7528 Eloquent\\Model::with \u65b9\u6cd5\u3002 use App\\Admin\\Repositories\\User; // \u6ce8\u610f\u8fd9\u91cc\u5b9e\u4f8b\u5316\u6570\u636e\u4ed3\u5e93`User`\u65f6\u5fc5\u987b\u4f20\u5165\"profile\"\uff0c\u5426\u5219\u5c06\u65e0\u6cd5\u5173\u8054\"profiles\"\u8868\u6570\u636e $form = Form::make(User::with('profile'), function (Form $form) { $form->display('id'); $form->text('name'); $form->text('email'); $form->text('profile.age'); $form->text('profile.gender'); $form->datetime('created_at'); $form->datetime('updated_at'); }); \u5982\u679c\u4f60\u4e0d\u60f3\u4f7f\u7528\u6570\u636e\u4ed3\u5e93\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u6a21\u578b use App\\Admin\\Models\\User; // \u6ce8\u610f\u8fd9\u91cc\u662f\u76f4\u63a5\u4f7f\u7528\u6a21\u578b\uff0c\u6ca1\u6709\u4f7f\u7528\u6570\u636e\u4ed3\u5e93 $form = Form::make(User::with('profile'), function (Form $form) { $form->display('id'); ... });","title":"\u4e00\u5bf9\u4e00"},{"location":"2.x/model-relationship/#_3","text":"\u4e00\u5bf9\u591a\u7684\u4f7f\u7528\u8bf7\u53c2\u8003\u6587\u6863 \u8868\u5355\u5b57\u6bb5\u7684\u4f7f\u7528-\u4e00\u5bf9\u591a","title":"\u4e00\u5bf9\u591a"},{"location":"2.x/model-relationship/#_4","text":"\u4e0b\u9762\u4ee5\u9879\u76ee\u5185\u7f6e\u7684 \u89d2\u8272\u7ba1\u7406 \u6a21\u5757\u7684 \u89d2\u8272\u7ed1\u5b9a\u6743\u9650 \u529f\u80fd\u4e3a\u4f8b\u6765\u6f14\u793a\u591a\u5bf9\u591a\u5173\u8054\u6a21\u578b\u7684\u7528\u6cd5 \u6a21\u578b Role <?php namespace Dcat\\Admin\\Models; use Dcat\\Admin\\Traits\\HasDateTimeFormatter; use Illuminate\\Database\\Eloquent\\Model; use Illuminate\\Database\\Eloquent\\Relations\\BelongsToMany; class Role extends Model { use HasDateTimeFormatter; /** * \u5b9a\u4e49\u4f60\u7684\u5173\u8054\u6a21\u578b. * * @return BelongsToMany */ public function permissions(): BelongsToMany { $pivotTable = 'admin_role_permissions'; // \u4e2d\u95f4\u8868 $relatedModel = Permission::class; // \u5173\u8054\u6a21\u578b\u7c7b\u540d return $this->belongsToMany($relatedModel, $pivotTable, 'role_id', 'permission_id'); } } use Dcat\\Admin\\Models\\Permission; // \u5b9e\u4f8b\u5316\u6570\u636e\u4ed3\u5e93\u65f6\u4f20\u5165 permissions\uff0c\u5219\u4f1a\u81ea\u52a8\u5173\u8054\u5173\u8054\u6a21\u578b\u7684\u6570\u636e // \u8fd9\u91cc\u4f20\u5165 permissions \u5173\u8054\u6743\u9650\u6a21\u578b\u7684\u6570\u636e $repository = Role::with(['permissions']); return Form::make($repository, function (Form $form) { $form->display('id', 'ID'); $form->text('slug', trans('admin.slug'))->required(); $form->text('name', trans('admin.name'))->required(); // \u8fd9\u91cc\u7684\u6570\u636e\u4f1a\u81ea\u52a8\u4fdd\u5b58\u5230\u5173\u8054\u6a21\u578b\u4e2d $form->tree('permissions') ->nodes(function () { return (new Permission())->allNodes(); }) ->customFormat(function ($v) { if (!$v) return []; // \u8fd9\u4e00\u6b65\u975e\u5e38\u91cd\u8981\uff0c\u9700\u8981\u628a\u6570\u636e\u5e93\u4e2d\u67e5\u51fa\u6765\u7684\u4e8c\u7ef4\u6570\u7ec4\u8f6c\u5316\u6210\u4e00\u7ef4\u6570\u7ec4 return array_column($v, 'id'); }); ... }); \u5982\u679c\u4f60\u4e0d\u60f3\u4f7f\u7528\u6570\u636e\u4ed3\u5e93\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u6a21\u578b use Dcat\\Admin\\Models\\Role; // \u6ce8\u610f\u8fd9\u91cc\u662f\u76f4\u63a5\u4f7f\u7528\u6a21\u578b\uff0c\u6ca1\u6709\u4f7f\u7528\u6570\u636e\u4ed3\u5e93 $form = Form::make(Role::with('permissions'), function (Form $form) { $form->display('id'); ... }); \u6700\u7ec8\u6548\u679c\u5982\u4e0b","title":"\u591a\u5bf9\u591a"},{"location":"2.x/model-relationship/#_5","text":"\u5982\u679c\u4f60\u7684\u5173\u8054\u6a21\u578b\u540d\u79f0\u7684\u547d\u540d\u662f \u9a7c\u5cf0 \u98ce\u683c\uff0c\u90a3\u4e48\u4f7f\u7528\u7684\u65f6\u5019\u9700\u8981\u8f6c\u5316\u4e3a \u4e0b\u5212\u7ebf \u98ce\u683c\u547d\u540d \u4f8b\u5982 class User extend Model { public function userProfile() { return ...; } } \u4f7f\u7528 return Form::make(User::with(['userProfile']), function (Form $form) { ... // \u6ce8\u610f\u8fd9\u91cc\u5fc5\u987b\u4f7f\u7528\u4e0b\u5212\u7ebf\u98ce\u683c\u547d\u540d\uff0c\u5426\u5219\u5c06\u65e0\u6cd5\u663e\u793a\u7f16\u8f91\u6570\u636e $form->text('user_profile.postcode'); $form->text('user_profile.address'); });","title":"\u5173\u8054\u6a21\u578b\u540d\u79f0\u4e3a\u9a7c\u5cf0\u98ce\u683c"},{"location":"2.x/model-repository/","text":"\u6570\u636e\u4ed3\u5e93 \u6570\u636e\u4ed3\u5e93( Repository )\u662f Dcat Admin \u4e2d\u5bf9\u6570\u636e\u589e\u5220\u6539\u67e5\u64cd\u4f5c\u63a5\u53e3\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u901a\u8fc7 Repository \u7684\u4ecb\u5165\u53ef\u4ee5\u8ba9\u9875\u9762\u7684\u6784\u5efa\u4e0d\u518d\u5173\u5fc3\u6570\u636e\u8bfb\u5199\u529f\u80fd\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u5f00\u53d1\u8005\u901a\u8fc7\u5b9e\u73b0 Repository \u63a5\u53e3\u5373\u53ef\u5bf9\u6570\u636e\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u3002 {tip} \u5f53\u7136\u4e3a\u4e86\u65b9\u4fbf\u7cfb\u7edf\u4e5f\u4fdd\u7559\u4e86\u76f4\u63a5\u4f7f\u7528 Model \u7684\u529f\u80fd\uff0c\u5e95\u5c42\u4f1a\u81ea\u52a8\u628a Model \u8f6c\u5316\u4e3a\u6570\u636e\u4ed3\u5e93\u5b9e\u4f8b\uff0c\u6bd5\u7adf\u5927\u591a\u6570\u65f6\u5019\u76f4\u63a5\u4f7f\u7528 Model \u4e5f\u80fd\u6ee1\u8db3\u6211\u4eec\u7684\u9700\u6c42\u3002 \u6570\u636e\u8868\u683c Grid \u3001\u6570\u636e\u8868\u5355 Form \u3001\u6570\u636e\u8be6\u60c5 Show \u3001 Tree \u7b49\u7ec4\u4ef6\u4e0d\u518d\u76f4\u63a5\u4f9d\u8d56\u4e8e Model \uff0c\u800c\u662f\u4f9d\u8d56\u4e8e\u63d0\u4f9b\u66f4\u7b80\u5355\u6e05\u6670\u7684\u63a5\u53e3\u7684\u6570\u636e\u4ed3\u5e93\uff0c\u4e0b\u9762\u662f Repository \u7684\u6240\u6709\u63a5\u53e3\uff1a <?php namespace Dcat\\Admin\\Contracts; use Dcat\\Admin\\Form; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Show; use Illuminate\\Support\\Collection; interface Repository { /** * \u83b7\u53d6\u4e3b\u952e\u540d\u79f0. * * @return string */ public function getKeyName(); /** * \u83b7\u53d6\u521b\u5efa\u65f6\u95f4\u5b57\u6bb5. * * @return string */ public function getCreatedAtColumn(); /** * \u83b7\u53d6\u66f4\u65b0\u65f6\u95f4\u5b57\u6bb5. * * @return string */ public function getUpdatedAtColumn(); /** * \u662f\u5426\u4f7f\u7528\u8f6f\u5220\u9664. * * @return bool */ public function isSoftDeletes(); /** * \u83b7\u53d6Grid\u8868\u683c\u6570\u636e. * * @param Grid\\Model $model * * @return \\Illuminate\\Contracts\\Pagination\\LengthAwarePaginator|Collection|array */ public function get(Grid\\Model $model); /** * \u83b7\u53d6\u7f16\u8f91\u9875\u9762\u6570\u636e. * * @param Form $form * * @return array|\\Illuminate\\Contracts\\Support\\Arrayable */ public function edit(Form $form); /** * \u83b7\u53d6\u8be6\u60c5\u9875\u9762\u6570\u636e. * * @param Show $show * * @return array|\\Illuminate\\Contracts\\Support\\Arrayable */ public function detail(Show $show); /** * \u65b0\u589e\u8bb0\u5f55. * * @param Form $form * * @return mixed */ public function store(Form $form); /** * \u67e5\u8be2\u66f4\u65b0\u524d\u7684\u884c\u6570\u636e. * * @param Form $form * * @return array|\\Illuminate\\Contracts\\Support\\Arrayable */ public function updating(Form $form); /** * \u66f4\u65b0\u6570\u636e. * * @param Form $form * * @return bool */ public function update(Form $form); /** * \u5220\u9664\u6570\u636e. * * @param Form $form * @param array $deletingData * * @return mixed */ public function delete(Form $form, array $deletingData); /** * \u67e5\u8be2\u5220\u9664\u524d\u7684\u884c\u6570\u636e. * * @param Form $form * * @return array|\\Illuminate\\Contracts\\Support\\Arrayable */ public function deleting(Form $form); } \u5982\u679c\u4f60\u7684\u6570\u636e\u662f\u591a\u5c42\u7ea7\u7ed3\u6784\uff0c\u5219\u8fd8\u9700\u8981\u5b9e\u73b0\u4ee5\u4e0b\u63a5\u53e3 <?php namespace Dcat\\Admin\\Contracts; interface TreeRepository { /** * \u83b7\u53d6\u4e3b\u952e\u5b57\u6bb5\u540d\u79f0. * * @return string */ public function getPrimaryKeyColumn(); /** * \u83b7\u53d6\u7236\u7ea7ID\u5b57\u6bb5\u540d\u79f0. * * @return string */ public function getParentColumn(); /** * \u83b7\u53d6\u6807\u9898\u5b57\u6bb5\u540d\u79f0. * * @return string */ public function getTitleColumn(); /** * \u83b7\u53d6\u6392\u5e8f\u5b57\u6bb5\u540d\u79f0. * * @return string */ public function getOrderColumn(); /** * \u4fdd\u5b58\u5c42\u7ea7\u6570\u636e\u6392\u5e8f. * * @param array $tree * @param int $parentId */ public function saveOrder($tree = [], $parentId = 0); /** * \u8bbe\u7f6e\u6570\u636e\u67e5\u8be2\u56de\u8c03. * * @param \\Closure|null $query * * @return $this */ public function withQuery($queryCallback); /** * \u83b7\u53d6\u5c42\u7ea7\u6570\u636e. * * @return array */ public function toTree(); } Repository\u63a5\u53e3 getKeyName \u6b64\u63a5\u53e3\u8981\u6c42\u8fd4\u56de\u6570\u636e\u7684\u4e3b\u952e\u5b57\u6bb5\u540d\u79f0\uff0c\u9700\u8981\u8fd4\u56de string \u7c7b\u578b\u503c\u3002 public function getKeyName() { return 'id'; } getCreatedAtColumn \u6b64\u63a5\u53e3\u8981\u6c42\u8fd4\u56de\u6570\u636e\u7684 created_at \u5b57\u6bb5\u540d\u79f0\uff0c\u5982\u679c\u6ca1\u6709\u503c\u53ef\u4ee5\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u6216 null \u503c\u3002 // \u5982\u679c\u6ca1\u6709\u503c\u53ef\u4ee5\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u6216`null`\u503c public function getCreatedAtColumn() { return 'created_at'; } getUpdatedAtColumn \u6b64\u63a5\u53e3\u8981\u6c42\u8fd4\u56de\u6570\u636e\u7684 updated_at \u5b57\u6bb5\u540d\u79f0\uff0c\u5982\u679c\u6ca1\u6709\u503c\u53ef\u4ee5\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u6216 null \u503c\u3002 // \u5982\u679c\u6ca1\u6709\u503c\u53ef\u4ee5\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u6216`null`\u503c public function getCreatedAtColumn() { return 'updated_at'; } isSoftDeletes \u6b64\u63a5\u53e3\u8981\u6c42\u8fd4\u56de\u6570\u636e\u662f\u5426\u652f\u6301\u8f6f\u5220\u9664\uff0c\u8bf7\u8fd4\u56de\u4e00\u4e2a bool \u7c7b\u578b\u7684\u503c\u3002 public function isSoftDeletes() { return true; } get \u6b64\u63a5\u53e3\u8981\u6c42\u8fd4\u56de\u6570\u636e\u8868\u683c Grid \u7684\u6570\u636e\uff0c\u7528\u4e8e\u6570\u636e\u8868\u683c\u5c55\u793a\uff0c\u8981\u6c42\u8fd4\u56de\u4e00\u4e2a array \u3001 Illuminate\\Support\\Collection \u6216 LengthAwarePaginator \u7c7b\u578b\u503c\u3002 \u5206\u9875 \u5f53\u6570\u636e\u9700\u8981\u5206\u9875\u65f6\u8981\u6c42\u8fd4\u56de\u4e00\u4e2a \\Illuminate\\Contracts\\Pagination\\LengthAwarePaginator \u7c7b\u578b\u503c\uff1a public function get(Grid\\Model $model) { // \u83b7\u53d6\u5f53\u524d\u9875\u6570 $currentPage = $model->getCurrentPage(); // \u83b7\u53d6\u6bcf\u9875\u663e\u793a\u884c\u6570 $perPage = $model->getPerPage(); // \u83b7\u53d6\u7b5b\u9009\u53c2\u6570 $city = $model->filter()->input(Grid\\Filter\\Scope::QUERY_NAME, '\u5e7f\u5dde'); $start = ($currentPage - 1) * $perPage; $client = new \\GuzzleHttp\\Client(); $response = $client->get(\"{$this->api}?{$this->apiKey}&city=$city&start=$start&count=$perPage\"); $data = json_decode((string)$response->getBody(), true); return $model->makePaginator( $data['total'] ?? 0, // \u4f20\u5165\u603b\u8bb0\u5f55\u6570 $data['subjects'] ?? [] // \u4f20\u5165\u6570\u636e\u4e8c\u7ef4\u6570\u7ec4 ); } \u4e0d\u5206\u9875 \u5982\u679c\u4e0d\u9700\u8981\u5206\u9875\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a array \u6216 Illuminate\\Support\\Collection \u7c7b\u578b\u503c\u5373\u53ef\u3002 public function get(Grid\\Model $model) { return [ ['id' => 1, 'name' => 'n1'], ['id' => 2, 'name' => 'n2'] ]; } \u6ce8\u610f\uff0c grid \u9700\u8981\u7981\u7528\u5206\u9875 $grid->disablePagination() edit \u6b64\u63a5\u53e3\u8981\u6c42\u8fd4\u56de\u8868\u5355\u7f16\u8f91\u9875\u9762\u7684\u6570\u636e\uff0c\u7528\u4e8e\u663e\u793a\u6570\u636e\u8868\u5355\u7f16\u8f91\u9875\u9762\uff0c\u9700\u8981\u8fd4\u56de array \u7c7b\u578b\u503c\u3002 public function edit(Form $form): array { // \u83b7\u53d6\u6570\u636e\u4e3b\u952e\u503c $id = $form->getKey(); return ['id' => 1, 'name' => 'n1']; } detail \u6b64\u63a5\u53e3\u8981\u6c42\u8fd4\u56de\u6570\u636e\u8be6\u60c5\u9875\u9762\u7684\u6570\u636e\uff0c\u7528\u4e8e\u663e\u793a\u6570\u636e\u8be6\u60c5\uff0c\u9700\u8981\u8fd4\u56de array \u7c7b\u578b\u503c\u3002 public function detail(Show $show): array { // \u83b7\u53d6\u6570\u636e\u4e3b\u952e\u503c $id = $show->getId(); return ['id' => 1, 'name' => 'n1']; } store \u6b64\u63a5\u53e3\u7528\u4e8e\u65b0\u589e\u4e00\u6761\u8bb0\u5f55\uff0c\u53ef\u4ee5\u8fd4\u56de int \u3001 string \u6216 bool \u7c7b\u578b\u503c\u3002 public function store(Form $form) { // \u83b7\u53d6\u5f85\u65b0\u589e\u7684\u6570\u636e $attributes = $form->updates(); // \u6267\u884c\u4f60\u7684\u65b0\u589e\u903b\u8f91 // \u8fd4\u56de\u65b0\u589e\u8bb0\u5f55id\u6216bool\u503c return 1; } updating \u6b64\u63a5\u53e3\u7528\u4e8e\u6570\u636e\u8868\u5355\u4fee\u6539\u6570\u636e\u65f6\u67e5\u8be2\u539f\u59cb\u8bb0\u5f55\uff0c\u9700\u8981\u8fd4\u56de array \u6216 Model \u7c7b\u578b\u503c\u3002 {tip} \u6b64\u63a5\u53e3\u53ea\u6709\u67d0\u4e9b\u7279\u6b8a\u5b57\u6bb5\u4f1a\u7528\u5230\uff0c\u5982\u56fe\u7247\u3001\u6587\u4ef6\u4e0a\u4f20\u5b57\u6bb5\uff0c\u5f53\u66f4\u6539\u4e86\u56fe\u7247\u6216\u6587\u4ef6\u65f6\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a\u63a5\u53e3\u67e5\u51fa\u7684\u6570\u636e\u5220\u9664\u65e7\u6587\u4ef6\u3002\u6240\u4ee5\u5982\u679c\u4f60\u7684\u8868\u5355\u4e2d\u6ca1\u6709\u7528\u5230\u6b64\u7c7b\u7279\u6b8a\u5b57\u6bb5\uff0c\u6b64\u63a5\u53e3\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a\u7a7a\u6570\u7ec4\u3002 public function updating(Form $form) { // \u83b7\u53d6\u6570\u636e\u4e3b\u952e\u503c $id = $form->getKey(); return ['id' => 1, 'name' => 'n1']; } update \u6b64\u63a5\u53e3\u7528\u4e8e\u6570\u636e\u8868\u5355\u4fee\u6539\u8bb0\u5f55\uff0c\u53ef\u4ee5\u8fd4\u56de int \u3001 string \u6216 bool \u7c7b\u578b\u503c\u3002 public function update(Form $form) { // \u83b7\u53d6\u5f85\u7f16\u8f91\u7684\u6570\u636e $attributes = $form->updates(); // \u6267\u884c\u4f60\u7684\u7f16\u8f91\u903b\u8f91 // \u8fd4\u56de\u6210\u529f return true; } deleting \u6b64\u63a5\u53e3\u7528\u4e8e\u5220\u9664\u6570\u636e\u65f6\u67e5\u8be2\u539f\u59cb\u8bb0\u5f55\uff0c\u9700\u8981\u8fd4\u56de\u4e8c\u7ef4\u6570\u7ec4\uff0c\u6216Collection model\u3002 public function deleting(Form $form): array { // \u5f53\u6279\u91cf\u5220\u9664\u65f6id\u4e3a\u591a\u4e2a $id = explode(',', $form->getKey()); // \u6267\u884c\u4f60\u7684\u903b\u8f91 // \u6ce8\u610f\u8fd9\u91cc\u9700\u8981\u8fd4\u56de\u4e8c\u7ef4\u6570\u7ec4 return [ ['id' => 1, 'name' => 'h1'], ]; // \u4e5f\u53ef\u4ee5\u8fd4\u56decollection return Modell::find($id); } destroy \u5355\u884c/\u6279\u91cf\u5220\u9664\u6570\u636e\u65b9\u6cd5\uff0c\u6210\u529f\u8fd4\u56de true \uff0c\u5931\u8d25\u8fd4\u56de false \u3002 public function destroy(Form $form, array $deletingData) { // \u5f53\u6279\u91cf\u5220\u9664\u65f6id\u4e3a\u591a\u4e2a $id = explode(',', $form->getKey()); // $deletingData \u662f getDataWhenDeleting \u63a5\u53e3\u8fd4\u56de\u7684\u6570\u636e // \u6267\u884c\u4f60\u7684\u903b\u8f91 return true; } TreeRepository\u63a5\u53e3 getPrimaryKeyColumn \u6b64\u63a5\u53e3\u7528\u4e8e\u8fd4\u56de\u6570\u636e\u7684\u4e3b\u952e\u5b57\u6bb5\u540d\u79f0\uff0c\u9700\u8981\u8fd4\u56de string \u7c7b\u578b\u503c\u3002 public function getPrimaryKeyColumn() { return $this->getKeyName(); } getParentColumn \u6b64\u63a5\u53e3\u7528\u4e8e\u8fd4\u56de\u6570\u636e\u7684\u7236ID\u5b57\u6bb5\u540d\u79f0\uff0c\u9700\u8981\u8fd4\u56de string \u7c7b\u578b\u503c\u3002 public function getParentColumn() { return 'parent_id'; } getTitleColumn \u6b64\u63a5\u53e3\u7528\u4e8e\u8fd4\u56de\u6570\u636e\u6807\u9898\u5b57\u6bb5\u540d\u79f0\uff0c\u9700\u8981\u8fd4\u56de string \u7c7b\u578b\u503c\u3002 public function getTitleColumn() { return 'title'; } getOrderColumn \u6b64\u63a5\u53e3\u7528\u4e8e\u8fd4\u56de\u6570\u636e\u6392\u5e8f\u5b57\u6bb5\u540d\u79f0\uff0c\u9700\u8981\u8fd4\u56de string \u7c7b\u578b\u503c\u3002 {tip} \u6b64\u5b57\u6bb5\u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u5982\u679c\u4f60\u7684\u6570\u636e\u4e0d\u652f\u6301\u6216\u4e0d\u9700\u8981\u6392\u5e8f\uff0c\u8bf7\u8fd4\u56de\u7a7a\u503c\uff01 public function getOrderColumn() { return 'order'; } saveOrder \u6b64\u63a5\u53e3\u7528\u4e8e\u4fdd\u5b58\u5c42\u7ea7\u6570\u636e\u7684\u6392\u5e8f\uff0c\u5e76\u4e14\u63a5\u6536\u4e24\u4e2a\u53c2\u6570 $tree array \u6b64\u5b57\u6bb5\u662f\u4e00\u4e2a\u5df2\u5206\u597d\u5c42\u7ea7\u7684\u6570\u7ec4 $parentId int \u6b64\u5b57\u6bb5\u4e3b\u8981\u7528\u4e8e\u9012\u5f52\u65f6\u4f20\u9012\u7236ID\u4f7f\u7528 {tip} \u5982\u679c\u4f60\u7684\u6570\u636e\u4e0d\u652f\u6301 MySQL \uff0c\u53ef\u53c2\u8003 Dcat\\Admin\\Traits\\ModelTree::saveOrder \u65b9\u6cd5\u81ea\u884c\u5b9e\u73b0\u3002 $tree = [ [ 'id' => 1, 'title' => 'title', 'parent_id' => 0, 'children' => [ [ 'id' => 2, 'title' => 'child1', 'parent_id' => 1, ], [ 'id' => 3, 'title' => 'child2', 'parent_id' => 1, ], ], ] ]; // \u4fdd\u5b58\u6392\u5e8f\uff0c\u5185\u5c42\u903b\u8f91\u8bf7\u81ea\u884c\u5b9e\u73b0 $repository->saveOrder($tree); withQuery \u6b64\u63a5\u53e3\u9700\u7ed3\u5408 toTree \u63a5\u53e3\u4f7f\u7528\uff0c\u63a5\u6536\u4e00\u4e2a\u53c2\u6570\uff1a\u4e3b\u8981\u7528\u4e8e\u8bbe\u7f6e\u6570\u636e\u67e5\u8be2\u64cd\u4f5c\u7684\u76f8\u5173\u56de\u8c03\u6216\u53c2\u6570\u3002 <?php use Dcat\\Admin\\Contracts\\Repository; use Dcat\\Admin\\Contracts\\TreeRepository; use Dcat\\Admin\\Support\\Helper; class Category implements Repository, TreeRepository { protected $queryCallbacks = []; public function withQuery($queryCallback) { $this->queryCallbacks[] = $queryCallback; return $this; } public function toTree() { // \u8fd9\u91cc\u6f14\u793a\u7684\u4ee3\u7801\u53ea\u662f\u4e3a\u4e86\u8bf4\u660e withQuery \u65b9\u6cd5\u7684\u4f5c\u7528 $client = ...; foreach ($this->queryCallbacks as $callback) { $callback($client); } return Helper::buildNestedArray($client->get()); } } toTree \u6b64\u63a5\u53e3\u4e3b\u8981\u7528\u4e8e\u67e5\u8be2\u6570\u636e\u5e76\u5206\u597d\u5c42\u7ea7\u8fd4\u56de\uff0c\u9700\u8981\u8fd4\u56de array \u7c7b\u578b\u503c\u3002 public function toTree() { $client = ...; foreach ($this->queryCallbacks as $callback) { $callback($client); } return Helper::buildNestedArray($client->get()); } \u6a21\u578b Dcat Admin \u5df2\u7ecf\u5185\u7f6e\u4e86\u5bf9 Eloquent model \u7684\u652f\u6301\uff0c\u5982\u679c\u4f60\u7684\u6570\u636e\u6e90\u662f\u652f\u6301 Model \u7684\uff0c\u90a3\u4e48\u53ea\u9700\u7ee7\u627f Dcat\\Admin\\Repositories\\EloquentRepository \u7c7b\u5373\u53ef\u5b9e\u73b0\u5bf9\u6570\u636e\u7684 CURD \u64cd\u4f5c\uff0c\u5982\uff1a <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use App\\Models\\Movie as MovieModel; class Movie extends EloquentRepository { // \u8fd9\u91cc\u8bbe\u7f6e\u4f60\u7684\u6a21\u578b\u7c7b\u540d\u5373\u53ef protected $eloquentClass = MovieModel::class; // \u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\"*\" public function getGridColumns() { return [$this->getKeyName(), 'name', 'title', 'created_at']; } // \u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u8868\u5355\u9875\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\"*\" public function getFormColumns() { return [$this->getKeyName(), 'name', 'title', 'created_at']; } // \u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u6570\u636e\u8be6\u60c5\u9875\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\"*\" public function getDetailColumns() { return ['*']; } } QueryBuilder \u5982\u679c\u4f60\u7684\u6570\u636e\u652f\u6301 QueryBuilder \u67e5\u8be2\uff0c\u4f46\u4e0d\u65b9\u4fbf\u5efa\u6a21\u578b\u7c7b\uff08\u6bd4\u5982\u9700\u8981\u52a8\u6001\u67e5\u8868\u6570\u636e\uff09\uff0c\u5219\u53ef\u4ee5\u7ee7\u627f Dcat\\Admin\\Repositories\\QueryBuilderRepository \u7c7b\u3002 {tip} \u6ce8\u610f\uff0c QueryBuilderRepository \u9ed8\u8ba4\u662f\u4e0d\u652f\u6301 Model \u7684\u5173\u8054\u6a21\u578b\u3001\u8f6f\u5220\u9664\u3001\u6a21\u578b\u6811\u4ee5\u53ca\u5b57\u6bb5\u6392\u5e8f\u7b49\u529f\u80fd\uff0c\u5982\u679c\u9700\u8981\u8fd9\u4e9b\u529f\u80fd\uff0c\u8bf7\u81ea\u5b9a\u5b9e\u73b0\u4e0a\u8ff0\u76f8\u5173\u63a5\u53e3\u5373\u53ef\u3002 <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\QueryBuilderRepository; class MyRepository extends QueryBuilderRepository { // \u8bbe\u7f6e\u4f60\u7684\u4e3b\u952e\u540d\u79f0 protected $keyName = 'id'; // \u8bbe\u7f6e\u521b\u5efa\u65f6\u95f4\u5b57\u6bb5 protected $createdAtColumn = 'created_at'; // \u8bbe\u7f6e\u66f4\u65b0\u65f6\u95f4\u5b57\u6bb5 protected $updatedAtColumn = 'updated_at'; // \u8fd4\u56de\u8868\u540d public function getTable() { return 'your_table_name'; } // \u8fd4\u56de\u4f60\u7684\u4e3b\u952e\u540d\u79f0 public function getKeyName() { return $this->keyName; } // \u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\"*\" public function getGridColumns() { return [$this->getKeyName(), 'name', 'title', 'created_at']; } // \u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u8868\u5355\u9875\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\"*\" public function getFormColumns() { return [$this->getKeyName(), 'name', 'title', 'created_at']; } // \u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u6570\u636e\u8be6\u60c5\u9875\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\"*\" public function getDetailColumns() { return ['*']; } }","title":"\u6570\u636e\u4ed3\u5e93"},{"location":"2.x/model-repository/#_1","text":"\u6570\u636e\u4ed3\u5e93( Repository )\u662f Dcat Admin \u4e2d\u5bf9\u6570\u636e\u589e\u5220\u6539\u67e5\u64cd\u4f5c\u63a5\u53e3\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u901a\u8fc7 Repository \u7684\u4ecb\u5165\u53ef\u4ee5\u8ba9\u9875\u9762\u7684\u6784\u5efa\u4e0d\u518d\u5173\u5fc3\u6570\u636e\u8bfb\u5199\u529f\u80fd\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u5f00\u53d1\u8005\u901a\u8fc7\u5b9e\u73b0 Repository \u63a5\u53e3\u5373\u53ef\u5bf9\u6570\u636e\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u3002 {tip} \u5f53\u7136\u4e3a\u4e86\u65b9\u4fbf\u7cfb\u7edf\u4e5f\u4fdd\u7559\u4e86\u76f4\u63a5\u4f7f\u7528 Model \u7684\u529f\u80fd\uff0c\u5e95\u5c42\u4f1a\u81ea\u52a8\u628a Model \u8f6c\u5316\u4e3a\u6570\u636e\u4ed3\u5e93\u5b9e\u4f8b\uff0c\u6bd5\u7adf\u5927\u591a\u6570\u65f6\u5019\u76f4\u63a5\u4f7f\u7528 Model \u4e5f\u80fd\u6ee1\u8db3\u6211\u4eec\u7684\u9700\u6c42\u3002 \u6570\u636e\u8868\u683c Grid \u3001\u6570\u636e\u8868\u5355 Form \u3001\u6570\u636e\u8be6\u60c5 Show \u3001 Tree \u7b49\u7ec4\u4ef6\u4e0d\u518d\u76f4\u63a5\u4f9d\u8d56\u4e8e Model \uff0c\u800c\u662f\u4f9d\u8d56\u4e8e\u63d0\u4f9b\u66f4\u7b80\u5355\u6e05\u6670\u7684\u63a5\u53e3\u7684\u6570\u636e\u4ed3\u5e93\uff0c\u4e0b\u9762\u662f Repository \u7684\u6240\u6709\u63a5\u53e3\uff1a <?php namespace Dcat\\Admin\\Contracts; use Dcat\\Admin\\Form; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Show; use Illuminate\\Support\\Collection; interface Repository { /** * \u83b7\u53d6\u4e3b\u952e\u540d\u79f0. * * @return string */ public function getKeyName(); /** * \u83b7\u53d6\u521b\u5efa\u65f6\u95f4\u5b57\u6bb5. * * @return string */ public function getCreatedAtColumn(); /** * \u83b7\u53d6\u66f4\u65b0\u65f6\u95f4\u5b57\u6bb5. * * @return string */ public function getUpdatedAtColumn(); /** * \u662f\u5426\u4f7f\u7528\u8f6f\u5220\u9664. * * @return bool */ public function isSoftDeletes(); /** * \u83b7\u53d6Grid\u8868\u683c\u6570\u636e. * * @param Grid\\Model $model * * @return \\Illuminate\\Contracts\\Pagination\\LengthAwarePaginator|Collection|array */ public function get(Grid\\Model $model); /** * \u83b7\u53d6\u7f16\u8f91\u9875\u9762\u6570\u636e. * * @param Form $form * * @return array|\\Illuminate\\Contracts\\Support\\Arrayable */ public function edit(Form $form); /** * \u83b7\u53d6\u8be6\u60c5\u9875\u9762\u6570\u636e. * * @param Show $show * * @return array|\\Illuminate\\Contracts\\Support\\Arrayable */ public function detail(Show $show); /** * \u65b0\u589e\u8bb0\u5f55. * * @param Form $form * * @return mixed */ public function store(Form $form); /** * \u67e5\u8be2\u66f4\u65b0\u524d\u7684\u884c\u6570\u636e. * * @param Form $form * * @return array|\\Illuminate\\Contracts\\Support\\Arrayable */ public function updating(Form $form); /** * \u66f4\u65b0\u6570\u636e. * * @param Form $form * * @return bool */ public function update(Form $form); /** * \u5220\u9664\u6570\u636e. * * @param Form $form * @param array $deletingData * * @return mixed */ public function delete(Form $form, array $deletingData); /** * \u67e5\u8be2\u5220\u9664\u524d\u7684\u884c\u6570\u636e. * * @param Form $form * * @return array|\\Illuminate\\Contracts\\Support\\Arrayable */ public function deleting(Form $form); } \u5982\u679c\u4f60\u7684\u6570\u636e\u662f\u591a\u5c42\u7ea7\u7ed3\u6784\uff0c\u5219\u8fd8\u9700\u8981\u5b9e\u73b0\u4ee5\u4e0b\u63a5\u53e3 <?php namespace Dcat\\Admin\\Contracts; interface TreeRepository { /** * \u83b7\u53d6\u4e3b\u952e\u5b57\u6bb5\u540d\u79f0. * * @return string */ public function getPrimaryKeyColumn(); /** * \u83b7\u53d6\u7236\u7ea7ID\u5b57\u6bb5\u540d\u79f0. * * @return string */ public function getParentColumn(); /** * \u83b7\u53d6\u6807\u9898\u5b57\u6bb5\u540d\u79f0. * * @return string */ public function getTitleColumn(); /** * \u83b7\u53d6\u6392\u5e8f\u5b57\u6bb5\u540d\u79f0. * * @return string */ public function getOrderColumn(); /** * \u4fdd\u5b58\u5c42\u7ea7\u6570\u636e\u6392\u5e8f. * * @param array $tree * @param int $parentId */ public function saveOrder($tree = [], $parentId = 0); /** * \u8bbe\u7f6e\u6570\u636e\u67e5\u8be2\u56de\u8c03. * * @param \\Closure|null $query * * @return $this */ public function withQuery($queryCallback); /** * \u83b7\u53d6\u5c42\u7ea7\u6570\u636e. * * @return array */ public function toTree(); }","title":"\u6570\u636e\u4ed3\u5e93"},{"location":"2.x/model-repository/#repository","text":"","title":"Repository\u63a5\u53e3"},{"location":"2.x/model-repository/#getkeyname","text":"\u6b64\u63a5\u53e3\u8981\u6c42\u8fd4\u56de\u6570\u636e\u7684\u4e3b\u952e\u5b57\u6bb5\u540d\u79f0\uff0c\u9700\u8981\u8fd4\u56de string \u7c7b\u578b\u503c\u3002 public function getKeyName() { return 'id'; }","title":"getKeyName"},{"location":"2.x/model-repository/#getcreatedatcolumn","text":"\u6b64\u63a5\u53e3\u8981\u6c42\u8fd4\u56de\u6570\u636e\u7684 created_at \u5b57\u6bb5\u540d\u79f0\uff0c\u5982\u679c\u6ca1\u6709\u503c\u53ef\u4ee5\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u6216 null \u503c\u3002 // \u5982\u679c\u6ca1\u6709\u503c\u53ef\u4ee5\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u6216`null`\u503c public function getCreatedAtColumn() { return 'created_at'; }","title":"getCreatedAtColumn"},{"location":"2.x/model-repository/#getupdatedatcolumn","text":"\u6b64\u63a5\u53e3\u8981\u6c42\u8fd4\u56de\u6570\u636e\u7684 updated_at \u5b57\u6bb5\u540d\u79f0\uff0c\u5982\u679c\u6ca1\u6709\u503c\u53ef\u4ee5\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u6216 null \u503c\u3002 // \u5982\u679c\u6ca1\u6709\u503c\u53ef\u4ee5\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\u6216`null`\u503c public function getCreatedAtColumn() { return 'updated_at'; }","title":"getUpdatedAtColumn"},{"location":"2.x/model-repository/#issoftdeletes","text":"\u6b64\u63a5\u53e3\u8981\u6c42\u8fd4\u56de\u6570\u636e\u662f\u5426\u652f\u6301\u8f6f\u5220\u9664\uff0c\u8bf7\u8fd4\u56de\u4e00\u4e2a bool \u7c7b\u578b\u7684\u503c\u3002 public function isSoftDeletes() { return true; }","title":"isSoftDeletes"},{"location":"2.x/model-repository/#get","text":"\u6b64\u63a5\u53e3\u8981\u6c42\u8fd4\u56de\u6570\u636e\u8868\u683c Grid \u7684\u6570\u636e\uff0c\u7528\u4e8e\u6570\u636e\u8868\u683c\u5c55\u793a\uff0c\u8981\u6c42\u8fd4\u56de\u4e00\u4e2a array \u3001 Illuminate\\Support\\Collection \u6216 LengthAwarePaginator \u7c7b\u578b\u503c\u3002","title":"get"},{"location":"2.x/model-repository/#_2","text":"\u5f53\u6570\u636e\u9700\u8981\u5206\u9875\u65f6\u8981\u6c42\u8fd4\u56de\u4e00\u4e2a \\Illuminate\\Contracts\\Pagination\\LengthAwarePaginator \u7c7b\u578b\u503c\uff1a public function get(Grid\\Model $model) { // \u83b7\u53d6\u5f53\u524d\u9875\u6570 $currentPage = $model->getCurrentPage(); // \u83b7\u53d6\u6bcf\u9875\u663e\u793a\u884c\u6570 $perPage = $model->getPerPage(); // \u83b7\u53d6\u7b5b\u9009\u53c2\u6570 $city = $model->filter()->input(Grid\\Filter\\Scope::QUERY_NAME, '\u5e7f\u5dde'); $start = ($currentPage - 1) * $perPage; $client = new \\GuzzleHttp\\Client(); $response = $client->get(\"{$this->api}?{$this->apiKey}&city=$city&start=$start&count=$perPage\"); $data = json_decode((string)$response->getBody(), true); return $model->makePaginator( $data['total'] ?? 0, // \u4f20\u5165\u603b\u8bb0\u5f55\u6570 $data['subjects'] ?? [] // \u4f20\u5165\u6570\u636e\u4e8c\u7ef4\u6570\u7ec4 ); }","title":"\u5206\u9875"},{"location":"2.x/model-repository/#_3","text":"\u5982\u679c\u4e0d\u9700\u8981\u5206\u9875\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a array \u6216 Illuminate\\Support\\Collection \u7c7b\u578b\u503c\u5373\u53ef\u3002 public function get(Grid\\Model $model) { return [ ['id' => 1, 'name' => 'n1'], ['id' => 2, 'name' => 'n2'] ]; } \u6ce8\u610f\uff0c grid \u9700\u8981\u7981\u7528\u5206\u9875 $grid->disablePagination()","title":"\u4e0d\u5206\u9875"},{"location":"2.x/model-repository/#edit","text":"\u6b64\u63a5\u53e3\u8981\u6c42\u8fd4\u56de\u8868\u5355\u7f16\u8f91\u9875\u9762\u7684\u6570\u636e\uff0c\u7528\u4e8e\u663e\u793a\u6570\u636e\u8868\u5355\u7f16\u8f91\u9875\u9762\uff0c\u9700\u8981\u8fd4\u56de array \u7c7b\u578b\u503c\u3002 public function edit(Form $form): array { // \u83b7\u53d6\u6570\u636e\u4e3b\u952e\u503c $id = $form->getKey(); return ['id' => 1, 'name' => 'n1']; }","title":"edit"},{"location":"2.x/model-repository/#detail","text":"\u6b64\u63a5\u53e3\u8981\u6c42\u8fd4\u56de\u6570\u636e\u8be6\u60c5\u9875\u9762\u7684\u6570\u636e\uff0c\u7528\u4e8e\u663e\u793a\u6570\u636e\u8be6\u60c5\uff0c\u9700\u8981\u8fd4\u56de array \u7c7b\u578b\u503c\u3002 public function detail(Show $show): array { // \u83b7\u53d6\u6570\u636e\u4e3b\u952e\u503c $id = $show->getId(); return ['id' => 1, 'name' => 'n1']; }","title":"detail"},{"location":"2.x/model-repository/#store","text":"\u6b64\u63a5\u53e3\u7528\u4e8e\u65b0\u589e\u4e00\u6761\u8bb0\u5f55\uff0c\u53ef\u4ee5\u8fd4\u56de int \u3001 string \u6216 bool \u7c7b\u578b\u503c\u3002 public function store(Form $form) { // \u83b7\u53d6\u5f85\u65b0\u589e\u7684\u6570\u636e $attributes = $form->updates(); // \u6267\u884c\u4f60\u7684\u65b0\u589e\u903b\u8f91 // \u8fd4\u56de\u65b0\u589e\u8bb0\u5f55id\u6216bool\u503c return 1; }","title":"store"},{"location":"2.x/model-repository/#updating","text":"\u6b64\u63a5\u53e3\u7528\u4e8e\u6570\u636e\u8868\u5355\u4fee\u6539\u6570\u636e\u65f6\u67e5\u8be2\u539f\u59cb\u8bb0\u5f55\uff0c\u9700\u8981\u8fd4\u56de array \u6216 Model \u7c7b\u578b\u503c\u3002 {tip} \u6b64\u63a5\u53e3\u53ea\u6709\u67d0\u4e9b\u7279\u6b8a\u5b57\u6bb5\u4f1a\u7528\u5230\uff0c\u5982\u56fe\u7247\u3001\u6587\u4ef6\u4e0a\u4f20\u5b57\u6bb5\uff0c\u5f53\u66f4\u6539\u4e86\u56fe\u7247\u6216\u6587\u4ef6\u65f6\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a\u63a5\u53e3\u67e5\u51fa\u7684\u6570\u636e\u5220\u9664\u65e7\u6587\u4ef6\u3002\u6240\u4ee5\u5982\u679c\u4f60\u7684\u8868\u5355\u4e2d\u6ca1\u6709\u7528\u5230\u6b64\u7c7b\u7279\u6b8a\u5b57\u6bb5\uff0c\u6b64\u63a5\u53e3\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a\u7a7a\u6570\u7ec4\u3002 public function updating(Form $form) { // \u83b7\u53d6\u6570\u636e\u4e3b\u952e\u503c $id = $form->getKey(); return ['id' => 1, 'name' => 'n1']; }","title":"updating"},{"location":"2.x/model-repository/#update","text":"\u6b64\u63a5\u53e3\u7528\u4e8e\u6570\u636e\u8868\u5355\u4fee\u6539\u8bb0\u5f55\uff0c\u53ef\u4ee5\u8fd4\u56de int \u3001 string \u6216 bool \u7c7b\u578b\u503c\u3002 public function update(Form $form) { // \u83b7\u53d6\u5f85\u7f16\u8f91\u7684\u6570\u636e $attributes = $form->updates(); // \u6267\u884c\u4f60\u7684\u7f16\u8f91\u903b\u8f91 // \u8fd4\u56de\u6210\u529f return true; }","title":"update"},{"location":"2.x/model-repository/#deleting","text":"\u6b64\u63a5\u53e3\u7528\u4e8e\u5220\u9664\u6570\u636e\u65f6\u67e5\u8be2\u539f\u59cb\u8bb0\u5f55\uff0c\u9700\u8981\u8fd4\u56de\u4e8c\u7ef4\u6570\u7ec4\uff0c\u6216Collection model\u3002 public function deleting(Form $form): array { // \u5f53\u6279\u91cf\u5220\u9664\u65f6id\u4e3a\u591a\u4e2a $id = explode(',', $form->getKey()); // \u6267\u884c\u4f60\u7684\u903b\u8f91 // \u6ce8\u610f\u8fd9\u91cc\u9700\u8981\u8fd4\u56de\u4e8c\u7ef4\u6570\u7ec4 return [ ['id' => 1, 'name' => 'h1'], ]; // \u4e5f\u53ef\u4ee5\u8fd4\u56decollection return Modell::find($id); }","title":"deleting"},{"location":"2.x/model-repository/#destroy","text":"\u5355\u884c/\u6279\u91cf\u5220\u9664\u6570\u636e\u65b9\u6cd5\uff0c\u6210\u529f\u8fd4\u56de true \uff0c\u5931\u8d25\u8fd4\u56de false \u3002 public function destroy(Form $form, array $deletingData) { // \u5f53\u6279\u91cf\u5220\u9664\u65f6id\u4e3a\u591a\u4e2a $id = explode(',', $form->getKey()); // $deletingData \u662f getDataWhenDeleting \u63a5\u53e3\u8fd4\u56de\u7684\u6570\u636e // \u6267\u884c\u4f60\u7684\u903b\u8f91 return true; }","title":"destroy"},{"location":"2.x/model-repository/#treerepository","text":"","title":"TreeRepository\u63a5\u53e3"},{"location":"2.x/model-repository/#getprimarykeycolumn","text":"\u6b64\u63a5\u53e3\u7528\u4e8e\u8fd4\u56de\u6570\u636e\u7684\u4e3b\u952e\u5b57\u6bb5\u540d\u79f0\uff0c\u9700\u8981\u8fd4\u56de string \u7c7b\u578b\u503c\u3002 public function getPrimaryKeyColumn() { return $this->getKeyName(); }","title":"getPrimaryKeyColumn"},{"location":"2.x/model-repository/#getparentcolumn","text":"\u6b64\u63a5\u53e3\u7528\u4e8e\u8fd4\u56de\u6570\u636e\u7684\u7236ID\u5b57\u6bb5\u540d\u79f0\uff0c\u9700\u8981\u8fd4\u56de string \u7c7b\u578b\u503c\u3002 public function getParentColumn() { return 'parent_id'; }","title":"getParentColumn"},{"location":"2.x/model-repository/#gettitlecolumn","text":"\u6b64\u63a5\u53e3\u7528\u4e8e\u8fd4\u56de\u6570\u636e\u6807\u9898\u5b57\u6bb5\u540d\u79f0\uff0c\u9700\u8981\u8fd4\u56de string \u7c7b\u578b\u503c\u3002 public function getTitleColumn() { return 'title'; }","title":"getTitleColumn"},{"location":"2.x/model-repository/#getordercolumn","text":"\u6b64\u63a5\u53e3\u7528\u4e8e\u8fd4\u56de\u6570\u636e\u6392\u5e8f\u5b57\u6bb5\u540d\u79f0\uff0c\u9700\u8981\u8fd4\u56de string \u7c7b\u578b\u503c\u3002 {tip} \u6b64\u5b57\u6bb5\u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u5982\u679c\u4f60\u7684\u6570\u636e\u4e0d\u652f\u6301\u6216\u4e0d\u9700\u8981\u6392\u5e8f\uff0c\u8bf7\u8fd4\u56de\u7a7a\u503c\uff01 public function getOrderColumn() { return 'order'; }","title":"getOrderColumn"},{"location":"2.x/model-repository/#saveorder","text":"\u6b64\u63a5\u53e3\u7528\u4e8e\u4fdd\u5b58\u5c42\u7ea7\u6570\u636e\u7684\u6392\u5e8f\uff0c\u5e76\u4e14\u63a5\u6536\u4e24\u4e2a\u53c2\u6570 $tree array \u6b64\u5b57\u6bb5\u662f\u4e00\u4e2a\u5df2\u5206\u597d\u5c42\u7ea7\u7684\u6570\u7ec4 $parentId int \u6b64\u5b57\u6bb5\u4e3b\u8981\u7528\u4e8e\u9012\u5f52\u65f6\u4f20\u9012\u7236ID\u4f7f\u7528 {tip} \u5982\u679c\u4f60\u7684\u6570\u636e\u4e0d\u652f\u6301 MySQL \uff0c\u53ef\u53c2\u8003 Dcat\\Admin\\Traits\\ModelTree::saveOrder \u65b9\u6cd5\u81ea\u884c\u5b9e\u73b0\u3002 $tree = [ [ 'id' => 1, 'title' => 'title', 'parent_id' => 0, 'children' => [ [ 'id' => 2, 'title' => 'child1', 'parent_id' => 1, ], [ 'id' => 3, 'title' => 'child2', 'parent_id' => 1, ], ], ] ]; // \u4fdd\u5b58\u6392\u5e8f\uff0c\u5185\u5c42\u903b\u8f91\u8bf7\u81ea\u884c\u5b9e\u73b0 $repository->saveOrder($tree);","title":"saveOrder"},{"location":"2.x/model-repository/#withquery","text":"\u6b64\u63a5\u53e3\u9700\u7ed3\u5408 toTree \u63a5\u53e3\u4f7f\u7528\uff0c\u63a5\u6536\u4e00\u4e2a\u53c2\u6570\uff1a\u4e3b\u8981\u7528\u4e8e\u8bbe\u7f6e\u6570\u636e\u67e5\u8be2\u64cd\u4f5c\u7684\u76f8\u5173\u56de\u8c03\u6216\u53c2\u6570\u3002 <?php use Dcat\\Admin\\Contracts\\Repository; use Dcat\\Admin\\Contracts\\TreeRepository; use Dcat\\Admin\\Support\\Helper; class Category implements Repository, TreeRepository { protected $queryCallbacks = []; public function withQuery($queryCallback) { $this->queryCallbacks[] = $queryCallback; return $this; } public function toTree() { // \u8fd9\u91cc\u6f14\u793a\u7684\u4ee3\u7801\u53ea\u662f\u4e3a\u4e86\u8bf4\u660e withQuery \u65b9\u6cd5\u7684\u4f5c\u7528 $client = ...; foreach ($this->queryCallbacks as $callback) { $callback($client); } return Helper::buildNestedArray($client->get()); } }","title":"withQuery"},{"location":"2.x/model-repository/#totree","text":"\u6b64\u63a5\u53e3\u4e3b\u8981\u7528\u4e8e\u67e5\u8be2\u6570\u636e\u5e76\u5206\u597d\u5c42\u7ea7\u8fd4\u56de\uff0c\u9700\u8981\u8fd4\u56de array \u7c7b\u578b\u503c\u3002 public function toTree() { $client = ...; foreach ($this->queryCallbacks as $callback) { $callback($client); } return Helper::buildNestedArray($client->get()); }","title":"toTree"},{"location":"2.x/model-repository/#_4","text":"Dcat Admin \u5df2\u7ecf\u5185\u7f6e\u4e86\u5bf9 Eloquent model \u7684\u652f\u6301\uff0c\u5982\u679c\u4f60\u7684\u6570\u636e\u6e90\u662f\u652f\u6301 Model \u7684\uff0c\u90a3\u4e48\u53ea\u9700\u7ee7\u627f Dcat\\Admin\\Repositories\\EloquentRepository \u7c7b\u5373\u53ef\u5b9e\u73b0\u5bf9\u6570\u636e\u7684 CURD \u64cd\u4f5c\uff0c\u5982\uff1a <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use App\\Models\\Movie as MovieModel; class Movie extends EloquentRepository { // \u8fd9\u91cc\u8bbe\u7f6e\u4f60\u7684\u6a21\u578b\u7c7b\u540d\u5373\u53ef protected $eloquentClass = MovieModel::class; // \u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\"*\" public function getGridColumns() { return [$this->getKeyName(), 'name', 'title', 'created_at']; } // \u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u8868\u5355\u9875\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\"*\" public function getFormColumns() { return [$this->getKeyName(), 'name', 'title', 'created_at']; } // \u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u6570\u636e\u8be6\u60c5\u9875\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\"*\" public function getDetailColumns() { return ['*']; } }","title":"\u6a21\u578b"},{"location":"2.x/model-repository/#querybuilder","text":"\u5982\u679c\u4f60\u7684\u6570\u636e\u652f\u6301 QueryBuilder \u67e5\u8be2\uff0c\u4f46\u4e0d\u65b9\u4fbf\u5efa\u6a21\u578b\u7c7b\uff08\u6bd4\u5982\u9700\u8981\u52a8\u6001\u67e5\u8868\u6570\u636e\uff09\uff0c\u5219\u53ef\u4ee5\u7ee7\u627f Dcat\\Admin\\Repositories\\QueryBuilderRepository \u7c7b\u3002 {tip} \u6ce8\u610f\uff0c QueryBuilderRepository \u9ed8\u8ba4\u662f\u4e0d\u652f\u6301 Model \u7684\u5173\u8054\u6a21\u578b\u3001\u8f6f\u5220\u9664\u3001\u6a21\u578b\u6811\u4ee5\u53ca\u5b57\u6bb5\u6392\u5e8f\u7b49\u529f\u80fd\uff0c\u5982\u679c\u9700\u8981\u8fd9\u4e9b\u529f\u80fd\uff0c\u8bf7\u81ea\u5b9a\u5b9e\u73b0\u4e0a\u8ff0\u76f8\u5173\u63a5\u53e3\u5373\u53ef\u3002 <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\QueryBuilderRepository; class MyRepository extends QueryBuilderRepository { // \u8bbe\u7f6e\u4f60\u7684\u4e3b\u952e\u540d\u79f0 protected $keyName = 'id'; // \u8bbe\u7f6e\u521b\u5efa\u65f6\u95f4\u5b57\u6bb5 protected $createdAtColumn = 'created_at'; // \u8bbe\u7f6e\u66f4\u65b0\u65f6\u95f4\u5b57\u6bb5 protected $updatedAtColumn = 'updated_at'; // \u8fd4\u56de\u8868\u540d public function getTable() { return 'your_table_name'; } // \u8fd4\u56de\u4f60\u7684\u4e3b\u952e\u540d\u79f0 public function getKeyName() { return $this->keyName; } // \u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\"*\" public function getGridColumns() { return [$this->getKeyName(), 'name', 'title', 'created_at']; } // \u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u8868\u5355\u9875\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\"*\" public function getFormColumns() { return [$this->getKeyName(), 'name', 'title', 'created_at']; } // \u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u6570\u636e\u8be6\u60c5\u9875\u67e5\u8be2\u7684\u5b57\u6bb5\uff0c\u9ed8\u8ba4\"*\" public function getDetailColumns() { return ['*']; } }","title":"QueryBuilder"},{"location":"2.x/model-show-extend/","text":"\u8be6\u60c5\u5b57\u6bb5\u663e\u793a\u6269\u5c55 \u8fd9\u4e2a\u529f\u80fd\u7528\u6765\u6269\u5c55\u8be6\u60c5\u5b57\u6bb5\u663e\u793a, \u5728\u5185\u7f6e\u7684\u663e\u793a\u65b9\u6cd5\u4e0d\u6ee1\u8db3\u9700\u6c42\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u529f\u80fd\u6765\u5b9e\u73b0 \u9996\u5148\u5b9a\u4e49\u6269\u5c55\u7c7b\uff1a <?php namespace App\\Admin\\Extensions\\Show; use Dcat\\Admin\\Show\\AbstractField; class UnSerialize extends AbstractField { // \u8fd9\u4e2a\u5c5e\u6027\u8bbe\u7f6e\u4e3afalse\u5219\u4e0d\u4f1a\u8f6c\u4e49HTML\u4ee3\u7801 public $escape = false; public function render($arg = '') { // \u8fd4\u56de\u4efb\u610f\u53ef\u88ab\u6e32\u67d3\u7684\u5185\u5bb9 return unserialize($this->value); } } \u7136\u540e\u5728 app/Admin/bootstrap.php \u4e2d\u6ce8\u518c\u6269\u5c55\u7c7b use Dcat\\Admin\\Show\\Field; use App\\Admin\\Extensions\\Show\\UnSerialize; Field::extend('unserialize', UnSerialize::class); \u7136\u540e\u5728\u63a7\u5236\u5668\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u6269\u5c55 $show->column()->unserialize('xxx'); \u4f20\u5165unserialize()\u65b9\u6cd5\u7684\u53c2\u6570\u4f1a\u6309\u987a\u5e8f\u4f20\u5165UnSerialize::render()\u65b9\u6cd5\u4e2d\u3002 \u5728\u7236\u7c7b Dcat\\Admin\\Show\\AbstractField \u4e2d\u53ef\u4ee5\u770b\u5230\u51e0\u4e2a\u5e38\u7528\u7684\u5c5e\u6027 /** * Field value. * * @var mixed */ protected $value; /** * Current field model. * * @var Fluent */ protected $model; /** * If this field show with a border. * * @var bool */ public $border = true; /** * If this field show escaped contents. * * @var bool */ public $escape = true; \u5176\u4e2d $value \u548c $model \u5206\u522b\u662f\u5f53\u524d\u5b57\u6bb5\u503c\u548c\u5f53\u524d\u8be6\u60c5\u5185\u5bb9\u7684\u6570\u636e\uff0c\u5728 render() \u65b9\u6cd5\u4e2d\u53ef\u4ee5\u7528\u6765\u83b7\u53d6\u4f60\u60f3\u8981\u7684\u6570\u636e\u3002 $border \u7528\u6765\u63a7\u5236\u5f53\u524d\u663e\u793a\u5185\u5bb9\u662f\u5426\u9700\u8981\u5916\u8fb9\u6846\uff0c $escape \u5206\u522b\u7528\u6765\u8bbe\u7f6e\u5f53\u524d\u663e\u793a\u5185\u5bb9\u8981\u4e0d\u8981HTML\u8f6c\u4e49\u3002","title":"\u8be6\u60c5\u5b57\u6bb5\u663e\u793a\u6269\u5c55"},{"location":"2.x/model-show-extend/#_1","text":"\u8fd9\u4e2a\u529f\u80fd\u7528\u6765\u6269\u5c55\u8be6\u60c5\u5b57\u6bb5\u663e\u793a, \u5728\u5185\u7f6e\u7684\u663e\u793a\u65b9\u6cd5\u4e0d\u6ee1\u8db3\u9700\u6c42\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u529f\u80fd\u6765\u5b9e\u73b0 \u9996\u5148\u5b9a\u4e49\u6269\u5c55\u7c7b\uff1a <?php namespace App\\Admin\\Extensions\\Show; use Dcat\\Admin\\Show\\AbstractField; class UnSerialize extends AbstractField { // \u8fd9\u4e2a\u5c5e\u6027\u8bbe\u7f6e\u4e3afalse\u5219\u4e0d\u4f1a\u8f6c\u4e49HTML\u4ee3\u7801 public $escape = false; public function render($arg = '') { // \u8fd4\u56de\u4efb\u610f\u53ef\u88ab\u6e32\u67d3\u7684\u5185\u5bb9 return unserialize($this->value); } } \u7136\u540e\u5728 app/Admin/bootstrap.php \u4e2d\u6ce8\u518c\u6269\u5c55\u7c7b use Dcat\\Admin\\Show\\Field; use App\\Admin\\Extensions\\Show\\UnSerialize; Field::extend('unserialize', UnSerialize::class); \u7136\u540e\u5728\u63a7\u5236\u5668\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u6269\u5c55 $show->column()->unserialize('xxx'); \u4f20\u5165unserialize()\u65b9\u6cd5\u7684\u53c2\u6570\u4f1a\u6309\u987a\u5e8f\u4f20\u5165UnSerialize::render()\u65b9\u6cd5\u4e2d\u3002 \u5728\u7236\u7c7b Dcat\\Admin\\Show\\AbstractField \u4e2d\u53ef\u4ee5\u770b\u5230\u51e0\u4e2a\u5e38\u7528\u7684\u5c5e\u6027 /** * Field value. * * @var mixed */ protected $value; /** * Current field model. * * @var Fluent */ protected $model; /** * If this field show with a border. * * @var bool */ public $border = true; /** * If this field show escaped contents. * * @var bool */ public $escape = true; \u5176\u4e2d $value \u548c $model \u5206\u522b\u662f\u5f53\u524d\u5b57\u6bb5\u503c\u548c\u5f53\u524d\u8be6\u60c5\u5185\u5bb9\u7684\u6570\u636e\uff0c\u5728 render() \u65b9\u6cd5\u4e2d\u53ef\u4ee5\u7528\u6765\u83b7\u53d6\u4f60\u60f3\u8981\u7684\u6570\u636e\u3002 $border \u7528\u6765\u63a7\u5236\u5f53\u524d\u663e\u793a\u5185\u5bb9\u662f\u5426\u9700\u8981\u5916\u8fb9\u6846\uff0c $escape \u5206\u522b\u7528\u6765\u8bbe\u7f6e\u5f53\u524d\u663e\u793a\u5185\u5bb9\u8981\u4e0d\u8981HTML\u8f6c\u4e49\u3002","title":"\u8be6\u60c5\u5b57\u6bb5\u663e\u793a\u6269\u5c55"},{"location":"2.x/model-show-field/","text":"\u5b57\u6bb5\u663e\u793a HTML \u901a\u8fc7 html \u65b9\u6cd5\u53ef\u4ee5\u5728\u8be6\u60c5\u9875\u63d2\u5165\u4e00\u6bb5\u4e0d\u663e\u793a label \u7684 HTML \u4ee3\u7801 // \u4f20\u5165\u5b57\u7b26\u4e32 $show->html('<br/>'); // \u4f20\u5165\u89c6\u56fe $show->html(view(...)); // \u4f20\u5165\u95ed\u5305 $show->html(function () { // \u83b7\u53d6\u5b57\u6bb5\u4fe1\u606f $id = $this->id; $username = $this->username; return view(..., ['id' => $id]); }); \u5206\u9694\u7ebf \u5982\u679c\u8981\u5728\u5b57\u6bb5\u4e4b\u95f4\u6dfb\u52a0\u4e00\u6761\u5206\u9694\u7ebf\uff1a $show->divider(); \u6362\u884c \u5982\u679c\u8981\u5728\u5b57\u6bb5\u4e4b\u95f4\u4f7f\u7528\u6362\u884c\uff1a $show->newline(); \u4fee\u6539\u663e\u793a\u5185\u5bb9 \u7528\u4e0b\u9762\u7684\u65b9\u6cd5\u4fee\u6539\u663e\u793a\u5185\u5bb9 $show->title()->as(function ($title) { // \u83b7\u53d6\u5f53\u524d\u884c\u7684\u5176\u4ed6\u5b57\u6bb5 $username = $this->username; return \"<{$title}> {$username}\"; }); $show->contents()->as(function ($content) { return \"<pre>{$content}</pre>\"; }); \u5e2e\u52a9\u65b9\u6cd5 \u5e2e\u52a9\u65b9\u6cd5\u4e0e\u6570\u636e\u8868\u683c\u5b57\u6bb5\u5e2e\u52a9\u65b9\u6cd5\u4f7f\u7528\u4e00\u81f4\uff0c\u53ef\u53c2\u8003 \u5e2e\u52a9\u65b9\u6cd5 \u3002 \u5185\u7f6e\u663e\u793a\u6269\u5c55\u65b9\u6cd5 \u4e0b\u9762\u662f\u901a\u8fc7as\u65b9\u6cd5\u5185\u7f6e\u5b9e\u73b0\u7684\u51e0\u4e2a\u5e38\u7528\u7684\u663e\u793a\u6837\u5f0f\uff1a view view \u65b9\u6cd5\u53ef\u4ee5\u5f15\u5165\u4e00\u4e2a\u89c6\u56fe\u6587\u4ef6\u3002 // \u6a21\u677f\u4e2d\u63a5\u6536\u4ee5\u4e0b\u4e09\u4e2a\u53d8\u91cf\uff1a // name \u5b57\u6bb5\u540d\u79f0 // value \u5b57\u6bb5\u503c // model \u5f53\u524d\u884c\u6570\u636e $show->content->view('admin.fields.content'); explode explode \u65b9\u6cd5\u53ef\u4ee5\u628a\u5b57\u7b26\u4e32\u5206\u5272\u4e3a\u6570\u7ec4\u3002 $show->tag->explode()->label(); // \u53ef\u4ee5\u6307\u5b9a\u5206\u9694\u7b26\uff0c\u9ed8\u8ba4\",\" $show->tag->explode('|')->label(); prepend prepend \u65b9\u6cd5\u7528\u4e8e\u7ed9 string \u6216 array \u7c7b\u578b\u7684\u503c\u524d\u9762\u63d2\u5165\u5185\u5bb9\u3002 // \u5f53\u5b57\u6bb5\u503c\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32 $show->email->prepend('mailto:'); // \u5f53\u5b57\u6bb5\u503c\u662f\u4e00\u4e2a\u6570\u7ec4 $show->arr->prepend('first item'); prepend \u65b9\u6cd5\u5141\u8bb8\u4f20\u5165\u95ed\u5305\u53c2\u6570 $show->email->prepend(function ($value, $original) { // $value \u662f\u5f53\u524d\u5b57\u6bb5\u503c // $original \u662f\u5f53\u524d\u5b57\u6bb5\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u51fa\u6765\u7684\u539f\u59cb\u503c // \u83b7\u53d6\u5176\u4ed6\u5b57\u6bb5\u503c $username = $this->username; return \"[{$username}]\"; }); append append \u65b9\u6cd5\u7528\u4e8e\u7ed9 string \u6216 array \u7c7b\u578b\u7684\u503c\u540e\u9762\u63d2\u5165\u5185\u5bb9\u3002 // \u5f53\u5b57\u6bb5\u503c\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32 $show->email->append('@gmail.com'); // \u5f53\u5b57\u6bb5\u503c\u662f\u4e00\u4e2a\u6570\u7ec4 $show->arr->append('last item'); append \u65b9\u6cd5\u5141\u8bb8\u4f20\u5165\u95ed\u5305\u53c2\u6570 $show->email->prepend(function ($value, $original) { // $value \u662f\u5f53\u524d\u5b57\u6bb5\u503c // $original \u662f\u5f53\u524d\u5b57\u6bb5\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u51fa\u6765\u7684\u539f\u59cb\u503c // \u83b7\u53d6\u5176\u4ed6\u5b57\u6bb5\u503c $username = $this->username; return \"[{$username}]\"; }); image \u5b57\u6bb5avatar\u7684\u5185\u5bb9\u662f\u56fe\u7247\u7684\u8def\u5f84\u6216\u8005url\uff0c\u53ef\u4ee5\u5c06\u5b83\u663e\u793a\u4e3a\u56fe\u7247\uff1a $show->avatar()->image(); image()\u65b9\u6cd5\u7684\u53c2\u6570\u53c2\u8003Field::image() file \u5b57\u6bb5document\u7684\u5185\u5bb9\u662f\u6587\u4ef6\u7684\u8def\u5f84\u6216\u8005url\uff0c\u53ef\u4ee5\u5c06\u5b83\u663e\u793a\u4e3a\u6587\u4ef6\uff1a $show->avatar()->file(); file()\u65b9\u6cd5\u7684\u53c2\u6570\u53c2\u8003Field::file() link \u5b57\u6bb5homepage\u7684\u5185\u5bb9\u662furl\u94fe\u63a5\uff0c\u53ef\u4ee5\u5c06\u5b83\u663e\u793a\u4e3aHTML\u94fe\u63a5\uff1a $show->homepage()->link(); link()\u65b9\u6cd5\u7684\u53c2\u6570\u53c2\u8003Field::link() label \u5c06\u5b57\u6bb5tag\u7684\u5185\u5bb9\u663e\u793a\u4e3alabel\uff1a $show->tag()->label(); label()\u65b9\u6cd5\u7684\u53c2\u6570\u53c2\u8003Field::label() badge \u5c06\u5b57\u6bb5rate\u7684\u5185\u5bb9\u663e\u793a\u4e3abadge\uff1a $show->rate()->badge(); badge()\u65b9\u6cd5\u7684\u53c2\u6570\u53c2\u8003Field::badge() using \u5982\u679c\u5b57\u6bb5gender\u7684\u53d6\u503c\u4e3a f \u3001 m \uff0c\u5206\u522b\u9700\u8981\u7528\u5973\u3001\u7537\u6765\u663e\u793a $show->gender()->using(['f' => '\u5973', 'm' => '\u7537']); dot \u901a\u8fc7 dot \u65b9\u6cd5\u53ef\u4ee5\u5728\u5217\u6587\u5b57\u524d\u9762\u52a0\u4e0a\u4e00\u4e2a\u5e26\u989c\u8272\u7684\u5706\u70b9 use Dcat\\Admin\\Admin; $show->state ->using([1 => '\u672a\u5904\u7406', 2 => '\u5df2\u5904\u7406', ...]) ->dot( [ 1 => 'primary', 2 => 'danger', 3 => 'success', 4 => Admin::color()->info(), ], 'primary' // \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u9ed8\u8ba4\u503c ); \u663e\u793a\u6587\u4ef6\u5c3a\u5bf8 \u5982\u679c\u5b57\u6bb5\u6570\u636e\u662f\u8868\u793a\u6587\u4ef6\u5927\u5c0f\u7684\u5b57\u8282\u6570\uff0c\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528filezise\u65b9\u6cd5\u6765\u663e\u793a\u66f4\u6709\u53ef\u8bfb\u6027\u7684\u6587\u5b57 $show->field('file_size')->filesize(); \u8fd9\u6837\u6570\u503c199812019\u5c06\u4f1a\u663e\u793a\u4e3a190.56 MB","title":"\u5b57\u6bb5\u663e\u793a"},{"location":"2.x/model-show-field/#_1","text":"","title":"\u5b57\u6bb5\u663e\u793a"},{"location":"2.x/model-show-field/#html","text":"\u901a\u8fc7 html \u65b9\u6cd5\u53ef\u4ee5\u5728\u8be6\u60c5\u9875\u63d2\u5165\u4e00\u6bb5\u4e0d\u663e\u793a label \u7684 HTML \u4ee3\u7801 // \u4f20\u5165\u5b57\u7b26\u4e32 $show->html('<br/>'); // \u4f20\u5165\u89c6\u56fe $show->html(view(...)); // \u4f20\u5165\u95ed\u5305 $show->html(function () { // \u83b7\u53d6\u5b57\u6bb5\u4fe1\u606f $id = $this->id; $username = $this->username; return view(..., ['id' => $id]); });","title":"HTML"},{"location":"2.x/model-show-field/#_2","text":"\u5982\u679c\u8981\u5728\u5b57\u6bb5\u4e4b\u95f4\u6dfb\u52a0\u4e00\u6761\u5206\u9694\u7ebf\uff1a $show->divider();","title":"\u5206\u9694\u7ebf"},{"location":"2.x/model-show-field/#_3","text":"\u5982\u679c\u8981\u5728\u5b57\u6bb5\u4e4b\u95f4\u4f7f\u7528\u6362\u884c\uff1a $show->newline();","title":"\u6362\u884c"},{"location":"2.x/model-show-field/#_4","text":"\u7528\u4e0b\u9762\u7684\u65b9\u6cd5\u4fee\u6539\u663e\u793a\u5185\u5bb9 $show->title()->as(function ($title) { // \u83b7\u53d6\u5f53\u524d\u884c\u7684\u5176\u4ed6\u5b57\u6bb5 $username = $this->username; return \"<{$title}> {$username}\"; }); $show->contents()->as(function ($content) { return \"<pre>{$content}</pre>\"; });","title":"\u4fee\u6539\u663e\u793a\u5185\u5bb9"},{"location":"2.x/model-show-field/#_5","text":"\u5e2e\u52a9\u65b9\u6cd5\u4e0e\u6570\u636e\u8868\u683c\u5b57\u6bb5\u5e2e\u52a9\u65b9\u6cd5\u4f7f\u7528\u4e00\u81f4\uff0c\u53ef\u53c2\u8003 \u5e2e\u52a9\u65b9\u6cd5 \u3002","title":"\u5e2e\u52a9\u65b9\u6cd5"},{"location":"2.x/model-show-field/#_6","text":"\u4e0b\u9762\u662f\u901a\u8fc7as\u65b9\u6cd5\u5185\u7f6e\u5b9e\u73b0\u7684\u51e0\u4e2a\u5e38\u7528\u7684\u663e\u793a\u6837\u5f0f\uff1a","title":"\u5185\u7f6e\u663e\u793a\u6269\u5c55\u65b9\u6cd5"},{"location":"2.x/model-show-field/#view","text":"view \u65b9\u6cd5\u53ef\u4ee5\u5f15\u5165\u4e00\u4e2a\u89c6\u56fe\u6587\u4ef6\u3002 // \u6a21\u677f\u4e2d\u63a5\u6536\u4ee5\u4e0b\u4e09\u4e2a\u53d8\u91cf\uff1a // name \u5b57\u6bb5\u540d\u79f0 // value \u5b57\u6bb5\u503c // model \u5f53\u524d\u884c\u6570\u636e $show->content->view('admin.fields.content');","title":"view"},{"location":"2.x/model-show-field/#explode","text":"explode \u65b9\u6cd5\u53ef\u4ee5\u628a\u5b57\u7b26\u4e32\u5206\u5272\u4e3a\u6570\u7ec4\u3002 $show->tag->explode()->label(); // \u53ef\u4ee5\u6307\u5b9a\u5206\u9694\u7b26\uff0c\u9ed8\u8ba4\",\" $show->tag->explode('|')->label();","title":"explode"},{"location":"2.x/model-show-field/#prepend","text":"prepend \u65b9\u6cd5\u7528\u4e8e\u7ed9 string \u6216 array \u7c7b\u578b\u7684\u503c\u524d\u9762\u63d2\u5165\u5185\u5bb9\u3002 // \u5f53\u5b57\u6bb5\u503c\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32 $show->email->prepend('mailto:'); // \u5f53\u5b57\u6bb5\u503c\u662f\u4e00\u4e2a\u6570\u7ec4 $show->arr->prepend('first item'); prepend \u65b9\u6cd5\u5141\u8bb8\u4f20\u5165\u95ed\u5305\u53c2\u6570 $show->email->prepend(function ($value, $original) { // $value \u662f\u5f53\u524d\u5b57\u6bb5\u503c // $original \u662f\u5f53\u524d\u5b57\u6bb5\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u51fa\u6765\u7684\u539f\u59cb\u503c // \u83b7\u53d6\u5176\u4ed6\u5b57\u6bb5\u503c $username = $this->username; return \"[{$username}]\"; });","title":"prepend"},{"location":"2.x/model-show-field/#append","text":"append \u65b9\u6cd5\u7528\u4e8e\u7ed9 string \u6216 array \u7c7b\u578b\u7684\u503c\u540e\u9762\u63d2\u5165\u5185\u5bb9\u3002 // \u5f53\u5b57\u6bb5\u503c\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32 $show->email->append('@gmail.com'); // \u5f53\u5b57\u6bb5\u503c\u662f\u4e00\u4e2a\u6570\u7ec4 $show->arr->append('last item'); append \u65b9\u6cd5\u5141\u8bb8\u4f20\u5165\u95ed\u5305\u53c2\u6570 $show->email->prepend(function ($value, $original) { // $value \u662f\u5f53\u524d\u5b57\u6bb5\u503c // $original \u662f\u5f53\u524d\u5b57\u6bb5\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u51fa\u6765\u7684\u539f\u59cb\u503c // \u83b7\u53d6\u5176\u4ed6\u5b57\u6bb5\u503c $username = $this->username; return \"[{$username}]\"; });","title":"append"},{"location":"2.x/model-show-field/#image","text":"\u5b57\u6bb5avatar\u7684\u5185\u5bb9\u662f\u56fe\u7247\u7684\u8def\u5f84\u6216\u8005url\uff0c\u53ef\u4ee5\u5c06\u5b83\u663e\u793a\u4e3a\u56fe\u7247\uff1a $show->avatar()->image(); image()\u65b9\u6cd5\u7684\u53c2\u6570\u53c2\u8003Field::image()","title":"image"},{"location":"2.x/model-show-field/#file","text":"\u5b57\u6bb5document\u7684\u5185\u5bb9\u662f\u6587\u4ef6\u7684\u8def\u5f84\u6216\u8005url\uff0c\u53ef\u4ee5\u5c06\u5b83\u663e\u793a\u4e3a\u6587\u4ef6\uff1a $show->avatar()->file(); file()\u65b9\u6cd5\u7684\u53c2\u6570\u53c2\u8003Field::file()","title":"file"},{"location":"2.x/model-show-field/#link","text":"\u5b57\u6bb5homepage\u7684\u5185\u5bb9\u662furl\u94fe\u63a5\uff0c\u53ef\u4ee5\u5c06\u5b83\u663e\u793a\u4e3aHTML\u94fe\u63a5\uff1a $show->homepage()->link(); link()\u65b9\u6cd5\u7684\u53c2\u6570\u53c2\u8003Field::link()","title":"link"},{"location":"2.x/model-show-field/#label","text":"\u5c06\u5b57\u6bb5tag\u7684\u5185\u5bb9\u663e\u793a\u4e3alabel\uff1a $show->tag()->label(); label()\u65b9\u6cd5\u7684\u53c2\u6570\u53c2\u8003Field::label()","title":"label"},{"location":"2.x/model-show-field/#badge","text":"\u5c06\u5b57\u6bb5rate\u7684\u5185\u5bb9\u663e\u793a\u4e3abadge\uff1a $show->rate()->badge(); badge()\u65b9\u6cd5\u7684\u53c2\u6570\u53c2\u8003Field::badge()","title":"badge"},{"location":"2.x/model-show-field/#using","text":"\u5982\u679c\u5b57\u6bb5gender\u7684\u53d6\u503c\u4e3a f \u3001 m \uff0c\u5206\u522b\u9700\u8981\u7528\u5973\u3001\u7537\u6765\u663e\u793a $show->gender()->using(['f' => '\u5973', 'm' => '\u7537']);","title":"using"},{"location":"2.x/model-show-field/#dot","text":"\u901a\u8fc7 dot \u65b9\u6cd5\u53ef\u4ee5\u5728\u5217\u6587\u5b57\u524d\u9762\u52a0\u4e0a\u4e00\u4e2a\u5e26\u989c\u8272\u7684\u5706\u70b9 use Dcat\\Admin\\Admin; $show->state ->using([1 => '\u672a\u5904\u7406', 2 => '\u5df2\u5904\u7406', ...]) ->dot( [ 1 => 'primary', 2 => 'danger', 3 => 'success', 4 => Admin::color()->info(), ], 'primary' // \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u9ed8\u8ba4\u503c );","title":"dot"},{"location":"2.x/model-show-field/#_7","text":"\u5982\u679c\u5b57\u6bb5\u6570\u636e\u662f\u8868\u793a\u6587\u4ef6\u5927\u5c0f\u7684\u5b57\u8282\u6570\uff0c\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528filezise\u65b9\u6cd5\u6765\u663e\u793a\u66f4\u6709\u53ef\u8bfb\u6027\u7684\u6587\u5b57 $show->field('file_size')->filesize(); \u8fd9\u6837\u6570\u503c199812019\u5c06\u4f1a\u663e\u793a\u4e3a190.56 MB","title":"\u663e\u793a\u6587\u4ef6\u5c3a\u5bf8"},{"location":"2.x/model-show-init/","text":"\u6570\u636e\u8be6\u60c5\u521d\u59cb\u5316 \u901a\u8fc7 Show::resolving \u65b9\u6cd5\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u5728 Dcat\\Admin\\Show \u7c7b\u88ab\u5b9e\u4f8b\u5316\u65f6\u89e6\u53d1\uff1b \u901a\u8fc7 Show::composing \u65b9\u6cd5\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u5728 render() \u65b9\u6cd5\u88ab\u8c03\u7528\u65f6\u89e6\u53d1\uff1b \u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u8fd9\u4e24\u4e2a\u4e8b\u4ef6\u4e2d\u6539\u53d8 Show \u7684\u4e00\u4e9b\u8bbe\u7f6e\u6216\u884c\u4e3a\uff0c\u6bd4\u5982\u9700\u8981\u7981\u7528\u6389\u67d0\u4e9b\u64cd\u4f5c\uff0c\u53ef\u4ee5\u5728 app/Admin/bootstrap.php \u52a0\u5165\u4e0b\u9762\u7684\u4ee3\u7801\uff1a use Dcat\\Admin\\Show; Show::resolving(function (Show $show) { $show->showQuickEdit(); });","title":"\u6570\u636e\u8be6\u60c5\u521d\u59cb\u5316"},{"location":"2.x/model-show-init/#_1","text":"\u901a\u8fc7 Show::resolving \u65b9\u6cd5\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u5728 Dcat\\Admin\\Show \u7c7b\u88ab\u5b9e\u4f8b\u5316\u65f6\u89e6\u53d1\uff1b \u901a\u8fc7 Show::composing \u65b9\u6cd5\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u5728 render() \u65b9\u6cd5\u88ab\u8c03\u7528\u65f6\u89e6\u53d1\uff1b \u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u8fd9\u4e24\u4e2a\u4e8b\u4ef6\u4e2d\u6539\u53d8 Show \u7684\u4e00\u4e9b\u8bbe\u7f6e\u6216\u884c\u4e3a\uff0c\u6bd4\u5982\u9700\u8981\u7981\u7528\u6389\u67d0\u4e9b\u64cd\u4f5c\uff0c\u53ef\u4ee5\u5728 app/Admin/bootstrap.php \u52a0\u5165\u4e0b\u9762\u7684\u4ee3\u7801\uff1a use Dcat\\Admin\\Show; Show::resolving(function (Show $show) { $show->showQuickEdit(); });","title":"\u6570\u636e\u8be6\u60c5\u521d\u59cb\u5316"},{"location":"2.x/model-show-relation/","text":"\u5173\u8054\u5173\u7cfb \u4e00\u5bf9\u4e00 users \u8868\u548c\u4e0a\u9762\u7684 posts \u8868\u4e3a\u4e00\u5bf9\u4e00\u5173\u8054\u5173\u7cfb\uff0c\u901a\u8fc7 posts.author_id \u5b57\u6bb5\u5173\u8054\uff0c users \u548c post \u8868\u7ed3\u6784\u5982\u4e0b\uff1a CREATE TABLE `posts` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `author_id` int(10) unsigned NOT NULL , `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `content` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `rate` int(255) COLLATE utf8_unicode_ci NOT NULL, `release_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; CREATE TABLE `users` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; \u6a21\u578b\u5b9a\u4e49\u4e3a\uff1a class User extends Model { } class Post extends Model { public function author() { return $this->belongsTo(User::class, 'author_id'); } } \u6570\u636e\u4ed3\u5e93\u5b9a\u4e49\u4e3a\uff1a <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use User as UserModel; class User extends EloquentRepository { protected $eloquentClass = UserModel::class; } \u90a3\u4e48\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u65b9\u5f0f\u663e\u793a post \u6240\u5c5e\u7684\u7528\u6237\u7684\u8be6\u7ec6\uff1a use App\\Models\\User; $show->author(function ($model) { return Show::make($model->author_id, new User(), function (Show $show) { $show->resource('/users'); $show->id(); $show->name(); $show->email(); }); }); {tip} \u4e3a\u4e86\u80fd\u591f\u6b63\u5e38\u4f7f\u7528\u8fd9\u4e2a\u9762\u677f\u53f3\u4e0a\u89d2\u7684\u5de5\u5177\uff0c\u5fc5\u987b\u7528 resource \u65b9\u6cd5\u8bbe\u7f6e\u7528\u6237\u8d44\u6e90\u7684url\u8bbf\u95ee\u8def\u5f84\u3002 \u5982\u679c\u4f60\u7684\u5173\u8054\u6a21\u578b\u8fd8\u9700\u8981\u6709\u5176\u4ed6\u7684\u6761\u4ef6\u67e5\u8be2\uff0c\u5219\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u65b9\u5f0f use App\\Models\\User; $show->author(function ($model) { // \u6a21\u578b\u8bbe\u7f6e\u67e5\u8be2\u6761\u4ef6 $userModel = User::where('state', $model->state); return Show::make($model->author_id, $userModel, function (Show $show) { // \u8bbe\u7f6e\u8def\u7531 $show->resource('/users'); $show->id(); $show->name(); $show->email(); }); }); \u7b80\u5355\u65b9\u5f0f \u5982\u679c\u4f60\u53ea\u662f\u7b80\u5355\u7684\u5c55\u793a\u5173\u8054\u8868\u4fe1\u606f\uff0c\u4e5f\u53ef\u4ee5\u8fd9\u4e48\u5199 // \u5982\u679c\u4f60\u7528\u7684\u662f\u6a21\u578b\uff0c\u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a\u5173\u8054\u5173\u7cfb $model = Post::with('author'); // \u5982\u679c\u4f60\u7528\u7684\u662f\u6570\u636e\u4ed3\u5e93\uff0c\u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a\u5173\u8054\u5173\u7cfb // $repository = new Post(['author']); return Show::make($id, $model, function (Show $show) { $show->field('author.id', '\u4f5c\u8005ID'); $show->field('author.name', '\u4f5c\u8005\u540d\u79f0'); ... }); \u5982\u679c\u4f60\u7684\u5173\u8054\u6a21\u578b\u540d\u79f0\u7684\u547d\u540d\u662f \u9a7c\u5cf0 \u98ce\u683c\uff0c\u90a3\u4e48\u4f7f\u7528\u7684\u65f6\u5019\u9700\u8981\u8f6c\u5316\u4e3a \u4e0b\u5212\u7ebf \u98ce\u683c\u547d\u540d // \u6ce8\u610f\u8fd9\u91cc\u5fc5\u987b\u4f7f\u7528\u4e0b\u5212\u7ebf\u98ce\u683c\u547d\u540d\uff0c\u5426\u5219\u5c06\u65e0\u6cd5\u663e\u793a\u7f16\u8f91\u6570\u636e $show->field('user_profile.postcode'); $show->field('user_profile.address'); \u4e00\u5bf9\u591a \u4e00\u5bf9\u591a\u4f1a\u4ee5 \u6570\u636e\u8868\u683c \u7684\u65b9\u5f0f\u5448\u73b0\uff0c\u4e0b\u9762\u662f\u7b80\u5355\u7684\u4f8b\u5b50 posts \u8868\u548c\u8bc4\u8bba\u8868 comments \u4e3a\u4e00\u5bf9\u591a\u5173\u7cfb(\u4e00\u6761post\u6709\u591a\u6761comments)\uff0c\u901a\u8fc7 comments.post_id \u5b57\u6bb5\u5173\u8054 CREATE TABLE `comments` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `post_id` int(10) unsigned NOT NULL, `content` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci \u6a21\u578b\u5b9a\u4e49\u4e3a\uff1a class Post extends Model { public function comments() { return $this->hasMany(Comment::class); } } class Comment extends Model { } \u6570\u636e\u4ed3\u5e93\u5b9a\u4e49\u4e3a\uff1a <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use Comment as CommentModel; class Comment extends EloquentRepository { protected $eloquentClass = CommentModel::class; } \u90a3\u4e48\u8bc4\u8bba\u7684\u663e\u793a\u901a\u8fc7\u4e0b\u9762\u7684\u4ee3\u7801\u5b9e\u73b0\uff1a use App\\Admin\\Repositories\\Comment; $show->comments(function ($model) { $grid = new Grid(new Comment); $grid->model()->where('post_id', $model->id); // \u8bbe\u7f6e\u8def\u7531 $grid->resource('comments'); $grid->id(); $grid->content()->limit(10); $grid->created_at(); $grid->updated_at(); $grid->filter(function ($filter) { $filter->like('content')->width('300px'); }); return $grid; }); \u6ce8\u610f\uff1a\u4e3a\u4e86\u80fd\u591f\u6b63\u5e38\u4f7f\u7528\u8fd9\u4e2a\u6570\u636e\u8868\u683c\u7684\u529f\u80fd\uff0c\u5fc5\u987b\u7528 resource() \u65b9\u6cd5\u8bbe\u7f6e comments \u8d44\u6e90\u7684url\u8bbf\u95ee\u8def\u5f84 \u591a\u5bf9\u591a \u591a\u5bf9\u591a\u4f1a\u4ee5 \u6570\u636e\u8868\u683c \u7684\u65b9\u5f0f\u5448\u73b0\uff0c\u4e0b\u9762\u662f\u7b80\u5355\u7684\u4f8b\u5b50 \u89d2\u8272\u8868 roles \u548c\u6743\u9650\u8868 permissions \u4e3a\u591a\u5bf9\u591a\u5173\u7cfb\uff0c\u901a\u8fc7\u4e2d\u95f4\u8868 role_permissions \u5173\u8054 CREATE TABLE `roles` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL, `slug` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `admin_roles_name_unique` (`name`) ) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; CREATE TABLE `permissions` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL, `slug` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL, `http_method` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL, `http_path` text COLLATE utf8mb4_unicode_ci, `order` int(11) NOT NULL DEFAULT '0', `parent_id` int(11) NOT NULL DEFAULT '0', `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `admin_permissions_name_unique` (`name`) ) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; CREATE TABLE `role_permissions` ( `role_id` int(11) NOT NULL, `permission_id` int(11) NOT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, KEY `admin_role_permissions_role_id_permission_id_index` (`role_id`,`permission_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; \u6a21\u578b\u5b9a\u4e49\u4e3a\uff1a class Role extends Model { public function permissions() : BelongsToMany { return $this->belongsToMany(Permission::class, 'role_permissions', 'role_id', 'permission_id'); } } class Permission extends Model { } \u6570\u636e\u4ed3\u5e93\u5b9a\u4e49\u4e3a\uff1a <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use Permission as PermissionModel; class Permission extends EloquentRepository { protected $eloquentClass = PermissionModel::class; } \u90a3\u4e48\u6743\u9650\u7684\u663e\u793a\u901a\u8fc7\u4e0b\u9762\u7684\u4ee3\u7801\u5b9e\u73b0\uff1a use App\\Admin\\Repositories\\Permission; $show->permissions(function ($model) { $grid = new Grid(new Permission); $grid->model()->join('role_permissions', function ($join) use ($model) { $join->on('role_permissions.permission_id', 'id') ->where('role_id', '=', $model->id); }); // \u8bbe\u7f6e\u8def\u7531 $grid->resource('auth/permissions'); $grid->id; $grid->name; $grid->slug; $grid->http_path; $grid->filter(function (Grid\\Filter $filter) { $filter->equal('id')->width('300px'); }); return $grid; });","title":"\u5173\u8054\u5173\u7cfb"},{"location":"2.x/model-show-relation/#_1","text":"","title":"\u5173\u8054\u5173\u7cfb"},{"location":"2.x/model-show-relation/#_2","text":"users \u8868\u548c\u4e0a\u9762\u7684 posts \u8868\u4e3a\u4e00\u5bf9\u4e00\u5173\u8054\u5173\u7cfb\uff0c\u901a\u8fc7 posts.author_id \u5b57\u6bb5\u5173\u8054\uff0c users \u548c post \u8868\u7ed3\u6784\u5982\u4e0b\uff1a CREATE TABLE `posts` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `author_id` int(10) unsigned NOT NULL , `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `content` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `rate` int(255) COLLATE utf8_unicode_ci NOT NULL, `release_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; CREATE TABLE `users` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; \u6a21\u578b\u5b9a\u4e49\u4e3a\uff1a class User extends Model { } class Post extends Model { public function author() { return $this->belongsTo(User::class, 'author_id'); } } \u6570\u636e\u4ed3\u5e93\u5b9a\u4e49\u4e3a\uff1a <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use User as UserModel; class User extends EloquentRepository { protected $eloquentClass = UserModel::class; } \u90a3\u4e48\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u65b9\u5f0f\u663e\u793a post \u6240\u5c5e\u7684\u7528\u6237\u7684\u8be6\u7ec6\uff1a use App\\Models\\User; $show->author(function ($model) { return Show::make($model->author_id, new User(), function (Show $show) { $show->resource('/users'); $show->id(); $show->name(); $show->email(); }); }); {tip} \u4e3a\u4e86\u80fd\u591f\u6b63\u5e38\u4f7f\u7528\u8fd9\u4e2a\u9762\u677f\u53f3\u4e0a\u89d2\u7684\u5de5\u5177\uff0c\u5fc5\u987b\u7528 resource \u65b9\u6cd5\u8bbe\u7f6e\u7528\u6237\u8d44\u6e90\u7684url\u8bbf\u95ee\u8def\u5f84\u3002 \u5982\u679c\u4f60\u7684\u5173\u8054\u6a21\u578b\u8fd8\u9700\u8981\u6709\u5176\u4ed6\u7684\u6761\u4ef6\u67e5\u8be2\uff0c\u5219\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u65b9\u5f0f use App\\Models\\User; $show->author(function ($model) { // \u6a21\u578b\u8bbe\u7f6e\u67e5\u8be2\u6761\u4ef6 $userModel = User::where('state', $model->state); return Show::make($model->author_id, $userModel, function (Show $show) { // \u8bbe\u7f6e\u8def\u7531 $show->resource('/users'); $show->id(); $show->name(); $show->email(); }); });","title":"\u4e00\u5bf9\u4e00"},{"location":"2.x/model-show-relation/#_3","text":"\u5982\u679c\u4f60\u53ea\u662f\u7b80\u5355\u7684\u5c55\u793a\u5173\u8054\u8868\u4fe1\u606f\uff0c\u4e5f\u53ef\u4ee5\u8fd9\u4e48\u5199 // \u5982\u679c\u4f60\u7528\u7684\u662f\u6a21\u578b\uff0c\u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a\u5173\u8054\u5173\u7cfb $model = Post::with('author'); // \u5982\u679c\u4f60\u7528\u7684\u662f\u6570\u636e\u4ed3\u5e93\uff0c\u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a\u5173\u8054\u5173\u7cfb // $repository = new Post(['author']); return Show::make($id, $model, function (Show $show) { $show->field('author.id', '\u4f5c\u8005ID'); $show->field('author.name', '\u4f5c\u8005\u540d\u79f0'); ... }); \u5982\u679c\u4f60\u7684\u5173\u8054\u6a21\u578b\u540d\u79f0\u7684\u547d\u540d\u662f \u9a7c\u5cf0 \u98ce\u683c\uff0c\u90a3\u4e48\u4f7f\u7528\u7684\u65f6\u5019\u9700\u8981\u8f6c\u5316\u4e3a \u4e0b\u5212\u7ebf \u98ce\u683c\u547d\u540d // \u6ce8\u610f\u8fd9\u91cc\u5fc5\u987b\u4f7f\u7528\u4e0b\u5212\u7ebf\u98ce\u683c\u547d\u540d\uff0c\u5426\u5219\u5c06\u65e0\u6cd5\u663e\u793a\u7f16\u8f91\u6570\u636e $show->field('user_profile.postcode'); $show->field('user_profile.address');","title":"\u7b80\u5355\u65b9\u5f0f"},{"location":"2.x/model-show-relation/#_4","text":"\u4e00\u5bf9\u591a\u4f1a\u4ee5 \u6570\u636e\u8868\u683c \u7684\u65b9\u5f0f\u5448\u73b0\uff0c\u4e0b\u9762\u662f\u7b80\u5355\u7684\u4f8b\u5b50 posts \u8868\u548c\u8bc4\u8bba\u8868 comments \u4e3a\u4e00\u5bf9\u591a\u5173\u7cfb(\u4e00\u6761post\u6709\u591a\u6761comments)\uff0c\u901a\u8fc7 comments.post_id \u5b57\u6bb5\u5173\u8054 CREATE TABLE `comments` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `post_id` int(10) unsigned NOT NULL, `content` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci \u6a21\u578b\u5b9a\u4e49\u4e3a\uff1a class Post extends Model { public function comments() { return $this->hasMany(Comment::class); } } class Comment extends Model { } \u6570\u636e\u4ed3\u5e93\u5b9a\u4e49\u4e3a\uff1a <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use Comment as CommentModel; class Comment extends EloquentRepository { protected $eloquentClass = CommentModel::class; } \u90a3\u4e48\u8bc4\u8bba\u7684\u663e\u793a\u901a\u8fc7\u4e0b\u9762\u7684\u4ee3\u7801\u5b9e\u73b0\uff1a use App\\Admin\\Repositories\\Comment; $show->comments(function ($model) { $grid = new Grid(new Comment); $grid->model()->where('post_id', $model->id); // \u8bbe\u7f6e\u8def\u7531 $grid->resource('comments'); $grid->id(); $grid->content()->limit(10); $grid->created_at(); $grid->updated_at(); $grid->filter(function ($filter) { $filter->like('content')->width('300px'); }); return $grid; }); \u6ce8\u610f\uff1a\u4e3a\u4e86\u80fd\u591f\u6b63\u5e38\u4f7f\u7528\u8fd9\u4e2a\u6570\u636e\u8868\u683c\u7684\u529f\u80fd\uff0c\u5fc5\u987b\u7528 resource() \u65b9\u6cd5\u8bbe\u7f6e comments \u8d44\u6e90\u7684url\u8bbf\u95ee\u8def\u5f84","title":"\u4e00\u5bf9\u591a"},{"location":"2.x/model-show-relation/#_5","text":"\u591a\u5bf9\u591a\u4f1a\u4ee5 \u6570\u636e\u8868\u683c \u7684\u65b9\u5f0f\u5448\u73b0\uff0c\u4e0b\u9762\u662f\u7b80\u5355\u7684\u4f8b\u5b50 \u89d2\u8272\u8868 roles \u548c\u6743\u9650\u8868 permissions \u4e3a\u591a\u5bf9\u591a\u5173\u7cfb\uff0c\u901a\u8fc7\u4e2d\u95f4\u8868 role_permissions \u5173\u8054 CREATE TABLE `roles` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL, `slug` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `admin_roles_name_unique` (`name`) ) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; CREATE TABLE `permissions` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL, `slug` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL, `http_method` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL, `http_path` text COLLATE utf8mb4_unicode_ci, `order` int(11) NOT NULL DEFAULT '0', `parent_id` int(11) NOT NULL DEFAULT '0', `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `admin_permissions_name_unique` (`name`) ) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; CREATE TABLE `role_permissions` ( `role_id` int(11) NOT NULL, `permission_id` int(11) NOT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, KEY `admin_role_permissions_role_id_permission_id_index` (`role_id`,`permission_id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; \u6a21\u578b\u5b9a\u4e49\u4e3a\uff1a class Role extends Model { public function permissions() : BelongsToMany { return $this->belongsToMany(Permission::class, 'role_permissions', 'role_id', 'permission_id'); } } class Permission extends Model { } \u6570\u636e\u4ed3\u5e93\u5b9a\u4e49\u4e3a\uff1a <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use Permission as PermissionModel; class Permission extends EloquentRepository { protected $eloquentClass = PermissionModel::class; } \u90a3\u4e48\u6743\u9650\u7684\u663e\u793a\u901a\u8fc7\u4e0b\u9762\u7684\u4ee3\u7801\u5b9e\u73b0\uff1a use App\\Admin\\Repositories\\Permission; $show->permissions(function ($model) { $grid = new Grid(new Permission); $grid->model()->join('role_permissions', function ($join) use ($model) { $join->on('role_permissions.permission_id', 'id') ->where('role_id', '=', $model->id); }); // \u8bbe\u7f6e\u8def\u7531 $grid->resource('auth/permissions'); $grid->id; $grid->name; $grid->slug; $grid->http_path; $grid->filter(function (Grid\\Filter $filter) { $filter->equal('id')->width('300px'); }); return $grid; });","title":"\u591a\u5bf9\u591a"},{"location":"2.x/model-show-trans/","text":"\u6570\u636e\u8be6\u60c5\u5b57\u6bb5\u7ffb\u8bd1 \u4e0e\u6570\u636e\u8868\u683c\u5b57\u6bb5\u7ffb\u8bd1\u7684\u4f7f\u7528\u57fa\u672c\u4e00\u81f4\uff0c\u53ef\u53c2\u8003 \u6570\u636e\u8868\u683c\u5b57\u6bb5\u7ffb\u8bd1 \u3002","title":"\u6570\u636e\u8be6\u60c5\u5b57\u6bb5\u7ffb\u8bd1"},{"location":"2.x/model-show-trans/#_1","text":"\u4e0e\u6570\u636e\u8868\u683c\u5b57\u6bb5\u7ffb\u8bd1\u7684\u4f7f\u7528\u57fa\u672c\u4e00\u81f4\uff0c\u53ef\u53c2\u8003 \u6570\u636e\u8868\u683c\u5b57\u6bb5\u7ffb\u8bd1 \u3002","title":"\u6570\u636e\u8be6\u60c5\u5b57\u6bb5\u7ffb\u8bd1"},{"location":"2.x/model-show/","text":"\u6570\u636e\u8be6\u60c5\u57fa\u672c\u4f7f\u7528 Dcat\\Admin\\Show \u7528\u6765\u663e\u793a\u6570\u636e\u8be6\u60c5\uff0c\u5148\u6765\u4e2a\u4f8b\u5b50\uff0c\u6570\u636e\u5e93\u4e2d\u6709posts\u8868\uff1a CREATE TABLE `posts` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `author_id` int(10) unsigned NOT NULL , `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `content` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `rate` int(255) COLLATE utf8_unicode_ci NOT NULL, `release_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; \u5bf9\u5e94\u7684\u6570\u636e\u6a21\u578b\u4e3a App\\Models\\Post \uff0c\u6570\u636e\u4ed3\u5e93\u4e3a App\\Admin\\Repositories\\Post \uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u53ef\u4ee5\u663e\u793aposts\u8868\u7684\u6570\u636e\u8be6\u60c5\uff1a <?php namespace App\\Admin\\Controllers; use App\\Http\\Controllers\\Controller; use App\\Admin\\Repositories\\Post; use Dcat\\Admin\\Layout\\Content; use Dcat\\Admin\\Show; use Dcat\\Admin\\Admin; class PostController extends Controller { public function show($id, Content $content) { return $content->header('Post') ->description('\u8be6\u60c5') ->body(Show::make($id, new Post(), function (Show $show) { $show->id('ID'); $show->title('\u6807\u9898'); $show->content('\u5185\u5bb9'); $show->rate(); $show->created_at(); $show->updated_at(); $show->release_at(); })); } } \u57fa\u672c\u4f7f\u7528\u65b9\u6cd5 HTML\u5185\u5bb9\u8f6c\u4e49 \u4e3a\u4e86\u9632\u6b62XSS\u653b\u51fb, \u9ed8\u8ba4\u8f93\u51fa\u7684\u5185\u5bb9\u90fd\u4f1a\u4f7f\u7528HTML\u8f6c\u4e49\uff0c\u5982\u679c\u4f60\u4e0d\u60f3\u8f6c\u4e49\u8f93\u51fa HTML \uff0c\u53ef\u4ee5\u8c03\u7528 unescape \u65b9\u6cd5\uff1a $show->avatar()->unescape()->as(function ($avatar) { return \"<img src='{$avatar}' />\"; }); \u8bbe\u7f6e\u5b57\u6bb5\u5bbd\u5ea6 \u5b57\u6bb5\u5bbd\u5ea6\u9ed8\u8ba4\u503c\u4e3a\u201c3\u201d\uff0c\u53ef\u4ee5\u8bbe\u7f6e1-12\u4e4b\u95f4\u7684\u6570\u5b57\u3002 $show->created_at->width(4); \u4fee\u6539\u9762\u677f\u7684\u6837\u5f0f\u548c\u6807\u9898 $show->panel() ->style('danger') ->title('post\u57fa\u672c\u4fe1\u606f...'); style\u7684\u53d6\u503c\u53ef\u4ee5\u662fprimary\u3001info\u3001danger\u3001warning\u3001default \u9762\u677f\u5de5\u5177\u8bbe\u7f6e \u9762\u677f\u53f3\u4e0a\u89d2\u9ed8\u8ba4\u6709\u4e09\u4e2a\u6309\u94ae\u7f16\u8f91\u3001\u5220\u9664\u3001\u5217\u8868\uff0c\u53ef\u4ee5\u5206\u522b\u7528\u4e0b\u9762\u7684\u65b9\u5f0f\u5173\u6389\u5b83\u4eec\uff1a $show->panel() ->tools(function ($tools) { $tools->disableEdit(); $tools->disableList(); $tools->disableDelete(); // \u663e\u793a\u5feb\u6377\u7f16\u8f91\u6309\u94ae $tools->showQuickEdit(); }); \u81ea\u5b9a\u4e49\u590d\u6742\u5de5\u5177\u6309\u94ae \u8bf7\u53c2\u8003\u6587\u6863 \u6570\u636e\u8be6\u60c5\u52a8\u4f5c \u591a\u5217\u5e03\u5c40 \u4f7f\u7528 $show->row(function (Show\\Row $show) { $show->width(3)->id; $show->width(3)->name; $show->width(5)->email; }); $show->row(function (Show\\Row $show) { $show->width(5)->email_verified_at; $show->created_at; $show->updated_at; }); $show->row(function (Show\\Row $show) { $show->width(3)->field('profile.first_name'); $show->field('profile.last_name'); $show->width(3)->field('profile.postcode'); }); \u6548\u679c","title":"\u6570\u636e\u8be6\u60c5\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/model-show/#_1","text":"Dcat\\Admin\\Show \u7528\u6765\u663e\u793a\u6570\u636e\u8be6\u60c5\uff0c\u5148\u6765\u4e2a\u4f8b\u5b50\uff0c\u6570\u636e\u5e93\u4e2d\u6709posts\u8868\uff1a CREATE TABLE `posts` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `author_id` int(10) unsigned NOT NULL , `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `content` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `rate` int(255) COLLATE utf8_unicode_ci NOT NULL, `release_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; \u5bf9\u5e94\u7684\u6570\u636e\u6a21\u578b\u4e3a App\\Models\\Post \uff0c\u6570\u636e\u4ed3\u5e93\u4e3a App\\Admin\\Repositories\\Post \uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u53ef\u4ee5\u663e\u793aposts\u8868\u7684\u6570\u636e\u8be6\u60c5\uff1a <?php namespace App\\Admin\\Controllers; use App\\Http\\Controllers\\Controller; use App\\Admin\\Repositories\\Post; use Dcat\\Admin\\Layout\\Content; use Dcat\\Admin\\Show; use Dcat\\Admin\\Admin; class PostController extends Controller { public function show($id, Content $content) { return $content->header('Post') ->description('\u8be6\u60c5') ->body(Show::make($id, new Post(), function (Show $show) { $show->id('ID'); $show->title('\u6807\u9898'); $show->content('\u5185\u5bb9'); $show->rate(); $show->created_at(); $show->updated_at(); $show->release_at(); })); } }","title":"\u6570\u636e\u8be6\u60c5\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/model-show/#_2","text":"","title":"\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5"},{"location":"2.x/model-show/#html","text":"\u4e3a\u4e86\u9632\u6b62XSS\u653b\u51fb, \u9ed8\u8ba4\u8f93\u51fa\u7684\u5185\u5bb9\u90fd\u4f1a\u4f7f\u7528HTML\u8f6c\u4e49\uff0c\u5982\u679c\u4f60\u4e0d\u60f3\u8f6c\u4e49\u8f93\u51fa HTML \uff0c\u53ef\u4ee5\u8c03\u7528 unescape \u65b9\u6cd5\uff1a $show->avatar()->unescape()->as(function ($avatar) { return \"<img src='{$avatar}' />\"; });","title":"HTML\u5185\u5bb9\u8f6c\u4e49"},{"location":"2.x/model-show/#_3","text":"\u5b57\u6bb5\u5bbd\u5ea6\u9ed8\u8ba4\u503c\u4e3a\u201c3\u201d\uff0c\u53ef\u4ee5\u8bbe\u7f6e1-12\u4e4b\u95f4\u7684\u6570\u5b57\u3002 $show->created_at->width(4);","title":"\u8bbe\u7f6e\u5b57\u6bb5\u5bbd\u5ea6"},{"location":"2.x/model-show/#_4","text":"$show->panel() ->style('danger') ->title('post\u57fa\u672c\u4fe1\u606f...'); style\u7684\u53d6\u503c\u53ef\u4ee5\u662fprimary\u3001info\u3001danger\u3001warning\u3001default","title":"\u4fee\u6539\u9762\u677f\u7684\u6837\u5f0f\u548c\u6807\u9898"},{"location":"2.x/model-show/#_5","text":"\u9762\u677f\u53f3\u4e0a\u89d2\u9ed8\u8ba4\u6709\u4e09\u4e2a\u6309\u94ae\u7f16\u8f91\u3001\u5220\u9664\u3001\u5217\u8868\uff0c\u53ef\u4ee5\u5206\u522b\u7528\u4e0b\u9762\u7684\u65b9\u5f0f\u5173\u6389\u5b83\u4eec\uff1a $show->panel() ->tools(function ($tools) { $tools->disableEdit(); $tools->disableList(); $tools->disableDelete(); // \u663e\u793a\u5feb\u6377\u7f16\u8f91\u6309\u94ae $tools->showQuickEdit(); });","title":"\u9762\u677f\u5de5\u5177\u8bbe\u7f6e"},{"location":"2.x/model-show/#_6","text":"\u8bf7\u53c2\u8003\u6587\u6863 \u6570\u636e\u8be6\u60c5\u52a8\u4f5c","title":"\u81ea\u5b9a\u4e49\u590d\u6742\u5de5\u5177\u6309\u94ae"},{"location":"2.x/model-show/#_7","text":"\u4f7f\u7528 $show->row(function (Show\\Row $show) { $show->width(3)->id; $show->width(3)->name; $show->width(5)->email; }); $show->row(function (Show\\Row $show) { $show->width(5)->email_verified_at; $show->created_at; $show->updated_at; }); $show->row(function (Show\\Row $show) { $show->width(3)->field('profile.first_name'); $show->field('profile.last_name'); $show->width(3)->field('profile.postcode'); }); \u6548\u679c","title":"\u591a\u5217\u5e03\u5c40"},{"location":"2.x/model-tree/","text":"\u6a21\u578b\u6811 \u8fd9\u4e2a\u529f\u80fd\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u6811\u72b6\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u7528\u62d6\u62fd\u7684\u65b9\u5f0f\u5b9e\u73b0\u6570\u636e\u7684\u5c42\u7ea7\u3001\u6392\u5e8f\u7b49\u64cd\u4f5c\uff0c\u4e0b\u9762\u662f\u57fa\u672c\u7684\u7528\u6cd5\u3002 \u8868\u7ed3\u6784\u548c\u6a21\u578b \u8981\u4f7f\u7528 model-tree \uff0c\u8981\u9075\u5b88\u7ea6\u5b9a\u7684\u8868\u7ed3\u6784\uff1a {tip} parent_id \u5b57\u6bb5\u4e00\u5b9a\u8981\u9ed8\u8ba4\u4e3a 0 \uff01\uff01\uff01 CREATE TABLE `demo_categories` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `parent_id` int(11) NOT NULL DEFAULT '0', `order` int(11) NOT NULL DEFAULT '0', `title` varchar(50) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci \u4e0a\u9762\u7684\u8868\u683c\u7ed3\u6784\u91cc\u9762\u6709\u4e09\u4e2a\u5fc5\u8981\u7684\u5b57\u6bb5 parent_id \u3001 order \u3001 title ,\u5176\u5b83\u5b57\u6bb5\u6ca1\u6709\u8981\u6c42\u3002 \u5bf9\u5e94\u7684\u6a21\u578b\u4e3a app/Models/Category.php : <?php namespace App\\Models\\Demo; use Dcat\\Admin\\Traits\\ModelTree; use Illuminate\\Database\\Eloquent\\Model; class Category extends Model { use ModelTree; protected $table = 'demo_categories'; } \u8868\u7ed3\u6784\u4e2d\u7684\u4e09\u4e2a\u5b57\u6bb5 parent_id \u3001 order \u3001 title \u7684\u5b57\u6bb5\u540d\u4e5f\u662f\u53ef\u4ee5\u4fee\u6539\u7684\uff1a {tip} \u4e3a\u4e86\u4fbf\u4e8e\u9605\u8bfb\uff0c\u8fd9\u91cc\u4e0d\u518d\u5c55\u793a Repository \u4ee3\u7801\u3002 <?php namespace App\\Models\\Demo; use Dcat\\Admin\\Traits\\ModelTree; use Illuminate\\Database\\Eloquent\\Model; class Category extends Model { use ModelTree; protected $table = 'demo_categories'; // \u7236\u7ea7ID\u5b57\u6bb5\u540d\u79f0\uff0c\u9ed8\u8ba4\u503c\u4e3a parent_id protected $parentColumn = 'pid'; // \u6392\u5e8f\u5b57\u6bb5\u540d\u79f0\uff0c\u9ed8\u8ba4\u503c\u4e3a order protected $orderColumn = 'sort'; // \u6807\u9898\u5b57\u6bb5\u540d\u79f0\uff0c\u9ed8\u8ba4\u503c\u4e3a title protected $titleColumn = 'name'; // Since v2.1.6-beta\uff0c\u5b9a\u4e49depthColumn\u5c5e\u6027\u540e\uff0c\u5c06\u4f1a\u5728\u6570\u636e\u8868\u4fdd\u5b58\u5f53\u524d\u884c\u7684\u5c42\u7ea7 protected $depthColumn = 'depth'; } \u4f7f\u7528\u65b9\u6cd5 \u7136\u540e\u5c31\u662f\u5728\u9875\u9762\u4e2d\u4f7f\u7528 model-tree \u4e86\uff1a <?php namespace App\\Admin\\Controllers\\Demo; use App\\Models\\Category; use Dcat\\Admin\\Layout\\Row; use Dcat\\Admin\\Layout\\Content; use Dcat\\Admin\\Tree; use Dcat\\Admin\\Controllers\\AdminController; class CategoryController extends AdminController { public function index(Content $content) { return $content->header('\u6811\u72b6\u6a21\u578b') ->body(function (Row $row) { $tree = new Tree(new Category); $row->column(12, $tree); }); } } \u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u5f0f\u6765\u4fee\u6539\u884c\u6570\u636e\u7684\u663e\u793a\uff1a $tree = new Tree(new Category); $tree->branch(function ($branch) { $src = config('admin.upload.host') . '/' . $branch['logo'] ; $logo = \"<img src='$src' style='max-width:30px;max-height:30px' class='img'/>\"; return \"{$branch['id']} - {$branch['title']} $logo\"; }); \u5728\u56de\u8c03\u51fd\u6570\u4e2d\u8fd4\u56de\u7684\u5b57\u7b26\u4e32\u7c7b\u578b\u6570\u636e\uff0c\u5c31\u662f\u5728\u6811\u72b6\u7ec4\u4ef6\u4e2d\u7684\u6bcf\u4e00\u884c\u7684\u663e\u793a\u5185\u5bb9\uff0c $branch \u53c2\u6570\u662f\u5f53\u524d\u884c\u7684\u6570\u636e\u6570\u7ec4\u3002 \u4fee\u6539\u6a21\u578b\u67e5\u8be2\u6761\u4ef6 \u5982\u679c\u8981\u4fee\u6539\u6a21\u578b\u7684\u67e5\u8be2\uff0c\u7528\u4e0b\u9762\u7684\u65b9\u5f0f $tree->query(function ($model) { return $model->where('type', 1); }); \u9650\u5236\u6700\u5927\u5c42\u7ea7\u6570 \u9ed8\u8ba4 5 $tree->maxDepth(3); \u81ea\u5b9a\u4e49\u884c\u64cd\u4f5c use Dcat\\Admin\\Tree; $tree->actions(function (Tree\\Actions $actions) { if ($actions->row->id > 5) { $actions->disableDelete(); // \u7981\u7528\u5220\u9664\u6309\u94ae } // \u6dfb\u52a0\u65b0\u7684action $actions->append(...); }); // \u6279\u91cf\u6dfb\u52a0action $tree->actions([ new Action1(), \"<div>...</div>\", ... ]); \u81ea\u5b9a\u4e49\u590d\u6742\u64cd\u4f5c\uff0c\u53c2\u8003 \u6a21\u578b\u6811\u52a8\u4f5c \u81ea\u5b9a\u4e49\u5de5\u5177\u680f\u6309\u94ae \u8bf7\u53c2\u8003\u6587\u6863 \u6a21\u578b\u6811\u52a8\u4f5c","title":"\u6a21\u578b\u6811"},{"location":"2.x/model-tree/#_1","text":"\u8fd9\u4e2a\u529f\u80fd\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u6811\u72b6\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u7528\u62d6\u62fd\u7684\u65b9\u5f0f\u5b9e\u73b0\u6570\u636e\u7684\u5c42\u7ea7\u3001\u6392\u5e8f\u7b49\u64cd\u4f5c\uff0c\u4e0b\u9762\u662f\u57fa\u672c\u7684\u7528\u6cd5\u3002","title":"\u6a21\u578b\u6811"},{"location":"2.x/model-tree/#_2","text":"\u8981\u4f7f\u7528 model-tree \uff0c\u8981\u9075\u5b88\u7ea6\u5b9a\u7684\u8868\u7ed3\u6784\uff1a {tip} parent_id \u5b57\u6bb5\u4e00\u5b9a\u8981\u9ed8\u8ba4\u4e3a 0 \uff01\uff01\uff01 CREATE TABLE `demo_categories` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `parent_id` int(11) NOT NULL DEFAULT '0', `order` int(11) NOT NULL DEFAULT '0', `title` varchar(50) COLLATE utf8_unicode_ci NOT NULL, `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, PRIMARY KEY (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci \u4e0a\u9762\u7684\u8868\u683c\u7ed3\u6784\u91cc\u9762\u6709\u4e09\u4e2a\u5fc5\u8981\u7684\u5b57\u6bb5 parent_id \u3001 order \u3001 title ,\u5176\u5b83\u5b57\u6bb5\u6ca1\u6709\u8981\u6c42\u3002 \u5bf9\u5e94\u7684\u6a21\u578b\u4e3a app/Models/Category.php : <?php namespace App\\Models\\Demo; use Dcat\\Admin\\Traits\\ModelTree; use Illuminate\\Database\\Eloquent\\Model; class Category extends Model { use ModelTree; protected $table = 'demo_categories'; } \u8868\u7ed3\u6784\u4e2d\u7684\u4e09\u4e2a\u5b57\u6bb5 parent_id \u3001 order \u3001 title \u7684\u5b57\u6bb5\u540d\u4e5f\u662f\u53ef\u4ee5\u4fee\u6539\u7684\uff1a {tip} \u4e3a\u4e86\u4fbf\u4e8e\u9605\u8bfb\uff0c\u8fd9\u91cc\u4e0d\u518d\u5c55\u793a Repository \u4ee3\u7801\u3002 <?php namespace App\\Models\\Demo; use Dcat\\Admin\\Traits\\ModelTree; use Illuminate\\Database\\Eloquent\\Model; class Category extends Model { use ModelTree; protected $table = 'demo_categories'; // \u7236\u7ea7ID\u5b57\u6bb5\u540d\u79f0\uff0c\u9ed8\u8ba4\u503c\u4e3a parent_id protected $parentColumn = 'pid'; // \u6392\u5e8f\u5b57\u6bb5\u540d\u79f0\uff0c\u9ed8\u8ba4\u503c\u4e3a order protected $orderColumn = 'sort'; // \u6807\u9898\u5b57\u6bb5\u540d\u79f0\uff0c\u9ed8\u8ba4\u503c\u4e3a title protected $titleColumn = 'name'; // Since v2.1.6-beta\uff0c\u5b9a\u4e49depthColumn\u5c5e\u6027\u540e\uff0c\u5c06\u4f1a\u5728\u6570\u636e\u8868\u4fdd\u5b58\u5f53\u524d\u884c\u7684\u5c42\u7ea7 protected $depthColumn = 'depth'; }","title":"\u8868\u7ed3\u6784\u548c\u6a21\u578b"},{"location":"2.x/model-tree/#_3","text":"\u7136\u540e\u5c31\u662f\u5728\u9875\u9762\u4e2d\u4f7f\u7528 model-tree \u4e86\uff1a <?php namespace App\\Admin\\Controllers\\Demo; use App\\Models\\Category; use Dcat\\Admin\\Layout\\Row; use Dcat\\Admin\\Layout\\Content; use Dcat\\Admin\\Tree; use Dcat\\Admin\\Controllers\\AdminController; class CategoryController extends AdminController { public function index(Content $content) { return $content->header('\u6811\u72b6\u6a21\u578b') ->body(function (Row $row) { $tree = new Tree(new Category); $row->column(12, $tree); }); } } \u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u5f0f\u6765\u4fee\u6539\u884c\u6570\u636e\u7684\u663e\u793a\uff1a $tree = new Tree(new Category); $tree->branch(function ($branch) { $src = config('admin.upload.host') . '/' . $branch['logo'] ; $logo = \"<img src='$src' style='max-width:30px;max-height:30px' class='img'/>\"; return \"{$branch['id']} - {$branch['title']} $logo\"; }); \u5728\u56de\u8c03\u51fd\u6570\u4e2d\u8fd4\u56de\u7684\u5b57\u7b26\u4e32\u7c7b\u578b\u6570\u636e\uff0c\u5c31\u662f\u5728\u6811\u72b6\u7ec4\u4ef6\u4e2d\u7684\u6bcf\u4e00\u884c\u7684\u663e\u793a\u5185\u5bb9\uff0c $branch \u53c2\u6570\u662f\u5f53\u524d\u884c\u7684\u6570\u636e\u6570\u7ec4\u3002","title":"\u4f7f\u7528\u65b9\u6cd5"},{"location":"2.x/model-tree/#_4","text":"\u5982\u679c\u8981\u4fee\u6539\u6a21\u578b\u7684\u67e5\u8be2\uff0c\u7528\u4e0b\u9762\u7684\u65b9\u5f0f $tree->query(function ($model) { return $model->where('type', 1); });","title":"\u4fee\u6539\u6a21\u578b\u67e5\u8be2\u6761\u4ef6"},{"location":"2.x/model-tree/#_5","text":"\u9ed8\u8ba4 5 $tree->maxDepth(3);","title":"\u9650\u5236\u6700\u5927\u5c42\u7ea7\u6570"},{"location":"2.x/model-tree/#_6","text":"use Dcat\\Admin\\Tree; $tree->actions(function (Tree\\Actions $actions) { if ($actions->row->id > 5) { $actions->disableDelete(); // \u7981\u7528\u5220\u9664\u6309\u94ae } // \u6dfb\u52a0\u65b0\u7684action $actions->append(...); }); // \u6279\u91cf\u6dfb\u52a0action $tree->actions([ new Action1(), \"<div>...</div>\", ... ]); \u81ea\u5b9a\u4e49\u590d\u6742\u64cd\u4f5c\uff0c\u53c2\u8003 \u6a21\u578b\u6811\u52a8\u4f5c","title":"\u81ea\u5b9a\u4e49\u884c\u64cd\u4f5c"},{"location":"2.x/model-tree/#_7","text":"\u8bf7\u53c2\u8003\u6587\u6863 \u6a21\u578b\u6811\u52a8\u4f5c","title":"\u81ea\u5b9a\u4e49\u5de5\u5177\u680f\u6309\u94ae"},{"location":"2.x/multi-app/","text":"\u591a\u5e94\u7528 (\u591a\u540e\u53f0) \u9ed8\u8ba4\u5b89\u88c5\u540e\u4f7f\u7528\u7684\u662f\u5355\u5e94\u7528\u6a21\u5f0f\uff0c\u5982\u679c\u4f60\u60f3\u5728\u540c\u4e00\u4e2a laravel \u9879\u76ee\u4e2d\u4f7f\u7528\u591a\u5e94\u7528\u6a21\u5f0f\uff0c\u90a3\u4e48\u53ef\u4ee5\u91c7\u7528\u591a\u540e\u53f0\u6a21\u5f0f\uff0c\u6700\u7ec8\u9879\u76ee\u4e2d\u7684\u76ee\u5f55\u7ed3\u6784\u5927\u6982\u5982\u4e0b app \u251c\u2500\u2500Admin \u2502 \u251c\u2500\u2500 Controllers \u2502 \u2502 \u251c\u2500\u2500 ExampleController.php \u2502 \u2502 \u2514\u2500\u2500 HomeController.php \u2502 \u251c\u2500\u2500 Metrics \u2502 \u2502 \u2514\u2500\u2500 ... \u2502 \u251c\u2500\u2500 bootstrap.php \u2502 \u2514\u2500\u2500 routes.php \u2502 \u251c\u2500\u2500Admin2 \u2502 \u2514\u2500\u2500 ... \u2502 \u2502\u2500\u2500Admin3 \u2502 \u2514\u2500\u2500 ... ... \u751f\u6210\u65b0\u5e94\u7528 \u8fd0\u884c\u547d\u4ee4\uff0c\u6b64\u547d\u4ee4\u53ea\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff1a\u5e94\u7528\u540d\u79f0\uff0c\u6ce8\u610f\u8fd9\u91cc\u7684\u5e94\u7528\u540d\u79f0\u8bf7\u4e00\u5b9a\u8981\u4f7f\u7528 \u5927\u9a7c\u5cf0\u98ce\u683c \u547d\u540d php artisan admin:app NewAdmin \u8fd0\u884c\u6210\u529f\u540e\u4f60\u7684\u9879\u76ee\u4e2d\u4f1a\u65b0\u589e\u4e00\u4e2a\u65b0\u7684\u5e94\u7528\u76ee\u5f55 app/NewAdmin \uff0c\u4ee5\u53ca\u65b0\u7684\u914d\u7f6e\u6587\u4ef6 config/new-admin.php app \u2514\u2500\u2500Admin \u251c\u2500\u2500 Controllers \u2502 \u251c\u2500\u2500 ExampleController.php \u2502 \u2514\u2500\u2500 HomeController.php \u251c\u2500\u2500 Metrics \u2502 \u2514\u2500\u2500 ... \u251c\u2500\u2500 bootstrap.php \u2514\u2500\u2500 routes.php config \u2514\u2500\u2500new-admin.php \u542f\u7528 \u65b0\u5e94\u7528\u751f\u6210\u5b8c\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u5f00\u59cb\u542f\u7528\u8fd9\u4e2a\u65b0\u5e94\u7528\u4e86\uff0c\u6253\u5f00\u914d\u7f6e\u6587\u4ef6 config/admin.php \uff0c\u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801 return [ ... 'multi_app' => [ // \u4e0e\u65b0\u5e94\u7528\u7684\u914d\u7f6e\u6587\u4ef6\u540d\u79f0\u4e00\u81f4 // \u8bbe\u7f6e\u4e3atrue\u542f\u7528\uff0cfalse\u5219\u662f\u505c\u7528 'new-admin' => true, ], ]; \u7136\u540e\u5c31\u53ef\u4ee5\u6253\u5f00\u6d4f\u89c8\u5668\u8bbf\u95ee\u8fd9\u4e2a\u65b0\u5e94\u7528\u4e86 http://localhost:8000/new-admin \u3002 \u66f4\u6539\u8def\u7531\u524d\u7f00 \u76ee\u524d\u53ea\u80fd\u901a\u8fc7\u8def\u7531\u524d\u7f00\u533a\u5206\u4e0d\u540c\u5e94\u7528\uff0c\u5982\u679c\u4f60\u60f3\u8981\u66f4\u6539\u5e94\u7528\u7684\u524d\u7f00\uff0c\u53ef\u4ee5\u6253\u5f00\u914d\u7f6e\u6587\u4ef6 new-admin.php \u627e\u5230 route.prefix \u53c2\u6570\u8fdb\u884c\u66f4\u6539\u5373\u53ef \u66f4\u6539\u83dc\u5355 \u5982\u679c\u4f60\u60f3\u8981\u5728\u65b0\u5e94\u7528\u4e2d\u5c55\u793a\u4e0d\u540c\u7684\u83dc\u5355\uff0c\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u65b9\u6cd5 1.\u9996\u5148\u9700\u8981\u521b\u5efa\u65b0\u7684\u83dc\u5355\u8868\u4ee5\u53ca\u5176\u5173\u8054\u8868 CREATE TABLE `new_admin_menu` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `parent_id` int(11) NOT NULL DEFAULT '0', `order` int(11) NOT NULL DEFAULT '0', `title` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL, `icon` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL, `uri` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`) ) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; CREATE TABLE `new_admin_permission_menu` ( `permission_id` int(11) NOT NULL, `menu_id` int(11) NOT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, UNIQUE KEY `admin_permission_menu_permission_id_menu_id_index` (`permission_id`,`menu_id`) USING BTREE ) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; CREATE TABLE `new_admin_role_permissions` ( `role_id` int(11) NOT NULL, `permission_id` int(11) NOT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, UNIQUE KEY `admin_role_permissions_role_id_permission_id_index` (`role_id`,`permission_id`) USING BTREE ) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; 2.\u521b\u5efa\u65b0\u7684\u83dc\u5355\u6a21\u578b\uff0c\u6ce8\u610f\u8fd9\u91cc\u9700\u8981\u7ee7\u627f\u9ed8\u8ba4\u7684\u83dc\u5355\u6a21\u578b\uff01\uff01\uff01 <?php namespace App\\Models; use Dcat\\Admin\\Models\\Menu; class NewMenu extends Menu { protected $table = 'new_admin_menu'; } 3.\u6253\u5f00\u65b0\u5e94\u7528\u7684\u914d\u7f6e\u6587\u4ef6 config/new-admin.php \uff0c\u7136\u540e\u4fee\u6539\u4ee5\u4e0b\u53c2\u6570 return [ ... 'database' => [ ... // \u5199\u5165\u65b0\u7684\u6a21\u578b\u548c\u83dc\u5355\u8868 'menu_table' => 'new_admin_menu', 'menu_model' => App\\Models\\NewMenu::class, ... // \u65b0\u7684\u4e2d\u95f4\u8868 'role_menu_table' => 'new_admin_role_menu', 'permission_menu_table' => 'new_admin_permission_menu', ], ]; \u8fd9\u6837\u65b0\u7684\u5e94\u7528\u5c31\u53ef\u4ee5\u4f7f\u7528\u72ec\u7acb\u7684\u83dc\u5355\u529f\u80fd\u4e86 \u66f4\u6539\u7528\u6237\u548c\u6743\u9650 \u81ea\u5b9a\u4e49\u7528\u6237\u548c\u6743\u9650\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0a\u66f4\u6539\u83dc\u5355\u7684\u65b9\u5f0f\u3002\u53e6\u5916\u5982\u679c\u662f\u81ea\u5b9a\u4e49\u7528\u6237\u7684\u8bdd\uff0c\u8fd8\u9700\u8981\u66f4\u6539\u914d\u7f6e\u6587\u4ef6 config/new-admin.php \u4e2d\u7684\u4ee5\u4e0b\u53c2\u6570 ... 'auth' => [ ... 'guard' => 'new-admin', // \u5fc5\u987b\u662f\u4e00\u4e2a\u65b0\u7684\u540d\u5b57 'guards' => [ 'new-admin' => [ 'driver' => 'session', 'provider' => 'new-admin', // \u5fc5\u987b\u662f\u4e00\u4e2a\u65b0\u7684\u540d\u5b57 ], ], 'providers' => [ 'new-admin' => [ // \u5fc5\u987b\u662f\u4e00\u4e2a\u65b0\u7684\u540d\u5b57 'driver' => 'eloquent', // \u8fd9\u91cc\u6362\u6210\u65b0\u7528\u6237\u8868\u7684\u6a21\u578b 'model' => App\\Models\\NewAdministrator::class, ], ], ... ], \u4f7f\u7528\u4e0d\u540c\u57df\u540d\u533a\u5206\u5e94\u7528 \u9ed8\u8ba4\u662f\u901a\u8fc7\u8def\u7531\u524d\u7f00\u533a\u5206\u5e94\u7528\u7684\uff0c\u5982\u679c\u60f3\u8981\u4f7f\u7528\u57df\u540d\u533a\u5206\u5e94\u7528\uff0c\u53ea\u9700\u8981\u66f4\u6539\u5982\u4e0b\u914d\u7f6e\u5373\u53ef 'route' => [ 'domain' => 'dev.dcat.com', // \u914d\u7f6e\u4f60\u7684\u57df\u540d 'prefix' => '', // \u8def\u7531\u524d\u7f00\u5efa\u8bae\u8bbe\u7f6e\u4e3a\u7a7a 'namespace' => 'App\\\\Admin\\\\Controllers', 'middleware' => ['web', 'admin'], ],","title":"\u591a\u5e94\u7528 (\u591a\u540e\u53f0)"},{"location":"2.x/multi-app/#_1","text":"\u9ed8\u8ba4\u5b89\u88c5\u540e\u4f7f\u7528\u7684\u662f\u5355\u5e94\u7528\u6a21\u5f0f\uff0c\u5982\u679c\u4f60\u60f3\u5728\u540c\u4e00\u4e2a laravel \u9879\u76ee\u4e2d\u4f7f\u7528\u591a\u5e94\u7528\u6a21\u5f0f\uff0c\u90a3\u4e48\u53ef\u4ee5\u91c7\u7528\u591a\u540e\u53f0\u6a21\u5f0f\uff0c\u6700\u7ec8\u9879\u76ee\u4e2d\u7684\u76ee\u5f55\u7ed3\u6784\u5927\u6982\u5982\u4e0b app \u251c\u2500\u2500Admin \u2502 \u251c\u2500\u2500 Controllers \u2502 \u2502 \u251c\u2500\u2500 ExampleController.php \u2502 \u2502 \u2514\u2500\u2500 HomeController.php \u2502 \u251c\u2500\u2500 Metrics \u2502 \u2502 \u2514\u2500\u2500 ... \u2502 \u251c\u2500\u2500 bootstrap.php \u2502 \u2514\u2500\u2500 routes.php \u2502 \u251c\u2500\u2500Admin2 \u2502 \u2514\u2500\u2500 ... \u2502 \u2502\u2500\u2500Admin3 \u2502 \u2514\u2500\u2500 ... ...","title":"\u591a\u5e94\u7528 (\u591a\u540e\u53f0)"},{"location":"2.x/multi-app/#_2","text":"\u8fd0\u884c\u547d\u4ee4\uff0c\u6b64\u547d\u4ee4\u53ea\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff1a\u5e94\u7528\u540d\u79f0\uff0c\u6ce8\u610f\u8fd9\u91cc\u7684\u5e94\u7528\u540d\u79f0\u8bf7\u4e00\u5b9a\u8981\u4f7f\u7528 \u5927\u9a7c\u5cf0\u98ce\u683c \u547d\u540d php artisan admin:app NewAdmin \u8fd0\u884c\u6210\u529f\u540e\u4f60\u7684\u9879\u76ee\u4e2d\u4f1a\u65b0\u589e\u4e00\u4e2a\u65b0\u7684\u5e94\u7528\u76ee\u5f55 app/NewAdmin \uff0c\u4ee5\u53ca\u65b0\u7684\u914d\u7f6e\u6587\u4ef6 config/new-admin.php app \u2514\u2500\u2500Admin \u251c\u2500\u2500 Controllers \u2502 \u251c\u2500\u2500 ExampleController.php \u2502 \u2514\u2500\u2500 HomeController.php \u251c\u2500\u2500 Metrics \u2502 \u2514\u2500\u2500 ... \u251c\u2500\u2500 bootstrap.php \u2514\u2500\u2500 routes.php config \u2514\u2500\u2500new-admin.php","title":"\u751f\u6210\u65b0\u5e94\u7528"},{"location":"2.x/multi-app/#_3","text":"\u65b0\u5e94\u7528\u751f\u6210\u5b8c\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u5f00\u59cb\u542f\u7528\u8fd9\u4e2a\u65b0\u5e94\u7528\u4e86\uff0c\u6253\u5f00\u914d\u7f6e\u6587\u4ef6 config/admin.php \uff0c\u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801 return [ ... 'multi_app' => [ // \u4e0e\u65b0\u5e94\u7528\u7684\u914d\u7f6e\u6587\u4ef6\u540d\u79f0\u4e00\u81f4 // \u8bbe\u7f6e\u4e3atrue\u542f\u7528\uff0cfalse\u5219\u662f\u505c\u7528 'new-admin' => true, ], ]; \u7136\u540e\u5c31\u53ef\u4ee5\u6253\u5f00\u6d4f\u89c8\u5668\u8bbf\u95ee\u8fd9\u4e2a\u65b0\u5e94\u7528\u4e86 http://localhost:8000/new-admin \u3002","title":"\u542f\u7528"},{"location":"2.x/multi-app/#_4","text":"\u76ee\u524d\u53ea\u80fd\u901a\u8fc7\u8def\u7531\u524d\u7f00\u533a\u5206\u4e0d\u540c\u5e94\u7528\uff0c\u5982\u679c\u4f60\u60f3\u8981\u66f4\u6539\u5e94\u7528\u7684\u524d\u7f00\uff0c\u53ef\u4ee5\u6253\u5f00\u914d\u7f6e\u6587\u4ef6 new-admin.php \u627e\u5230 route.prefix \u53c2\u6570\u8fdb\u884c\u66f4\u6539\u5373\u53ef","title":"\u66f4\u6539\u8def\u7531\u524d\u7f00"},{"location":"2.x/multi-app/#_5","text":"\u5982\u679c\u4f60\u60f3\u8981\u5728\u65b0\u5e94\u7528\u4e2d\u5c55\u793a\u4e0d\u540c\u7684\u83dc\u5355\uff0c\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u65b9\u6cd5 1.\u9996\u5148\u9700\u8981\u521b\u5efa\u65b0\u7684\u83dc\u5355\u8868\u4ee5\u53ca\u5176\u5173\u8054\u8868 CREATE TABLE `new_admin_menu` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `parent_id` int(11) NOT NULL DEFAULT '0', `order` int(11) NOT NULL DEFAULT '0', `title` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL, `icon` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL, `uri` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`) ) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; CREATE TABLE `new_admin_permission_menu` ( `permission_id` int(11) NOT NULL, `menu_id` int(11) NOT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, UNIQUE KEY `admin_permission_menu_permission_id_menu_id_index` (`permission_id`,`menu_id`) USING BTREE ) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; CREATE TABLE `new_admin_role_permissions` ( `role_id` int(11) NOT NULL, `permission_id` int(11) NOT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, UNIQUE KEY `admin_role_permissions_role_id_permission_id_index` (`role_id`,`permission_id`) USING BTREE ) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; 2.\u521b\u5efa\u65b0\u7684\u83dc\u5355\u6a21\u578b\uff0c\u6ce8\u610f\u8fd9\u91cc\u9700\u8981\u7ee7\u627f\u9ed8\u8ba4\u7684\u83dc\u5355\u6a21\u578b\uff01\uff01\uff01 <?php namespace App\\Models; use Dcat\\Admin\\Models\\Menu; class NewMenu extends Menu { protected $table = 'new_admin_menu'; } 3.\u6253\u5f00\u65b0\u5e94\u7528\u7684\u914d\u7f6e\u6587\u4ef6 config/new-admin.php \uff0c\u7136\u540e\u4fee\u6539\u4ee5\u4e0b\u53c2\u6570 return [ ... 'database' => [ ... // \u5199\u5165\u65b0\u7684\u6a21\u578b\u548c\u83dc\u5355\u8868 'menu_table' => 'new_admin_menu', 'menu_model' => App\\Models\\NewMenu::class, ... // \u65b0\u7684\u4e2d\u95f4\u8868 'role_menu_table' => 'new_admin_role_menu', 'permission_menu_table' => 'new_admin_permission_menu', ], ]; \u8fd9\u6837\u65b0\u7684\u5e94\u7528\u5c31\u53ef\u4ee5\u4f7f\u7528\u72ec\u7acb\u7684\u83dc\u5355\u529f\u80fd\u4e86","title":"\u66f4\u6539\u83dc\u5355"},{"location":"2.x/multi-app/#_6","text":"\u81ea\u5b9a\u4e49\u7528\u6237\u548c\u6743\u9650\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0a\u66f4\u6539\u83dc\u5355\u7684\u65b9\u5f0f\u3002\u53e6\u5916\u5982\u679c\u662f\u81ea\u5b9a\u4e49\u7528\u6237\u7684\u8bdd\uff0c\u8fd8\u9700\u8981\u66f4\u6539\u914d\u7f6e\u6587\u4ef6 config/new-admin.php \u4e2d\u7684\u4ee5\u4e0b\u53c2\u6570 ... 'auth' => [ ... 'guard' => 'new-admin', // \u5fc5\u987b\u662f\u4e00\u4e2a\u65b0\u7684\u540d\u5b57 'guards' => [ 'new-admin' => [ 'driver' => 'session', 'provider' => 'new-admin', // \u5fc5\u987b\u662f\u4e00\u4e2a\u65b0\u7684\u540d\u5b57 ], ], 'providers' => [ 'new-admin' => [ // \u5fc5\u987b\u662f\u4e00\u4e2a\u65b0\u7684\u540d\u5b57 'driver' => 'eloquent', // \u8fd9\u91cc\u6362\u6210\u65b0\u7528\u6237\u8868\u7684\u6a21\u578b 'model' => App\\Models\\NewAdministrator::class, ], ], ... ],","title":"\u66f4\u6539\u7528\u6237\u548c\u6743\u9650"},{"location":"2.x/multi-app/#_7","text":"\u9ed8\u8ba4\u662f\u901a\u8fc7\u8def\u7531\u524d\u7f00\u533a\u5206\u5e94\u7528\u7684\uff0c\u5982\u679c\u60f3\u8981\u4f7f\u7528\u57df\u540d\u533a\u5206\u5e94\u7528\uff0c\u53ea\u9700\u8981\u66f4\u6539\u5982\u4e0b\u914d\u7f6e\u5373\u53ef 'route' => [ 'domain' => 'dev.dcat.com', // \u914d\u7f6e\u4f60\u7684\u57df\u540d 'prefix' => '', // \u8def\u7531\u524d\u7f00\u5efa\u8bae\u8bbe\u7f6e\u4e3a\u7a7a 'namespace' => 'App\\\\Admin\\\\Controllers', 'middleware' => ['web', 'admin'], ],","title":"\u4f7f\u7528\u4e0d\u540c\u57df\u540d\u533a\u5206\u5e94\u7528"},{"location":"2.x/notice/","text":"\u5f00\u53d1\u524d\u5fc5\u8bfb \u5f00\u53d1\u73af\u5883\u8bf7\u6253\u5f00debug\u6a21\u5f0f Dcat Admin \u63d0\u4f9b\u4e00\u4e9b\u5f00\u53d1\u5de5\u5177\uff08\u5982\u4ee3\u7801\u751f\u6210\u5668\uff09\u9700\u8981\u5728 debug \u6a21\u5f0f\u4e0b\u624d\u80fd\u4f7f\u7528\u3002 \u5efa\u8bae\u5f00\u53d1\u8005\u5728\u5f00\u53d1\u73af\u5883\u6253\u5f00 debug \u6a21\u5f0f\uff0c\u628a .env \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u53c2\u6570 APP_DEBUG \u503c\u8bbe\u7f6e\u4e3a true \u5373\u53ef\u3002 \u6309\u9700\u5f15\u5165JS\u811a\u672c Dcat Admin \u4f7f\u7528 jquery-pjax \u6784\u5efa\u65e0\u5237\u65b0\u9875\u9762\uff08\u5355\u9875\u5e94\u7528\uff09\uff0c\u5e76\u4e14\u652f\u6301 \u6309\u9700\u52a0\u8f7d JS \u811a\u672c\uff0c\u652f\u6301\u5728\u4efb\u610f\u7684\u9875\u9762\u65b9\u6cd5\uff08\u6a21\u677f\u6587\u4ef6\u9664\u5916\uff09\u4e2d\u5f15\u5165 JS \u811a\u672c\uff0c\u6bcf\u4e2a\u9875\u9762\u53ea\u9700\u52a0\u8f7d\u5f53\u524d\u9875\u9762\u6240\u9700\u8981\u4f7f\u7528\u5230\u7684 js \u811a\u672c\u3002 \u793a\u4f8b\uff1a \u5199\u4e00\u4e2a\u81ea\u5b9a\u4e49\u9875\u9762\uff0c\u8fd9\u4e2a\u9875\u9762\u7ec4\u4ef6\u9700\u8981\u5f15\u5165\u4e00\u4e9b\u524d\u7aef\u9759\u6001\u8d44\u6e90\u6587\u4ef6 {tip} Dcat Admin \u6784\u5efa\u7684\u662f\u4e00\u4e2a\u5355\u9875\u5e94\u7528\uff0c\u52a0\u8f7d\u7684 JS \u811a\u672c\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\uff0c\u6240\u4ee5\u521d\u59cb\u5316\u64cd\u4f5c\u4e0d\u80fd\u76f4\u63a5\u653e\u5728 JS \u811a\u672c\u4e2d\uff0c\u5e94\u8be5\u4f7f\u7528 Admin::script \u65b9\u6cd5\u8f7d\u5165\u3002 <?php use Illuminate\\Contracts\\Support\\Renderable; use Dcat\\Admin\\Admin; class Card implements Renderable { public static $js = [ // js\u811a\u672c\u4e0d\u80fd\u76f4\u63a5\u5305\u542b\u521d\u59cb\u5316\u64cd\u4f5c\uff0c\u5426\u5219\u9875\u9762\u5237\u65b0\u540e\u65e0\u6548 'xxx/js/card.min.js', ]; public static $css = [ 'xxx/css/card.min.css', ]; public function script() { return <<<JS console.log('\u6240\u6709JS\u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u4e86'); // \u521d\u59cb\u5316\u64cd\u4f5c $('xxx').card(); JS; } public function render() { // \u5728\u8fd9\u91cc\u53ef\u4ee5\u5f15\u5165\u4f60\u7684js\u6216css\u6587\u4ef6 Admin::js(static::$js); Admin::css(static::$css); // \u9700\u8981\u5728\u9875\u9762\u6267\u884c\u7684JS\u4ee3\u7801\uff0c\u4f8b\u5982\u521d\u59cb\u5316\u4ee3\u7801 // \u901a\u8fc7 Admin::script \u8bbe\u7f6e\u7684JS\u4ee3\u7801\u4f1a\u81ea\u52a8\u5728\u6240\u6709JS\u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u6bd5\u540e\u6267\u884c Admin::script($this->script()); return view('...')->render(); } } \u5728\u63a7\u5236\u5668\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u7ec4\u4ef6 use Dcat\\Admin\\Layout\\Content; use Card; class HomeController { public function index(Content $content) { // \u4f7f\u7528\u4e0a\u9762\u7684Card\u7ec4\u4ef6 // Card\u7ec4\u4ef6\u9700\u8981\u7528\u5230\u7684\u9759\u6001\u6587\u4ef6\u53ea\u4f1a\u5728\u5f53\u524d\u8bf7\u6c42\u52a0\u8f7d // \u5176\u4ed6\u8bf7\u6c42\u4e0d\u4f1a\u52a0\u8f7d return $content->body(new Card()); } } \u5728\u9875\u9762\u4e2d\u6dfb\u52a0JS\u4ee3\u7801 \u7531\u4e8e\u52a0\u5165\u4e86\u9875\u9762\u6309\u9700\u52a0\u8f7d JS \u811a\u672c\u7684\u529f\u80fd\uff0c\u6240\u4ee5\u5728\u672c\u9879\u76ee\u5185\u6dfb\u52a0\u7684 JS \u4ee3\u7801\u90fd\u5fc5\u987b\u4f7f\u7528 Dcat.ready \u65b9\u6cd5\u76d1\u542c JS \u811a\u672c\u52a0\u8f7d\u5b8c\u6bd5\u4e8b\u4ef6\uff0c\u5728\u6b64\u4e8b\u4ef6\u5185\u7684 JS \u4ee3\u7801\u4f1a\u5728\u6240\u6709 JS \u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u6bd5\u540e\u624d\u6267\u884c\u3002 \u4f7f\u7528 Dcat\\Admin\\Admin::script \u65b9\u6cd5\u6dfb\u52a0\u7684\u4ee3\u7801\u4f1a\u81ea\u52a8\u653e\u5728 Dcat.ready \u65b9\u6cd5\u5185\u6267\u884c\u3002 <?php use Dcat\\Admin\\Admin; use Dcat\\Admin\\Layout\\Content; class UserController { public function index(Content $content) { Admin::script( <<<JS (function () { // \u5982\u679c\u6709\u5b9a\u4e49\u5c40\u90e8\u53d8\u91cf\u7684\u9700\u6c42\uff0c\u6700\u597d\u653e\u5728\u533f\u540d\u51fd\u6570\u5185\uff0c\u9632\u6b62\u53d8\u91cf\u6c61\u67d3 var name = 'test'; console.log('\u6240\u6709JS\u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u6bd5\u5566~~', name) })() JS ); return $content->header(...)->body(...); } } \u5982\u679c\u662f\u5728\u6a21\u677f\u6587\u4ef6\u4e2d\u6dfb\u52a0 JS \u4ee3\u7801\uff0c\u5219\u9700\u8981\u628a\u4ee3\u7801\u653e\u5728 Dcat.ready \u5185\u6267\u884c <script> // \u7528 Dcat.ready() \u4ee3\u66ff $() // \u6b64\u65b9\u6cd5\u4f1a\u5728\u6240\u6709 js \u811a\u672c\u52a0\u8f7d\u5b8c\u6210\u540e\u6267\u884c Dcat.ready(function () { // \u5199\u5165\u4f60\u7684 js \u4ee3\u7801 console.log('\u6240\u6709 js \u811a\u672c\u52a0\u8f7d\u5b8c\u6bd5\u5566~~'); }); </script> \u9875\u9762\u5185\u5bb9\u548c\u5e03\u5c40 {tip} \u9875\u9762\u5185\u5bb9\u7684\u5e03\u5c40\u529f\u80fd\u662f Dcat Admin \u7684\u57fa\u77f3\uff0c\u638c\u63e1\u4e86\u8fd9\u4e2a\u529f\u80fd\u7684\u7528\u6cd5\uff0c\u53ef\u4ee5\u975e\u5e38\u8f7b\u677e\u7684\u4f7f\u7528 Dcat Admin \u6784\u5efa\u9875\u9762\u6216\u6269\u5c55\u529f\u80fd\uff0c\u8bf7\u5927\u5bb6\u4e00\u5b9a\u8981\u8ba4\u771f\u9605\u8bfb\u3002 Dcat Admin \u7684\u5e03\u5c40\u53ef\u53c2\u8003\u540e\u53f0\u9996\u9875\u7684\u5e03\u5c40\u6587\u4ef6 app/Admin/Controllers/HomeController.php \u7684 index() \u65b9\u6cd5\u3002 Dcat\\Admin\\Layout\\Content \u7c7b\u7528\u6765\u5b9e\u73b0\u5185\u5bb9\u533a\u7684\u5e03\u5c40\u3002 Content::body($content) \u65b9\u6cd5\u7528\u6765\u6dfb\u52a0\u9875\u9762\u5185\u5bb9\u3002 \u4e00\u4e2a\u7b80\u5355\u7684\u540e\u53f0\u9875\u9762\u4ee3\u7801\u5982\u4e0b\uff1a use Dcat\\Admin\\Layout\\Content; public function index(Content $content) { // \u9009\u586b $content->header('\u586b\u5199\u9875\u9762\u5934\u6807\u9898'); // \u9009\u586b $content->description('\u586b\u5199\u9875\u9762\u63cf\u8ff0\u5c0f\u6807\u9898'); // \u6dfb\u52a0\u9762\u5305\u5c51\u5bfc\u822a $content->breadcrumb( ['text' => '\u9996\u9875', 'url' => '/admin'], ['text' => '\u7528\u6237\u7ba1\u7406', 'url' => '/admin/users'], ['text' => '\u7f16\u8f91\u7528\u6237'] ); // \u586b\u5145\u9875\u9762body\u90e8\u5206\uff0c\u8fd9\u91cc\u53ef\u4ee5\u586b\u5165\u4efb\u4f55\u53ef\u88ab\u6e32\u67d3\u7684\u5bf9\u8c61 return $content->body('hello world'); } \u5176\u4e2d $content->body() \u65b9\u6cd5\u662f $content->row() \u7684\u522b\u540d\u65b9\u6cd5\uff0c\u53ef\u4ee5\u63a5\u53d7\u4efb\u4f55\u53ef\u5b57\u7b26\u4e32\u5316\u7684\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\uff0c\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32\u3001\u6570\u5b57\u3001\u5305\u542b\u4e86 __toString \u65b9\u6cd5\u7684\u5bf9\u8c61\uff0c\u5b9e\u73b0\u4e86 Renderable \u3001 Htmlable \u63a5\u53e3\u7684\u5bf9\u8c61\uff0c\u5305\u62eclaravel\u7684\u89c6\u56fe\u3002 \u5e03\u5c40 dcat-admin \u7684\u5e03\u5c40\u4f7f\u7528bootstrap\u7684\u6805\u683c\u7cfb\u7edf\uff0c\u6bcf\u884c\u7684\u957f\u5ea6\u662f12\uff0c\u4e0b\u9762\u662f\u51e0\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff1a \u6dfb\u52a0\u4e00\u884c\u5185\u5bb9: $content->row('hello') --------------------------------- |hello | | | | | | | | | | | --------------------------------- \u884c\u5185\u6dfb\u52a0\u591a\u5217\uff1a $content->row(function(Row $row) { $row->column(4, 'foo'); $row->column(4, 'bar'); $row->column(4, 'baz'); }); ---------------------------------- |foo |bar |baz | | | | | | | | | | | | | | | | | | | | | ---------------------------------- $content->row(function(Row $row) { $row->column(4, 'foo'); $row->column(8, 'bar'); }); ---------------------------------- |foo |bar | | | | | | | | | | | | | | | | ---------------------------------- \u5217\u4e2d\u6dfb\u52a0\u884c\uff1a $content->row(function (Row $row) { $row->column(4, 'xxx'); $row->column(8, function (Column $column) { $column->row('111'); $column->row('222'); $column->row('333'); }); }); ---------------------------------- |xxx |111 | | |---------------------| | |222 | | |---------------------| | |333 | | | | ---------------------------------- \u5217\u4e2d\u6dfb\u52a0\u884c, \u884c\u5185\u518d\u6dfb\u52a0\u5217\uff1a $content->row(function (Row $row) { $row->column(4, 'xxx'); $row->column(8, function (Column $column) { $column->row('111'); $column->row('222'); $column->row(function(Row $row) { $row->column(6, '444'); $row->column(6, '555'); }); }); }); ---------------------------------- |xxx |111 | | |---------------------| | |222 | | |---------------------| | |444 |555 | | | | | ---------------------------------- \u7b49\u5bbd\u5e03\u5c40 \u5f53\u5217\u5bbd\u5ea6\u8bbe\u7f6e\u4e3a 0 \u65f6\u4f1a\u4f7f\u7528\u7b49\u5bbd\u5e03\u5c40 use Dcat\\Admin\\Layout\\Row; use Dcat\\Admin\\Layout\\Content; return Content::make() ->body(function (Row $row) { $row->column(0, 'foo'); $row->column(0, 'bar'); $row->column(0, 'baz'); }); ---------------------------------- |foo |bar |baz | | | | | | | | | | | | | | | | | | | | | ---------------------------------- no-gutters .row \u4e0a\u5e26\u6709 margin-left: -15px;margin-right: -15px; \u5c5e\u6027\uff0c\u4f60\u53ef\u4ee5\u5728 .row \u4e0a\u4e0a\u5b9a\u4e49 .no-gutters \u5c5e\u6027\uff0c\u4ece\u800c\u6d88\u9664\u8fd9\u4e2a\u5c5e\u6027\uff0c\u4f7f\u9875\u9762\u4e0d\u4f1a\u989d\u5916\u5bbd\u51fa 30px \uff0c\u5373 <div class=\"row no-gutters\"... $content->row(function (Row $row) { // \u542f\u7528 no-gutters $row->noGutters(); $row->column(9, function (Column $column) { $column->row($this->card(['col-md-12', 20], '#4DB6AC')); $column->row(function (Row $row) { // \u542f\u7528 no-gutters $row->noGutters(); $row->column(4, $this->card(['col-md-4', 30], '#80CBC4')); $row->column(4, $this->card(['col-md-4', 30], '#4DB6AC')); $row->column(4, function (Column $column) { $column->row(function (Row $row) { // \u542f\u7528 no-gutters $row->noGutters(); $row->column(6, $this->card(['col-md-6', 30], '#26A69A')); $row->column(6, $this->card(['col-md-6', 30], '#26A69A')); }); }); }); }); }); \u6548\u679c\u5982\u4e0b \u6784\u5efa\u65e0\u83dc\u5355\u680f\u9875\u9762 (full) \u901a\u8fc7\u4ee5\u4e0a\u65b9\u6cd5\u6784\u5efa\u7684\u9875\u9762\u9ed8\u8ba4\u662f\u5e26\u6709\u5de6\u8fb9\u83dc\u5355\u680f\u548c\u9876\u90e8\u5bfc\u822a\u680f\u7684\uff0c \u4f46\u6709\u65f6\u5019\u6211\u4eec\u4f1a\u9700\u8981\u6784\u5efa\u4e00\u4e2a\u6ca1\u6709\u83dc\u5355\u680f\u548c\u9876\u90e8\u5bfc\u822a\u680f\u7684\u5b8c\u6574\u9875\u9762\uff0c\u5982\u767b\u9646\u9875\u9762\uff0c\u6216\u9700\u8981\u5728IFRAME\u4e2d\u52a0\u8f7d\u7684\u9875\u9762\u7b49\u7b49\u3002 \u8fd9\u65f6\u5019\u5c31\u53ef\u4ee5\u7528 Content::full \u8fd9\u4e2a\u65b9\u6cd5\u4e86\uff0c\u8c03\u7528\u4e86\u6b64\u65b9\u6cd5\u540e\u6e32\u67d3\u51fa\u6765\u7684\u9875\u9762\u662f\u4e0d\u5e26\u83dc\u5355\u680f\u548c\u9876\u90e8\u5bfc\u822a\u680f\u7684\uff0c\u5e76\u4e14\u8fd8\u53ef\u4ee5\u4f7f\u7528 Dcat Admin \u4e2d\u7684\u6240\u6709\u7684\u529f\u80fd\u548c\u7ec4\u4ef6\u7684\uff0c\u53ef\u4ee5\u663e\u8457\u5730\u63d0\u9ad8\u6548\u7387\u3002 \u4e0b\u9762\u5c06\u901a\u8fc7\u767b\u5f55\u9875\u7684\u5b9e\u73b0\u6765\u6f14\u793a\u6b64\u529f\u80fd\u7684\u7528\u6cd5 \u63a7\u5236\u5668 use Dcat\\Admin\\Layout\\Content; class AuthController extends Controller { public function getLogin(Content $content) { if ($this->guard()->check()) { return redirect($this->redirectPath()); } // \u4f7f\u7528full\u65b9\u6cd5\u6784\u5efa\u767b\u9646\u9875\u9762 return $content->full()->body(view($this->view)); } ... } \u4e0b\u9762\u662f\u767b\u9646\u529f\u80fd\u7684\u6a21\u677f\u5185\u5bb9\uff0c\u56e0\u4e3a\u63a7\u5236\u5668\u4e2d\u4f7f\u7528\u4e86 Content::full \u65b9\u6cd5\u6784\u5efa\u9875\u9762\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u5728\u6a21\u677f\u4e2d\u5199 head \uff0c\u4e5f\u4e0d\u9700\u8981\u5173\u5fc3\u5f15\u5165\u54ea\u4e9b\u9759\u6001\u8d44\u6e90\uff0c\u53ea\u9700\u5199\u5f53\u524d\u9875\u9762\u7684HTML\u5373\u53ef\uff0c\u5e76\u4e14\u8fd8\u53ef\u4ee5\u4f7f\u7528 Dcat Admin \u4e2d\u7684\u6240\u6709\u529f\u80fd\uff0c\u5982\u4e0b\u9762\u7528\u5230\u7684\u8868\u5355\u63d0\u4ea4\u529f\u80fd\u3002 <style> html body {background: #fff;} </style> <link rel=\"stylesheet\" href=\"{{ admin_asset('@admin/css/pages/authentication.css') }}\"> <section class=\"row flexbox-container\"> <!-- \u8fd9\u91cc\u662f\u4f60\u7684\u767b\u9646\u9875\u9762HTML\u4ee3\u7801 --> ... </section> <script> Dcat.ready(function () { // ajax\u8868\u5355\u63d0\u4ea4 $('#login-form').form({ validate: true, }); }); </script> \u8fd9\u4e2a\u767b\u9646\u9875\u9762\u4f7f\u7528\u4e86 ajax \u8868\u5355\u63d0\u4ea4\u529f\u80fd\uff0c\u5e76\u4e14\u9644\u5e26\u4e86\u6309\u94ae loading \u6548\u679c\uff0c\u6bd4\u539f\u6765\u7684\u767b\u9646\u529f\u80fd\u7528\u6237\u4f53\u9a8c\u66f4\u597d\uff0c\u5927\u5bb6\u53ef\u4ee5 \u70b9\u8fd9\u91cc\u4f53\u9a8c \u3002 \u4e8b\u4ef6 \u7cfb\u7edf\u4f1a\u5728 Dcat\\Admin\\Layout\\Content \u7c7b\u88ab\u5b9e\u4f8b\u5316\u65f6\u548c render() \u65b9\u6cd5\u88ab\u8c03\u7528\u65f6\u89e6\u53d1\u4ee5\u4e0b\u4e24\u4e2a\u4e8b\u4ef6\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u8fd9\u4e24\u4e2a\u4e8b\u4ef6\u4e2d\u6539\u53d8\u6216\u6dfb\u52a0\u4e00\u4e9b\u884c\u4e3a\u3002 \u5b9e\u4f8b\u5316 (resolving) \u901a\u8fc7 Content::resolving \u65b9\u6cd5\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u5728 Dcat\\Admin\\Layout\\Content \u7c7b\u88ab\u5b9e\u4f8b\u5316\u65f6\u89e6\u53d1\uff1b use Dcat\\Admin\\Layout\\Content; Content::resolving(function (Content $content) { $content->view('app.admin.content'); }); \u6784\u5efa\u9875\u9762 (composing) \u901a\u8fc7 Content::composing \u65b9\u6cd5\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u5728 Dcat\\Admin\\Layout\\Content::render \u65b9\u6cd5\u88ab\u8c03\u7528\u65f6\u89e6\u53d1\uff1b use Dcat\\Admin\\Layout\\Content; Content::composing(function (Content $content) { $content->view('app.admin.content'); }); \u6784\u5efa\u5b8c\u6210 (composed) \u901a\u8fc7 Content::composed \u65b9\u6cd5\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u5728\u6240\u6709\u901a\u8fc7 Content::row \u6216 Content::body \u65b9\u6cd5\u8bbe\u7f6e\u7684\u5185\u5bb9\u90fd\u6784\u5efa\u5b8c\u6bd5\u540e\u89e6\u53d1\u3002 use Dcat\\Admin\\Layout\\Content; class IndexController { public function index(Content $content) { Content::composed(function (Content $content) { // Grid\u5df2\u6267\u884crender\u65b9\u6cd5 }); return $content->body(function ($row) { $grid = new Grid(...); ... $row->column(12, $grid); }); } } AdminController \u901a\u8fc7\u4e0a\u9762\u9875\u9762\u5e03\u5c40\u7684\u76f8\u5173\u5185\u5bb9\u7684\u5b66\u4e60\uff0c\u6211\u4eec\u660e\u767d\u4e86 Dcat Admin \u7684\u9875\u9762\u7ec4\u6210\u6784\u5efa\u7684\u65b9\u6cd5\uff0c\u90a3\u4e48\u4e00\u4e2a\u589e\u5220\u6539\u67e5\u529f\u80fd\u7a76\u7adf\u662f\u600e\u4e48\u5b9e\u73b0\u7684\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u4e00\u4e2a\u7531\u4ee3\u7801\u751f\u6210\u5668\u751f\u6210\u7684\u589e\u5220\u6539\u67e5\u63a7\u5236\u5668\u4ee3\u7801\u5927\u6982\u5982\u4e0b\u6240\u793a use App\\Admin\\Repositories\\User; use Dcat\\Admin\\Form; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Show; use Dcat\\Admin\\Http\\Controllers\\AdminController; class UserController extends AdminController { // \u6570\u636e\u8868\u683c protected function grid() { return Grid::make(new User(), function (Grid $grid) { ... }); } // \u6570\u636e\u8be6\u60c5 protected function detail($id) { return Show::make($id, new User(), function (Show $show) { ... }); } // \u8868\u5355 protected function form() { return Form::make(new User(), function (Form $form) { ... }); } } \u4e0a\u9762\u7684\u4ee3\u7801\u4e3b\u8981\u5305\u542b\u4e86 grid \u3001 detail \u548c form \uff0c\u4ece\u8fd9\u4e9b\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u5e76\u6ca1\u6709\u529e\u6cd5\u6539\u53d8\u4e00\u4e2a\u9875\u9762\u7684\u5e03\u5c40\uff0c\u90a3\u8fd9\u4e2a\u9875\u9762\u7a76\u7adf\u662f\u600e\u4e48\u6784\u5efa\u7684\uff1f\u6211\u4eec\u53c8\u5982\u4f55\u66f4\u6539\u9875\u9762\u7684\u5e03\u5c40\uff1f\u6211\u4eec\u4e0d\u59a8\u6253\u5f00 AdminController \u770b\u4e00\u770b <?php namespace Dcat\\Admin\\Controllers; use Dcat\\Admin\\Layout\\Content; use Illuminate\\Routing\\Controller; class AdminController extends Controller { // \u9875\u9762\u6807\u9898 protected $title; // \u9875\u9762\u63cf\u8ff0\u4fe1\u606f protected $description = [ // 'index' => 'Index', // 'show' => 'Show', // 'edit' => 'Edit', // 'create' => 'Create', ]; // \u6307\u5b9a\u8bed\u8a00\u5305\u540d\u79f0\uff0c\u9ed8\u8ba4\u4e0e\u5f53\u524d\u63a7\u5236\u5668\u540d\u79f0\u76f8\u5bf9\u5e94 protected $translation; // \u8fd4\u56de\u9875\u9762\u6807\u9898 protected function title() { return $this->title ?: admin_trans_label(); } // \u8fd4\u56de\u63cf\u8ff0\u4fe1\u606f protected function description() { return $this->description; } // \u5217\u8868\u9875 public function index(Content $content) { return $content ->title($this->title()) ->description($this->description()['index'] ?? trans('admin.list')) ->body($this->grid()); } // \u8be6\u60c5\u9875 public function show($id, Content $content) { return $content ->title($this->title()) ->description($this->description()['show'] ?? trans('admin.show')) ->body($this->detail($id)); } // \u7f16\u8f91\u9875 public function edit($id, Content $content) { return $content ->title($this->title()) ->description($this->description()['edit'] ?? trans('admin.edit')) ->body($this->form()->edit($id)); } // \u65b0\u589e\u9875 public function create(Content $content) { return $content ->title($this->title()) ->description($this->description()['create'] ?? trans('admin.create')) ->body($this->form()); } // \u4fee\u6539\u63a5\u53e3 public function update($id) { return $this->form()->update($id); } // \u65b0\u589e\u63a5\u53e3 public function store() { return $this->form()->store(); } // \u5220\u9664/\u6279\u91cf\u5220\u9664\u63a5\u53e3 public function destroy($id) { return $this->form()->destroy($id); } } \u73b0\u5728\u662f\u4e0d\u662f\u5c31\u53ef\u4ee5\u660e\u767d\u6574\u4e2a\u9875\u9762\u7684\u7ec4\u6210\u90e8\u5206\u4e86\u5462\uff1f\u5176\u5b9e\u7cfb\u7edf\u5185\u5f88\u591a\u4ee3\u7801\u90fd\u662f\u89c1\u540d\u77e5\u610f\u3001\u7b80\u5355\u6613\u61c2\u7684\uff0c\u5f88\u591a\u65f6\u5019\u6211\u4eec\u53ea\u9700\u8981\u901a\u8fc7\u9605\u8bfb\u4ee3\u7801\u5c31\u53ef\u4ee5\u77e5\u9053\u7528\u6cd5\u3002 \u4f8b\u5982\u6211\u4eec\u8981\u66f4\u6539\u9875\u9762\u6807\u9898\uff0c\u901a\u8fc7\u9605\u8bfb\u8fd9\u6bb5\u4ee3\u7801\uff0c\u5c31\u53ef\u4ee5\u5f97\u77e5\u53ef\u4ee5\u901a\u8fc7\u91cd\u5199 title \u65b9\u6cd5\u6216\u66f4\u6539\u7ffb\u8bd1\u6587\u4ef6\u7684\u65b9\u5f0f\u5b9e\u73b0\uff0c\u662f\u4e0d\u662f\u975e\u5e38\u7b80\u5355\uff1f \u4e0b\u9762\u6211\u4eec\u901a\u8fc7\u5b9e\u73b0\u4e00\u4e2a\u6570\u636e\u8868\u683c + \u6570\u636e\u7edf\u8ba1\u5361\u7247\u7684\u5217\u8868\u9875\u9762\uff0c\u6765\u6f14\u793a\u4e00\u4e0b\u66f4\u6539\u9875\u9762\u5e03\u5c40\u7684\u5b9e\u9645\u5e94\u7528 use App\\Admin\\Metrics\\Examples\\NewDevices; use App\\Admin\\Metrics\\Examples\\NewUsers; use App\\Admin\\Metrics\\Examples\\TotalUsers; use Dcat\\Admin\\Layout\\Content; use Dcat\\Admin\\Layout\\Row; public function index(Content $content) { return $content ->title($this->title()) ->description($this->description()['index'] ?? trans('admin.list')) ->body(function (Row $row) { $row->column(4, new TotalUsers()); $row->column(4, new NewUsers()); $row->column(4, new NewDevices()); }) ->body($this->grid()); } \u5b9e\u73b0\u6548\u679c\u5982\u4e0b Bootstrap4\u516c\u5171\u6837\u5f0f Dcat Admin \u91c7\u7528 bootstrap4 \u7684\u6805\u683c\u7cfb\u7edf\u5bf9\u9875\u9762\u8fdb\u884c\u5e03\u5c40\uff0c\u65e2\u7b80\u5355\u53c8\u5f3a\u5927\uff0c\u5f00\u59cb\u5f00\u53d1\u524d\u9700\u8981\u5bf9\u6b64\u6709\u6240\u4e86\u89e3\uff0c\u53e6\u5916 bootsrap4 \u63d0\u4f9b\u4e86\u975e\u5e38\u591a\u975e\u5e38\u6709\u7528\u7684 \u516c\u5171\u6837\u5f0f \uff0c\u5bf9\u7f16\u5199\u9875\u9762\u7ec4\u4ef6\u975e\u5e38\u6709\u5e2e\u52a9\uff0c\u80fd\u663e\u8457\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\uff0c\u5efa\u8bae\u7f16\u5199\u7ec4\u4ef6\u524d\u5148\u67e5\u9605\u4e00\u904d\u6587\u6863\uff0c\u4ee5\u4e0b\u662f\u63a8\u8350\u5b66\u4e60\u7684\u6837\u5f0f\u5217\u8868\uff1a \u6805\u683c\u5e03\u5c40 Display\u663e\u793a\u5c5e\u6027 \u901a\u8fc7\u6211\u4eec\u7684\u663e\u793a\u5b9e\u7528\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u5feb\u901f\u3001\u6709\u6548\u5730\u5207\u6362\u7ec4\u4ef6\u7684\u663e\u793a\u503c\u548c\u66f4\u591a\uff0c\u5305\u62ec\u5bf9\u4e00\u4e9b\u66f4\u5e38\u89c1\u7684\u503c\u7684\u652f\u6301\uff0c\u6b64\u6837\u5f0f\u5217\u8868\u5bf9\u54cd\u5e94\u5f0f\u5e03\u5c40\u975e\u5e38\u6709\u5e2e\u52a9\u3002 flex\u5f39\u6027\u5e03\u5c40 \u5f15\u5165\u65b0\u7684Flex\u5f39\u6027\u5e03\u5c40\uff0c\u53ef\u4ee5\u5b9e\u73b0\u901a\u8fc7\u4e00\u6574\u5957\u54cd\u5e94\u7075\u6d3b\u7684\u5b9e\u7528\u7a0b\u5e8f\uff0c\u5feb\u901f\u7ba1\u7406\u6805\u683c\u7684\u5217\u3001\u5bfc\u822a\u3001\u7ec4\u4ef6\u7b49\u7684\u5e03\u5c40\u3001\u5bf9\u9f50\u548c\u5927\u5c0f\u3002\u901a\u8fc7\u8fdb\u4e00\u5ea6\u7684\u5b9a\u4e49CSS\uff0c\u8fd8\u53ef\u4ee5\u5b9e\u73b0\u66f4\u590d\u6742\u7684\u5c55\u793a\u6837\u5f0f\u3002 \u989c\u8272(Color) \u901a\u8fc7\u989c\u8272\u4f20\u8fbe\u610f\u4e49\u3001\u8868\u8fbe\u4e0d\u540c\u7684\u6a21\u5757\uff0c\u8fd9\u6709\u4e00\u7cfb\u5217\u7684\u5b9a\u4e49\u65b9\u6cd5\uff0c\u5305\u62ec\u652f\u6301\u94fe\u63a5\u3001\u60ac\u505c\u3001\u9009\u4e2d\u7b49\u72b6\u6001\u76f8\u5173\u7684\u7684\u6837\u5f0f\u96c6\u3002 Float\u6d6e\u52a8\u5c5e\u6027 \u4f7f\u7528\u6211\u4eec\u7684\u54cd\u5e94\u5f0ffloat\u6d6e\u52a8\u901a\u7528\u6837\u5f0f\uff0c\u80fd\u5728\u4efb\u4f55\u8bbe\u5907\u65ad\u70b9\uff08\u6d4f\u89c8\u5668\u5c3a\u5bf8\uff09\u4e0a\u5207\u6362\u6d6e\u52a8\u3002 \u89c4\u683c(sizi) \u4f7f\u7528\u7cfb\u7edf\u5bbd\u5ea6\u548c\u9ad8\u5ea6\u6837\u5f0f\uff0c\u8f7b\u677e\u5730\u5b9a\u4e49\u4efb\u4f55\u5143\u7d20\u7684\u5bbd\u6216\u9ad8\uff08\u76f8\u5bf9\u4e8e\u5176\u7236\u7ea7\uff09 \u95f4\u9694(spacing) \u5185\u7f6e\u4e86\u5404\u79cd\u7684\u5feb\u901f\u7f29\u8fdb\u3001\u9694\u79bb\u3001\u586b\u5145\u7b49\u95f4\u8ddd\u5904\u7406\u5de5\u5177\uff0c\u54cd\u5e94\u4f59\u91cf\u548c\u586b\u5145\u5b9e\u7528\u7a0b\u5e8f\u7c7b\u6765\u4fee\u6539\u5143\u7d20\u7684\u5916\u89c2\u3002 \u6587\u672c\u5904\u7406 \u7528\u4e8e\u63a7\u5236\u6587\u672c\u7684\u5bf9\u9f50\u3001\u7ec4\u5408\u3001\u5b57\u91cd\u7b49\u793a\u4f8b\u4ee5\u53ca\u4f7f\u7528\u6587\u6863\u3002 \u5782\u76f4\u5bf9\u9f50(vertical align) \u8f7b\u677e\u66f4\u6539\u5185\u8054\u3001\u5185\u5d4c\u5757\u3001\u5185\u8054\u8868\u548c\u8868\u683c\u5355\u5143\u683c\u5143\u7d20\u7684\u5782\u76f4\u5bf9\u9f50\u65b9\u5f0f\u3002 \u5185\u7f6e\u6837\u5f0f \u9664\u4e86\u524d\u9762\u63d0\u5230\u7684 bootstrap4 \u516c\u5171\u6837\u5f0f \uff0c\u7cfb\u7edf\u8fd8\u5185\u7f6e\u4e86\u4ee5\u4e0b\u5e38\u7528\u6837\u5f0f\uff1a \u989c\u8272 \u8bf7\u53c2\u8003 \u989c\u8272\u8868\u6837\u5f0f \u9634\u5f71 .shadow-item { width:120px;height:100px;line-height:100px;margin:5px 10px;display:inline-block;text-align:center; } .shadow .shadow-100 .shadow-200","title":"\u5f00\u53d1\u524d\u5fc5\u8bfb"},{"location":"2.x/notice/#_1","text":"","title":"\u5f00\u53d1\u524d\u5fc5\u8bfb"},{"location":"2.x/notice/#debug","text":"Dcat Admin \u63d0\u4f9b\u4e00\u4e9b\u5f00\u53d1\u5de5\u5177\uff08\u5982\u4ee3\u7801\u751f\u6210\u5668\uff09\u9700\u8981\u5728 debug \u6a21\u5f0f\u4e0b\u624d\u80fd\u4f7f\u7528\u3002 \u5efa\u8bae\u5f00\u53d1\u8005\u5728\u5f00\u53d1\u73af\u5883\u6253\u5f00 debug \u6a21\u5f0f\uff0c\u628a .env \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u53c2\u6570 APP_DEBUG \u503c\u8bbe\u7f6e\u4e3a true \u5373\u53ef\u3002","title":"\u5f00\u53d1\u73af\u5883\u8bf7\u6253\u5f00debug\u6a21\u5f0f"},{"location":"2.x/notice/#js","text":"Dcat Admin \u4f7f\u7528 jquery-pjax \u6784\u5efa\u65e0\u5237\u65b0\u9875\u9762\uff08\u5355\u9875\u5e94\u7528\uff09\uff0c\u5e76\u4e14\u652f\u6301 \u6309\u9700\u52a0\u8f7d JS \u811a\u672c\uff0c\u652f\u6301\u5728\u4efb\u610f\u7684\u9875\u9762\u65b9\u6cd5\uff08\u6a21\u677f\u6587\u4ef6\u9664\u5916\uff09\u4e2d\u5f15\u5165 JS \u811a\u672c\uff0c\u6bcf\u4e2a\u9875\u9762\u53ea\u9700\u52a0\u8f7d\u5f53\u524d\u9875\u9762\u6240\u9700\u8981\u4f7f\u7528\u5230\u7684 js \u811a\u672c\u3002 \u793a\u4f8b\uff1a \u5199\u4e00\u4e2a\u81ea\u5b9a\u4e49\u9875\u9762\uff0c\u8fd9\u4e2a\u9875\u9762\u7ec4\u4ef6\u9700\u8981\u5f15\u5165\u4e00\u4e9b\u524d\u7aef\u9759\u6001\u8d44\u6e90\u6587\u4ef6 {tip} Dcat Admin \u6784\u5efa\u7684\u662f\u4e00\u4e2a\u5355\u9875\u5e94\u7528\uff0c\u52a0\u8f7d\u7684 JS \u811a\u672c\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\uff0c\u6240\u4ee5\u521d\u59cb\u5316\u64cd\u4f5c\u4e0d\u80fd\u76f4\u63a5\u653e\u5728 JS \u811a\u672c\u4e2d\uff0c\u5e94\u8be5\u4f7f\u7528 Admin::script \u65b9\u6cd5\u8f7d\u5165\u3002 <?php use Illuminate\\Contracts\\Support\\Renderable; use Dcat\\Admin\\Admin; class Card implements Renderable { public static $js = [ // js\u811a\u672c\u4e0d\u80fd\u76f4\u63a5\u5305\u542b\u521d\u59cb\u5316\u64cd\u4f5c\uff0c\u5426\u5219\u9875\u9762\u5237\u65b0\u540e\u65e0\u6548 'xxx/js/card.min.js', ]; public static $css = [ 'xxx/css/card.min.css', ]; public function script() { return <<<JS console.log('\u6240\u6709JS\u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u4e86'); // \u521d\u59cb\u5316\u64cd\u4f5c $('xxx').card(); JS; } public function render() { // \u5728\u8fd9\u91cc\u53ef\u4ee5\u5f15\u5165\u4f60\u7684js\u6216css\u6587\u4ef6 Admin::js(static::$js); Admin::css(static::$css); // \u9700\u8981\u5728\u9875\u9762\u6267\u884c\u7684JS\u4ee3\u7801\uff0c\u4f8b\u5982\u521d\u59cb\u5316\u4ee3\u7801 // \u901a\u8fc7 Admin::script \u8bbe\u7f6e\u7684JS\u4ee3\u7801\u4f1a\u81ea\u52a8\u5728\u6240\u6709JS\u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u6bd5\u540e\u6267\u884c Admin::script($this->script()); return view('...')->render(); } } \u5728\u63a7\u5236\u5668\u4e2d\u4f7f\u7528\u8fd9\u4e2a\u7ec4\u4ef6 use Dcat\\Admin\\Layout\\Content; use Card; class HomeController { public function index(Content $content) { // \u4f7f\u7528\u4e0a\u9762\u7684Card\u7ec4\u4ef6 // Card\u7ec4\u4ef6\u9700\u8981\u7528\u5230\u7684\u9759\u6001\u6587\u4ef6\u53ea\u4f1a\u5728\u5f53\u524d\u8bf7\u6c42\u52a0\u8f7d // \u5176\u4ed6\u8bf7\u6c42\u4e0d\u4f1a\u52a0\u8f7d return $content->body(new Card()); } }","title":"\u6309\u9700\u5f15\u5165JS\u811a\u672c"},{"location":"2.x/notice/#js_1","text":"\u7531\u4e8e\u52a0\u5165\u4e86\u9875\u9762\u6309\u9700\u52a0\u8f7d JS \u811a\u672c\u7684\u529f\u80fd\uff0c\u6240\u4ee5\u5728\u672c\u9879\u76ee\u5185\u6dfb\u52a0\u7684 JS \u4ee3\u7801\u90fd\u5fc5\u987b\u4f7f\u7528 Dcat.ready \u65b9\u6cd5\u76d1\u542c JS \u811a\u672c\u52a0\u8f7d\u5b8c\u6bd5\u4e8b\u4ef6\uff0c\u5728\u6b64\u4e8b\u4ef6\u5185\u7684 JS \u4ee3\u7801\u4f1a\u5728\u6240\u6709 JS \u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u6bd5\u540e\u624d\u6267\u884c\u3002 \u4f7f\u7528 Dcat\\Admin\\Admin::script \u65b9\u6cd5\u6dfb\u52a0\u7684\u4ee3\u7801\u4f1a\u81ea\u52a8\u653e\u5728 Dcat.ready \u65b9\u6cd5\u5185\u6267\u884c\u3002 <?php use Dcat\\Admin\\Admin; use Dcat\\Admin\\Layout\\Content; class UserController { public function index(Content $content) { Admin::script( <<<JS (function () { // \u5982\u679c\u6709\u5b9a\u4e49\u5c40\u90e8\u53d8\u91cf\u7684\u9700\u6c42\uff0c\u6700\u597d\u653e\u5728\u533f\u540d\u51fd\u6570\u5185\uff0c\u9632\u6b62\u53d8\u91cf\u6c61\u67d3 var name = 'test'; console.log('\u6240\u6709JS\u811a\u672c\u90fd\u52a0\u8f7d\u5b8c\u6bd5\u5566~~', name) })() JS ); return $content->header(...)->body(...); } } \u5982\u679c\u662f\u5728\u6a21\u677f\u6587\u4ef6\u4e2d\u6dfb\u52a0 JS \u4ee3\u7801\uff0c\u5219\u9700\u8981\u628a\u4ee3\u7801\u653e\u5728 Dcat.ready \u5185\u6267\u884c <script> // \u7528 Dcat.ready() \u4ee3\u66ff $() // \u6b64\u65b9\u6cd5\u4f1a\u5728\u6240\u6709 js \u811a\u672c\u52a0\u8f7d\u5b8c\u6210\u540e\u6267\u884c Dcat.ready(function () { // \u5199\u5165\u4f60\u7684 js \u4ee3\u7801 console.log('\u6240\u6709 js \u811a\u672c\u52a0\u8f7d\u5b8c\u6bd5\u5566~~'); }); </script>","title":"\u5728\u9875\u9762\u4e2d\u6dfb\u52a0JS\u4ee3\u7801"},{"location":"2.x/notice/#_2","text":"{tip} \u9875\u9762\u5185\u5bb9\u7684\u5e03\u5c40\u529f\u80fd\u662f Dcat Admin \u7684\u57fa\u77f3\uff0c\u638c\u63e1\u4e86\u8fd9\u4e2a\u529f\u80fd\u7684\u7528\u6cd5\uff0c\u53ef\u4ee5\u975e\u5e38\u8f7b\u677e\u7684\u4f7f\u7528 Dcat Admin \u6784\u5efa\u9875\u9762\u6216\u6269\u5c55\u529f\u80fd\uff0c\u8bf7\u5927\u5bb6\u4e00\u5b9a\u8981\u8ba4\u771f\u9605\u8bfb\u3002 Dcat Admin \u7684\u5e03\u5c40\u53ef\u53c2\u8003\u540e\u53f0\u9996\u9875\u7684\u5e03\u5c40\u6587\u4ef6 app/Admin/Controllers/HomeController.php \u7684 index() \u65b9\u6cd5\u3002 Dcat\\Admin\\Layout\\Content \u7c7b\u7528\u6765\u5b9e\u73b0\u5185\u5bb9\u533a\u7684\u5e03\u5c40\u3002 Content::body($content) \u65b9\u6cd5\u7528\u6765\u6dfb\u52a0\u9875\u9762\u5185\u5bb9\u3002 \u4e00\u4e2a\u7b80\u5355\u7684\u540e\u53f0\u9875\u9762\u4ee3\u7801\u5982\u4e0b\uff1a use Dcat\\Admin\\Layout\\Content; public function index(Content $content) { // \u9009\u586b $content->header('\u586b\u5199\u9875\u9762\u5934\u6807\u9898'); // \u9009\u586b $content->description('\u586b\u5199\u9875\u9762\u63cf\u8ff0\u5c0f\u6807\u9898'); // \u6dfb\u52a0\u9762\u5305\u5c51\u5bfc\u822a $content->breadcrumb( ['text' => '\u9996\u9875', 'url' => '/admin'], ['text' => '\u7528\u6237\u7ba1\u7406', 'url' => '/admin/users'], ['text' => '\u7f16\u8f91\u7528\u6237'] ); // \u586b\u5145\u9875\u9762body\u90e8\u5206\uff0c\u8fd9\u91cc\u53ef\u4ee5\u586b\u5165\u4efb\u4f55\u53ef\u88ab\u6e32\u67d3\u7684\u5bf9\u8c61 return $content->body('hello world'); } \u5176\u4e2d $content->body() \u65b9\u6cd5\u662f $content->row() \u7684\u522b\u540d\u65b9\u6cd5\uff0c\u53ef\u4ee5\u63a5\u53d7\u4efb\u4f55\u53ef\u5b57\u7b26\u4e32\u5316\u7684\u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\uff0c\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32\u3001\u6570\u5b57\u3001\u5305\u542b\u4e86 __toString \u65b9\u6cd5\u7684\u5bf9\u8c61\uff0c\u5b9e\u73b0\u4e86 Renderable \u3001 Htmlable \u63a5\u53e3\u7684\u5bf9\u8c61\uff0c\u5305\u62eclaravel\u7684\u89c6\u56fe\u3002","title":"\u9875\u9762\u5185\u5bb9\u548c\u5e03\u5c40"},{"location":"2.x/notice/#_3","text":"dcat-admin \u7684\u5e03\u5c40\u4f7f\u7528bootstrap\u7684\u6805\u683c\u7cfb\u7edf\uff0c\u6bcf\u884c\u7684\u957f\u5ea6\u662f12\uff0c\u4e0b\u9762\u662f\u51e0\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff1a \u6dfb\u52a0\u4e00\u884c\u5185\u5bb9: $content->row('hello') --------------------------------- |hello | | | | | | | | | | | --------------------------------- \u884c\u5185\u6dfb\u52a0\u591a\u5217\uff1a $content->row(function(Row $row) { $row->column(4, 'foo'); $row->column(4, 'bar'); $row->column(4, 'baz'); }); ---------------------------------- |foo |bar |baz | | | | | | | | | | | | | | | | | | | | | ---------------------------------- $content->row(function(Row $row) { $row->column(4, 'foo'); $row->column(8, 'bar'); }); ---------------------------------- |foo |bar | | | | | | | | | | | | | | | | ---------------------------------- \u5217\u4e2d\u6dfb\u52a0\u884c\uff1a $content->row(function (Row $row) { $row->column(4, 'xxx'); $row->column(8, function (Column $column) { $column->row('111'); $column->row('222'); $column->row('333'); }); }); ---------------------------------- |xxx |111 | | |---------------------| | |222 | | |---------------------| | |333 | | | | ---------------------------------- \u5217\u4e2d\u6dfb\u52a0\u884c, \u884c\u5185\u518d\u6dfb\u52a0\u5217\uff1a $content->row(function (Row $row) { $row->column(4, 'xxx'); $row->column(8, function (Column $column) { $column->row('111'); $column->row('222'); $column->row(function(Row $row) { $row->column(6, '444'); $row->column(6, '555'); }); }); }); ---------------------------------- |xxx |111 | | |---------------------| | |222 | | |---------------------| | |444 |555 | | | | | ----------------------------------","title":"\u5e03\u5c40"},{"location":"2.x/notice/#_4","text":"\u5f53\u5217\u5bbd\u5ea6\u8bbe\u7f6e\u4e3a 0 \u65f6\u4f1a\u4f7f\u7528\u7b49\u5bbd\u5e03\u5c40 use Dcat\\Admin\\Layout\\Row; use Dcat\\Admin\\Layout\\Content; return Content::make() ->body(function (Row $row) { $row->column(0, 'foo'); $row->column(0, 'bar'); $row->column(0, 'baz'); }); ---------------------------------- |foo |bar |baz | | | | | | | | | | | | | | | | | | | | | ----------------------------------","title":"\u7b49\u5bbd\u5e03\u5c40"},{"location":"2.x/notice/#no-gutters","text":".row \u4e0a\u5e26\u6709 margin-left: -15px;margin-right: -15px; \u5c5e\u6027\uff0c\u4f60\u53ef\u4ee5\u5728 .row \u4e0a\u4e0a\u5b9a\u4e49 .no-gutters \u5c5e\u6027\uff0c\u4ece\u800c\u6d88\u9664\u8fd9\u4e2a\u5c5e\u6027\uff0c\u4f7f\u9875\u9762\u4e0d\u4f1a\u989d\u5916\u5bbd\u51fa 30px \uff0c\u5373 <div class=\"row no-gutters\"... $content->row(function (Row $row) { // \u542f\u7528 no-gutters $row->noGutters(); $row->column(9, function (Column $column) { $column->row($this->card(['col-md-12', 20], '#4DB6AC')); $column->row(function (Row $row) { // \u542f\u7528 no-gutters $row->noGutters(); $row->column(4, $this->card(['col-md-4', 30], '#80CBC4')); $row->column(4, $this->card(['col-md-4', 30], '#4DB6AC')); $row->column(4, function (Column $column) { $column->row(function (Row $row) { // \u542f\u7528 no-gutters $row->noGutters(); $row->column(6, $this->card(['col-md-6', 30], '#26A69A')); $row->column(6, $this->card(['col-md-6', 30], '#26A69A')); }); }); }); }); }); \u6548\u679c\u5982\u4e0b","title":"no-gutters"},{"location":"2.x/notice/#full","text":"\u901a\u8fc7\u4ee5\u4e0a\u65b9\u6cd5\u6784\u5efa\u7684\u9875\u9762\u9ed8\u8ba4\u662f\u5e26\u6709\u5de6\u8fb9\u83dc\u5355\u680f\u548c\u9876\u90e8\u5bfc\u822a\u680f\u7684\uff0c \u4f46\u6709\u65f6\u5019\u6211\u4eec\u4f1a\u9700\u8981\u6784\u5efa\u4e00\u4e2a\u6ca1\u6709\u83dc\u5355\u680f\u548c\u9876\u90e8\u5bfc\u822a\u680f\u7684\u5b8c\u6574\u9875\u9762\uff0c\u5982\u767b\u9646\u9875\u9762\uff0c\u6216\u9700\u8981\u5728IFRAME\u4e2d\u52a0\u8f7d\u7684\u9875\u9762\u7b49\u7b49\u3002 \u8fd9\u65f6\u5019\u5c31\u53ef\u4ee5\u7528 Content::full \u8fd9\u4e2a\u65b9\u6cd5\u4e86\uff0c\u8c03\u7528\u4e86\u6b64\u65b9\u6cd5\u540e\u6e32\u67d3\u51fa\u6765\u7684\u9875\u9762\u662f\u4e0d\u5e26\u83dc\u5355\u680f\u548c\u9876\u90e8\u5bfc\u822a\u680f\u7684\uff0c\u5e76\u4e14\u8fd8\u53ef\u4ee5\u4f7f\u7528 Dcat Admin \u4e2d\u7684\u6240\u6709\u7684\u529f\u80fd\u548c\u7ec4\u4ef6\u7684\uff0c\u53ef\u4ee5\u663e\u8457\u5730\u63d0\u9ad8\u6548\u7387\u3002 \u4e0b\u9762\u5c06\u901a\u8fc7\u767b\u5f55\u9875\u7684\u5b9e\u73b0\u6765\u6f14\u793a\u6b64\u529f\u80fd\u7684\u7528\u6cd5 \u63a7\u5236\u5668 use Dcat\\Admin\\Layout\\Content; class AuthController extends Controller { public function getLogin(Content $content) { if ($this->guard()->check()) { return redirect($this->redirectPath()); } // \u4f7f\u7528full\u65b9\u6cd5\u6784\u5efa\u767b\u9646\u9875\u9762 return $content->full()->body(view($this->view)); } ... } \u4e0b\u9762\u662f\u767b\u9646\u529f\u80fd\u7684\u6a21\u677f\u5185\u5bb9\uff0c\u56e0\u4e3a\u63a7\u5236\u5668\u4e2d\u4f7f\u7528\u4e86 Content::full \u65b9\u6cd5\u6784\u5efa\u9875\u9762\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u5728\u6a21\u677f\u4e2d\u5199 head \uff0c\u4e5f\u4e0d\u9700\u8981\u5173\u5fc3\u5f15\u5165\u54ea\u4e9b\u9759\u6001\u8d44\u6e90\uff0c\u53ea\u9700\u5199\u5f53\u524d\u9875\u9762\u7684HTML\u5373\u53ef\uff0c\u5e76\u4e14\u8fd8\u53ef\u4ee5\u4f7f\u7528 Dcat Admin \u4e2d\u7684\u6240\u6709\u529f\u80fd\uff0c\u5982\u4e0b\u9762\u7528\u5230\u7684\u8868\u5355\u63d0\u4ea4\u529f\u80fd\u3002 <style> html body {background: #fff;} </style> <link rel=\"stylesheet\" href=\"{{ admin_asset('@admin/css/pages/authentication.css') }}\"> <section class=\"row flexbox-container\"> <!-- \u8fd9\u91cc\u662f\u4f60\u7684\u767b\u9646\u9875\u9762HTML\u4ee3\u7801 --> ... </section> <script> Dcat.ready(function () { // ajax\u8868\u5355\u63d0\u4ea4 $('#login-form').form({ validate: true, }); }); </script> \u8fd9\u4e2a\u767b\u9646\u9875\u9762\u4f7f\u7528\u4e86 ajax \u8868\u5355\u63d0\u4ea4\u529f\u80fd\uff0c\u5e76\u4e14\u9644\u5e26\u4e86\u6309\u94ae loading \u6548\u679c\uff0c\u6bd4\u539f\u6765\u7684\u767b\u9646\u529f\u80fd\u7528\u6237\u4f53\u9a8c\u66f4\u597d\uff0c\u5927\u5bb6\u53ef\u4ee5 \u70b9\u8fd9\u91cc\u4f53\u9a8c \u3002","title":"\u6784\u5efa\u65e0\u83dc\u5355\u680f\u9875\u9762 (full)"},{"location":"2.x/notice/#_5","text":"\u7cfb\u7edf\u4f1a\u5728 Dcat\\Admin\\Layout\\Content \u7c7b\u88ab\u5b9e\u4f8b\u5316\u65f6\u548c render() \u65b9\u6cd5\u88ab\u8c03\u7528\u65f6\u89e6\u53d1\u4ee5\u4e0b\u4e24\u4e2a\u4e8b\u4ef6\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u8fd9\u4e24\u4e2a\u4e8b\u4ef6\u4e2d\u6539\u53d8\u6216\u6dfb\u52a0\u4e00\u4e9b\u884c\u4e3a\u3002","title":"\u4e8b\u4ef6"},{"location":"2.x/notice/#resolving","text":"\u901a\u8fc7 Content::resolving \u65b9\u6cd5\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u5728 Dcat\\Admin\\Layout\\Content \u7c7b\u88ab\u5b9e\u4f8b\u5316\u65f6\u89e6\u53d1\uff1b use Dcat\\Admin\\Layout\\Content; Content::resolving(function (Content $content) { $content->view('app.admin.content'); });","title":"\u5b9e\u4f8b\u5316 (resolving)"},{"location":"2.x/notice/#composing","text":"\u901a\u8fc7 Content::composing \u65b9\u6cd5\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u5728 Dcat\\Admin\\Layout\\Content::render \u65b9\u6cd5\u88ab\u8c03\u7528\u65f6\u89e6\u53d1\uff1b use Dcat\\Admin\\Layout\\Content; Content::composing(function (Content $content) { $content->view('app.admin.content'); });","title":"\u6784\u5efa\u9875\u9762 (composing)"},{"location":"2.x/notice/#composed","text":"\u901a\u8fc7 Content::composed \u65b9\u6cd5\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u5728\u6240\u6709\u901a\u8fc7 Content::row \u6216 Content::body \u65b9\u6cd5\u8bbe\u7f6e\u7684\u5185\u5bb9\u90fd\u6784\u5efa\u5b8c\u6bd5\u540e\u89e6\u53d1\u3002 use Dcat\\Admin\\Layout\\Content; class IndexController { public function index(Content $content) { Content::composed(function (Content $content) { // Grid\u5df2\u6267\u884crender\u65b9\u6cd5 }); return $content->body(function ($row) { $grid = new Grid(...); ... $row->column(12, $grid); }); } }","title":"\u6784\u5efa\u5b8c\u6210 (composed)"},{"location":"2.x/notice/#admincontroller","text":"\u901a\u8fc7\u4e0a\u9762\u9875\u9762\u5e03\u5c40\u7684\u76f8\u5173\u5185\u5bb9\u7684\u5b66\u4e60\uff0c\u6211\u4eec\u660e\u767d\u4e86 Dcat Admin \u7684\u9875\u9762\u7ec4\u6210\u6784\u5efa\u7684\u65b9\u6cd5\uff0c\u90a3\u4e48\u4e00\u4e2a\u589e\u5220\u6539\u67e5\u529f\u80fd\u7a76\u7adf\u662f\u600e\u4e48\u5b9e\u73b0\u7684\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u4e00\u4e2a\u7531\u4ee3\u7801\u751f\u6210\u5668\u751f\u6210\u7684\u589e\u5220\u6539\u67e5\u63a7\u5236\u5668\u4ee3\u7801\u5927\u6982\u5982\u4e0b\u6240\u793a use App\\Admin\\Repositories\\User; use Dcat\\Admin\\Form; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Show; use Dcat\\Admin\\Http\\Controllers\\AdminController; class UserController extends AdminController { // \u6570\u636e\u8868\u683c protected function grid() { return Grid::make(new User(), function (Grid $grid) { ... }); } // \u6570\u636e\u8be6\u60c5 protected function detail($id) { return Show::make($id, new User(), function (Show $show) { ... }); } // \u8868\u5355 protected function form() { return Form::make(new User(), function (Form $form) { ... }); } } \u4e0a\u9762\u7684\u4ee3\u7801\u4e3b\u8981\u5305\u542b\u4e86 grid \u3001 detail \u548c form \uff0c\u4ece\u8fd9\u4e9b\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u5e76\u6ca1\u6709\u529e\u6cd5\u6539\u53d8\u4e00\u4e2a\u9875\u9762\u7684\u5e03\u5c40\uff0c\u90a3\u8fd9\u4e2a\u9875\u9762\u7a76\u7adf\u662f\u600e\u4e48\u6784\u5efa\u7684\uff1f\u6211\u4eec\u53c8\u5982\u4f55\u66f4\u6539\u9875\u9762\u7684\u5e03\u5c40\uff1f\u6211\u4eec\u4e0d\u59a8\u6253\u5f00 AdminController \u770b\u4e00\u770b <?php namespace Dcat\\Admin\\Controllers; use Dcat\\Admin\\Layout\\Content; use Illuminate\\Routing\\Controller; class AdminController extends Controller { // \u9875\u9762\u6807\u9898 protected $title; // \u9875\u9762\u63cf\u8ff0\u4fe1\u606f protected $description = [ // 'index' => 'Index', // 'show' => 'Show', // 'edit' => 'Edit', // 'create' => 'Create', ]; // \u6307\u5b9a\u8bed\u8a00\u5305\u540d\u79f0\uff0c\u9ed8\u8ba4\u4e0e\u5f53\u524d\u63a7\u5236\u5668\u540d\u79f0\u76f8\u5bf9\u5e94 protected $translation; // \u8fd4\u56de\u9875\u9762\u6807\u9898 protected function title() { return $this->title ?: admin_trans_label(); } // \u8fd4\u56de\u63cf\u8ff0\u4fe1\u606f protected function description() { return $this->description; } // \u5217\u8868\u9875 public function index(Content $content) { return $content ->title($this->title()) ->description($this->description()['index'] ?? trans('admin.list')) ->body($this->grid()); } // \u8be6\u60c5\u9875 public function show($id, Content $content) { return $content ->title($this->title()) ->description($this->description()['show'] ?? trans('admin.show')) ->body($this->detail($id)); } // \u7f16\u8f91\u9875 public function edit($id, Content $content) { return $content ->title($this->title()) ->description($this->description()['edit'] ?? trans('admin.edit')) ->body($this->form()->edit($id)); } // \u65b0\u589e\u9875 public function create(Content $content) { return $content ->title($this->title()) ->description($this->description()['create'] ?? trans('admin.create')) ->body($this->form()); } // \u4fee\u6539\u63a5\u53e3 public function update($id) { return $this->form()->update($id); } // \u65b0\u589e\u63a5\u53e3 public function store() { return $this->form()->store(); } // \u5220\u9664/\u6279\u91cf\u5220\u9664\u63a5\u53e3 public function destroy($id) { return $this->form()->destroy($id); } } \u73b0\u5728\u662f\u4e0d\u662f\u5c31\u53ef\u4ee5\u660e\u767d\u6574\u4e2a\u9875\u9762\u7684\u7ec4\u6210\u90e8\u5206\u4e86\u5462\uff1f\u5176\u5b9e\u7cfb\u7edf\u5185\u5f88\u591a\u4ee3\u7801\u90fd\u662f\u89c1\u540d\u77e5\u610f\u3001\u7b80\u5355\u6613\u61c2\u7684\uff0c\u5f88\u591a\u65f6\u5019\u6211\u4eec\u53ea\u9700\u8981\u901a\u8fc7\u9605\u8bfb\u4ee3\u7801\u5c31\u53ef\u4ee5\u77e5\u9053\u7528\u6cd5\u3002 \u4f8b\u5982\u6211\u4eec\u8981\u66f4\u6539\u9875\u9762\u6807\u9898\uff0c\u901a\u8fc7\u9605\u8bfb\u8fd9\u6bb5\u4ee3\u7801\uff0c\u5c31\u53ef\u4ee5\u5f97\u77e5\u53ef\u4ee5\u901a\u8fc7\u91cd\u5199 title \u65b9\u6cd5\u6216\u66f4\u6539\u7ffb\u8bd1\u6587\u4ef6\u7684\u65b9\u5f0f\u5b9e\u73b0\uff0c\u662f\u4e0d\u662f\u975e\u5e38\u7b80\u5355\uff1f \u4e0b\u9762\u6211\u4eec\u901a\u8fc7\u5b9e\u73b0\u4e00\u4e2a\u6570\u636e\u8868\u683c + \u6570\u636e\u7edf\u8ba1\u5361\u7247\u7684\u5217\u8868\u9875\u9762\uff0c\u6765\u6f14\u793a\u4e00\u4e0b\u66f4\u6539\u9875\u9762\u5e03\u5c40\u7684\u5b9e\u9645\u5e94\u7528 use App\\Admin\\Metrics\\Examples\\NewDevices; use App\\Admin\\Metrics\\Examples\\NewUsers; use App\\Admin\\Metrics\\Examples\\TotalUsers; use Dcat\\Admin\\Layout\\Content; use Dcat\\Admin\\Layout\\Row; public function index(Content $content) { return $content ->title($this->title()) ->description($this->description()['index'] ?? trans('admin.list')) ->body(function (Row $row) { $row->column(4, new TotalUsers()); $row->column(4, new NewUsers()); $row->column(4, new NewDevices()); }) ->body($this->grid()); } \u5b9e\u73b0\u6548\u679c\u5982\u4e0b","title":"AdminController"},{"location":"2.x/notice/#bootstrap4","text":"Dcat Admin \u91c7\u7528 bootstrap4 \u7684\u6805\u683c\u7cfb\u7edf\u5bf9\u9875\u9762\u8fdb\u884c\u5e03\u5c40\uff0c\u65e2\u7b80\u5355\u53c8\u5f3a\u5927\uff0c\u5f00\u59cb\u5f00\u53d1\u524d\u9700\u8981\u5bf9\u6b64\u6709\u6240\u4e86\u89e3\uff0c\u53e6\u5916 bootsrap4 \u63d0\u4f9b\u4e86\u975e\u5e38\u591a\u975e\u5e38\u6709\u7528\u7684 \u516c\u5171\u6837\u5f0f \uff0c\u5bf9\u7f16\u5199\u9875\u9762\u7ec4\u4ef6\u975e\u5e38\u6709\u5e2e\u52a9\uff0c\u80fd\u663e\u8457\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\uff0c\u5efa\u8bae\u7f16\u5199\u7ec4\u4ef6\u524d\u5148\u67e5\u9605\u4e00\u904d\u6587\u6863\uff0c\u4ee5\u4e0b\u662f\u63a8\u8350\u5b66\u4e60\u7684\u6837\u5f0f\u5217\u8868\uff1a \u6805\u683c\u5e03\u5c40 Display\u663e\u793a\u5c5e\u6027 \u901a\u8fc7\u6211\u4eec\u7684\u663e\u793a\u5b9e\u7528\u7a0b\u5e8f\uff0c\u53ef\u4ee5\u5feb\u901f\u3001\u6709\u6548\u5730\u5207\u6362\u7ec4\u4ef6\u7684\u663e\u793a\u503c\u548c\u66f4\u591a\uff0c\u5305\u62ec\u5bf9\u4e00\u4e9b\u66f4\u5e38\u89c1\u7684\u503c\u7684\u652f\u6301\uff0c\u6b64\u6837\u5f0f\u5217\u8868\u5bf9\u54cd\u5e94\u5f0f\u5e03\u5c40\u975e\u5e38\u6709\u5e2e\u52a9\u3002 flex\u5f39\u6027\u5e03\u5c40 \u5f15\u5165\u65b0\u7684Flex\u5f39\u6027\u5e03\u5c40\uff0c\u53ef\u4ee5\u5b9e\u73b0\u901a\u8fc7\u4e00\u6574\u5957\u54cd\u5e94\u7075\u6d3b\u7684\u5b9e\u7528\u7a0b\u5e8f\uff0c\u5feb\u901f\u7ba1\u7406\u6805\u683c\u7684\u5217\u3001\u5bfc\u822a\u3001\u7ec4\u4ef6\u7b49\u7684\u5e03\u5c40\u3001\u5bf9\u9f50\u548c\u5927\u5c0f\u3002\u901a\u8fc7\u8fdb\u4e00\u5ea6\u7684\u5b9a\u4e49CSS\uff0c\u8fd8\u53ef\u4ee5\u5b9e\u73b0\u66f4\u590d\u6742\u7684\u5c55\u793a\u6837\u5f0f\u3002 \u989c\u8272(Color) \u901a\u8fc7\u989c\u8272\u4f20\u8fbe\u610f\u4e49\u3001\u8868\u8fbe\u4e0d\u540c\u7684\u6a21\u5757\uff0c\u8fd9\u6709\u4e00\u7cfb\u5217\u7684\u5b9a\u4e49\u65b9\u6cd5\uff0c\u5305\u62ec\u652f\u6301\u94fe\u63a5\u3001\u60ac\u505c\u3001\u9009\u4e2d\u7b49\u72b6\u6001\u76f8\u5173\u7684\u7684\u6837\u5f0f\u96c6\u3002 Float\u6d6e\u52a8\u5c5e\u6027 \u4f7f\u7528\u6211\u4eec\u7684\u54cd\u5e94\u5f0ffloat\u6d6e\u52a8\u901a\u7528\u6837\u5f0f\uff0c\u80fd\u5728\u4efb\u4f55\u8bbe\u5907\u65ad\u70b9\uff08\u6d4f\u89c8\u5668\u5c3a\u5bf8\uff09\u4e0a\u5207\u6362\u6d6e\u52a8\u3002 \u89c4\u683c(sizi) \u4f7f\u7528\u7cfb\u7edf\u5bbd\u5ea6\u548c\u9ad8\u5ea6\u6837\u5f0f\uff0c\u8f7b\u677e\u5730\u5b9a\u4e49\u4efb\u4f55\u5143\u7d20\u7684\u5bbd\u6216\u9ad8\uff08\u76f8\u5bf9\u4e8e\u5176\u7236\u7ea7\uff09 \u95f4\u9694(spacing) \u5185\u7f6e\u4e86\u5404\u79cd\u7684\u5feb\u901f\u7f29\u8fdb\u3001\u9694\u79bb\u3001\u586b\u5145\u7b49\u95f4\u8ddd\u5904\u7406\u5de5\u5177\uff0c\u54cd\u5e94\u4f59\u91cf\u548c\u586b\u5145\u5b9e\u7528\u7a0b\u5e8f\u7c7b\u6765\u4fee\u6539\u5143\u7d20\u7684\u5916\u89c2\u3002 \u6587\u672c\u5904\u7406 \u7528\u4e8e\u63a7\u5236\u6587\u672c\u7684\u5bf9\u9f50\u3001\u7ec4\u5408\u3001\u5b57\u91cd\u7b49\u793a\u4f8b\u4ee5\u53ca\u4f7f\u7528\u6587\u6863\u3002 \u5782\u76f4\u5bf9\u9f50(vertical align) \u8f7b\u677e\u66f4\u6539\u5185\u8054\u3001\u5185\u5d4c\u5757\u3001\u5185\u8054\u8868\u548c\u8868\u683c\u5355\u5143\u683c\u5143\u7d20\u7684\u5782\u76f4\u5bf9\u9f50\u65b9\u5f0f\u3002","title":"Bootstrap4\u516c\u5171\u6837\u5f0f"},{"location":"2.x/notice/#_6","text":"\u9664\u4e86\u524d\u9762\u63d0\u5230\u7684 bootstrap4 \u516c\u5171\u6837\u5f0f \uff0c\u7cfb\u7edf\u8fd8\u5185\u7f6e\u4e86\u4ee5\u4e0b\u5e38\u7528\u6837\u5f0f\uff1a","title":"\u5185\u7f6e\u6837\u5f0f"},{"location":"2.x/notice/#_7","text":"\u8bf7\u53c2\u8003 \u989c\u8272\u8868\u6837\u5f0f","title":"\u989c\u8272"},{"location":"2.x/notice/#_8","text":".shadow-item { width:120px;height:100px;line-height:100px;margin:5px 10px;display:inline-block;text-align:center; } .shadow .shadow-100 .shadow-200","title":"\u9634\u5f71"},{"location":"2.x/permission/","text":"\u6743\u9650\u63a7\u5236 Dcat Admin \u5df2\u7ecf\u5185\u7f6e\u4e86 RBAC \u6743\u9650\u63a7\u5236\u6a21\u5757\uff0c\u5c55\u5f00\u5de6\u4fa7\u8fb9\u680f\u7684 Auth \uff0c\u4e0b\u9762\u6709\u7528\u6237\u3001\u89d2\u8272\u3001\u6743\u9650\u4e09\u9879\u7684\u7ba1\u7406\u9762\u677f\uff0c\u6743\u9650\u63a7\u5236\u7684\u4f7f\u7528\u5982\u4e0b\uff1a \u8def\u7531\u63a7\u5236 \u5728 Dcat Admin \u4e2d\uff0c\u6743\u9650\u548c\u8def\u7531\u662f\u7ed1\u5b9a\u5728\u4e00\u8d77\u7684\uff0c\u5728\u7f16\u8f91\u6743\u9650\u9875\u9762\u91cc\u9762\u8bbe\u7f6e\u5f53\u524d\u6743\u9650\u80fd\u8bbf\u95ee\u7684\u8def\u7531\uff0c\u5728 HTTP\u65b9\u6cd5 select\u6846\u4e2d\u9009\u62e9\u8bbf\u95ee\u8def\u7531\u7684\u65b9\u6cd5\uff0c\u5728 HTTP\u8def\u5f84 \u4e2d\u586b\u5199\u80fd\u8bbf\u95ee\u7684\u8def\u5f84\u3002 \u6bd4\u5982\u8981\u6dfb\u52a0\u4e00\u4e2a\u6743\u9650\uff0c\u8be5\u6743\u9650\u53ef\u4ee5\u4ee5 GET \u65b9\u5f0f\u8bbf\u95ee\u8def\u5f84 /admin/users \uff0c\u90a3\u4e48 HTTP\u65b9\u6cd5 \u9009\u62e9 GET \uff0c HTTP\u8def\u5f84 \u586b\u5199 /users \u3002 \u5982\u679c\u8981\u8bbf\u95ee\u524d\u7f00\u662f /admin/users \u7684\u6240\u6709\u8def\u5f84\uff0c\u90a3\u4e48 HTTP\u8def\u5f84 \u586b\u5199 /users* \uff1b\u5982\u679c\u8981\u8bbf\u95ee\u7684\u662f\u7f16\u8f91\u9875\uff0c\u90a3\u4e48 HTTP\u8def\u5f84 \u586b\u5199 /users/*/edit \uff1b\u5982\u679c\u591a\u4e2a\u8def\u5f84\u4e2d\u6bcf\u4e2a\u8def\u5f84\u7684\u65b9\u6cd5\u4e0d\u540c\uff0c\u90a3\u4e48 HTTP\u8def\u5f84 \u586b\u5199 GET:users/* \u3002 \u5982\u679c\u4e0a\u8ff0\u7684\u65b9\u6cd5\u4e0d\u80fd\u6ee1\u8db3\u9700\u6c42\uff0c HTTP\u8def\u5f84 \u8fd8\u652f\u6301\u586b\u5199 \u8def\u7531\u522b\u540d \uff0c\u5982 admin.users.show \u7981\u7528\u6743\u9650\u529f\u80fd \u628a admin.permission.enable \u914d\u7f6e\u53c2\u6570\u7684\u503c\u8bbe\u7f6e\u4e3a false \u53ef\u4ee5\u5b8c\u5168\u7981\u7528\u5185\u7f6e\u7684\u6743\u9650\u7cfb\u7edf\u3002 \u8d85\u7ea7\u7ba1\u7406\u5458 Dcat Admin \u4e2d\u9ed8\u8ba4\u7684\u89d2\u8272 administrator \u5c31\u662f\u8d85\u7ea7\u7ba1\u7406\u5458\u89d2\u8272\uff0c\u8bf7\u52ff\u66f4\u6539\u6807\u8bc6\uff0c\u5426\u5219\u4f1a\u53d8\u6210\u666e\u901a\u89d2\u8272\u3002 \u8df3\u8fc7\u6743\u9650\u9a8c\u8bc1 \u53ef\u4ee5\u628a\u9700\u8981\u8df3\u8fc7\u6743\u9650\u9a8c\u8bc1\u7684\u63a5\u53e3\u52a0\u5165\u5230\u914d\u7f6e\u6587\u4ef6 admin.permission.except \u53c2\u6570\u4e2d 'permission' => [ // Whether enable permission. 'enable' => true, // All method to path like: auth/users/*/edit // or specific method to path like: get:auth/users. 'except' => [ '/', 'auth/login', 'auth/logout', 'auth/setting', ], ], \u9875\u9762\u63a7\u5236 \u5982\u679c\u4f60\u8981\u5728\u9875\u9762\u4e2d\u63a7\u5236\u7528\u6237\u7684\u6743\u9650\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u4f8b\u5b50 \u573a\u666f1 \u6bd4\u5982\u73b0\u5728\u6709\u4e00\u4e2a\u573a\u666f\uff0c\u5bf9\u6587\u7ae0\u53d1\u5e03\u6a21\u5757\u505a\u6743\u9650\u7ba1\u7406\uff0c\u4ee5\u521b\u5efa\u6587\u7ae0\u4e3a\u4f8b \u9996\u5148\u521b\u5efa\u4e00\u9879\u6743\u9650\uff0c\u8fdb\u5165 http://localhost/admin/auth/permissions \uff0c\u6743\u9650\u6807\u8bc6\uff08slug\uff09\u586b\u5199 create-post \uff0c\u6743\u9650\u540d\u79f0\u586b\u5199 \u521b\u5efa\u6587\u7ae0 \uff0c\u8fd9\u6837\u6743\u9650\u5c31\u521b\u5efa\u597d\u4e86\u3002 \u7b2c\u4e8c\u6b65\u53ef\u4ee5\u628a\u8fd9\u4e2a\u6743\u9650\u76f4\u63a5\u9644\u52a0\u7ed9\u4e2a\u4eba\u6216\u8005\u89d2\u8272\uff0c\u5728\u7528\u6237\u7f16\u8f91\u9875\u9762\u53ef\u4ee5\u76f4\u63a5\u628a\u4e0a\u9762\u521b\u5efa\u597d\u7684\u6743\u9650\u9644\u52a0\u7ed9\u5f53\u524d\u7f16\u8f91\u7528\u6237\uff0c\u4e5f\u53ef\u4ee5\u5728\u7f16\u8f91\u89d2\u8272\u9875\u9762\u9644\u52a0\u7ed9\u67d0\u4e2a\u89d2\u8272\u3002 \u7b2c\u4e09\u6b65\uff0c\u5728\u521b\u5efa\u6587\u7ae0\u63a7\u5236\u5668\u91cc\u9762\u6dfb\u52a0\u63a7\u5236\u4ee3\u7801\uff1a use Dcat\\Admin\\Auth\\Permission; class PostController extends Controller { public function create() { // \u68c0\u67e5\u6743\u9650\uff0c\u6709create-post\u6743\u9650\u7684\u7528\u6237\u6216\u8005\u89d2\u8272\u53ef\u4ee5\u8bbf\u95ee\u521b\u5efa\u6587\u7ae0\u9875\u9762 Permission::check('create-post'); } } \u8fd9\u6837\u5c31\u5b8c\u6210\u4e86\u4e00\u4e2a\u9875\u9762\u7684\u6743\u9650\u63a7\u5236\u3002 \u573a\u666f2 \u5982\u679c\u4f60\u8981\u5728\u8868\u683c\u4e2d\u63a7\u5236\u7528\u6237\u5bf9\u5143\u7d20\u7684\u663e\u793a\uff0c\u90a3\u4e48\u9700\u8981\u5148\u5b9a\u4e49\u4e24\u4e2a\u6743\u9650\uff0c\u6bd4\u5982\u6743\u9650\u6807\u793a delete-image \u3001\u548c view-title-column \u5206\u522b\u7528\u6765\u63a7\u5236\u6709\u5220\u9664\u56fe\u7247\u7684\u6743\u9650\u548c\u663e\u793a\u67d0\u4e00\u5217\u7684\u6743\u9650\uff0c\u628a\u8fd9\u4e24\u4e2a\u6743\u9650\u8d4b\u7ed9\u4f60\u8bbe\u7f6e\u7684\u89d2\u8272\uff0c\u7136\u540e\u5728grid\u4e2d\u52a0\u5165\u4ee3\u7801\uff1a $grid->actions(function ($actions) { // \u6ca1\u6709`delete-image`\u6743\u9650\u7684\u89d2\u8272\u4e0d\u663e\u793a\u5220\u9664\u6309\u94ae if (!Admin::user()->can('delete-image')) { $actions->disableDelete(); } }); // \u53ea\u6709\u5177\u6709`view-title-column`\u6743\u9650\u7684\u7528\u6237\u624d\u80fd\u663e\u793a`title`\u8fd9\u4e00\u5217 if (Admin::user()->can('view-title-column')) { $grid->column('title'); } \u76f8\u5173\u65b9\u6cd5 \u83b7\u53d6\u5f53\u524d\u7528\u6237\u5bf9\u8c61 Admin::user(); \u83b7\u53d6\u5f53\u524d\u7528\u6237id Admin::user()->id; \u83b7\u53d6\u7528\u6237\u89d2\u8272 Admin::user()->roles; \u83b7\u53d6\u7528\u6237\u7684\u6743\u9650 Admin::user()->permissions; \u7528\u6237\u662f\u5426\u67d0\u4e2a\u89d2\u8272 Admin::user()->isRole('developer'); \u662f\u5426\u6709\u67d0\u4e2a\u6743\u9650 Admin::user()->can('create-post'); \u662f\u5426\u6ca1\u6709\u67d0\u4e2a\u6743\u9650 Admin::user()->cannot('delete-post'); \u662f\u5426\u662f\u8d85\u7ea7\u7ba1\u7406\u5458 Admin::user()->isAdministrator(); \u662f\u5426\u662f\u5176\u4e2d\u7684\u89d2\u8272 Admin::user()->inRoles(['editor', 'developer']); \u6743\u9650\u4e2d\u95f4\u4ef6 \u53ef\u4ee5\u5728\u8def\u7531\u914d\u7f6e\u4e0a\u7ed3\u5408\u6743\u9650\u4e2d\u95f4\u4ef6\u6765\u63a7\u5236\u8def\u7531\u7684\u6743\u9650 // \u5141\u8bb8administrator\u3001editor\u4e24\u4e2a\u89d2\u8272\u8bbf\u95eegroup\u91cc\u9762\u7684\u8def\u7531 Route::group([ 'middleware' => 'admin.permission:allow,administrator,editor', ], function ($router) { $router->resource('users', UserController::class); ... }); // \u7981\u6b62developer\u3001operator\u4e24\u4e2a\u89d2\u8272\u8bbf\u95eegroup\u91cc\u9762\u7684\u8def\u7531 Route::group([ 'middleware' => 'admin.permission:deny,developer,operator', ], function ($router) { $router->resource('users', UserController::class); ... }); // \u6709edit-post\u3001create-post\u3001delete-post\u4e09\u4e2a\u6743\u9650\u7684\u7528\u6237\u53ef\u4ee5\u8bbf\u95eegroup\u91cc\u9762\u7684\u8def\u7531 Route::group([ 'middleware' => 'admin.permission:check,edit-post,create-post,delete-post', ], function ($router) { $router->resource('posts', PostController::class); ... }); \u6743\u9650\u4e2d\u95f4\u4ef6\u548c\u5176\u5b83\u4e2d\u95f4\u4ef6\u4f7f\u7528\u65b9\u6cd5\u4e00\u81f4\u3002 \u4e3a\u4f55\u914d\u7f6e\u4e86\u89d2\u8272\u548c\u6743\u9650\uff0c\u4f9d\u7136\u63d0\u793a\u65e0\u6743\u8bbf\u95ee\uff1f \u8fd9\u4e2a\u539f\u56e0\u53ef\u80fd\u662f\u7531\u4e8e\u6743\u9650\u7684 URL \u8def\u5f84\u914d\u7f6e\u9519\u8bef\u5bfc\u81f4\u7684\uff0c\u6b63\u786e\u7684\u5305\u542b\u589e\u5220\u6539\u67e5\u529f\u80fd\u7684 URL \u914d\u7f6e\u5e94\u8be5\u662f auth/users* \u8fd9\u6837\u7684\uff0c\u5982\u679c\u4f60\u914d\u7f6e\u6210\u4e86 auth/users/* \uff0c\u90a3\u4e48\u5c31\u4f1a\u63d0\u793a\u65e0\u6743\u8bbf\u95ee\u3002 {tip} \u53e6\u5916\u6807\u7b7e\u8868\u5355\u586b\u5199\u81ea\u5b9a\u4e49URL\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a\u4e00\u79cd\u662f\u9009\u4e2d\u540e\u6309 \u5220\u9664\u952e \u8fdb\u884c\u66f4\u6539\uff1b\u53e6\u4e00\u79cd\u662f\u586b\u5199\u540e\u6309 \u7a7a\u683c\u952e + \u56de\u8f66\u952e \u3002","title":"\u6743\u9650\u63a7\u5236"},{"location":"2.x/permission/#_1","text":"Dcat Admin \u5df2\u7ecf\u5185\u7f6e\u4e86 RBAC \u6743\u9650\u63a7\u5236\u6a21\u5757\uff0c\u5c55\u5f00\u5de6\u4fa7\u8fb9\u680f\u7684 Auth \uff0c\u4e0b\u9762\u6709\u7528\u6237\u3001\u89d2\u8272\u3001\u6743\u9650\u4e09\u9879\u7684\u7ba1\u7406\u9762\u677f\uff0c\u6743\u9650\u63a7\u5236\u7684\u4f7f\u7528\u5982\u4e0b\uff1a","title":"\u6743\u9650\u63a7\u5236"},{"location":"2.x/permission/#_2","text":"\u5728 Dcat Admin \u4e2d\uff0c\u6743\u9650\u548c\u8def\u7531\u662f\u7ed1\u5b9a\u5728\u4e00\u8d77\u7684\uff0c\u5728\u7f16\u8f91\u6743\u9650\u9875\u9762\u91cc\u9762\u8bbe\u7f6e\u5f53\u524d\u6743\u9650\u80fd\u8bbf\u95ee\u7684\u8def\u7531\uff0c\u5728 HTTP\u65b9\u6cd5 select\u6846\u4e2d\u9009\u62e9\u8bbf\u95ee\u8def\u7531\u7684\u65b9\u6cd5\uff0c\u5728 HTTP\u8def\u5f84 \u4e2d\u586b\u5199\u80fd\u8bbf\u95ee\u7684\u8def\u5f84\u3002 \u6bd4\u5982\u8981\u6dfb\u52a0\u4e00\u4e2a\u6743\u9650\uff0c\u8be5\u6743\u9650\u53ef\u4ee5\u4ee5 GET \u65b9\u5f0f\u8bbf\u95ee\u8def\u5f84 /admin/users \uff0c\u90a3\u4e48 HTTP\u65b9\u6cd5 \u9009\u62e9 GET \uff0c HTTP\u8def\u5f84 \u586b\u5199 /users \u3002 \u5982\u679c\u8981\u8bbf\u95ee\u524d\u7f00\u662f /admin/users \u7684\u6240\u6709\u8def\u5f84\uff0c\u90a3\u4e48 HTTP\u8def\u5f84 \u586b\u5199 /users* \uff1b\u5982\u679c\u8981\u8bbf\u95ee\u7684\u662f\u7f16\u8f91\u9875\uff0c\u90a3\u4e48 HTTP\u8def\u5f84 \u586b\u5199 /users/*/edit \uff1b\u5982\u679c\u591a\u4e2a\u8def\u5f84\u4e2d\u6bcf\u4e2a\u8def\u5f84\u7684\u65b9\u6cd5\u4e0d\u540c\uff0c\u90a3\u4e48 HTTP\u8def\u5f84 \u586b\u5199 GET:users/* \u3002 \u5982\u679c\u4e0a\u8ff0\u7684\u65b9\u6cd5\u4e0d\u80fd\u6ee1\u8db3\u9700\u6c42\uff0c HTTP\u8def\u5f84 \u8fd8\u652f\u6301\u586b\u5199 \u8def\u7531\u522b\u540d \uff0c\u5982 admin.users.show","title":"\u8def\u7531\u63a7\u5236"},{"location":"2.x/permission/#_3","text":"\u628a admin.permission.enable \u914d\u7f6e\u53c2\u6570\u7684\u503c\u8bbe\u7f6e\u4e3a false \u53ef\u4ee5\u5b8c\u5168\u7981\u7528\u5185\u7f6e\u7684\u6743\u9650\u7cfb\u7edf\u3002","title":"\u7981\u7528\u6743\u9650\u529f\u80fd"},{"location":"2.x/permission/#_4","text":"Dcat Admin \u4e2d\u9ed8\u8ba4\u7684\u89d2\u8272 administrator \u5c31\u662f\u8d85\u7ea7\u7ba1\u7406\u5458\u89d2\u8272\uff0c\u8bf7\u52ff\u66f4\u6539\u6807\u8bc6\uff0c\u5426\u5219\u4f1a\u53d8\u6210\u666e\u901a\u89d2\u8272\u3002","title":"\u8d85\u7ea7\u7ba1\u7406\u5458"},{"location":"2.x/permission/#_5","text":"\u53ef\u4ee5\u628a\u9700\u8981\u8df3\u8fc7\u6743\u9650\u9a8c\u8bc1\u7684\u63a5\u53e3\u52a0\u5165\u5230\u914d\u7f6e\u6587\u4ef6 admin.permission.except \u53c2\u6570\u4e2d 'permission' => [ // Whether enable permission. 'enable' => true, // All method to path like: auth/users/*/edit // or specific method to path like: get:auth/users. 'except' => [ '/', 'auth/login', 'auth/logout', 'auth/setting', ], ],","title":"\u8df3\u8fc7\u6743\u9650\u9a8c\u8bc1"},{"location":"2.x/permission/#_6","text":"\u5982\u679c\u4f60\u8981\u5728\u9875\u9762\u4e2d\u63a7\u5236\u7528\u6237\u7684\u6743\u9650\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u4f8b\u5b50","title":"\u9875\u9762\u63a7\u5236"},{"location":"2.x/permission/#1","text":"\u6bd4\u5982\u73b0\u5728\u6709\u4e00\u4e2a\u573a\u666f\uff0c\u5bf9\u6587\u7ae0\u53d1\u5e03\u6a21\u5757\u505a\u6743\u9650\u7ba1\u7406\uff0c\u4ee5\u521b\u5efa\u6587\u7ae0\u4e3a\u4f8b \u9996\u5148\u521b\u5efa\u4e00\u9879\u6743\u9650\uff0c\u8fdb\u5165 http://localhost/admin/auth/permissions \uff0c\u6743\u9650\u6807\u8bc6\uff08slug\uff09\u586b\u5199 create-post \uff0c\u6743\u9650\u540d\u79f0\u586b\u5199 \u521b\u5efa\u6587\u7ae0 \uff0c\u8fd9\u6837\u6743\u9650\u5c31\u521b\u5efa\u597d\u4e86\u3002 \u7b2c\u4e8c\u6b65\u53ef\u4ee5\u628a\u8fd9\u4e2a\u6743\u9650\u76f4\u63a5\u9644\u52a0\u7ed9\u4e2a\u4eba\u6216\u8005\u89d2\u8272\uff0c\u5728\u7528\u6237\u7f16\u8f91\u9875\u9762\u53ef\u4ee5\u76f4\u63a5\u628a\u4e0a\u9762\u521b\u5efa\u597d\u7684\u6743\u9650\u9644\u52a0\u7ed9\u5f53\u524d\u7f16\u8f91\u7528\u6237\uff0c\u4e5f\u53ef\u4ee5\u5728\u7f16\u8f91\u89d2\u8272\u9875\u9762\u9644\u52a0\u7ed9\u67d0\u4e2a\u89d2\u8272\u3002 \u7b2c\u4e09\u6b65\uff0c\u5728\u521b\u5efa\u6587\u7ae0\u63a7\u5236\u5668\u91cc\u9762\u6dfb\u52a0\u63a7\u5236\u4ee3\u7801\uff1a use Dcat\\Admin\\Auth\\Permission; class PostController extends Controller { public function create() { // \u68c0\u67e5\u6743\u9650\uff0c\u6709create-post\u6743\u9650\u7684\u7528\u6237\u6216\u8005\u89d2\u8272\u53ef\u4ee5\u8bbf\u95ee\u521b\u5efa\u6587\u7ae0\u9875\u9762 Permission::check('create-post'); } } \u8fd9\u6837\u5c31\u5b8c\u6210\u4e86\u4e00\u4e2a\u9875\u9762\u7684\u6743\u9650\u63a7\u5236\u3002","title":"\u573a\u666f1"},{"location":"2.x/permission/#2","text":"\u5982\u679c\u4f60\u8981\u5728\u8868\u683c\u4e2d\u63a7\u5236\u7528\u6237\u5bf9\u5143\u7d20\u7684\u663e\u793a\uff0c\u90a3\u4e48\u9700\u8981\u5148\u5b9a\u4e49\u4e24\u4e2a\u6743\u9650\uff0c\u6bd4\u5982\u6743\u9650\u6807\u793a delete-image \u3001\u548c view-title-column \u5206\u522b\u7528\u6765\u63a7\u5236\u6709\u5220\u9664\u56fe\u7247\u7684\u6743\u9650\u548c\u663e\u793a\u67d0\u4e00\u5217\u7684\u6743\u9650\uff0c\u628a\u8fd9\u4e24\u4e2a\u6743\u9650\u8d4b\u7ed9\u4f60\u8bbe\u7f6e\u7684\u89d2\u8272\uff0c\u7136\u540e\u5728grid\u4e2d\u52a0\u5165\u4ee3\u7801\uff1a $grid->actions(function ($actions) { // \u6ca1\u6709`delete-image`\u6743\u9650\u7684\u89d2\u8272\u4e0d\u663e\u793a\u5220\u9664\u6309\u94ae if (!Admin::user()->can('delete-image')) { $actions->disableDelete(); } }); // \u53ea\u6709\u5177\u6709`view-title-column`\u6743\u9650\u7684\u7528\u6237\u624d\u80fd\u663e\u793a`title`\u8fd9\u4e00\u5217 if (Admin::user()->can('view-title-column')) { $grid->column('title'); }","title":"\u573a\u666f2"},{"location":"2.x/permission/#_7","text":"\u83b7\u53d6\u5f53\u524d\u7528\u6237\u5bf9\u8c61 Admin::user(); \u83b7\u53d6\u5f53\u524d\u7528\u6237id Admin::user()->id; \u83b7\u53d6\u7528\u6237\u89d2\u8272 Admin::user()->roles; \u83b7\u53d6\u7528\u6237\u7684\u6743\u9650 Admin::user()->permissions; \u7528\u6237\u662f\u5426\u67d0\u4e2a\u89d2\u8272 Admin::user()->isRole('developer'); \u662f\u5426\u6709\u67d0\u4e2a\u6743\u9650 Admin::user()->can('create-post'); \u662f\u5426\u6ca1\u6709\u67d0\u4e2a\u6743\u9650 Admin::user()->cannot('delete-post'); \u662f\u5426\u662f\u8d85\u7ea7\u7ba1\u7406\u5458 Admin::user()->isAdministrator(); \u662f\u5426\u662f\u5176\u4e2d\u7684\u89d2\u8272 Admin::user()->inRoles(['editor', 'developer']);","title":"\u76f8\u5173\u65b9\u6cd5"},{"location":"2.x/permission/#_8","text":"\u53ef\u4ee5\u5728\u8def\u7531\u914d\u7f6e\u4e0a\u7ed3\u5408\u6743\u9650\u4e2d\u95f4\u4ef6\u6765\u63a7\u5236\u8def\u7531\u7684\u6743\u9650 // \u5141\u8bb8administrator\u3001editor\u4e24\u4e2a\u89d2\u8272\u8bbf\u95eegroup\u91cc\u9762\u7684\u8def\u7531 Route::group([ 'middleware' => 'admin.permission:allow,administrator,editor', ], function ($router) { $router->resource('users', UserController::class); ... }); // \u7981\u6b62developer\u3001operator\u4e24\u4e2a\u89d2\u8272\u8bbf\u95eegroup\u91cc\u9762\u7684\u8def\u7531 Route::group([ 'middleware' => 'admin.permission:deny,developer,operator', ], function ($router) { $router->resource('users', UserController::class); ... }); // \u6709edit-post\u3001create-post\u3001delete-post\u4e09\u4e2a\u6743\u9650\u7684\u7528\u6237\u53ef\u4ee5\u8bbf\u95eegroup\u91cc\u9762\u7684\u8def\u7531 Route::group([ 'middleware' => 'admin.permission:check,edit-post,create-post,delete-post', ], function ($router) { $router->resource('posts', PostController::class); ... }); \u6743\u9650\u4e2d\u95f4\u4ef6\u548c\u5176\u5b83\u4e2d\u95f4\u4ef6\u4f7f\u7528\u65b9\u6cd5\u4e00\u81f4\u3002","title":"\u6743\u9650\u4e2d\u95f4\u4ef6"},{"location":"2.x/permission/#_9","text":"\u8fd9\u4e2a\u539f\u56e0\u53ef\u80fd\u662f\u7531\u4e8e\u6743\u9650\u7684 URL \u8def\u5f84\u914d\u7f6e\u9519\u8bef\u5bfc\u81f4\u7684\uff0c\u6b63\u786e\u7684\u5305\u542b\u589e\u5220\u6539\u67e5\u529f\u80fd\u7684 URL \u914d\u7f6e\u5e94\u8be5\u662f auth/users* \u8fd9\u6837\u7684\uff0c\u5982\u679c\u4f60\u914d\u7f6e\u6210\u4e86 auth/users/* \uff0c\u90a3\u4e48\u5c31\u4f1a\u63d0\u793a\u65e0\u6743\u8bbf\u95ee\u3002 {tip} \u53e6\u5916\u6807\u7b7e\u8868\u5355\u586b\u5199\u81ea\u5b9a\u4e49URL\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a\u4e00\u79cd\u662f\u9009\u4e2d\u540e\u6309 \u5220\u9664\u952e \u8fdb\u884c\u66f4\u6539\uff1b\u53e6\u4e00\u79cd\u662f\u586b\u5199\u540e\u6309 \u7a7a\u683c\u952e + \u56de\u8f66\u952e \u3002","title":"\u4e3a\u4f55\u914d\u7f6e\u4e86\u89d2\u8272\u548c\u6743\u9650\uff0c\u4f9d\u7136\u63d0\u793a\u65e0\u6743\u8bbf\u95ee\uff1f"},{"location":"2.x/qa/","text":"\u5e38\u89c1\u95ee\u9898\u6c47\u603b 1.\u5982\u4f55\u8bbe\u7f6e\u8bed\u8a00\u4e3a\u7b80\u4f53\u4e2d\u6587\uff1f \u6253\u5f00\u914d\u7f6e\u6587\u4ef6 config/app.php \uff0c\u8bbe\u7f6e locale \u53c2\u6570\u7684\u503c\u4e3a zh_CN \u3002 2.Laravel7\u65f6\u95f4\u663e\u793a\u4e3aUTC\u683c\u5f0f \u8fd9\u4e2a\u662f Laravel7 \u5347\u7ea7\u540e\u5e26\u6765\u7684\u5751\uff0c\u539f\u56e0\u8bf7\u53c2\u8003 \u65e5\u671f\u5e8f\u5217\u5316 \u3002 \u5728\u672c\u9879\u76ee\u4e2d\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5f88\u7b80\u5355\uff0c\u53ea\u9700\u5728 Model \u4e2d\u5f15\u5165 Dcat\\Admin\\Traits\\HasDateTimeFormatter \u8fd9\u4e2a trait \u5373\u53ef\u3002 <?php namespace App\\Models; use Dcat\\Admin\\Traits\\HasDateTimeFormatter; use Illuminate\\Database\\Eloquent\\Model; class MyModel extends Model { use HasDateTimeFormatter; } 3.\u8868\u5355\u4fdd\u5b58\u65f6\u62a5\u9519 Array to string conversion \u51fa\u73b0\u8fd9\u4e2a\u95ee\u9898\u662f\u56e0\u4e3a\u8868\u5355\u63d0\u4ea4\u7684\u503c\u6700\u540e\u8f6c\u6362\u6210\u4e86 array \u7c7b\u578b\uff0c\u800c MySQL \u662f\u4e0d\u652f\u6301\u76f4\u63a5\u5b58\u50a8 array \u7c7b\u578b\u6570\u636e\u7684\uff0c\u5728 dcat-admin \u4e2d\u53ef\u4ee5\u7528\u4ee5\u4e0b\u65b9\u5f0f\u5bf9\u6570\u636e\u683c\u5f0f\u8fdb\u884c\u8f6c\u6362 $form->multipleSelect('user_id')->saving(function ($v) { // \u8f6c\u4e3a , \u9694\u5f00\u7684\u5b57\u7b26\u4e32 return implode(',', $v); }); \u5f53\u7136\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7 model \u7684 \u4fee\u6539\u5668 \u53bb\u8f6c\u5316\u5b57\u6bb5\u7684\u503c\uff0c\u8fd9\u65b9\u9762\u5185\u5bb9\u53ef\u4ee5\u53c2\u8003 laravel \u6587\u6863\uff0c\u8fd9\u91cc\u5c31\u4e0d\u518d\u8d58\u8ff0\u3002 {tip} \u66f4\u4f18\u96c5\u7684\u8f6c\u5316\u503c\u65b9\u6cd5\uff0c\u53ef\u53c2\u8003 Dcat Admin \u6559\u7a0b - \u5982\u4f55\u4f18\u96c5\u5730\u66f4\u6539\u8868\u5355\u503c\u7684\u6570\u636e\u7c7b\u578b\uff1f 4.\u5982\u4f55\u4ecelaravel-admin\u8fc1\u79fb\u5230dcat-admin\uff1f Dcat Admin \u6559\u7a0b - \u5982\u4f55\u4ece Laravel admin \u8fc1\u79fb\u5230 dcat admin\uff1f 5.\u91cd\u5199\u767b\u9646\u9875\u9762\u548c\u767b\u9646\u903b\u8f91 \u65b9\u5f0f\u4e00\uff0c\u91cd\u5199\u767b\u9646\u63a7\u5236\u5668\u65b9\u6cd5\uff1a \u9ed8\u8ba4\u7684\u767b\u9646\u63a7\u5236\u5668\u7528\u7684\u662f App\\Admin\\AuthController \u8fd9\u4e2a\u7c7b\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u53c2\u6570 admin.auth.controller \u8fdb\u884c\u4fee\u6539 <?php namespace App\\Admin\\Controllers; use Dcat\\Admin\\Controllers\\AuthController as BaseAuthController; class AuthController extends BaseAuthController { // \u81ea\u5b9a\u4e49\u767b\u9646view\u6a21\u677f protected $view = 'admin.login'; // \u91cd\u5199\u767b\u9646\u9875\u9762\u903b\u8f91 public function getLogin(Content $content) { ... } ... } \u65b9\u5f0f\u4e8c\uff0c\u8986\u5199\u8def\u7531\uff1a \u5728\u8def\u7531\u6587\u4ef6 app/Admin/routes.php \u4e2d\uff0c\u8986\u76d6\u6389\u767b\u9646\u9875\u9762\u548c\u767b\u9646\u903b\u8f91\u7684\u8def\u7531\uff0c\u5373\u53ef\u5b9e\u73b0\u81ea\u5b9a\u4e49\u7684\u529f\u80fd Route::group([ 'prefix' => config('admin.prefix'), 'namespace' => Admin::controllerNamespace(), 'middleware' => ['web', 'admin'], ], function (Router $router) { $router->get('auth/login', 'AuthController@getLogin'); $router->post('auth/login', 'AuthController@postLogin'); }); \u5728\u81ea\u5b9a\u4e49\u7684\u8def\u7531\u5668AuthController\u4e2d\u7684 getLogin \u3001 postLogin \u65b9\u6cd5\u91cc\u5206\u522b\u5b9e\u73b0\u81ea\u5df1\u7684\u767b\u9646\u9875\u9762\u548c\u767b\u9646\u903b\u8f91\u3002 6.\u66f4\u65b0\u65b0\u7248\u672c\u540e\u51fa\u73b0\u5f02\u5e38 \u5982\u679c\u9047\u5230\u66f4\u65b0\u4e4b\u540e,\u90e8\u5206\u7ec4\u4ef6\u4e0d\u80fd\u6b63\u5e38\u4f7f\u7528,\u90a3\u6709\u53ef\u80fd\u662f dcat-admin \u81ea\u5e26\u7684\u9759\u6001\u8d44\u6e90\u6709\u66f4\u65b0\u4e86,\u9700\u8981\u8fd0\u884c\u547d\u4ee4 php artisan admin:publish --force \u6765\u91cd\u65b0\u53d1\u5e03\u524d\u7aef\u8d44\u6e90\uff0c\u53d1\u5e03\u4e4b\u540e\u4e0d\u8981\u5fd8\u8bb0\u6e05\u7406\u6d4f\u89c8\u5668\u7f13\u5b58. 7.\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\u6216\u65e0\u6cd5\u8bbf\u95ee\uff1f \u5982\u679c\u4f60\u53d1\u73b0\u65e0\u6cd5\u4e0a\u4f20\u6587\u4ef6\uff0c\u90a3\u4e48\u901a\u5e38\u6709\u51e0\u4e0b\u51e0\u70b9\u539f\u56e0\uff1a Laravel \u6587\u4ef6\u4e0a\u4f20\u914d\u7f6e\u4e0d\u6b63\u786e\uff0c\u8bf7\u53c2\u8003\u6587\u6863 \u56fe\u7247/\u6587\u4ef6\u4e0a\u4f20 \u3002\u5982\u679c\u4f60\u4e0d\u4e86\u89e3 laravel \u6587\u4ef6\u4e0a\u4f20\u529f\u80fd\uff0c\u8bf7\u9605\u8bfb\u6587\u6863 Laravel - \u6587\u4ef6\u5b58\u50a8 \u6587\u4ef6\u8fc7\u5927\uff0c\u9700\u8981\u8c03\u6574 php.ini \u7684 upload_max_filesize \u53c2\u6570 \u6587\u4ef6\u4e0a\u4f20\u76ee\u5f55\u6ca1\u6709\u5199\u6743\u9650 php \u6ca1\u6709\u5b89\u88c5\u6216\u6ca1\u6709\u5f00\u542f fileinfo \u6269\u5c55 \u68c0\u67e5 php.ini \u7684 upload_tim_dir \u53c2\u6570\u8bbe\u7f6e\u662f\u5426\u6b63\u5e38 \u5982\u679c\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\u4e86\uff0c\u5374\u65e0\u6cd5\u6b63\u5e38\u8bbf\u95ee\uff0c\u90a3\u4e48\u53ef\u80fd\u662f .env \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 APP_URL \u53c2\u6570\u6ca1\u6709\u8bbe\u7f6e\u6b63\u786e\u3002 8.\u5173\u4e8e\u524d\u7aef\u8d44\u6e90\u52a0\u8f7d\u95ee\u9898 Dcat Admin \u662f\u652f\u6301\u524d\u7aef\u8d44\u6e90\u6309\u9700\u52a0\u8f7d\u7684\uff0c\u5728\u9700\u8981\u7528\u5230\u67d0\u4e2a\u7ec4\u4ef6\u7684\u65f6\u5019\u518d\u5f15\u5165\u524d\u7aef\u8d44\u6e90\u5373\u53ef\uff0c\u5f00\u53d1\u8005\u65e0\u9700\u62c5\u5fc3\u5b89\u88c5\u7ec4\u4ef6\u8fc7\u591a\u5f71\u54cd\u9875\u9762\u52a0\u8f7d\u901f\u5ea6\u3002 \u53ea\u6709\u90a3\u79cd\u9700\u8981\u5728\u5168\u5c40\u9875\u9762\u5f15\u5165\u7684\u8d44\u6e90\uff0c\u624d\u9700\u8981\u5728 app/Admin/bootstrap.php \u6216 ServiceProvider::boot \u65b9\u6cd5\u4e2d\u5f15\u5165\uff1a Admin::css('path/to/your/css'); Admin::js('path/to/your/js'); 9.\u4e3a\u4f55\u914d\u7f6e\u4e86\u89d2\u8272\u548c\u6743\u9650\uff0c\u4f9d\u7136\u63d0\u793a\u65e0\u6743\u8bbf\u95ee\uff1f \u8fd9\u4e2a\u539f\u56e0\u53ef\u80fd\u662f\u7531\u4e8e\u6743\u9650\u7684 URL \u8def\u5f84\u914d\u7f6e\u9519\u8bef\u5bfc\u81f4\u7684\uff0c\u6b63\u786e\u7684\u5305\u542b\u589e\u5220\u6539\u67e5\u529f\u80fd\u7684 URL \u914d\u7f6e\u5e94\u8be5\u662f auth/users* \u8fd9\u6837\u7684\uff0c\u5982\u679c\u914d\u7f6e\u6210\u4e86 auth/users/* \uff0c\u90a3\u4e48\u5c31\u4f1a\u63d0\u793a\u65e0\u6743\u8bbf\u95ee\u3002 {tip} \u53e6\u5916\u6807\u7b7e\u8868\u5355\u586b\u5199\u81ea\u5b9a\u4e49URL\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a\u4e00\u79cd\u662f\u9009\u4e2d\u540e\u6309 \u5220\u9664\u952e \u8fdb\u884c\u66f4\u6539\uff1b\u53e6\u4e00\u79cd\u662f\u586b\u5199\u540e\u6309 \u7a7a\u683c\u952e + \u56de\u8f66\u952e \u3002 10.\u4e3a\u4f55\u6ca1\u6709\u6743\u9650\u7684\u83dc\u5355\u4e0d\u4f1a\u81ea\u52a8\u9690\u85cf\uff1f \u8fd9\u4e2a\u95ee\u9898\u662f\u56e0\u4e3a\u6ca1\u6709\u7ed9\u83dc\u5355\u7ed1\u5b9a\u6743\u9650\u6216\u8005\u89d2\u8272\uff0c\u7ed9\u60f3\u8981\u65e0\u6743\u4e0d\u663e\u793a\u7684\u83dc\u5355\u7ed1\u5b9a\u6743\u9650\u6216\u8005\u89d2\u8272\u5373\u53ef\u3002 11.\u9879\u76ee\u4f7f\u7528HTTPS\u4e4b\u540e\u65e0\u6cd5\u767b\u9646 \u9700\u8981\u628a\u914d\u7f6e\u6587\u4ef6\u7684 admin.https \u53c2\u6570\u7684\u503c\u8bbe\u7f6e\u4e3a true 12.$.get(xxx) \u6ca1\u6709\u53cd\u5e94 Dcat Admin \u4f7f\u7528\u7684\u662f jQuery3.x \uff0c $.get \u65b9\u6cd5\u5728 jQuery3.x \u4e2d\u5df2\u7ecf\u88ab\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528 $.ajax \u4ee3\u66ff 13.\u4e0a\u4f20\u7684\u56fe\u7247\u7ecf\u5e38\u83ab\u540d\u5176\u5999\u81ea\u52a8\u5220\u9664\uff1f \u51fa\u73b0\u8fd9\u4e2a\u95ee\u9898\u7684\u539f\u56e0\u5f88\u53ef\u80fd\u662f\u56e0\u4e3a Model \u4e2d\u8bbe\u7f6e\u4e86\u56fe\u7247\u76f8\u5173\u5b57\u6bb5\u7684\u8bbf\u95ee\u5668\uff0c\u5982 class User extend Model { public function getAvatarAttribute() { return Storage::disk('admin')->url($this->avatar); } } \u8fd9\u79cd\u60c5\u51b5\u4e0b\u4f1a\u51fa\u73b0\u81ea\u52a8\u5220\u9664\u5df2\u4e0a\u4f20\u56fe\u7247\u7684\u60c5\u51b5\uff0c\u89e3\u51b3\u65b9\u6cd5\u4e5f\u5f88\u7b80\u5355\uff0c\u628a\u8bbf\u95ee\u5668\u6539\u6210\u81ea\u5b9a\u4e49\u65b9\u6cd5\u5373\u53ef class User extend Model { public function getAvatar() { return Storage::disk('admin')->url($this->avatar); } } 14.\u524d\u540e\u53f0session\u53d1\u751f\u51b2\u7a81 \u4ece 2.0 \u7684\u7248\u672c\u4e4b\u540e admin.session \u4e2d\u95f4\u4ef6\u4e0d\u518d\u9ed8\u8ba4\u542f\u7528\uff0c\u5982\u679c\u60a8\u7684\u5e94\u7528\u540c\u65f6\u6709\u524d\u53f0\u548c\u540e\u53f0\uff0c\u5219\u9700\u8981\u5f00\u542f admin.session \u4e2d\u95f4\u4ef6\uff0c\u5426\u5219\u4f1a\u9020\u6210\u524d\u540e\u53f0 session \u51b2\u7a81\u95ee\u9898\u3002 \u628a\u914d\u7f6e\u53c2\u6570 admin.route.enable_session_middleware \u7684\u503c\u8bbe\u7f6e\u4e3a true \u5373\u53ef\u5f00\u542f 'route' => [ 'domain' => env('ADMIN_ROUTE_DOMAIN'), 'prefix' => env('ADMIN_ROUTE_PREFIX', 'admin'), 'namespace' => 'App\\\\Admin\\\\Controllers', 'middleware' => ['web', 'admin'], // \u5f00\u542f admin.session \u4e2d\u95f4\u4ef6 'enable_session_middleware' => true, ], 15.\u56fe\u7247\u9632\u76d7\u94fe \u56fe\u7247\u8bf7\u6c42\u9ed8\u8ba4\u4f1a\u53bb\u6389 referer \u5b57\u6bb5\uff0c\u5982\u679c\u6709\u9632\u76d7\u94fe\u8981\u6c42\uff0c\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6( config/admin.php )\u4e2d\u8bbe\u7f6e\uff1a \"disable_no_referrer_meta\" => true","title":"\u5e38\u89c1\u95ee\u9898\u6c47\u603b"},{"location":"2.x/qa/#_1","text":"","title":"\u5e38\u89c1\u95ee\u9898\u6c47\u603b"},{"location":"2.x/qa/#1","text":"\u6253\u5f00\u914d\u7f6e\u6587\u4ef6 config/app.php \uff0c\u8bbe\u7f6e locale \u53c2\u6570\u7684\u503c\u4e3a zh_CN \u3002","title":"1.\u5982\u4f55\u8bbe\u7f6e\u8bed\u8a00\u4e3a\u7b80\u4f53\u4e2d\u6587\uff1f"},{"location":"2.x/qa/#2laravel7utc","text":"\u8fd9\u4e2a\u662f Laravel7 \u5347\u7ea7\u540e\u5e26\u6765\u7684\u5751\uff0c\u539f\u56e0\u8bf7\u53c2\u8003 \u65e5\u671f\u5e8f\u5217\u5316 \u3002 \u5728\u672c\u9879\u76ee\u4e2d\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5f88\u7b80\u5355\uff0c\u53ea\u9700\u5728 Model \u4e2d\u5f15\u5165 Dcat\\Admin\\Traits\\HasDateTimeFormatter \u8fd9\u4e2a trait \u5373\u53ef\u3002 <?php namespace App\\Models; use Dcat\\Admin\\Traits\\HasDateTimeFormatter; use Illuminate\\Database\\Eloquent\\Model; class MyModel extends Model { use HasDateTimeFormatter; }","title":"2.Laravel7\u65f6\u95f4\u663e\u793a\u4e3aUTC\u683c\u5f0f"},{"location":"2.x/qa/#3array-to-string-conversion","text":"\u51fa\u73b0\u8fd9\u4e2a\u95ee\u9898\u662f\u56e0\u4e3a\u8868\u5355\u63d0\u4ea4\u7684\u503c\u6700\u540e\u8f6c\u6362\u6210\u4e86 array \u7c7b\u578b\uff0c\u800c MySQL \u662f\u4e0d\u652f\u6301\u76f4\u63a5\u5b58\u50a8 array \u7c7b\u578b\u6570\u636e\u7684\uff0c\u5728 dcat-admin \u4e2d\u53ef\u4ee5\u7528\u4ee5\u4e0b\u65b9\u5f0f\u5bf9\u6570\u636e\u683c\u5f0f\u8fdb\u884c\u8f6c\u6362 $form->multipleSelect('user_id')->saving(function ($v) { // \u8f6c\u4e3a , \u9694\u5f00\u7684\u5b57\u7b26\u4e32 return implode(',', $v); }); \u5f53\u7136\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7 model \u7684 \u4fee\u6539\u5668 \u53bb\u8f6c\u5316\u5b57\u6bb5\u7684\u503c\uff0c\u8fd9\u65b9\u9762\u5185\u5bb9\u53ef\u4ee5\u53c2\u8003 laravel \u6587\u6863\uff0c\u8fd9\u91cc\u5c31\u4e0d\u518d\u8d58\u8ff0\u3002 {tip} \u66f4\u4f18\u96c5\u7684\u8f6c\u5316\u503c\u65b9\u6cd5\uff0c\u53ef\u53c2\u8003 Dcat Admin \u6559\u7a0b - \u5982\u4f55\u4f18\u96c5\u5730\u66f4\u6539\u8868\u5355\u503c\u7684\u6570\u636e\u7c7b\u578b\uff1f","title":"3.\u8868\u5355\u4fdd\u5b58\u65f6\u62a5\u9519Array to string conversion"},{"location":"2.x/qa/#4laravel-admindcat-admin","text":"Dcat Admin \u6559\u7a0b - \u5982\u4f55\u4ece Laravel admin \u8fc1\u79fb\u5230 dcat admin\uff1f","title":"4.\u5982\u4f55\u4ecelaravel-admin\u8fc1\u79fb\u5230dcat-admin\uff1f"},{"location":"2.x/qa/#5","text":"\u65b9\u5f0f\u4e00\uff0c\u91cd\u5199\u767b\u9646\u63a7\u5236\u5668\u65b9\u6cd5\uff1a \u9ed8\u8ba4\u7684\u767b\u9646\u63a7\u5236\u5668\u7528\u7684\u662f App\\Admin\\AuthController \u8fd9\u4e2a\u7c7b\uff0c\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u53c2\u6570 admin.auth.controller \u8fdb\u884c\u4fee\u6539 <?php namespace App\\Admin\\Controllers; use Dcat\\Admin\\Controllers\\AuthController as BaseAuthController; class AuthController extends BaseAuthController { // \u81ea\u5b9a\u4e49\u767b\u9646view\u6a21\u677f protected $view = 'admin.login'; // \u91cd\u5199\u767b\u9646\u9875\u9762\u903b\u8f91 public function getLogin(Content $content) { ... } ... } \u65b9\u5f0f\u4e8c\uff0c\u8986\u5199\u8def\u7531\uff1a \u5728\u8def\u7531\u6587\u4ef6 app/Admin/routes.php \u4e2d\uff0c\u8986\u76d6\u6389\u767b\u9646\u9875\u9762\u548c\u767b\u9646\u903b\u8f91\u7684\u8def\u7531\uff0c\u5373\u53ef\u5b9e\u73b0\u81ea\u5b9a\u4e49\u7684\u529f\u80fd Route::group([ 'prefix' => config('admin.prefix'), 'namespace' => Admin::controllerNamespace(), 'middleware' => ['web', 'admin'], ], function (Router $router) { $router->get('auth/login', 'AuthController@getLogin'); $router->post('auth/login', 'AuthController@postLogin'); }); \u5728\u81ea\u5b9a\u4e49\u7684\u8def\u7531\u5668AuthController\u4e2d\u7684 getLogin \u3001 postLogin \u65b9\u6cd5\u91cc\u5206\u522b\u5b9e\u73b0\u81ea\u5df1\u7684\u767b\u9646\u9875\u9762\u548c\u767b\u9646\u903b\u8f91\u3002","title":"5.\u91cd\u5199\u767b\u9646\u9875\u9762\u548c\u767b\u9646\u903b\u8f91"},{"location":"2.x/qa/#6","text":"\u5982\u679c\u9047\u5230\u66f4\u65b0\u4e4b\u540e,\u90e8\u5206\u7ec4\u4ef6\u4e0d\u80fd\u6b63\u5e38\u4f7f\u7528,\u90a3\u6709\u53ef\u80fd\u662f dcat-admin \u81ea\u5e26\u7684\u9759\u6001\u8d44\u6e90\u6709\u66f4\u65b0\u4e86,\u9700\u8981\u8fd0\u884c\u547d\u4ee4 php artisan admin:publish --force \u6765\u91cd\u65b0\u53d1\u5e03\u524d\u7aef\u8d44\u6e90\uff0c\u53d1\u5e03\u4e4b\u540e\u4e0d\u8981\u5fd8\u8bb0\u6e05\u7406\u6d4f\u89c8\u5668\u7f13\u5b58.","title":"6.\u66f4\u65b0\u65b0\u7248\u672c\u540e\u51fa\u73b0\u5f02\u5e38"},{"location":"2.x/qa/#7","text":"\u5982\u679c\u4f60\u53d1\u73b0\u65e0\u6cd5\u4e0a\u4f20\u6587\u4ef6\uff0c\u90a3\u4e48\u901a\u5e38\u6709\u51e0\u4e0b\u51e0\u70b9\u539f\u56e0\uff1a Laravel \u6587\u4ef6\u4e0a\u4f20\u914d\u7f6e\u4e0d\u6b63\u786e\uff0c\u8bf7\u53c2\u8003\u6587\u6863 \u56fe\u7247/\u6587\u4ef6\u4e0a\u4f20 \u3002\u5982\u679c\u4f60\u4e0d\u4e86\u89e3 laravel \u6587\u4ef6\u4e0a\u4f20\u529f\u80fd\uff0c\u8bf7\u9605\u8bfb\u6587\u6863 Laravel - \u6587\u4ef6\u5b58\u50a8 \u6587\u4ef6\u8fc7\u5927\uff0c\u9700\u8981\u8c03\u6574 php.ini \u7684 upload_max_filesize \u53c2\u6570 \u6587\u4ef6\u4e0a\u4f20\u76ee\u5f55\u6ca1\u6709\u5199\u6743\u9650 php \u6ca1\u6709\u5b89\u88c5\u6216\u6ca1\u6709\u5f00\u542f fileinfo \u6269\u5c55 \u68c0\u67e5 php.ini \u7684 upload_tim_dir \u53c2\u6570\u8bbe\u7f6e\u662f\u5426\u6b63\u5e38 \u5982\u679c\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\u4e86\uff0c\u5374\u65e0\u6cd5\u6b63\u5e38\u8bbf\u95ee\uff0c\u90a3\u4e48\u53ef\u80fd\u662f .env \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 APP_URL \u53c2\u6570\u6ca1\u6709\u8bbe\u7f6e\u6b63\u786e\u3002","title":"7.\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\u6216\u65e0\u6cd5\u8bbf\u95ee\uff1f"},{"location":"2.x/qa/#8","text":"Dcat Admin \u662f\u652f\u6301\u524d\u7aef\u8d44\u6e90\u6309\u9700\u52a0\u8f7d\u7684\uff0c\u5728\u9700\u8981\u7528\u5230\u67d0\u4e2a\u7ec4\u4ef6\u7684\u65f6\u5019\u518d\u5f15\u5165\u524d\u7aef\u8d44\u6e90\u5373\u53ef\uff0c\u5f00\u53d1\u8005\u65e0\u9700\u62c5\u5fc3\u5b89\u88c5\u7ec4\u4ef6\u8fc7\u591a\u5f71\u54cd\u9875\u9762\u52a0\u8f7d\u901f\u5ea6\u3002 \u53ea\u6709\u90a3\u79cd\u9700\u8981\u5728\u5168\u5c40\u9875\u9762\u5f15\u5165\u7684\u8d44\u6e90\uff0c\u624d\u9700\u8981\u5728 app/Admin/bootstrap.php \u6216 ServiceProvider::boot \u65b9\u6cd5\u4e2d\u5f15\u5165\uff1a Admin::css('path/to/your/css'); Admin::js('path/to/your/js');","title":"8.\u5173\u4e8e\u524d\u7aef\u8d44\u6e90\u52a0\u8f7d\u95ee\u9898"},{"location":"2.x/qa/#9","text":"\u8fd9\u4e2a\u539f\u56e0\u53ef\u80fd\u662f\u7531\u4e8e\u6743\u9650\u7684 URL \u8def\u5f84\u914d\u7f6e\u9519\u8bef\u5bfc\u81f4\u7684\uff0c\u6b63\u786e\u7684\u5305\u542b\u589e\u5220\u6539\u67e5\u529f\u80fd\u7684 URL \u914d\u7f6e\u5e94\u8be5\u662f auth/users* \u8fd9\u6837\u7684\uff0c\u5982\u679c\u914d\u7f6e\u6210\u4e86 auth/users/* \uff0c\u90a3\u4e48\u5c31\u4f1a\u63d0\u793a\u65e0\u6743\u8bbf\u95ee\u3002 {tip} \u53e6\u5916\u6807\u7b7e\u8868\u5355\u586b\u5199\u81ea\u5b9a\u4e49URL\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a\u4e00\u79cd\u662f\u9009\u4e2d\u540e\u6309 \u5220\u9664\u952e \u8fdb\u884c\u66f4\u6539\uff1b\u53e6\u4e00\u79cd\u662f\u586b\u5199\u540e\u6309 \u7a7a\u683c\u952e + \u56de\u8f66\u952e \u3002","title":"9.\u4e3a\u4f55\u914d\u7f6e\u4e86\u89d2\u8272\u548c\u6743\u9650\uff0c\u4f9d\u7136\u63d0\u793a\u65e0\u6743\u8bbf\u95ee\uff1f"},{"location":"2.x/qa/#10","text":"\u8fd9\u4e2a\u95ee\u9898\u662f\u56e0\u4e3a\u6ca1\u6709\u7ed9\u83dc\u5355\u7ed1\u5b9a\u6743\u9650\u6216\u8005\u89d2\u8272\uff0c\u7ed9\u60f3\u8981\u65e0\u6743\u4e0d\u663e\u793a\u7684\u83dc\u5355\u7ed1\u5b9a\u6743\u9650\u6216\u8005\u89d2\u8272\u5373\u53ef\u3002","title":"10.\u4e3a\u4f55\u6ca1\u6709\u6743\u9650\u7684\u83dc\u5355\u4e0d\u4f1a\u81ea\u52a8\u9690\u85cf\uff1f"},{"location":"2.x/qa/#11https","text":"\u9700\u8981\u628a\u914d\u7f6e\u6587\u4ef6\u7684 admin.https \u53c2\u6570\u7684\u503c\u8bbe\u7f6e\u4e3a true","title":"11.\u9879\u76ee\u4f7f\u7528HTTPS\u4e4b\u540e\u65e0\u6cd5\u767b\u9646"},{"location":"2.x/qa/#12getxxx","text":"Dcat Admin \u4f7f\u7528\u7684\u662f jQuery3.x \uff0c $.get \u65b9\u6cd5\u5728 jQuery3.x \u4e2d\u5df2\u7ecf\u88ab\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528 $.ajax \u4ee3\u66ff","title":"12.$.get(xxx) \u6ca1\u6709\u53cd\u5e94"},{"location":"2.x/qa/#13","text":"\u51fa\u73b0\u8fd9\u4e2a\u95ee\u9898\u7684\u539f\u56e0\u5f88\u53ef\u80fd\u662f\u56e0\u4e3a Model \u4e2d\u8bbe\u7f6e\u4e86\u56fe\u7247\u76f8\u5173\u5b57\u6bb5\u7684\u8bbf\u95ee\u5668\uff0c\u5982 class User extend Model { public function getAvatarAttribute() { return Storage::disk('admin')->url($this->avatar); } } \u8fd9\u79cd\u60c5\u51b5\u4e0b\u4f1a\u51fa\u73b0\u81ea\u52a8\u5220\u9664\u5df2\u4e0a\u4f20\u56fe\u7247\u7684\u60c5\u51b5\uff0c\u89e3\u51b3\u65b9\u6cd5\u4e5f\u5f88\u7b80\u5355\uff0c\u628a\u8bbf\u95ee\u5668\u6539\u6210\u81ea\u5b9a\u4e49\u65b9\u6cd5\u5373\u53ef class User extend Model { public function getAvatar() { return Storage::disk('admin')->url($this->avatar); } }","title":"13.\u4e0a\u4f20\u7684\u56fe\u7247\u7ecf\u5e38\u83ab\u540d\u5176\u5999\u81ea\u52a8\u5220\u9664\uff1f"},{"location":"2.x/qa/#14session","text":"\u4ece 2.0 \u7684\u7248\u672c\u4e4b\u540e admin.session \u4e2d\u95f4\u4ef6\u4e0d\u518d\u9ed8\u8ba4\u542f\u7528\uff0c\u5982\u679c\u60a8\u7684\u5e94\u7528\u540c\u65f6\u6709\u524d\u53f0\u548c\u540e\u53f0\uff0c\u5219\u9700\u8981\u5f00\u542f admin.session \u4e2d\u95f4\u4ef6\uff0c\u5426\u5219\u4f1a\u9020\u6210\u524d\u540e\u53f0 session \u51b2\u7a81\u95ee\u9898\u3002 \u628a\u914d\u7f6e\u53c2\u6570 admin.route.enable_session_middleware \u7684\u503c\u8bbe\u7f6e\u4e3a true \u5373\u53ef\u5f00\u542f 'route' => [ 'domain' => env('ADMIN_ROUTE_DOMAIN'), 'prefix' => env('ADMIN_ROUTE_PREFIX', 'admin'), 'namespace' => 'App\\\\Admin\\\\Controllers', 'middleware' => ['web', 'admin'], // \u5f00\u542f admin.session \u4e2d\u95f4\u4ef6 'enable_session_middleware' => true, ],","title":"14.\u524d\u540e\u53f0session\u53d1\u751f\u51b2\u7a81"},{"location":"2.x/qa/#15","text":"\u56fe\u7247\u8bf7\u6c42\u9ed8\u8ba4\u4f1a\u53bb\u6389 referer \u5b57\u6bb5\uff0c\u5982\u679c\u6709\u9632\u76d7\u94fe\u8981\u6c42\uff0c\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6( config/admin.php )\u4e2d\u8bbe\u7f6e\uff1a \"disable_no_referrer_meta\" => true","title":"15.\u56fe\u7247\u9632\u76d7\u94fe"},{"location":"2.x/quick-start/","text":"\u5feb\u901f\u5f00\u59cb \u5728\u65e5\u5e38\u5f00\u53d1\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u4ee3\u7801\u751f\u6210\u5668\u4e00\u952e\u751f\u6210\u589e\u5220\u6539\u67e5\u9875\u9762\u4ee3\u7801\uff0c\u975e\u5e38\u7684\u65b9\u4fbf\u5feb\u6377\u3002 \u4e0b\u9762\u5c06\u4f1a\u7ed9\u5927\u5bb6\u4ecb\u7ecd\u4ee3\u7801\u751f\u6210\u5668\u7684\u4f7f\u7528\u65b9\u6cd5\uff0c\u4ee5\u53ca\u4e00\u4e2a\u589e\u5220\u6539\u67e5\u9875\u9762\u7684\u57fa\u672c\u6784\u6210\u3002\u901a\u8fc7\u5b66\u4e60\u4e0b\u9762\u7684\u5185\u5bb9\u5c06\u53ef\u4ee5\u5e2e\u52a9\u5927\u5bb6\u5feb\u901f\u7406\u89e3\u8fd9\u4e2a\u7cfb\u7edf\u7684\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5\u3002 \u4ee3\u7801\u751f\u6210\u5668 \u521b\u5efa\u6570\u636e\u8868 \u5b89\u88c5\u5b8c Laravel \u4e4b\u540e\u4f1a\u5185\u7f6e\u4e00\u4e2a users \u8868\u7684 migration \u6587\u4ef6(\u5982\u679c\u4e0d\u4e86\u89e3 migration \u6587\u4ef6\u4f5c\u7528\uff0c\u8bf7\u53c2\u8003\u6587\u6863 \u6570\u636e\u5e93\u8fc1\u79fb )\uff0c\u6587\u4ef6\u8def\u5f84\u4e3a database/migrations/2014_10_12_000000_create_users_table.php \u3002 \u7136\u540e\u6211\u4eec\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5728 MySQL \u4e2d\u521b\u5efa\u8fd9\u4e2a\u6570\u636e\u8868 php artisan migrate \u8fd0\u884c\u5b8c\u4e4b\u540e\u53ef\u4ee5\u770b\u5230\u6570\u636e\u5e93\u4e2d\u5df2\u7ecf\u591a\u4e86\u4e00\u4e2a users \u8868\uff0c\u7ed3\u6784\u5982\u4e0b CREATE TABLE `users` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `password` varchar(60) COLLATE utf8_unicode_ci NOT NULL, `remember_token` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`), UNIQUE KEY `users_email_unique` (`email`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci \u4e00\u952e\u751f\u6210\u589e\u5220\u6539\u67e5\u9875\u9762 {tip} \u5982\u679c\u4f60\u7684\u5f00\u53d1\u73af\u5883\u4e0d\u662f windows \uff0c\u8bf7\u6ce8\u610f\u8981\u7ed9\u9879\u76ee\u76ee\u5f55\u8bbe\u7f6e\u8bfb\u5199\u6743\u9650\uff0c\u5426\u5219\u53ef\u80fd\u51fa\u73b0\u65e0\u6cd5\u751f\u6210\u4ee3\u7801\u7684\u60c5\u51b5\u3002 1. \u9996\u5148\u6253\u5f00\u5730\u5740 http://\u4f60\u7684\u57df\u540d/admin/helpers/scaffold \uff0c\u8fdb\u5165\u4ee3\u7801\u751f\u6210\u5668\u9875\u9762\uff1b 2. \u7531\u4e8e\u524d\u9762\u5df2\u7ecf\u521b\u5efa\u597d\u4e86\u6570\u636e\u8868\uff0c\u6240\u4ee5\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u9875\u9762\u5de6\u4e0a\u89d2\u7684\u7b2c\u4e8c\u4e2a\u4e0b\u62c9\u9009\u6846\u9009\u62e9 users \u8868\uff0c\u9009\u62e9\u4e4b\u540e\u4f1a\u81ea\u52a8\u586b\u5145\u5b57\u6bb5\u4fe1\u606f\uff0c\u6548\u679c\u5982\u4e0b 3. \u4fee\u6539\u6a21\u578b\u540d\u79f0\u4e3a App\\User 4. \u7531\u4e8e migration \u6587\u4ef6\u3001\u6570\u636e\u8868\u3001\u4ee5\u53ca\u6a21\u578b\u6587\u4ef6(\u4f7f\u7528\u5185\u7f6e\u7684 App\\User \u5373\u53ef)\u90fd\u5df2\u7ecf\u6709\u4e86\uff0c\u6240\u4ee5\u6b64\u5904\u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u4e09\u4e2a\u9009\u9879\u7ed9\u53bb\u6389 5. \u586b\u5199\u5b57\u6bb5\u7ffb\u8bd1 \u6700\u540e\u5448\u73b0\u6548\u679c\u5982\u4e0b \u6700\u540e\u70b9\u51fb\u521b\u5efa\u6309\u94ae\u5373\u53ef\uff0c\u521b\u5efa\u7684\u6587\u4ef6\u5982\u4e0b app/Admin \u251c\u2500\u2500 Controllers \u2502 \u2514\u2500\u2500 UserController.php # \u63a7\u5236\u5668 \u2514\u2500\u2500 Repositories # \u6570\u636e\u4ed3\u5e93 \u2502 \u2514\u2500\u2500 User.php resouces/lang/{\u5f53\u524d\u8bed\u8a00} \u2514\u2500\u2500 user.php # \u8bed\u8a00\u5305 \u6dfb\u52a0\u8def\u7531\u914d\u7f6e \u6253\u5f00\u8def\u7531\u914d\u7f6e\u6587\u4ef6 app/Admin/routes.php \uff0c\u5f80\u91cc\u9762\u6dfb\u52a0\u4e00\u884c\uff1a $router->resource('users', 'UserController'); \u5230\u6b64\uff0c\u5c31\u53ef\u4ee5\u6253\u5f00\u6d4f\u89c8\u5668\u8f93\u5165\u5730\u5740 http://\u4f60\u7684\u57df\u540d/admin/users \u8bbf\u95ee\u521a\u521a\u521b\u5efa\u5b8c\u7684\u9875\u9762\u4e86 \u6dfb\u52a0\u5de6\u4fa7\u83dc\u5355 \u6253\u5f00 http://\u4f60\u7684\u57df\u540d/admin/auth/menu \uff0c\u6dfb\u52a0\u5bf9\u5e94\u7684menu, \u7136\u540e\u5c31\u80fd\u5728\u540e\u53f0\u7ba1\u7406\u9875\u9762\u7684\u5de6\u4fa7\u8fb9\u680f\u770b\u5230\u7528\u6237\u7ba1\u7406\u9875\u9762\u7684\u94fe\u63a5\u5165\u53e3\u4e86\u3002 \u5176\u4e2d uri \u586b\u5199\u4e0d\u5305\u542b\u8def\u7531\u524d\u7f00\u7684\u7684\u8def\u5f84\u90e8\u5206\uff0c\u6bd4\u5982\u5b8c\u6574\u8def\u5f84\u662f http://\u4f60\u7684\u57df\u540d/admin/demo/users , \u90a3\u4e48\u5c31\u586b demo/users \uff0c\u5982\u679c\u8981\u6dfb\u52a0\u5916\u90e8\u94fe\u63a5\uff0c\u53ea\u8981\u586b\u5199\u5b8c\u6574\u7684url\u5373\u53ef\uff0c\u6bd4\u5982 http://dcat-admin.org/ . \u83dc\u5355\u7ffb\u8bd1 \u5728\u60a8\u7684\u8bed\u8a00\u6587\u4ef6\u7684 menu_titles \u7d22\u5f15\u4e2d\u8ffd\u52a0\u83dc\u5355\u6807\u9898\u3002 \u4f8b\u5982\u201c\u5de5\u4f5c\u5355\u4f4d\u201d\u6807\u9898\uff1a \u5728 resources/lang/{\u5f53\u524d\u8bed\u8a00}/menu.php \u4e2d ... // \u7528_\u5c0f\u5199\u5e76\u7528_\u66ff\u6362\u7a7a\u683c 'titles' => [ 'work_units' => 'Unidades de trabajo' ], \u5b8c\u6210 \u8fd9\u6837\u4e00\u4e2a\u7b80\u5355\u7684 CURD \u529f\u80fd\u5c31\u6784\u5efa\u5b8c\u6210\u4e86\uff0c\u5269\u4e0b\u7684\u5de5\u4f5c\u5c31\u662f\u6df1\u5ea6\u6784\u5efa\u6570\u636e\u8868\u683c\u548c\u8868\u5355\u4e86\uff0c\u6253\u5f00 app/Admin/Contollers/UserController.php ,\u627e\u5230 form() \u548c grid() \u65b9\u6cd5\uff0c\u7136\u6dfb\u52a0\u6784\u5efa\u4ee3\u7801\u3002 \u66f4\u591a\u8be6\u7ec6\u4f7f\u7528\u8bf7\u67e5\u770b \u6570\u636e\u8868\u683c \u548c \u6570\u636e\u8868\u5355 \u3002 \u589e\u5220\u6539\u67e5\u529f\u80fd\u7b80\u6613\u8bf4\u660e \u4e3a\u4e86\u4fbf\u4e8e\u5927\u5bb6\u7406\u89e3\u589e\u5220\u6539\u67e5\u529f\u80fd\u7684\u57fa\u672c\u7528\u6cd5\uff0c\u4e0b\u9762\u5c06\u7ed9\u5927\u5bb6\u7b80\u5355\u4ecb\u7ecd\u524d\u9762\u4f7f\u7528\u751f\u6210\u5668\u751f\u6210\u7684\u4ee3\u7801\u3002 \u63a7\u5236\u5668 Dcat Admin \u7684\u589e\u5220\u6539\u67e5\u9875\u9762\u4ee3\u7801\u662f\u975e\u5e38\u7b80\u6d01\u548c\u6613\u61c2\u7684\uff0c\u5bf9\u5f00\u53d1\u8005\u975e\u5e38\u7684\u53cb\u597d\uff0c\u53ea\u9700\u6781\u5c11\u7684\u4ee3\u7801\u5373\u53ef\u6784\u5efa\u51fa\u4e00\u4e2a\u529f\u80fd\u5b8c\u5584\u7684\u540e\u53f0\u7cfb\u7edf\uff0c\u5e76\u4e14\u975e\u5e38\u7b80\u5355\u7075\u6d3b\u548c\u6613\u4e8e\u6269\u5c55\u3002 \u6253\u5f00 app/Admin/Controllers/UserController.php \u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4ee3\u7801 <?php namespace App\\Admin\\Controllers; use App\\Admin\\Repositories\\User; use Dcat\\Admin\\Form; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Show; use Dcat\\Admin\\Http\\Controllers\\AdminController; class UserController extends AdminController { /** * Make a grid builder. * * @return Grid */ protected function grid() { return Grid::make(new User(), function (Grid $grid) { // \u8fd9\u91cc\u7684\u5b57\u6bb5\u4f1a\u81ea\u52a8\u4f7f\u7528\u7ffb\u8bd1\u6587\u4ef6 $grid->column('id')->sortable(); $grid->column('name'); $grid->column('email'); $grid->column('email_verified_at'); $grid->column('password'); $grid->column('remember_token'); $grid->column('created_at'); $grid->column('updated_at')->sortable(); $grid->filter(function (Grid\\Filter $filter) { $filter->equal('id'); }); }); } /** * Make a show builder. * * @param mixed $id * * @return Show */ protected function detail($id) { return Show::make($id, new User(), function (Show $show) { // \u8fd9\u91cc\u7684\u5b57\u6bb5\u4f1a\u81ea\u52a8\u4f7f\u7528\u7ffb\u8bd1\u6587\u4ef6 $show->field('id'); $show->field('name'); $show->field('email'); $show->field('email_verified_at'); $show->field('password'); $show->field('remember_token'); $show->field('created_at'); $show->field('updated_at'); }); } /** * Make a form builder. * * @return Form */ protected function form() { return Form::make(new User(), function (Form $form) { // \u8fd9\u91cc\u7684\u5b57\u6bb5\u4f1a\u81ea\u52a8\u4f7f\u7528\u7ffb\u8bd1\u6587\u4ef6 $form->display('id'); $form->text('name'); $form->text('email'); $form->text('email_verified_at'); $form->text('password'); $form->text('remember_token'); $form->display('created_at'); $form->display('updated_at'); }); } } \u6570\u636e\u4ed3\u5e93 Dcat Admin \u6784\u5efa\u9875\u9762\u5e76\u4e0d\u76f4\u63a5\u4f9d\u8d56\u4e8e Model \uff0c\u800c\u662f\u5f15\u5165\u4e86\u6570\u636e\u4ed3\u5e93\u4f5c\u4e3a\u4e2d\u95f4\u5c42\uff0c\u8ba9\u9875\u9762\u7684\u6784\u5efa\u4e0d\u518d\u4e0e\u6570\u636e\u7684\u8bfb\u5199\u4ea7\u751f\u5f3a\u8026\u5408\u5173\u7cfb\u3002 \u6570\u636e\u4ed3\u5e93\u662f Dcat Admin \u4e2d\u5bf9\u6570\u636e\u589e\u5220\u6539\u67e5\u64cd\u4f5c\u63a5\u53e3\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u66f4\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003 \u6570\u636e\u4ed3\u5e93 \u3002 {tip} \u5982\u679c\u4f60\u7684\u6570\u636e\u6765\u81ea MySQL \uff0c\u90a3\u4e48\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 Model \u5b9e\u4f8b\uff0c\u5e95\u5c42\u4f1a\u81ea\u52a8\u628a Model \u8f6c\u5316\u4e3a\u6570\u636e\u4ed3\u5e93\u5b9e\u4f8b\u3002\u8fd9\u91cc\u4e3a\u4e86\u4fbf\u4e8e\u5927\u5bb6\u7406\u89e3\u5176\u4e2d\u7684\u6982\u5ff5\uff0c\u6240\u4ee5\u521b\u5efa\u4e86\u6570\u636e\u4ed3\u5e93\u6587\u4ef6\u3002 \u6211\u4eec\u6253\u5f00\u521a\u521a\u751f\u6210\u7684\u6587\u4ef6 app/Admin/Repositories/User.php \uff0c\u53ef\u4ee5\u770b\u5230\u53ea\u6709\u5982\u4e0b\u5185\u5bb9\uff0c\u975e\u5e38\u7b80\u5355 <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use App\\User as UserModel; class User extends EloquentRepository { protected $eloquentClass = UserModel::class; } \u8bed\u8a00\u5305 \u6bcf\u4e2a\u63a7\u5236\u5668\u90fd\u53ef\u4ee5\u751f\u6210\u81ea\u5df1\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\uff0c\u5e76\u4e14 \u6570\u636e\u8868\u683c \u3001 \u6570\u636e\u8868\u5355 \u548c \u6570\u636e\u8be6\u60c5 \u529f\u80fd\u90fd\u4f1a\u81ea\u52a8\u8bfb\u53d6\u91cc\u9762\u7684\u7ffb\u8bd1\u3002 \u4e0b\u9762\u6211\u4eec\u6253\u5f00 UserController \u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u6587\u4ef6 resouces/lang/{\u5f53\u524d\u8bed\u8a00}/user.php <?php return [ // labels\u662f\u81ea\u5b9a\u4e49\u6807\u7b7e\u7ffb\u8bd1 'labels' => [ // \u8fd9\u4e2a\u662f\u9875\u9762 title \u7ffb\u8bd1 'User' => '\u7528\u6237', ], // \u8868\u5b57\u6bb5\u7ffb\u8bd1 'fields' => [ 'name' => '\u540d\u79f0', 'email' => '\u90ae\u7bb1', 'email_verified_at' => '\u9a8c\u8bc1\u65f6\u95f4', 'password' => '\u5bc6\u7801', 'remember_token' => 'remember_token', ], 'options' => [ ], ];","title":"\u5feb\u901f\u5f00\u59cb"},{"location":"2.x/quick-start/#_1","text":"\u5728\u65e5\u5e38\u5f00\u53d1\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u4ee3\u7801\u751f\u6210\u5668\u4e00\u952e\u751f\u6210\u589e\u5220\u6539\u67e5\u9875\u9762\u4ee3\u7801\uff0c\u975e\u5e38\u7684\u65b9\u4fbf\u5feb\u6377\u3002 \u4e0b\u9762\u5c06\u4f1a\u7ed9\u5927\u5bb6\u4ecb\u7ecd\u4ee3\u7801\u751f\u6210\u5668\u7684\u4f7f\u7528\u65b9\u6cd5\uff0c\u4ee5\u53ca\u4e00\u4e2a\u589e\u5220\u6539\u67e5\u9875\u9762\u7684\u57fa\u672c\u6784\u6210\u3002\u901a\u8fc7\u5b66\u4e60\u4e0b\u9762\u7684\u5185\u5bb9\u5c06\u53ef\u4ee5\u5e2e\u52a9\u5927\u5bb6\u5feb\u901f\u7406\u89e3\u8fd9\u4e2a\u7cfb\u7edf\u7684\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5\u3002","title":"\u5feb\u901f\u5f00\u59cb"},{"location":"2.x/quick-start/#_2","text":"","title":"\u4ee3\u7801\u751f\u6210\u5668"},{"location":"2.x/quick-start/#_3","text":"\u5b89\u88c5\u5b8c Laravel \u4e4b\u540e\u4f1a\u5185\u7f6e\u4e00\u4e2a users \u8868\u7684 migration \u6587\u4ef6(\u5982\u679c\u4e0d\u4e86\u89e3 migration \u6587\u4ef6\u4f5c\u7528\uff0c\u8bf7\u53c2\u8003\u6587\u6863 \u6570\u636e\u5e93\u8fc1\u79fb )\uff0c\u6587\u4ef6\u8def\u5f84\u4e3a database/migrations/2014_10_12_000000_create_users_table.php \u3002 \u7136\u540e\u6211\u4eec\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5728 MySQL \u4e2d\u521b\u5efa\u8fd9\u4e2a\u6570\u636e\u8868 php artisan migrate \u8fd0\u884c\u5b8c\u4e4b\u540e\u53ef\u4ee5\u770b\u5230\u6570\u636e\u5e93\u4e2d\u5df2\u7ecf\u591a\u4e86\u4e00\u4e2a users \u8868\uff0c\u7ed3\u6784\u5982\u4e0b CREATE TABLE `users` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `password` varchar(60) COLLATE utf8_unicode_ci NOT NULL, `remember_token` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00', PRIMARY KEY (`id`), UNIQUE KEY `users_email_unique` (`email`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci","title":"\u521b\u5efa\u6570\u636e\u8868"},{"location":"2.x/quick-start/#_4","text":"{tip} \u5982\u679c\u4f60\u7684\u5f00\u53d1\u73af\u5883\u4e0d\u662f windows \uff0c\u8bf7\u6ce8\u610f\u8981\u7ed9\u9879\u76ee\u76ee\u5f55\u8bbe\u7f6e\u8bfb\u5199\u6743\u9650\uff0c\u5426\u5219\u53ef\u80fd\u51fa\u73b0\u65e0\u6cd5\u751f\u6210\u4ee3\u7801\u7684\u60c5\u51b5\u3002 1. \u9996\u5148\u6253\u5f00\u5730\u5740 http://\u4f60\u7684\u57df\u540d/admin/helpers/scaffold \uff0c\u8fdb\u5165\u4ee3\u7801\u751f\u6210\u5668\u9875\u9762\uff1b 2. \u7531\u4e8e\u524d\u9762\u5df2\u7ecf\u521b\u5efa\u597d\u4e86\u6570\u636e\u8868\uff0c\u6240\u4ee5\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u9875\u9762\u5de6\u4e0a\u89d2\u7684\u7b2c\u4e8c\u4e2a\u4e0b\u62c9\u9009\u6846\u9009\u62e9 users \u8868\uff0c\u9009\u62e9\u4e4b\u540e\u4f1a\u81ea\u52a8\u586b\u5145\u5b57\u6bb5\u4fe1\u606f\uff0c\u6548\u679c\u5982\u4e0b 3. \u4fee\u6539\u6a21\u578b\u540d\u79f0\u4e3a App\\User 4. \u7531\u4e8e migration \u6587\u4ef6\u3001\u6570\u636e\u8868\u3001\u4ee5\u53ca\u6a21\u578b\u6587\u4ef6(\u4f7f\u7528\u5185\u7f6e\u7684 App\\User \u5373\u53ef)\u90fd\u5df2\u7ecf\u6709\u4e86\uff0c\u6240\u4ee5\u6b64\u5904\u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u4e09\u4e2a\u9009\u9879\u7ed9\u53bb\u6389 5. \u586b\u5199\u5b57\u6bb5\u7ffb\u8bd1 \u6700\u540e\u5448\u73b0\u6548\u679c\u5982\u4e0b \u6700\u540e\u70b9\u51fb\u521b\u5efa\u6309\u94ae\u5373\u53ef\uff0c\u521b\u5efa\u7684\u6587\u4ef6\u5982\u4e0b app/Admin \u251c\u2500\u2500 Controllers \u2502 \u2514\u2500\u2500 UserController.php # \u63a7\u5236\u5668 \u2514\u2500\u2500 Repositories # \u6570\u636e\u4ed3\u5e93 \u2502 \u2514\u2500\u2500 User.php resouces/lang/{\u5f53\u524d\u8bed\u8a00} \u2514\u2500\u2500 user.php # \u8bed\u8a00\u5305","title":"\u4e00\u952e\u751f\u6210\u589e\u5220\u6539\u67e5\u9875\u9762"},{"location":"2.x/quick-start/#_5","text":"\u6253\u5f00\u8def\u7531\u914d\u7f6e\u6587\u4ef6 app/Admin/routes.php \uff0c\u5f80\u91cc\u9762\u6dfb\u52a0\u4e00\u884c\uff1a $router->resource('users', 'UserController'); \u5230\u6b64\uff0c\u5c31\u53ef\u4ee5\u6253\u5f00\u6d4f\u89c8\u5668\u8f93\u5165\u5730\u5740 http://\u4f60\u7684\u57df\u540d/admin/users \u8bbf\u95ee\u521a\u521a\u521b\u5efa\u5b8c\u7684\u9875\u9762\u4e86","title":"\u6dfb\u52a0\u8def\u7531\u914d\u7f6e"},{"location":"2.x/quick-start/#_6","text":"\u6253\u5f00 http://\u4f60\u7684\u57df\u540d/admin/auth/menu \uff0c\u6dfb\u52a0\u5bf9\u5e94\u7684menu, \u7136\u540e\u5c31\u80fd\u5728\u540e\u53f0\u7ba1\u7406\u9875\u9762\u7684\u5de6\u4fa7\u8fb9\u680f\u770b\u5230\u7528\u6237\u7ba1\u7406\u9875\u9762\u7684\u94fe\u63a5\u5165\u53e3\u4e86\u3002 \u5176\u4e2d uri \u586b\u5199\u4e0d\u5305\u542b\u8def\u7531\u524d\u7f00\u7684\u7684\u8def\u5f84\u90e8\u5206\uff0c\u6bd4\u5982\u5b8c\u6574\u8def\u5f84\u662f http://\u4f60\u7684\u57df\u540d/admin/demo/users , \u90a3\u4e48\u5c31\u586b demo/users \uff0c\u5982\u679c\u8981\u6dfb\u52a0\u5916\u90e8\u94fe\u63a5\uff0c\u53ea\u8981\u586b\u5199\u5b8c\u6574\u7684url\u5373\u53ef\uff0c\u6bd4\u5982 http://dcat-admin.org/ .","title":"\u6dfb\u52a0\u5de6\u4fa7\u83dc\u5355"},{"location":"2.x/quick-start/#_7","text":"\u5728\u60a8\u7684\u8bed\u8a00\u6587\u4ef6\u7684 menu_titles \u7d22\u5f15\u4e2d\u8ffd\u52a0\u83dc\u5355\u6807\u9898\u3002 \u4f8b\u5982\u201c\u5de5\u4f5c\u5355\u4f4d\u201d\u6807\u9898\uff1a \u5728 resources/lang/{\u5f53\u524d\u8bed\u8a00}/menu.php \u4e2d ... // \u7528_\u5c0f\u5199\u5e76\u7528_\u66ff\u6362\u7a7a\u683c 'titles' => [ 'work_units' => 'Unidades de trabajo' ],","title":"\u83dc\u5355\u7ffb\u8bd1"},{"location":"2.x/quick-start/#_8","text":"\u8fd9\u6837\u4e00\u4e2a\u7b80\u5355\u7684 CURD \u529f\u80fd\u5c31\u6784\u5efa\u5b8c\u6210\u4e86\uff0c\u5269\u4e0b\u7684\u5de5\u4f5c\u5c31\u662f\u6df1\u5ea6\u6784\u5efa\u6570\u636e\u8868\u683c\u548c\u8868\u5355\u4e86\uff0c\u6253\u5f00 app/Admin/Contollers/UserController.php ,\u627e\u5230 form() \u548c grid() \u65b9\u6cd5\uff0c\u7136\u6dfb\u52a0\u6784\u5efa\u4ee3\u7801\u3002 \u66f4\u591a\u8be6\u7ec6\u4f7f\u7528\u8bf7\u67e5\u770b \u6570\u636e\u8868\u683c \u548c \u6570\u636e\u8868\u5355 \u3002","title":"\u5b8c\u6210"},{"location":"2.x/quick-start/#_9","text":"\u4e3a\u4e86\u4fbf\u4e8e\u5927\u5bb6\u7406\u89e3\u589e\u5220\u6539\u67e5\u529f\u80fd\u7684\u57fa\u672c\u7528\u6cd5\uff0c\u4e0b\u9762\u5c06\u7ed9\u5927\u5bb6\u7b80\u5355\u4ecb\u7ecd\u524d\u9762\u4f7f\u7528\u751f\u6210\u5668\u751f\u6210\u7684\u4ee3\u7801\u3002","title":"\u589e\u5220\u6539\u67e5\u529f\u80fd\u7b80\u6613\u8bf4\u660e"},{"location":"2.x/quick-start/#_10","text":"Dcat Admin \u7684\u589e\u5220\u6539\u67e5\u9875\u9762\u4ee3\u7801\u662f\u975e\u5e38\u7b80\u6d01\u548c\u6613\u61c2\u7684\uff0c\u5bf9\u5f00\u53d1\u8005\u975e\u5e38\u7684\u53cb\u597d\uff0c\u53ea\u9700\u6781\u5c11\u7684\u4ee3\u7801\u5373\u53ef\u6784\u5efa\u51fa\u4e00\u4e2a\u529f\u80fd\u5b8c\u5584\u7684\u540e\u53f0\u7cfb\u7edf\uff0c\u5e76\u4e14\u975e\u5e38\u7b80\u5355\u7075\u6d3b\u548c\u6613\u4e8e\u6269\u5c55\u3002 \u6253\u5f00 app/Admin/Controllers/UserController.php \u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4ee3\u7801 <?php namespace App\\Admin\\Controllers; use App\\Admin\\Repositories\\User; use Dcat\\Admin\\Form; use Dcat\\Admin\\Grid; use Dcat\\Admin\\Show; use Dcat\\Admin\\Http\\Controllers\\AdminController; class UserController extends AdminController { /** * Make a grid builder. * * @return Grid */ protected function grid() { return Grid::make(new User(), function (Grid $grid) { // \u8fd9\u91cc\u7684\u5b57\u6bb5\u4f1a\u81ea\u52a8\u4f7f\u7528\u7ffb\u8bd1\u6587\u4ef6 $grid->column('id')->sortable(); $grid->column('name'); $grid->column('email'); $grid->column('email_verified_at'); $grid->column('password'); $grid->column('remember_token'); $grid->column('created_at'); $grid->column('updated_at')->sortable(); $grid->filter(function (Grid\\Filter $filter) { $filter->equal('id'); }); }); } /** * Make a show builder. * * @param mixed $id * * @return Show */ protected function detail($id) { return Show::make($id, new User(), function (Show $show) { // \u8fd9\u91cc\u7684\u5b57\u6bb5\u4f1a\u81ea\u52a8\u4f7f\u7528\u7ffb\u8bd1\u6587\u4ef6 $show->field('id'); $show->field('name'); $show->field('email'); $show->field('email_verified_at'); $show->field('password'); $show->field('remember_token'); $show->field('created_at'); $show->field('updated_at'); }); } /** * Make a form builder. * * @return Form */ protected function form() { return Form::make(new User(), function (Form $form) { // \u8fd9\u91cc\u7684\u5b57\u6bb5\u4f1a\u81ea\u52a8\u4f7f\u7528\u7ffb\u8bd1\u6587\u4ef6 $form->display('id'); $form->text('name'); $form->text('email'); $form->text('email_verified_at'); $form->text('password'); $form->text('remember_token'); $form->display('created_at'); $form->display('updated_at'); }); } }","title":"\u63a7\u5236\u5668"},{"location":"2.x/quick-start/#_11","text":"Dcat Admin \u6784\u5efa\u9875\u9762\u5e76\u4e0d\u76f4\u63a5\u4f9d\u8d56\u4e8e Model \uff0c\u800c\u662f\u5f15\u5165\u4e86\u6570\u636e\u4ed3\u5e93\u4f5c\u4e3a\u4e2d\u95f4\u5c42\uff0c\u8ba9\u9875\u9762\u7684\u6784\u5efa\u4e0d\u518d\u4e0e\u6570\u636e\u7684\u8bfb\u5199\u4ea7\u751f\u5f3a\u8026\u5408\u5173\u7cfb\u3002 \u6570\u636e\u4ed3\u5e93\u662f Dcat Admin \u4e2d\u5bf9\u6570\u636e\u589e\u5220\u6539\u67e5\u64cd\u4f5c\u63a5\u53e3\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u66f4\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003 \u6570\u636e\u4ed3\u5e93 \u3002 {tip} \u5982\u679c\u4f60\u7684\u6570\u636e\u6765\u81ea MySQL \uff0c\u90a3\u4e48\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 Model \u5b9e\u4f8b\uff0c\u5e95\u5c42\u4f1a\u81ea\u52a8\u628a Model \u8f6c\u5316\u4e3a\u6570\u636e\u4ed3\u5e93\u5b9e\u4f8b\u3002\u8fd9\u91cc\u4e3a\u4e86\u4fbf\u4e8e\u5927\u5bb6\u7406\u89e3\u5176\u4e2d\u7684\u6982\u5ff5\uff0c\u6240\u4ee5\u521b\u5efa\u4e86\u6570\u636e\u4ed3\u5e93\u6587\u4ef6\u3002 \u6211\u4eec\u6253\u5f00\u521a\u521a\u751f\u6210\u7684\u6587\u4ef6 app/Admin/Repositories/User.php \uff0c\u53ef\u4ee5\u770b\u5230\u53ea\u6709\u5982\u4e0b\u5185\u5bb9\uff0c\u975e\u5e38\u7b80\u5355 <?php namespace App\\Admin\\Repositories; use Dcat\\Admin\\Repositories\\EloquentRepository; use App\\User as UserModel; class User extends EloquentRepository { protected $eloquentClass = UserModel::class; }","title":"\u6570\u636e\u4ed3\u5e93"},{"location":"2.x/quick-start/#_12","text":"\u6bcf\u4e2a\u63a7\u5236\u5668\u90fd\u53ef\u4ee5\u751f\u6210\u81ea\u5df1\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\uff0c\u5e76\u4e14 \u6570\u636e\u8868\u683c \u3001 \u6570\u636e\u8868\u5355 \u548c \u6570\u636e\u8be6\u60c5 \u529f\u80fd\u90fd\u4f1a\u81ea\u52a8\u8bfb\u53d6\u91cc\u9762\u7684\u7ffb\u8bd1\u3002 \u4e0b\u9762\u6211\u4eec\u6253\u5f00 UserController \u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u6587\u4ef6 resouces/lang/{\u5f53\u524d\u8bed\u8a00}/user.php <?php return [ // labels\u662f\u81ea\u5b9a\u4e49\u6807\u7b7e\u7ffb\u8bd1 'labels' => [ // \u8fd9\u4e2a\u662f\u9875\u9762 title \u7ffb\u8bd1 'User' => '\u7528\u6237', ], // \u8868\u5b57\u6bb5\u7ffb\u8bd1 'fields' => [ 'name' => '\u540d\u79f0', 'email' => '\u90ae\u7bb1', 'email_verified_at' => '\u9a8c\u8bc1\u65f6\u95f4', 'password' => '\u5bc6\u7801', 'remember_token' => 'remember_token', ], 'options' => [ ], ];","title":"\u8bed\u8a00\u5305"},{"location":"2.x/response/","text":"\u52a8\u4f5c\u4ee5\u53ca\u8868\u5355\u54cd\u5e94 \u52a8\u4f5c \u3001 \u6570\u636e\u8868\u5355 \u4ee5\u53ca \u5de5\u5177\u8868\u5355 \u7684\u54cd\u5e94\u65b9\u6cd5\u90fd\u662f\u540c\u4e00\u5957\u65b9\u6cd5\u3002 \u5728\u7c7b\u4e2d\u53ef\u4ee5\u901a\u8fc7 $this->response() \u83b7\u53d6\u5230 Dcat\\Admin\\Http\\JsonResponse \u5bf9\u8c61\u5e76\u54cd\u5e94\u6570\u636e\u5230\u524d\u7aef return $this->response()->success('\u6210\u529f\uff01'); // \u7b49\u540c\u4e8e use Dcat\\Admin\\Admin; use Dcat\\Admin\\Http\\JsonResponse; return JsonResponse::make()->success('\u6210\u529f\uff01'); return Admin::make()->success('\u6210\u529f\uff01'); \u5982\u679c\u662f\u5728\u63a7\u5236\u5668\u4e2d\u4f7f\u7528\uff0c\u9700\u8981\u52a0\u4e0a send \u65b9\u6cd5 public function index() { return JsonResponse::make()->success('\u6210\u529f\uff01')->send(); } \u529f\u80fd \u4e0b\u9762\u4ecb\u7ecd\u4e00\u4e0b JsonResponse \u7684\u4e3b\u8981\u7528\u6cd5 \u5c55\u793a\u6210\u529f\u4fe1\u606f \u6b64\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a string \u7c7b\u578b\u53c2\u6570 $this->response()->success('\u6210\u529f\uff01'); \u5c55\u793a\u9519\u8bef\u4fe1\u606f \u6b64\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a string \u7c7b\u578b\u53c2\u6570 $this->response()->error('\u51fa\u9519\u4e86\uff01'); \u5c55\u793a\u8b66\u544a\u4fe1\u606f \u6b64\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a string \u7c7b\u578b\u53c2\u6570 $this->response()->warning('\u8b66\u544a'); \u8df3\u8f6c \u6b64\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a string \u7c7b\u578b\u53c2\u6570\uff0c\u53ef\u4ee5\u4e0e success \u3001 error \u3001 warning \u7b49\u65b9\u6cd5\u540c\u65f6\u4f7f\u7528 $this->response()->redirect('auth/users'); \u8df3\u8f6c (location) 1 \u79d2\u540e\u81ea\u52a8\u8df3\u8f6c\uff08\u975e\u5c40\u90e8\u5237\u65b0\uff09\uff0c\u6b64\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a string \u7c7b\u578b\u53c2\u6570 $this->response()->success('\u64cd\u4f5c\u6210\u529f')->location('auth/users'); \u5982\u679c\u4e0d\u4f20\u53c2\u5219\u5237\u65b0\u5f53\u524d\u9875\u9762 $this->response()->success('\u64cd\u4f5c\u6210\u529f')->location(); \u5237\u65b0\u5f53\u524d\u9875\u9762 \u6b64\u65b9\u6cd5\u53ef\u4ee5\u4e0e success \u3001 error \u3001 warning \u7b49\u65b9\u6cd5\u540c\u65f6\u4f7f\u7528 $this->response()->success('xxx')->refresh(); \u4e0b\u8f7d \u6b64\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a string \u7c7b\u578b\u53c2\u6570 $this->response()->download('auth/users?_export_=1'); \u5c55\u793a\u786e\u8ba4\u5f39\u7a97 // \u6210\u529f $this->response()->alert(true)->success('...')->detail('\u8be6\u7ec6\u5185\u5bb9'); // \u9519\u8bef $this->response()->alert(true)->error('...')->detail('\u8be6\u7ec6\u5185\u5bb9'); // \u8b66\u544a $this->response()->alert(true)->warning('...')->detail('\u8be6\u7ec6\u5185\u5bb9'); // \u63d0\u793a $this->response()->alert(true)->info('...')->detail('\u8be6\u7ec6\u5185\u5bb9'); \u8fd4\u56deHTML \u6b64\u65b9\u6cd5\u53ef\u63a5\u6536\u4e00\u4e2a string \u3001 Renderable \u3001 Htmlable \u7c7b\u578b\u53c2\u6570\uff0c\u53ef\u4ee5\u4e0e success \u3001 error \u3001 warning \u7b49\u65b9\u6cd5\u540c\u65f6\u4f7f\u7528 {tip} \u54cd\u5e94\u7684 HTML \u5b57\u7b26\u9ed8\u8ba4\u4f1a\u88ab\u7f6e\u5165\u52a8\u4f5c\u6309\u94ae\u5143\u7d20\u4e0a\uff0c\u5982\u679c\u9700\u8981\u81ea\u5df1\u63a7\u5236\uff0c\u5219\u8986\u5199 handleHtmlResponse \u65b9\u6cd5\u5373\u53ef\u3002 $this->response()->html('<a>a\u6807\u7b7e</a>'); $this->response()->html(view('...')); \u6267\u884cJS\u4ee3\u7801 \u6b64\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a string \u7c7b\u578b\u53c2\u6570\uff0c\u53ef\u4ee5\u4e0e success \u3001 error \u3001 warning \u7b49\u65b9\u6cd5\u540c\u65f6\u4f7f\u7528 $this->response()->script( <<<JS console.log('response', response, target); JS ); \u6839\u636e\u6761\u4ef6\u5224\u65ad\u662f\u5426\u8c03\u7528 \u4e0a\u9762\u6240\u6709\u529f\u80fd\u63a5\u53e3\u90fd\u652f\u6301 if \u6a21\u5f0f\uff0c\u5982 // \u5982\u679c $condition \u7684\u503c\u4e3a \u771f\uff0c\u5219\u8c03\u7528 refresh \u65b9\u6cd5 $this->response()->success(...)->ifRefresh($condition); $this->response()->success(...)->ifLocation($condition, 'auth/users'); // $condition \u4e5f\u53ef\u4ee5\u662f\u95ed\u5305 $this->response()->success(...)->ifRefresh(function () { return true; });","title":"\u52a8\u4f5c\u4ee5\u53ca\u8868\u5355\u54cd\u5e94"},{"location":"2.x/response/#_1","text":"\u52a8\u4f5c \u3001 \u6570\u636e\u8868\u5355 \u4ee5\u53ca \u5de5\u5177\u8868\u5355 \u7684\u54cd\u5e94\u65b9\u6cd5\u90fd\u662f\u540c\u4e00\u5957\u65b9\u6cd5\u3002 \u5728\u7c7b\u4e2d\u53ef\u4ee5\u901a\u8fc7 $this->response() \u83b7\u53d6\u5230 Dcat\\Admin\\Http\\JsonResponse \u5bf9\u8c61\u5e76\u54cd\u5e94\u6570\u636e\u5230\u524d\u7aef return $this->response()->success('\u6210\u529f\uff01'); // \u7b49\u540c\u4e8e use Dcat\\Admin\\Admin; use Dcat\\Admin\\Http\\JsonResponse; return JsonResponse::make()->success('\u6210\u529f\uff01'); return Admin::make()->success('\u6210\u529f\uff01'); \u5982\u679c\u662f\u5728\u63a7\u5236\u5668\u4e2d\u4f7f\u7528\uff0c\u9700\u8981\u52a0\u4e0a send \u65b9\u6cd5 public function index() { return JsonResponse::make()->success('\u6210\u529f\uff01')->send(); }","title":"\u52a8\u4f5c\u4ee5\u53ca\u8868\u5355\u54cd\u5e94"},{"location":"2.x/response/#_2","text":"\u4e0b\u9762\u4ecb\u7ecd\u4e00\u4e0b JsonResponse \u7684\u4e3b\u8981\u7528\u6cd5","title":"\u529f\u80fd"},{"location":"2.x/response/#_3","text":"\u6b64\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a string \u7c7b\u578b\u53c2\u6570 $this->response()->success('\u6210\u529f\uff01');","title":"\u5c55\u793a\u6210\u529f\u4fe1\u606f"},{"location":"2.x/response/#_4","text":"\u6b64\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a string \u7c7b\u578b\u53c2\u6570 $this->response()->error('\u51fa\u9519\u4e86\uff01');","title":"\u5c55\u793a\u9519\u8bef\u4fe1\u606f"},{"location":"2.x/response/#_5","text":"\u6b64\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a string \u7c7b\u578b\u53c2\u6570 $this->response()->warning('\u8b66\u544a');","title":"\u5c55\u793a\u8b66\u544a\u4fe1\u606f"},{"location":"2.x/response/#_6","text":"\u6b64\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a string \u7c7b\u578b\u53c2\u6570\uff0c\u53ef\u4ee5\u4e0e success \u3001 error \u3001 warning \u7b49\u65b9\u6cd5\u540c\u65f6\u4f7f\u7528 $this->response()->redirect('auth/users');","title":"\u8df3\u8f6c"},{"location":"2.x/response/#location","text":"1 \u79d2\u540e\u81ea\u52a8\u8df3\u8f6c\uff08\u975e\u5c40\u90e8\u5237\u65b0\uff09\uff0c\u6b64\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a string \u7c7b\u578b\u53c2\u6570 $this->response()->success('\u64cd\u4f5c\u6210\u529f')->location('auth/users'); \u5982\u679c\u4e0d\u4f20\u53c2\u5219\u5237\u65b0\u5f53\u524d\u9875\u9762 $this->response()->success('\u64cd\u4f5c\u6210\u529f')->location();","title":"\u8df3\u8f6c (location)"},{"location":"2.x/response/#_7","text":"\u6b64\u65b9\u6cd5\u53ef\u4ee5\u4e0e success \u3001 error \u3001 warning \u7b49\u65b9\u6cd5\u540c\u65f6\u4f7f\u7528 $this->response()->success('xxx')->refresh();","title":"\u5237\u65b0\u5f53\u524d\u9875\u9762"},{"location":"2.x/response/#_8","text":"\u6b64\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a string \u7c7b\u578b\u53c2\u6570 $this->response()->download('auth/users?_export_=1');","title":"\u4e0b\u8f7d"},{"location":"2.x/response/#_9","text":"// \u6210\u529f $this->response()->alert(true)->success('...')->detail('\u8be6\u7ec6\u5185\u5bb9'); // \u9519\u8bef $this->response()->alert(true)->error('...')->detail('\u8be6\u7ec6\u5185\u5bb9'); // \u8b66\u544a $this->response()->alert(true)->warning('...')->detail('\u8be6\u7ec6\u5185\u5bb9'); // \u63d0\u793a $this->response()->alert(true)->info('...')->detail('\u8be6\u7ec6\u5185\u5bb9');","title":"\u5c55\u793a\u786e\u8ba4\u5f39\u7a97"},{"location":"2.x/response/#html","text":"\u6b64\u65b9\u6cd5\u53ef\u63a5\u6536\u4e00\u4e2a string \u3001 Renderable \u3001 Htmlable \u7c7b\u578b\u53c2\u6570\uff0c\u53ef\u4ee5\u4e0e success \u3001 error \u3001 warning \u7b49\u65b9\u6cd5\u540c\u65f6\u4f7f\u7528 {tip} \u54cd\u5e94\u7684 HTML \u5b57\u7b26\u9ed8\u8ba4\u4f1a\u88ab\u7f6e\u5165\u52a8\u4f5c\u6309\u94ae\u5143\u7d20\u4e0a\uff0c\u5982\u679c\u9700\u8981\u81ea\u5df1\u63a7\u5236\uff0c\u5219\u8986\u5199 handleHtmlResponse \u65b9\u6cd5\u5373\u53ef\u3002 $this->response()->html('<a>a\u6807\u7b7e</a>'); $this->response()->html(view('...'));","title":"\u8fd4\u56deHTML"},{"location":"2.x/response/#js","text":"\u6b64\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a string \u7c7b\u578b\u53c2\u6570\uff0c\u53ef\u4ee5\u4e0e success \u3001 error \u3001 warning \u7b49\u65b9\u6cd5\u540c\u65f6\u4f7f\u7528 $this->response()->script( <<<JS console.log('response', response, target); JS );","title":"\u6267\u884cJS\u4ee3\u7801"},{"location":"2.x/response/#_10","text":"\u4e0a\u9762\u6240\u6709\u529f\u80fd\u63a5\u53e3\u90fd\u652f\u6301 if \u6a21\u5f0f\uff0c\u5982 // \u5982\u679c $condition \u7684\u503c\u4e3a \u771f\uff0c\u5219\u8c03\u7528 refresh \u65b9\u6cd5 $this->response()->success(...)->ifRefresh($condition); $this->response()->success(...)->ifLocation($condition, 'auth/users'); // $condition \u4e5f\u53ef\u4ee5\u662f\u95ed\u5305 $this->response()->success(...)->ifRefresh(function () { return true; });","title":"\u6839\u636e\u6761\u4ef6\u5224\u65ad\u662f\u5426\u8c03\u7528"},{"location":"2.x/section/","text":"\u533a\u5757\uff08section\uff09 \u7b80\u4ecb Dcat Admin \u63d0\u4f9b section \u529f\u80fd\u5141\u8bb8\u5f00\u53d1\u8005\u5728\u9879\u76ee\u8fd0\u884c\u65f6\u66f4\u6539\u9875\u9762\u5404\u4e2a\u90e8\u5206\u7684\u5185\u5bb9\uff0c\u800c\u4e0d\u9700\u8981\u76f4\u63a5\u53bb\u4fee\u6539\u6a21\u677f\u3002 {tip} Dcat Admin \u7684 section \u529f\u80fd\u53c2\u8003\u4e86 Blade \u6a21\u677f\u5f15\u64ce\u7684 @section \u529f\u80fd\u548c Wordpress \u7684 add_filter \u529f\u80fd\uff0c\u5982\u679c\u5f00\u53d1\u8005\u7406\u89e3\u8fd9\u4e24\u8005\u5176\u4e2d\u4e4b\u4e00\u5c31\u80fd\u5feb\u901f\u4e0a\u624b\u3002 \u4f7f\u7528 admin_section \u8f93\u51fa section \u5185\u5bb9\uff0c\u6b64\u51fd\u6570\u7c7b\u4f3c\u4e8e Blade \u6a21\u677f\u4e2d\u7684 @yield \u6307\u4ee4\u4ee5\u53ca WordPress \u4e2d\u7684 apply_filters \u51fd\u6570\u3002 \u53c2\u6570\uff1a - $section {string} \u533a\u5757\u540d\u79f0 - $default {string|Closure} \u9ed8\u8ba4\u503c - $options {array} \u53c2\u6570\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f key \u503c\u5fc5\u987b\u4f7f\u7528\u82f1\u6587\u5b57\u6bcd\u5f00\u5934\uff0c\u5426\u5219\u65e0\u6cd5\u88ab\u83b7\u53d6\u5230 \u8fd4\u56de\u503c\uff1a - {string} echo admin_section('navigation', null, ['count' => 4]); admin_inject_section \u6ce8\u5165 section \u5185\u5bb9\uff0c\u6b64\u51fd\u6570\u7c7b\u4f3c WordPress \u4e2d\u7684 add_filter \u51fd\u6570\u3002 \u53c2\u6570\uff1a - $section {string} \u533a\u5757\u540d\u79f0 - $content {string|Illuminate\\Contracts\\Support\\Renderable|Closure} \u533a\u5757\u5185\u5bb9 - $append {bool} \u9ed8\u8ba4 true \uff0c\u662f\u5426\u8ffd\u52a0\u5230\u4e0a\u4e00\u4e2a\u6ce8\u5165\u7684\u5185\u5bb9\u540e\u9762\uff0c\u5982\u679c\u4f20 false \u5219\u4f1a\u66ff\u6362\u6389\u524d\u9762\u6ce8\u5165\u7684\u5185\u5bb9 - $priority {int} \u9ed8\u8ba4 10 \uff0c\u4f18\u5148\u7ea7\uff0c\u503c\u8d8a\u5927\u6392\u5e8f\u8d8a\u9760\u524d \u5f53\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f20\u5165\u7684\u662f\u533f\u540d\u51fd\u6570\u65f6\uff0c\u533f\u540d\u51fd\u6570\u63a5\u6536\u4e00\u4e2a Illuminate\\Support\\Fluent \u5bf9\u8c61\u3002\u533f\u540d\u51fd\u6570\u4e2d\u63a5\u6536\u4e00\u4e2a Illuminate\\Support\\Fluent \u5bf9\u8c61\uff0c\u6b64\u5bf9\u8c61\u5305\u542b\u6709\u524d\u9762\u6ce8\u5165\u5230\u6b64\u533a\u5757\u7684\u5185\u5bb9\uff0c\u901a\u8fc7 previous \u5c5e\u6027\u53ef\u4ee5\u83b7\u5f97\uff1b\u5982\u679c\u6b64 section \u8fd8\u6709\u5176\u4ed6\u53c2\u6570\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee\u5c5e\u6027\u7684\u65b9\u5f0f\u83b7\u5f97\uff0c\u5982\u4e0b\uff1a admin_inject_section('navigation', e(\"<navigation>1</navigation>\")); admin_inject_section('navigation', function ($options) { // \u83b7\u53d6\u4e0a\u4e00\u4e2a\u6ce8\u5165\u6b64\u533a\u5757\u7684\u5185\u5bb9 $previous = $options->previous; // \u83b7\u53d6\u81ea\u5b9a\u4e49\u53c2\u6570 $count = $options->count; return e(\"<navigation>count:{$count}</navigation>\"); }, true, 11); // \u8f93\u51fa echo admin_section('navigation', null, ['count' => 4]); // \u6700\u7ec8\u8f93\u51fa\u7ed3\u679c\u4e3a // <navigation>count:4</navigation><navigation>1</navigation> admin_inject_default_section \u6ce8\u5165\u9ed8\u8ba4\u5185\u5bb9\uff0c\u5982\u679c\u8c03\u7528\u4e86 admin_inject_section \u51fd\u6570\u6ce8\u5165\u5185\u5bb9\uff08\u65e0\u8bba\u662f\u5728\u524d\u9762\u8fd8\u662f\u540e\u9762\u90fd\u4e00\u6837\uff09\uff0c\u5219\u6b64\u51fd\u6570\u4e0d\u751f\u6548\u3002 \u53c2\u6570\uff1a - $section {string} \u533a\u5757\u540d\u79f0 - $content {string|Illuminate\\Contracts\\Support\\Renderable|Closure} \u533a\u5757\u5185\u5bb9\uff0c\u4e0e admin_inject_section \u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e00\u81f4 admin_inject_default_section('navigation', '\u6682\u65e0\u6570\u636e'); admin_has_section \u5224\u65ad\u662f\u5426\u6ce8\u5165\u8fc7\u5185\u5bb9\u5230 section \uff0c\u6b64\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a bool \u7c7b\u578b\u503c\u3002 var_dump(admin_has_section('navigation')); admin_has_default_section \u5224\u65ad\u662f\u5426\u6ce8\u5165\u8fc7\u9ed8\u8ba4\u5185\u5bb9\u5230 section \uff0c\u6b64\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a bool \u7c7b\u578b\u503c\u3002 var_dump(admin_has_default_section('navigation')); \u7cfb\u7edf\u9884\u5b9a\u4e49\u533a\u5757 Dcat Admin \u9884\u5b9a\u4e49\u4e86\u4e00\u4e9b\u533a\u5757\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e9b\u533a\u5757\u6539\u53d8\u9875\u9762\u5185\u5bb9\u3002 \u6240\u6709\u7684\u9884\u5b9a\u4e49\u533a\u5757\u540d\u79f0\u90fd\u5b9a\u4e49\u5728 Dcat\\Admin\\Admin::SECTION \u8fd9\u4e2a\u7c7b\u5e38\u91cf\u4e2d\uff0c\u901a\u8fc7\u7c7b\u5e38\u91cf\u7684\u65b9\u5f0f\u8bbf\u95ee\u3002 \u5f80<head>\u6807\u7b7e\u5185\u8f93\u5165\u5185\u5bb9 \u6b64\u901a\u8fc7 Admin::SECTION['HEAD'] \u533a\u5757\u53ef\u4ee5\u5f80 <head> \u6807\u7b7e\u5185\u8f93\u5165\u5185\u5bb9\u3002 \u5728 app\\Admin\\bootstrap.php \u4e2d\u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801\uff1a use Dcat\\Admin\\Admin; admin_inject_section(Admin::SECTION['HEAD'], function () { return '<script src=\"//oss.maxcdn.com/respond/1.4.2/respond.min.js\"></script>'; }); \u5f80<body>\u6807\u7b7e\u5185\u8f93\u5165\u5185\u5bb9 \u901a\u8fc7 Admin::SECTION['BODY_INNER_BEFORE'] \u533a\u5757\u53ef\u4ee5\u5f80 <body> \u6807\u7b7e\u5185\u90e8\u7684\u5f00\u5934\u4f4d\u7f6e\u8f93\u5165\u5185\u5bb9\u3002 \u901a\u8fc7 Admin::SECTION['BODY_INNER_AFTER'] \u533a\u5757\u53ef\u4ee5\u5f80 <body> \u6807\u7b7e\u5185\u90e8\u7684\u7ed3\u675f\u4f4d\u7f6e\u8f93\u5165\u5185\u5bb9\u3002 \u5f80<div id=\"app\">\u6807\u7b7e\u5185\u8f93\u5165\u5185\u5bb9 \u901a\u8fc7 Admin::SECTION['APP_INNER_BEFORE'] \u533a\u5757\u53ef\u4ee5\u5f80 <div id=\"app\"> \u6807\u7b7e\u5185\u90e8\u7684\u5f00\u5934\u4f4d\u7f6e\u8f93\u5165\u5185\u5bb9\u3002 \u901a\u8fc7 Admin::SECTION['APP_INNER_AFTER'] \u533a\u5757\u53ef\u4ee5\u5f80 <div id=\"app\"> \u6807\u7b7e\u5185\u90e8\u7684\u7ed3\u675f\u4f4d\u7f6e\u8f93\u5165\u5185\u5bb9\u3002 \u66f4\u6539\u9876\u90e8\u5bfc\u822a\u680f\u7528\u6237\u4fe1\u606f\u9762\u677f\u5185\u5bb9 \u901a\u8fc7 Admin::SECTION['NAVBAR_USER_PANEL'] \u533a\u5757\u53ef\u4ee5\u66f4\u6539\u9876\u90e8\u5bfc\u822a\u680f\u7684\u7528\u6237\u4fe1\u606f\u9762\u677f\u5185\u5bb9\u3002 admin_inject_section(Admin::SECTION['NAVBAR_USER_PANEL'], view('admin::partials.navbar-user-panel')); \u66f4\u6539\u9876\u90e8\u5bfc\u822a\u680f\u524d\u9762\u5185\u5bb9 admin_inject_section(Admin::SECTION['NAVBAR_BEFORE'], view('...')); \u66f4\u6539\u9876\u90e8\u5bfc\u822a\u680f\u540e\u9762\u5185\u5bb9 admin_inject_section(Admin::SECTION['NAVBAR_AFTER'], view('...')); \u66f4\u6539\u9876\u90e8\u5bfc\u822a\u680f\u7528\u6237\u4fe1\u606f\u9762\u677f\u540e\u9762\u5185\u5bb9 \u901a\u8fc7 Admin::SECTION['NAVBAR_AFTER_USER_PANEL'] \u533a\u5757\u53ef\u4ee5\u66f4\u6539\u9876\u90e8\u5bfc\u822a\u680f\u7684\u7528\u6237\u4fe1\u606f\u9762\u677f\u540e\u9762\u7684\u5185\u5bb9\u3002 admin_inject_section(Admin::SECTION['NAVBAR_AFTER_USER_PANEL'], function () { return <<<HTML <li> <a href=\"#\" data-toggle=\"control-sidebar\"><i class=\"fa fa-gears\"></i></a> </li> HTML; }); \u66f4\u6539\u83dc\u5355\u680f\u7528\u6237\u4fe1\u606f\u9762\u677f\u5185\u5bb9 \u901a\u8fc7 Admin::SECTION['LEFT_SIDEBAR_USER_PANEL'] \u533a\u5757\u53ef\u4ee5\u66f4\u6539\u83dc\u5355\u680f\u7684\u7528\u6237\u4fe1\u606f\u9762\u677f\u7684\u5185\u5bb9\u3002 admin_inject_section(Admin::SECTION['LEFT_SIDEBAR_USER_PANEL'], view('admin::partials.sidebar-user-panel')); \u66f4\u6539\u83dc\u5355\u680f \u901a\u8fc7 Admin::SECTION['LEFT_SIDEBAR_MENU'] \u53ef\u4ee5\u66f4\u6539\u6574\u4e2a\u83dc\u5355\u680f\u5185\u5bb9\u3002 {tip} Dcat Admin \u7684\u83dc\u5355\u662f\u901a\u8fc7\u6ce8\u5165\u9ed8\u8ba4\u5185\u5bb9\u5230 LEFT_SIDEBAR_MENU \u533a\u5757\u6784\u5efa\u7684\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u66ff\u6362\u6389\u7cfb\u7edf\u9ed8\u8ba4\u7684\u83dc\u5355\u6e32\u67d3\u903b\u8f91\u3002 use Dcat\\Admin\\Support\\Helper; use Dcat\\Admin\\Admin; admin_inject_section(Admin::SECTION['LEFT_SIDEBAR_MENU'], function () { $menuModel = config('admin.database.menu_model'); $builder = Admin::menu(); $html = ''; foreach (Helper::buildNestedArray((new $menuModel())->allNodes()) as $item) { $html .= view('admin::partials.menu', ['item' => $item, 'builder' => $builder])->render(); } return $html; });","title":"\u533a\u5757\uff08section\uff09"},{"location":"2.x/section/#section","text":"","title":"\u533a\u5757\uff08section\uff09"},{"location":"2.x/section/#_1","text":"Dcat Admin \u63d0\u4f9b section \u529f\u80fd\u5141\u8bb8\u5f00\u53d1\u8005\u5728\u9879\u76ee\u8fd0\u884c\u65f6\u66f4\u6539\u9875\u9762\u5404\u4e2a\u90e8\u5206\u7684\u5185\u5bb9\uff0c\u800c\u4e0d\u9700\u8981\u76f4\u63a5\u53bb\u4fee\u6539\u6a21\u677f\u3002 {tip} Dcat Admin \u7684 section \u529f\u80fd\u53c2\u8003\u4e86 Blade \u6a21\u677f\u5f15\u64ce\u7684 @section \u529f\u80fd\u548c Wordpress \u7684 add_filter \u529f\u80fd\uff0c\u5982\u679c\u5f00\u53d1\u8005\u7406\u89e3\u8fd9\u4e24\u8005\u5176\u4e2d\u4e4b\u4e00\u5c31\u80fd\u5feb\u901f\u4e0a\u624b\u3002","title":"\u7b80\u4ecb"},{"location":"2.x/section/#_2","text":"","title":"\u4f7f\u7528"},{"location":"2.x/section/#admin_section","text":"\u8f93\u51fa section \u5185\u5bb9\uff0c\u6b64\u51fd\u6570\u7c7b\u4f3c\u4e8e Blade \u6a21\u677f\u4e2d\u7684 @yield \u6307\u4ee4\u4ee5\u53ca WordPress \u4e2d\u7684 apply_filters \u51fd\u6570\u3002 \u53c2\u6570\uff1a - $section {string} \u533a\u5757\u540d\u79f0 - $default {string|Closure} \u9ed8\u8ba4\u503c - $options {array} \u53c2\u6570\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f key \u503c\u5fc5\u987b\u4f7f\u7528\u82f1\u6587\u5b57\u6bcd\u5f00\u5934\uff0c\u5426\u5219\u65e0\u6cd5\u88ab\u83b7\u53d6\u5230 \u8fd4\u56de\u503c\uff1a - {string} echo admin_section('navigation', null, ['count' => 4]);","title":"admin_section"},{"location":"2.x/section/#admin_inject_section","text":"\u6ce8\u5165 section \u5185\u5bb9\uff0c\u6b64\u51fd\u6570\u7c7b\u4f3c WordPress \u4e2d\u7684 add_filter \u51fd\u6570\u3002 \u53c2\u6570\uff1a - $section {string} \u533a\u5757\u540d\u79f0 - $content {string|Illuminate\\Contracts\\Support\\Renderable|Closure} \u533a\u5757\u5185\u5bb9 - $append {bool} \u9ed8\u8ba4 true \uff0c\u662f\u5426\u8ffd\u52a0\u5230\u4e0a\u4e00\u4e2a\u6ce8\u5165\u7684\u5185\u5bb9\u540e\u9762\uff0c\u5982\u679c\u4f20 false \u5219\u4f1a\u66ff\u6362\u6389\u524d\u9762\u6ce8\u5165\u7684\u5185\u5bb9 - $priority {int} \u9ed8\u8ba4 10 \uff0c\u4f18\u5148\u7ea7\uff0c\u503c\u8d8a\u5927\u6392\u5e8f\u8d8a\u9760\u524d \u5f53\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f20\u5165\u7684\u662f\u533f\u540d\u51fd\u6570\u65f6\uff0c\u533f\u540d\u51fd\u6570\u63a5\u6536\u4e00\u4e2a Illuminate\\Support\\Fluent \u5bf9\u8c61\u3002\u533f\u540d\u51fd\u6570\u4e2d\u63a5\u6536\u4e00\u4e2a Illuminate\\Support\\Fluent \u5bf9\u8c61\uff0c\u6b64\u5bf9\u8c61\u5305\u542b\u6709\u524d\u9762\u6ce8\u5165\u5230\u6b64\u533a\u5757\u7684\u5185\u5bb9\uff0c\u901a\u8fc7 previous \u5c5e\u6027\u53ef\u4ee5\u83b7\u5f97\uff1b\u5982\u679c\u6b64 section \u8fd8\u6709\u5176\u4ed6\u53c2\u6570\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee\u5c5e\u6027\u7684\u65b9\u5f0f\u83b7\u5f97\uff0c\u5982\u4e0b\uff1a admin_inject_section('navigation', e(\"<navigation>1</navigation>\")); admin_inject_section('navigation', function ($options) { // \u83b7\u53d6\u4e0a\u4e00\u4e2a\u6ce8\u5165\u6b64\u533a\u5757\u7684\u5185\u5bb9 $previous = $options->previous; // \u83b7\u53d6\u81ea\u5b9a\u4e49\u53c2\u6570 $count = $options->count; return e(\"<navigation>count:{$count}</navigation>\"); }, true, 11); // \u8f93\u51fa echo admin_section('navigation', null, ['count' => 4]); // \u6700\u7ec8\u8f93\u51fa\u7ed3\u679c\u4e3a // <navigation>count:4</navigation><navigation>1</navigation>","title":"admin_inject_section"},{"location":"2.x/section/#admin_inject_default_section","text":"\u6ce8\u5165\u9ed8\u8ba4\u5185\u5bb9\uff0c\u5982\u679c\u8c03\u7528\u4e86 admin_inject_section \u51fd\u6570\u6ce8\u5165\u5185\u5bb9\uff08\u65e0\u8bba\u662f\u5728\u524d\u9762\u8fd8\u662f\u540e\u9762\u90fd\u4e00\u6837\uff09\uff0c\u5219\u6b64\u51fd\u6570\u4e0d\u751f\u6548\u3002 \u53c2\u6570\uff1a - $section {string} \u533a\u5757\u540d\u79f0 - $content {string|Illuminate\\Contracts\\Support\\Renderable|Closure} \u533a\u5757\u5185\u5bb9\uff0c\u4e0e admin_inject_section \u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e00\u81f4 admin_inject_default_section('navigation', '\u6682\u65e0\u6570\u636e');","title":"admin_inject_default_section"},{"location":"2.x/section/#admin_has_section","text":"\u5224\u65ad\u662f\u5426\u6ce8\u5165\u8fc7\u5185\u5bb9\u5230 section \uff0c\u6b64\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a bool \u7c7b\u578b\u503c\u3002 var_dump(admin_has_section('navigation'));","title":"admin_has_section"},{"location":"2.x/section/#admin_has_default_section","text":"\u5224\u65ad\u662f\u5426\u6ce8\u5165\u8fc7\u9ed8\u8ba4\u5185\u5bb9\u5230 section \uff0c\u6b64\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a bool \u7c7b\u578b\u503c\u3002 var_dump(admin_has_default_section('navigation'));","title":"admin_has_default_section"},{"location":"2.x/section/#_3","text":"Dcat Admin \u9884\u5b9a\u4e49\u4e86\u4e00\u4e9b\u533a\u5757\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e9b\u533a\u5757\u6539\u53d8\u9875\u9762\u5185\u5bb9\u3002 \u6240\u6709\u7684\u9884\u5b9a\u4e49\u533a\u5757\u540d\u79f0\u90fd\u5b9a\u4e49\u5728 Dcat\\Admin\\Admin::SECTION \u8fd9\u4e2a\u7c7b\u5e38\u91cf\u4e2d\uff0c\u901a\u8fc7\u7c7b\u5e38\u91cf\u7684\u65b9\u5f0f\u8bbf\u95ee\u3002","title":"\u7cfb\u7edf\u9884\u5b9a\u4e49\u533a\u5757"},{"location":"2.x/section/#head","text":"\u6b64\u901a\u8fc7 Admin::SECTION['HEAD'] \u533a\u5757\u53ef\u4ee5\u5f80 <head> \u6807\u7b7e\u5185\u8f93\u5165\u5185\u5bb9\u3002 \u5728 app\\Admin\\bootstrap.php \u4e2d\u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801\uff1a use Dcat\\Admin\\Admin; admin_inject_section(Admin::SECTION['HEAD'], function () { return '<script src=\"//oss.maxcdn.com/respond/1.4.2/respond.min.js\"></script>'; });","title":"\u5f80&lt;head&gt;\u6807\u7b7e\u5185\u8f93\u5165\u5185\u5bb9"},{"location":"2.x/section/#body","text":"\u901a\u8fc7 Admin::SECTION['BODY_INNER_BEFORE'] \u533a\u5757\u53ef\u4ee5\u5f80 <body> \u6807\u7b7e\u5185\u90e8\u7684\u5f00\u5934\u4f4d\u7f6e\u8f93\u5165\u5185\u5bb9\u3002 \u901a\u8fc7 Admin::SECTION['BODY_INNER_AFTER'] \u533a\u5757\u53ef\u4ee5\u5f80 <body> \u6807\u7b7e\u5185\u90e8\u7684\u7ed3\u675f\u4f4d\u7f6e\u8f93\u5165\u5185\u5bb9\u3002","title":"\u5f80&lt;body&gt;\u6807\u7b7e\u5185\u8f93\u5165\u5185\u5bb9"},{"location":"2.x/section/#div-idapp","text":"\u901a\u8fc7 Admin::SECTION['APP_INNER_BEFORE'] \u533a\u5757\u53ef\u4ee5\u5f80 <div id=\"app\"> \u6807\u7b7e\u5185\u90e8\u7684\u5f00\u5934\u4f4d\u7f6e\u8f93\u5165\u5185\u5bb9\u3002 \u901a\u8fc7 Admin::SECTION['APP_INNER_AFTER'] \u533a\u5757\u53ef\u4ee5\u5f80 <div id=\"app\"> \u6807\u7b7e\u5185\u90e8\u7684\u7ed3\u675f\u4f4d\u7f6e\u8f93\u5165\u5185\u5bb9\u3002","title":"\u5f80&lt;div id=\"app\"&gt;\u6807\u7b7e\u5185\u8f93\u5165\u5185\u5bb9"},{"location":"2.x/section/#_4","text":"\u901a\u8fc7 Admin::SECTION['NAVBAR_USER_PANEL'] \u533a\u5757\u53ef\u4ee5\u66f4\u6539\u9876\u90e8\u5bfc\u822a\u680f\u7684\u7528\u6237\u4fe1\u606f\u9762\u677f\u5185\u5bb9\u3002 admin_inject_section(Admin::SECTION['NAVBAR_USER_PANEL'], view('admin::partials.navbar-user-panel'));","title":"\u66f4\u6539\u9876\u90e8\u5bfc\u822a\u680f\u7528\u6237\u4fe1\u606f\u9762\u677f\u5185\u5bb9"},{"location":"2.x/section/#_5","text":"admin_inject_section(Admin::SECTION['NAVBAR_BEFORE'], view('...'));","title":"\u66f4\u6539\u9876\u90e8\u5bfc\u822a\u680f\u524d\u9762\u5185\u5bb9"},{"location":"2.x/section/#_6","text":"admin_inject_section(Admin::SECTION['NAVBAR_AFTER'], view('...'));","title":"\u66f4\u6539\u9876\u90e8\u5bfc\u822a\u680f\u540e\u9762\u5185\u5bb9"},{"location":"2.x/section/#_7","text":"\u901a\u8fc7 Admin::SECTION['NAVBAR_AFTER_USER_PANEL'] \u533a\u5757\u53ef\u4ee5\u66f4\u6539\u9876\u90e8\u5bfc\u822a\u680f\u7684\u7528\u6237\u4fe1\u606f\u9762\u677f\u540e\u9762\u7684\u5185\u5bb9\u3002 admin_inject_section(Admin::SECTION['NAVBAR_AFTER_USER_PANEL'], function () { return <<<HTML <li> <a href=\"#\" data-toggle=\"control-sidebar\"><i class=\"fa fa-gears\"></i></a> </li> HTML; });","title":"\u66f4\u6539\u9876\u90e8\u5bfc\u822a\u680f\u7528\u6237\u4fe1\u606f\u9762\u677f\u540e\u9762\u5185\u5bb9"},{"location":"2.x/section/#_8","text":"\u901a\u8fc7 Admin::SECTION['LEFT_SIDEBAR_USER_PANEL'] \u533a\u5757\u53ef\u4ee5\u66f4\u6539\u83dc\u5355\u680f\u7684\u7528\u6237\u4fe1\u606f\u9762\u677f\u7684\u5185\u5bb9\u3002 admin_inject_section(Admin::SECTION['LEFT_SIDEBAR_USER_PANEL'], view('admin::partials.sidebar-user-panel'));","title":"\u66f4\u6539\u83dc\u5355\u680f\u7528\u6237\u4fe1\u606f\u9762\u677f\u5185\u5bb9"},{"location":"2.x/section/#_9","text":"\u901a\u8fc7 Admin::SECTION['LEFT_SIDEBAR_MENU'] \u53ef\u4ee5\u66f4\u6539\u6574\u4e2a\u83dc\u5355\u680f\u5185\u5bb9\u3002 {tip} Dcat Admin \u7684\u83dc\u5355\u662f\u901a\u8fc7\u6ce8\u5165\u9ed8\u8ba4\u5185\u5bb9\u5230 LEFT_SIDEBAR_MENU \u533a\u5757\u6784\u5efa\u7684\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u66ff\u6362\u6389\u7cfb\u7edf\u9ed8\u8ba4\u7684\u83dc\u5355\u6e32\u67d3\u903b\u8f91\u3002 use Dcat\\Admin\\Support\\Helper; use Dcat\\Admin\\Admin; admin_inject_section(Admin::SECTION['LEFT_SIDEBAR_MENU'], function () { $menuModel = config('admin.database.menu_model'); $builder = Admin::menu(); $html = ''; foreach (Helper::buildNestedArray((new $menuModel())->allNodes()) as $item) { $html .= view('admin::partials.menu', ['item' => $item, 'builder' => $builder])->render(); } return $html; });","title":"\u66f4\u6539\u83dc\u5355\u680f"},{"location":"2.x/theme/","text":"\u4e3b\u9898\u4e0e\u989c\u8272 \u5207\u6362\u4e3b\u9898 Dcat Admin \u652f\u6301\u4e3b\u9898\u5207\u6362\u529f\u80fd\uff0c\u76ee\u524d\u5185\u7f6e\u4e86\u56db\u79cd\u4e3b\u9898\u8272\uff1a indigo \u3001 blue \u3001 blue-light \u3001 green \uff0c\u53ef\u901a\u8fc7\u914d\u7f6e\u53c2\u6570 admin.layout.color \u8fdb\u884c\u5207\u6362\u3002 \u6253\u5f00\u914d\u7f6e\u6587\u4ef6 config/admin.php 'layout' => [ 'color' => 'blue', ... ], ... \u90e8\u5206\u4e3b\u9898\u8272\u9884\u89c8 \u81ea\u5b9a\u4e49\u4e3b\u9898\u914d\u8272 {tip} \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u81ea\u5b9a\u4e49\u4e86\u4e3b\u9898\u4e4b\u540e\uff0c\u6bcf\u6b21\u66f4\u65b0\u65b0\u7248\u672c\uff0c\u90fd\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u4e00\u6b21\u4f60\u7684\u81ea\u5b9a\u4e49\u4e3b\u9898\uff01\uff01\uff01 \u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u529f\u80fd\u968f\u610f\u6dfb\u52a0\u81ea\u5df1\u60f3\u8981\u7684\u4e3b\u9898\u914d\u8272\uff0c\u5728\u4f7f\u7528\u8fd9\u4e2a\u529f\u80fd\u4e4b\u524d\u9700\u8981\u5148\u5b89\u88c5 NodeJs \uff0c\u6ca1\u5b89\u88c5\u7684\u540c\u5b66\u524d\u5f80 http://nodejs.cn/ \u4e0b\u8f7d\u5b89\u88c5\u5373\u53ef\u3002 \u5b89\u88c5\u5b8c NodeJs \u4e4b\u540e\u53ef\u6253\u5f00\u547d\u4ee4\u884c\u8fd0\u884c npm -v \u6d4b\u8bd5\u4e00\u4e0b\u662f\u5426\u5b89\u88c5\u6210\u529f\u3002 npm -v \u5982\u679c\u6b63\u5e38\u8fd4\u56de\u7248\u672c\u53f7\uff0c\u5219\u8bf4\u660e\u5df2\u5b89\u88c5\u6210\u529f\uff0c\u540c\u65f6\u5efa\u8bae\u4f7f\u7528\u6dd8\u5b9d\u955c\u50cf npm config set registry https://registry.npm.taobao.org \u7136\u540e\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u7f16\u8bd1\u81ea\u5b9a\u4e49\u4e3b\u9898\u7684\u6587\u4ef6\uff0c\u53ea\u9700\u8f93\u5165\u4e3b\u9898\u7684\u540d\u79f0\u548c\u4e3b\u9898\u989c\u8272\u4ee3\u7801( \u5341\u516d\u8fdb\u5236 )\u5373\u53ef\u3002 \u8fd9\u91cc\u6211\u4eec\u4ee5\u751f\u6210\u4e00\u4e2a orange \u4e3b\u9898\u4e3a\u4f8b {tip} \u8fd9\u4e2a\u547d\u4ee4\u7b2c\u4e00\u6b21\u8fd0\u884c\u65f6\u9700\u8981\u8f83\u957f\u65f6\u95f4\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u3002\u5982\u679c\u8fd0\u884c\u5931\u8d25\uff0c\u8bf7\u5c1d\u8bd5\u7ed9 vendor \u76ee\u5f55\u5199\u6743\u9650\u3002 php artisan admin:minify orange --color fbbd08 --publish \u4e0a\u9762\u7684\u547d\u4ee4\u7684\u610f\u601d\u662f\u751f\u6210\u4e00\u4e2a orange \u4e3b\u9898\uff0c\u989c\u8272\u4ee3\u7801\u4e3a #fbbd08 \uff0c\u5e76\u4e14\u751f\u6210\u4e4b\u540e\u81ea\u52a8\u53d1\u5e03\u9759\u6001\u8d44\u6e90\u3002\u5982\u679c\u7f16\u8bd1\u6210\u529f\uff0c\u547d\u4ee4\u884c\u4f1a\u8f93\u51fa\u4ee5\u4e0b\u5185\u5bb9 ... DONE Compiled successfully in 48001ms8:24:28 PM Asset Size Chunks Chunk Names /resources/dist/adminlte/adminlte.js 29.7 KiB 0 [emitted] /resources/dist/adminlte/adminlte /resources/dist/adminlte/adminlte.js.map 87.8 KiB 0 [emitted] [dev] /resources/dist/adminlte/adminlte /resources/dist/dcat/extra/action.js 3.7 KiB 1 [emitted] /resources/dist/dcat/extra/action /resources/dist/dcat/extra/action.js.map 12.9 KiB 1 [emitted] [dev] /resources/dist/dcat/extra/action /resources/dist/dcat/extra/grid-extend.js 4.87 KiB 2 [emitted] /resources/dist/dcat/extra/grid-extend /resources/dist/dcat/extra/grid-extend.js.map 21.7 KiB 2 [emitted] [dev] /resources/dist/dcat/extra/grid-extend /resources/dist/dcat/extra/resource-selector.js 5.8 KiB 3 [emitted] /resources/dist/dcat/extra/resource-selector /resources/dist/dcat/extra/resource-selector.js.map 24 KiB 3 [emitted] [dev] /resources/dist/dcat/extra/resource-selector /resources/dist/dcat/extra/upload.js 17.2 KiB 4 [emitted] /resources/dist/dcat/extra/upload /resources/dist/dcat/extra/upload.js.map 66.8 KiB 4 [emitted] [dev] /resources/dist/dcat/extra/upload /resources/dist/dcat/js/dcat-app.js 88.8 KiB 5 [emitted] /resources/dist/dcat/js/dcat-app /resources/dist/dcat/js/dcat-app.js.map 164 KiB 5 [emitted] [dev] /resources/dist/dcat/js/dcat-app resources/dist/adminlte/adminlte-orange.css 656 KiB 0 [emitted] [big] /resources/dist/adminlte/adminlte resources/dist/dcat/css/dcat-app-orange.css 43 KiB 0 [emitted] /resources/dist/adminlte/adminlte resources/dist/dcat/extra/markdown-orange.css 1.72 KiB 0 [emitted] /resources/dist/adminlte/adminlte resources/dist/dcat/extra/step-orange.css 8.56 KiB 0 [emitted] /resources/dist/adminlte/adminlte resources/dist/dcat/extra/upload-orange.css 6.42 KiB 0 [emitted] /resources/dist/adminlte/adminlte Copied Directory [\\dcat-admin\\resources\\dist] To [\\public\\vendors\\dcat-admin] Publishing complete. Compiled views cleared! \u4e3b\u9898\u6587\u4ef6\u7f16\u8bd1\u6210\u529f\u4e4b\u540e\uff0c\u8fd8\u9700\u8981\u5728 app/Admin/bootstrap.php \u4e2d\u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801 Dcat\\Admin\\Color::extend('orange', [ 'primary' => '#fbbd08', 'primary-darker' => '#fbbd08', 'link' => '#fbbd08', ]); \u6700\u540e\u628a\u4f60\u7684\u914d\u7f6e\u53c2\u6570 admin.layout.color \u7684\u503c\u8bbe\u7f6e\u4e3a orange \u5c31\u884c\u4e86\u3002 \u6df1\u8272\u6a21\u5f0f \u542f\u7528\u5207\u6362\u6309\u94ae \u901a\u8fc7\u914d\u7f6e\u53c2\u6570 admin.layout.dark_mode_switch \u53ef\u4ee5\u542f\u7528\u6216\u7981\u7528\u6df1\u8272\u6a21\u5f0f\u5207\u6362\u5f00\u5173\u3002\u5f00\u542f\u540e\u4f1a\u5728\u9875\u9762\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\u589e\u52a0\u4e00\u4e2a\u5f00\u5173\u6309\u94ae\uff0c\u70b9\u51fb\u53ef\u4ee5\u5207\u6362\u6df1\u8272\u548c\u660e\u4eae\u6a21\u5f0f\uff0c\u5e76\u4e14\u4f1a\u628a\u72b6\u6001\u4fdd\u5b58\u5728 localStorage \u4e2d\u3002 'layout' => [ 'dark_mode_switch' => true, ... ], ... \u6548\u679c\u5982\u4e0b \u9ed8\u8ba4\u6df1\u8272 \u6253\u5f00\u914d\u7f6e\u6587\u4ef6 config/admin.php \uff0c\u5199\u5165 'layout' => [ 'body_class' => 'dark-mode', ... ], ... \u83dc\u5355\u6837\u5f0f \u901a\u8fc7\u914d\u7f6e\u53c2\u6570 admin.layout.sidebar_style \u53ef\u4ee5\u914d\u7f6e\u83dc\u5355\u6837\u5f0f\uff08\u5982\u679c\u914d\u7f6e\u6587\u4ef6\u4e2d\u4e0d\u5b58\u5728\u8fd9\u4e2a\u53c2\u6570\u5219\u53ef\u4ee5\u624b\u52a8\u6dfb\u52a0\uff09\uff0c\u652f\u6301\u4e09\u4e2a\u503c light \u3001 primary \u3001 dark \uff0c\u9ed8\u8ba4\u4e3a light {tip} sidebar_dark \u53c2\u6570\u5373\u5c06\u88ab\u5e9f\u5f03\uff01 sidebar_style \u53c2\u6570\u4f1a\u8986\u76d6 sidebar_dark \u53c2\u6570\uff0c\u53ea\u6709\u5f53 sidebar_style \u4e0d\u5b58\u5728\u65f6 sidebar_dark \u624d\u4f1a\u751f\u6548\uff01\uff01\uff01 'layout' => [ // \u652f\u6301 light\u3001primary\u3001dark 'sidebar_style' => 'light', ... ], ... light \u6548\u679c primary \u6548\u679c \u83dc\u5355\u5e03\u5c40 \u9876\u90e8\u6a2a\u5411 (Horizontal) \u8bbe\u7f6e\u914d\u7f6e\u53c2\u6570 admin.layout.horizontal_menu \u7684\u503c\u4e3a true \u5f00\u542f\u6b64\u529f\u80fd\uff0c\u6548\u679c\u5982\u4e0b sidebar-separate \u6dfb\u52a0 sidebar-separate \u5230 admin.layout.body_class \u53c2\u6570\u4e2d 'layout' => [ 'body_class' => ['sidebar-separate'], ... ], ... \u6548\u679c PHP\u989c\u8272\u7ba1\u7406 Dcat Admin \u5185\u7f6e\u4e86\u989c\u8272\u7ba1\u7406\u6a21\u5757\uff0c\u6b64\u529f\u80fd\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u914d\u5408\u4e3b\u9898\u5207\u6362\u529f\u80fd\uff0c\u8ba9\u9875\u9762\u989c\u8272\u4e0e\u4e3b\u9898\u8272\u76f8\u9002\u5e94\uff01 \u901a\u8fc7 Dcat\\Admin\\Admin::color() \u8fd9\u4e2a\u670d\u52a1\u53ef\u4ee5\u5f88\u8f7b\u677e\u7684\u83b7\u53d6\u5e38\u7528\u989c\u8272\uff08\u53ef\u53c2\u8003 \u989c\u8272\u8868\u4e0e\u6837\u5f0f \uff09\u3002 \u83b7\u53d6\u5185\u7f6e\u989c\u8272 \u901a\u8fc7 Color::get \u6216\u9b54\u672f\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u989c\u8272\u4ee3\u7801\uff0c\u5f53\u901a\u8fc7 Color::get \u83b7\u53d6\u7684\u989c\u8272\u4e0d\u5b58\u5728\u65f6\uff0c\u4f1a\u8fd4\u56de\u53c2\u6570\u7684\u539f\u59cb\u503c\u3002 <?php use Dcat\\Admin\\Admin; // get \u65b9\u6cd5\u83b7\u53d6\u989c\u8272 echo Admin::color()->get('primary'); // \u8f93\u51fa #5c6bc6 // \u901a\u8fc7\u9b54\u672f\u65b9\u6cd5\u83b7\u53d6\u989c\u8272 echo Admin::color()->primary(); // \u8f93\u51fa #5c6bc6 \u989c\u8272\u6de1\u5316 \u901a\u8fc7 Color::lighten \u65b9\u6cd5\u6216\u9b54\u672f\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u6de1\u5316\u540e\u7684\u989c\u8272\u768416\u8fdb\u5236\u989c\u8272\u4ee3\u7801\u3002 Color::lighten \u65b9\u6cd5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a $name string \u989c\u8272\u522b\u540d $amt int \u989c\u8272\u504f\u5dee\u503c\uff0c\u503c\u8d8a\u5927\u989c\u8272\u8d8a \u6de1 echo Admin::color()->lighten('primary', 10); // \u8f93\u51fa #6675d0 // \u4e5f\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528\uff0c\u6ce8\u610f\u8fd9\u91cc\u7684\u53c2\u6570\u8981\u4f20\u8d1f\u6570 echo Admin::color()->primary(-10); // \u8f93\u51fa #6675d0 \u4e5f\u652f\u6301\u76f4\u63a5\u4f20\u989c\u8272\u4ee3\u7801 echo Admin::color()->lighten('#5c6bc6', 10); // \u8f93\u51fa #6675d0 \u989c\u8272\u6df1\u5316 \u901a\u8fc7 Color::darken \u65b9\u6cd5\u6216\u9b54\u672f\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u6df1\u5316\u540e\u7684\u989c\u8272\u768416\u8fdb\u5236\u989c\u8272\u4ee3\u7801\u3002 Color::darken \u65b9\u6cd5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a $name string \u989c\u8272\u522b\u540d $amt int \u989c\u8272\u504f\u5dee\u503c\uff0c\u503c\u8d8a\u5927\u989c\u8272\u8d8a \u6df1 echo Admin::color()->darken('primary', 10); // \u8f93\u51fa #5261bc // \u4e5f\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528 echo Admin::color()->primary(10); // \u8f93\u51fa #5261bc \u4e5f\u652f\u6301\u76f4\u63a5\u4f20\u989c\u8272\u4ee3\u7801 echo Admin::color()->darken('#5c6bc6', 10); // \u8f93\u51fa #5261bc \u989c\u8272\u900f\u660e\u5316 \u901a\u8fc7 Color::alpha \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u989c\u8272\u7684\u900f\u660e\u5ea6\u3002 Color::alpha \u65b9\u6cd5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a $name string \u989c\u8272\u522b\u540d $alpha float \u900f\u660e\u5ea6\uff0c 0 ~ 1 \u4e4b\u95f4\u7684\u503c\uff0c\u503c\u8d8a\u5c0f\u900f\u660e\u5ea6\u8d8a\u9ad8 echo Admin::color()->alpha('primary', 0.1); // \u8f93\u51fa rgba(92, 107, 198, 0.1) \u4e5f\u652f\u6301\u76f4\u63a5\u4f20\u989c\u8272\u4ee3\u7801 echo Admin::color()->alpha('5c6bc6', 0.1); // \u8f93\u51fa rgba(92, 107, 198, 0.1) \u83b7\u53d6\u6240\u6709\u5185\u7f6e\u989c\u8272 \u901a\u8fc7 Color::all \u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u6240\u6709\u5185\u7f6e\u989c\u8272\u768416\u8fdb\u5236\u4ee3\u7801\uff0c\u6b64\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4 $allColors = Admin::color()->all(); JS\u989c\u8272\u7ba1\u7406 JS \u6a21\u5757\u4e2d\u540c\u6837\u4e5f\u5305\u542b\u989c\u8272\u7ba1\u7406\u529f\u80fd\uff0c\u901a\u8fc7 Dcat.color \u5bf9\u8c61\u53ef\u4ee5\u50cf\u5728PHP\u4ee3\u7801\u4e2d\u4e00\u6837\u7ba1\u7406\u989c\u8272\u3002 \u83b7\u53d6\u5185\u7f6e\u989c\u8272 \u5728 JS \u4ee3\u7801\u4e2d\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4e09\u79cd\u65b9\u5f0f\u83b7\u53d6\u989c\u8272\u4ee3\u7801 Admin::script( <<<JS // \u65b9\u5f0f1 var primary = Dcat.color.primary; // \u65b9\u5f0f2 var primary = Dcat.color['primary']; // \u65b9\u5f0f3 var primary = Dcat.color.get('primary'); console.log(primary); // \u6253\u5370 #5c6bc6 JS ); \u989c\u8272\u6de1\u5316 \u901a\u8fc7 Dcat.color.lighten \u65b9\u6cd5\u6216\u9b54\u672f\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u6de1\u5316\u540e\u7684\u989c\u8272\u768416\u8fdb\u5236\u989c\u8272\u4ee3\u7801\u3002 color.lighten \u65b9\u6cd5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a name string \u989c\u8272\u522b\u540d amt int \u989c\u8272\u504f\u5dee\u503c\uff0c\u503c\u8d8a\u5927\u989c\u8272\u8d8a \u6de1 Admin::script( <<<JS var primary = Dcat.color.lighten('primary', 10) console.log(primary); // \u8f93\u51fa #6675d0 JS ); \u4e5f\u652f\u6301\u76f4\u63a5\u4f20\u989c\u8272\u4ee3\u7801 var primary = Dcat.color.lighten('5c6bc6', 10); console.log(primary); // \u8f93\u51fa #6675d0 \u989c\u8272\u6df1\u5316 \u901a\u8fc7 Dcat.color.darken \u65b9\u6cd5\u6216\u9b54\u672f\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u6df1\u5316\u540e\u7684\u989c\u8272\u768416\u8fdb\u5236\u989c\u8272\u4ee3\u7801\u3002 color.darken \u65b9\u6cd5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a name string \u989c\u8272\u522b\u540d amt int \u989c\u8272\u504f\u5dee\u503c\uff0c\u503c\u8d8a\u5927\u989c\u8272\u8d8a \u6df1 Admin::script( <<<JS var primary = Dcat.color.darken('primary', 10) console.log(primary); // \u8f93\u51fa #5261bc JS ); \u4e5f\u652f\u6301\u76f4\u63a5\u4f20\u989c\u8272\u4ee3\u7801 var primary = Dcat.color.darken('5c6bc6', 10) console.log(primary); // \u8f93\u51fa #5261bc \u989c\u8272\u900f\u660e\u5316 \u901a\u8fc7 Dcat.color.alpha \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u989c\u8272\u7684\u900f\u660e\u5ea6\u3002 color.alpha \u65b9\u6cd5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a $name string \u989c\u8272\u522b\u540d $alpha float \u900f\u660e\u5ea6\uff0c 0 ~ 1 \u4e4b\u95f4\u7684\u503c\uff0c\u503c\u8d8a\u5c0f\u900f\u660e\u5ea6\u8d8a\u9ad8 Admin::script( <<<JS var primary = Dcat.color.alpha('primary', 0.1) console.log(primary); // \u8f93\u51fa rgba(92, 107, 198, 0.1) JS ); \u4e5f\u652f\u6301\u76f4\u63a5\u4f20\u989c\u8272\u4ee3\u7801 var primary = Dcat.color.alpha('#5c6bc6', 0.1) console.log(primary); // \u8f93\u51fa rgba(92, 107, 198, 0.1) \u83b7\u53d6\u6240\u6709\u5185\u7f6e\u989c\u8272 \u901a\u8fc7 Dcat.color.all \u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u6240\u6709\u5185\u7f6e\u989c\u8272\u768416\u8fdb\u5236\u4ee3\u7801\uff0c\u6b64\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u952e\u503c\u5bf9\u5bf9\u8c61\u3002 var allColors = Dcat.color.all(); \u989c\u8272\u8868\u4e0e\u6837\u5f0f Dcat Admin \u524d\u7aef\u662f\u91c7\u7528 bootstrap4 \u7f16\u5199\u7684\uff0c\u56e0\u6b64\u9996\u5148\u8981\u5b66\u4e60 Bootstrap4 \u989c\u8272(Color)\u6837\u5f0f \u7684\u4f7f\u7528\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u76f8\u5173\u5185\u5bb9\u3002 \u4ee5\u4e0b\u662f Dcat Admin \u4e2d\u5e38\u7528\u989c\u8272\u6837\u5f0f\u8868\uff0c\u5176\u4e2d\u4ee5 .bg-* \u5f00\u5934\u7684\u6837\u5f0f\u662f\u80cc\u666f\u8272\uff0c\u4ee5 .text- \u5f00\u5934\u7684\u6837\u5f0f\u662f\u6587\u672c\u989c\u8272 .color-sections { } .color-section { width: 600px; height: 60px; line-height: 60px; text-align: center; vertical-align: middle; /*display: inline-block;*/ margin-bottom: 5px; } .white { color: #fff; } .text-primary .bg-primary primary/indigo .text-primary-darker indigo-darker purple cyan cyan-darker .text-info .bg-info blue/info .text-blue-darker blue-darker .text-blue-1 .bg-blue-1 blue1 .text-blue-2 .bg-blue-2 blue2 .text-custom .bg-custom custom .text-success .bg-success green/success .text-danger .bg-danger danger/red .text-danger-darker red-darker .text-warning .bg-warning warning/orange .text-orange-1 .bg-orange-1 orange1 .text-orange-2 .bg-orange-2 orange2 .text-yellow .bg-yellow yellow .text-pink .bg-pink pink .text-tear .bg-tear tear .text-tear-1 .bg-tear-1 tear1 dark .text-gray .bg-gray gray .text-light .bg-light light .text-dark20 .bg-dark20 dark20 .text-dark30 .bg-dark30 dark30 .text-dark35 .bg-dark35 dark35 .text-dark40 .bg-dark40 dark40 .text-dark50 .bg-dark50 dark50 .text-dark60 .bg-dark60 dark60 .text-dark70 .bg-dark70 dark70 .text-dark80 .bg-dark80 dark80 .text-dark85 .bg-dark85 dark85 dark90 font\u5b57\u4f53\u989c\u8272 gray-bg border input-border","title":"\u4e3b\u9898\u4e0e\u989c\u8272"},{"location":"2.x/theme/#_1","text":"","title":"\u4e3b\u9898\u4e0e\u989c\u8272"},{"location":"2.x/theme/#_2","text":"Dcat Admin \u652f\u6301\u4e3b\u9898\u5207\u6362\u529f\u80fd\uff0c\u76ee\u524d\u5185\u7f6e\u4e86\u56db\u79cd\u4e3b\u9898\u8272\uff1a indigo \u3001 blue \u3001 blue-light \u3001 green \uff0c\u53ef\u901a\u8fc7\u914d\u7f6e\u53c2\u6570 admin.layout.color \u8fdb\u884c\u5207\u6362\u3002 \u6253\u5f00\u914d\u7f6e\u6587\u4ef6 config/admin.php 'layout' => [ 'color' => 'blue', ... ], ... \u90e8\u5206\u4e3b\u9898\u8272\u9884\u89c8","title":"\u5207\u6362\u4e3b\u9898"},{"location":"2.x/theme/#_3","text":"{tip} \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u81ea\u5b9a\u4e49\u4e86\u4e3b\u9898\u4e4b\u540e\uff0c\u6bcf\u6b21\u66f4\u65b0\u65b0\u7248\u672c\uff0c\u90fd\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u4e00\u6b21\u4f60\u7684\u81ea\u5b9a\u4e49\u4e3b\u9898\uff01\uff01\uff01 \u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u529f\u80fd\u968f\u610f\u6dfb\u52a0\u81ea\u5df1\u60f3\u8981\u7684\u4e3b\u9898\u914d\u8272\uff0c\u5728\u4f7f\u7528\u8fd9\u4e2a\u529f\u80fd\u4e4b\u524d\u9700\u8981\u5148\u5b89\u88c5 NodeJs \uff0c\u6ca1\u5b89\u88c5\u7684\u540c\u5b66\u524d\u5f80 http://nodejs.cn/ \u4e0b\u8f7d\u5b89\u88c5\u5373\u53ef\u3002 \u5b89\u88c5\u5b8c NodeJs \u4e4b\u540e\u53ef\u6253\u5f00\u547d\u4ee4\u884c\u8fd0\u884c npm -v \u6d4b\u8bd5\u4e00\u4e0b\u662f\u5426\u5b89\u88c5\u6210\u529f\u3002 npm -v \u5982\u679c\u6b63\u5e38\u8fd4\u56de\u7248\u672c\u53f7\uff0c\u5219\u8bf4\u660e\u5df2\u5b89\u88c5\u6210\u529f\uff0c\u540c\u65f6\u5efa\u8bae\u4f7f\u7528\u6dd8\u5b9d\u955c\u50cf npm config set registry https://registry.npm.taobao.org \u7136\u540e\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u7f16\u8bd1\u81ea\u5b9a\u4e49\u4e3b\u9898\u7684\u6587\u4ef6\uff0c\u53ea\u9700\u8f93\u5165\u4e3b\u9898\u7684\u540d\u79f0\u548c\u4e3b\u9898\u989c\u8272\u4ee3\u7801( \u5341\u516d\u8fdb\u5236 )\u5373\u53ef\u3002 \u8fd9\u91cc\u6211\u4eec\u4ee5\u751f\u6210\u4e00\u4e2a orange \u4e3b\u9898\u4e3a\u4f8b {tip} \u8fd9\u4e2a\u547d\u4ee4\u7b2c\u4e00\u6b21\u8fd0\u884c\u65f6\u9700\u8981\u8f83\u957f\u65f6\u95f4\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u3002\u5982\u679c\u8fd0\u884c\u5931\u8d25\uff0c\u8bf7\u5c1d\u8bd5\u7ed9 vendor \u76ee\u5f55\u5199\u6743\u9650\u3002 php artisan admin:minify orange --color fbbd08 --publish \u4e0a\u9762\u7684\u547d\u4ee4\u7684\u610f\u601d\u662f\u751f\u6210\u4e00\u4e2a orange \u4e3b\u9898\uff0c\u989c\u8272\u4ee3\u7801\u4e3a #fbbd08 \uff0c\u5e76\u4e14\u751f\u6210\u4e4b\u540e\u81ea\u52a8\u53d1\u5e03\u9759\u6001\u8d44\u6e90\u3002\u5982\u679c\u7f16\u8bd1\u6210\u529f\uff0c\u547d\u4ee4\u884c\u4f1a\u8f93\u51fa\u4ee5\u4e0b\u5185\u5bb9 ... DONE Compiled successfully in 48001ms8:24:28 PM Asset Size Chunks Chunk Names /resources/dist/adminlte/adminlte.js 29.7 KiB 0 [emitted] /resources/dist/adminlte/adminlte /resources/dist/adminlte/adminlte.js.map 87.8 KiB 0 [emitted] [dev] /resources/dist/adminlte/adminlte /resources/dist/dcat/extra/action.js 3.7 KiB 1 [emitted] /resources/dist/dcat/extra/action /resources/dist/dcat/extra/action.js.map 12.9 KiB 1 [emitted] [dev] /resources/dist/dcat/extra/action /resources/dist/dcat/extra/grid-extend.js 4.87 KiB 2 [emitted] /resources/dist/dcat/extra/grid-extend /resources/dist/dcat/extra/grid-extend.js.map 21.7 KiB 2 [emitted] [dev] /resources/dist/dcat/extra/grid-extend /resources/dist/dcat/extra/resource-selector.js 5.8 KiB 3 [emitted] /resources/dist/dcat/extra/resource-selector /resources/dist/dcat/extra/resource-selector.js.map 24 KiB 3 [emitted] [dev] /resources/dist/dcat/extra/resource-selector /resources/dist/dcat/extra/upload.js 17.2 KiB 4 [emitted] /resources/dist/dcat/extra/upload /resources/dist/dcat/extra/upload.js.map 66.8 KiB 4 [emitted] [dev] /resources/dist/dcat/extra/upload /resources/dist/dcat/js/dcat-app.js 88.8 KiB 5 [emitted] /resources/dist/dcat/js/dcat-app /resources/dist/dcat/js/dcat-app.js.map 164 KiB 5 [emitted] [dev] /resources/dist/dcat/js/dcat-app resources/dist/adminlte/adminlte-orange.css 656 KiB 0 [emitted] [big] /resources/dist/adminlte/adminlte resources/dist/dcat/css/dcat-app-orange.css 43 KiB 0 [emitted] /resources/dist/adminlte/adminlte resources/dist/dcat/extra/markdown-orange.css 1.72 KiB 0 [emitted] /resources/dist/adminlte/adminlte resources/dist/dcat/extra/step-orange.css 8.56 KiB 0 [emitted] /resources/dist/adminlte/adminlte resources/dist/dcat/extra/upload-orange.css 6.42 KiB 0 [emitted] /resources/dist/adminlte/adminlte Copied Directory [\\dcat-admin\\resources\\dist] To [\\public\\vendors\\dcat-admin] Publishing complete. Compiled views cleared! \u4e3b\u9898\u6587\u4ef6\u7f16\u8bd1\u6210\u529f\u4e4b\u540e\uff0c\u8fd8\u9700\u8981\u5728 app/Admin/bootstrap.php \u4e2d\u52a0\u5165\u4ee5\u4e0b\u4ee3\u7801 Dcat\\Admin\\Color::extend('orange', [ 'primary' => '#fbbd08', 'primary-darker' => '#fbbd08', 'link' => '#fbbd08', ]); \u6700\u540e\u628a\u4f60\u7684\u914d\u7f6e\u53c2\u6570 admin.layout.color \u7684\u503c\u8bbe\u7f6e\u4e3a orange \u5c31\u884c\u4e86\u3002","title":"\u81ea\u5b9a\u4e49\u4e3b\u9898\u914d\u8272"},{"location":"2.x/theme/#_4","text":"","title":"\u6df1\u8272\u6a21\u5f0f"},{"location":"2.x/theme/#_5","text":"\u901a\u8fc7\u914d\u7f6e\u53c2\u6570 admin.layout.dark_mode_switch \u53ef\u4ee5\u542f\u7528\u6216\u7981\u7528\u6df1\u8272\u6a21\u5f0f\u5207\u6362\u5f00\u5173\u3002\u5f00\u542f\u540e\u4f1a\u5728\u9875\u9762\u9876\u90e8\u5bfc\u822a\u680f\u4e2d\u589e\u52a0\u4e00\u4e2a\u5f00\u5173\u6309\u94ae\uff0c\u70b9\u51fb\u53ef\u4ee5\u5207\u6362\u6df1\u8272\u548c\u660e\u4eae\u6a21\u5f0f\uff0c\u5e76\u4e14\u4f1a\u628a\u72b6\u6001\u4fdd\u5b58\u5728 localStorage \u4e2d\u3002 'layout' => [ 'dark_mode_switch' => true, ... ], ... \u6548\u679c\u5982\u4e0b","title":"\u542f\u7528\u5207\u6362\u6309\u94ae"},{"location":"2.x/theme/#_6","text":"\u6253\u5f00\u914d\u7f6e\u6587\u4ef6 config/admin.php \uff0c\u5199\u5165 'layout' => [ 'body_class' => 'dark-mode', ... ], ...","title":"\u9ed8\u8ba4\u6df1\u8272"},{"location":"2.x/theme/#_7","text":"\u901a\u8fc7\u914d\u7f6e\u53c2\u6570 admin.layout.sidebar_style \u53ef\u4ee5\u914d\u7f6e\u83dc\u5355\u6837\u5f0f\uff08\u5982\u679c\u914d\u7f6e\u6587\u4ef6\u4e2d\u4e0d\u5b58\u5728\u8fd9\u4e2a\u53c2\u6570\u5219\u53ef\u4ee5\u624b\u52a8\u6dfb\u52a0\uff09\uff0c\u652f\u6301\u4e09\u4e2a\u503c light \u3001 primary \u3001 dark \uff0c\u9ed8\u8ba4\u4e3a light {tip} sidebar_dark \u53c2\u6570\u5373\u5c06\u88ab\u5e9f\u5f03\uff01 sidebar_style \u53c2\u6570\u4f1a\u8986\u76d6 sidebar_dark \u53c2\u6570\uff0c\u53ea\u6709\u5f53 sidebar_style \u4e0d\u5b58\u5728\u65f6 sidebar_dark \u624d\u4f1a\u751f\u6548\uff01\uff01\uff01 'layout' => [ // \u652f\u6301 light\u3001primary\u3001dark 'sidebar_style' => 'light', ... ], ... light \u6548\u679c primary \u6548\u679c","title":"\u83dc\u5355\u6837\u5f0f"},{"location":"2.x/theme/#_8","text":"","title":"\u83dc\u5355\u5e03\u5c40"},{"location":"2.x/theme/#horizontal","text":"\u8bbe\u7f6e\u914d\u7f6e\u53c2\u6570 admin.layout.horizontal_menu \u7684\u503c\u4e3a true \u5f00\u542f\u6b64\u529f\u80fd\uff0c\u6548\u679c\u5982\u4e0b","title":"\u9876\u90e8\u6a2a\u5411 (Horizontal)"},{"location":"2.x/theme/#sidebar-separate","text":"\u6dfb\u52a0 sidebar-separate \u5230 admin.layout.body_class \u53c2\u6570\u4e2d 'layout' => [ 'body_class' => ['sidebar-separate'], ... ], ... \u6548\u679c","title":"sidebar-separate"},{"location":"2.x/theme/#php","text":"Dcat Admin \u5185\u7f6e\u4e86\u989c\u8272\u7ba1\u7406\u6a21\u5757\uff0c\u6b64\u529f\u80fd\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u914d\u5408\u4e3b\u9898\u5207\u6362\u529f\u80fd\uff0c\u8ba9\u9875\u9762\u989c\u8272\u4e0e\u4e3b\u9898\u8272\u76f8\u9002\u5e94\uff01 \u901a\u8fc7 Dcat\\Admin\\Admin::color() \u8fd9\u4e2a\u670d\u52a1\u53ef\u4ee5\u5f88\u8f7b\u677e\u7684\u83b7\u53d6\u5e38\u7528\u989c\u8272\uff08\u53ef\u53c2\u8003 \u989c\u8272\u8868\u4e0e\u6837\u5f0f \uff09\u3002","title":"PHP\u989c\u8272\u7ba1\u7406"},{"location":"2.x/theme/#_9","text":"\u901a\u8fc7 Color::get \u6216\u9b54\u672f\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u989c\u8272\u4ee3\u7801\uff0c\u5f53\u901a\u8fc7 Color::get \u83b7\u53d6\u7684\u989c\u8272\u4e0d\u5b58\u5728\u65f6\uff0c\u4f1a\u8fd4\u56de\u53c2\u6570\u7684\u539f\u59cb\u503c\u3002 <?php use Dcat\\Admin\\Admin; // get \u65b9\u6cd5\u83b7\u53d6\u989c\u8272 echo Admin::color()->get('primary'); // \u8f93\u51fa #5c6bc6 // \u901a\u8fc7\u9b54\u672f\u65b9\u6cd5\u83b7\u53d6\u989c\u8272 echo Admin::color()->primary(); // \u8f93\u51fa #5c6bc6","title":"\u83b7\u53d6\u5185\u7f6e\u989c\u8272"},{"location":"2.x/theme/#_10","text":"\u901a\u8fc7 Color::lighten \u65b9\u6cd5\u6216\u9b54\u672f\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u6de1\u5316\u540e\u7684\u989c\u8272\u768416\u8fdb\u5236\u989c\u8272\u4ee3\u7801\u3002 Color::lighten \u65b9\u6cd5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a $name string \u989c\u8272\u522b\u540d $amt int \u989c\u8272\u504f\u5dee\u503c\uff0c\u503c\u8d8a\u5927\u989c\u8272\u8d8a \u6de1 echo Admin::color()->lighten('primary', 10); // \u8f93\u51fa #6675d0 // \u4e5f\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528\uff0c\u6ce8\u610f\u8fd9\u91cc\u7684\u53c2\u6570\u8981\u4f20\u8d1f\u6570 echo Admin::color()->primary(-10); // \u8f93\u51fa #6675d0 \u4e5f\u652f\u6301\u76f4\u63a5\u4f20\u989c\u8272\u4ee3\u7801 echo Admin::color()->lighten('#5c6bc6', 10); // \u8f93\u51fa #6675d0","title":"\u989c\u8272\u6de1\u5316"},{"location":"2.x/theme/#_11","text":"\u901a\u8fc7 Color::darken \u65b9\u6cd5\u6216\u9b54\u672f\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u6df1\u5316\u540e\u7684\u989c\u8272\u768416\u8fdb\u5236\u989c\u8272\u4ee3\u7801\u3002 Color::darken \u65b9\u6cd5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a $name string \u989c\u8272\u522b\u540d $amt int \u989c\u8272\u504f\u5dee\u503c\uff0c\u503c\u8d8a\u5927\u989c\u8272\u8d8a \u6df1 echo Admin::color()->darken('primary', 10); // \u8f93\u51fa #5261bc // \u4e5f\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528 echo Admin::color()->primary(10); // \u8f93\u51fa #5261bc \u4e5f\u652f\u6301\u76f4\u63a5\u4f20\u989c\u8272\u4ee3\u7801 echo Admin::color()->darken('#5c6bc6', 10); // \u8f93\u51fa #5261bc","title":"\u989c\u8272\u6df1\u5316"},{"location":"2.x/theme/#_12","text":"\u901a\u8fc7 Color::alpha \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u989c\u8272\u7684\u900f\u660e\u5ea6\u3002 Color::alpha \u65b9\u6cd5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a $name string \u989c\u8272\u522b\u540d $alpha float \u900f\u660e\u5ea6\uff0c 0 ~ 1 \u4e4b\u95f4\u7684\u503c\uff0c\u503c\u8d8a\u5c0f\u900f\u660e\u5ea6\u8d8a\u9ad8 echo Admin::color()->alpha('primary', 0.1); // \u8f93\u51fa rgba(92, 107, 198, 0.1) \u4e5f\u652f\u6301\u76f4\u63a5\u4f20\u989c\u8272\u4ee3\u7801 echo Admin::color()->alpha('5c6bc6', 0.1); // \u8f93\u51fa rgba(92, 107, 198, 0.1)","title":"\u989c\u8272\u900f\u660e\u5316"},{"location":"2.x/theme/#_13","text":"\u901a\u8fc7 Color::all \u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u6240\u6709\u5185\u7f6e\u989c\u8272\u768416\u8fdb\u5236\u4ee3\u7801\uff0c\u6b64\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4 $allColors = Admin::color()->all();","title":"\u83b7\u53d6\u6240\u6709\u5185\u7f6e\u989c\u8272"},{"location":"2.x/theme/#js","text":"JS \u6a21\u5757\u4e2d\u540c\u6837\u4e5f\u5305\u542b\u989c\u8272\u7ba1\u7406\u529f\u80fd\uff0c\u901a\u8fc7 Dcat.color \u5bf9\u8c61\u53ef\u4ee5\u50cf\u5728PHP\u4ee3\u7801\u4e2d\u4e00\u6837\u7ba1\u7406\u989c\u8272\u3002","title":"JS\u989c\u8272\u7ba1\u7406"},{"location":"2.x/theme/#_14","text":"\u5728 JS \u4ee3\u7801\u4e2d\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u4e09\u79cd\u65b9\u5f0f\u83b7\u53d6\u989c\u8272\u4ee3\u7801 Admin::script( <<<JS // \u65b9\u5f0f1 var primary = Dcat.color.primary; // \u65b9\u5f0f2 var primary = Dcat.color['primary']; // \u65b9\u5f0f3 var primary = Dcat.color.get('primary'); console.log(primary); // \u6253\u5370 #5c6bc6 JS );","title":"\u83b7\u53d6\u5185\u7f6e\u989c\u8272"},{"location":"2.x/theme/#_15","text":"\u901a\u8fc7 Dcat.color.lighten \u65b9\u6cd5\u6216\u9b54\u672f\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u6de1\u5316\u540e\u7684\u989c\u8272\u768416\u8fdb\u5236\u989c\u8272\u4ee3\u7801\u3002 color.lighten \u65b9\u6cd5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a name string \u989c\u8272\u522b\u540d amt int \u989c\u8272\u504f\u5dee\u503c\uff0c\u503c\u8d8a\u5927\u989c\u8272\u8d8a \u6de1 Admin::script( <<<JS var primary = Dcat.color.lighten('primary', 10) console.log(primary); // \u8f93\u51fa #6675d0 JS ); \u4e5f\u652f\u6301\u76f4\u63a5\u4f20\u989c\u8272\u4ee3\u7801 var primary = Dcat.color.lighten('5c6bc6', 10); console.log(primary); // \u8f93\u51fa #6675d0","title":"\u989c\u8272\u6de1\u5316"},{"location":"2.x/theme/#_16","text":"\u901a\u8fc7 Dcat.color.darken \u65b9\u6cd5\u6216\u9b54\u672f\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u6df1\u5316\u540e\u7684\u989c\u8272\u768416\u8fdb\u5236\u989c\u8272\u4ee3\u7801\u3002 color.darken \u65b9\u6cd5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a name string \u989c\u8272\u522b\u540d amt int \u989c\u8272\u504f\u5dee\u503c\uff0c\u503c\u8d8a\u5927\u989c\u8272\u8d8a \u6df1 Admin::script( <<<JS var primary = Dcat.color.darken('primary', 10) console.log(primary); // \u8f93\u51fa #5261bc JS ); \u4e5f\u652f\u6301\u76f4\u63a5\u4f20\u989c\u8272\u4ee3\u7801 var primary = Dcat.color.darken('5c6bc6', 10) console.log(primary); // \u8f93\u51fa #5261bc","title":"\u989c\u8272\u6df1\u5316"},{"location":"2.x/theme/#_17","text":"\u901a\u8fc7 Dcat.color.alpha \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u989c\u8272\u7684\u900f\u660e\u5ea6\u3002 color.alpha \u65b9\u6cd5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a $name string \u989c\u8272\u522b\u540d $alpha float \u900f\u660e\u5ea6\uff0c 0 ~ 1 \u4e4b\u95f4\u7684\u503c\uff0c\u503c\u8d8a\u5c0f\u900f\u660e\u5ea6\u8d8a\u9ad8 Admin::script( <<<JS var primary = Dcat.color.alpha('primary', 0.1) console.log(primary); // \u8f93\u51fa rgba(92, 107, 198, 0.1) JS ); \u4e5f\u652f\u6301\u76f4\u63a5\u4f20\u989c\u8272\u4ee3\u7801 var primary = Dcat.color.alpha('#5c6bc6', 0.1) console.log(primary); // \u8f93\u51fa rgba(92, 107, 198, 0.1)","title":"\u989c\u8272\u900f\u660e\u5316"},{"location":"2.x/theme/#_18","text":"\u901a\u8fc7 Dcat.color.all \u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u6240\u6709\u5185\u7f6e\u989c\u8272\u768416\u8fdb\u5236\u4ee3\u7801\uff0c\u6b64\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u952e\u503c\u5bf9\u5bf9\u8c61\u3002 var allColors = Dcat.color.all();","title":"\u83b7\u53d6\u6240\u6709\u5185\u7f6e\u989c\u8272"},{"location":"2.x/theme/#_19","text":"Dcat Admin \u524d\u7aef\u662f\u91c7\u7528 bootstrap4 \u7f16\u5199\u7684\uff0c\u56e0\u6b64\u9996\u5148\u8981\u5b66\u4e60 Bootstrap4 \u989c\u8272(Color)\u6837\u5f0f \u7684\u4f7f\u7528\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u76f8\u5173\u5185\u5bb9\u3002 \u4ee5\u4e0b\u662f Dcat Admin \u4e2d\u5e38\u7528\u989c\u8272\u6837\u5f0f\u8868\uff0c\u5176\u4e2d\u4ee5 .bg-* \u5f00\u5934\u7684\u6837\u5f0f\u662f\u80cc\u666f\u8272\uff0c\u4ee5 .text- \u5f00\u5934\u7684\u6837\u5f0f\u662f\u6587\u672c\u989c\u8272 .color-sections { } .color-section { width: 600px; height: 60px; line-height: 60px; text-align: center; vertical-align: middle; /*display: inline-block;*/ margin-bottom: 5px; } .white { color: #fff; } .text-primary .bg-primary primary/indigo .text-primary-darker indigo-darker purple cyan cyan-darker .text-info .bg-info blue/info .text-blue-darker blue-darker .text-blue-1 .bg-blue-1 blue1 .text-blue-2 .bg-blue-2 blue2 .text-custom .bg-custom custom .text-success .bg-success green/success .text-danger .bg-danger danger/red .text-danger-darker red-darker .text-warning .bg-warning warning/orange .text-orange-1 .bg-orange-1 orange1 .text-orange-2 .bg-orange-2 orange2 .text-yellow .bg-yellow yellow .text-pink .bg-pink pink .text-tear .bg-tear tear .text-tear-1 .bg-tear-1 tear1 dark .text-gray .bg-gray gray .text-light .bg-light light .text-dark20 .bg-dark20 dark20 .text-dark30 .bg-dark30 dark30 .text-dark35 .bg-dark35 dark35 .text-dark40 .bg-dark40 dark40 .text-dark50 .bg-dark50 dark50 .text-dark60 .bg-dark60 dark60 .text-dark70 .bg-dark70 dark70 .text-dark80 .bg-dark80 dark80 .text-dark85 .bg-dark85 dark85 dark90 font\u5b57\u4f53\u989c\u8272 gray-bg border input-border","title":"\u989c\u8272\u8868\u4e0e\u6837\u5f0f"},{"location":"2.x/trans/","text":"\u591a\u8bed\u8a00 \u5728 Dcat Admin \u4e2d\u4f7f\u7528\u591a\u8bed\u8a00\u7ffb\u8bd1\u975e\u5e38\u65b9\u4fbf\uff0c\u6570\u636e\u8868\u683c\u3001\u6570\u636e\u8868\u5355\u3001\u6570\u636e\u8be6\u60c5\u548c\u6a21\u578b\u6811\u7684\u5b57\u6bb5\u90fd\u652f\u6301\u81ea\u52a8\u8bfb\u53d6\u8bed\u8a00\u5305\u7ffb\u8bd1\uff0c\u5177\u4f53\u53ef\u53c2\u8003 \u8868\u683c\u5b57\u6bb5\u7ffb\u8bd1 \u3001 \u8868\u5355\u5b57\u6bb5\u7ffb\u8bd1 \u3001 \u6570\u636e\u8be6\u60c5\u5b57\u6bb5\u7ffb\u8bd1 \u3002 \u8bed\u8a00\u5305\u6587\u4ef6 \u8bed\u8a00\u5305\u6587\u4ef6\u7c7b\u578b\u5927\u6982\u5982\u4e0b resources/lang \u251c\u2500\u2500 ... \u2514\u2500\u2500 en \u251c\u2500\u2500 admin.php # \u7cfb\u7edf\u5185\u5bb9\u8bed\u8a00\u5305\uff0c\u5305\u62ec\u83dc\u5355\u6807\u9898\u7ffb\u8bd1\u7b49\u90fd\u5728\u91cc\u9762 \u251c\u2500\u2500 global.php # \u63a7\u5236\u5668\u516c\u5171\u8bed\u8a00\u5305 \u251c\u2500\u2500 {xxx}.php # \u63a7\u5236\u5668\u8bed\u8a00\u5305\uff0c\u4e00\u4e2a\u63a7\u5236\u5668\u5bf9\u5e94\u4e00\u4e2a\u8bed\u8a00\u5305 \u2514\u2500\u2500 ... \u63a7\u5236\u5668\u8bed\u8a00\u5305\u540d\u79f0\u9700\u8981\u4e0e\u63a7\u5236\u5668\u540d\u76f8\u5bf9\u5e94\uff0c\u4f8b\u5982\u63a7\u5236\u5668\u540d UserProfileController \uff0c\u5219\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u4e3a resources/lang/{\u5f53\u524d\u8bed\u8a00}/user-profile.php \uff08\u9700\u8981\u8f6c\u5316\u4e3a\u5c0f\u5199\u4e2d\u5212\u7ebf\u98ce\u683c\uff09\u3002 \u63a7\u5236\u5668\u8bed\u8a00\u5305\u5185\u5bb9\u683c\u5f0f \u63a7\u5236\u5668\u8bed\u8a00\u5305\uff08\u5305\u62ec global.php \uff09\u4e2d\u7684\u5185\u5bb9\u5206\u4e3a\u4e09\u4e2a\u7c7b\u522b\uff1a fields \u6570\u636e\u5b57\u6bb5\u7684\u7ffb\u8bd1\uff0c\u8fd9\u4e2a\u7c7b\u522b\u4e0b\u653e\u7f6e\u6570\u636e\u5b57\u6bb5\u7684\u7ffb\u8bd1 labels \u81ea\u5b9a\u4e49\u5185\u5bb9\u7ffb\u8bd1\uff0c\u8fd9\u4e2a\u7c7b\u522b\u4e0b\u662f\u5bf9\u6570\u636e\u5b57\u6bb5\u5916\u7684\u5185\u5bb9\u7ffb\u8bd1\uff0c\u53ef\u4ee5\u662f\u4efb\u4f55\u81ea\u5b9a\u4e49\u5185\u5bb9 options \u679a\u4e3e\u9009\u9879\u7ffb\u8bd1 \u4e0b\u9762\u662f\u4f8b\u5b50\uff1a \u5047\u8bbe\u63a7\u5236\u5668\u8bed\u8a00\u5305 user-profile.php \u5185\u5bb9\u5982\u4e0b\uff1a <?php return [ 'labels' => [ 'UserProfile' => '\u7528\u6237\u4e2d\u5fc3', 'list' => '\u5217\u8868', 'pagination' => [ 'range' => '\u4ece :first \u5230 :last \uff0c\u603b\u5171 :total \u6761', ], ], 'fields' => [ 'name' => '\u540d\u79f0', 'published' => '\u53d1\u5e03', 'author' => '\u4f5c\u8005', 'status' => '\u72b6\u6001', ], 'options' => [ 'status' => [ 0 => '\u672a\u6fc0\u6d3b', 1 => '\u5df2\u6fc0\u6d3b', ], ], ]; \u5219\u8bed\u8a00\u5305\u53ef\u4ee5\u8fd9\u4e48\u4f7f\u7528 class UserProfileController extend AdminController { public function title() { // labels\u7ffb\u8bd1\u793a\u4f8b\uff0c\u6700\u7ec8\u7ffb\u8bd1\u6210 \u201c\u7528\u6237\u4e2d\u5fc3\u201d return admin_trans_label('UserProfile'); } // fields\u548coptions\u7ffb\u8bd1\u793a\u4f8b public function grid() { $grid = new Grid(new UserProfile()); // \u663e\u793a\u8c03\u7528\u8bed\u8a00\u5305\u7ffb\u8bd1\uff0c\u8fd9\u91cc\u4f1a\u628a \u201cname\u201d \u5b57\u6bb5\u7ffb\u8bd1\u6210 \u201c\u540d\u79f0\u201d $grid->name(admin_trans_field('name')); // \u9690\u5f0f\u4f7f\u7528\u8bed\u8a00\u5305\u7ffb\u8bd1\uff0c\u201cauthor\u201d \u5b57\u6bb5\u4f1a\u81ea\u52a8\u7ffb\u8bd1\u6210 \u201c\u4f5c\u8005\u201d $grid->author; // \u8c03\u7528options\u7ffb\u8bd1 $grid->status()->using(admin_trans('user-profile.options.status')); return $grid; } } \u4f7f\u7528 admin_trans_field \u8fd9\u4e2a\u51fd\u6570\u7528\u4e8e\u7ffb\u8bd1 fields \u7c7b\u522b\u4e0b\u5185\u5bb9\uff0c\u4f1a\u81ea\u52a8\u627e\u5bf9\u5e94\u63a7\u5236\u5668\u4e0b\u7684\u7ffb\u8bd1\u6587\u4ef6\uff0c\u5982\u679c\u7ffb\u8bd1\u4e0d\u5b58\u5728\u4f1a\u53bb\u627e global.php \u4e2d\u7684\u7ffb\u8bd1\u3002 admin_trans_field('name'); admin_trans_label \u8fd9\u4e2a\u51fd\u6570\u7528\u4e8e\u7ffb\u8bd1 labels \u7c7b\u522b\u4e0b\u5185\u5bb9\uff0c\u4f1a\u81ea\u52a8\u627e\u5bf9\u5e94\u63a7\u5236\u5668\u4e0b\u7684\u7ffb\u8bd1\u6587\u4ef6\uff0c\u5982\u679c\u7ffb\u8bd1\u4e0d\u5b58\u5728\u4f1a\u53bb\u627e global.php \u4e2d\u7684\u7ffb\u8bd1\u3002 admin_trans_label('Posts'); admin_trans_label('pagination.range', ['first' => 1, 'last' => 1, 'total' => 0]); admin_trans_option \u8fd9\u4e2a\u51fd\u6570\u7528\u4e8e\u7ffb\u8bd1 options \u7c7b\u522b\u4e0b\u5185\u5bb9\uff0c\u4f1a\u81ea\u52a8\u627e\u5bf9\u5e94\u63a7\u5236\u5668\u4e0b\u7684\u7ffb\u8bd1\u6587\u4ef6\uff0c\u5982\u679c\u7ffb\u8bd1\u4e0d\u5b58\u5728\u4f1a\u53bb\u627e global.php \u4e2d\u7684\u7ffb\u8bd1\u3002 admin_trans_option(1, 'status'); admin_trans \u6b64\u65b9\u6cd5\u4e0e Laravel \u6846\u67b6\u81ea\u5e26\u7684 trans \u65b9\u6cd5\u7528\u6cd5\u6ca1\u6709\u533a\u522b\uff0c\u552f\u4e00\u7684\u533a\u522b\u662f\uff1a\u5f53\u7ffb\u8bd1\u7684\u5185\u5bb9\u627e\u4e0d\u5230\u65f6\uff0c\u4f1a\u53bb global.php \u4e2d\u518d\u627e\u4e00\u6b21\u3002 // \u5148\u53bb user.php \u4e2d\u627e first_name \u7684\u7ffb\u8bd1\uff0c\u5982\u679c\u627e\u4e0d\u5230\u4f1a\u53bb global.php \u4e2d\u627e admin_trans('user.first_name'); \u516c\u5171\u7ffb\u8bd1\u6587\u4ef6 \u6240\u6709\u5e38\u7528\u7684\u7ffb\u8bd1\u90fd\u53ef\u4ee5\u653e\u5728 resources/lang/{\u5f53\u524d\u8bed\u8a00}/global.php \u4e2d\uff0c\u5f53\u63a7\u5236\u5668\u7ffb\u8bd1\u6587\u4ef6\u4e0d\u5b58\u5728\u65f6\u4f1a\u8bfb\u53d6\u516c\u5171\u7ffb\u8bd1\u6587\u4ef6\u7ffb\u8bd1\u3002 <?php return [ 'fields' => [ 'id' => 'ID', 'name' => '\u540d\u79f0', 'username' => '\u7528\u6237\u540d', 'email' => '\u90ae\u7bb1', 'password' => '\u5bc6\u7801', ], 'labels' => [ 'list' => '\u5217\u8868', 'edit' => '\u7f16\u8f91', 'detail' => '\u8be6\u7ec6', 'create' => '\u521b\u5efa', 'root' => '\u9876\u7ea7', 'scaffold' => '\u4ee3\u7801\u751f\u6210\u5668', ], 'options' => [ ], ]; \u9ed8\u8ba4\u9762\u5305\u5c51\u7ffb\u8bd1 \u4f8b\u5982\u4f60\u7684\u8bbf\u95ee\u8def\u5f84\u662f /admin/my-users \uff0c\u63a7\u5236\u5668\u662f MyUserController \uff0c\u90a3\u4e48\u5219\u53ef\u4ee5\u5728\u63a7\u5236\u5668\u5bf9\u5e94\u7684\u7ffb\u8bd1\u6587\u4ef6\u4e2d\u52a0\u4e0a return [ 'labels' => [ 'my-users' => '\u7528\u6237', ], ... ];","title":"\u591a\u8bed\u8a00"},{"location":"2.x/trans/#_1","text":"\u5728 Dcat Admin \u4e2d\u4f7f\u7528\u591a\u8bed\u8a00\u7ffb\u8bd1\u975e\u5e38\u65b9\u4fbf\uff0c\u6570\u636e\u8868\u683c\u3001\u6570\u636e\u8868\u5355\u3001\u6570\u636e\u8be6\u60c5\u548c\u6a21\u578b\u6811\u7684\u5b57\u6bb5\u90fd\u652f\u6301\u81ea\u52a8\u8bfb\u53d6\u8bed\u8a00\u5305\u7ffb\u8bd1\uff0c\u5177\u4f53\u53ef\u53c2\u8003 \u8868\u683c\u5b57\u6bb5\u7ffb\u8bd1 \u3001 \u8868\u5355\u5b57\u6bb5\u7ffb\u8bd1 \u3001 \u6570\u636e\u8be6\u60c5\u5b57\u6bb5\u7ffb\u8bd1 \u3002","title":"\u591a\u8bed\u8a00"},{"location":"2.x/trans/#_2","text":"\u8bed\u8a00\u5305\u6587\u4ef6\u7c7b\u578b\u5927\u6982\u5982\u4e0b resources/lang \u251c\u2500\u2500 ... \u2514\u2500\u2500 en \u251c\u2500\u2500 admin.php # \u7cfb\u7edf\u5185\u5bb9\u8bed\u8a00\u5305\uff0c\u5305\u62ec\u83dc\u5355\u6807\u9898\u7ffb\u8bd1\u7b49\u90fd\u5728\u91cc\u9762 \u251c\u2500\u2500 global.php # \u63a7\u5236\u5668\u516c\u5171\u8bed\u8a00\u5305 \u251c\u2500\u2500 {xxx}.php # \u63a7\u5236\u5668\u8bed\u8a00\u5305\uff0c\u4e00\u4e2a\u63a7\u5236\u5668\u5bf9\u5e94\u4e00\u4e2a\u8bed\u8a00\u5305 \u2514\u2500\u2500 ... \u63a7\u5236\u5668\u8bed\u8a00\u5305\u540d\u79f0\u9700\u8981\u4e0e\u63a7\u5236\u5668\u540d\u76f8\u5bf9\u5e94\uff0c\u4f8b\u5982\u63a7\u5236\u5668\u540d UserProfileController \uff0c\u5219\u5bf9\u5e94\u7684\u8bed\u8a00\u5305\u4e3a resources/lang/{\u5f53\u524d\u8bed\u8a00}/user-profile.php \uff08\u9700\u8981\u8f6c\u5316\u4e3a\u5c0f\u5199\u4e2d\u5212\u7ebf\u98ce\u683c\uff09\u3002","title":"\u8bed\u8a00\u5305\u6587\u4ef6"},{"location":"2.x/trans/#_3","text":"\u63a7\u5236\u5668\u8bed\u8a00\u5305\uff08\u5305\u62ec global.php \uff09\u4e2d\u7684\u5185\u5bb9\u5206\u4e3a\u4e09\u4e2a\u7c7b\u522b\uff1a fields \u6570\u636e\u5b57\u6bb5\u7684\u7ffb\u8bd1\uff0c\u8fd9\u4e2a\u7c7b\u522b\u4e0b\u653e\u7f6e\u6570\u636e\u5b57\u6bb5\u7684\u7ffb\u8bd1 labels \u81ea\u5b9a\u4e49\u5185\u5bb9\u7ffb\u8bd1\uff0c\u8fd9\u4e2a\u7c7b\u522b\u4e0b\u662f\u5bf9\u6570\u636e\u5b57\u6bb5\u5916\u7684\u5185\u5bb9\u7ffb\u8bd1\uff0c\u53ef\u4ee5\u662f\u4efb\u4f55\u81ea\u5b9a\u4e49\u5185\u5bb9 options \u679a\u4e3e\u9009\u9879\u7ffb\u8bd1 \u4e0b\u9762\u662f\u4f8b\u5b50\uff1a \u5047\u8bbe\u63a7\u5236\u5668\u8bed\u8a00\u5305 user-profile.php \u5185\u5bb9\u5982\u4e0b\uff1a <?php return [ 'labels' => [ 'UserProfile' => '\u7528\u6237\u4e2d\u5fc3', 'list' => '\u5217\u8868', 'pagination' => [ 'range' => '\u4ece :first \u5230 :last \uff0c\u603b\u5171 :total \u6761', ], ], 'fields' => [ 'name' => '\u540d\u79f0', 'published' => '\u53d1\u5e03', 'author' => '\u4f5c\u8005', 'status' => '\u72b6\u6001', ], 'options' => [ 'status' => [ 0 => '\u672a\u6fc0\u6d3b', 1 => '\u5df2\u6fc0\u6d3b', ], ], ]; \u5219\u8bed\u8a00\u5305\u53ef\u4ee5\u8fd9\u4e48\u4f7f\u7528 class UserProfileController extend AdminController { public function title() { // labels\u7ffb\u8bd1\u793a\u4f8b\uff0c\u6700\u7ec8\u7ffb\u8bd1\u6210 \u201c\u7528\u6237\u4e2d\u5fc3\u201d return admin_trans_label('UserProfile'); } // fields\u548coptions\u7ffb\u8bd1\u793a\u4f8b public function grid() { $grid = new Grid(new UserProfile()); // \u663e\u793a\u8c03\u7528\u8bed\u8a00\u5305\u7ffb\u8bd1\uff0c\u8fd9\u91cc\u4f1a\u628a \u201cname\u201d \u5b57\u6bb5\u7ffb\u8bd1\u6210 \u201c\u540d\u79f0\u201d $grid->name(admin_trans_field('name')); // \u9690\u5f0f\u4f7f\u7528\u8bed\u8a00\u5305\u7ffb\u8bd1\uff0c\u201cauthor\u201d \u5b57\u6bb5\u4f1a\u81ea\u52a8\u7ffb\u8bd1\u6210 \u201c\u4f5c\u8005\u201d $grid->author; // \u8c03\u7528options\u7ffb\u8bd1 $grid->status()->using(admin_trans('user-profile.options.status')); return $grid; } }","title":"\u63a7\u5236\u5668\u8bed\u8a00\u5305\u5185\u5bb9\u683c\u5f0f"},{"location":"2.x/trans/#_4","text":"","title":"\u4f7f\u7528"},{"location":"2.x/trans/#admin_trans_field","text":"\u8fd9\u4e2a\u51fd\u6570\u7528\u4e8e\u7ffb\u8bd1 fields \u7c7b\u522b\u4e0b\u5185\u5bb9\uff0c\u4f1a\u81ea\u52a8\u627e\u5bf9\u5e94\u63a7\u5236\u5668\u4e0b\u7684\u7ffb\u8bd1\u6587\u4ef6\uff0c\u5982\u679c\u7ffb\u8bd1\u4e0d\u5b58\u5728\u4f1a\u53bb\u627e global.php \u4e2d\u7684\u7ffb\u8bd1\u3002 admin_trans_field('name');","title":"admin_trans_field"},{"location":"2.x/trans/#admin_trans_label","text":"\u8fd9\u4e2a\u51fd\u6570\u7528\u4e8e\u7ffb\u8bd1 labels \u7c7b\u522b\u4e0b\u5185\u5bb9\uff0c\u4f1a\u81ea\u52a8\u627e\u5bf9\u5e94\u63a7\u5236\u5668\u4e0b\u7684\u7ffb\u8bd1\u6587\u4ef6\uff0c\u5982\u679c\u7ffb\u8bd1\u4e0d\u5b58\u5728\u4f1a\u53bb\u627e global.php \u4e2d\u7684\u7ffb\u8bd1\u3002 admin_trans_label('Posts'); admin_trans_label('pagination.range', ['first' => 1, 'last' => 1, 'total' => 0]);","title":"admin_trans_label"},{"location":"2.x/trans/#admin_trans_option","text":"\u8fd9\u4e2a\u51fd\u6570\u7528\u4e8e\u7ffb\u8bd1 options \u7c7b\u522b\u4e0b\u5185\u5bb9\uff0c\u4f1a\u81ea\u52a8\u627e\u5bf9\u5e94\u63a7\u5236\u5668\u4e0b\u7684\u7ffb\u8bd1\u6587\u4ef6\uff0c\u5982\u679c\u7ffb\u8bd1\u4e0d\u5b58\u5728\u4f1a\u53bb\u627e global.php \u4e2d\u7684\u7ffb\u8bd1\u3002 admin_trans_option(1, 'status');","title":"admin_trans_option"},{"location":"2.x/trans/#admin_trans","text":"\u6b64\u65b9\u6cd5\u4e0e Laravel \u6846\u67b6\u81ea\u5e26\u7684 trans \u65b9\u6cd5\u7528\u6cd5\u6ca1\u6709\u533a\u522b\uff0c\u552f\u4e00\u7684\u533a\u522b\u662f\uff1a\u5f53\u7ffb\u8bd1\u7684\u5185\u5bb9\u627e\u4e0d\u5230\u65f6\uff0c\u4f1a\u53bb global.php \u4e2d\u518d\u627e\u4e00\u6b21\u3002 // \u5148\u53bb user.php \u4e2d\u627e first_name \u7684\u7ffb\u8bd1\uff0c\u5982\u679c\u627e\u4e0d\u5230\u4f1a\u53bb global.php \u4e2d\u627e admin_trans('user.first_name');","title":"admin_trans"},{"location":"2.x/trans/#_5","text":"\u6240\u6709\u5e38\u7528\u7684\u7ffb\u8bd1\u90fd\u53ef\u4ee5\u653e\u5728 resources/lang/{\u5f53\u524d\u8bed\u8a00}/global.php \u4e2d\uff0c\u5f53\u63a7\u5236\u5668\u7ffb\u8bd1\u6587\u4ef6\u4e0d\u5b58\u5728\u65f6\u4f1a\u8bfb\u53d6\u516c\u5171\u7ffb\u8bd1\u6587\u4ef6\u7ffb\u8bd1\u3002 <?php return [ 'fields' => [ 'id' => 'ID', 'name' => '\u540d\u79f0', 'username' => '\u7528\u6237\u540d', 'email' => '\u90ae\u7bb1', 'password' => '\u5bc6\u7801', ], 'labels' => [ 'list' => '\u5217\u8868', 'edit' => '\u7f16\u8f91', 'detail' => '\u8be6\u7ec6', 'create' => '\u521b\u5efa', 'root' => '\u9876\u7ea7', 'scaffold' => '\u4ee3\u7801\u751f\u6210\u5668', ], 'options' => [ ], ];","title":"\u516c\u5171\u7ffb\u8bd1\u6587\u4ef6"},{"location":"2.x/trans/#_6","text":"\u4f8b\u5982\u4f60\u7684\u8bbf\u95ee\u8def\u5f84\u662f /admin/my-users \uff0c\u63a7\u5236\u5668\u662f MyUserController \uff0c\u90a3\u4e48\u5219\u53ef\u4ee5\u5728\u63a7\u5236\u5668\u5bf9\u5e94\u7684\u7ffb\u8bd1\u6587\u4ef6\u4e2d\u52a0\u4e0a return [ 'labels' => [ 'my-users' => '\u7528\u6237', ], ... ];","title":"\u9ed8\u8ba4\u9762\u5305\u5c51\u7ffb\u8bd1"},{"location":"2.x/update/","text":"\u7248\u672c\u5347\u7ea7\u987b\u77e5 \u8bf4\u660e Dcat Admin \u7684\u7248\u672c\u53d1\u884c\u5c06\u4f1a\u53c2\u8003\u4e3b\u6d41 web\u6846\u67b6 \u7684\u53d1\u884c\u7b56\u7565\uff0c\u5c3d\u91cf\u964d\u4f4e\u7248\u672c\u5347\u7ea7\u5e26\u6765\u7684\u5f71\u54cd\uff0c\u5c0f\u7248\u672c\u548c\u8865\u4e01 \u51b3\u4e0d \u5305\u542b\u975e\u517c\u5bb9\u6027\u66f4\u6539\uff1b\u540c\u65f6\u6211\u4eec\u4e5f\u5c06\u4f1a\u63d0\u4f9b\u66f4\u65b0\u65e5\u5fd7\uff0c\u8be6\u7ec6\u8bf4\u660e\u65b0\u7248\u672c\u7684\u6539\u52a8\u4ee5\u53ca\u53ef\u80fd\u9020\u6210\u7684\u5f71\u54cd\u3002 \u5347\u7ea7\u547d\u4ee4 \u5347\u7ea7\u547d\u4ee4 composer update dcat/laravel-admin \u5347\u7ea7\u6210\u529f\u4e4b\u540e\u9700\u8981\u8fd0\u884c admin:update \u547d\u4ee4\u8fdb\u884c\u91cd\u65b0\u53d1\u5e03\u8bed\u8a00\u5305\u3001\u914d\u7f6e\u6587\u4ef6\u3001\u524d\u7aef\u9759\u6001\u8d44\u6e90\u7b49\u6587\u4ef6\uff0c\u7136\u540e \u6e05\u7406\u6d4f\u89c8\u5668\u7f13\u5b58 # \u53d1\u5e03 \u8bed\u8a00\u5305\u3001\u914d\u7f6e\u6587\u4ef6\u3001\u524d\u7aef\u9759\u6001\u8d44\u6e90\u3001\u6570\u636e\u8fc1\u79fb\u6587\u4ef6\u7b49 php artisan admin:update \u8fd0\u884c admin:update \uff0c\u76f8\u5f53\u4e8e\u8fd0\u884c php artisan admin:publish --assets --migrations --lang --force php artisan migrate \u53d1\u5e03\u6587\u4ef6\u547d\u4ee4 \u8fd0\u884c admin:update \u540e\u4e00\u822c\u4e0d\u9700\u8981\u8fd0\u884c admin:publish \u547d\u4ee4 php artisan admin:publish --force \u53ea\u66f4\u65b0\u8bed\u8a00\u5305 php artisan admin:publish --force --lang \u53ea\u66f4\u65b0\u914d\u7f6e\u6587\u4ef6 php artisan admin:publish --force --config \u53ea\u66f4\u65b0\u524d\u7aef\u9759\u6001\u8d44\u6e90 php artisan admin:publish --force --assets \u53ea\u66f4\u65b0\u6570\u636e\u5e93\u8fc1\u5f99\u6587\u4ef6(\u8fd9\u4e2a\u4e00\u822c\u4e0d\u9700\u8981\u66f4\u65b0) php artisan admin:publish --force --migrations","title":"\u7248\u672c\u5347\u7ea7\u987b\u77e5"},{"location":"2.x/update/#_1","text":"","title":"\u7248\u672c\u5347\u7ea7\u987b\u77e5"},{"location":"2.x/update/#_2","text":"Dcat Admin \u7684\u7248\u672c\u53d1\u884c\u5c06\u4f1a\u53c2\u8003\u4e3b\u6d41 web\u6846\u67b6 \u7684\u53d1\u884c\u7b56\u7565\uff0c\u5c3d\u91cf\u964d\u4f4e\u7248\u672c\u5347\u7ea7\u5e26\u6765\u7684\u5f71\u54cd\uff0c\u5c0f\u7248\u672c\u548c\u8865\u4e01 \u51b3\u4e0d \u5305\u542b\u975e\u517c\u5bb9\u6027\u66f4\u6539\uff1b\u540c\u65f6\u6211\u4eec\u4e5f\u5c06\u4f1a\u63d0\u4f9b\u66f4\u65b0\u65e5\u5fd7\uff0c\u8be6\u7ec6\u8bf4\u660e\u65b0\u7248\u672c\u7684\u6539\u52a8\u4ee5\u53ca\u53ef\u80fd\u9020\u6210\u7684\u5f71\u54cd\u3002","title":"\u8bf4\u660e"},{"location":"2.x/update/#_3","text":"\u5347\u7ea7\u547d\u4ee4 composer update dcat/laravel-admin \u5347\u7ea7\u6210\u529f\u4e4b\u540e\u9700\u8981\u8fd0\u884c admin:update \u547d\u4ee4\u8fdb\u884c\u91cd\u65b0\u53d1\u5e03\u8bed\u8a00\u5305\u3001\u914d\u7f6e\u6587\u4ef6\u3001\u524d\u7aef\u9759\u6001\u8d44\u6e90\u7b49\u6587\u4ef6\uff0c\u7136\u540e \u6e05\u7406\u6d4f\u89c8\u5668\u7f13\u5b58 # \u53d1\u5e03 \u8bed\u8a00\u5305\u3001\u914d\u7f6e\u6587\u4ef6\u3001\u524d\u7aef\u9759\u6001\u8d44\u6e90\u3001\u6570\u636e\u8fc1\u79fb\u6587\u4ef6\u7b49 php artisan admin:update \u8fd0\u884c admin:update \uff0c\u76f8\u5f53\u4e8e\u8fd0\u884c php artisan admin:publish --assets --migrations --lang --force php artisan migrate","title":"\u5347\u7ea7\u547d\u4ee4"},{"location":"2.x/update/#_4","text":"\u8fd0\u884c admin:update \u540e\u4e00\u822c\u4e0d\u9700\u8981\u8fd0\u884c admin:publish \u547d\u4ee4 php artisan admin:publish --force \u53ea\u66f4\u65b0\u8bed\u8a00\u5305 php artisan admin:publish --force --lang \u53ea\u66f4\u65b0\u914d\u7f6e\u6587\u4ef6 php artisan admin:publish --force --config \u53ea\u66f4\u65b0\u524d\u7aef\u9759\u6001\u8d44\u6e90 php artisan admin:publish --force --assets \u53ea\u66f4\u65b0\u6570\u636e\u5e93\u8fc1\u5f99\u6587\u4ef6(\u8fd9\u4e2a\u4e00\u822c\u4e0d\u9700\u8981\u66f4\u65b0) php artisan admin:publish --force --migrations","title":"\u53d1\u5e03\u6587\u4ef6\u547d\u4ee4"},{"location":"2.x/widgets-alert/","text":"\u8b66\u544a\u6846 Alert \u57fa\u672c\u7528\u6cd5 <?php use Dcat\\Admin\\Widgets\\Alert; $alert = Alert::make('\u5185\u5bb9', '\u6807\u9898'); // \u7c7b\u578b $alert->success(); $alert->danger(); $alert->info(); $alert->warning(); // \u56fe\u6807 $alert->icon('feather icon-x'); // \u53ef\u79fb\u9664\u6309\u94ae $alert->removable(); \u6548\u679c Callout <?php use Dcat\\Admin\\Widgets\\Callout; $callout = Callout::make('\u5185\u5bb9', '\u6807\u9898'); // \u989c\u8272 $callout->light(); $callout->primary(); // \u53ef\u79fb\u9664\u6309\u94ae $callout->removable(); \u6548\u679c","title":"\u8b66\u544a\u6846"},{"location":"2.x/widgets-alert/#_1","text":"","title":"\u8b66\u544a\u6846"},{"location":"2.x/widgets-alert/#alert","text":"\u57fa\u672c\u7528\u6cd5 <?php use Dcat\\Admin\\Widgets\\Alert; $alert = Alert::make('\u5185\u5bb9', '\u6807\u9898'); // \u7c7b\u578b $alert->success(); $alert->danger(); $alert->info(); $alert->warning(); // \u56fe\u6807 $alert->icon('feather icon-x'); // \u53ef\u79fb\u9664\u6309\u94ae $alert->removable(); \u6548\u679c","title":"Alert"},{"location":"2.x/widgets-alert/#callout","text":"<?php use Dcat\\Admin\\Widgets\\Callout; $callout = Callout::make('\u5185\u5bb9', '\u6807\u9898'); // \u989c\u8272 $callout->light(); $callout->primary(); // \u53ef\u79fb\u9664\u6309\u94ae $callout->removable(); \u6548\u679c","title":"Callout"},{"location":"2.x/widgets-box/","text":"\u5361\u7247 Card <?php use Dcat\\Admin\\Widgets\\Card; // \u53ea\u586b\u5145\u5185\u5bb9\uff0c\u4e0d\u9700\u8981\u6807\u9898 $card = Card::make(view('...')); // \u6807\u9898\u548c\u5185\u5bb9 $card = Card::make('\u6807\u9898', '\u5185\u5bb9'); // \u8bbe\u7f6e\u95f4\u8ddd $card->padding('0 15px 0 12px'); // \u8bbe\u7f6e\u5de5\u5177\u6309\u94ae $card->tool('<button class=\"btn btn-sm btn-light shadow-none\">\u6309\u94ae</button>'); // \u8bbe\u7f6e\u5e95\u90e8\u5185\u5bb9 $card->footer(view('...')); Box <?php use Dcat\\Admin\\Widgets\\Box; // \u6807\u9898\u548c\u5185\u5bb9 $box = Box::make('\u6807\u9898', '\u5185\u5bb9'); // \u8bbe\u7f6e\u95f4\u8ddd $box->padding('0 15px 0 12px'); // \u8bbe\u7f6e\u5de5\u5177\u6309\u94ae $box->tool('<button class=\"btn btn-sm btn-light shadow-none\">\u6309\u94ae</button>'); // \u8bbe\u7f6e\u6536\u7f29\u6309\u94ae $box->collapsable(); // \u8bbe\u7f6e\u79fb\u9664\u6309\u94ae $box->removable();","title":"\u5361\u7247"},{"location":"2.x/widgets-box/#_1","text":"","title":"\u5361\u7247"},{"location":"2.x/widgets-box/#card","text":"<?php use Dcat\\Admin\\Widgets\\Card; // \u53ea\u586b\u5145\u5185\u5bb9\uff0c\u4e0d\u9700\u8981\u6807\u9898 $card = Card::make(view('...')); // \u6807\u9898\u548c\u5185\u5bb9 $card = Card::make('\u6807\u9898', '\u5185\u5bb9'); // \u8bbe\u7f6e\u95f4\u8ddd $card->padding('0 15px 0 12px'); // \u8bbe\u7f6e\u5de5\u5177\u6309\u94ae $card->tool('<button class=\"btn btn-sm btn-light shadow-none\">\u6309\u94ae</button>'); // \u8bbe\u7f6e\u5e95\u90e8\u5185\u5bb9 $card->footer(view('...'));","title":"Card"},{"location":"2.x/widgets-box/#box","text":"<?php use Dcat\\Admin\\Widgets\\Box; // \u6807\u9898\u548c\u5185\u5bb9 $box = Box::make('\u6807\u9898', '\u5185\u5bb9'); // \u8bbe\u7f6e\u95f4\u8ddd $box->padding('0 15px 0 12px'); // \u8bbe\u7f6e\u5de5\u5177\u6309\u94ae $box->tool('<button class=\"btn btn-sm btn-light shadow-none\">\u6309\u94ae</button>'); // \u8bbe\u7f6e\u6536\u7f29\u6309\u94ae $box->collapsable(); // \u8bbe\u7f6e\u79fb\u9664\u6309\u94ae $box->removable();","title":"Box"},{"location":"2.x/widgets-charts/","text":"\u56fe\u8868 Dcat Admin \u5f15\u5165\u4e86 apexcharts\u56fe\u8868 \u529f\u80fd\uff0c\u901a\u8fc7 Dcat\\Admin\\Widgets\\ApexCharts\\Chart \u8fd9\u4e2a\u7c7b\u53ef\u4ee5\u5e2e\u52a9\u5f00\u53d1\u8005\u5feb\u901f\u6e32\u67d3\u56fe\u8868\u3002 \u7b80\u5355\u7528\u6cd5 \u5982\u679c\u4f60\u9700\u8981\u6784\u5efa\u4e00\u4e2a\u56fe\u8868\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u65b9\u5f0f {tip} \u66f4\u591a\u7c7b\u578b\u7684\u56fe\u8868\uff0c\u8bf7\u53c2\u8003 apexcharts\u5b98\u65b9\u6587\u6863 \u3002 <?php namespace App\\Admin\\Widgets\\Charts; use Dcat\\Admin\\Admin; use Dcat\\Admin\\Widgets\\ApexCharts\\Chart; class MyBar extends Chart { public function __construct($containerSelector = null, $options = []) { parent::__construct($containerSelector, $options); $this->setUpOptions(); } /** * \u521d\u59cb\u5316\u56fe\u8868\u914d\u7f6e */ protected function setUpOptions() { $color = Admin::color(); $colors = [$color->primary(), $color->primaryDarker()]; $this->options([ 'colors' => $colors, 'chart' => [ 'type' => 'bar', 'height' => 430 ], 'plotOptions' => [ 'bar' => [ 'horizontal' => true, 'dataLabels' => [ 'position' => 'top', ], ] ], 'dataLabels' => [ 'enabled' => true, 'offsetX' => -6, 'style' => [ 'fontSize' => '12px', 'colors' => ['#fff'] ] ], 'stroke' => [ 'show' => true, 'width' => 1, 'colors' => ['#fff'] ], 'xaxis' => [ 'categories' => [], ], ]); } /** * \u5904\u7406\u56fe\u8868\u6570\u636e */ protected function buildData() { // \u6267\u884c\u4f60\u7684\u6570\u636e\u67e5\u8be2\u903b\u8f91 $data = [ [ 'data' => [44, 55, 41, 64, 22, 43, 21] ], [ 'data' => [53, 32, 33, 52, 13, 44, 32] ] ]; $categories = [2001, 2002, 2003, 2004, 2005, 2006, 2007]; $this->withData($data); $this->withCategories($categories); } /** * \u8bbe\u7f6e\u56fe\u8868\u6570\u636e * * @param array $data * * @return $this */ public function withData(array $data) { return $this->option('series', $data); } /** * \u8bbe\u7f6e\u56fe\u8868\u7c7b\u522b. * * @param array $data * * @return $this */ public function withCategories(array $data) { return $this->option('xaxis.categories', $data); } /** * \u6e32\u67d3\u56fe\u8868 * * @return string */ public function render() { $this->buildData(); return parent::render(); } } \u4f7f\u7528 <?php use App\\Admin\\Widgets\\Charts\\MyBar; use Dcat\\Admin\\Widgets\\Card; use Dcat\\Admin\\Layout\\Content; class MyController { public function index(Content $content) { return $content->body( Card::make('\u6211\u7684\u56fe\u8868', MyBar::make()) ); } } \u6548\u679c \u56fe\u8868\u4e0e\u540e\u7aefAPI\u4ea4\u4e92 \u5982\u679c\u4f60\u7684\u56fe\u8868\u9700\u8981\u4e0e\u540e\u7aefAPI\u4ea4\u4e92\uff0c\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u65b9\u5f0f {tip} \u4e3a\u4e86\u65b9\u4fbf\u9605\u8bfb\uff0c\u8fd9\u91cc\u7684\u793a\u4f8b\u4ee3\u7801\u76f4\u63a5\u7ee7\u627f\u524d\u9762\u5b9a\u4e49\u7684 MyBar \u7c7b\u3002 <?php namespace App\\Admin\\Widgets\\Charts; use Illuminate\\Http\\Request; class MyAjaxBar extends MyBar { protected $id; protected $username; // \u8fd9\u91cc\u7684\u53c2\u6570\u4e00\u5b9a\u8981\u8bbe\u7f6e\u9ed8\u8ba4\u503c public function __construct($id = null, $username = null) { parent::__construct(); $this->id = $id; $this->username = $username; } /** * \u5904\u7406\u8bf7\u6c42 * \u5982\u679c\u4f60\u7684\u56fe\u8868\u7c7b\u4e2d\u5305\u542b\u6b64\u65b9\u6cd5\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u6b64\u65b9\u6cd5\u5904\u7406\u524d\u7aef\u901a\u8fc7ajax\u63d0\u4ea4\u7684\u83b7\u53d6\u56fe\u8868\u6570\u636e\u7684\u8bf7\u6c42 * * @param Request $request * @return mixed|void */ public function handle(Request $request) { // \u83b7\u53d6 parameters \u65b9\u6cd5\u8bbe\u7f6e\u7684\u81ea\u5b9a\u4e49\u53c2\u6570 $id = $request->get('id'); $username = $request->get('username'); switch ((int) $request->get('option')) { case 30: // \u4f60\u7684\u6570\u636e\u67e5\u8be2\u903b\u8f91 $data = [ [ 'data' => [44, 55, 41, 64, 22, 43, 21] ], [ 'data' => [53, 32, 33, 52, 13, 44, 32] ] ]; $categories = [2001, 2002, 2003, 2004, 2005, 2006, 2007]; break; case 28: // \u4f60\u7684\u6570\u636e\u67e5\u8be2\u903b\u8f91 $data = [ [ 'data' => [44, 55, 41, 64, 22, 43, 21] ], [ 'data' => [53, 32, 33, 52, 13, 44, 32] ] ]; $categories = [2001, 2002, 2003, 2004, 2005, 2006, 2007]; break; case 7: default: // \u4f60\u7684\u6570\u636e\u67e5\u8be2\u903b\u8f91 $data = [ [ 'data' => [44, 55, 41, 64, 22, 43, 21] ], [ 'data' => [53, 32, 33, 52, 13, 44, 32] ] ]; $categories = [2001, 2002, 2003, 2004, 2005, 2006, 2007]; break; } $this->withData($data); $this->withCategories($categories); } /** * \u8fd9\u91cc\u8fd4\u56de\u9700\u8981\u5f02\u6b65\u4f20\u9012\u5230 handler \u65b9\u6cd5\u7684\u53c2\u6570 * * @return array */ public function parameters(): array { return [ 'id' => $this->id, 'username' => $this->username, ]; } /** * \u8fd9\u91cc\u8986\u5199\u7236\u7c7b\u7684\u65b9\u6cd5\uff0c\u4e0d\u518d\u67e5\u8be2\u6570\u636e */ protected function buildData() { } } \u7528\u6237\u70b9\u51fb\u6784\u5efa\u4e0b\u62c9\u83dc\u5355\u52a0\u8f7d\u4e0d\u540c\u7684\u56fe\u8868\u6570\u636e <?php use App\\Admin\\Widgets\\Charts\\MyAjaxBar; use Dcat\\Admin\\Widgets\\Dropdown; use Dcat\\Admin\\Widgets\\Box; use Dcat\\Admin\\Layout\\Row; use Dcat\\Admin\\Layout\\Content; class MyController { public function index(Content $content) { return $content->body(function (Row $row) { // \u6784\u5efa\u4e0b\u62c9\u83dc\u5355\uff0c\u5f53\u70b9\u51fb\u83dc\u5355\u65f6\u53d1\u8d77\u8bf7\u6c42\u83b7\u53d6\u6570\u636e\u91cd\u65b0\u6e32\u67d3\u56fe\u8868 $menu = [ '7' => '\u6700\u8fd17\u5929', '28' => '\u6700\u8fd128\u5929', '30' => '\u6700\u8fd130\u5929', ]; $dropdown = Dropdown::make($menu) ->button(current($menu)) ->click() ->map(function ($v, $k) { // \u6b64\u5904\u8bbe\u7f6e\u7684 data-xxx \u5c5e\u6027\u4f1a\u4f5c\u4e3apost\u6570\u636e\u53d1\u9001\u5230\u540e\u7aefapi return \"<a class='switch-bar' data-option='{$k}'>{$v}</a>\"; }); // \u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 $id = ...; $username = ...; $bar = MyAjaxBar::make($id, $username) ->fetching('$(\"#my-box\").loading()') // \u8bbe\u7f6eloading\u6548\u679c ->fetched('$(\"#my-box\").loading(false)') // \u79fb\u9664loading\u6548\u679c ->click('.switch-bar'); // \u8bbe\u7f6e\u56fe\u8868\u70b9\u51fb\u83dc\u5355\u5219\u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\uff0c\u4e14\u88ab\u70b9\u51fb\u7684\u76ee\u6807\u5143\u7d20\u4e0a\u7684 data-xxx \u5c5e\u6027\u4f1a\u88ab\u4f5c\u4e3apost\u6570\u636e\u53d1\u9001\u5230\u540e\u7aefAPI $box = Box::make('\u6211\u7684\u56fe\u88682', $bar) ->id('my-box') // \u8bbe\u7f6e\u76d2\u5b50\u7684ID ->tool($dropdown); // \u8bbe\u7f6e\u4e0b\u62c9\u83dc\u5355\u6309\u94ae $row->column(12, $box); }); } } \u6548\u679c \u8bbe\u7f6e\u56fe\u8868\u914d\u7f6e\u4e3a\u53ef\u6267\u884cJS\u4ee3\u7801 \u5982\u679c\u4f60\u9700\u8981\u5728\u56fe\u8868\u914d\u7f6e\u52a0\u5165\u53ef\u6267\u884c\u7684JS\u4ee3\u7801\uff0c\u53ef\u53c2\u8003\u4ee5\u4e0b\u65b9\u5f0f use use Dcat\\Admin\\Support\\JavaScript; use Dcat\\Admin\\Admin; use Dcat\\Admin\\Widgets\\ApexCharts\\Chart; class MyBar extends Chart { public function __construct($containerSelector = null, $options = []) { parent::__construct($containerSelector, $options); $this->setUpOptions(); } /** * \u521d\u59cb\u5316\u56fe\u8868\u914d\u7f6e */ protected function setUpOptions() { $number = 20; $this->option( 'plotOptions.radialBar.dataLabels.total.formatter', // \u8fd9\u4e2a\u503c\u6700\u540e\u6bb5\u4ee3\u7801\u4f1a\u4f5c\u4e3aJS\u4ee3\u7801\u6267\u884c JavaScript::make(\"function () { return {$number}; }\") ); ... } ... }","title":"\u56fe\u8868"},{"location":"2.x/widgets-charts/#_1","text":"Dcat Admin \u5f15\u5165\u4e86 apexcharts\u56fe\u8868 \u529f\u80fd\uff0c\u901a\u8fc7 Dcat\\Admin\\Widgets\\ApexCharts\\Chart \u8fd9\u4e2a\u7c7b\u53ef\u4ee5\u5e2e\u52a9\u5f00\u53d1\u8005\u5feb\u901f\u6e32\u67d3\u56fe\u8868\u3002","title":"\u56fe\u8868"},{"location":"2.x/widgets-charts/#_2","text":"\u5982\u679c\u4f60\u9700\u8981\u6784\u5efa\u4e00\u4e2a\u56fe\u8868\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u65b9\u5f0f {tip} \u66f4\u591a\u7c7b\u578b\u7684\u56fe\u8868\uff0c\u8bf7\u53c2\u8003 apexcharts\u5b98\u65b9\u6587\u6863 \u3002 <?php namespace App\\Admin\\Widgets\\Charts; use Dcat\\Admin\\Admin; use Dcat\\Admin\\Widgets\\ApexCharts\\Chart; class MyBar extends Chart { public function __construct($containerSelector = null, $options = []) { parent::__construct($containerSelector, $options); $this->setUpOptions(); } /** * \u521d\u59cb\u5316\u56fe\u8868\u914d\u7f6e */ protected function setUpOptions() { $color = Admin::color(); $colors = [$color->primary(), $color->primaryDarker()]; $this->options([ 'colors' => $colors, 'chart' => [ 'type' => 'bar', 'height' => 430 ], 'plotOptions' => [ 'bar' => [ 'horizontal' => true, 'dataLabels' => [ 'position' => 'top', ], ] ], 'dataLabels' => [ 'enabled' => true, 'offsetX' => -6, 'style' => [ 'fontSize' => '12px', 'colors' => ['#fff'] ] ], 'stroke' => [ 'show' => true, 'width' => 1, 'colors' => ['#fff'] ], 'xaxis' => [ 'categories' => [], ], ]); } /** * \u5904\u7406\u56fe\u8868\u6570\u636e */ protected function buildData() { // \u6267\u884c\u4f60\u7684\u6570\u636e\u67e5\u8be2\u903b\u8f91 $data = [ [ 'data' => [44, 55, 41, 64, 22, 43, 21] ], [ 'data' => [53, 32, 33, 52, 13, 44, 32] ] ]; $categories = [2001, 2002, 2003, 2004, 2005, 2006, 2007]; $this->withData($data); $this->withCategories($categories); } /** * \u8bbe\u7f6e\u56fe\u8868\u6570\u636e * * @param array $data * * @return $this */ public function withData(array $data) { return $this->option('series', $data); } /** * \u8bbe\u7f6e\u56fe\u8868\u7c7b\u522b. * * @param array $data * * @return $this */ public function withCategories(array $data) { return $this->option('xaxis.categories', $data); } /** * \u6e32\u67d3\u56fe\u8868 * * @return string */ public function render() { $this->buildData(); return parent::render(); } } \u4f7f\u7528 <?php use App\\Admin\\Widgets\\Charts\\MyBar; use Dcat\\Admin\\Widgets\\Card; use Dcat\\Admin\\Layout\\Content; class MyController { public function index(Content $content) { return $content->body( Card::make('\u6211\u7684\u56fe\u8868', MyBar::make()) ); } } \u6548\u679c","title":"\u7b80\u5355\u7528\u6cd5"},{"location":"2.x/widgets-charts/#api","text":"\u5982\u679c\u4f60\u7684\u56fe\u8868\u9700\u8981\u4e0e\u540e\u7aefAPI\u4ea4\u4e92\uff0c\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u65b9\u5f0f {tip} \u4e3a\u4e86\u65b9\u4fbf\u9605\u8bfb\uff0c\u8fd9\u91cc\u7684\u793a\u4f8b\u4ee3\u7801\u76f4\u63a5\u7ee7\u627f\u524d\u9762\u5b9a\u4e49\u7684 MyBar \u7c7b\u3002 <?php namespace App\\Admin\\Widgets\\Charts; use Illuminate\\Http\\Request; class MyAjaxBar extends MyBar { protected $id; protected $username; // \u8fd9\u91cc\u7684\u53c2\u6570\u4e00\u5b9a\u8981\u8bbe\u7f6e\u9ed8\u8ba4\u503c public function __construct($id = null, $username = null) { parent::__construct(); $this->id = $id; $this->username = $username; } /** * \u5904\u7406\u8bf7\u6c42 * \u5982\u679c\u4f60\u7684\u56fe\u8868\u7c7b\u4e2d\u5305\u542b\u6b64\u65b9\u6cd5\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u6b64\u65b9\u6cd5\u5904\u7406\u524d\u7aef\u901a\u8fc7ajax\u63d0\u4ea4\u7684\u83b7\u53d6\u56fe\u8868\u6570\u636e\u7684\u8bf7\u6c42 * * @param Request $request * @return mixed|void */ public function handle(Request $request) { // \u83b7\u53d6 parameters \u65b9\u6cd5\u8bbe\u7f6e\u7684\u81ea\u5b9a\u4e49\u53c2\u6570 $id = $request->get('id'); $username = $request->get('username'); switch ((int) $request->get('option')) { case 30: // \u4f60\u7684\u6570\u636e\u67e5\u8be2\u903b\u8f91 $data = [ [ 'data' => [44, 55, 41, 64, 22, 43, 21] ], [ 'data' => [53, 32, 33, 52, 13, 44, 32] ] ]; $categories = [2001, 2002, 2003, 2004, 2005, 2006, 2007]; break; case 28: // \u4f60\u7684\u6570\u636e\u67e5\u8be2\u903b\u8f91 $data = [ [ 'data' => [44, 55, 41, 64, 22, 43, 21] ], [ 'data' => [53, 32, 33, 52, 13, 44, 32] ] ]; $categories = [2001, 2002, 2003, 2004, 2005, 2006, 2007]; break; case 7: default: // \u4f60\u7684\u6570\u636e\u67e5\u8be2\u903b\u8f91 $data = [ [ 'data' => [44, 55, 41, 64, 22, 43, 21] ], [ 'data' => [53, 32, 33, 52, 13, 44, 32] ] ]; $categories = [2001, 2002, 2003, 2004, 2005, 2006, 2007]; break; } $this->withData($data); $this->withCategories($categories); } /** * \u8fd9\u91cc\u8fd4\u56de\u9700\u8981\u5f02\u6b65\u4f20\u9012\u5230 handler \u65b9\u6cd5\u7684\u53c2\u6570 * * @return array */ public function parameters(): array { return [ 'id' => $this->id, 'username' => $this->username, ]; } /** * \u8fd9\u91cc\u8986\u5199\u7236\u7c7b\u7684\u65b9\u6cd5\uff0c\u4e0d\u518d\u67e5\u8be2\u6570\u636e */ protected function buildData() { } } \u7528\u6237\u70b9\u51fb\u6784\u5efa\u4e0b\u62c9\u83dc\u5355\u52a0\u8f7d\u4e0d\u540c\u7684\u56fe\u8868\u6570\u636e <?php use App\\Admin\\Widgets\\Charts\\MyAjaxBar; use Dcat\\Admin\\Widgets\\Dropdown; use Dcat\\Admin\\Widgets\\Box; use Dcat\\Admin\\Layout\\Row; use Dcat\\Admin\\Layout\\Content; class MyController { public function index(Content $content) { return $content->body(function (Row $row) { // \u6784\u5efa\u4e0b\u62c9\u83dc\u5355\uff0c\u5f53\u70b9\u51fb\u83dc\u5355\u65f6\u53d1\u8d77\u8bf7\u6c42\u83b7\u53d6\u6570\u636e\u91cd\u65b0\u6e32\u67d3\u56fe\u8868 $menu = [ '7' => '\u6700\u8fd17\u5929', '28' => '\u6700\u8fd128\u5929', '30' => '\u6700\u8fd130\u5929', ]; $dropdown = Dropdown::make($menu) ->button(current($menu)) ->click() ->map(function ($v, $k) { // \u6b64\u5904\u8bbe\u7f6e\u7684 data-xxx \u5c5e\u6027\u4f1a\u4f5c\u4e3apost\u6570\u636e\u53d1\u9001\u5230\u540e\u7aefapi return \"<a class='switch-bar' data-option='{$k}'>{$v}</a>\"; }); // \u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 $id = ...; $username = ...; $bar = MyAjaxBar::make($id, $username) ->fetching('$(\"#my-box\").loading()') // \u8bbe\u7f6eloading\u6548\u679c ->fetched('$(\"#my-box\").loading(false)') // \u79fb\u9664loading\u6548\u679c ->click('.switch-bar'); // \u8bbe\u7f6e\u56fe\u8868\u70b9\u51fb\u83dc\u5355\u5219\u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\uff0c\u4e14\u88ab\u70b9\u51fb\u7684\u76ee\u6807\u5143\u7d20\u4e0a\u7684 data-xxx \u5c5e\u6027\u4f1a\u88ab\u4f5c\u4e3apost\u6570\u636e\u53d1\u9001\u5230\u540e\u7aefAPI $box = Box::make('\u6211\u7684\u56fe\u88682', $bar) ->id('my-box') // \u8bbe\u7f6e\u76d2\u5b50\u7684ID ->tool($dropdown); // \u8bbe\u7f6e\u4e0b\u62c9\u83dc\u5355\u6309\u94ae $row->column(12, $box); }); } } \u6548\u679c","title":"\u56fe\u8868\u4e0e\u540e\u7aefAPI\u4ea4\u4e92"},{"location":"2.x/widgets-charts/#js","text":"\u5982\u679c\u4f60\u9700\u8981\u5728\u56fe\u8868\u914d\u7f6e\u52a0\u5165\u53ef\u6267\u884c\u7684JS\u4ee3\u7801\uff0c\u53ef\u53c2\u8003\u4ee5\u4e0b\u65b9\u5f0f use use Dcat\\Admin\\Support\\JavaScript; use Dcat\\Admin\\Admin; use Dcat\\Admin\\Widgets\\ApexCharts\\Chart; class MyBar extends Chart { public function __construct($containerSelector = null, $options = []) { parent::__construct($containerSelector, $options); $this->setUpOptions(); } /** * \u521d\u59cb\u5316\u56fe\u8868\u914d\u7f6e */ protected function setUpOptions() { $number = 20; $this->option( 'plotOptions.radialBar.dataLabels.total.formatter', // \u8fd9\u4e2a\u503c\u6700\u540e\u6bb5\u4ee3\u7801\u4f1a\u4f5c\u4e3aJS\u4ee3\u7801\u6267\u884c JavaScript::make(\"function () { return {$number}; }\") ); ... } ... }","title":"\u8bbe\u7f6e\u56fe\u8868\u914d\u7f6e\u4e3a\u53ef\u6267\u884cJS\u4ee3\u7801"},{"location":"2.x/widgets-checkbox/","text":"\u5355/\u590d\u9009\u6846 \u5355\u9009\u6846 \u901a\u8fc7 Dcat\\Admin\\Widgets\\Radio \u7c7b\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5feb\u901f\u6784\u5efa\u5355\u9009\u6846\u8868\u5355\u3002 \u57fa\u672c\u4f7f\u7528 <?php use Dcat\\Admin\\Widgets\\Radio; // \u8868\u5355 name \u5c5e\u6027 $name = 'state'; // \u9009\u9879 $options = [ 1 => '\u672a\u5904\u7406', 2 => '\u5df2\u5904\u7406', 3 => '\u5df2\u62d2\u7edd', ]; $radio = Radio::make($name, $options)->check(1); // \u9009\u4e2d\u7b2c\u4e00\u4e2a\u9009\u9879 \u6548\u679c \u663e\u793a\u5728\u540c\u4e00\u884c (inline) <?php use Dcat\\Admin\\Widgets\\Radio; $name = 'state'; $options = [ 1 => '\u672a\u5904\u7406', 2 => '\u5df2\u5904\u7406', 3 => '\u5df2\u62d2\u7edd', ]; $radio = Radio::make($name, $options)->check(1)->inline(); \u6548\u679c \u8bbe\u7f6e\u7981\u9009\u7684\u9009\u9879 (disable) <?php use Dcat\\Admin\\Widgets\\Radio; $name = 'state'; $options = [ 1 => '\u672a\u5904\u7406', 2 => '\u5df2\u5904\u7406', 3 => '\u5df2\u62d2\u7edd', ]; $radio = Radio::make($name, $options)->inline()->disable([2, 3]); \u6548\u679c \u8bbe\u7f6e\u6837\u5f0f (style) \u901a\u8fc7 style \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u5355\u9009\u6846\u7684\u6837\u5f0f\uff0c\u652f\u6301 primary \u3001 info \u3001 success \u3001 danger \u3002 \u8bbe\u7f6e\u5c3a\u5bf8 \u5355\u9009\u6846\u652f\u63013\u4e2d\u5c3a\u5bf8\uff0c\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b small \u8bbe\u7f6e\u4e3a\u5c0f\u5c3a\u5bf8 $radio->small(); large \u8bbe\u7f6e\u4e3a\u5927\u5c3a\u5bf8 $radio->large(); \u590d\u9009\u6846 \u901a\u8fc7 Dcat\\Admin\\Widgets\\Checkbox \u7c7b\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5feb\u901f\u6784\u5efa\u590d\u9009\u6846\u8868\u5355\uff0c\u5e76\u4e14\u590d\u9009\u6846\u7c7b\u662f\u5c5e\u4e8e Radio \u7684\u5b50\u7c7b\uff0c\u56e0\u6b64\u7528\u6cd5\u4e0e Radio \u7c7b\u57fa\u672c\u4e00\u81f4\u3002 \u57fa\u672c\u7528\u6cd5 <?php use Dcat\\Admin\\Widgets\\Checkbox; // \u8868\u5355 name \u5c5e\u6027\uff0c\u56e0\u4e3a\u6b64\u5904\u662f\u591a\u9009\uff0c\u6240\u4ee5\u9700\u8981\u52a0\u4e0a\u4e2d\u62ec\u53f7 $name = 'hobbies[]'; // \u9009\u9879 $options = [ 1 => '\u5531', 2 => '\u8df3', 3 => 'RAP', 4 => '\u6253\u7bee\u7403', ]; $checkbox = Checkbox::make($name, $options) ->inline() ->check([1, 2]); // \u8fd9\u91cc\u5141\u8bb8\u4f20\u9012\u6570\u7ec4\uff0c\u9ed8\u8ba4\u9009\u4e2d\u591a\u4e2a\u9009\u9879 \u6548\u679c \u5168\u9009 \u901a\u8fc7 checkAll \u65b9\u6cd5\u53ef\u4ee5\u9009\u4e2d\u5168\u90e8\u9009\u9879\u3002 <?php use Dcat\\Admin\\Widgets\\Checkbox; // \u8868\u5355 name \u5c5e\u6027\uff0c\u56e0\u4e3a\u6b64\u5904\u662f\u591a\u9009\uff0c\u6240\u4ee5\u9700\u8981\u52a0\u4e0a\u4e2d\u62ec\u53f7 $name = 'hobbies[]'; // \u9009\u9879 $options = [ 1 => '\u5531', 2 => '\u8df3', 3 => 'RAP', 4 => '\u6253\u7bee\u7403', ]; $checkbox = Checkbox::make($name, $options) ->inline() ->checkAll(); // \u5168\u90e8\u9009\u4e2d checkAll \u65b9\u6cd5\u4e5f\u5141\u8bb8\u5168\u9009\u7684\u540c\u65f6\u6392\u9664\u6307\u5b9a\u9009\u9879\u3002 $checkbox = Checkbox::make($name, $options) ->inline() ->checkAll([1, 3]); // \u5168\u90e8\u9009\u4e2d\uff0c\u4f46\u662f\u6392\u9664key\u4e3a1\u548c3\u7684\u9009\u9879 \u66f4\u591a\u7528\u6cd5 \u66f4\u591a\u7528\u6cd5\u4e0e Radio \u7684\u7528\u6cd5\u4e00\u76f4\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002","title":"\u5355/\u590d\u9009\u6846"},{"location":"2.x/widgets-checkbox/#_1","text":"","title":"\u5355/\u590d\u9009\u6846"},{"location":"2.x/widgets-checkbox/#_2","text":"\u901a\u8fc7 Dcat\\Admin\\Widgets\\Radio \u7c7b\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5feb\u901f\u6784\u5efa\u5355\u9009\u6846\u8868\u5355\u3002","title":"\u5355\u9009\u6846"},{"location":"2.x/widgets-checkbox/#_3","text":"<?php use Dcat\\Admin\\Widgets\\Radio; // \u8868\u5355 name \u5c5e\u6027 $name = 'state'; // \u9009\u9879 $options = [ 1 => '\u672a\u5904\u7406', 2 => '\u5df2\u5904\u7406', 3 => '\u5df2\u62d2\u7edd', ]; $radio = Radio::make($name, $options)->check(1); // \u9009\u4e2d\u7b2c\u4e00\u4e2a\u9009\u9879 \u6548\u679c","title":"\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/widgets-checkbox/#inline","text":"<?php use Dcat\\Admin\\Widgets\\Radio; $name = 'state'; $options = [ 1 => '\u672a\u5904\u7406', 2 => '\u5df2\u5904\u7406', 3 => '\u5df2\u62d2\u7edd', ]; $radio = Radio::make($name, $options)->check(1)->inline(); \u6548\u679c","title":"\u663e\u793a\u5728\u540c\u4e00\u884c (inline)"},{"location":"2.x/widgets-checkbox/#disable","text":"<?php use Dcat\\Admin\\Widgets\\Radio; $name = 'state'; $options = [ 1 => '\u672a\u5904\u7406', 2 => '\u5df2\u5904\u7406', 3 => '\u5df2\u62d2\u7edd', ]; $radio = Radio::make($name, $options)->inline()->disable([2, 3]); \u6548\u679c","title":"\u8bbe\u7f6e\u7981\u9009\u7684\u9009\u9879 (disable)"},{"location":"2.x/widgets-checkbox/#style","text":"\u901a\u8fc7 style \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u5355\u9009\u6846\u7684\u6837\u5f0f\uff0c\u652f\u6301 primary \u3001 info \u3001 success \u3001 danger \u3002","title":"\u8bbe\u7f6e\u6837\u5f0f (style)"},{"location":"2.x/widgets-checkbox/#_4","text":"\u5355\u9009\u6846\u652f\u63013\u4e2d\u5c3a\u5bf8\uff0c\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b small \u8bbe\u7f6e\u4e3a\u5c0f\u5c3a\u5bf8 $radio->small(); large \u8bbe\u7f6e\u4e3a\u5927\u5c3a\u5bf8 $radio->large();","title":"\u8bbe\u7f6e\u5c3a\u5bf8"},{"location":"2.x/widgets-checkbox/#_5","text":"\u901a\u8fc7 Dcat\\Admin\\Widgets\\Checkbox \u7c7b\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5feb\u901f\u6784\u5efa\u590d\u9009\u6846\u8868\u5355\uff0c\u5e76\u4e14\u590d\u9009\u6846\u7c7b\u662f\u5c5e\u4e8e Radio \u7684\u5b50\u7c7b\uff0c\u56e0\u6b64\u7528\u6cd5\u4e0e Radio \u7c7b\u57fa\u672c\u4e00\u81f4\u3002","title":"\u590d\u9009\u6846"},{"location":"2.x/widgets-checkbox/#_6","text":"<?php use Dcat\\Admin\\Widgets\\Checkbox; // \u8868\u5355 name \u5c5e\u6027\uff0c\u56e0\u4e3a\u6b64\u5904\u662f\u591a\u9009\uff0c\u6240\u4ee5\u9700\u8981\u52a0\u4e0a\u4e2d\u62ec\u53f7 $name = 'hobbies[]'; // \u9009\u9879 $options = [ 1 => '\u5531', 2 => '\u8df3', 3 => 'RAP', 4 => '\u6253\u7bee\u7403', ]; $checkbox = Checkbox::make($name, $options) ->inline() ->check([1, 2]); // \u8fd9\u91cc\u5141\u8bb8\u4f20\u9012\u6570\u7ec4\uff0c\u9ed8\u8ba4\u9009\u4e2d\u591a\u4e2a\u9009\u9879 \u6548\u679c","title":"\u57fa\u672c\u7528\u6cd5"},{"location":"2.x/widgets-checkbox/#_7","text":"\u901a\u8fc7 checkAll \u65b9\u6cd5\u53ef\u4ee5\u9009\u4e2d\u5168\u90e8\u9009\u9879\u3002 <?php use Dcat\\Admin\\Widgets\\Checkbox; // \u8868\u5355 name \u5c5e\u6027\uff0c\u56e0\u4e3a\u6b64\u5904\u662f\u591a\u9009\uff0c\u6240\u4ee5\u9700\u8981\u52a0\u4e0a\u4e2d\u62ec\u53f7 $name = 'hobbies[]'; // \u9009\u9879 $options = [ 1 => '\u5531', 2 => '\u8df3', 3 => 'RAP', 4 => '\u6253\u7bee\u7403', ]; $checkbox = Checkbox::make($name, $options) ->inline() ->checkAll(); // \u5168\u90e8\u9009\u4e2d checkAll \u65b9\u6cd5\u4e5f\u5141\u8bb8\u5168\u9009\u7684\u540c\u65f6\u6392\u9664\u6307\u5b9a\u9009\u9879\u3002 $checkbox = Checkbox::make($name, $options) ->inline() ->checkAll([1, 3]); // \u5168\u90e8\u9009\u4e2d\uff0c\u4f46\u662f\u6392\u9664key\u4e3a1\u548c3\u7684\u9009\u9879","title":"\u5168\u9009"},{"location":"2.x/widgets-checkbox/#_8","text":"\u66f4\u591a\u7528\u6cd5\u4e0e Radio \u7684\u7528\u6cd5\u4e00\u76f4\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002","title":"\u66f4\u591a\u7528\u6cd5"},{"location":"2.x/widgets-data-card/","text":"\u6570\u636e\u7edf\u8ba1\u5361\u7247 Dcat Admin \u4e2d\u5185\u7f6e\u4e86\u591a\u79cd\u5e38\u7528\u6570\u636e\u7edf\u8ba1\u5361\u7247\uff0c\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u7684\u4e0e\u540e\u7aefAPI\u4ea4\u4e92\uff0c\u4e0b\u9762\u9010\u4e00\u4ecb\u7ecd\u7528\u6cd5\u3002 \u57fa\u7840\u5361\u7247 \u57fa\u7840\u5361\u7247( Dcat\\Admin\\Widgets\\Metrics\\Card )\u662f\u4e00\u79cd\u9ed8\u8ba4\u4e0d\u663e\u793a\u56fe\u8868\u7684\u5361\u7247\uff0c\u4e5f\u662f\u6570\u636e\u5361\u7247\u4e2d\u6700\u7b80\u5355\u7684\u4e00\u79cd\u3002 \u7b80\u5355\u793a\u4f8b \u57fa\u7840\u5361\u7247\u7684\u4f7f\u7528\u53ef\u53c2\u8003\u5185\u7f6e\u7684 App\\Admin\\Metrics\\Examples\\TotalUsers \u7c7b\u3002 <?php namespace App\\Admin\\Metrics\\Examples; use Dcat\\Admin\\Widgets\\Metrics\\Card; use Illuminate\\Contracts\\Support\\Renderable; use Illuminate\\Http\\Request; class TotalUsers extends Card { /** * \u5361\u7247\u5e95\u90e8\u5185\u5bb9. * * @var string|Renderable|\\Closure */ protected $footer; // \u4fdd\u5b58\u81ea\u5b9a\u4e49\u53c2\u6570 protected $data = []; // \u6784\u9020\u65b9\u6cd5\u53c2\u6570\u5fc5\u987b\u8bbe\u7f6e\u9ed8\u8ba4\u503c public function __construct(array $data = []) { $this->data = []; parent::__construct(); } protected function init() { parent::init(); // \u8bbe\u7f6e\u6807\u9898 $this->title('Total Users'); // \u8bbe\u7f6e\u4e0b\u62c9\u83dc\u5355 $this->dropdown([ '7' => 'Last 7 Days', '28' => 'Last 28 Days', '30' => 'Last Month', '365' => 'Last Year', ]); } /** * \u5904\u7406\u8bf7\u6c42. * * @param Request $request * * @return void */ public function handle(Request $request) { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u7684\u81ea\u5b9a\u4e49\u53c2\u6570 $key1 = $request->get('key1'); switch ($request->get('option')) { case '365': $this->content(mt_rand(600, 1500)); $this->down(mt_rand(1, 30)); break; case '30': $this->content(mt_rand(170, 250)); $this->up(mt_rand(12, 50)); break; case '28': $this->content(mt_rand(155, 200)); $this->up(mt_rand(5, 50)); break; case '7': default: $this->content(143); $this->up(15); } } // \u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570\u5230 handle \u65b9\u6cd5 public function parameters() : array { return $this->data; } /** * @param int $percent * * @return $this */ public function up($percent) { return $this->footer( \"<i class=\\\"feather icon-trending-up text-success\\\"></i> {$percent}% Increase\" ); } /** * @param int $percent * * @return $this */ public function down($percent) { return $this->footer( \"<i class=\\\"feather icon-trending-down text-danger\\\"></i> {$percent}% Decrease\" ); } /** * \u8bbe\u7f6e\u5361\u7247\u5e95\u90e8\u5185\u5bb9 * * @param string|Renderable|\\Closure $footer * * @return $this */ public function footer($footer) { $this->footer = $footer; return $this; } /** * \u6e32\u67d3\u5361\u7247\u5185\u5bb9. * * @return string */ public function renderContent() { $content = parent::renderContent(); return <<<HTML <div class=\"d-flex justify-content-between align-items-center mt-1\" style=\"margin-bottom: 2px\"> <h2 class=\"ml-1 font-large-1\">{$content}</h2> </div> <div class=\"ml-1 mt-1 font-weight-bold text-80\"> {$this->renderFooter()} </div> HTML; } /** * @return string */ public function renderFooter() { return $this->toString($this->footer); } } \u57fa\u7840\u5361\u7247\u65b9\u6cd5 \u521d\u59cb\u5316 (init) init \u65b9\u6cd5\u4f1a\u5728\u5361\u7247\u6784\u9020\u65b9\u6cd5\u4e2d\u88ab\u8c03\u7528\uff0c\u53ef\u7528\u4e8e\u5361\u7247\u521d\u59cb\u5316\u64cd\u4f5c\u3002 class MyCard extend Card { protected function init() { parent::init(); // \u4f60\u7684\u521d\u59cb\u5316\u64cd\u4f5c } } \u8bbe\u7f6e\u6807\u9898 (title) \u901a\u8fc7 title \u65b9\u6cd5\u53ef\u4ee5\u5728\u5361\u7247\u7684\u5de6\u4e0a\u89d2\u8bbe\u7f6e\u4e00\u4e2a\u6807\u9898 class MyCard extend Card { protected function init() { parent::init(); $this->title('\u6d3b\u8dc3\u7528\u6237'); } } \u8bbe\u7f6e\u4e0b\u62c9\u83dc\u5355 (dropdown) \u901a\u8fc7 dropdown \u65b9\u6cd5\u53ef\u4ee5\u5728\u5361\u7247\u53f3\u4e0a\u89d2\u8bbe\u7f6e\u4e00\u4e2a\u4e0b\u62c9\u83dc\u5355\u6309\u94ae\uff0c\u6b64\u529f\u80fd\u9700\u8981\u7ed3\u5408 handle \u65b9\u6cd5\u4e00\u8d77\u4f7f\u7528\u624d\u6709\u6548\u679c\u3002 class MyCard extend Card { protected function init() { $this->dropdown([ '7' => 'Last 7 Days', '28' => 'Last 28 Days', '30' => 'Last Month', '365' => 'Last Year', ]); } } \u8bbe\u7f6e\u526f\u6807\u9898 (subTitle) \u901a\u8fc7 subTitle \u65b9\u6cd5\u53ef\u4ee5\u5728\u5361\u7247\u7684\u53c8\u4e0a\u89d2\u8bbe\u7f6e\u4e00\u4e2a\u526f\u6807\u9898\u3002 {tip} \u6b64\u65b9\u6cd5\u4e0e dropdown \u65b9\u6cd5\u4f1a\u6709\u51b2\u7a81\uff0c\u5982\u679c\u8bbe\u7f6e\u8fc7\u4e0b\u62c9\u83dc\u5355\u6309\u94ae\uff0c\u5c31\u4e0d\u9700\u8981\u8bbe\u7f6e\u526f\u6807\u9898\u3002 class MyCard extend Card { protected function init() { parent::init(); $this->subTitle('\u6700\u8fd130\u5929'); } } \u8bbe\u7f6e\u5934\u90e8\u5185\u5bb9 (header) \u901a\u8fc7 header \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u5361\u7247\u5934\u90e8\u5185\u5bb9\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff0c\u53ef\u4ee5\u662f string \u3001 Closure \uff0c\u4e5f\u53ef\u4ee5\u662f\u6a21\u677f\u89c6\u56fe( Illuminate\\Contracts\\Support\\Renderable )\u3002 {tip} \u901a\u8fc7\u6b64\u65b9\u6cd5\u8bbe\u7f6e\u7684\u5185\u5bb9\u4e0e title \u5728\u540c\u4e00\u4e2a div \u5bb9\u5668\u5185\u3002 class MyCard extend Card { protected function init() { parent::init(); $this->header( <<<HTML <div>\u5934\u90e8\u5185\u5bb9</div> HTML ); // \u4e5f\u53ef\u4ee5\u4f20\u95ed\u5305 $this->header(function () { return ...; }); // \u4e5f\u53ef\u4ee5\u4f20\u89c6\u56fe $this->header(view('...')); } } \u8bbe\u7f6e\u4e3b\u4f53\u5185\u5bb9 (content) \u901a\u8fc7 content \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u5361\u7247\u7684\u5185\u5bb9\u4e3b\u4f53\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff0c\u53ef\u4ee5\u662f string \u3001 Closure \uff0c\u4e5f\u53ef\u4ee5\u662f\u6a21\u677f\u89c6\u56fe( Illuminate\\Contracts\\Support\\Renderable )\u3002 class MyCard extend Card { protected function init() { parent::init(); $this->withContent('\u81ea\u5b9a\u4e49\u5185\u5bb9'); } /** * \u5361\u7247\u5185\u5bb9 * * @param string $content * * @return $this */ public function withContent($content) { return $this->content( <<<HTML <div class=\"d-flex flex-column flex-wrap text-center\"> <h1 class=\"font-large-2 mt-2 mb-0\">{$content}</h1> <small>Tickets</small> </div> HTML ); } } \u8bbe\u7f6e\u9ad8\u5ea6 (height) \u901a\u8fc7 height \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u5361\u7247\u7684\u6700\u5c0f\u9ad8\u5ea6\uff0c\u9ed8\u8ba4 165 \u3002 protected function init() { parent::init(); $this->height(200); } \u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 (parameters) \u901a\u8fc7 parameters \u65b9\u6cd5\u53ef\u4ee5\u628a\u53c2\u6570\u4f20\u9012\u5230 handle \u65b9\u6cd5 // \u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570\u5230 handle \u65b9\u6cd5 public function parameters() : array { return [ 'key1' => 'value1', ... ]; } \u83b7\u53d6\u81ea\u5b9a\u4e49\u53c2\u6570 public function handle(Request $request) { // \u83b7\u53d6\u81ea\u5b9a\u4e49\u53c2\u6570 $key1 = $request->get('key1'); } \u6e32\u67d3\u5185\u5bb9 (renderContent) \u4e3a\u4e86\u4fdd\u8bc1\u5185\u5bb9\u7684\u7075\u6d3b\u548c\u53ef\u6269\u5c55\u6027\uff0c\u7cfb\u7edf\u6ca1\u6709\u5bf9\u5361\u7247\u5185\u5bb9\u9884\u8bbe\u4efb\u4f55\u6837\u5f0f(\u5373\u8bbe\u7f6e\u4ec0\u4e48\u5185\u5bb9\u5c31\u53ea\u663e\u793a\u4ec0\u4e48\u5185\u5bb9\uff0c\u6ca1\u6709\u9884\u8bbe\u5e03\u5c40\u6216\u5176\u4ed6\u6837\u5f0f)\uff0c \u901a\u8fc7 renderContent \u65b9\u6cd5\u5373\u53ef\u4ee5\u66f4\u6539\u5361\u7247\u9ed8\u8ba4\u7684\u6e32\u67d3\u65b9\u5f0f\u3002 \u4ee5\u4e0b\u7684\u4f8b\u5b50\u6f14\u793a\u4e86 renderContent \u65b9\u6cd5\u7684\u4e3b\u8981\u529f\u80fd use Dcat\\Admin\\Support\\Helper; class MyCard extend Card { protected $footer; protected function init() { parent::init(); // \u8bbe\u7f6e\u5361\u7247\u5185\u5bb9 $this->content(...); // \u8bbe\u7f6e\u5361\u7247\u5e95\u90e8\u5185\u5bb9 $this->footer(...); } /** * \u589e\u52a0\u6b64\u65b9\u6cd5\u8bbe\u7f6e\u5361\u7247\u5e95\u90e8\u5185\u5bb9 * * @return $this */ public function footer($footer) { $this->footer = $footer; return $this; } /** * \u6e32\u67d3\u5e95\u90e8\u5185\u5bb9 * * @return $this */ public function renderFooter() { return Helper::render($this->footer); } /** * \u6e32\u67d3\u5361\u7247\u5185\u5bb9 * \u5728\u8fd9\u91cc\u5373\u53ef\u52a0\u4e0a\u5361\u7247\u5e95\u90e8\u5185\u5bb9 * * @return string */ public function renderContent() { $content = parent::renderContent(); $footer = $this->renderFooter(); return <<<HTML <div class=\"card-content\"> <div class=\"row\"> {$content} </div> <div class=\"metric-footer\"> {$footer} </div> </div> HTML; } } \u542f\u7528\u4ee5\u53ca\u6e32\u67d3\u56fe\u8868 \u57fa\u672c\u5361\u7247\u9ed8\u8ba4\u662f\u542f\u7528\u56fe\u8868\u529f\u80fd\u7684\uff0c\u901a\u8fc7 useChart \u65b9\u6cd5\u53ef\u4ee5\u542f\u7528\u56fe\u8868\u529f\u80fd\uff0c\u8c03\u7528\u6b64\u65b9\u6cd5\u4e4b\u540e\u4f1a\u5b9e\u4f8b\u5316\u4e00\u4e2a\u56fe\u8868\u7c7b\uff0c\u7136\u540e\u4fdd\u5b58\u5728 chart \u5c5e\u6027\u5f53\u4e2d\u3002 \u5f53\u56fe\u8868\u542f\u7528\u4e4b\u540e\uff0c\u8fd8\u9700\u8981\u5728\u4f60\u7684\u5361\u7247\u5185\u5bb9\u4e2d\u6e32\u67d3\u56fe\u8868\uff0c\u5426\u5219\u56fe\u8868\u867d\u7136\u88ab\u521d\u59cb\u5316\u4e86\uff0c\u4f46\u662f\u4ecd\u65e0\u6cd5\u663e\u793a\u3002 class MyCard extend Card { protected function init() { parent::init(); // \u542f\u7528\u56fe\u8868 $this->useChart(); } /** * \u6e32\u67d3\u5361\u7247\u5185\u5bb9 * \u9700\u8981\u5728\u8fd9\u91cc\u52a0\u4e0a\u6e32\u67d3\u56fe\u8868\u7684\u4ee3\u7801 * * @return string */ public function renderContent() { // \u901a\u8fc7 content \u65b9\u6cd5\u8bbe\u7f6e\u7684\u5185\u5bb9 $content = parent::renderContent(); // \u6e32\u67d3\u56fe\u8868 $chart = $this->renderChart(); return <<<HTML <div class=\"my-chart\">{$chart}</div> {$content} HTML } } \u56fe\u8868\u9ed8\u8ba4\u914d\u7f6e (defaultChartOptions) \u901a\u8fc7 defaultChartOptions \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u56fe\u8868\u9ed8\u8ba4\u914d\u7f6e\uff0c\u6b64\u65b9\u6cd5\u53ea\u6709\u542f\u7528\u56fe\u8868\u4e4b\u540e\u624d\u6709\u6548\u3002 {tip} \u8fd9\u91cc\u7684\u56fe\u8868\u914d\u7f6e\u540c\u6837\u652f\u6301\u8bbe\u7f6e\u53ef\u6267\u884c JS \u4ee3\u7801\uff0c\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003 \u56fe\u8868\u914d\u7f6e\u8bbe\u7f6e\u53ef\u6267\u884cJS\u4ee3\u7801 \u3002 class MyCard extend Card { protected function defaultChartOptions() { // \u8fd4\u56de\u56fe\u8868\u7684\u914d\u7f6e return [ ... ]; } } \u8bbe\u7f6e\u56fe\u8868 (chart) \u901a\u8fc7 chart \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u56fe\u8868\u914d\u7f6e\u3002 {tip} \u8fd9\u91cc\u7684\u56fe\u8868\u914d\u7f6e\u540c\u6837\u652f\u6301\u8bbe\u7f6e\u53ef\u6267\u884c JS \u4ee3\u7801\uff0c\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003 \u56fe\u8868\u914d\u7f6e\u8bbe\u7f6e\u53ef\u6267\u884cJS\u4ee3\u7801 \u3002 class MyCard extend Card { protected function init() { parent::init(); $this->chart([...]); } } \u8bbe\u7f6e\u56fe\u8868\u914d\u7f6e (chartOption) \u901a\u8fc7 chartOption \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u56fe\u8868\u914d\u7f6e\uff0c\u6b64\u65b9\u6cd5\u4e00\u6b21\u53ea\u80fd\u8bbe\u7f6e\u4e00\u4e2a\u53c2\u6570\uff0c\u652f\u6301\u8bbe\u7f6e\u591a\u7ef4\u53c2\u6570\u3002 {tip} \u8fd9\u91cc\u7684\u56fe\u8868\u914d\u7f6e\u540c\u6837\u652f\u6301\u8bbe\u7f6e\u53ef\u6267\u884c JS \u4ee3\u7801\uff0c\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003 \u56fe\u8868\u914d\u7f6e\u8bbe\u7f6e\u53ef\u6267\u884cJS\u4ee3\u7801 \u3002 class MyCard extend Card { protected function init() { parent::init(); $this->chartOption('stroke.curve', 'smooth'); $this->chartOption( 'plotOptions.radialBar.dataLabels.total.formatter', // \u8fd9\u4e2a\u503c\u6700\u540e\u6bb5\u4ee3\u7801\u4f1a\u4f5c\u4e3aJS\u4ee3\u7801\u6267\u884c JavaScript::make(\"function () { return {$number}; }\") ); } } \u8bbe\u7f6e\u56fe\u8868\u9ad8\u5ea6 (chartHeight) \u901a\u8fc7 chartHeight \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u56fe\u8868\u7684\u9ad8\u5ea6\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u975e\u5e38\u91cd\u8981\uff0c\u7ecf\u5e38\u9700\u8981\u7ed3\u5408 height \u65b9\u6cd5\u4e00\u8d77\u4f7f\u7528\uff0c\u8c03\u6574\u5361\u7247\u7684\u6574\u4f53\u9ad8\u5ea6\u3002 class MyCard extend Card { protected function init() { parent::init(); $this->chartHeight(150); } } \u8bbe\u7f6e\u56fe\u8868\u4e0a\u95f4\u8ddd (chartMarginTop) \u901a\u8fc7 chartMarginTop \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u56fe\u8868\u4e0e\u4e0a\u7ea7\u5143\u7d20\u7684\u95f4\u8ddd\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a int \u7c7b\u578b\u53c2\u6570\uff0c\u53ef\u4ee5\u4f20 \u8d1f\u6570 \u3002 class MyCard extend Card { protected function init() { parent::init(); $this->chartMarginTop(-10); } } \u8bbe\u7f6e\u56fe\u8868\u4e0b\u95f4\u8ddd (chartMarginBottom) \u901a\u8fc7 chartMarginBottom \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u56fe\u8868\u4e0e\u4e0b\u7ea7\u5143\u7d20\u7684\u95f4\u8ddd\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a int \u7c7b\u578b\u53c2\u6570\uff0c\u53ef\u4ee5\u4f20 \u8d1f\u6570 \u3002 class MyCard extend Card { protected function init() { parent::init(); $this->chartMarginBottom(10); } } \u8bbe\u7f6e\u56fe\u8868\u6807\u7b7e (chartLabels) \u901a\u8fc7 chartLabels \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u56fe\u8868\u7684\u6807\u7b7e( labels )\u914d\u7f6e\u3002 class MyCard extend Card { protected function init() { parent::init(); $this->chartLabels('\u6807\u7b7e1'); // \u4e5f\u53ef\u4ee5\u4f20\u9012\u6570\u7ec4 $this->chartLabels(['\u6807\u7b7e1']); } } \u8bbe\u7f6e\u56fe\u8868\u989c\u8272 (chartColors) \u901a\u8fc7 chartColors \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u56fe\u8868\u7684\u989c\u8272( colors )\u914d\u7f6e\u3002 class MyCard extend Card { protected function init() { parent::init(); $this->chartColors('#4f41a1'); // \u4e5f\u53ef\u4ee5\u4f20\u9012\u6570\u7ec4 $this->chartColors(['#4f41a1']); } } \u6e32\u67d3\u56fe\u8868 (renderChart) \u901a\u8fc7 renderChart \u65b9\u6cd5\u53ef\u4ee5\u6e32\u67d3\u56fe\u8868\u3002 class MyCard extend Card { protected function init() { parent::init(); // \u542f\u7528\u56fe\u8868 $this->useChart(); } /** * \u6e32\u67d3\u5361\u7247\u5185\u5bb9 * \u9700\u8981\u5728\u8fd9\u91cc\u52a0\u4e0a\u6e32\u67d3\u56fe\u8868\u7684\u4ee3\u7801 * * @return string */ public function renderContent() { // \u901a\u8fc7 content \u65b9\u6cd5\u8bbe\u7f6e\u7684\u5185\u5bb9 $content = parent::renderContent(); // \u6e32\u67d3\u56fe\u8868 $chart = $this->renderChart(); return <<<HTML <div class=\"my-chart\">{$chart}</div> {$content} HTML } } \u7ebf\u6027\u8d8b\u52bf\u56fe\u5361\u7247 (Line) \u7ebf\u6027\u8d8b\u52bf\u56fe\u5361\u7247( Dcat\\Admin\\Widgets\\Metrics\\Line )\u662f\u4e00\u4e2a\u9644\u5e26\u4e86\u6298\u7ebf\\\u66f2\u7ebf\u56fe\u7684\u6570\u636e\u7edf\u8ba1\u5361\u7247\uff0c\u7ee7\u627f\u81ea\u57fa\u7840\u5361\u7247 Dcat\\Admin\\Widgets\\Metrics\\Card \u3002 \u793a\u4f8b \u53ef\u53c2\u8003\u5185\u7f6e\u7684 App\\Admin\\Metrics\\Examples\\NewUsers \u7c7b\u3002 <?php namespace App\\Admin\\Metrics\\Examples; use Dcat\\Admin\\Widgets\\Metrics\\Line; use Illuminate\\Http\\Request; class NewUsers extends Line { /** * @var string */ protected $label = 'New Users'; /** * \u521d\u59cb\u5316\u5361\u7247\u5185\u5bb9 * * @return void */ protected function init() { parent::init(); $this->title($this->label); $this->dropdown([ '7' => 'Last 7 Days', '28' => 'Last 28 Days', '30' => 'Last Month', '365' => 'Last Year', ]); } /** * \u5904\u7406\u8bf7\u6c42 * * @param Request $request * * @return mixed|void */ public function handle(Request $request) { $generator = function ($len, $min = 10, $max = 300) { for ($i = 0; $i <= $len; $i++) { yield mt_rand($min, $max); } }; switch ($request->get('option')) { case '365': // \u5361\u7247\u5185\u5bb9 $this->withContent(mt_rand(1000, 5000).'k'); // \u56fe\u8868\u6570\u636e $this->withChart(collect($generator(30))->toArray()); // \u76f4\u7ebf break; case '30': // \u5361\u7247\u5185\u5bb9 $this->withContent(mt_rand(400, 1000).'k'); // \u56fe\u8868\u6570\u636e $this->withChart(collect($generator(30))->toArray()); // \u76f4\u7ebf break; case '28': // \u5361\u7247\u5185\u5bb9 $this->withContent(mt_rand(400, 1000).'k'); // \u56fe\u8868\u6570\u636e $this->withChart(collect($generator(28))->toArray()); // \u76f4\u7ebf break; case '7': default: // \u5361\u7247\u5185\u5bb9 $this->withContent('89.2k'); // \u56fe\u8868\u6570\u636e $this->withChart([28, 40, 36, 52, 38, 60, 55,]); } } /** * \u8bbe\u7f6e\u56fe\u8868\u6570\u636e. * * @param array $data * * @return $this */ public function withChart(array $data) { return $this->chart([ 'series' => [ [ 'name' => $this->label, 'data' => $data, ], ], ]); } /** * \u8bbe\u7f6e\u5361\u7247\u5185\u5bb9. * * @param string $content * * @return $this */ public function withContent($content) { return $this->content( <<<HTML <div class=\"d-flex justify-content-between align-items-center mt-1\" style=\"margin-bottom: 2px\"> <h2 class=\"ml-1 font-large-1\">{$content}</h2> <span class=\"mb-0 mr-1 text-80\">{$this->label}</span> </div> HTML ); } } \u65b9\u6cd5 \u8bbe\u7f6e\u7ebf\u6761\u4e3a\u76f4\u7ebf (chartStraight) use Dcat\\Admin\\Widgets\\Metrics\\Line; class MyCard extend Line { protected function init() { parent::init(); $this->chartStraight(); } } \u8bbe\u7f6e\u7ebf\u6761\u4e3a\u66f2\u7ebf (chartSmooth) \u9ed8\u8ba4\u663e\u793a\u7684\u662f\u66f2\u7ebf\u3002 use Dcat\\Admin\\Widgets\\Metrics\\Line; class MyCard extend Line { protected function init() { parent::init(); $this->chartSmooth(); } } \u5706\u73af\u56fe\u5361\u7247 (Donut) \u5706\u73af\u56fe\u5361\u7247( Dcat\\Admin\\Widgets\\Metrics\\Donut )\u662f\u4e00\u4e2a\u9644\u5e26\u4e86\u5706\u73af\u56fe\u7684\u6570\u636e\u7edf\u8ba1\u5361\u7247\uff0c\u7ee7\u627f\u81ea\u57fa\u7840\u5361\u7247 Dcat\\Admin\\Widgets\\Metrics\\Card \u3002 \u793a\u4f8b \u53ef\u53c2\u8003\u5185\u7f6e\u7684 App\\Admin\\Metrics\\Examples\\NewDevices \u7c7b\u3002 <?php namespace App\\Admin\\Metrics\\Examples; use Dcat\\Admin\\Admin; use Dcat\\Admin\\Widgets\\Metrics\\Donut; class NewDevices extends Donut { protected $labels = ['Desktop', 'Mobile']; /** * \u521d\u59cb\u5316\u5361\u7247\u5185\u5bb9 */ protected function init() { parent::init(); $color = Admin::color(); $colors = [$color->primary(), $color->alpha('blue2', 0.5)]; $this->title('New Devices'); $this->subTitle('Last 30 days'); $this->chartLabels($this->labels); // \u8bbe\u7f6e\u56fe\u8868\u989c\u8272 $this->chartColors($colors); } /** * \u6e32\u67d3\u6a21\u677f * * @return string */ public function render() { $this->fill(); return parent::render(); } /** * \u5199\u5165\u6570\u636e. * * @return void */ public function fill() { $this->withContent(44.9, 28.6); // \u56fe\u8868\u6570\u636e $this->withChart([44.9, 28.6]); } /** * \u8bbe\u7f6e\u56fe\u8868\u6570\u636e. * * @param array $data * * @return $this */ public function withChart(array $data) { return $this->chart([ 'series' => $data ]); } /** * \u8bbe\u7f6e\u5361\u7247\u5934\u90e8\u5185\u5bb9. * * @param mixed $desktop * @param mixed $mobile * * @return $this */ protected function withContent($desktop, $mobile) { $blue = Admin::color()->alpha('blue2', 0.5); $style = 'margin-bottom: 8px'; $labelWidth = 120; return $this->content( <<<HTML <div class=\"d-flex pl-1 pr-1 pt-1\" style=\"{$style}\"> <div style=\"width: {$labelWidth}px\"> <i class=\"fa fa-circle text-primary\"></i> {$this->labels[0]} </div> <div>{$desktop}</div> </div> <div class=\"d-flex pl-1 pr-1\" style=\"{$style}\"> <div style=\"width: {$labelWidth}px\"> <i class=\"fa fa-circle\" style=\"color: $blue\"></i> {$this->labels[1]} </div> <div>{$mobile}</div> </div> HTML ); } } \u65b9\u6cd5 \u8bbe\u7f6e\u5185\u5bb9\u5bbd\u5ea6 (contentWidth) \u901a\u8fc7 contentWidth \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u6587\u672c\u5185\u5bb9\u4ee5\u53ca\u56fe\u8868\u5185\u5bb9\u7684\u5bbd\u5ea6\uff0c\u9ed8\u8ba4\u4e3a [6, 6] \u3002 {tip} \u8fd9\u91cc\u7684\u5bbd\u5ea6\u662f\u4e00\u4e2a 1-12 \u4e4b\u95f4\u7684\u4e00\u4e2a\u503c\u3002 use Dcat\\Admin\\Widgets\\Metrics\\Line; class MyCard extend Line { protected function init() { parent::init(); $this->contentWidth(4, 8); } } \u67f1\u72b6\u56fe\u5361\u7247 (Bar) \u67f1\u72b6\u56fe\u5361\u7247( Dcat\\Admin\\Widgets\\Metrics\\Bar )\u662f\u4e00\u4e2a\u9644\u5e26\u4e86\u67f1\u72b6\u56fe\u7684\u6570\u636e\u7edf\u8ba1\u5361\u7247\uff0c\u7ee7\u627f\u81ea\u57fa\u7840\u5361\u7247 Dcat\\Admin\\Widgets\\Metrics\\Card \u3002 \u793a\u4f8b \u53ef\u53c2\u8003\u5185\u7f6e\u7684 App\\Admin\\Metrics\\Examples\\NewDevices \u7c7b\u3002 <?php namespace App\\Admin\\Metrics\\Examples; use Dcat\\Admin\\Admin; use Dcat\\Admin\\Widgets\\Metrics\\Bar; use Illuminate\\Http\\Request; class Sessions extends Bar { /** * \u521d\u59cb\u5316\u5361\u7247\u5185\u5bb9 */ public function init() { parent::init(); $color = Admin::color(); $dark35 = $color->dark35(); // \u5361\u7247\u5185\u5bb9\u5bbd\u5ea6 $this->contentWidth(5, 7); // \u6807\u9898 $this->title('Avg Sessions'); // \u8bbe\u7f6e\u4e0b\u62c9\u9009\u9879 $this->dropdown([ '7' => 'Last 7 Days', '28' => 'Last 28 Days', '30' => 'Last Month', '365' => 'Last Year', ]); // \u8bbe\u7f6e\u56fe\u8868\u989c\u8272 $this->chartColors([ $dark35, $dark35, $color->primary(), $dark35, $dark35, $dark35 ]); } /** * \u5904\u7406\u8bf7\u6c42 * * @param Request $request * * @return mixed|void */ public function handle(Request $request) { switch ($request->get('option')) { case '7': default: // \u5361\u7247\u5185\u5bb9 $this->withContent('2.7k', '+5.2%'); // \u56fe\u8868\u6570\u636e $this->withChart([ [ 'name' => 'Sessions', 'data' => [75, 125, 225, 175, 125, 75, 25], ], ]); } } /** * \u8bbe\u7f6e\u56fe\u8868\u6570\u636e. * * @param array $data * * @return $this */ public function withChart(array $data) { return $this->chart([ 'series' => $data, ]); } /** * \u8bbe\u7f6e\u5361\u7247\u5185\u5bb9. * * @param string $title * @param string $value * @param string $style * * @return $this */ public function withContent($title, $value, $style = 'success') { // \u6839\u636e\u9009\u9879\u663e\u793a $label = strtolower( $this->dropdown[request()->option] ?? 'last 7 days' ); $minHeight = '183px'; return $this->content( <<<HTML <div class=\"d-flex p-1 flex-column justify-content-between\" style=\"padding-top: 0;width: 100%;height: 100%;min-height: {$minHeight}\"> <div class=\"text-left\"> <h1 class=\"font-large-2 mt-2 mb-0\">{$title}</h1> <h5 class=\"font-medium-2\" style=\"margin-top: 10px;\"> <span class=\"text-{$style}\">{$value} </span> <span>vs {$label}</span> </h5> </div> <a href=\"#\" class=\"btn btn-primary shadow waves-effect waves-light\">View Details <i class=\"feather icon-chevrons-right\"></i></a> </div> HTML ); } } \u591a\u73af\u5f62\u56fe\u5361\u7247 (Round) \u67f1\u72b6\u56fe\u5361\u7247( Dcat\\Admin\\Widgets\\Metrics\\Round )\u662f\u4e00\u4e2a\u9644\u5e26\u4e86\u591a\u73af\u5f62\u56fe\u7684\u6570\u636e\u7edf\u8ba1\u5361\u7247\uff0c\u7ee7\u627f\u81ea\u57fa\u7840\u5361\u7247 Dcat\\Admin\\Widgets\\Metrics\\Card \u3002 \u793a\u4f8b \u5177\u4f53\u793a\u4f8b\u4e0e\u4e0a\u8ff0\u5361\u7247\u7684\u793a\u4f8b\u5927\u540c\u5c0f\u5f02\uff0c\u5177\u4f53\u53ef\u53c2\u8003\u5185\u7f6e\u7684 App\\Admin\\Metrics\\Examples\\ProductOrders \u7c7b\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d34\u51fa\u3002 \u66f4\u591a\u5185\u7f6e\u5361\u7247 \u7cfb\u7edf\u8fd8\u5185\u7f6e\u4e86 Dcat\\Admin\\Widgets\\Metrics\\RadialBar \u3001 Dcat\\Admin\\Widgets\\Metrics\\SingleRound \u7b49\u5361\u7247\uff0c\u7531\u4e8e\u7528\u6cd5\u4e0e\u4e0a\u8ff0\u5361\u7247\u96f7\u540c\uff0c\u8fd9\u91cc\u4e0d\u518d\u91cd\u590d\u8d34\u51fa\u4ee3\u7801\u3002 \u70b9\u51fb\u6211\u67e5\u770b\u6240\u6709\u5185\u7f6e\u5361\u7247\u5728\u7ebf\u6f14\u793a \u81ea\u5b9a\u4e49\u56fe\u8868\u5361\u7247 \u5982\u9700\u81ea\u5b9a\u4e49\u5361\u7247\uff0c\u53ef\u53c2\u8003\u4e0a\u8ff0\u5185\u7f6e\u56fe\u8868\u7684\u4ee3\u7801\u3002","title":"\u6570\u636e\u7edf\u8ba1\u5361\u7247"},{"location":"2.x/widgets-data-card/#_1","text":"Dcat Admin \u4e2d\u5185\u7f6e\u4e86\u591a\u79cd\u5e38\u7528\u6570\u636e\u7edf\u8ba1\u5361\u7247\uff0c\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u7684\u4e0e\u540e\u7aefAPI\u4ea4\u4e92\uff0c\u4e0b\u9762\u9010\u4e00\u4ecb\u7ecd\u7528\u6cd5\u3002","title":"\u6570\u636e\u7edf\u8ba1\u5361\u7247"},{"location":"2.x/widgets-data-card/#_2","text":"\u57fa\u7840\u5361\u7247( Dcat\\Admin\\Widgets\\Metrics\\Card )\u662f\u4e00\u79cd\u9ed8\u8ba4\u4e0d\u663e\u793a\u56fe\u8868\u7684\u5361\u7247\uff0c\u4e5f\u662f\u6570\u636e\u5361\u7247\u4e2d\u6700\u7b80\u5355\u7684\u4e00\u79cd\u3002","title":"\u57fa\u7840\u5361\u7247"},{"location":"2.x/widgets-data-card/#_3","text":"\u57fa\u7840\u5361\u7247\u7684\u4f7f\u7528\u53ef\u53c2\u8003\u5185\u7f6e\u7684 App\\Admin\\Metrics\\Examples\\TotalUsers \u7c7b\u3002 <?php namespace App\\Admin\\Metrics\\Examples; use Dcat\\Admin\\Widgets\\Metrics\\Card; use Illuminate\\Contracts\\Support\\Renderable; use Illuminate\\Http\\Request; class TotalUsers extends Card { /** * \u5361\u7247\u5e95\u90e8\u5185\u5bb9. * * @var string|Renderable|\\Closure */ protected $footer; // \u4fdd\u5b58\u81ea\u5b9a\u4e49\u53c2\u6570 protected $data = []; // \u6784\u9020\u65b9\u6cd5\u53c2\u6570\u5fc5\u987b\u8bbe\u7f6e\u9ed8\u8ba4\u503c public function __construct(array $data = []) { $this->data = []; parent::__construct(); } protected function init() { parent::init(); // \u8bbe\u7f6e\u6807\u9898 $this->title('Total Users'); // \u8bbe\u7f6e\u4e0b\u62c9\u83dc\u5355 $this->dropdown([ '7' => 'Last 7 Days', '28' => 'Last 28 Days', '30' => 'Last Month', '365' => 'Last Year', ]); } /** * \u5904\u7406\u8bf7\u6c42. * * @param Request $request * * @return void */ public function handle(Request $request) { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u7684\u81ea\u5b9a\u4e49\u53c2\u6570 $key1 = $request->get('key1'); switch ($request->get('option')) { case '365': $this->content(mt_rand(600, 1500)); $this->down(mt_rand(1, 30)); break; case '30': $this->content(mt_rand(170, 250)); $this->up(mt_rand(12, 50)); break; case '28': $this->content(mt_rand(155, 200)); $this->up(mt_rand(5, 50)); break; case '7': default: $this->content(143); $this->up(15); } } // \u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570\u5230 handle \u65b9\u6cd5 public function parameters() : array { return $this->data; } /** * @param int $percent * * @return $this */ public function up($percent) { return $this->footer( \"<i class=\\\"feather icon-trending-up text-success\\\"></i> {$percent}% Increase\" ); } /** * @param int $percent * * @return $this */ public function down($percent) { return $this->footer( \"<i class=\\\"feather icon-trending-down text-danger\\\"></i> {$percent}% Decrease\" ); } /** * \u8bbe\u7f6e\u5361\u7247\u5e95\u90e8\u5185\u5bb9 * * @param string|Renderable|\\Closure $footer * * @return $this */ public function footer($footer) { $this->footer = $footer; return $this; } /** * \u6e32\u67d3\u5361\u7247\u5185\u5bb9. * * @return string */ public function renderContent() { $content = parent::renderContent(); return <<<HTML <div class=\"d-flex justify-content-between align-items-center mt-1\" style=\"margin-bottom: 2px\"> <h2 class=\"ml-1 font-large-1\">{$content}</h2> </div> <div class=\"ml-1 mt-1 font-weight-bold text-80\"> {$this->renderFooter()} </div> HTML; } /** * @return string */ public function renderFooter() { return $this->toString($this->footer); } }","title":"\u7b80\u5355\u793a\u4f8b"},{"location":"2.x/widgets-data-card/#_4","text":"","title":"\u57fa\u7840\u5361\u7247\u65b9\u6cd5"},{"location":"2.x/widgets-data-card/#init","text":"init \u65b9\u6cd5\u4f1a\u5728\u5361\u7247\u6784\u9020\u65b9\u6cd5\u4e2d\u88ab\u8c03\u7528\uff0c\u53ef\u7528\u4e8e\u5361\u7247\u521d\u59cb\u5316\u64cd\u4f5c\u3002 class MyCard extend Card { protected function init() { parent::init(); // \u4f60\u7684\u521d\u59cb\u5316\u64cd\u4f5c } }","title":"\u521d\u59cb\u5316 (init)"},{"location":"2.x/widgets-data-card/#title","text":"\u901a\u8fc7 title \u65b9\u6cd5\u53ef\u4ee5\u5728\u5361\u7247\u7684\u5de6\u4e0a\u89d2\u8bbe\u7f6e\u4e00\u4e2a\u6807\u9898 class MyCard extend Card { protected function init() { parent::init(); $this->title('\u6d3b\u8dc3\u7528\u6237'); } }","title":"\u8bbe\u7f6e\u6807\u9898 (title)"},{"location":"2.x/widgets-data-card/#dropdown","text":"\u901a\u8fc7 dropdown \u65b9\u6cd5\u53ef\u4ee5\u5728\u5361\u7247\u53f3\u4e0a\u89d2\u8bbe\u7f6e\u4e00\u4e2a\u4e0b\u62c9\u83dc\u5355\u6309\u94ae\uff0c\u6b64\u529f\u80fd\u9700\u8981\u7ed3\u5408 handle \u65b9\u6cd5\u4e00\u8d77\u4f7f\u7528\u624d\u6709\u6548\u679c\u3002 class MyCard extend Card { protected function init() { $this->dropdown([ '7' => 'Last 7 Days', '28' => 'Last 28 Days', '30' => 'Last Month', '365' => 'Last Year', ]); } }","title":"\u8bbe\u7f6e\u4e0b\u62c9\u83dc\u5355 (dropdown)"},{"location":"2.x/widgets-data-card/#subtitle","text":"\u901a\u8fc7 subTitle \u65b9\u6cd5\u53ef\u4ee5\u5728\u5361\u7247\u7684\u53c8\u4e0a\u89d2\u8bbe\u7f6e\u4e00\u4e2a\u526f\u6807\u9898\u3002 {tip} \u6b64\u65b9\u6cd5\u4e0e dropdown \u65b9\u6cd5\u4f1a\u6709\u51b2\u7a81\uff0c\u5982\u679c\u8bbe\u7f6e\u8fc7\u4e0b\u62c9\u83dc\u5355\u6309\u94ae\uff0c\u5c31\u4e0d\u9700\u8981\u8bbe\u7f6e\u526f\u6807\u9898\u3002 class MyCard extend Card { protected function init() { parent::init(); $this->subTitle('\u6700\u8fd130\u5929'); } }","title":"\u8bbe\u7f6e\u526f\u6807\u9898 (subTitle)"},{"location":"2.x/widgets-data-card/#header","text":"\u901a\u8fc7 header \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u5361\u7247\u5934\u90e8\u5185\u5bb9\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff0c\u53ef\u4ee5\u662f string \u3001 Closure \uff0c\u4e5f\u53ef\u4ee5\u662f\u6a21\u677f\u89c6\u56fe( Illuminate\\Contracts\\Support\\Renderable )\u3002 {tip} \u901a\u8fc7\u6b64\u65b9\u6cd5\u8bbe\u7f6e\u7684\u5185\u5bb9\u4e0e title \u5728\u540c\u4e00\u4e2a div \u5bb9\u5668\u5185\u3002 class MyCard extend Card { protected function init() { parent::init(); $this->header( <<<HTML <div>\u5934\u90e8\u5185\u5bb9</div> HTML ); // \u4e5f\u53ef\u4ee5\u4f20\u95ed\u5305 $this->header(function () { return ...; }); // \u4e5f\u53ef\u4ee5\u4f20\u89c6\u56fe $this->header(view('...')); } }","title":"\u8bbe\u7f6e\u5934\u90e8\u5185\u5bb9 (header)"},{"location":"2.x/widgets-data-card/#content","text":"\u901a\u8fc7 content \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u5361\u7247\u7684\u5185\u5bb9\u4e3b\u4f53\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff0c\u53ef\u4ee5\u662f string \u3001 Closure \uff0c\u4e5f\u53ef\u4ee5\u662f\u6a21\u677f\u89c6\u56fe( Illuminate\\Contracts\\Support\\Renderable )\u3002 class MyCard extend Card { protected function init() { parent::init(); $this->withContent('\u81ea\u5b9a\u4e49\u5185\u5bb9'); } /** * \u5361\u7247\u5185\u5bb9 * * @param string $content * * @return $this */ public function withContent($content) { return $this->content( <<<HTML <div class=\"d-flex flex-column flex-wrap text-center\"> <h1 class=\"font-large-2 mt-2 mb-0\">{$content}</h1> <small>Tickets</small> </div> HTML ); } }","title":"\u8bbe\u7f6e\u4e3b\u4f53\u5185\u5bb9 (content)"},{"location":"2.x/widgets-data-card/#height","text":"\u901a\u8fc7 height \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u5361\u7247\u7684\u6700\u5c0f\u9ad8\u5ea6\uff0c\u9ed8\u8ba4 165 \u3002 protected function init() { parent::init(); $this->height(200); }","title":"\u8bbe\u7f6e\u9ad8\u5ea6 (height)"},{"location":"2.x/widgets-data-card/#parameters","text":"\u901a\u8fc7 parameters \u65b9\u6cd5\u53ef\u4ee5\u628a\u53c2\u6570\u4f20\u9012\u5230 handle \u65b9\u6cd5 // \u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570\u5230 handle \u65b9\u6cd5 public function parameters() : array { return [ 'key1' => 'value1', ... ]; } \u83b7\u53d6\u81ea\u5b9a\u4e49\u53c2\u6570 public function handle(Request $request) { // \u83b7\u53d6\u81ea\u5b9a\u4e49\u53c2\u6570 $key1 = $request->get('key1'); }","title":"\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 (parameters)"},{"location":"2.x/widgets-data-card/#rendercontent","text":"\u4e3a\u4e86\u4fdd\u8bc1\u5185\u5bb9\u7684\u7075\u6d3b\u548c\u53ef\u6269\u5c55\u6027\uff0c\u7cfb\u7edf\u6ca1\u6709\u5bf9\u5361\u7247\u5185\u5bb9\u9884\u8bbe\u4efb\u4f55\u6837\u5f0f(\u5373\u8bbe\u7f6e\u4ec0\u4e48\u5185\u5bb9\u5c31\u53ea\u663e\u793a\u4ec0\u4e48\u5185\u5bb9\uff0c\u6ca1\u6709\u9884\u8bbe\u5e03\u5c40\u6216\u5176\u4ed6\u6837\u5f0f)\uff0c \u901a\u8fc7 renderContent \u65b9\u6cd5\u5373\u53ef\u4ee5\u66f4\u6539\u5361\u7247\u9ed8\u8ba4\u7684\u6e32\u67d3\u65b9\u5f0f\u3002 \u4ee5\u4e0b\u7684\u4f8b\u5b50\u6f14\u793a\u4e86 renderContent \u65b9\u6cd5\u7684\u4e3b\u8981\u529f\u80fd use Dcat\\Admin\\Support\\Helper; class MyCard extend Card { protected $footer; protected function init() { parent::init(); // \u8bbe\u7f6e\u5361\u7247\u5185\u5bb9 $this->content(...); // \u8bbe\u7f6e\u5361\u7247\u5e95\u90e8\u5185\u5bb9 $this->footer(...); } /** * \u589e\u52a0\u6b64\u65b9\u6cd5\u8bbe\u7f6e\u5361\u7247\u5e95\u90e8\u5185\u5bb9 * * @return $this */ public function footer($footer) { $this->footer = $footer; return $this; } /** * \u6e32\u67d3\u5e95\u90e8\u5185\u5bb9 * * @return $this */ public function renderFooter() { return Helper::render($this->footer); } /** * \u6e32\u67d3\u5361\u7247\u5185\u5bb9 * \u5728\u8fd9\u91cc\u5373\u53ef\u52a0\u4e0a\u5361\u7247\u5e95\u90e8\u5185\u5bb9 * * @return string */ public function renderContent() { $content = parent::renderContent(); $footer = $this->renderFooter(); return <<<HTML <div class=\"card-content\"> <div class=\"row\"> {$content} </div> <div class=\"metric-footer\"> {$footer} </div> </div> HTML; } }","title":"\u6e32\u67d3\u5185\u5bb9 (renderContent)"},{"location":"2.x/widgets-data-card/#_5","text":"\u57fa\u672c\u5361\u7247\u9ed8\u8ba4\u662f\u542f\u7528\u56fe\u8868\u529f\u80fd\u7684\uff0c\u901a\u8fc7 useChart \u65b9\u6cd5\u53ef\u4ee5\u542f\u7528\u56fe\u8868\u529f\u80fd\uff0c\u8c03\u7528\u6b64\u65b9\u6cd5\u4e4b\u540e\u4f1a\u5b9e\u4f8b\u5316\u4e00\u4e2a\u56fe\u8868\u7c7b\uff0c\u7136\u540e\u4fdd\u5b58\u5728 chart \u5c5e\u6027\u5f53\u4e2d\u3002 \u5f53\u56fe\u8868\u542f\u7528\u4e4b\u540e\uff0c\u8fd8\u9700\u8981\u5728\u4f60\u7684\u5361\u7247\u5185\u5bb9\u4e2d\u6e32\u67d3\u56fe\u8868\uff0c\u5426\u5219\u56fe\u8868\u867d\u7136\u88ab\u521d\u59cb\u5316\u4e86\uff0c\u4f46\u662f\u4ecd\u65e0\u6cd5\u663e\u793a\u3002 class MyCard extend Card { protected function init() { parent::init(); // \u542f\u7528\u56fe\u8868 $this->useChart(); } /** * \u6e32\u67d3\u5361\u7247\u5185\u5bb9 * \u9700\u8981\u5728\u8fd9\u91cc\u52a0\u4e0a\u6e32\u67d3\u56fe\u8868\u7684\u4ee3\u7801 * * @return string */ public function renderContent() { // \u901a\u8fc7 content \u65b9\u6cd5\u8bbe\u7f6e\u7684\u5185\u5bb9 $content = parent::renderContent(); // \u6e32\u67d3\u56fe\u8868 $chart = $this->renderChart(); return <<<HTML <div class=\"my-chart\">{$chart}</div> {$content} HTML } }","title":"\u542f\u7528\u4ee5\u53ca\u6e32\u67d3\u56fe\u8868"},{"location":"2.x/widgets-data-card/#defaultchartoptions","text":"\u901a\u8fc7 defaultChartOptions \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u56fe\u8868\u9ed8\u8ba4\u914d\u7f6e\uff0c\u6b64\u65b9\u6cd5\u53ea\u6709\u542f\u7528\u56fe\u8868\u4e4b\u540e\u624d\u6709\u6548\u3002 {tip} \u8fd9\u91cc\u7684\u56fe\u8868\u914d\u7f6e\u540c\u6837\u652f\u6301\u8bbe\u7f6e\u53ef\u6267\u884c JS \u4ee3\u7801\uff0c\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003 \u56fe\u8868\u914d\u7f6e\u8bbe\u7f6e\u53ef\u6267\u884cJS\u4ee3\u7801 \u3002 class MyCard extend Card { protected function defaultChartOptions() { // \u8fd4\u56de\u56fe\u8868\u7684\u914d\u7f6e return [ ... ]; } }","title":"\u56fe\u8868\u9ed8\u8ba4\u914d\u7f6e (defaultChartOptions)"},{"location":"2.x/widgets-data-card/#chart","text":"\u901a\u8fc7 chart \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u56fe\u8868\u914d\u7f6e\u3002 {tip} \u8fd9\u91cc\u7684\u56fe\u8868\u914d\u7f6e\u540c\u6837\u652f\u6301\u8bbe\u7f6e\u53ef\u6267\u884c JS \u4ee3\u7801\uff0c\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003 \u56fe\u8868\u914d\u7f6e\u8bbe\u7f6e\u53ef\u6267\u884cJS\u4ee3\u7801 \u3002 class MyCard extend Card { protected function init() { parent::init(); $this->chart([...]); } }","title":"\u8bbe\u7f6e\u56fe\u8868 (chart)"},{"location":"2.x/widgets-data-card/#chartoption","text":"\u901a\u8fc7 chartOption \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u56fe\u8868\u914d\u7f6e\uff0c\u6b64\u65b9\u6cd5\u4e00\u6b21\u53ea\u80fd\u8bbe\u7f6e\u4e00\u4e2a\u53c2\u6570\uff0c\u652f\u6301\u8bbe\u7f6e\u591a\u7ef4\u53c2\u6570\u3002 {tip} \u8fd9\u91cc\u7684\u56fe\u8868\u914d\u7f6e\u540c\u6837\u652f\u6301\u8bbe\u7f6e\u53ef\u6267\u884c JS \u4ee3\u7801\uff0c\u8be6\u7ec6\u7528\u6cd5\u8bf7\u53c2\u8003 \u56fe\u8868\u914d\u7f6e\u8bbe\u7f6e\u53ef\u6267\u884cJS\u4ee3\u7801 \u3002 class MyCard extend Card { protected function init() { parent::init(); $this->chartOption('stroke.curve', 'smooth'); $this->chartOption( 'plotOptions.radialBar.dataLabels.total.formatter', // \u8fd9\u4e2a\u503c\u6700\u540e\u6bb5\u4ee3\u7801\u4f1a\u4f5c\u4e3aJS\u4ee3\u7801\u6267\u884c JavaScript::make(\"function () { return {$number}; }\") ); } }","title":"\u8bbe\u7f6e\u56fe\u8868\u914d\u7f6e (chartOption)"},{"location":"2.x/widgets-data-card/#chartheight","text":"\u901a\u8fc7 chartHeight \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u56fe\u8868\u7684\u9ad8\u5ea6\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u975e\u5e38\u91cd\u8981\uff0c\u7ecf\u5e38\u9700\u8981\u7ed3\u5408 height \u65b9\u6cd5\u4e00\u8d77\u4f7f\u7528\uff0c\u8c03\u6574\u5361\u7247\u7684\u6574\u4f53\u9ad8\u5ea6\u3002 class MyCard extend Card { protected function init() { parent::init(); $this->chartHeight(150); } }","title":"\u8bbe\u7f6e\u56fe\u8868\u9ad8\u5ea6 (chartHeight)"},{"location":"2.x/widgets-data-card/#chartmargintop","text":"\u901a\u8fc7 chartMarginTop \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u56fe\u8868\u4e0e\u4e0a\u7ea7\u5143\u7d20\u7684\u95f4\u8ddd\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a int \u7c7b\u578b\u53c2\u6570\uff0c\u53ef\u4ee5\u4f20 \u8d1f\u6570 \u3002 class MyCard extend Card { protected function init() { parent::init(); $this->chartMarginTop(-10); } }","title":"\u8bbe\u7f6e\u56fe\u8868\u4e0a\u95f4\u8ddd (chartMarginTop)"},{"location":"2.x/widgets-data-card/#chartmarginbottom","text":"\u901a\u8fc7 chartMarginBottom \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u56fe\u8868\u4e0e\u4e0b\u7ea7\u5143\u7d20\u7684\u95f4\u8ddd\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a int \u7c7b\u578b\u53c2\u6570\uff0c\u53ef\u4ee5\u4f20 \u8d1f\u6570 \u3002 class MyCard extend Card { protected function init() { parent::init(); $this->chartMarginBottom(10); } }","title":"\u8bbe\u7f6e\u56fe\u8868\u4e0b\u95f4\u8ddd (chartMarginBottom)"},{"location":"2.x/widgets-data-card/#chartlabels","text":"\u901a\u8fc7 chartLabels \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u56fe\u8868\u7684\u6807\u7b7e( labels )\u914d\u7f6e\u3002 class MyCard extend Card { protected function init() { parent::init(); $this->chartLabels('\u6807\u7b7e1'); // \u4e5f\u53ef\u4ee5\u4f20\u9012\u6570\u7ec4 $this->chartLabels(['\u6807\u7b7e1']); } }","title":"\u8bbe\u7f6e\u56fe\u8868\u6807\u7b7e (chartLabels)"},{"location":"2.x/widgets-data-card/#chartcolors","text":"\u901a\u8fc7 chartColors \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u56fe\u8868\u7684\u989c\u8272( colors )\u914d\u7f6e\u3002 class MyCard extend Card { protected function init() { parent::init(); $this->chartColors('#4f41a1'); // \u4e5f\u53ef\u4ee5\u4f20\u9012\u6570\u7ec4 $this->chartColors(['#4f41a1']); } }","title":"\u8bbe\u7f6e\u56fe\u8868\u989c\u8272 (chartColors)"},{"location":"2.x/widgets-data-card/#renderchart","text":"\u901a\u8fc7 renderChart \u65b9\u6cd5\u53ef\u4ee5\u6e32\u67d3\u56fe\u8868\u3002 class MyCard extend Card { protected function init() { parent::init(); // \u542f\u7528\u56fe\u8868 $this->useChart(); } /** * \u6e32\u67d3\u5361\u7247\u5185\u5bb9 * \u9700\u8981\u5728\u8fd9\u91cc\u52a0\u4e0a\u6e32\u67d3\u56fe\u8868\u7684\u4ee3\u7801 * * @return string */ public function renderContent() { // \u901a\u8fc7 content \u65b9\u6cd5\u8bbe\u7f6e\u7684\u5185\u5bb9 $content = parent::renderContent(); // \u6e32\u67d3\u56fe\u8868 $chart = $this->renderChart(); return <<<HTML <div class=\"my-chart\">{$chart}</div> {$content} HTML } }","title":"\u6e32\u67d3\u56fe\u8868 (renderChart)"},{"location":"2.x/widgets-data-card/#line","text":"\u7ebf\u6027\u8d8b\u52bf\u56fe\u5361\u7247( Dcat\\Admin\\Widgets\\Metrics\\Line )\u662f\u4e00\u4e2a\u9644\u5e26\u4e86\u6298\u7ebf\\\u66f2\u7ebf\u56fe\u7684\u6570\u636e\u7edf\u8ba1\u5361\u7247\uff0c\u7ee7\u627f\u81ea\u57fa\u7840\u5361\u7247 Dcat\\Admin\\Widgets\\Metrics\\Card \u3002","title":"\u7ebf\u6027\u8d8b\u52bf\u56fe\u5361\u7247 (Line)"},{"location":"2.x/widgets-data-card/#_6","text":"\u53ef\u53c2\u8003\u5185\u7f6e\u7684 App\\Admin\\Metrics\\Examples\\NewUsers \u7c7b\u3002 <?php namespace App\\Admin\\Metrics\\Examples; use Dcat\\Admin\\Widgets\\Metrics\\Line; use Illuminate\\Http\\Request; class NewUsers extends Line { /** * @var string */ protected $label = 'New Users'; /** * \u521d\u59cb\u5316\u5361\u7247\u5185\u5bb9 * * @return void */ protected function init() { parent::init(); $this->title($this->label); $this->dropdown([ '7' => 'Last 7 Days', '28' => 'Last 28 Days', '30' => 'Last Month', '365' => 'Last Year', ]); } /** * \u5904\u7406\u8bf7\u6c42 * * @param Request $request * * @return mixed|void */ public function handle(Request $request) { $generator = function ($len, $min = 10, $max = 300) { for ($i = 0; $i <= $len; $i++) { yield mt_rand($min, $max); } }; switch ($request->get('option')) { case '365': // \u5361\u7247\u5185\u5bb9 $this->withContent(mt_rand(1000, 5000).'k'); // \u56fe\u8868\u6570\u636e $this->withChart(collect($generator(30))->toArray()); // \u76f4\u7ebf break; case '30': // \u5361\u7247\u5185\u5bb9 $this->withContent(mt_rand(400, 1000).'k'); // \u56fe\u8868\u6570\u636e $this->withChart(collect($generator(30))->toArray()); // \u76f4\u7ebf break; case '28': // \u5361\u7247\u5185\u5bb9 $this->withContent(mt_rand(400, 1000).'k'); // \u56fe\u8868\u6570\u636e $this->withChart(collect($generator(28))->toArray()); // \u76f4\u7ebf break; case '7': default: // \u5361\u7247\u5185\u5bb9 $this->withContent('89.2k'); // \u56fe\u8868\u6570\u636e $this->withChart([28, 40, 36, 52, 38, 60, 55,]); } } /** * \u8bbe\u7f6e\u56fe\u8868\u6570\u636e. * * @param array $data * * @return $this */ public function withChart(array $data) { return $this->chart([ 'series' => [ [ 'name' => $this->label, 'data' => $data, ], ], ]); } /** * \u8bbe\u7f6e\u5361\u7247\u5185\u5bb9. * * @param string $content * * @return $this */ public function withContent($content) { return $this->content( <<<HTML <div class=\"d-flex justify-content-between align-items-center mt-1\" style=\"margin-bottom: 2px\"> <h2 class=\"ml-1 font-large-1\">{$content}</h2> <span class=\"mb-0 mr-1 text-80\">{$this->label}</span> </div> HTML ); } }","title":"\u793a\u4f8b"},{"location":"2.x/widgets-data-card/#_7","text":"","title":"\u65b9\u6cd5"},{"location":"2.x/widgets-data-card/#chartstraight","text":"use Dcat\\Admin\\Widgets\\Metrics\\Line; class MyCard extend Line { protected function init() { parent::init(); $this->chartStraight(); } }","title":"\u8bbe\u7f6e\u7ebf\u6761\u4e3a\u76f4\u7ebf (chartStraight)"},{"location":"2.x/widgets-data-card/#chartsmooth","text":"\u9ed8\u8ba4\u663e\u793a\u7684\u662f\u66f2\u7ebf\u3002 use Dcat\\Admin\\Widgets\\Metrics\\Line; class MyCard extend Line { protected function init() { parent::init(); $this->chartSmooth(); } }","title":"\u8bbe\u7f6e\u7ebf\u6761\u4e3a\u66f2\u7ebf (chartSmooth)"},{"location":"2.x/widgets-data-card/#donut","text":"\u5706\u73af\u56fe\u5361\u7247( Dcat\\Admin\\Widgets\\Metrics\\Donut )\u662f\u4e00\u4e2a\u9644\u5e26\u4e86\u5706\u73af\u56fe\u7684\u6570\u636e\u7edf\u8ba1\u5361\u7247\uff0c\u7ee7\u627f\u81ea\u57fa\u7840\u5361\u7247 Dcat\\Admin\\Widgets\\Metrics\\Card \u3002","title":"\u5706\u73af\u56fe\u5361\u7247 (Donut)"},{"location":"2.x/widgets-data-card/#_8","text":"\u53ef\u53c2\u8003\u5185\u7f6e\u7684 App\\Admin\\Metrics\\Examples\\NewDevices \u7c7b\u3002 <?php namespace App\\Admin\\Metrics\\Examples; use Dcat\\Admin\\Admin; use Dcat\\Admin\\Widgets\\Metrics\\Donut; class NewDevices extends Donut { protected $labels = ['Desktop', 'Mobile']; /** * \u521d\u59cb\u5316\u5361\u7247\u5185\u5bb9 */ protected function init() { parent::init(); $color = Admin::color(); $colors = [$color->primary(), $color->alpha('blue2', 0.5)]; $this->title('New Devices'); $this->subTitle('Last 30 days'); $this->chartLabels($this->labels); // \u8bbe\u7f6e\u56fe\u8868\u989c\u8272 $this->chartColors($colors); } /** * \u6e32\u67d3\u6a21\u677f * * @return string */ public function render() { $this->fill(); return parent::render(); } /** * \u5199\u5165\u6570\u636e. * * @return void */ public function fill() { $this->withContent(44.9, 28.6); // \u56fe\u8868\u6570\u636e $this->withChart([44.9, 28.6]); } /** * \u8bbe\u7f6e\u56fe\u8868\u6570\u636e. * * @param array $data * * @return $this */ public function withChart(array $data) { return $this->chart([ 'series' => $data ]); } /** * \u8bbe\u7f6e\u5361\u7247\u5934\u90e8\u5185\u5bb9. * * @param mixed $desktop * @param mixed $mobile * * @return $this */ protected function withContent($desktop, $mobile) { $blue = Admin::color()->alpha('blue2', 0.5); $style = 'margin-bottom: 8px'; $labelWidth = 120; return $this->content( <<<HTML <div class=\"d-flex pl-1 pr-1 pt-1\" style=\"{$style}\"> <div style=\"width: {$labelWidth}px\"> <i class=\"fa fa-circle text-primary\"></i> {$this->labels[0]} </div> <div>{$desktop}</div> </div> <div class=\"d-flex pl-1 pr-1\" style=\"{$style}\"> <div style=\"width: {$labelWidth}px\"> <i class=\"fa fa-circle\" style=\"color: $blue\"></i> {$this->labels[1]} </div> <div>{$mobile}</div> </div> HTML ); } }","title":"\u793a\u4f8b"},{"location":"2.x/widgets-data-card/#_9","text":"","title":"\u65b9\u6cd5"},{"location":"2.x/widgets-data-card/#contentwidth","text":"\u901a\u8fc7 contentWidth \u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u6587\u672c\u5185\u5bb9\u4ee5\u53ca\u56fe\u8868\u5185\u5bb9\u7684\u5bbd\u5ea6\uff0c\u9ed8\u8ba4\u4e3a [6, 6] \u3002 {tip} \u8fd9\u91cc\u7684\u5bbd\u5ea6\u662f\u4e00\u4e2a 1-12 \u4e4b\u95f4\u7684\u4e00\u4e2a\u503c\u3002 use Dcat\\Admin\\Widgets\\Metrics\\Line; class MyCard extend Line { protected function init() { parent::init(); $this->contentWidth(4, 8); } }","title":"\u8bbe\u7f6e\u5185\u5bb9\u5bbd\u5ea6 (contentWidth)"},{"location":"2.x/widgets-data-card/#bar","text":"\u67f1\u72b6\u56fe\u5361\u7247( Dcat\\Admin\\Widgets\\Metrics\\Bar )\u662f\u4e00\u4e2a\u9644\u5e26\u4e86\u67f1\u72b6\u56fe\u7684\u6570\u636e\u7edf\u8ba1\u5361\u7247\uff0c\u7ee7\u627f\u81ea\u57fa\u7840\u5361\u7247 Dcat\\Admin\\Widgets\\Metrics\\Card \u3002","title":"\u67f1\u72b6\u56fe\u5361\u7247 (Bar)"},{"location":"2.x/widgets-data-card/#_10","text":"\u53ef\u53c2\u8003\u5185\u7f6e\u7684 App\\Admin\\Metrics\\Examples\\NewDevices \u7c7b\u3002 <?php namespace App\\Admin\\Metrics\\Examples; use Dcat\\Admin\\Admin; use Dcat\\Admin\\Widgets\\Metrics\\Bar; use Illuminate\\Http\\Request; class Sessions extends Bar { /** * \u521d\u59cb\u5316\u5361\u7247\u5185\u5bb9 */ public function init() { parent::init(); $color = Admin::color(); $dark35 = $color->dark35(); // \u5361\u7247\u5185\u5bb9\u5bbd\u5ea6 $this->contentWidth(5, 7); // \u6807\u9898 $this->title('Avg Sessions'); // \u8bbe\u7f6e\u4e0b\u62c9\u9009\u9879 $this->dropdown([ '7' => 'Last 7 Days', '28' => 'Last 28 Days', '30' => 'Last Month', '365' => 'Last Year', ]); // \u8bbe\u7f6e\u56fe\u8868\u989c\u8272 $this->chartColors([ $dark35, $dark35, $color->primary(), $dark35, $dark35, $dark35 ]); } /** * \u5904\u7406\u8bf7\u6c42 * * @param Request $request * * @return mixed|void */ public function handle(Request $request) { switch ($request->get('option')) { case '7': default: // \u5361\u7247\u5185\u5bb9 $this->withContent('2.7k', '+5.2%'); // \u56fe\u8868\u6570\u636e $this->withChart([ [ 'name' => 'Sessions', 'data' => [75, 125, 225, 175, 125, 75, 25], ], ]); } } /** * \u8bbe\u7f6e\u56fe\u8868\u6570\u636e. * * @param array $data * * @return $this */ public function withChart(array $data) { return $this->chart([ 'series' => $data, ]); } /** * \u8bbe\u7f6e\u5361\u7247\u5185\u5bb9. * * @param string $title * @param string $value * @param string $style * * @return $this */ public function withContent($title, $value, $style = 'success') { // \u6839\u636e\u9009\u9879\u663e\u793a $label = strtolower( $this->dropdown[request()->option] ?? 'last 7 days' ); $minHeight = '183px'; return $this->content( <<<HTML <div class=\"d-flex p-1 flex-column justify-content-between\" style=\"padding-top: 0;width: 100%;height: 100%;min-height: {$minHeight}\"> <div class=\"text-left\"> <h1 class=\"font-large-2 mt-2 mb-0\">{$title}</h1> <h5 class=\"font-medium-2\" style=\"margin-top: 10px;\"> <span class=\"text-{$style}\">{$value} </span> <span>vs {$label}</span> </h5> </div> <a href=\"#\" class=\"btn btn-primary shadow waves-effect waves-light\">View Details <i class=\"feather icon-chevrons-right\"></i></a> </div> HTML ); } }","title":"\u793a\u4f8b"},{"location":"2.x/widgets-data-card/#round","text":"\u67f1\u72b6\u56fe\u5361\u7247( Dcat\\Admin\\Widgets\\Metrics\\Round )\u662f\u4e00\u4e2a\u9644\u5e26\u4e86\u591a\u73af\u5f62\u56fe\u7684\u6570\u636e\u7edf\u8ba1\u5361\u7247\uff0c\u7ee7\u627f\u81ea\u57fa\u7840\u5361\u7247 Dcat\\Admin\\Widgets\\Metrics\\Card \u3002","title":"\u591a\u73af\u5f62\u56fe\u5361\u7247 (Round)"},{"location":"2.x/widgets-data-card/#_11","text":"\u5177\u4f53\u793a\u4f8b\u4e0e\u4e0a\u8ff0\u5361\u7247\u7684\u793a\u4f8b\u5927\u540c\u5c0f\u5f02\uff0c\u5177\u4f53\u53ef\u53c2\u8003\u5185\u7f6e\u7684 App\\Admin\\Metrics\\Examples\\ProductOrders \u7c7b\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d34\u51fa\u3002","title":"\u793a\u4f8b"},{"location":"2.x/widgets-data-card/#_12","text":"\u7cfb\u7edf\u8fd8\u5185\u7f6e\u4e86 Dcat\\Admin\\Widgets\\Metrics\\RadialBar \u3001 Dcat\\Admin\\Widgets\\Metrics\\SingleRound \u7b49\u5361\u7247\uff0c\u7531\u4e8e\u7528\u6cd5\u4e0e\u4e0a\u8ff0\u5361\u7247\u96f7\u540c\uff0c\u8fd9\u91cc\u4e0d\u518d\u91cd\u590d\u8d34\u51fa\u4ee3\u7801\u3002 \u70b9\u51fb\u6211\u67e5\u770b\u6240\u6709\u5185\u7f6e\u5361\u7247\u5728\u7ebf\u6f14\u793a","title":"\u66f4\u591a\u5185\u7f6e\u5361\u7247"},{"location":"2.x/widgets-data-card/#_13","text":"\u5982\u9700\u81ea\u5b9a\u4e49\u5361\u7247\uff0c\u53ef\u53c2\u8003\u4e0a\u8ff0\u5185\u7f6e\u56fe\u8868\u7684\u4ee3\u7801\u3002","title":"\u81ea\u5b9a\u4e49\u56fe\u8868\u5361\u7247"},{"location":"2.x/widgets-dialog-form/","text":"","title":"Widgets dialog form"},{"location":"2.x/widgets-dropdown/","text":"\u4e0b\u62c9\u83dc\u5355 \u901a\u8fc7 Dcat\\Admin\\Widgets\\Dropdown \u8fd9\u4e2a\u7c7b\u53ef\u4ee5\u5feb\u901f\u5e2e\u5927\u5bb6\u6784\u5efa\u4e0b\u62c9\u83dc\u5355\u529f\u80fd\u3002 \u57fa\u672c\u7528\u6cd5 <?php use Dcat\\Admin\\Widgets\\Dropdown; use Dcat\\Admin\\Layout\\Content; class MyController { public function index(Content $content) { $options = [ '\u540d\u79f01', '\u540d\u79f02', '\u540d\u79f03', '\u540d\u79f04', '\u540d\u79f05', ]; $dropdown = Dropdown::make($options) ->button('\u5206\u7c7b\u5bfc\u822a') // \u8bbe\u7f6e\u6309\u94ae ->buttonClass('btn btn-white waves-effect') // \u8bbe\u7f6e\u6309\u94ae\u6837\u5f0f ->map(function ($label, $key) { // \u683c\u5f0f\u5316\u83dc\u5355\u9009\u9879 $url = admin_url('categories/'.$key); return \"<a href='$url'>{$label}</a>\"; }); return $content->body($dropdown); } } \u6548\u679c \u70b9\u51fb\u83dc\u5355\u66f4\u6362\u6309\u94ae\u6587\u672c click \u65b9\u6cd5\u53ef\u4ee5\u8ba9\u9009\u4e2d\u7684\u83dc\u5355\u6587\u672c\u663e\u793a\u5728\u6309\u94ae\u4e2d\uff0c\u505a\u5230\u7c7b\u4f3c\u4e0b\u62c9\u9009\u6846\u7684\u6548\u679c\u3002 $options = [ ... ]; $dropdown = Dropdown::make($options) ->button('\u9009\u62e9') // \u8bbe\u7f6e\u6309\u94ae ->click(); \u8bbe\u7f6e\u6807\u9898 $options1 = [ '\u540d\u79f01', '\u540d\u79f02', ]; $options2 = [ '\u6d4b\u8bd51', '\u6d4b\u8bd52', ]; $dropdown = Dropdown::make() ->button('\u4f7f\u7528\u6807\u9898') ->options($options1, '\u6807\u98981') ->options($options2, '\u6807\u98982'); \u6548\u679c \u589e\u52a0\u5206\u5272\u7ebf $options = [ '\u540d\u79f01', '\u540d\u79f02', Dropdown::DIVIDER, '\u540d\u79f03', '\u540d\u79f04', ]; $dropdown = Dropdown::make() ->button('\u4f7f\u7528\u5206\u5272\u7ebf') ->options($options) \u6548\u679c \u81ea\u5b9a\u4e49\u6309\u94ae public function index(Content $content) { $options = [ '\u540d\u79f01', '\u540d\u79f02', '\u540d\u79f03', '\u540d\u79f04', '\u540d\u79f05', ]; $dropdown = Dropdown::make($options) ->map(function ($label, $key) { // \u683c\u5f0f\u5316\u83dc\u5355\u9009\u9879 $url = admin_url('categories/'.$key); return \"<a href='$url'>{$label}</a>\"; }); return $content->body( <<<HTML <div class='dropdown'> <button class='btn btn-primary dropdown-toggle' data-toggle='dropdown'> <i class='feather icon-email'></i> \u81ea\u5b9a\u4e49\u6309\u94ae </button> {$dropdown->render()} </div> HTML ); } \u6548\u679c","title":"\u4e0b\u62c9\u83dc\u5355"},{"location":"2.x/widgets-dropdown/#_1","text":"\u901a\u8fc7 Dcat\\Admin\\Widgets\\Dropdown \u8fd9\u4e2a\u7c7b\u53ef\u4ee5\u5feb\u901f\u5e2e\u5927\u5bb6\u6784\u5efa\u4e0b\u62c9\u83dc\u5355\u529f\u80fd\u3002","title":"\u4e0b\u62c9\u83dc\u5355"},{"location":"2.x/widgets-dropdown/#_2","text":"<?php use Dcat\\Admin\\Widgets\\Dropdown; use Dcat\\Admin\\Layout\\Content; class MyController { public function index(Content $content) { $options = [ '\u540d\u79f01', '\u540d\u79f02', '\u540d\u79f03', '\u540d\u79f04', '\u540d\u79f05', ]; $dropdown = Dropdown::make($options) ->button('\u5206\u7c7b\u5bfc\u822a') // \u8bbe\u7f6e\u6309\u94ae ->buttonClass('btn btn-white waves-effect') // \u8bbe\u7f6e\u6309\u94ae\u6837\u5f0f ->map(function ($label, $key) { // \u683c\u5f0f\u5316\u83dc\u5355\u9009\u9879 $url = admin_url('categories/'.$key); return \"<a href='$url'>{$label}</a>\"; }); return $content->body($dropdown); } } \u6548\u679c","title":"\u57fa\u672c\u7528\u6cd5"},{"location":"2.x/widgets-dropdown/#_3","text":"click \u65b9\u6cd5\u53ef\u4ee5\u8ba9\u9009\u4e2d\u7684\u83dc\u5355\u6587\u672c\u663e\u793a\u5728\u6309\u94ae\u4e2d\uff0c\u505a\u5230\u7c7b\u4f3c\u4e0b\u62c9\u9009\u6846\u7684\u6548\u679c\u3002 $options = [ ... ]; $dropdown = Dropdown::make($options) ->button('\u9009\u62e9') // \u8bbe\u7f6e\u6309\u94ae ->click();","title":"\u70b9\u51fb\u83dc\u5355\u66f4\u6362\u6309\u94ae\u6587\u672c"},{"location":"2.x/widgets-dropdown/#_4","text":"$options1 = [ '\u540d\u79f01', '\u540d\u79f02', ]; $options2 = [ '\u6d4b\u8bd51', '\u6d4b\u8bd52', ]; $dropdown = Dropdown::make() ->button('\u4f7f\u7528\u6807\u9898') ->options($options1, '\u6807\u98981') ->options($options2, '\u6807\u98982'); \u6548\u679c","title":"\u8bbe\u7f6e\u6807\u9898"},{"location":"2.x/widgets-dropdown/#_5","text":"$options = [ '\u540d\u79f01', '\u540d\u79f02', Dropdown::DIVIDER, '\u540d\u79f03', '\u540d\u79f04', ]; $dropdown = Dropdown::make() ->button('\u4f7f\u7528\u5206\u5272\u7ebf') ->options($options) \u6548\u679c","title":"\u589e\u52a0\u5206\u5272\u7ebf"},{"location":"2.x/widgets-dropdown/#_6","text":"public function index(Content $content) { $options = [ '\u540d\u79f01', '\u540d\u79f02', '\u540d\u79f03', '\u540d\u79f04', '\u540d\u79f05', ]; $dropdown = Dropdown::make($options) ->map(function ($label, $key) { // \u683c\u5f0f\u5316\u83dc\u5355\u9009\u9879 $url = admin_url('categories/'.$key); return \"<a href='$url'>{$label}</a>\"; }); return $content->body( <<<HTML <div class='dropdown'> <button class='btn btn-primary dropdown-toggle' data-toggle='dropdown'> <i class='feather icon-email'></i> \u81ea\u5b9a\u4e49\u6309\u94ae </button> {$dropdown->render()} </div> HTML ); } \u6548\u679c","title":"\u81ea\u5b9a\u4e49\u6309\u94ae"},{"location":"2.x/widgets-form/","text":"\u5de5\u5177\u8868\u5355 \u5de5\u5177\u8868\u5355( Dcat\\Admin\\Widgets\\Form )\u7528\u6765\u6784\u5efa\u8868\u5355\u548c\u5904\u7406\u63d0\u4ea4\u6570\u636e\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u72ec\u7acb\u5904\u7406\u6570\u636e\uff0c\u800c\u4e0d\u9700\u8981\u989d\u5916\u6ce8\u518c\u8def\u7531\u3002 \u57fa\u672c\u4f7f\u7528 \u7528\u547d\u4ee4 admin:form \u6765\u751f\u6210\u8868\u5355\u7c7b\u6587\u4ef6\uff1a php artisan admin:form Setting \u5c06\u4f1a\u751f\u6210\u8868\u5355\u6587\u4ef6 app/Admin/Forms/Setting.php <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Widgets\\Form; use Symfony\\Component\\HttpFoundation\\Response; class Setting extends Form { // \u5904\u7406\u8868\u5355\u63d0\u4ea4\u8bf7\u6c42 public function handle(array $input) { // dump($input); return $this->response()->success('Processed successfully.')->refresh(); } // \u6784\u5efa\u8868\u5355 public function form() { // \u5f39\u51fa\u786e\u8ba4\u5f39\u7a97 $this->confirm('\u60a8\u786e\u5b9a\u8981\u63d0\u4ea4\u8868\u5355\u5417', 'content'); $this->text('name')->required(); $this->email('email')->rules('email'); } /** * \u8fd4\u56de\u8868\u5355\u6570\u636e\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @return array */ public function default() { return [ 'name' => 'John Doe', 'email' => 'John.Doe@gmail.com', ]; } } \u5728\u4e0a\u9762\u7684\u8868\u5355\u7c7b\u91cc\u9762\uff0c\u5728 form \u65b9\u6cd5\u4e2d\u6784\u5efa\u8868\u5355\u9879\uff0c\u4f7f\u7528\u65b9\u6cd5\u548c \u6570\u636e\u8868\u5355 \u4e00\u81f4\uff0c default \u65b9\u6cd5\u7528\u6765\u7ed9\u8fd9\u4e2a\u8868\u5355\u9879\u8bbe\u7f6e\u9ed8\u8ba4\u6570\u636e\u3002 \u5728\u9875\u9762\u4e2d\u586b\u5165\u6570\u636e\u63d0\u4ea4\u8868\u5355\u4e4b\u540e\uff0c\u8bf7\u6c42\u4f1a\u8fdb\u5165\u5230 handle \u65b9\u6cd5\u4e2d\uff0c\u5728\u8fd9\u91cc\u53ef\u4ee5\u52a0\u5165\u4f60\u7684\u6570\u636e\u5904\u7406\u903b\u8f91\uff0c\u5904\u7406\u5b8c\u6210\u4e4b\u540e\u53ef\u4ee5\u901a\u8fc7 success \u6216 error \u65b9\u6cd5\u54cd\u5e94\u6570\u636e\u5230\u524d\u7aef\uff1a public function handle(array $input) { // $input\u662f\u4f60\u63a5\u6536\u5230\u7684\u8868\u5355\u6570\u636e // \u5728\u8fd9\u91cc\u53ef\u4ee5\u5199\u4f60\u7684\u5904\u7406\u903b\u8f91 return $this->response()->success('Processed successfully.')->refresh(); } \u7136\u540e\u6309\u7167\u4e0b\u9762\u7684\u65b9\u6cd5\u5c06\u4e0a\u9762\u7684\u8868\u5355\u653e\u5230\u4f60\u7684\u9875\u9762\u4e2d\uff1a <?php use App\\Admin\\Forms\\Setting; use App\\Http\\Controllers\\Controller; use Dcat\\Admin\\Widgets\\Card; use Dcat\\Admin\\Layout\\Content; class UserController extends Controller { public function setting(Content $content) { return $content ->title('\u7f51\u7ad9\u8bbe\u7f6e') ->body(new Card(new Setting())); } } \u5f39\u51fa\u786e\u8ba4\u5f39\u7a97 \u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u5ffd\u7565 $this->confirm('title', 'content'); \u54cd\u5e94\u65b9\u6cd5 \u53c2\u8003 \u52a8\u4f5c\u4ee5\u53ca\u8868\u5355\u54cd\u5e94 \u7ae0\u8282 \u81ea\u5b9a\u4e49\u8868\u5355\u4fdd\u5b58\u7684\u540e\u7eed\u884c\u4e3a <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Widgets\\Form; use Symfony\\Component\\HttpFoundation\\Response; class Setting extends Form { ... /** * \u8bbe\u7f6e\u8868\u5355\u4fdd\u5b58\u6210\u529f\u540e\u6267\u884c\u7684JS * * @return string|void */ protected function savedScript() { return <<<JS // data \u4e3a\u63a5\u53e3\u8fd4\u56de\u6570\u636e if (! data.status) { Dcat.error(data.message); return false; } Dcat.success(data.message); if (data.redirect) { Dcat.reload(data.redirect) } // \u4e2d\u6b62\u540e\u7eed\u903b\u8f91\uff08\u9ed8\u8ba4\u903b\u8f91\uff09 return false; JS; } /** * \u8bbe\u7f6e\u8868\u5355\u4fdd\u5b58\u5931\u8d25\u540e\u6267\u884c\u7684JS * * @return string|void */ protected function errorScript() { return <<<JS var errorData = JSON.parse(response.responseText); if (errorData) { Dcat.error(errorData.message); } else { console.log('\u63d0\u4ea4\u51fa\u9519', response.responseText); } // \u7ec8\u6b62\u540e\u7eed\u903b\u8f91\u6267\u884c\uff08\u9ed8\u8ba4\u903b\u8f91\uff09 return false; JS; } } \u53d6\u6d88/\u542f\u7528\u8868\u5355\u7684Ajax\u63d0\u4ea4 \u9ed8\u8ba4\u8868\u5355\u63d0\u4ea4\u90fd\u4f7f\u7528Ajax\u8fdb\u884c\u63d0\u4ea4,\u901a\u8fc7\u6ce8\u5165\u7684 Form.js \u8fdb\u884c\u6d41\u7a0b\u63a7\u5236,\u5982\u679c\u9700\u8981\u539f\u751f\u8868\u5355\u884c\u4e3a,\u53ef\u4ee5\u7981\u7528\u6b64\u7279 $form->ajax(false); \u5e03\u5c40 column \u591a\u5217\u5e03\u5c40 <?php use Dcat\\Admin\\Widgets\\Form; class Setting extends Form { public function form() { $this->column(6, function () { $this->text('text1'); ... }); $this->column(6, function () { $this->text('text2'); ... }); } } tab \u9009\u9879\u5361\u5e03\u5c40 <?php use Dcat\\Admin\\Widgets\\Form; class Setting extends Form { public function form() { $this->tab('\u9009\u9879\u53611', function () { $this->text('text1'); ... }); $this->tab('\u9009\u9879\u53612', function () { $this->text('text2'); ... }); } } row \u591a\u884c\u5e03\u5c40 public function form() { $this->row(function ($row) { $row->width(3)->text('text1'); ... }); $this->row(function ($row) { $row->width(3)->text('text2'); ... }); } \u5728\u5f39\u7a97\u4e2d\u663e\u793a \u57fa\u672c\u7528\u6cd5 \u4f7f\u7528\u547d\u4ee4\u751f\u6210\u5de5\u5177\u8868\u5355 php artisan admin:form ResetPassword \uff0c\u7136\u540e\u4fee\u6539\u8868\u5355\u6587\u4ef6\u5982\u4e0b <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Widgets\\Form; class ResetPassword extends Form { // \u5904\u7406\u8bf7\u6c42 public function handle(array $input) { $password = $input['password'] ?? null; // \u903b\u8f91\u64cd\u4f5c return $this->response()->success('\u5bc6\u7801\u4fee\u6539\u6210\u529f'); } public function form() { $this->password('password')->required(); // \u5bc6\u7801\u786e\u8ba4\u8868\u5355 $this->password('password_confirm')->same('password'); } // \u8fd4\u56de\u8868\u5355\u6570\u636e\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 public function default() { return [ 'password' => '', 'password_confirm' => '', ]; } } \u4f7f\u7528 use App\\Admin\\Forms\\ResetPassword; use Dcat\\Admin\\Widgets\\Modal; $modal = Modal::make() ->lg() ->title('\u4fee\u6539\u5bc6\u7801') ->body(ResetPassword::make()) ->button('\u4fee\u6539\u5bc6\u7801'); \u5f02\u6b65\u52a0\u8f7d \u53ea\u9700\u8981\u8ba9 Form \u8868\u5355\u7c7b\u5b9e\u73b0 Dcat\\Admin\\Contracts\\LazyRenderable \u63a5\u53e3\u5373\u53ef\u652f\u6301\u5f02\u6b65\u6e32\u67d3\u529f\u80fd\uff0c\u4fee\u6539\u4e0a\u9762\u521b\u5efa\u7684\u5de5\u5177\u8868\u5355\u7c7b\u5982\u4e0b <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Widgets\\Form; use Dcat\\Admin\\Traits\\LazyWidget; use Dcat\\Admin\\Contracts\\LazyRenderable; class ResetPassword extends Form implements LazyRenderable { use LazyWidget; // \u5904\u7406\u8bf7\u6c42 public function handle(array $input) { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u53c2\u6570 $id = $this->payload['id'] ?? null; $password = $input['password'] ?? null; // \u903b\u8f91\u64cd\u4f5c return $this->response()->success('\u5bc6\u7801\u4fee\u6539\u6210\u529f'); } public function form() { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u53c2\u6570 $id = $this->payload['id'] ?? null; $this->password('password')->required(); // \u5bc6\u7801\u786e\u8ba4\u8868\u5355 $this->password('password_confirm')->same('password'); } // \u8fd4\u56de\u8868\u5355\u6570\u636e\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 public function default() { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u53c2\u6570 $id = $this->payload['id'] ?? null; return [ 'password' => '', 'password_confirm' => '', ]; } } \u4f7f\u7528\u4ee3\u7801\u4e0e\u4e0a\u9762\u57fa\u672c\u4e00\u81f4\uff0c\u5e76\u4e14\u6211\u4eec\u53ef\u4ee5\u7528 payload \u65b9\u6cd5\u5f80\u8868\u5355\u91cc\u9762\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 use App\\Admin\\Forms\\ResetPassword; use Dcat\\Admin\\Widgets\\Modal; $modal = Modal::make() ->lg() ->title('\u4fee\u6539\u5bc6\u7801') ->body(ResetPassword::make()->payload(['id' => '...'])) // \u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 ->button('\u4fee\u6539\u5bc6\u7801'); \u8868\u683c\u884c\u64cd\u4f5c\u5f39\u7a97 \u4e0b\u9762\u901a\u8fc7\u4e00\u4e2a\u6570\u636e\u8868\u683c\u4fee\u6539\u5bc6\u7801\u7684\u884c\u64cd\u4f5c\u529f\u80fd\u6765\u5c55\u793a\u5f39\u7a97\u7ed3\u5408\u5de5\u5177\u8868\u5355\u7684\u7528\u6cd5\uff1a \u4f7f\u7528\u547d\u4ee4\u751f\u6210\u5de5\u5177\u8868\u5355 php artisan admin:form ResetPassword \uff0c\u7136\u540e\u4fee\u6539\u8868\u5355\u6587\u4ef6\u5982\u4e0b <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Models\\Administrator; use Dcat\\Admin\\Traits\\LazyWidget; use Dcat\\Admin\\Widgets\\Form; use Dcat\\Admin\\Contracts\\LazyRenderable; class ResetPassword extends Form implements LazyRenderable { use LazyWidget; // \u4f7f\u7528\u5f02\u6b65\u52a0\u8f7d\u529f\u80fd // \u5904\u7406\u8bf7\u6c42 public function handle(array $input) { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u53c2\u6570 $id = $this->payload['id'] ?? null; // \u8868\u5355\u53c2\u6570 $password = $input['password'] ?? null; if (! $id) { return $this->response()->error('\u53c2\u6570\u9519\u8bef'); } $user = Administrator::query()->find($id); if (! $user) { return $this->response()->error('\u7528\u6237\u4e0d\u5b58\u5728'); } $user->update(['password' => bcrypt($password)]); return $this->response()->success('\u5bc6\u7801\u4fee\u6539\u6210\u529f'); } public function form() { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u53c2\u6570 //$id = $this->payload['id'] ?? null; $this->password('password')->required(); // \u5bc6\u7801\u786e\u8ba4\u8868\u5355 $this->password('password_confirm')->same('password'); } // \u8fd4\u56de\u8868\u5355\u6570\u636e\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 public function default() { return [ 'password' => '', 'password_confirm' => '', ]; } } \u7136\u540e\u8fd0\u884c php artisan admin:action \u547d\u4ee4\uff0c\u9009\u62e9\u9009\u9879 2 \uff0c\u751f\u6210\u6570\u636e\u8868\u683c\u884c\u64cd\u4f5c\u7c7b\uff0c\u5e76\u4fee\u6539\u5982\u4e0b\uff1a <?php namespace App\\Admin\\Actions\\Grid; use App\\Admin\\Forms\\ResetPassword as ResetPasswordForm; use Dcat\\Admin\\Widgets\\Modal; use Dcat\\Admin\\Grid\\RowAction; class ResetPassword extends RowAction { protected $title = '\u4fee\u6539\u5bc6\u7801'; public function render() { // \u5b9e\u4f8b\u5316\u8868\u5355\u7c7b\u5e76\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 $form = ResetPasswordForm::make()->payload(['id' => $this->getKey()]); return Modal::make() ->lg() ->title($this->title) ->body($form) ->button($this->title); } } \u4f7f\u7528 use App\\Admin\\Actions\\Grid\\ResetPassword; $grid->actions([new ResetPassword()]); \u6548\u679c \u8868\u683c\u6279\u91cf\u64cd\u4f5c\u5f39\u7a97 \u5982\u679c\u4f60\u60f3\u5728\u6279\u91cf\u64cd\u4f5c\u6309\u94ae\u4e2d\u4f7f\u7528\u8868\u5355\u5f39\u7a97\uff0c\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u4f8b\u5b50\uff1a \u8fd9\u91cc\u6211\u4eec\u4ecd\u7136\u6cbf\u7528\u4e0a\u9762\u7528\u5230\u7684 App\\Admin\\Forms\\ResetPassword \u8868\u5355\uff0c\u5e76\u4fee\u6539\u5982\u4e0b <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Models\\Administrator; use Dcat\\Admin\\Widgets\\Form; use Dcat\\Admin\\Traits\\LazyWidget; use Dcat\\Admin\\Contracts\\LazyRenderable; class ResetPassword extends Form implements LazyRenderable { use LazyWidget; // \u5904\u7406\u8bf7\u6c42 public function handle(array $input) { // id\u8f6c\u5316\u4e3a\u6570\u7ec4 $id = explode(',', $input['id'] ?? null); $password = $input['password'] ?? null; if (! $id) { return $this->response()->error('\u53c2\u6570\u9519\u8bef'); } $users = Administrator::query()->find($id); if ($users->isEmpty()) { return $this->response()->error('\u7528\u6237\u4e0d\u5b58\u5728'); } // \u8fd9\u91cc\u6539\u4e3a\u5faa\u73af\u6279\u91cf\u4fee\u6539 $users->each(function ($user) use ($password) { $user->update(['password' => bcrypt($password)]); }); return $this->response()->success('\u5bc6\u7801\u4fee\u6539\u6210\u529f'); } public function form() { $this->password('password')->required(); // \u5bc6\u7801\u786e\u8ba4\u8868\u5355 $this->password('password_confirm')->same('password'); // \u8bbe\u7f6e\u9690\u85cf\u8868\u5355\uff0c\u4f20\u9012\u7528\u6237id $this->hidden('id')->attribute('id', 'reset-password-id'); } // \u8fd4\u56de\u8868\u5355\u6570\u636e\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 public function default() { return [ 'password' => '', 'password_confirm' => '', ]; } } \u7136\u540e\u8fd0\u884c php artisan admin:action \u547d\u4ee4\uff0c\u9009\u62e9\u9009\u9879 1 \uff0c\u751f\u6210\u6570\u636e\u8868\u683c\u6279\u91cf\u64cd\u4f5c\u7c7b\uff0c\u5e76\u4fee\u6539\u5982\u4e0b\uff1a <?php namespace App\\Admin\\Actions\\Grid; use App\\Admin\\Forms\\ResetPassword as ResetPasswordForm; use Dcat\\Admin\\Widgets\\Modal; use Dcat\\Admin\\Grid\\BatchAction; class BatchResetPassword extends BatchAction { protected $title = '\u4fee\u6539\u5bc6\u7801'; public function render() { // \u5b9e\u4f8b\u5316\u8868\u5355\u7c7b $form = ResetPasswordForm::make(); return Modal::make() ->lg() ->title($this->title) ->body($form) // \u56e0\u4e3a\u6b64\u5904\u4f7f\u7528\u4e86\u8868\u5355\u5f02\u6b65\u52a0\u8f7d\u529f\u80fd\uff0c\u6240\u4ee5\u4e00\u5b9a\u8981\u7528 onLoad \u65b9\u6cd5 // \u5982\u679c\u662f\u975e\u5f02\u6b65\u65b9\u5f0f\u52a0\u8f7d\u8868\u5355\uff0c\u5219\u9700\u8981\u6539\u6210 onShow \u65b9\u6cd5 ->onLoad($this->getModalScript()) ->button($this->title); } protected function getModalScript() { // \u5f39\u7a97\u663e\u793a\u540e\u5f80\u9690\u85cf\u7684id\u8868\u5355\u4e2d\u5199\u5165\u6279\u91cf\u9009\u4e2d\u7684\u884cID return <<<JS // \u83b7\u53d6\u9009\u4e2d\u7684ID\u6570\u7ec4 var key = {$this->getSelectedKeysScript()} $('#reset-password-id').val(key); JS; } } \u4f7f\u7528 use App\\Admin\\Actions\\Grid\\BatchResetPassword; $grid->batchActions([new BatchResetPassword()]);","title":"\u5de5\u5177\u8868\u5355"},{"location":"2.x/widgets-form/#_1","text":"\u5de5\u5177\u8868\u5355( Dcat\\Admin\\Widgets\\Form )\u7528\u6765\u6784\u5efa\u8868\u5355\u548c\u5904\u7406\u63d0\u4ea4\u6570\u636e\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u72ec\u7acb\u5904\u7406\u6570\u636e\uff0c\u800c\u4e0d\u9700\u8981\u989d\u5916\u6ce8\u518c\u8def\u7531\u3002","title":"\u5de5\u5177\u8868\u5355"},{"location":"2.x/widgets-form/#_2","text":"\u7528\u547d\u4ee4 admin:form \u6765\u751f\u6210\u8868\u5355\u7c7b\u6587\u4ef6\uff1a php artisan admin:form Setting \u5c06\u4f1a\u751f\u6210\u8868\u5355\u6587\u4ef6 app/Admin/Forms/Setting.php <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Widgets\\Form; use Symfony\\Component\\HttpFoundation\\Response; class Setting extends Form { // \u5904\u7406\u8868\u5355\u63d0\u4ea4\u8bf7\u6c42 public function handle(array $input) { // dump($input); return $this->response()->success('Processed successfully.')->refresh(); } // \u6784\u5efa\u8868\u5355 public function form() { // \u5f39\u51fa\u786e\u8ba4\u5f39\u7a97 $this->confirm('\u60a8\u786e\u5b9a\u8981\u63d0\u4ea4\u8868\u5355\u5417', 'content'); $this->text('name')->required(); $this->email('email')->rules('email'); } /** * \u8fd4\u56de\u8868\u5355\u6570\u636e\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 * * @return array */ public function default() { return [ 'name' => 'John Doe', 'email' => 'John.Doe@gmail.com', ]; } } \u5728\u4e0a\u9762\u7684\u8868\u5355\u7c7b\u91cc\u9762\uff0c\u5728 form \u65b9\u6cd5\u4e2d\u6784\u5efa\u8868\u5355\u9879\uff0c\u4f7f\u7528\u65b9\u6cd5\u548c \u6570\u636e\u8868\u5355 \u4e00\u81f4\uff0c default \u65b9\u6cd5\u7528\u6765\u7ed9\u8fd9\u4e2a\u8868\u5355\u9879\u8bbe\u7f6e\u9ed8\u8ba4\u6570\u636e\u3002 \u5728\u9875\u9762\u4e2d\u586b\u5165\u6570\u636e\u63d0\u4ea4\u8868\u5355\u4e4b\u540e\uff0c\u8bf7\u6c42\u4f1a\u8fdb\u5165\u5230 handle \u65b9\u6cd5\u4e2d\uff0c\u5728\u8fd9\u91cc\u53ef\u4ee5\u52a0\u5165\u4f60\u7684\u6570\u636e\u5904\u7406\u903b\u8f91\uff0c\u5904\u7406\u5b8c\u6210\u4e4b\u540e\u53ef\u4ee5\u901a\u8fc7 success \u6216 error \u65b9\u6cd5\u54cd\u5e94\u6570\u636e\u5230\u524d\u7aef\uff1a public function handle(array $input) { // $input\u662f\u4f60\u63a5\u6536\u5230\u7684\u8868\u5355\u6570\u636e // \u5728\u8fd9\u91cc\u53ef\u4ee5\u5199\u4f60\u7684\u5904\u7406\u903b\u8f91 return $this->response()->success('Processed successfully.')->refresh(); } \u7136\u540e\u6309\u7167\u4e0b\u9762\u7684\u65b9\u6cd5\u5c06\u4e0a\u9762\u7684\u8868\u5355\u653e\u5230\u4f60\u7684\u9875\u9762\u4e2d\uff1a <?php use App\\Admin\\Forms\\Setting; use App\\Http\\Controllers\\Controller; use Dcat\\Admin\\Widgets\\Card; use Dcat\\Admin\\Layout\\Content; class UserController extends Controller { public function setting(Content $content) { return $content ->title('\u7f51\u7ad9\u8bbe\u7f6e') ->body(new Card(new Setting())); } }","title":"\u57fa\u672c\u4f7f\u7528"},{"location":"2.x/widgets-form/#_3","text":"\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u5ffd\u7565 $this->confirm('title', 'content');","title":"\u5f39\u51fa\u786e\u8ba4\u5f39\u7a97"},{"location":"2.x/widgets-form/#_4","text":"\u53c2\u8003 \u52a8\u4f5c\u4ee5\u53ca\u8868\u5355\u54cd\u5e94 \u7ae0\u8282","title":"\u54cd\u5e94\u65b9\u6cd5"},{"location":"2.x/widgets-form/#_5","text":"<?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Widgets\\Form; use Symfony\\Component\\HttpFoundation\\Response; class Setting extends Form { ... /** * \u8bbe\u7f6e\u8868\u5355\u4fdd\u5b58\u6210\u529f\u540e\u6267\u884c\u7684JS * * @return string|void */ protected function savedScript() { return <<<JS // data \u4e3a\u63a5\u53e3\u8fd4\u56de\u6570\u636e if (! data.status) { Dcat.error(data.message); return false; } Dcat.success(data.message); if (data.redirect) { Dcat.reload(data.redirect) } // \u4e2d\u6b62\u540e\u7eed\u903b\u8f91\uff08\u9ed8\u8ba4\u903b\u8f91\uff09 return false; JS; } /** * \u8bbe\u7f6e\u8868\u5355\u4fdd\u5b58\u5931\u8d25\u540e\u6267\u884c\u7684JS * * @return string|void */ protected function errorScript() { return <<<JS var errorData = JSON.parse(response.responseText); if (errorData) { Dcat.error(errorData.message); } else { console.log('\u63d0\u4ea4\u51fa\u9519', response.responseText); } // \u7ec8\u6b62\u540e\u7eed\u903b\u8f91\u6267\u884c\uff08\u9ed8\u8ba4\u903b\u8f91\uff09 return false; JS; } }","title":"\u81ea\u5b9a\u4e49\u8868\u5355\u4fdd\u5b58\u7684\u540e\u7eed\u884c\u4e3a"},{"location":"2.x/widgets-form/#ajax","text":"\u9ed8\u8ba4\u8868\u5355\u63d0\u4ea4\u90fd\u4f7f\u7528Ajax\u8fdb\u884c\u63d0\u4ea4,\u901a\u8fc7\u6ce8\u5165\u7684 Form.js \u8fdb\u884c\u6d41\u7a0b\u63a7\u5236,\u5982\u679c\u9700\u8981\u539f\u751f\u8868\u5355\u884c\u4e3a,\u53ef\u4ee5\u7981\u7528\u6b64\u7279 $form->ajax(false);","title":"\u53d6\u6d88/\u542f\u7528\u8868\u5355\u7684Ajax\u63d0\u4ea4"},{"location":"2.x/widgets-form/#_6","text":"column \u591a\u5217\u5e03\u5c40 <?php use Dcat\\Admin\\Widgets\\Form; class Setting extends Form { public function form() { $this->column(6, function () { $this->text('text1'); ... }); $this->column(6, function () { $this->text('text2'); ... }); } } tab \u9009\u9879\u5361\u5e03\u5c40 <?php use Dcat\\Admin\\Widgets\\Form; class Setting extends Form { public function form() { $this->tab('\u9009\u9879\u53611', function () { $this->text('text1'); ... }); $this->tab('\u9009\u9879\u53612', function () { $this->text('text2'); ... }); } } row \u591a\u884c\u5e03\u5c40 public function form() { $this->row(function ($row) { $row->width(3)->text('text1'); ... }); $this->row(function ($row) { $row->width(3)->text('text2'); ... }); }","title":"\u5e03\u5c40"},{"location":"2.x/widgets-form/#_7","text":"","title":"\u5728\u5f39\u7a97\u4e2d\u663e\u793a"},{"location":"2.x/widgets-form/#_8","text":"\u4f7f\u7528\u547d\u4ee4\u751f\u6210\u5de5\u5177\u8868\u5355 php artisan admin:form ResetPassword \uff0c\u7136\u540e\u4fee\u6539\u8868\u5355\u6587\u4ef6\u5982\u4e0b <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Widgets\\Form; class ResetPassword extends Form { // \u5904\u7406\u8bf7\u6c42 public function handle(array $input) { $password = $input['password'] ?? null; // \u903b\u8f91\u64cd\u4f5c return $this->response()->success('\u5bc6\u7801\u4fee\u6539\u6210\u529f'); } public function form() { $this->password('password')->required(); // \u5bc6\u7801\u786e\u8ba4\u8868\u5355 $this->password('password_confirm')->same('password'); } // \u8fd4\u56de\u8868\u5355\u6570\u636e\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 public function default() { return [ 'password' => '', 'password_confirm' => '', ]; } } \u4f7f\u7528 use App\\Admin\\Forms\\ResetPassword; use Dcat\\Admin\\Widgets\\Modal; $modal = Modal::make() ->lg() ->title('\u4fee\u6539\u5bc6\u7801') ->body(ResetPassword::make()) ->button('\u4fee\u6539\u5bc6\u7801');","title":"\u57fa\u672c\u7528\u6cd5"},{"location":"2.x/widgets-form/#_9","text":"\u53ea\u9700\u8981\u8ba9 Form \u8868\u5355\u7c7b\u5b9e\u73b0 Dcat\\Admin\\Contracts\\LazyRenderable \u63a5\u53e3\u5373\u53ef\u652f\u6301\u5f02\u6b65\u6e32\u67d3\u529f\u80fd\uff0c\u4fee\u6539\u4e0a\u9762\u521b\u5efa\u7684\u5de5\u5177\u8868\u5355\u7c7b\u5982\u4e0b <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Widgets\\Form; use Dcat\\Admin\\Traits\\LazyWidget; use Dcat\\Admin\\Contracts\\LazyRenderable; class ResetPassword extends Form implements LazyRenderable { use LazyWidget; // \u5904\u7406\u8bf7\u6c42 public function handle(array $input) { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u53c2\u6570 $id = $this->payload['id'] ?? null; $password = $input['password'] ?? null; // \u903b\u8f91\u64cd\u4f5c return $this->response()->success('\u5bc6\u7801\u4fee\u6539\u6210\u529f'); } public function form() { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u53c2\u6570 $id = $this->payload['id'] ?? null; $this->password('password')->required(); // \u5bc6\u7801\u786e\u8ba4\u8868\u5355 $this->password('password_confirm')->same('password'); } // \u8fd4\u56de\u8868\u5355\u6570\u636e\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 public function default() { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u53c2\u6570 $id = $this->payload['id'] ?? null; return [ 'password' => '', 'password_confirm' => '', ]; } } \u4f7f\u7528\u4ee3\u7801\u4e0e\u4e0a\u9762\u57fa\u672c\u4e00\u81f4\uff0c\u5e76\u4e14\u6211\u4eec\u53ef\u4ee5\u7528 payload \u65b9\u6cd5\u5f80\u8868\u5355\u91cc\u9762\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 use App\\Admin\\Forms\\ResetPassword; use Dcat\\Admin\\Widgets\\Modal; $modal = Modal::make() ->lg() ->title('\u4fee\u6539\u5bc6\u7801') ->body(ResetPassword::make()->payload(['id' => '...'])) // \u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 ->button('\u4fee\u6539\u5bc6\u7801');","title":"\u5f02\u6b65\u52a0\u8f7d"},{"location":"2.x/widgets-form/#_10","text":"\u4e0b\u9762\u901a\u8fc7\u4e00\u4e2a\u6570\u636e\u8868\u683c\u4fee\u6539\u5bc6\u7801\u7684\u884c\u64cd\u4f5c\u529f\u80fd\u6765\u5c55\u793a\u5f39\u7a97\u7ed3\u5408\u5de5\u5177\u8868\u5355\u7684\u7528\u6cd5\uff1a \u4f7f\u7528\u547d\u4ee4\u751f\u6210\u5de5\u5177\u8868\u5355 php artisan admin:form ResetPassword \uff0c\u7136\u540e\u4fee\u6539\u8868\u5355\u6587\u4ef6\u5982\u4e0b <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Models\\Administrator; use Dcat\\Admin\\Traits\\LazyWidget; use Dcat\\Admin\\Widgets\\Form; use Dcat\\Admin\\Contracts\\LazyRenderable; class ResetPassword extends Form implements LazyRenderable { use LazyWidget; // \u4f7f\u7528\u5f02\u6b65\u52a0\u8f7d\u529f\u80fd // \u5904\u7406\u8bf7\u6c42 public function handle(array $input) { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u53c2\u6570 $id = $this->payload['id'] ?? null; // \u8868\u5355\u53c2\u6570 $password = $input['password'] ?? null; if (! $id) { return $this->response()->error('\u53c2\u6570\u9519\u8bef'); } $user = Administrator::query()->find($id); if (! $user) { return $this->response()->error('\u7528\u6237\u4e0d\u5b58\u5728'); } $user->update(['password' => bcrypt($password)]); return $this->response()->success('\u5bc6\u7801\u4fee\u6539\u6210\u529f'); } public function form() { // \u83b7\u53d6\u5916\u90e8\u4f20\u9012\u53c2\u6570 //$id = $this->payload['id'] ?? null; $this->password('password')->required(); // \u5bc6\u7801\u786e\u8ba4\u8868\u5355 $this->password('password_confirm')->same('password'); } // \u8fd4\u56de\u8868\u5355\u6570\u636e\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 public function default() { return [ 'password' => '', 'password_confirm' => '', ]; } } \u7136\u540e\u8fd0\u884c php artisan admin:action \u547d\u4ee4\uff0c\u9009\u62e9\u9009\u9879 2 \uff0c\u751f\u6210\u6570\u636e\u8868\u683c\u884c\u64cd\u4f5c\u7c7b\uff0c\u5e76\u4fee\u6539\u5982\u4e0b\uff1a <?php namespace App\\Admin\\Actions\\Grid; use App\\Admin\\Forms\\ResetPassword as ResetPasswordForm; use Dcat\\Admin\\Widgets\\Modal; use Dcat\\Admin\\Grid\\RowAction; class ResetPassword extends RowAction { protected $title = '\u4fee\u6539\u5bc6\u7801'; public function render() { // \u5b9e\u4f8b\u5316\u8868\u5355\u7c7b\u5e76\u4f20\u9012\u81ea\u5b9a\u4e49\u53c2\u6570 $form = ResetPasswordForm::make()->payload(['id' => $this->getKey()]); return Modal::make() ->lg() ->title($this->title) ->body($form) ->button($this->title); } } \u4f7f\u7528 use App\\Admin\\Actions\\Grid\\ResetPassword; $grid->actions([new ResetPassword()]); \u6548\u679c","title":"\u8868\u683c\u884c\u64cd\u4f5c\u5f39\u7a97"},{"location":"2.x/widgets-form/#_11","text":"\u5982\u679c\u4f60\u60f3\u5728\u6279\u91cf\u64cd\u4f5c\u6309\u94ae\u4e2d\u4f7f\u7528\u8868\u5355\u5f39\u7a97\uff0c\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u4f8b\u5b50\uff1a \u8fd9\u91cc\u6211\u4eec\u4ecd\u7136\u6cbf\u7528\u4e0a\u9762\u7528\u5230\u7684 App\\Admin\\Forms\\ResetPassword \u8868\u5355\uff0c\u5e76\u4fee\u6539\u5982\u4e0b <?php namespace App\\Admin\\Forms; use Dcat\\Admin\\Models\\Administrator; use Dcat\\Admin\\Widgets\\Form; use Dcat\\Admin\\Traits\\LazyWidget; use Dcat\\Admin\\Contracts\\LazyRenderable; class ResetPassword extends Form implements LazyRenderable { use LazyWidget; // \u5904\u7406\u8bf7\u6c42 public function handle(array $input) { // id\u8f6c\u5316\u4e3a\u6570\u7ec4 $id = explode(',', $input['id'] ?? null); $password = $input['password'] ?? null; if (! $id) { return $this->response()->error('\u53c2\u6570\u9519\u8bef'); } $users = Administrator::query()->find($id); if ($users->isEmpty()) { return $this->response()->error('\u7528\u6237\u4e0d\u5b58\u5728'); } // \u8fd9\u91cc\u6539\u4e3a\u5faa\u73af\u6279\u91cf\u4fee\u6539 $users->each(function ($user) use ($password) { $user->update(['password' => bcrypt($password)]); }); return $this->response()->success('\u5bc6\u7801\u4fee\u6539\u6210\u529f'); } public function form() { $this->password('password')->required(); // \u5bc6\u7801\u786e\u8ba4\u8868\u5355 $this->password('password_confirm')->same('password'); // \u8bbe\u7f6e\u9690\u85cf\u8868\u5355\uff0c\u4f20\u9012\u7528\u6237id $this->hidden('id')->attribute('id', 'reset-password-id'); } // \u8fd4\u56de\u8868\u5355\u6570\u636e\uff0c\u5982\u4e0d\u9700\u8981\u53ef\u4ee5\u5220\u9664\u6b64\u65b9\u6cd5 public function default() { return [ 'password' => '', 'password_confirm' => '', ]; } } \u7136\u540e\u8fd0\u884c php artisan admin:action \u547d\u4ee4\uff0c\u9009\u62e9\u9009\u9879 1 \uff0c\u751f\u6210\u6570\u636e\u8868\u683c\u6279\u91cf\u64cd\u4f5c\u7c7b\uff0c\u5e76\u4fee\u6539\u5982\u4e0b\uff1a <?php namespace App\\Admin\\Actions\\Grid; use App\\Admin\\Forms\\ResetPassword as ResetPasswordForm; use Dcat\\Admin\\Widgets\\Modal; use Dcat\\Admin\\Grid\\BatchAction; class BatchResetPassword extends BatchAction { protected $title = '\u4fee\u6539\u5bc6\u7801'; public function render() { // \u5b9e\u4f8b\u5316\u8868\u5355\u7c7b $form = ResetPasswordForm::make(); return Modal::make() ->lg() ->title($this->title) ->body($form) // \u56e0\u4e3a\u6b64\u5904\u4f7f\u7528\u4e86\u8868\u5355\u5f02\u6b65\u52a0\u8f7d\u529f\u80fd\uff0c\u6240\u4ee5\u4e00\u5b9a\u8981\u7528 onLoad \u65b9\u6cd5 // \u5982\u679c\u662f\u975e\u5f02\u6b65\u65b9\u5f0f\u52a0\u8f7d\u8868\u5355\uff0c\u5219\u9700\u8981\u6539\u6210 onShow \u65b9\u6cd5 ->onLoad($this->getModalScript()) ->button($this->title); } protected function getModalScript() { // \u5f39\u7a97\u663e\u793a\u540e\u5f80\u9690\u85cf\u7684id\u8868\u5355\u4e2d\u5199\u5165\u6279\u91cf\u9009\u4e2d\u7684\u884cID return <<<JS // \u83b7\u53d6\u9009\u4e2d\u7684ID\u6570\u7ec4 var key = {$this->getSelectedKeysScript()} $('#reset-password-id').val(key); JS; } } \u4f7f\u7528 use App\\Admin\\Actions\\Grid\\BatchResetPassword; $grid->batchActions([new BatchResetPassword()]);","title":"\u8868\u683c\u6279\u91cf\u64cd\u4f5c\u5f39\u7a97"},{"location":"2.x/widgets-js/","text":"","title":"Widgets js"},{"location":"2.x/widgets-markdown/","text":"Markdown \u57fa\u672c\u7528\u6cd5 <?php use Dcat\\Admin\\Widgets\\Markdown; use Dcat\\Admin\\Widgets\\Card; use Dcat\\Admin\\Layout\\Content; class MyController { public function index(Content $content) { return $content->body(Card::make( Markdown::make('\u4f60\u7684markdown\u672c\u6587\u5185\u5bb9') )); } }","title":"Markdown"},{"location":"2.x/widgets-markdown/#markdown","text":"\u57fa\u672c\u7528\u6cd5 <?php use Dcat\\Admin\\Widgets\\Markdown; use Dcat\\Admin\\Widgets\\Card; use Dcat\\Admin\\Layout\\Content; class MyController { public function index(Content $content) { return $content->body(Card::make( Markdown::make('\u4f60\u7684markdown\u672c\u6587\u5185\u5bb9') )); } }","title":"Markdown"},{"location":"2.x/widgets-modal/","text":"\u6a21\u6001\u7a97 (Modal) \u57fa\u672c\u4f7f\u7528 use Dcat\\Admin\\Widgets\\Modal; $modal = Modal::make() ->lg() ->title('\u6807\u9898') ->body(view(...)) ->button('<button class=\"btn btn-primary\">\u70b9\u51fb\u6253\u5f00\u5f39\u7a97</button>'); return view(..., ['modal' => $modal]); \u529f\u80fd \u6807\u9898 (title) \u8bbe\u7f6e\u5f39\u7a97\u6807\u9898 $modal->title('\u6807\u9898'); \u5185\u5bb9 (body) \u8bbe\u7f6e\u5f39\u7a97\u5185\u5bb9\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff0c\u5141\u8bb8\u4f20\u5165 string \u3001 Cloure \u3001 Illuminate\\Contracts\\Support\\Renderable \u4ee5\u53ca Dcat\\Admin\\Contracts\\LazyRenderable \u7c7b\u578b\u503c // \u4f20\u5165\u5b57\u7b26\u4e32 $modal->body('\u5b57\u7b26\u4e32'); // \u4f20\u5165\u95ed\u5305\uff0c\u6ce8\u610f\u95ed\u5305\u5fc5\u987b\u8fd4\u56de\u5b57\u7b26\u4e32\u7c7b\u578b\u503c\u6216\u7a7a\u503c $modal->body(function () { return view(...)->render(); }); // \u4f20\u5165 Renderable use Dcat\\Admin\\Widgets\\ $modal->body(view(...)); $modal->body(Card::make()); // \u4f20\u5165 LazyRenderable $modal->body(PostTable::make()); \u5e95\u90e8\u5185\u5bb9 (footer) \u8bbe\u7f6e\u5f39\u7a97\u5e95\u90e8\u5185\u5bb9\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff0c\u5141\u8bb8\u4f20\u5165 string \u3001 Cloure \u3001 Illuminate\\Contracts\\Support\\Renderable \u4ee5\u53ca Dcat\\Admin\\Contracts\\LazyRenderable \u7c7b\u578b\u503c\uff0c\u7528\u6cd5\u540c\u4e0a $modal->footer('\u5b57\u7b26\u4e32'); $modal->footer(view(...)); \u5c3a\u5bf8 \u9ed8\u8ba4 500px // 800px $modal->lg(); // 1140px $modal->xl(); \u6309\u94ae (button) \u8bbe\u7f6e\u6309\u94ae \u4e8b\u4ef6\u76d1\u542c \u652f\u6301\u4e8b\u4ef6 onShow \u5f39\u7a97\u663e\u793a\u4e8b\u4ef6 onShown \u5f39\u7a97\u5df2\u663e\u793a\u4e8b\u4ef6 onHide \u5f39\u7a97\u9690\u85cf\u4e8b\u4ef6 onHidden \u5f39\u7a97\u5df2\u9690\u85cf\u4e8b\u4ef6 \u7528\u6cd5\u793a\u4f8b use Dcat\\Admin\\Admin; $modal->onShow( <<<JS console.log('\u663e\u793a\u5f39\u7a97', target, $(this)); JS ); $modal->onHide( <<<JS console.log('\u9690\u85cf\u5f39\u7a97', target, $(this)); JS ); \u5782\u76f4\u5c45\u4e2d (centered) \u8bbe\u7f6e\u5f39\u7a97\u5782\u76f4\u5c45\u4e2d $modal = Modal::make() ->xl() ->centered() // \u8bbe\u7f6e\u5f39\u7a97\u5782\u76f4\u5c45\u4e2d ->title(...) ->body(...); \u5185\u5bb9\u53ef\u6eda\u52a8 (scrollable) \u8bbe\u7f6e\u5f39\u7a97\u5185\u5bb9\u53ef\u6eda\u52a8 $modal = Modal::make() ->xl() ->scrollable() // \u8bbe\u7f6e\u5f39\u7a97\u5185\u5bb9\u53ef\u6eda\u52a8 ->title(...) ->body(...); \u8868\u5355\u5f39\u7a97 \u53c2\u8003\u6587\u6863 \u5de5\u5177\u8868\u5355 - \u5f39\u7a97","title":"\u6a21\u6001\u7a97 (Modal)"},{"location":"2.x/widgets-modal/#modal","text":"\u57fa\u672c\u4f7f\u7528 use Dcat\\Admin\\Widgets\\Modal; $modal = Modal::make() ->lg() ->title('\u6807\u9898') ->body(view(...)) ->button('<button class=\"btn btn-primary\">\u70b9\u51fb\u6253\u5f00\u5f39\u7a97</button>'); return view(..., ['modal' => $modal]);","title":"\u6a21\u6001\u7a97 (Modal)"},{"location":"2.x/widgets-modal/#_1","text":"","title":"\u529f\u80fd"},{"location":"2.x/widgets-modal/#title","text":"\u8bbe\u7f6e\u5f39\u7a97\u6807\u9898 $modal->title('\u6807\u9898');","title":"\u6807\u9898 (title)"},{"location":"2.x/widgets-modal/#body","text":"\u8bbe\u7f6e\u5f39\u7a97\u5185\u5bb9\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff0c\u5141\u8bb8\u4f20\u5165 string \u3001 Cloure \u3001 Illuminate\\Contracts\\Support\\Renderable \u4ee5\u53ca Dcat\\Admin\\Contracts\\LazyRenderable \u7c7b\u578b\u503c // \u4f20\u5165\u5b57\u7b26\u4e32 $modal->body('\u5b57\u7b26\u4e32'); // \u4f20\u5165\u95ed\u5305\uff0c\u6ce8\u610f\u95ed\u5305\u5fc5\u987b\u8fd4\u56de\u5b57\u7b26\u4e32\u7c7b\u578b\u503c\u6216\u7a7a\u503c $modal->body(function () { return view(...)->render(); }); // \u4f20\u5165 Renderable use Dcat\\Admin\\Widgets\\ $modal->body(view(...)); $modal->body(Card::make()); // \u4f20\u5165 LazyRenderable $modal->body(PostTable::make());","title":"\u5185\u5bb9 (body)"},{"location":"2.x/widgets-modal/#footer","text":"\u8bbe\u7f6e\u5f39\u7a97\u5e95\u90e8\u5185\u5bb9\uff0c\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff0c\u5141\u8bb8\u4f20\u5165 string \u3001 Cloure \u3001 Illuminate\\Contracts\\Support\\Renderable \u4ee5\u53ca Dcat\\Admin\\Contracts\\LazyRenderable \u7c7b\u578b\u503c\uff0c\u7528\u6cd5\u540c\u4e0a $modal->footer('\u5b57\u7b26\u4e32'); $modal->footer(view(...));","title":"\u5e95\u90e8\u5185\u5bb9 (footer)"},{"location":"2.x/widgets-modal/#_2","text":"\u9ed8\u8ba4 500px // 800px $modal->lg(); // 1140px $modal->xl();","title":"\u5c3a\u5bf8"},{"location":"2.x/widgets-modal/#button","text":"\u8bbe\u7f6e\u6309\u94ae","title":"\u6309\u94ae (button)"},{"location":"2.x/widgets-modal/#_3","text":"\u652f\u6301\u4e8b\u4ef6 onShow \u5f39\u7a97\u663e\u793a\u4e8b\u4ef6 onShown \u5f39\u7a97\u5df2\u663e\u793a\u4e8b\u4ef6 onHide \u5f39\u7a97\u9690\u85cf\u4e8b\u4ef6 onHidden \u5f39\u7a97\u5df2\u9690\u85cf\u4e8b\u4ef6 \u7528\u6cd5\u793a\u4f8b use Dcat\\Admin\\Admin; $modal->onShow( <<<JS console.log('\u663e\u793a\u5f39\u7a97', target, $(this)); JS ); $modal->onHide( <<<JS console.log('\u9690\u85cf\u5f39\u7a97', target, $(this)); JS );","title":"\u4e8b\u4ef6\u76d1\u542c"},{"location":"2.x/widgets-modal/#centered","text":"\u8bbe\u7f6e\u5f39\u7a97\u5782\u76f4\u5c45\u4e2d $modal = Modal::make() ->xl() ->centered() // \u8bbe\u7f6e\u5f39\u7a97\u5782\u76f4\u5c45\u4e2d ->title(...) ->body(...);","title":"\u5782\u76f4\u5c45\u4e2d (centered)"},{"location":"2.x/widgets-modal/#scrollable","text":"\u8bbe\u7f6e\u5f39\u7a97\u5185\u5bb9\u53ef\u6eda\u52a8 $modal = Modal::make() ->xl() ->scrollable() // \u8bbe\u7f6e\u5f39\u7a97\u5185\u5bb9\u53ef\u6eda\u52a8 ->title(...) ->body(...);","title":"\u5185\u5bb9\u53ef\u6eda\u52a8 (scrollable)"},{"location":"2.x/widgets-modal/#_4","text":"\u53c2\u8003\u6587\u6863 \u5de5\u5177\u8868\u5355 - \u5f39\u7a97","title":"\u8868\u5355\u5f39\u7a97"},{"location":"2.x/widgets-navbar/","text":"","title":"Widgets navbar"},{"location":"2.x/widgets-tab/","text":"\u9009\u9879\u5361 \u901a\u8fc7 Dcat\\Admin\\Widgets\\Tab \u65b9\u6cd5\u53ef\u4ee5\u5feb\u901f\u6784\u5efa tab \u9009\u9879\u5361\u3002 \u57fa\u672c\u7528\u6cd5 <?php use Dcat\\Admin\\Widgets\\Tab; $tab = Tab::make(); // \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u9009\u9879\u5361\u6807\u9898\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u5185\u5bb9\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u662f\u662f\u5426\u9009\u4e2d $tab->add('\u9009\u9879\u53611', view('...'), true); $tab->add('\u9009\u98792', 'html'); // \u6dfb\u52a0\u9009\u9879\u5361\u94fe\u63a5 $tab->addLink('\u8df3\u8f6c\u94fe\u63a5', 'http://xxx'); return $content->body($tab->withCard()); \u5207\u6362\u663e\u793a\u6a21\u5f0f // \u4e3b\u9898\u8272 $tab = Tab::make()->theme(); \u5782\u76f4 (vertical) \u901a\u8fc7 vertical \u65b9\u6cd5\u53ef\u4ee5\u8ba9\u9009\u9879\u5361\u6807\u9898\u680f\u5448\u5782\u76f4\u6392\u5217\u3002 <?php use Dcat\\Admin\\Widgets\\Tab; $tab = Tab::make(); $tab->add('\u9009\u9879\u53611', view('...')); $tab->add('\u9009\u98792', 'html'); return $content->body($tab->withCard()->vertical());","title":"\u9009\u9879\u5361"},{"location":"2.x/widgets-tab/#_1","text":"\u901a\u8fc7 Dcat\\Admin\\Widgets\\Tab \u65b9\u6cd5\u53ef\u4ee5\u5feb\u901f\u6784\u5efa tab \u9009\u9879\u5361\u3002","title":"\u9009\u9879\u5361"},{"location":"2.x/widgets-tab/#_2","text":"<?php use Dcat\\Admin\\Widgets\\Tab; $tab = Tab::make(); // \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u9009\u9879\u5361\u6807\u9898\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u5185\u5bb9\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u662f\u662f\u5426\u9009\u4e2d $tab->add('\u9009\u9879\u53611', view('...'), true); $tab->add('\u9009\u98792', 'html'); // \u6dfb\u52a0\u9009\u9879\u5361\u94fe\u63a5 $tab->addLink('\u8df3\u8f6c\u94fe\u63a5', 'http://xxx'); return $content->body($tab->withCard());","title":"\u57fa\u672c\u7528\u6cd5"},{"location":"2.x/widgets-tab/#_3","text":"// \u4e3b\u9898\u8272 $tab = Tab::make()->theme();","title":"\u5207\u6362\u663e\u793a\u6a21\u5f0f"},{"location":"2.x/widgets-tab/#vertical","text":"\u901a\u8fc7 vertical \u65b9\u6cd5\u53ef\u4ee5\u8ba9\u9009\u9879\u5361\u6807\u9898\u680f\u5448\u5782\u76f4\u6392\u5217\u3002 <?php use Dcat\\Admin\\Widgets\\Tab; $tab = Tab::make(); $tab->add('\u9009\u9879\u53611', view('...')); $tab->add('\u9009\u98792', 'html'); return $content->body($tab->withCard()->vertical());","title":"\u5782\u76f4 (vertical)"},{"location":"2.x/widgets-table/","text":"","title":"Widgets table"},{"location":"2.x/widgets-tooltip/","text":"\u63d0\u793a\u7a97 \u57fa\u672c\u7528\u6cd5 <?php use Dcat\\Admin\\Widgets\\Tooltip; use Dcat\\Admin\\Widgets\\Card; use Dcat\\Admin\\Layout\\Content; class MyController { public function index(Content $content) { Tooltip::make('.icon-help-circle')->title('\u6211\u662f\u63d0\u793a\u4fe1\u606f'); return $content->body(new Card( <<<HTML <div class=\"p4\"> <i class=\"feather icon-help-circle\"></i> </div> HTML )); } } \u6548\u679c","title":"\u63d0\u793a\u7a97"},{"location":"2.x/widgets-tooltip/#_1","text":"\u57fa\u672c\u7528\u6cd5 <?php use Dcat\\Admin\\Widgets\\Tooltip; use Dcat\\Admin\\Widgets\\Card; use Dcat\\Admin\\Layout\\Content; class MyController { public function index(Content $content) { Tooltip::make('.icon-help-circle')->title('\u6211\u662f\u63d0\u793a\u4fe1\u606f'); return $content->body(new Card( <<<HTML <div class=\"p4\"> <i class=\"feather icon-help-circle\"></i> </div> HTML )); } } \u6548\u679c","title":"\u63d0\u793a\u7a97"}]}