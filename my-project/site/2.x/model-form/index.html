<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>表单基本使用 - My Docs</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">My Docs</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Welcome to MkDocs</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">2.x <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../" class="dropdown-item">dcat-admin</a>
</li>
                                    
<li>
    <a href="../1-x-upgrade/" class="dropdown-item">v1.x版本升级指南</a>
</li>
                                    
<li>
    <a href="../LICENSE/" class="dropdown-item">LICENSE</a>
</li>
                                    
<li>
    <a href="../action-form/" class="dropdown-item">数据表单动作</a>
</li>
                                    
<li>
    <a href="../action-grid/" class="dropdown-item">数据表格动作</a>
</li>
                                    
<li>
    <a href="../action-show/" class="dropdown-item">数据详情动作</a>
</li>
                                    
<li>
    <a href="../action-tree/" class="dropdown-item">模型树动作</a>
</li>
                                    
<li>
    <a href="../action/" class="dropdown-item">动作基本使用</a>
</li>
                                    
<li>
    <a href="../assets/" class="dropdown-item">静态资源加载</a>
</li>
                                    
<li>
    <a href="../beta-change-log/" class="dropdown-item">BETA版本更新日志</a>
</li>
                                    
<li>
    <a href="../change-log/" class="dropdown-item">Change log</a>
</li>
                                    
<li>
    <a href="../custom-authentication/" class="dropdown-item">自定义登陆</a>
</li>
                                    
<li>
    <a href="../custom-chart/" class="dropdown-item">自定义图表</a>
</li>
                                    
<li>
    <a href="../custom-navbar/" class="dropdown-item">自定义头部导航条</a>
</li>
                                    
<li>
    <a href="../custom-page/" class="dropdown-item">视图与自定义页面</a>
</li>
                                    
<li>
    <a href="../documentation/" class="dropdown-item">Documentation</a>
</li>
                                    
<li>
    <a href="../extend/" class="dropdown-item">开发扩展</a>
</li>
                                    
<li>
    <a href="../extension-dev/" class="dropdown-item">开发扩展</a>
</li>
                                    
<li>
    <a href="../extension-f/" class="dropdown-item">扩展基本使用</a>
</li>
                                    
<li>
    <a href="../extension-helpers/" class="dropdown-item">开发工具</a>
</li>
                                    
<li>
    <a href="../extension-theme/" class="dropdown-item">主题开发</a>
</li>
                                    
<li>
    <a href="../extension-upgrade/" class="dropdown-item">扩展版本与升级</a>
</li>
                                    
<li>
    <a href="../extensions/" class="dropdown-item">扩展</a>
</li>
                                    
<li>
    <a href="../function/" class="dropdown-item">帮助函数</a>
</li>
                                    
<li>
    <a href="../helpers/" class="dropdown-item">开发工具</a>
</li>
                                    
<li>
    <a href="../installation/" class="dropdown-item">安装</a>
</li>
                                    
<li>
    <a href="../introduction/" class="dropdown-item">Dcat Admin</a>
</li>
                                    
<li>
    <a href="../js/" class="dropdown-item">JS组件</a>
</li>
                                    
<li>
    <a href="../laravel-octane/" class="dropdown-item">Laravel Octane</a>
</li>
                                    
<li>
    <a href="../lazy/" class="dropdown-item">异步加载基本使用</a>
</li>
                                    
<li>
    <a href="../menu/" class="dropdown-item">菜单</a>
</li>
                                    
<li>
    <a href="../model-form-callback/" class="dropdown-item">表单回调</a>
</li>
                                    
<li>
    <a href="../model-form-data/" class="dropdown-item">表单数据源</a>
</li>
                                    
<li>
    <a href="../model-form-field-management/" class="dropdown-item">表单字段的管理</a>
</li>
                                    
<li>
    <a href="../model-form-fields/" class="dropdown-item">表单字段的使用</a>
</li>
                                    
<li>
    <a href="../model-form-init/" class="dropdown-item">表单初始化</a>
</li>
                                    
<li>
    <a href="../model-form-layout/" class="dropdown-item">表单布局</a>
</li>
                                    
<li>
    <a href="../model-form-modal/" class="dropdown-item">表单弹窗</a>
</li>
                                    
<li>
    <a href="../model-form-step/" class="dropdown-item">分步表单</a>
</li>
                                    
<li>
    <a href="../model-form-trans/" class="dropdown-item">表单字段翻译</a>
</li>
                                    
<li>
    <a href="../model-form-upload/" class="dropdown-item">图片/文件上传</a>
</li>
                                    
<li>
    <a href="../model-form-validation/" class="dropdown-item">表单验证</a>
</li>
                                    
<li>
    <a href="../model-form-when/" class="dropdown-item">表单字段动态显示</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">表单基本使用</a>
</li>
                                    
<li>
    <a href="../model-grid-actions/" class="dropdown-item">行的使用和扩展</a>
</li>
                                    
<li>
    <a href="../model-grid-async/" class="dropdown-item">表格异步渲染</a>
</li>
                                    
<li>
    <a href="../model-grid-column-display/" class="dropdown-item">列的显示和扩展</a>
</li>
                                    
<li>
    <a href="../model-grid-column-filter/" class="dropdown-item">列过滤器</a>
</li>
                                    
<li>
    <a href="../model-grid-column/" class="dropdown-item">列的基本使用</a>
</li>
                                    
<li>
    <a href="../model-grid-combination/" class="dropdown-item">组合表头</a>
</li>
                                    
<li>
    <a href="../model-grid-custom-tools/" class="dropdown-item">工具栏</a>
</li>
                                    
<li>
    <a href="../model-grid-data/" class="dropdown-item">表格数据源</a>
</li>
                                    
<li>
    <a href="../model-grid-editable/" class="dropdown-item">数据表格行内编辑</a>
</li>
                                    
<li>
    <a href="../model-grid-events/" class="dropdown-item">数据表格事件</a>
</li>
                                    
<li>
    <a href="../model-grid-export/" class="dropdown-item">数据导出</a>
</li>
                                    
<li>
    <a href="../model-grid-exporter/" class="dropdown-item">自定义导出</a>
</li>
                                    
<li>
    <a href="../model-grid-filters/" class="dropdown-item">查询过滤</a>
</li>
                                    
<li>
    <a href="../model-grid-header/" class="dropdown-item">头部和脚部</a>
</li>
                                    
<li>
    <a href="../model-grid-quick-create/" class="dropdown-item">快捷创建</a>
</li>
                                    
<li>
    <a href="../model-grid-quick-search/" class="dropdown-item">表格快捷搜索</a>
</li>
                                    
<li>
    <a href="../model-grid-relationship/" class="dropdown-item">表格关联关系</a>
</li>
                                    
<li>
    <a href="../model-grid-selector/" class="dropdown-item">表格规格筛选器</a>
</li>
                                    
<li>
    <a href="../model-grid-softdelete/" class="dropdown-item">数据软删除</a>
</li>
                                    
<li>
    <a href="../model-grid-trans/" class="dropdown-item">表格字段翻译</a>
</li>
                                    
<li>
    <a href="../model-grid-tree/" class="dropdown-item">树状表格</a>
</li>
                                    
<li>
    <a href="../model-grid/" class="dropdown-item">表格基本使用</a>
</li>
                                    
<li>
    <a href="../model-json/" class="dropdown-item">JSON格式字段处理</a>
</li>
                                    
<li>
    <a href="../model-relationship/" class="dropdown-item">表单关联关系</a>
</li>
                                    
<li>
    <a href="../model-repository/" class="dropdown-item">数据仓库</a>
</li>
                                    
<li>
    <a href="../model-show-extend/" class="dropdown-item">详情字段显示扩展</a>
</li>
                                    
<li>
    <a href="../model-show-field/" class="dropdown-item">字段显示</a>
</li>
                                    
<li>
    <a href="../model-show-init/" class="dropdown-item">数据详情初始化</a>
</li>
                                    
<li>
    <a href="../model-show-relation/" class="dropdown-item">关联关系</a>
</li>
                                    
<li>
    <a href="../model-show-trans/" class="dropdown-item">数据详情字段翻译</a>
</li>
                                    
<li>
    <a href="../model-show/" class="dropdown-item">数据详情基本使用</a>
</li>
                                    
<li>
    <a href="../model-tree/" class="dropdown-item">模型树</a>
</li>
                                    
<li>
    <a href="../multi-app/" class="dropdown-item">多应用 (多后台)</a>
</li>
                                    
<li>
    <a href="../notice/" class="dropdown-item">开发前必读</a>
</li>
                                    
<li>
    <a href="../permission/" class="dropdown-item">权限控制</a>
</li>
                                    
<li>
    <a href="../qa/" class="dropdown-item">常见问题汇总</a>
</li>
                                    
<li>
    <a href="../quick-start/" class="dropdown-item">快速开始</a>
</li>
                                    
<li>
    <a href="../response/" class="dropdown-item">动作以及表单响应</a>
</li>
                                    
<li>
    <a href="../section/" class="dropdown-item">区块（section）</a>
</li>
                                    
<li>
    <a href="../theme/" class="dropdown-item">主题与颜色</a>
</li>
                                    
<li>
    <a href="../trans/" class="dropdown-item">多语言</a>
</li>
                                    
<li>
    <a href="../update/" class="dropdown-item">版本升级须知</a>
</li>
                                    
<li>
    <a href="../widgets-alert/" class="dropdown-item">警告框</a>
</li>
                                    
<li>
    <a href="../widgets-box/" class="dropdown-item">卡片</a>
</li>
                                    
<li>
    <a href="../widgets-charts/" class="dropdown-item">图表</a>
</li>
                                    
<li>
    <a href="../widgets-checkbox/" class="dropdown-item">单/复选框</a>
</li>
                                    
<li>
    <a href="../widgets-data-card/" class="dropdown-item">数据统计卡片</a>
</li>
                                    
<li>
    <a href="../widgets-dialog-form/" class="dropdown-item">Widgets dialog form</a>
</li>
                                    
<li>
    <a href="../widgets-dropdown/" class="dropdown-item">下拉菜单</a>
</li>
                                    
<li>
    <a href="../widgets-form/" class="dropdown-item">工具表单</a>
</li>
                                    
<li>
    <a href="../widgets-js/" class="dropdown-item">Widgets js</a>
</li>
                                    
<li>
    <a href="../widgets-markdown/" class="dropdown-item">Markdown</a>
</li>
                                    
<li>
    <a href="../widgets-modal/" class="dropdown-item">模态窗 (Modal)</a>
</li>
                                    
<li>
    <a href="../widgets-navbar/" class="dropdown-item">Widgets navbar</a>
</li>
                                    
<li>
    <a href="../widgets-tab/" class="dropdown-item">选项卡</a>
</li>
                                    
<li>
    <a href="../widgets-table/" class="dropdown-item">Widgets table</a>
</li>
                                    
<li>
    <a href="../widgets-tooltip/" class="dropdown-item">提示窗</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../model-form-when/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../model-grid-actions/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#_1" class="nav-link">表单基本使用</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#_2" class="nav-link">示例</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_3" class="nav-link">数据仓库</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_4" class="nav-link">表单定义</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_6" class="nav-link">自定义工具</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_8" class="nav-link">表单底部</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#_9" class="nav-link">常用方法</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="_1">表单基本使用</h1>
<h2 id="_2">示例</h2>
<p><code>Dcat\Admin\Form</code>类用于快速生成表单页面，先来个例子，数据库中有<code>movies</code>表</p>
<pre><code class="language-sql">CREATE TABLE `movies` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `director` int(10) unsigned NOT NULL,
  `describe` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `rate` tinyint unsigned NOT NULL,
  `released` enum(0, 1),
  `release_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

</code></pre>
<p>对应的数据模型为<code>App\Models\Movie</code>，数据仓库为<code>App\Admin\Repositories\Movie</code>：</p>
<pre><code class="language-php">use App\Admin\Repositories\Movie;
use Dcat\Admin\Form;
use Dcat\Admin\Admin;

$form = Form::make(new Movie(), function (Form $form) {
    // 显示记录id
    $form-&gt;display('id', 'ID');

    // 添加text类型的input框
    $form-&gt;text('title', '电影标题');

    $directors = [
        1 =&gt; 'John',
        2 =&gt; 'Smith',
        3 =&gt; 'Kate',
    ];

    $form-&gt;select('director', '导演')-&gt;options($directors);

    // 添加describe的textarea输入框
    $form-&gt;textarea('describe', '简介');

    // 数字输入框
    $form-&gt;number('rate', '打分');

    // 添加开关操作
    $form-&gt;switch('released', '发布？');

    // 添加日期时间选择框
    $form-&gt;datetime('release_at', '发布时间');

    // 两个时间显示
    $form-&gt;display('created_at', '创建时间');
    $form-&gt;display('updated_at', '修改时间');
});
</code></pre>
<h2 id="_3">数据仓库</h2>
<p>数据仓库(<code>Repository</code>)是一个可以提供特定接口对数据进行读写操作的类，通过数据仓库的引入，可以让页面的构建不再关心数据读写功能的具体实现，开发者只需要实现特定的操作接口即可轻松切换数据源。关于数据仓库的详细用法请参考文档<a href="../model-repository/">数据仓库</a>。</p>
<h2 id="_4">表单定义</h2>
<p>推荐使用以下方式构建表单</p>
<pre><code class="language-php">use App\Admin\Repositories\Movie;
use Dcat\Admin\Form;
use Dcat\Admin\Admin;

$form = Form::make(new Movie, function (Form $form) {
    // 显示记录id
    $form-&gt;display('id', 'ID');

    $form-&gt;select('director', '导演')-&gt;options($directors);

    ...
});
</code></pre>
<h3 id="_5">获取当前模型数据</h3>
<p>在闭包内可以获取到当前模型的数据（编辑）</p>
<pre><code class="language-php">Form::make(new Movie, function (Form $form) {
    // 显示记录id
    $form-&gt;display('id', 'ID');

    // 获取模型数据，如果&quot;status == 1&quot;则显示&quot;rate&quot;字段
    if ($form-&gt;model()-&gt;status == 1) {
        $form-&gt;number('rate');
    }

    $form-&gt;select('director', '导演')-&gt;options($directors);

    ...
});
</code></pre>
<h2 id="_6">自定义工具</h2>
<p>表单右上角默认有返回和跳转列表两个按钮工具, 可以使用下面的方式修改它:</p>
<pre><code class="language-php">$form-&gt;tools(function (Form\Tools $tools) {
    // 去掉跳转列表按钮
    $tools-&gt;disableList();
    // 去掉跳转详情页按钮
    $tools-&gt;disableView();
    // 去掉删除按钮
    $tools-&gt;disableDelete();

    // 添加一个按钮, 参数可以是字符串, 匿名函数, 或者实现了Renderable或Htmlable接口的对象实例
    $tools-&gt;append('&lt;a class=&quot;btn btn-sm btn-danger&quot;&gt;&lt;i class=&quot;fa fa-trash&quot;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;delete&lt;/a&gt;');
});

// 去除整个工具栏内容
$form-&gt;disableHeader();

// 也可以通过以下方式去除工具栏的默认按钮
$form-&gt;disableListButton();
$form-&gt;disableViewButton();
$form-&gt;disableDeleteButton();

</code></pre>
<h3 id="_7">自定义复杂工具按钮</h3>
<p>请参考文档<a href="../action-form/">表单动作</a></p>
<h2 id="_8">表单底部</h2>
<p>使用下面的方法去掉form底部的元素</p>
<pre><code class="language-php">$form-&gt;footer(function ($footer) {

    // 去掉`重置`按钮
    $footer-&gt;disableReset();

    // 去掉`提交`按钮
    $footer-&gt;disableSubmit();

    // 去掉`查看`checkbox
    $footer-&gt;disableViewCheck();

    // 去掉`继续编辑`checkbox
    $footer-&gt;disableEditingCheck();

    // 去掉`继续创建`checkbox
    $footer-&gt;disableCreatingCheck();

    // 设置`查看`默认选中
    $footer-&gt;defaultViewChecked();

    // 设置`继续编辑`默认选中
    $footer-&gt;defaultEditingChecked();

    // 设置`继续创建`默认选中
    $footer-&gt;defaultCreatingChecked();
});

// 去除整个底部内容
$form-&gt;disableFooter();

// 也可以通过以下方式去底部元素
$form-&gt;disableSubmitButton();
$form-&gt;disableResetButton();
$form-&gt;disableViewCheck();
$form-&gt;disableEditingCheck();
$form-&gt;disableCreatingCheck();

// 设置`查看`默认选中
$form-&gt;defaultViewChecked();

// 设置`继续编辑`默认选中
$form-&gt;defaultEditingChecked();

// 设置`继续创建`默认选中
$form-&gt;defaultCreatingChecked();
</code></pre>
<p>自定义视图</p>
<pre><code class="language-php">$form-&gt;footer(function ($footer) {
    $footer-&gt;view('...', [...]);
});
</code></pre>
<h2 id="_9">常用方法</h2>
<h3 id="_10">表单布局</h3>
<p>请参考<a href="../model-form-layout/">表单布局</a></p>
<h3 id="responsevalidationmessages">返回字段验证出错信息 (responseValidationMessages)</h3>
<p>通过<code>responseValidationMessages</code>方法可以很方便的返回字段验证出错信息，而不需要使用<code>Laravel validation</code>功能。</p>
<p>普通使用</p>
<pre><code class="language-php">protected function form()
{
    return Form::make(new Model(), function (Form $form) {
        if (...) { // 验证逻辑
            $form-&gt;responseValidationMessages('title', 'title格式错误');

            // 如有多个错误信息，第二个参数可以传数组
            $form-&gt;responseValidationMessages('content', ['content格式错误', 'content不能为空']);
        }
    });
}
</code></pre>
<p>在事件中使用</p>
<blockquote>
<p>{tip} 此方法仅在<code>submitted</code>事件中可用</p>
</blockquote>
<pre><code class="language-php">$form-&gt;submitted(function (Form $form) {
    // 接收表单参数
    $title = $form-&gt;title;

    if (...) { // 验证逻辑
        $form-&gt;responseValidationMessages('title', 'title格式错误');

        // 如有多个错误信息，第二个参数可以传数组
        $form-&gt;responseValidationMessages('content', ['content格式错误', 'content不能为空']);
    }
});
</code></pre>
<h3 id="_11">移除提交按钮</h3>
<pre><code class="language-php">// 去掉提交按钮
$form-&gt;disableSubmitButton();


// 去掉重置按钮
$form-&gt;disableResetButton();
</code></pre>
<h3 id="ignore">忽略掉不需要保存的字段 (ignore)</h3>
<pre><code class="language-php">$form-&gt;ignore(['column1', 'column2', 'column3']);

// 取消已忽略的字段
$form-&gt;removeIgnoredFields(['column1',]);
</code></pre>
<h3 id="width">设置宽度 (width)</h3>
<p>此处的宽度值是一个<code>1-12</code>之间的数字，第一个参数为 <code>field</code> 的宽，第二个参数为 <code>label</code> 的宽可省略</p>
<pre><code class="language-php">$form-&gt;width(10, 2);
</code></pre>
<h3 id="action">设置表单提交的action</h3>
<pre><code class="language-php">$form-&gt;action('auth/users');
</code></pre>
<h3 id="iscreating">判断是否是新增 (isCreating)</h3>
<p>新增页面和保存新增数据都可以用这个方法判断</p>
<pre><code class="language-php">if ($form-&gt;isCreating()) {
    ...
}
</code></pre>
<h3 id="isediting">判断是否是编辑 (isEditing)</h3>
<p>编辑页面和保存编辑数据都可以用这个方法判断</p>
<pre><code class="language-php">if ($form-&gt;isEditing()) {
    ...
}
</code></pre>
<h3 id="isdeleting">判断是否是删除 (isDeleting)</h3>
<pre><code class="language-php">if ($form-&gt;isDeleting()) {
    ...
}
</code></pre>
<h3 id="id-getkey">获取ID (getKey)</h3>
<p>新增页面无效，必须在闭包里面使用</p>
<pre><code class="language-php">return Form::make(new User, function (Form $form) {
    $id = $form-&gt;getKey();

    ...
});
</code></pre>
<h3 id="model">获取编辑数据 (model)</h3>
<p>新增页面无效，必须在闭包里面使用</p>
<pre><code class="language-php">return Form::make(new User, function (Form $form) {
    $username = $form-&gt;model()-&gt;xxx;

    ...
});
</code></pre>
<h3 id="input">获取表单提交的数据 (input)</h3>
<pre><code class="language-php">$form-&gt;saving(function (Form $form) {
    $username = $form-&gt;username;

    // 等同于
    $username = $form-&gt;input('username');
});
</code></pre>
<h3 id="_12">修改或删除表单提交的数据</h3>
<pre><code class="language-php">$form-&gt;saving(function (Form $form) {
    // 修改
    $form-&gt;input('username', 'Marry');
    // 或
    $form-&gt;username = 'Marry';

    // 删除
    $form-&gt;deleteInput('username');
});
</code></pre>
<h3 id="updates">获取最终保存的数据 (updates)</h3>
<p>此方法仅在<code>saved</code>回调有效。</p>
<pre><code class="language-php">$form-&gt;saved(function (Form $form) {

    $data = $form-&gt;updates();

});
</code></pre>
<p><a name="redirect"></a></p>
<h3 id="redirect">页面跳转 (redirect)</h3>
<p>跳转到指定页面，此方法仅在<a href="../model-form-callback/">表单回调</a>事件内可用</p>
<pre><code class="language-php">// 跳转并提示成功信息
$form-&gt;saved(function (Form $form) {
    return $form-&gt;response()-&gt;success('保存成功')-&gt;redirect('auth/user');
});

// 跳转并提示错误信息
$form-&gt;saving(function (Form $form) {
    return $form-&gt;response()-&gt;error('系统错误')-&gt;redirect('auth/user');
});
</code></pre>
<p><a name="confirm"></a></p>
<h3 id="confirm">显示确认弹窗 (confirm)</h3>
<p>点击表单提交按钮时弹出确认弹窗，如果是在普通数据表单中</p>
<pre><code class="language-php">$form-&gt;confirm('您确定要提交表单吗？', 'content');
</code></pre>
<h3 id="wrap">设置外层容器 (wrap)</h3>
<pre><code class="language-php"> // 更改表格外层容器
$form-&gt;wrap(function (Renderable $view) {
    $tab = Tab::make();

    $tab-&gt;add('示例', $view);
    $tab-&gt;add('代码', $this-&gt;code(), true);

    return $tab;
});
</code></pre>
<p><a name="saving"></a></p>
<h3 id="saving">修改待保存的表单输入值 (saving)</h3>
<p>通过<code>saving</code>方法可以更改待保存数据的格式。</p>
<pre><code class="language-php">use Dcat\Admin\Support\Helper;

$form-&gt;mutipleFile('files')-&gt;saving(function ($paths) {
    $paths = Helper::array($paths);

    // 获取数据库当前行的其他字段
    $username = $this-&gt;username;

    // 最终转化为json保存到数据库
    return json_encode($paths);
});
</code></pre>
<p><a name="customFormat"></a></p>
<h3 id="customformat">修改表单数据显示 (customFormat)</h3>
<p>通过<code>customFormat</code>方法可以改变从外部注入到表单的字段值。</p>
<p>如下例子中，<code>mutipleFile</code>字段要求待渲染的字段值为数组格式，我们可以通过<code>customFormat</code>方法把从数据库查出的字段值转化为<code>array</code>格式</p>
<pre><code class="language-php">use Dcat\Admin\Support\Helper;

$form-&gt;mutipleFile('files')-&gt;saving(function ($paths) {
    $paths = Helper::array($paths);

    return json_encode($paths);
})-&gt;customFormat(function ($paths) {
    // 获取数据库当前行的其他字段
    $username = $this-&gt;username;

    // 转为数组
    return Helper::array($paths);
});
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/jquery-3.6.0.min.js"></script>
        <script src="../../js/bootstrap.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
